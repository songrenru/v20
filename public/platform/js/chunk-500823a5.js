(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-500823a5"],{"168b":function(e,t,a){"use strict";a("9142")},"16e1f":function(e,t,a){},"1f16":function(e,t,a){"use strict";a.r(t);a("4e82");var l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("a-drawer",{attrs:{title:e.title,visible:e.visible,width:700,"body-style":{paddingBottom:"80px"}},on:{close:function(t){return e.resetForm(!1)}}},[t("a-form-model",{ref:"ruleForm",attrs:{model:e.buildForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[t("div",{staticStyle:{display:"flex"}},[t("a-card",{staticStyle:{width:"630px"},attrs:{title:"基本信息"}},[t("a-form-model-item",{attrs:{label:"楼层名称",prop:"layer_name"}},[t("a-input",{staticClass:"input_style_240",model:{value:e.buildForm.layer_name,callback:function(t){e.$set(e.buildForm,"layer_name",t)},expression:"buildForm.layer_name"}})],1),t("a-form-model-item",{attrs:{label:"楼层编号",prop:"layer_number"}},[t("a-input-number",{staticClass:"input_style_240",attrs:{max:99,min:1,extra:"必填项（仅限1-99不重复的数字"},model:{value:e.buildForm.layer_number,callback:function(t){e.$set(e.buildForm,"layer_number",t)},expression:"buildForm.layer_number"}})],1),t("a-form-model-item",{attrs:{label:"排序",prop:"sort",extra:"数字越大越靠前"}},[t("a-input-number",{staticClass:"input_style_240",attrs:{min:0},model:{value:e.buildForm.sort,callback:function(t){e.$set(e.buildForm,"sort",t)},expression:"buildForm.sort"}})],1),t("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[t("a-switch",{attrs:{"checked-children":"开启","un-checked-children":"关闭","default-checked":""},model:{value:e.statusBool,callback:function(t){e.statusBool=t},expression:"statusBool"}})],1)],1)],1)]),t("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[t("a-button",{staticStyle:{"margin-right":"30px"},on:{click:function(t){return e.resetForm(!1)}}},[e._v(" 关闭 ")]),t("a-button",{staticStyle:{"margin-right":"50px"},attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.onSubmit}},[e._v(" 保存 ")])],1)],1)},r=[],o=(a("a9e3"),a("8bbf")),i=a.n(o),n=a("c1df"),u=a.n(n),s=a("3990"),c=Object(o["defineComponent"])({props:{visible:{type:Boolean,default:!1},single_id:{type:[String,Number],default:0},floor_id:{type:[String,Number],default:0},layer_id:{type:[String,Number],default:0}},setup:function(e,t){Object(o["watch"])((function(){return e.visible}),(function(t){t&&(e.layer_id>0?d.value="编辑楼层":d.value="添加楼层",y(e.single_id,e.floor_id,e.layer_id))}),{deep:!0});var a=function(e){var t=e.getFullYear(),a=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,l=e.getDate()<10?"0"+e.getDate():e.getDate(),r=t+"-"+a+"-"+l;return r},l=Object(o["ref"])(!1),r=Object(o["ref"])(!1),n=Object(o["ref"])(!1),c=Object(o["ref"])({}),d=Object(o["ref"])("编辑楼层"),p=Object(o["ref"])({layer_name:[{required:!0,message:"请输入楼层名称",trigger:"blur"}],layer_number:[{required:!0,message:"请输入楼层编号",trigger:"blur"}]}),f=Object(o["ref"])(),m=Object(o["ref"])({span:6}),b=Object(o["ref"])({span:16}),_=function(){f.value.validate((function(t){t&&(c.value.single_id=e.single_id,c.value.status=l.value?1:0,console.log("buildForm.value===>",c.value),n.value=!0,g())}))},v=function(e){t.emit("closeLayerDrawer",e),c.value={},f.value.resetFields()},g=function(){i.a.prototype.request(s["a"].saveUnitRentalLayerInfo,c.value).then((function(t){n.value=!1,e.floor_id>0?i.a.prototype.$message.success("编辑成功！"):i.a.prototype.$message.success("添加成功！"),v(!0)})).catch((function(e){n.value=!1}))},y=function(e,t,a){i.a.prototype.request(s["a"].unitRentalLayerInfo,{single_id:e,floor_id:t,layer_id:a}).then((function(e){c.value=e,l.value=1==e.status}))};return{confirmLoading:n,onSubmit:_,resetForm:v,buildForm:c,labelCol:m,wrapperCol:b,rules:p,saveForm:g,ruleForm:f,searchArea:r,formDate:a,moment:u.a,statusBool:l,title:d,getLayerInfo:y}}}),d=c,p=(a("168b"),a("2877")),f=Object(p["a"])(d,l,r,!1,null,"7fac06a6",null);t["default"]=f.exports},"2f17":function(e,t,a){"use strict";a("16e1f")},"44ef":function(e,t,a){"use strict";a.r(t);a("4e82");var l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("a-drawer",{attrs:{title:e.title,visible:e.visible,width:1300,"body-style":{paddingBottom:"80px"}},on:{close:function(t){return e.resetForm(!1)}}},[t("a-form-model",{ref:"ruleForm",attrs:{model:e.buildForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[t("div",{staticStyle:{display:"flex"}},[t("a-card",{staticStyle:{width:"480px"},attrs:{title:"基本信息"}},[t("a-form-model-item",{attrs:{label:"单元名称",prop:"floor_name"}},[t("a-input",{staticClass:"input_style_240",model:{value:e.buildForm.floor_name,callback:function(t){e.$set(e.buildForm,"floor_name",t)},expression:"buildForm.floor_name"}})],1),t("a-form-model-item",{attrs:{label:"单元编号",prop:"floor_number"}},[t("a-input-number",{staticClass:"input_style_240",attrs:{max:99,min:1,extra:"必填项（仅限1-99不重复的数字"},model:{value:e.buildForm.floor_number,callback:function(t){e.$set(e.buildForm,"floor_number",t)},expression:"buildForm.floor_number"}})],1),t("a-form-model-item",{attrs:{label:"单元地址",prop:"long_lat"}},[t("a-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.buildForm.long_lat,callback:function(t){e.$set(e.buildForm,"long_lat",t)},expression:"buildForm.long_lat"}}),t("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.openMap()}}},[e._v("点击获取经纬度")])],1),t("a-form-model-item",{attrs:{label:"单元管家名称",prop:"floor_keeper_name"}},[t("a-input",{staticClass:"input_style_240",model:{value:e.buildForm.floor_keeper_name,callback:function(t){e.$set(e.buildForm,"floor_keeper_name",t)},expression:"buildForm.floor_keeper_name"}})],1),t("a-form-model-item",{attrs:{label:"联系方式",prop:"floor_keeper_phone"}},[t("a-input",{staticClass:"input_style_240",model:{value:e.buildForm.floor_keeper_phone,callback:function(t){e.$set(e.buildForm,"floor_keeper_phone",t)},expression:"buildForm.floor_keeper_phone"}})],1),t("a-form-model-item",{attrs:{label:"管家头像",prop:"floor_keeper_head"}},[t("a-upload",{attrs:{name:"reply_pic",multiple:!1,action:e.uploadUrl,data:e.uploadParams,"before-upload":e.beforeUpload,showUploadList:!1,headers:e.headers},on:{change:function(t){return e.handleUploadChange(t,"floor_keeper_head")}}},[t("a-button",{attrs:{loading:e.temimgLoading}},[e._v("上传头像")]),e.imageUrl?t("a-button",{attrs:{type:"link"},on:{click:function(t){return t.stopPropagation(),e.previewImage()}}},[e._v("查看头像图片")]):e._e()],1)],1),t("a-form-model-item",{attrs:{label:"排序",prop:"sort"}},[t("a-input-number",{staticClass:"input_style_240",attrs:{min:0},model:{value:e.buildForm.sort,callback:function(t){e.$set(e.buildForm,"sort",t)},expression:"buildForm.sort"}})],1),t("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[t("a-switch",{attrs:{"checked-children":"开启","un-checked-children":"关闭","default-checked":""},model:{value:e.statusBool,callback:function(t){e.statusBool=t},expression:"statusBool"}})],1)],1),t("a-card",{staticStyle:{width:"320px"},attrs:{title:"相关费用"}},[t("a-form-model-item",{attrs:{label:"物业费",prop:"property_fee"}},[t("a-input-number",{staticClass:"input_style_140",model:{value:e.buildForm.property_fee,callback:function(t){e.$set(e.buildForm,"property_fee",t)},expression:"buildForm.property_fee"}})],1),t("a-form-model-item",{attrs:{label:"水费",prop:"water_fee"}},[t("a-input-number",{staticClass:"input_style_140",model:{value:e.buildForm.water_fee,callback:function(t){e.$set(e.buildForm,"water_fee",t)},expression:"buildForm.water_fee"}})],1),t("a-form-model-item",{attrs:{label:"电费",prop:"electric_fee"}},[t("a-input-number",{staticClass:"input_style_140",model:{value:e.buildForm.electric_fee,callback:function(t){e.$set(e.buildForm,"electric_fee",t)},expression:"buildForm.electric_fee"}})],1),t("a-form-model-item",{attrs:{label:"燃气费",prop:"gas_fee"}},[t("a-input-number",{staticClass:"input_style_140",model:{value:e.buildForm.gas_fee,callback:function(t){e.$set(e.buildForm,"gas_fee",t)},expression:"buildForm.gas_fee"}})],1),t("a-form-model-item",{attrs:{label:"停车费",prop:"parking_fee"}},[t("a-input-number",{staticClass:"input_style_140",model:{value:e.buildForm.parking_fee,callback:function(t){e.$set(e.buildForm,"parking_fee",t)},expression:"buildForm.parking_fee"}})],1)],1),t("a-card",{staticStyle:{width:"480px"},attrs:{title:"单元资料"}},[t("a-form-model-item",{attrs:{label:"单元面积(m²)",prop:"floor_area"}},[t("a-input",{staticClass:"input_style_240",model:{value:e.buildForm.floor_area,callback:function(t){e.$set(e.buildForm,"floor_area",t)},expression:"buildForm.floor_area"}})],1),t("a-form-model-item",{attrs:{label:"门户数量",prop:"house_num"}},[t("a-input-number",{staticClass:"input_style_240",model:{value:e.buildForm.house_num,callback:function(t){e.$set(e.buildForm,"house_num",t)},expression:"buildForm.house_num"}})],1),t("a-form-model-item",{attrs:{label:"地面建筑层数",prop:"floor_upper_layer_num"}},[t("a-input-number",{staticClass:"input_style_240",model:{value:e.buildForm.floor_upper_layer_num,callback:function(t){e.$set(e.buildForm,"floor_upper_layer_num",t)},expression:"buildForm.floor_upper_layer_num"}})],1),t("a-form-model-item",{attrs:{label:"地下建筑层数",prop:"floor_lower_layer_num"}},[t("a-input-number",{staticClass:"input_style_240",model:{value:e.buildForm.floor_lower_layer_num,callback:function(t){e.$set(e.buildForm,"floor_lower_layer_num",t)},expression:"buildForm.floor_lower_layer_num"}})],1),t("a-form-model-item",{attrs:{label:"起始住人楼层",prop:"start_layer_num"}},[t("a-input-number",{staticClass:"input_style_240",model:{value:e.buildForm.start_layer_num,callback:function(t){e.$set(e.buildForm,"start_layer_num",t)},expression:"buildForm.start_layer_num"}})],1),t("a-form-model-item",{attrs:{label:"最高住人楼层",prop:"end_layer_num"}},[t("a-input-number",{staticClass:"input_style_240",model:{value:e.buildForm.end_layer_num,callback:function(t){e.$set(e.buildForm,"end_layer_num",t)},expression:"buildForm.end_layer_num"}})],1)],1)],1)]),t("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"center",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[t("a-button",{staticStyle:{"margin-right":"30px"},on:{click:function(t){return e.resetForm(!1)}}},[e._v(" 关闭 ")]),t("a-button",{attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.onSubmit}},[e._v(" 保存 ")])],1),t("a-modal",{attrs:{title:"预览图片",width:650,visible:e.previewVisible,footer:null},on:{cancel:e.handlePreviewCancel}},[t("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[t("img",{staticStyle:{width:"550px"},attrs:{preview:"2",src:e.imageUrl}})])]),e.mapVisible?t("a-modal",{attrs:{title:"百度地图拾取经纬度",visible:e.mapVisible,width:800},on:{ok:e.handleMapOk,cancel:e.handleMapCancel}},[t("a-input",{staticClass:"input_style",staticStyle:{width:"200px"},attrs:{type:"text",id:"suggestId",name:"address_detail",placeholder:"请输入城市名/地区名"},model:{value:e.address_detail,callback:function(t){e.address_detail=t},expression:"address_detail"}}),t("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.searchMap}},[e._v("搜索")]),t("div",{staticStyle:{width:"100%",height:"500px","margin-top":"10px"},attrs:{id:"allmap"}})],1):e._e()],1)},r=[],o=(a("a9e3"),a("8bbf")),i=a.n(o),n=a("c1df"),u=a.n(n),s=a("3990"),c=Object(o["defineComponent"])({props:{visible:{type:Boolean,default:!1},single_id:{type:[String,Number],default:0},floor_id:{type:[String,Number],default:0}},setup:function(e,t){Object(o["watch"])((function(){return e.visible}),(function(t){t&&(e.floor_id>0?d.value="编辑单元":d.value="添加单元",U(e.single_id,e.floor_id))}),{deep:!0});var a=function(e){var t=e.getFullYear(),a=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,l=e.getDate()<10?"0"+e.getDate():e.getDate(),r=t+"-"+a+"-"+l;return r},l=Object(o["ref"])(!1),r=Object(o["ref"])(!1),n=Object(o["ref"])(!1),c=Object(o["ref"])({}),d=Object(o["ref"])("编辑单元"),p=Object(o["ref"])(!1),f=Object(o["reactive"])({authorization:"authorization-text"}),m=Object(o["ref"])("/v20/public/index.php/common/common.UploadFile/uploadImg"),b=Object(o["reactive"])({upload_dir:"village"}),_=Object(o["ref"])({floor_name:[{required:!0,message:"请输入单元名称",trigger:"blur"}],floor_number:[{required:!0,message:"请输入单元编号",trigger:"blur"}],long_lat:[{required:!0,message:"请选择单元地址",trigger:"blur"}],floor_area:[{required:!0,message:"请输入单元面积",trigger:"blur"}],house_num:[{required:!0,message:"请输入所含门户数",trigger:"blur"}]}),v=Object(o["ref"])(),g=Object(o["ref"])({span:6}),y=Object(o["ref"])({span:16}),h=function(){v.value.validate((function(t){t&&(c.value.single_id=e.single_id,c.value.status=l.value?1:0,console.log("buildForm.value===>",c.value),n.value=!0,w())}))},x=function(e){t.emit("closeDrawer",e),c.value={},v.value.resetFields()},w=function(){i.a.prototype.request(s["a"].saveUnitRentalFloorInfo,c.value).then((function(t){n.value=!1,e.floor_id>0?i.a.prototype.$message.success("编辑成功！"):i.a.prototype.$message.success("添加成功！"),x(!0)})).catch((function(e){n.value=!1}))},k=Object(o["ref"])(!1),F=Object(o["ref"])(""),O=Object(o["ref"])(""),j=Object(o["ref"])(""),C=function(){c.value.long_lat=O.value+","+F.value,c.value.long=O.value,c.value.lat=F.value,k.value=!1,r.value=!1},S=function(){k.value=!1,r.value=!1},L=function(){k.value=!0,q()},B=function(){j.value&&(r.value=!0,q())},q=function(){Object(o["nextTick"])((function(){var e,t=new BMap.Map("allmap");if(c.value.lat&&c.value.long&&!r.value){t.clearOverlays(),e=new BMap.Point(c.value.long,c.value.lat);new BMap.Size(0,15);t.addOverlay(new BMap.Marker(e))}else e=j.value;t.centerAndZoom(e,15),t.enableScrollWheelZoom(),t.addEventListener("click",(function(e){t.clearOverlays(),t.addOverlay(new BMap.Marker(e.point)),O.value=e.point.lng,F.value=e.point.lat,console.log(e.point),(new BMap.Geocoder).getLocation(e.point,(function(e){j.value=e.address}))}))}))},$=Object(o["ref"])(""),U=function(e,t){i.a.prototype.request(s["a"].unitRentalFloorInfo,{single_id:e,floor_id:t}).then((function(e){c.value=e,c.value.sort=e.sort||0,c.value.long_lat=e.long+","+e.lat,$.value=e.floor_keeper_head;var t=new BMap.Point(Number(e.long),Number(e.lat));(new BMap.Geocoder).getLocation(t,(function(e){j.value=e.address})),l.value=1==e.status}))},M=function(e,t){if("uploading"!==e.file.status)return"error"===e.file.status?(i.a.prototype.$message.error("上传失败!"),void(p.value=!0)):void("done"===e.file.status&&($.value=e.file.response.data.full_url,c.value.floor_keeper_head=e.file.response.data.image,p.value=!1));p.value=!0},I=function(e,t){var a="image/jpeg"===e.type||"image/png"===e.type;a||i.a.prototype.$message.error("You can only upload JPG file!");var l=e.size/1024/1024<2;return l||i.a.prototype.$message.error("Image must smaller than 2MB!"),a&&l},R=Object(o["ref"])(!1),D=function(){R.value=!1},P=function(e){R.value=!0};return{confirmLoading:n,onSubmit:h,resetForm:x,buildForm:c,labelCol:g,wrapperCol:y,rules:_,saveForm:w,openMap:L,mapVisible:k,userLat:F,userLng:O,address_detail:j,handleMapOk:C,searchMap:B,initMap:q,handleMapCancel:S,ruleForm:v,searchArea:r,formDate:a,moment:u.a,statusBool:l,title:d,getFloorInfo:U,uploadUrl:m,uploadParams:b,headers:f,beforeUpload:I,temimgLoading:p,handleUploadChange:M,imageUrl:$,previewVisible:R,handlePreviewCancel:D,previewImage:P}}}),d=c,p=(a("2f17"),a("2877")),f=Object(p["a"])(d,l,r,!1,null,"2b23b206",null);t["default"]=f.exports},"5bcb":function(e,t,a){},"5fa7":function(e,t,a){"use strict";a.r(t);a("b0c0");var l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("a-drawer",{attrs:{title:e.xtitle,visible:e.visible,width:850,"body-style":{paddingBottom:"80px"}},on:{close:e.resetForm}},[t("a-form-model",{ref:"ruleForm",attrs:{model:e.buildForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[t("a-form-model-item",{attrs:{label:"绑定员工",prop:"yuangong",extra:"多选，不限制数量，绑定员工后，业主加好友时随机从其中选择"}},[t("a-select",{attrs:{mode:"multiple",placeholder:"请选择员工",value:e.selectedItems},on:{change:function(t){return e.handleSelectChange(t,"yuangong")}}},e._l(e.filteredOptions,(function(a,l){return t("a-select-option",{key:l,attrs:{value:a.name,index:l}},[e._v(" "+e._s(a.name))])})),1)],1),e.floor_id<=0?t("a-form-model-item",{attrs:{label:"绑定楼栋",prop:"is_kefu",extra:"选择“是”选项，添加客服时只能选择楼栋下的业主；选择“否”选项，添加客服时能选择楼栋所有的业主"}},[t("a-radio-group",{attrs:{name:"radioGroup"},model:{value:e.buildForm.is_kefu,callback:function(t){e.$set(e.buildForm,"is_kefu",t)},expression:"buildForm.is_kefu"}},[t("a-radio",{attrs:{value:1}},[e._v("是")]),t("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1):e._e(),t("a-form-model-item",{attrs:{label:"欢迎语",prop:"welcome_tip",extra:"变量填写规则（可对应复制到填写内容）：{姓名} {手机号}"}},[t("a-textarea",{staticStyle:{padding:"5px width:200px",height:"100px",resize:"none"},attrs:{placeholder:"请输入欢迎语"},model:{value:e.buildForm.welcome_tip,callback:function(t){e.$set(e.buildForm,"welcome_tip",t)},expression:"buildForm.welcome_tip"}})],1),t("a-form-model-item",{attrs:{label:"企业微信服务群二维码"}},[t("a-upload",{attrs:{name:"reply_pic",multiple:!1,action:e.uploadUrl,data:e.uploadParams,"before-upload":e.beforeUpload,showUploadList:!1,headers:e.headers},on:{change:function(t){return e.handleUploadChange(t,"qycode")}}},[t("a-button",{attrs:{loading:e.qyimgLoading}},[e._v("上传二维码")]),e.ercodeUrl?t("a-button",{attrs:{type:"link"},on:{click:function(t){return t.stopPropagation(),e.lookCode()}}},[e._v("查看二维码")]):e._e(),t("a-button",{attrs:{type:"link"},on:{click:function(t){return t.stopPropagation(),e.lookHelp.apply(null,arguments)}}},[e._v("点击可查看使用帮助")])],1)],1),t("a-form-model-item",{attrs:{label:"装修模板",prop:"zhuangxiu"}},[t("template",{slot:"extra"},[e._v(" 1、无需装修：将直接使用二维码自带的模板样式"),t("br"),e._v(" 2、系统默认模板：将直接使用我们提供的模板样式，可选择查看样式"),t("br"),e._v(" 3、上传模板：需要自行设计好模板后上传，尺寸：750*1334；注意：模板左下角需距离页面边缘间距20像素预留100*100像素的空白位置，用于放置群二维码 ")]),t("a-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择装修模板",value:e.buildForm.template_type},on:{change:function(t){return e.handleSelectChange(t,"zhuangxiu")}}},e._l(e.repaireList,(function(a,l){return t("a-select-option",{key:l,attrs:{value:a.id,index:l}},[e._v(e._s(a.name))])})),1)],2),2==e.buildForm.template_type?t("a-form-model-item",{attrs:{label:"上传模板1",prop:"template_url",extra:"尺寸：750*1334；注意：模板左下角需距离页面边缘间距20像素预留100*100像素的空白位置，用于放置群二维码"}},[t("a-upload",{attrs:{name:"reply_pic",multiple:!1,action:e.uploadUrl,data:e.uploadParams,"before-upload":e.beforeUpload,showUploadList:!1,headers:e.headers},on:{change:function(t){return e.handleUploadChange(t,"template")}}},[t("a-button",{attrs:{loading:e.temimgLoading}},[e._v("上传模板")]),e.imageUrl?t("a-button",{attrs:{type:"link"},on:{click:function(t){return t.stopPropagation(),e.previewImage()}}},[e._v("查看图片")]):e._e()],1)],1):e._e(),e.effect_img?t("a-form-model-item",{attrs:{label:"效果预览"}},[t("img",{staticStyle:{width:"50px"},attrs:{src:e.effect_img}})]):e._e()],1),t("a-modal",{attrs:{title:"查看二维码",width:350,visible:e.erCodeVisible,footer:null},on:{cancel:e.handleCodeCancel}},[t("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[t("img",{staticStyle:{width:"150px"},attrs:{preview:"1",src:e.ercodeUrl}})])]),t("a-modal",{attrs:{title:"查看图片",width:350,visible:e.previewVisible,footer:null},on:{cancel:e.handlePreviewCancel}},[t("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[t("img",{staticStyle:{width:"150px"},attrs:{preview:"2",src:e.imageUrl}})])]),t("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[t("a-button",{staticStyle:{marginRight:"8px"},on:{click:e.resetForm}},[e._v(" 关闭 ")]),t("a-button",{attrs:{loading:e.confirmLoading,type:"primary"},on:{click:e.onSubmit}},[e._v(" 保存 ")])],1)],1)},r=[],o=(a("a9e3"),a("4de4"),a("d3b7"),a("caad"),a("2532"),a("ac1f"),a("1276"),a("d81d"),a("8bbf")),i=a.n(o),n=a("3990"),u=Object(o["defineComponent"])({props:{visible:{type:Boolean,default:!1},single_id:{type:[String,Number],default:0},floor_id:{type:[String,Number],default:0}},setup:function(e,t){var a=function(){u.value=!1},l=function(){u.value=!0},r=Object(o["ref"])(""),u=Object(o["ref"])(!1),s=Object(o["ref"])(""),c=Object(o["ref"])(""),d=Object(o["reactive"])({authorization:"authorization-text"}),p=Object(o["ref"])("/v20/public/index.php/common/common.UploadFile/uploadImg"),f=Object(o["reactive"])({upload_dir:"village"}),m=Object(o["ref"])(!1),b=function(){m.value=!1},_=Object(o["ref"])(""),v=Object(o["ref"])(!1),g=Object(o["ref"])(!1),y=function(e,t){if("uploading"!==e.file.status)return"error"===e.file.status?(i.a.prototype.$message.error("上传失败!"),void("qycode"==t?v.value=!0:g.value=!0)):void("done"===e.file.status&&("qycode"==t?(r.value=e.file.response.data.full_url,S.value.qy_qrcode=e.file.response.data.image,v.value=!1):(_.value=e.file.response.data.full_url,S.value.template_url=e.file.response.data.image,g.value=!1)));"qycode"==t?v.value=!0:g.value=!0},h=function(e,t){var a="image/jpeg"===e.type||"image/png"===e.type;a||i.a.prototype.$message.error("You can only upload JPG file!");var l=e.size/1024/1024<2;return l||i.a.prototype.$message.error("Image must smaller than 2MB!"),a&&l},x=function(e){m.value=!0},w=Object(o["ref"])([]),k=Object(o["ref"])([]),F=Object(o["computed"])({get:function(){return w.value.filter((function(e){return!k.value.includes(e)}))}}),O=Object(o["ref"])([{name:"无需装修",id:0},{name:"系统默认模板",id:1},{name:"上传模板",id:2}]),j=function(){window.open(s.value)},C=Object(o["ref"])(!1),S=Object(o["ref"])({template_type:0}),L=Object(o["reactive"])({is_kefu:[{required:!0,message:"请选择是否绑定楼栋",trigger:"blur"}],welcome_tip:[{required:!0,message:"请输入欢迎语",trigger:"blur"}]}),B=Object(o["ref"])(),q=Object(o["ref"])({span:6}),$=Object(o["ref"])({span:16}),U=Object(o["ref"])("楼栋管家"),M=function(){B.value.validate((function(e){if(e){if(0==k.length)return void i.a.prototype.$message.warn("请选择绑定员工！");R()}}))},I=function(){t.emit("closeDrawer"),S.value={template_type:0},_.value="",r.value="",c.value="",B.value.resetFields()},R=function(){C.value=!0,i.a.prototype.request(n["a"].saveUnitRentalButler,S.value).then((function(e){C.value=!1,I(),i.a.prototype.$message.success("保存成功！")})).catch((function(e){C.value=!1}))},D=function(t){i.a.prototype.request(n["a"].getUnitRentalButler,{single_id:t,floor_id:e.floor_id}).then((function(e){e.buldingButler&&(S.value=e.buldingButler,r.value=e.buldingButler.qy_qrcode,_.value=e.buldingButler.template_url,c.value=e.buldingButler.effect_img,S.value.work_arr=e.buldingButler.work_arr.split(","),S.value.template_url=e.buldingButler.template_url),e.buldingButlerList&&(w.value=e.buldingButlerList),e.buldingButlerBindList&&(k.value=e.buldingButlerBindList.map((function(e){return e.name}))),s.value=e.qyhelp_url}))},P=function(e,t){if(console.log("value",e,t),"yuangong"==t){k.value=e;var a=[];w.value.map((function(t){e.map((function(e){e==t.name&&a.push(t.wid)}))})),S.value.work_arr=a}"zhuangxiu"==t&&(S.value.template_type=e,1==e&&S.value.qy_qrcode||2==value2&&S.value.qy_qrcode&&S.value.template_url?V():(S.value.effect_img="",c.value=""))},V=function(){var e=S.value.template_type;0!=e&&e&&(S.value.qy_qrcode?2!=e||S.value.template_url?i.a.prototype.request(n["a"].servicesImgPreview,{template_type:e,qy_qrcode:S.value.qy_qrcode,template_url:S.value.template_url}).then((function(e){if(console.log("services_look_img",data),data.data){var t=e.data.file_path,a=e.data.file;S.value.effect_img=a,c.value=t}})):i.a.prototype.$message.warn("请上传对应模板！"):i.a.prototype.$message.warn("请上传企业微信群二维码！"))};return Object(o["watch"])((function(){return e.visible}),(function(t){t&&(e.floor_id=parseInt(e.floor_id),e.floor_id>0&&(U.value="单元管家"),D(e.single_id))}),{deep:!0}),{confirmLoading:C,onSubmit:M,resetForm:I,buildForm:S,labelCol:q,wrapperCol:$,rules:L,saveForm:R,ruleForm:B,userList:w,repaireList:O,handleSelectChange:P,filteredOptions:F,selectedItems:k,lookHelp:j,lookCode:l,handleCodeCancel:a,ercodeUrl:r,erCodeVisible:u,getBuildInfo:D,qyhelpUrl:s,headers:d,uploadUrl:p,uploadParams:f,imageUrl:_,qyimgLoading:v,temimgLoading:g,beforeUpload:h,handleUploadChange:y,previewImage:x,previewVisible:m,handlePreviewCancel:b,xtitle:U,services_look_img:V,effect_img:c}}}),s=u,c=(a("9803"),a("2877")),d=Object(c["a"])(s,l,r,!1,null,"02fccce2",null);t["default"]=d.exports},"7f65":function(e,t,a){},"868f":function(e,t,a){"use strict";a("5bcb")},9142:function(e,t,a){},9803:function(e,t,a){"use strict";a("f4fd")},a2ce:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("a-drawer",{attrs:{title:"楼层管理",visible:e.layer_visible,width:1300,"mask-closable":!1,"body-style":{paddingBottom:"80px"}},on:{close:e.closeLayerManage}},[t("div",{staticClass:"build_index"},[t("div",{staticClass:"table-operations top-box-padding"},[t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.editBuild("",0)}}},[e._v("添加楼层")])],1),t("a-table",{attrs:{columns:e.columns,"row-key":function(e){return e.id},"data-source":e.buildingList,pagination:!1,loading:e.loading},scopedSlots:e._u([{key:"status",fn:function(a,l){return[t("a-switch",{attrs:{"checked-children":"开启","un-checked-children":"关闭",checked:1==a},on:{change:function(t){return e.switchChange(t,l)}}})]}},{key:"action",fn:function(a,l){return t("span",{},[t("a",{on:{click:function(t){return e.editBuild(l,1)}}},[e._v("编辑")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-popconfirm",{attrs:{title:"确定要删除该项吗?","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.delConfirm(l)},cancel:e.delCancel}},[t("a",{staticStyle:{color:"red"}},[e._v("删除")])])],1)}}])}),t("div",{staticClass:"total_number"},[e._v(" 总楼层数："),t("span",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.total))]),e._v("层 ")]),t("layer-edit",{attrs:{visible:e.layerEditVisible,single_id:e.single_id,floor_id:e.floor_id,layer_id:e.layer_id},on:{closeLayerDrawer:e.closeLayerDrawer}})],1)])},r=[],o=(a("a9e3"),a("4e82"),a("8bbf")),i=a.n(o),n=a("1f16"),u=a("3990"),s=Object(o["defineComponent"])({props:{layer_visible:{type:Boolean,default:!1},single_id:{type:[String,Number],default:0},floor_id:{type:[String,Number],default:0}},name:"unitRentalLayerList",components:{layerEdit:n["default"]},setup:function(e,t){Object(o["watch"])((function(){return e.layer_visible}),(function(e){e&&d()}),{deep:!0});var a=Object(o["ref"])([{title:"楼层名称",dataIndex:"layer_name"},{title:"楼层编号",dataIndex:"layer_number"},{title:"楼栋名称",dataIndex:"single_name"},{title:"单元名称",dataIndex:"floor_name"},{title:"排序",dataIndex:"sort",sorter:function(e,t){return e.sort-t.sort}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}]),l=Object(o["ref"])(0),r=Object(o["ref"])(!1),n=Object(o["ref"])(!1),s=Object(o["ref"])([]),c=Object(o["ref"])(0),d=function(){i.a.prototype.request(u["a"].unitRentalLayerList,{single_id:e.single_id,floor_id:e.floor_id}).then((function(e){s.value=e.dataList,c.value=e.count,n.value=!1})).catch((function(e){n.value=!1}))},p=function(){},f=Object(o["ref"])(!0),m=function(e,t){if(f.value){var a=e?1:0;_(t.id,a,t.floor_id)}else i.a.prototype.$message.warn("请求频繁！")},b=function(e){console.log("closeLayerManage"),t.emit("closeDrawer",e)},_=function(e,t,a){f.value=!1,i.a.prototype.request(u["a"].updateUnitRentalLayerStatus,{layer_id:e,status:t,floor_id:a}).then((function(e){f.value=!0,d(),i.a.prototype.$message.success("修改成功！")})).catch((function(e){d(),f.value=!0}))},v=function(e,t){i.a.prototype.request(u["a"].deleteUnitRentalLayer,{layer_id:e,floor_id:t}).then((function(e){n.value=!0,d(),i.a.prototype.$message.success("删除成功！")})).catch((function(e){}))},g=function(e){v(e.id,e.floor_id)},y=function(e,t){0==t?(r.value=!0,l.value=0):1==t&&(r.value=!0,l.value=e.id)},h=function(e){r.value=!1,e&&(n.value=!0,d())};return{columns:a,buildingList:s,loading:n,getSingleLayerList:d,total:c,delCancel:p,delConfirm:g,deleteBiuld:v,editBuild:y,layer_id:l,closeLayerDrawer:h,switchChange:m,changeSingleStatus:_,changeStatus:f,layerEditVisible:r,closeLayerManage:b}}}),c=s,d=(a("868f"),a("2877")),p=Object(d["a"])(c,l,r,!1,null,"20abb1cf",null);t["default"]=p.exports},ad08:function(e,t,a){"use strict";a("7f65")},bcde:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("a-drawer",{attrs:{title:"单元管理",visible:e.floor_visible,width:1500,"mask-closable":!1,"body-style":{paddingBottom:"80px"}},on:{close:e.closeFloorManage}},[t("div",{staticClass:"build_index"},[t("div",{staticClass:"table-operations top-box-padding"},[t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.editBuild("",0)}}},[e._v("添加单元")])],1),t("a-table",{attrs:{columns:e.columns,"row-key":function(e){return e.floor_id},"data-source":e.singleFloorList,pagination:!1,loading:e.loading},scopedSlots:e._u([{key:"status",fn:function(a,l){return[t("a-switch",{attrs:{"checked-children":"开启","un-checked-children":"关闭",checked:1==a||"1"==a},on:{change:function(t){return e.switchChange(t,l)}}})]}},{key:"layer_manage_action",fn:function(a,l){return t("span",{},[t("a",{on:{click:function(t){return e.layer_manage(l)}}},[e._v("管理楼层")])])}},{key:"action",fn:function(a,l){return t("span",{},[t("a",{on:{click:function(t){return e.editBuild(l,1)}}},[e._v("单元管家")]),t("a-divider",{attrs:{type:"vertical"}}),t("a",{on:{click:function(t){return e.editBuild(l,2)}}},[e._v("编辑")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-popconfirm",{attrs:{title:"确定要删除该项吗?","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.delConfirm(l)},cancel:e.delCancel}},[t("a",{staticStyle:{color:"red"}},[e._v("删除")])])],1)}}])}),t("div",{staticClass:"total_number"},[e._v(" 总单元数："),t("span",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.total))]),e._v("单元 ")]),t("floorEdit",{attrs:{visible:e.buildVisible,single_id:e.single_id,floor_id:e.floor_id},on:{closeDrawer:e.closeFloorDrawer}}),t("buildingHousekeeper",{attrs:{visible:e.manageVisible,single_id:e.single_id,floor_id:e.floor_id},on:{closeDrawer:e.closeFloorDrawer}}),t("layerManage",{attrs:{layer_visible:e.layerManageVisible,single_id:e.single_id,floor_id:e.floor_id},on:{closeDrawer:e.closeFloorDrawer}})],1)])},r=[],o=(a("4e82"),a("8bbf")),i=a.n(o),n=a("44ef"),u=a("5fa7"),s=a("a2ce"),c=a("3990"),d=Object(o["defineComponent"])({props:{floor_visible:{type:Boolean,default:!1},singleObj:{type:Object,default:{}}},name:"unitRentalFloorList",components:{floorEdit:n["default"],buildingHousekeeper:u["default"],layerManage:s["default"]},setup:function(e,t){Object(o["watch"])((function(){return e.floor_visible}),(function(t){t&&(l.value=e.singleObj,b(e.singleObj))}),{deep:!0});var a=Object(o["ref"])([{title:"楼栋名称",dataIndex:"single_name"},{title:"单元名称",dataIndex:"floor_name"},{title:"单元编号",dataIndex:"floor_number"},{title:"排序",dataIndex:"sort",sorter:function(e,t){return e.sort-t.sort}},{title:"门禁编号",dataIndex:"door_control"},{title:"添加时间",dataIndex:"add_time_str"},{title:"楼层管理",key:"layer_manage_action",scopedSlots:{customRender:"layer_manage_action"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}]),l=Object(o["ref"])({}),r=Object(o["ref"])(!1),n=Object(o["ref"])(!1),u=Object(o["ref"])(!1),s=Object(o["ref"])(!1),d=Object(o["ref"])([]),p=Object(o["ref"])(0),f=Object(o["ref"])(0),m=Object(o["ref"])(0),b=function(){var e={single_id:l.value.id};i.a.prototype.request(c["a"].unitRentalFloorList,e).then((function(e){d.value=e.dataList,m.value=e.count,s.value=!1})).catch((function(e){s.value=!1}))},_=function(){},v=Object(o["ref"])(!0),g=function(e,t){if(v.value){var a=e?1:0;x(t.floor_id,a)}else i.a.prototype.$message.warn("请求频繁！")},y=function(e){t.emit("closeDrawer",e)},h=function(e){r.value=!1,n.value=!1,u.value=!1,e&&(s.value=!0,b())},x=function(e,t){v.value=!1,i.a.prototype.request(c["a"].updateUnitRentalFloorStatus,{floor_id:e,status:t}).then((function(e){v.value=!0,b(),i.a.prototype.$message.success("修改成功！")})).catch((function(e){b(),v.value=!0}))},w=function(e,t){i.a.prototype.request(c["a"].deleteUnitRentalFloor,{floor_id:e,single_id:t}).then((function(e){s.value=!0,b(),i.a.prototype.$message.success("删除成功！")})).catch((function(e){}))},k=function(e){w(e.floor_id,e.single_id)},F=function(e,t){f.value=l.value.id,0==t?(r.value=!0,p.value=0):1==t?(n.value=!0,p.value=e.floor_id):2==t&&(r.value=!0,p.value=e.floor_id)},O=function(e){f.value=l.value.id,p.value=e.floor_id,u.value=!0};return{columns:a,singleFloorList:d,loading:s,getSingleFloorList:b,total:m,delCancel:_,delConfirm:k,deleteBiuld:w,editBuild:F,buildVisible:r,manageVisible:n,switchChange:g,changeSingleStatus:x,changeStatus:v,layerManageVisible:u,layer_manage:O,closeFloorManage:y,closeFloorDrawer:h,singleRecord:l,floor_id:p,single_id:f}}}),p=d,f=(a("ad08"),a("2877")),m=Object(f["a"])(p,l,r,!1,null,"32147d50",null);t["default"]=m.exports},f4fd:function(e,t,a){}}]);