(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ae22800","chunk-748b470d"],{"26cc":function(t,e,i){"use strict";var s={getActivityList:"/common/platform.PrivateDomainFlow/activityLists",getShowPages:"/common/platform.PrivateDomainFlow/pages",getUserList:"/common/platform.Crm/users",saveActivity:"/common/platform.PrivateDomainFlow/saveActivity",delActivity:"/common/platform.PrivateDomainFlow/delActivity",getActivityInfo:"/common/platform.PrivateDomainFlow/showActivity",getAllArea:"/common/platform.area.Area/getAllArea",assignArea:"/common/platform.PrivateDomainFlow/assignArea",alertTemplates:"/common/platform.PrivateDomainFlow/alertTemplates",hoverTemplates:"/common/platform.PrivateDomainFlow/hoverTemplates",getStoreList:"/common/platform.PrivateDomainFlow/storeLists",assignStore:"/common/platform.PrivateDomainFlow/assignStore",makeupPic:"/common/platform.PrivateDomainFlow/buildAlertPic",isBind:"/common/platform.Crm/isBind",register:"/common/platform.Crm/register",getLoginUrl:"/common/platform.Crm/getLoginUrl"};e["a"]=s},"413c":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"select-area"},[e("a-drawer",{attrs:{title:"指定区域",placement:"right",visible:t.visible,destroyOnClose:"",width:600},on:{close:t.onClose}},[t.list.length?e("div",{staticClass:"content"},[e("div",{staticClass:"col",staticStyle:{"border-right":"1px solid #f4f4f4"}},[e("div",{staticClass:"header"},[t._v("选择省份")]),e("div",{staticClass:"list"},t._l(t.list,(function(i,s){return e("div",{key:i.area_id,staticClass:"item",style:i.selected?"color:#1890ff":"",on:{click:function(e){return t.selectArea(s)}}},[i.selected?e("a-icon",{staticClass:"flod-icon",attrs:{type:"caret-down"}}):e("a-icon",{staticClass:"flod-icon",attrs:{type:"caret-right"}}),e("a-checkbox",{attrs:{checked:i.checked},on:{change:function(e){return t.onCheckChange(e,s,1)}}}),e("span",{staticClass:"city-name"},[t._v(" "+t._s(i.area_name)+" ")])],1)})),0)]),e("div",{staticClass:"col",staticStyle:{"border-right":"1px solid #f4f4f4"}},[e("div",{staticClass:"header"},[t._v("选择城市")]),t.twoList.length?e("div",{staticClass:"list"},t._l(t.twoList,(function(i,s){return e("div",{key:i.area_id,staticClass:"item",style:i.selected?"color:#1890ff":"",on:{click:function(e){return t.selectArea(t.index1,s)}}},[i.selected?e("a-icon",{staticClass:"flod-icon",attrs:{type:"caret-down"}}):e("a-icon",{staticClass:"flod-icon",attrs:{type:"caret-right"}}),e("a-checkbox",{attrs:{checked:i.checked},on:{change:function(e){return t.onCheckChange(e,s,2)}}}),e("span",{staticClass:"city-name"},[t._v(" "+t._s(i.area_name)+" ")])],1)})),0):e("div",{staticClass:"no-data"},[t._v("--")])]),e("div",{staticClass:"col"},[e("div",{staticClass:"header"},[t._v("选择辖区")]),t.threeList.length?e("div",{staticClass:"list"},t._l(t.threeList,(function(i,s){return e("div",{key:i.area_id,staticClass:"item"},[e("a-checkbox",{attrs:{checked:i.checked},on:{change:function(e){return t.onCheckChange(e,s,3)}}}),e("span",{staticClass:"city-name",style:i.selected?"color:#1890ff":""},[t._v(" "+t._s(i.area_name)+" ")])],1)})),0):e("div",{staticClass:"no-data"},[t._v("--")])])]):t._e(),e("div",{staticClass:"footer"},[e("a-checkbox",{staticStyle:{"margin-right":"20px"},attrs:{indeterminate:t.indeterminate,checked:t.checkAll},on:{change:t.onCheckAllChange}},[t._v(" 全选 ")]),e("a-button",{attrs:{type:"primary",size:"large"},on:{click:t.submit}},[t._v("确 定")])],1)])],1)},c=[],n=i("4bb5d"),a=(i("c5cb"),i("08c7"),i("4afa"),i("6e84"),i("26cc")),r={name:"PrivateFlowSelectArea",props:{detail:{type:Object,default:function(){return{}}},areaList:{type:Array,default:function(){return[]}}},data:function(){return{visible:!1,indeterminate:!1,checkAll:!1,list:[],index1:-1,index2:-1,twoList:[],threeList:[],checkedList:[],length:0}},watch:{checkedList:function(t){t.length&&t.length!=this.length?this.indeterminate=!0:(this.indeterminate=!1,t.length==this.length&&(this.checkAll=!0))}},mounted:function(){},methods:{handleList:function(){var t=this;console.log("handleList"),this.twoList=[],this.threeList=[],this.index1=-1,this.index2=-1,this.length=0,this.list.length||(this.list=JSON.parse(JSON.stringify(this.areaList)));var e=this.detail.area_ids||[];this.checkedList=Object(n["a"])(e),this.list.forEach((function(i){i.selected=!1,i.checked=!1,t.length++,e.length&&e.forEach((function(t){t==i.area_id&&(i.checked=!0)})),i.children&&i.children.length&&i.children.forEach((function(i){t.length++,i.selected=!1,i.checked=!1,e.length&&e.forEach((function(t){t==i.area_id&&(i.checked=!0)})),i.children&&i.children.length&&i.children.forEach((function(i){t.length++,i.selected=!1,i.checked=!1,e.length&&e.forEach((function(t){t==i.area_id&&(i.checked=!0)}))}))}))})),this.$set(this,"list",this.list)},selectArea:function(t,e){var i=this;this.noCity=!1,this.noArea=!1,this.list.forEach((function(s,c){s.selected=!1,t==c?(s.selected=!0,i.index1=t,i.twoList=s.children||[],s.children&&s.children.length&&e>-1?s.children.forEach((function(t,s){t.selected=!1,e==s&&(t.selected=!0,i.index2=e,i.threeList=t.children||[])})):i.threeList=[]):s.children&&s.children.length&&s.children.forEach((function(t,e){t.selected=!1}))})),this.$set(this,"list",this.list)},openDrawer:function(){var t=this;this.$nextTick((function(){t.handleList()})),this.visible=!0},onClose:function(){this.visible=!1},onCheckChange:function(t,e,i){var s=t.target.checked,c=null;if(1==i?(c=this.list[e],c.checked=s,this.$set(this.list,e,c)):2==i?(c=this.list[this.index1].children[e],c.checked=s,this.$set(this.list[this.index1].children,e,c)):(c=this.list[this.index1].children[this.index2].children[e],c.checked=s,this.$set(this.list[this.index1].children[this.index2].children,e,c)),s)this.checkedList.push(c.area_id);else{var n=this.checkedList.indexOf(c.area_id);this.checkedList.splice(n,1)}},onCheckAllChange:function(t){console.log(111,t);var e=t.target.checked;e?(this.checkAll=!0,this.indeterminate=!1):(this.checkAll=!1,this.indeterminate=!1),this.setListChecked(e)},setListChecked:function(t){var e=[];this.list.forEach((function(i){i.checked=t,e.push(i.area_id),i.children&&i.children.length&&i.children.forEach((function(i){i.checked=t,e.push(i.area_id),i.children&&i.children.length&&i.children.forEach((function(i){e.push(i.area_id),i.checked=t}))}))})),this.checkedList=t?[].concat(e):[],this.$set(this,"list",this.list)},submit:function(){var t=this;this.request(a["a"].assignArea,{id:this.detail.id,area_ids:this.checkedList}).then((function(e){t.$message.success("操作成功！"),t.$emit("submit"),t.visible=!1}))}}},l=r,o=(i("94ae"),i("0b56")),h=Object(o["a"])(l,s,c,!1,null,"b29ec9ec",null);e["default"]=h.exports},"4bb5d":function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var s=i("ea87");function c(t){if(Array.isArray(t))return Object(s["a"])(t)}i("6073"),i("2c5c"),i("c5cb"),i("36fa"),i("02bf"),i("a617"),i("17c8");function n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var a=i("9877");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return c(t)||n(t)||Object(a["a"])(t)||r()}},"94ae":function(t,e,i){"use strict";i("95aa")},"95aa":function(t,e,i){}}]);