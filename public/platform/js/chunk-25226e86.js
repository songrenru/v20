(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25226e86","chunk-35ce41af","chunk-17aa7466"],{"0c98":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABFUlEQVQ4T6XTvyvFURjH8dcNfwEGE2WyWFn8iEFKShkNZPIH6I4yyh9gEoNRKSkZyI+F1WJSTAbXX4DSczsn324395SzPufz7jzP8z41/zy1NvkhbGAE86l+jifs4aWaaQWsYh/LuMVHutyLSRxjHYcZUgVMYAbbHbrawhXu4l4G9OENPYUj+cQAGhmwixucFQIWMIXNDLjACt4LAf04wlwGfKE7hacRfbY7MZ/rVGhmMiB6yv2XApqZDDjFWmVtnTqJtR5gMQN2cI+TTslUX8I46hkQ9j2jqxDwjeGwsipSWDhYKNJrtrFV5bAxLIsnPlTWGmsbSy2GrU0LqyZWXx5W1jGK2VS4xCNiVo2/PlPhCH6v/QDddDIRAGtWtQAAAABJRU5ErkJggg=="},"0cca":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t._self._c;return a("a-modal",{attrs:{title:"选择企业成员",width:850,height:588,visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[a("div",{staticClass:"container"},[a("div",{staticClass:"box_left"},[t.isSearch?a("a-input-search",{staticStyle:{"margin-bottom":"8px"},attrs:{placeholder:"搜索成员"},on:{search:t.onSearch}}):t._e(),a("a-tree",{attrs:{blockNode:t.blockNode,multiple:"","tree-data":t.treeData,"show-icon":"","default-expand-all":"",selectedKeys:t.enterprise_staff_arr},on:{select:t.onSelect}},[a("a-icon",{attrs:{slot:"switcherIcon",type:"down"},slot:"switcherIcon"}),a("a-icon",{attrs:{slot:"cluster",type:"cluster"},slot:"cluster"}),a("a-icon",{attrs:{slot:"user",type:"user"},slot:"user"})],1)],1),a("div",{staticClass:"box_right"},[a("span",[t._v("已选择的成员")]),""==t.enterprise_staff_arr?a("a-empty",{staticClass:"a-empty",attrs:{image:t.simpleImage}}):a("a-list",{attrs:{"item-layout":"horizontal","data-source":t.enterprise_staff_arr},scopedSlots:t._u([{key:"renderItem",fn:function(i,s){return a("a-list-item",{},[a("div",{staticClass:"list_box",staticStyle:{width:"7%"}},[a("img",{attrs:{src:e("694d")}})]),a("div",{staticClass:"list_box",staticStyle:{width:"83%"}},[t._v(t._s(i.split("-")[1]))]),a("div",{staticClass:"list_box",staticStyle:{width:"10%"},on:{click:function(a){return t.delStaff(s)}}},[a("img",{staticStyle:{"margin-right":"5px"},attrs:{src:e("0c98")}})])])}}])})],1)])])},s=[],o=(e("74a0"),e("0ca7")),n=(e("cd5d"),e("c5cb"),e("a0e0")),r=e("ca00"),c=[{}],l={data:function(){return{visible:!1,confirmLoading:!1,enterprise_staff_arr:[],simpleImage:o["a"].PRESENTED_IMAGE_SIMPLE,blockNode:!0,treeData:c,tokenName:"",sysName:"",isSearch:!1,isSearchStaff:0}},methods:{onSearch:function(t){var a=this;console.log(t);var e={};this.tokenName&&(e["tokenName"]=this.tokenName),e["name"]=t,this.request(n["a"].getWorker,e).then((function(t){if(""!=t){var e=a.enterprise_staff_arr.indexOf(t);e<0&&a.enterprise_staff_arr.push(t),console.log("0416",a.enterprise_staff_arr)}}))},choose:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.isSearch=!1;var a=Object(r["i"])(location.hash);a?(this.tokenName=a+"_access_token",this.sysName=a):this.sysName="village",this.isSearchStaff=t,this.visible=!0,this.getTissueNav(),this.enterprise_staff_arr=[]},chooseSearch:function(){this.isSearch=!0,this.isSearchStaff=0;var t=Object(r["i"])(location.hash);t?(this.tokenName=t+"_access_token",this.sysName=t):this.sysName="village",this.visible=!0,this.getTissueNav(),this.enterprise_staff_arr=[]},getTissueNav:function(){var t=this,a={};this.tokenName&&(a["tokenName"]=this.tokenName),a["type_"]=1,this.request(n["a"].getTissueNav,a).then((function(a){t.treeData=a}))},onSelect:function(t,a){if(console.log(t),1==this.isSearchStaff&&t.length>1)return this.$message.warning("仅可选择一位成员"),!1;this.enterprise_staff_arr=t},delStaff:function(t){var a=this;console.log("enterprise_staff_arr",this.enterprise_staff_arr),a.enterprise_staff_arr=a.removeByIndex(a.enterprise_staff_arr,t)},removeByIndex:function(t,a){return t.filter((function(t,e){return a!==e}))},handleSubmit:function(){var t=this;t.visible=!1,t.$emit("change",this.enterprise_staff_arr)},handleCancel:function(){this.visible=!1}}},h=l,u=(e("649c"),e("0b56")),f=Object(u["a"])(h,i,s,!1,null,"729f65e3",null);a["default"]=f.exports},"1ae2":function(t,a,e){},"547e":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t._self._c;return a("a-modal",{attrs:{title:"选择群聊",width:850,height:588,visible:t.visible},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[a("div",{staticStyle:{"margin-bottom":"15px"}},[a("span",{staticStyle:{color:"#c00e18"}},[t._v("只显示历史上设置过违规提醒的群聊。如曾经设置过某群聊违规提醒，现在该群聊不再设置，那么其历史触发敏感词的监控内容，依然在列表中可见。")])]),a("div",{staticStyle:{"margin-bottom":"15px"}},[a("span",[t._v("全部群聊（ "+t._s(t.count)+" ）：")])]),a("div",{staticClass:"package-list ant-pro-page-header-wrap-children-content",staticStyle:{margin:"0 0 0"}},[a("a-card",{attrs:{bordered:!0}},[a("a-list",{attrs:{"item-layout":"horizontal","data-source":t.list_a,rowKey:t.chat_id},scopedSlots:t._u([{key:"renderItem",fn:function(e,i){return a("a-list-item",{},[a("a-list-item-meta",{attrs:{description:e.avatarData.length}},[a("a",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.chat))]),a("a-avatar",{attrs:{slot:"avatar",src:e.avatarData[0]},slot:"avatar"}),a("a-avatar",{attrs:{slot:"avatar",src:e.avatarData[1]},slot:"avatar"})],1),a("a-checkbox",{on:{change:function(a){return t.onChange(a,e)}}})],1)}}])})],1)],1)])},s=[],o=(e("c5cb"),e("08c7"),e("4afa"),e("ca00"),e("a0e0")),n={name:"chioceGroupChat",data:function(){return{visible:!1,list_a:[],count:0,group_arr:[],chat_id:0}},mounted:function(){var t=this;t.list_a=[]},computed:{},methods:{tableChange:function(){},handleSubmit:function(){var t=this;t.visible=!1,t.$emit("change",this.group_arr)},handleCancel:function(){this.visible=!1},handleOks:function(){},add:function(){this.visible=!0,this.getGroupChat()},onChange:function(t,a){var e=this;console.log(t.target.checked),console.log(a);var i=a.chat_id+"-"+a.chat+"-"+a.roomid;1==t.target.checked?this.group_arr.push(i):(console.log("obj",a),this.group_arr.forEach((function(t,a){t==i&&e.group_arr.splice(a,1)}))),console.log("group_arr",this.group_arr)},getGroupChat:function(){var t=this;this.request(o["a"].groupChatList).then((function(a){t.list_a=a.list,t.count=a.list.length,console.log("list_a",t.list_a)})).catch((function(a){t.confirmLoading=!1}))},handleCandel:function(){this.visible=!1},cancel1:function(){}}},r=n,c=(e("9f1b"),e("0b56")),l=Object(c["a"])(r,i,s,!1,null,"e8d2746c",null);a["default"]=l.exports},"649c":function(t,a,e){"use strict";e("eb01")},"694d":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA+klEQVQ4T6XTvS5FQRTF8d+Ngl4ioRIK74DiKohaUHkBnwUPcKmFSHyVSgWNRnw0CpR6BVHxChqJTMxJjsk5ZyR2OXuv/6xZmd3yz2o16HswFPuv+KyarQNM4wDDUfSCFVylkCrACO5xjp0o2MAsxvFchlQBttGF9eS2XXRjOQe4xAnOEsAcDtGXAwTxE/YTwCpmMJEDdLCJAXzE4X68x/OtHCD0C8hdHG5XiUOvKsRC/IYyYPAvDgrxMZaSDI6wmELKDkbxgCnc1vzQSdxgDI/pE/ZicPOZ9TjFFxZSwAWuEaw21VoMuTcFhKRDFcHVQX7NNW1jxshP+xt2tSwRr0CjWQAAAABJRU5ErkJggg=="},"9f1b":function(t,a,e){"use strict";e("fca3")},a830:function(t,a,e){"use strict";e("1ae2")},b525:function(t,a,e){"use strict";e.r(a);e("54f8");var i=function(){var t=this,a=t._self._c;return a("a-modal",{attrs:{title:t.title,width:900,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading,height:800}},[a("a-form",{attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"规则名称",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[0==t.formData.id?a("a-col",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["rule_name",{rules:[{required:!0,message:"请输入规则名称！"}]}],expression:"['rule_name', {rules: [{required: true, message: '请输入规则名称！'}]}]"}],attrs:{maxLength:20,placeholder:"请输入规则名称,限20字！"}}),a("span",{staticStyle:{color:"red"}},[t._v("(一旦创建，不可修改)")])],1):a("a-col",[t._v(" "+t._s(t.formData.rule_name)+" ")]),a("a-col",{attrs:{span:18}},t._l(t.group_txt,(function(e,i){return a("div",{key:i,staticClass:"label_"},[a("a-tag",{attrs:{color:"#1890ff"}},[t._v(" "+t._s(e.value)+" ")])],1)})),0)],1),a("a-form-item",{attrs:{label:"选择适用业主群",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[0==t.formData.id?a("a-col",{attrs:{span:18}},[a("a-button",{staticClass:"add-goods",staticStyle:{float:"left"},attrs:{type:"btn"},on:{click:function(a){return t.$refs.chooseGroupChatModal.add()}}},[t._v("选择群聊")])],1):a("a-col",t._l(t.formData.groups,(function(e,i){return a("div",{key:i,staticClass:"label_"},[a("a-tag",{attrs:{color:"#1890ff"}},[t._v(" "+t._s(e)+" ")])],1)})),0)],1),a("a-form-item",{attrs:{label:"设置提醒行为",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-row",[a("a-checkbox-group",{on:{change:t.onChangeAction},model:{value:t.formData.action,callback:function(a){t.$set(t.formData,"action",a)},expression:"formData.action"}},t._l(t.groupAction,(function(e){return a("a-checkbox",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.value)+" ")])})),1)],1),a("a-col",{attrs:{span:18}},[t.is_sensitive_show?a("a-select",{staticStyle:{width:"200px"},attrs:{mode:"multiple",placeholder:"选择敏感词"},on:{change:t.choiceKeys},model:{value:t.formData.sensitive_id,callback:function(a){t.$set(t.formData,"sensitive_id",a)},expression:"formData.sensitive_id"}},t._l(t.sensitive_info,(function(e,i){return a("a-select-option",{key:i,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1):t._e()],1)],1),t.formData.id>0?a("a-form-item",{attrs:{label:"状态",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["formData.status",{initialValue:t.formData.status}],expression:"['formData.status', {initialValue:formData.status}]"}],on:{change:t.onChangeStatus}},[a("a-radio",{attrs:{value:1}},[t._v(" 开启 ")]),a("a-radio",{attrs:{value:0}},[t._v(" 关闭 ")])],1)],1):t._e(),0==t.formData.id?a("a-form-item",{attrs:{label:"通知人",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-checkbox-group",{attrs:{"default-value":t.checkbox_value},on:{change:t.onChangeRemind}},[a("a-row",[a("a-col",[a("a-checkbox",{attrs:{value:"1",disabled:!0}},[t._v("群主")]),a("a-checkbox",{attrs:{value:"2"},on:{click:function(a){return t.$refs.appointEnterpriseStaffModal.chooseSearch()}}},[t._v("选择成员")])],1)],1)],1)],1):t._e(),a("chooseBranch",{ref:"appointEnterpriseStaffModal",on:{change:t.appoint_staff}}),a("choose-group-chat",{ref:"chooseGroupChatModal",on:{change:t.change_group_chat}})],1)],1)],1)},s=[],o=(e("cd5d"),e("c5cb"),e("a0e0")),n=e("0cca"),r=e("547e"),c={components:{chooseBranch:n["default"],chooseGroupChat:r["default"]},data:function(){return{title:"新建",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),id:0,fid:0,diasabledInput:!0,formData:{id:0,rule_name:"",group_id:[],groupAction:[],sensitive_id:[],staff_type:[],appoint_staff_id:[],groups:[],status:"",action:[]},sensitive_info:[],groupAction:[],is_select1:!1,checkbox_value:[],group_txt:[],is_sensitive_show:!1}},mounted:function(){},methods:{onChangeStatus:function(t){this.formData.status=t.target.value},change_group_chat:function(t){var a=this,e=[];this.group_txt=[],t.filter((function(t,i){e[i]=t.split("-")[0]+"-"+t.split("-")[1],a.group_txt.push({key:t.split("-")[0],value:t.split("-")[1]})})),this.formData.group_id=e},choiceKeys:function(t){this.formData.sensitive_id=t},appoint_staff:function(t){var a=[];t.filter((function(t,e){a[e]=t.split("-")[0]})),this.formData.appoint_staff_id=a},onChangeAction:function(t){this.formData.action=t,t.indexOf(8)>-1?this.is_sensitive_show=!0:(this.is_sensitive_show=!1,this.formData.sensitive_id=[])},onChangeRemind:function(t){this.formData.staff_type=t},add:function(){var t=this;this.title="设置违规群聊",this.visible=!0,this.id="0",this.checkedKeys=[],this.group_txt=[],this.formData.group_id=[],this.is_select1=!1,this.is_sensitive_show=!1,this.formData={id:0,rule_name:"",groupAction:[],sensitive_id:[],staff_type:["1"]},this.checkbox_value=["1"],this.request(o["a"].getGroupAction).then((function(a){t.groupAction=a})),this.request(o["a"].choiceSensitive).then((function(a){t.sensitive_info=a}))},edit:function(t){var a=this;this.visible=!0,this.id=t,this.getEditInfo(),this.is_select1=!0,this.group_txt=[],this.checkbox_value=["1"],this.request(o["a"].getGroupAction).then((function(t){a.groupAction=t})),this.request(o["a"].choiceSensitive).then((function(t){a.sensitive_info=t})),this.id>0?this.title="编辑":this.title="添加"},handleSubmit:function(){var t=this,a=this.form.validateFields;this.confirmLoading=!0,a((function(a,e){if(a)t.confirmLoading=!1;else{var i=o["a"].addViolationGroup;t.formData.id>0?i=o["a"].subViolationGroup:t.formData.rule_name=e["rule_name"],t.request(i,t.formData).then((function(a){t.formData.id>0?t.$message.success("编辑成功"):t.$message.success("添加成功"),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1,t.$emit("ok")}),1500)})).catch((function(a){t.confirmLoading=!1}))}}))},handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.id="0",t.form=t.$form.createForm(t)}),500)},getEditInfo:function(){var t=this;this.request(o["a"].editViolationGroup,{id:this.id}).then((function(a){t.formData.id=a.id,t.formData.rule_name=a.rule_name,t.formData.sensitive_id=a.sensitive_id,t.formData.groups=a.groups,t.formData.status=a.status,t.formData.action=a.action,""!=a.sensitive_id?t.is_sensitive_show=!0:t.is_sensitive_show=!1}))}}},l=c,h=(e("a830"),e("0b56")),u=Object(h["a"])(l,i,s,!1,null,null,null);a["default"]=u.exports},eb01:function(t,a,e){},fca3:function(t,a,e){}}]);