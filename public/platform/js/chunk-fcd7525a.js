(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fcd7525a","chunk-a8ce6836","chunk-2d0b6a79"],{"1da1":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("d3b7");function s(t,e,i,s,a,n,o){try{var r=t[n](o),c=r.value}catch(l){return void i(l)}r.done?e(c):Promise.resolve(c).then(s,a)}function a(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var o=t.apply(e,i);function r(t){s(o,a,n,r,c,"next",t)}function c(t){s(o,a,n,r,c,"throw",t)}r(void 0)}))}}},"286b":function(t,e,i){"use strict";i("2fe4")},2909:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var s=i("6b75");function a(t){if(Array.isArray(t))return Object(s["a"])(t)}i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630");function n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var o=i("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return a(t)||n(t)||Object(o["a"])(t)||r()}},"2fe4":function(t,e,i){},3544:function(t,e,i){},"3bf9":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-box"},[i("div",{staticClass:"left_box",style:t.right_show?"":"width:0%;"},[t._m(0),i("div",{staticClass:"left_center_box"},[i("div",{staticClass:"text_title"},[t._v("物业评分")]),i("div",{staticClass:"echarts"},[i("div",{staticClass:"tip_box"},t._l(t.tipsItem,(function(e,s){return i("div",{staticClass:"tips",style:s==t.num_1?"background: #2C6FFF;color: #FFFFFF;":"",on:{click:function(i){return t.selectde_start(e.type-1)}}},[t._v(" "+t._s(e.name)+" ")])})),0),i("div",{staticClass:"echarts_box"},[t.property_rating&&""!=t.property_rating?i("div",{staticClass:"mini_box_1"},[i("div",{staticClass:"table-right"},[i("div",{staticClass:"table-scroll_right"},t._l(t.property_rating,(function(e,s){return i("div",{staticClass:"table-flex_body_right"},t._l(e,(function(e,a){return i("div",{staticClass:"text_1",on:{mouseenter:function(i){return t.enters(i,e.title,s)},mouseleave:function(e){return t.leaver()}}},[t._v(t._s(e.title))])})),0)})),0)])]):i("div",{staticClass:"tip_text_box"},[i("div",{staticClass:"tip_text"},[t._v("暂无记录")])])])])]),t._m(1),i("div",{staticClass:"right_btn",style:t.right_show?"":"left:10px",on:{click:t.rightshow}},[t._v(t._s(t.right_show?"<":">")+" ")])]),i("div",{staticClass:"right_box",style:t.right_show?"":"width:100%"},[t._m(2),i("div",{staticClass:"top_box",staticStyle:{height:"130px","margin-top":"10px"}},t._l(t.work_label_list,(function(e,s){return i("div",{key:s,staticClass:"worker_order_list"},[i("div",{staticClass:"name"},[t._v(t._s(e.name))]),i("div",{staticClass:"value"},[t._v(t._s(e.value)+"/起")])])})),0),i("div",{staticClass:"center_box"},[i("div",{staticClass:"text_1"},[t._v("分类：")]),i("a-select",{staticClass:"select_1",staticStyle:{width:"100px"},attrs:{"default-value":"全部"},on:{change:t.handleChange}},[i("a-icon",{staticStyle:{color:"#FFFFFF"},attrs:{slot:"suffixIcon",type:"caret-down"},slot:"suffixIcon"}),i("a-select-option",{attrs:{value:"0"}},[t._v(" 全部 ")]),t._l(t.subject_list,(function(e,s){return i("a-select-option",{attrs:{value:e.category_id}},[t._v(" "+t._s(e.subject_name)+" ")])}))],2),i("a-select",{staticClass:"select_1",staticStyle:{width:"100px"},on:{change:t.handleChange2},model:{value:t.secondCate,callback:function(e){t.secondCate=e},expression:"secondCate"}},[i("a-icon",{staticStyle:{color:"#FFFFFF"},attrs:{slot:"suffixIcon",type:"caret-down"},slot:"suffixIcon"}),i("a-select-option",{attrs:{value:"0"}},[t._v(" 全部 ")]),t._l(t.options,(function(e,s){return i("a-select-option",{attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])}))],2),i("a-select",{staticClass:"select_1",staticStyle:{width:"170px",color:"#86869D"},attrs:{"default-value":"筛选条件"},on:{change:t.handleChange3}},[i("a-icon",{staticStyle:{color:"#FFFFFF"},attrs:{slot:"suffixIcon",type:"caret-down"},slot:"suffixIcon"}),t._l(t.shaixuanList,(function(e,s){return i("a-select-option",{attrs:{value:e.value}},[i("a-tooltip",{attrs:{title:e.name}},[t._v(" "+t._s(e.name)+" ")])],1)}))],2),t.is_show?i("a-input",{staticClass:"input_1",attrs:{placeholder:"请输入"},model:{value:t.search.search,callback:function(e){t.$set(t.search,"search",e)},expression:"search.search"}}):t.is_room?i("a-cascader",{staticClass:"input_1",staticStyle:{width:"150px",border:"none"},attrs:{options:t.options1,"load-data":t.loadDataFunc1,placeholder:"请选择房间","change-on-select":""},on:{change:t.setVisionsFunc1},model:{value:t.search.room_ids,callback:function(e){t.$set(t.search,"room_ids",e)},expression:"search.room_ids"}}):i("a-select",{staticClass:"select_1",staticStyle:{width:"140px"},on:{change:t.publicAreaChange},model:{value:t.search.public_id,callback:function(e){t.$set(t.search,"public_id",e)},expression:"search.public_id"}},t._l(t.publicAreaList,(function(e,s){return i("a-select-option",{attrs:{value:e.public_area_id}},[i("a-tooltip",{attrs:{title:e.public_area_name}},[t._v(" "+t._s(e.public_area_name)+" ")])],1)})),1),i("a-select",{staticClass:"select_1",staticStyle:{width:"140px"},attrs:{"default-value":"全部状态"},on:{change:t.handleChange4}},[i("a-icon",{staticStyle:{color:"#FFFFFF"},attrs:{slot:"suffixIcon",type:"caret-down"},slot:"suffixIcon"}),i("a-select-option",{attrs:{value:"0"}},[t._v(" 全部状态 ")]),i("a-select-option",{attrs:{value:"10"}},[t._v(" 未指派 ")]),i("a-select-option",{attrs:{value:"20"}},[t._v(" 已指派 ")]),i("a-select-option",{attrs:{value:"30"}},[t._v(" 处理中 ")]),i("a-select-option",{attrs:{value:"40"}},[t._v(" 已办结 ")]),i("a-select-option",{attrs:{value:"50"}},[t._v(" 已撤回 ")]),i("a-select-option",{attrs:{value:"60"}},[t._v(" 已关闭 ")]),i("a-select-option",{attrs:{value:"70"}},[t._v(" 已评价 ")])],1),i("div",{staticClass:"text_1"},[t._v("上报时间：")]),i("a-range-picker",{staticClass:"select_time",attrs:{placeholder:["请选择开始时间","请选择结束时间"],separator:"至"},on:{change:t.onChange}},[i("a-icon",{attrs:{slot:"suffixIcon",type:"none"},slot:"suffixIcon"})],1),i("div",{staticClass:"btn",on:{click:function(e){return t.findAll()}}},[t._v("查询")])],1),i("div",{staticClass:"bottom_box"},[i("a-table",{staticClass:"table_1",attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"operation",fn:function(e,s){return i("span",{},[i("a",{on:{click:function(e){return t.get_detail(s.order_id)}}},[t._v("详情")])])}},{key:"status_txt",fn:function(e,s){return i("span",{},[i("span",{style:"color:"+s.color},[t._v(t._s(s.status_txt))])])}},{key:"order_content",fn:function(e,s){return i("span",{},[s.order_content.length>8?i("a-tooltip",{attrs:{placement:"topLeft"}},[i("template",{slot:"title"},[i("span",[t._v(t._s(s.order_content))])]),i("span",[t._v(t._s(s.order_content))])],2):i("span",[t._v(t._s(s.order_content))])],1)}}])})],1)]),i("a-drawer",{attrs:{title:"查看详情",width:"700",maskClosable:!1,closable:!0,visible:t.visible},on:{close:t.onClose}},[t.visible?i("a-tabs",{attrs:{type:"card","default-active-key":"1"},on:{change:t.callback}},[i("a-tab-pane",{key:"1",attrs:{tab:"工单详情"}},[i("div",{staticClass:"content_box"},[i("div",{staticClass:"item_box"},t._l(t.detail.order_detail_arr,(function(e,s){return i("div",{staticClass:"list"},[i("div",{staticClass:"text_1"},[t._v(t._s(e.title)+"：")]),i("div",{staticClass:"text_2"},[t._v(t._s(e.content?e.content:"无"))])])})),0),t.detail.order_detail.order_imgs.length>0?i("div",{staticClass:"list_2"},[i("div",{staticClass:"text_1"},[t._v("上报图例：")]),i("viewer",{attrs:{images:t.detail.order_detail.order_imgs}},t._l(t.detail.order_detail.order_imgs,(function(t,e){return i("img",{key:e,staticClass:"img_1",staticStyle:{"margin-left":"5px"},attrs:{src:t}})})),0)],1):t._e(),i("div",{staticClass:"list_3"},[i("div",{staticClass:"text_1"},[t._v("状态：")]),i("div",{staticClass:"text_2",style:"color:"+t.detail.order_detail.event_status_color},[t._v(" "+t._s(t.detail.order_detail.event_status_txt)+" ")])]),i("div",{staticClass:"title"},[t._v("处理记录")]),i("div",{staticClass:"list_4"},[i("div",{staticClass:"list_box"},[t._l(t.detail.order_detail.log_info.children,(function(e,s){return i("div",{staticClass:"list"},[i("div",{staticClass:"text_1"},[t._v(t._s(e.title)+"：")]),i("div",{staticClass:"text_2"},[t._v(t._s(e.content?e.content:"无"))])])})),i("div",{staticClass:"list_2"},[i("div",{staticClass:"text_1"},[t._v("图例：")]),t.detail.order_detail.log_info&&t.detail.order_detail.log_info.imgs&&t.detail.order_detail.log_info.imgs[0]?i("viewer",{attrs:{images:t.detail.order_detail.log_info.imgs}},t._l(t.detail.order_detail.log_info.imgs,(function(t,e){return i("img",{key:e,staticClass:"img_1",staticStyle:{"margin-left":"5px"},attrs:{src:t}})})),0):i("div",[t._v("无")])],1)],2)]),t.show?i("div",{staticClass:"list_5"},[i("div",{staticClass:"tab_box"},t._l(t.tab_arr,(function(e,s){return i("div",{staticClass:"tab",style:t.num==s?"":"background-color: #FFFFFF;color: rgb(49, 88, 255);z-index:10",on:{click:function(e){return t.changeCurrent(s)}}},[t._v(t._s(e.name))])})),0),0==t.num?i("div",{staticClass:"right_box1"},[i("a-button",{staticStyle:{width:"160px","margin-top":"20px","margin-left":"80px"},attrs:{type:"primary",ghost:""},on:{click:function(e){return t.$refs.createModal.add(1,0)}}},[t._v(" "+t._s(t.worker_name)+" ")])],1):t._e(),1==t.num?i("div",{staticClass:"right_box2"},[i("a-input",{staticClass:"input_area",attrs:{placeholder:"请输入回复内容",type:"textarea"},model:{value:t.content_1,callback:function(e){t.content_1=e},expression:"content_1"}})],1):t._e()]):t._e()]),i("div",{style:{bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[t.is_footer?i("a-button",{staticStyle:{marginRight:"8px"},on:{click:t.onClose}},[t._v(" 取消 ")]):t._e(),t.is_footer?i("a-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(" 确定 ")]):t._e()],1)]),i("a-tab-pane",{key:"2",attrs:{tab:"处理记录"}},[0==t.event_log_arr.length?i("div",{staticClass:"loading"},[t._v(" 加载中... ")]):t._e(),t._l(t.event_log_arr,(function(e,s){return i("a-timeline-item",{staticClass:"time_line"},[i("div",[i("div",{staticClass:"list_4"},[i("div",{staticClass:"list_box"},[i("div",{staticClass:"list"},[i("div",{staticClass:"text_1"},[t._v("类型：")]),i("div",{staticClass:"text_2"},[t._v(t._s(e.title?e.title:"无"))])]),t._l(e.tip,(function(e,s){return i("div",{staticClass:"list"},[""!=e.title?i("div",{staticClass:"text_1"},[t._v(t._s(e.title?e.title:"无")+"：")]):i("div",{staticClass:"text_1"},[t._v("图例：")]),""!=e.title?i("div",{staticClass:"text_2"},[t._v(t._s(e.content?e.content:"无"))]):i("div",{staticClass:"text_2"},[e.imgs.length>0?i("viewer",{attrs:{images:e.imgs}},t._l(e.imgs,(function(t,e){return i("img",{key:e,staticClass:"img_1",staticStyle:{"margin-left":"5px",height:"60px",width:"60px"},attrs:{src:t}})})),0):t._e()],1)])}))],2),i("div",{staticClass:"right_time",staticStyle:{float:"right",width:"200px"}},[t._v(" "+t._s(e.log_time)+" ")])])])])}))],2)],1):t._e()],1),i("choose-tree",{ref:"createModal",attrs:{height:800,width:1e3},on:{ok:t.handleOks}})],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left_top_box"},[i("div",{staticClass:"text_title"},[t._v("工单处理数据")]),i("div",{staticClass:"my_echarts_1",attrs:{id:"main1"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left_bottom_box"},[i("div",{staticClass:"text_title"},[t._v("工单结案率")]),i("div",{staticClass:"my_echarts_1",attrs:{id:"main2"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"top_box"},[s("img",{staticStyle:{margin:"15px"},attrs:{src:i("86eee"),alt:""}}),s("div",{staticClass:"title"},[t._v("工单处理中心")])])}],n=i("1da1"),o=i("2909"),r=i("5530"),c=i("ade3"),l=(i("96cf"),i("d81d"),i("ac1f"),i("841c"),i("4de4"),i("1276"),i("b0c0"),i("d3b7"),i("7db0"),i("313e"),i("a0e0")),d=(i("0808"),i("6944")),h=i.n(d),u=i("8bbf"),_=i.n(u),g=i("af3c"),f=i("ca00"),v=i("ec89");_.a.use(h.a);var p=[{title:"序号",dataIndex:"order_id",width:"5%"},{title:"工单详情",dataIndex:"order_content",width:"10%",scopedSlots:{customRender:"order_content"}},{title:"工单类目",dataIndex:"subject_name",width:"10%"},{title:"上报分类",dataIndex:"cate_name",width:"20%"},{title:"上报位置",dataIndex:"address_txt",width:"15%"},{title:"上报人员",dataIndex:"name",width:"6%"},{title:"手机号码",dataIndex:"phone",width:"10%"},{title:"上报时间",dataIndex:"add_time_txt",width:"10%"},{title:"状态  ",dataIndex:"status_txt",width:"7%",scopedSlots:{customRender:"status_txt"}},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],m={name:"orderTongji",components:{TagSelectOption:v["a"],chooseTree:g["default"]},data:function(){return{secondCate:"全部",right_show:!0,data:[],show:1,is_footer:0,columns:p,pagination:{},loading:!1,editingKey:"",visible:!1,search:{category_id:0,cat_fid:0,type_id:0,cat_id:0,search:"",type:"",start_time:"",end_time:"",event_status:0,single_id:0,floor_id:0,layer_id:0,room_id:0,room_ids:[],public_id:"请选择区域"},workers:[],worker_id:0,worker_name:"请选择处理人员",event_log_arr:[],detail:{order_detail_arr:[],event_log_arr:[],event_log_img:[],order_detail:{area_id:"",area_type:0,bind_id:0,cat_fid:0,cat_fname:"",cat_id:0,cat_name:"",event_status:0,event_status_color:"",event_status_txt:"",grid_member_id:0,grid_range_id:0,last_time:0,name:"",now_role:0,order_address:"",order_content:"",order_go_by_center:0,order_id:0,order_imgs:[],order_status:0,order_time:1,order_time_txt:"",order_type:0,order_worker_id:0,phone:"",polygon_name:"",uid:0,log_info:[]},event_log:[]},childrenDrawer:!1,tab_arr:[{name:"指派给"},{name:"直接回复"}],selected:"请选择处理人员",num:0,num_1:"",content_1:"",todayCount:[],rate:0,subject_list:[],f_cat_list:[],select_default:"全部",screenHeight:document.body.clientHeight,scroll_height:650,tipsItem:[],property_rating:[],series:[],legend:[],xAxis:[],options:[],options1:[],is_show:!0,tokenName:"",sysName:"",delayRequest:!1,work_label_list:[],shaixuanList:[{value:"name",name:"上报人员"},{value:"phone",name:"手机号码"},{value:"address",name:"上报位置-小区名称"},{value:"public_area",name:"上报位置-公共区域"}],is_room:!1,publicAreaList:[]}},mounted:function(){this.get_today_event_count(),this.event_data(),this.get_subject_list(0),this.getPropertyRating(1),this.fetch(),document.title="工单处理中心",this.scroll_height=this.screenHeight-55-68-150,this.getFinshOrder()},inject:["reload"],methods:{enters:function(t,e,i){},leaver:function(){},callback:function(t){console.log(t),2==t&&this.seerecord(this.detail.order_detail.order_id)},getFinshOrder:function(){var t=this;this.request(l["a"].getFinshOrder,{}).then((function(e){var i=[];e.map((function(t){i.push({name:t.subject_name,value:t.rate})})),t.myEchars2(i)}))},myEcharts1:function(){var t=this.$echarts.init(document.getElementById("main1")),e={legend:{data:this.legend,icon:"rect",itemGap:10,itemWidth:10,itemHeight:10,textStyle:{padding:[4,0,0,0],color:"#CAF2F5",fontSize:12,verticalAlign:"middle"}},calculable:!0,xAxis:[{type:"category",data:this.xAxis,axisLine:{show:!0},axisTick:{show:!1},axisLabel:{color:"rgba(255,255,255, 1)"},splitLine:{show:!1}}],yAxis:[Object(c["a"])({type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"rgba(255,255,255, 0.5)"},splitLine:{show:!1}},"splitLine",{show:!0,lineStyle:{type:"dashed",color:"rgba(255,255,255,0.1)",width:2}})],series:this.series};t.setOption(e)},myEchars2:function(t){var e=this.$echarts.init(document.getElementById("main2")),i={series:[{name:"",type:"pie",radius:[20,57],center:["50%","40%"],roseType:"radius",itemStyle:{borderRadius:50},data:t}]};e.setOption(i)},selectde_start:function(t){this.num_1=t,this.getPropertyRating(t+1)},onSubmit:function(){var t=this;if(1==this.num){if(""==this.content_1)return this.$message.warning("请输入回复内容"),!1;this.request(l["a"].updateWorkOrder,{order_id:this.detail.order_detail.order_id,log_content:this.content_1,event_status_type:"center_reply_submit"}).then((function(e){console.log(e),t.get_order_detail(t.detail.order_detail.order_id),t.$message.success("回复成功")}))}else{if(0==this.worker_id)return this.$message.warning("请选择指派的工作人员"),!1;this.request(l["a"].updateWorkOrder,{type:1,order_id:this.detail.order_detail.order_id,worker_id:this.worker_id,order_content:"",event_status_type:"center_assign_work"}).then((function(e){console.log(e),t.get_order_detail(t.detail.order_detail.order_id),t.$message.success("指派成功")}))}},handleTableChange:function(t,e,i){console.log(t);var s=Object(r["a"])({},this.pagination);s.current=t.current,this.pagination=s,this.fetch(Object(r["a"])(Object(r["a"])({results:t.pageSize,page:t.current,sortField:i.field,sortOrder:i.order},e),this.search))},fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.request(l["a"].RepairOrderList,e).then((function(e){var i=Object(r["a"])({},t.pagination);i.total=e.total,i.pageSize=e.limit,t.loading=!1,t.data=e.list,t.pagination=i}))},findAll:function(){this.fetch(this.search)},get_today_event_count:function(){var t=this;this.request(l["a"].getTongji,{}).then((function(e){t.todayCount=e,t.work_label_list=[{name:"超时工单",value:0},{name:"今日上报工单",value:e.submit_count},{name:"今日回复工单",value:e.reply_count},{name:"今日处理工单",value:e.handle_count}],console.log("todayCount",e)}))},getPropertyRating:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i={},s=Object(f["i"])(location.hash);s?(this.tokenName=s+"_access_token",this.sysName=s):(this.sysName="village",this.tokenName="village_access_token"),i.tokenName=this.tokenName,i.type=e,this.request(l["a"].getPropertyRating,i).then((function(e){console.log("getPropertyRating",e),t.tipsItem=e.list,t.property_rating=e.info}))},event_data:function(){var t=this;this.request(l["a"].orderTongji,{}).then((function(e){console.log("orderTongji",e),t.series=e.series,t.legend=e.legend,t.xAxis=e.xAxis,t.myEcharts1()}))},get_subject_list:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.request(l["a"].getSubject,{id:e}).then((function(e){t.subject_list=e}))},get_event_center:function(){this.request(l["a"].getWorkerOrderLists,{}).then((function(t){console.log("sdfds",t)}))},get_detail:function(t){this.visible=!0,this.content_1="",this.num=0,this.show=1,this.get_order_detail(t)},get_order_detail:function(t){var e=this;this.request(l["a"].getWorkOrderDetail,{order_id:t}).then((function(t){console.log("wsedre",t),e.detail=t,t.order_detail.event_status>=20?(e.show=0,e.is_footer=0):(e.show=1,e.is_footer=1)}))},worker_list:function(){var t=this;this.request(l["a"].getWorkers,{}).then((function(e){t.workers=e}))},changeCurrent:function(t){this.num=t,0==t&&(this.content_1="")},rightshow:function(){this.right_show=!this.right_show},seerecord:function(t){var e=this;this.request(l["a"].repairGetOrderLog,{order_id:t}).then((function(t){console.log("log_list",t),e.event_log_arr=t.log.info,console.log("this.detail.event_log_arr",e.detail.event_log_arr)}))},showDrawer:function(){this.visible=!0},onChildrenDrawerClose:function(){this.childrenDrawer=!1,this.visible=!0},onClose:function(){this.visible=!1,this.event_log_arr=[]},onChange:function(t,e){console.log(t,e),this.search.start_time=e[0],this.search.end_time=e[1]},Change:function(){},handleChange:function(t,e,i){if(1*t==0)return this.options=[],this.search.cat_fid=0,this.search.cat_id=0,this.search.category_id=0,void(this.secondCate="全部");this.search.category_id=t,this.search.cat_fid=t,this.secondCate="全部",this.search.cat_id="",this.getCate(t)},handleChange2:function(t,e,i){var s=this;1*t==0?(this.secondCate="全部",this.search.cat_id=0):this.options.map((function(e){e.value==t&&(s.secondCate=e.label,s.search.cat_id=e.value)}))},handleChange3:function(t,e,i){this.search.type=t,this.search.public_id="请选择区域",this.search.single_id=0,this.search.floor_id=0,this.search.layer_id=0,this.search.room_id=0,this.search.room_ids=[],this.search.search="","address"==t?(this.getSingleListByVillage("room"),this.is_show=!1,this.is_room=!0):"public_area"==t?(this.getSingleListByVillage("public_area"),this.is_show=!1,this.is_room=!1):(this.is_show=!0,this.is_room=!1)},handleChange4:function(t,e,i){this.search.event_status=t},publicAreaChange:function(t,e,i){this.search.public_id=t},edit:function(t){this.visible=!0},save:function(t){var e=Object(o["a"])(this.data),i=Object(o["a"])(this.cacheData),s=e.filter((function(e){return t===e.key}))[0],a=i.filter((function(e){return t===e.key}))[0];s&&a&&(delete s.editable,this.data=e,Object.assign(a,s),this.cacheData=i),this.editingKey=""},cancel:function(t){var e=Object(o["a"])(this.data),i=e.filter((function(e){return t===e.key}))[0];this.editingKey="",i&&(Object.assign(i,this.cacheData.filter((function(e){return t===e.key}))[0]),delete i.editable,this.data=e)},handleOks:function(t){console.log("value",t);var e=t[0],i=e.split("-");this.worker_id=i[0],this.worker_name=i[1]},getCate:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.request(l["a"].getCate,{category_id:e}).then((function(e){if(console.log("+++++++getCate",e),e){var i=[];e.map((function(t){i.push({label:t.name,value:t.id,isLeaf:!1})})),t.options=i,console.log("this.options============>",t.options)}}))},getFidCate:function(t,e){var i=this;return new Promise((function(s){i.request(l["a"].getFidCate,{type_id:t,type:e}).then((function(t){console.log("+++++++Single",t),console.log("resolve",s),s(t)}))}))},loadDataFunc:function(t){return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t[t.length-1],i.loading=!0,setTimeout((function(){i.loading=!1}),100);case 3:case"end":return e.stop()}}),e)})))()},setVisionsFunc:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var s,a,n,r,c,l,d;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(1!==t.length){i.next=13;break}return s=Object(o["a"])(e.options),i.next=4,e.getFidCate(t[0],"subject_id");case 4:a=i.sent,e.search.type_id=t[0],console.log("res",a),n=[],a.map((function(t){return n.push({label:t.name,value:t.id,isLeaf:!1}),s["children"]=n,!0})),s.find((function(e){return e.value===t[0]}))["children"]=n,e.options=s,i.next=27;break;case 13:if(2!==t.length){i.next=26;break}return i.next=16,e.getFidCate(t[1],"parent_id");case 16:r=i.sent,e.search.cat_fid=t[1],c=Object(o["a"])(e.options),l=[],r.map((function(t){return l.push({label:t.name,value:t.id,isLeaf:!0}),!0})),d=c.find((function(e){return e.value===t[0]})),d.children.find((function(e){return e.value===t[1]}))["children"]=l,e.options=c,i.next=27;break;case 26:3===t.length&&(e.search.cat_id=t[2]);case 27:case"end":return i.stop()}}),i)})))()},getSingleListByVillage:function(t){var e=this;this.request(l["a"].getSingleListByVillage,{xtype:t}).then((function(i){if(console.log("+++++++Single",i),i)if("public_area"!=t){var s=[];i.map((function(t){s.push({label:t.name,value:t.id,isLeaf:!1})})),e.options1=s}else e.publicAreaList=i}))},getFloorList:function(t){var e=this;return new Promise((function(i){e.request(l["a"].getFloorList,{pid:t}).then((function(t){console.log("+++++++Single",t),console.log("resolve",i),i(t)}))}))},getLayerList:function(t){var e=this;return new Promise((function(i){e.request(l["a"].getLayerList,{pid:t}).then((function(t){console.log("+++++++Single",t),t&&i(t)}))}))},getVacancyList:function(t){var e=this;return new Promise((function(i){e.request(l["a"].getVacancyList,{pid:t}).then((function(t){console.log("+++++++Single",t),t&&i(t)}))}))},loadDataFunc1:function(t){return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t[t.length-1],i.loading=!0,setTimeout((function(){i.loading=!1}),100);case 3:case"end":return e.stop()}}),e)})))()},setVisionsFunc1:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var s,a,n,r,c,l,d,h,u,_,g,f;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(console.log("setVisionsFunc1",t),1!==t.length){i.next=17;break}return s=Object(o["a"])(e.options1),i.next=5,e.getFloorList(t[0]);case 5:a=i.sent,e.search.single_id=t[0],e.search.floor_id=0,e.search.layer_id=0,e.search.room_id=0,console.log("res",a),n=[],a.map((function(t){return n.push({label:t.name,value:t.id,isLeaf:!1}),s["children"]=n,!0})),s.find((function(e){return e.value===t[0]}))["children"]=n,e.options1=s,i.next=49;break;case 17:if(2!==t.length){i.next=32;break}return i.next=20,e.getLayerList(t[1]);case 20:r=i.sent,e.search.floor_id=t[1],e.search.layer_id=0,e.search.room_id=0,c=Object(o["a"])(e.options1),l=[],r.map((function(t){return l.push({label:t.name,value:t.id,isLeaf:!1}),!0})),d=c.find((function(e){return e.value===t[0]})),d.children.find((function(e){return e.value===t[1]}))["children"]=l,e.options1=c,i.next=49;break;case 32:if(3!==t.length){i.next=48;break}return i.next=35,e.getVacancyList(t[2]);case 35:h=i.sent,e.search.layer_id=t[2],e.search.room_id=0,u=Object(o["a"])(e.options1),_=[],h.map((function(t){return _.push({label:t.name,value:t.id,isLeaf:!0}),!0})),g=u.find((function(e){return e.value===t[0]})),f=g.children.find((function(e){return e.value===t[1]})),f.children.find((function(e){return e.value===t[2]}))["children"]=_,e.options1=u,console.log("_this.options",e.options1),i.next=49;break;case 48:4==t.length&&(e.search.room_id=t[3]);case 49:case"end":return i.stop()}}),i)})))()}}},b=m,y=(i("e842"),i("2877")),x=Object(y["a"])(b,s,a,!1,null,"1f283110",null);e["default"]=x.exports},"86eee":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAZCAYAAAAv3j5gAAACeElEQVRIS+2VS0gVYRTHf2e0a49NDyzbZIuKIOzhnUmxWhQF0iIIW+WibBURUek6ah89IHFTUVAQCEEQBPaggjS8c71ZUVBEYEWgIhgRdHPmxHzOvU7X0W51N0UfzGbO/3y/850HR/iFoy5Xgd2hS4fYHCjWXYoVBrq/D6QpmhAeiM1w3Es1TSNQhY+PxXtJcm8KXZIxElJHT86eT52m2AVcQ3hOli3SwEjsJYrxEUFj7X2swTMBlFNGo9SOw4yTPmEFYzwFKoyz0oPNhtxlmsHBZz/KZqDaKOAtyl18OqSOfuP2mEWU8wyoDIP4BKwUm48TL3I5CxxC+IzPTnG4oy6zEc6h7M0FFfMKH6WDIVplO1/V5ShwMtS1ic2p/ItMNEFKXC4AneJwS/uZQ5YuhIYiO7OLQXYYWIrjWIxKktOTalR4mfZyCYs9kf9DWJzHI42iWCaAfcC8vEY5Iw5H4gKLnSNNU4/SHUnXfbI0FTaI9lKFxQ1gfVhbD4/VUs+LQlg8yOUK0ByK3wE1YjMa22WPWEgFL4H5IaxdHA4WCwrmaEEobs0VdKpaqcsJ4FhofyM2y34K0j4q8RmM5L1WHDLTNYSm2YTy0GgEn5nMklVkoz6iLpcjl7bzjRESvI6IqsVmYFqQSw2YOcyduVgsxaMNoSL4AtDEhFtsRRjA49Ufg2AjcDPf3j+APBpIMFwSkLINoXMClOJ2JHWHmUG2RKB1CC1TDqxmWF4KUOE4TJqj/6CgBhrT3rGp04zpeScs3GIwKyN3mlEzwIIV7qvA4lOGkAhFSyKrIfgVrJUvxlZOt6zlw/jiS9OCcnG6ofxtm9AkSa7/e6Dvn9QHphiQr/YAAAAASUVORK5CYII="},af3c:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{title:t.title,width:600,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[t.visible?i("a-tree",{attrs:{"default-expand-all":t.show,checkable:t.is_show,"tree-data":t.treeData,"default-selected-keys":[],"default-checked-keys":t.checkedKeysArr,"auto-expand-parent":t.show,"default-expand-parent":t.show},on:{select:t.onSelect,check:t.onCheck}}):t._e()],1)},a=[],n=i("a0e0"),o={data:function(){return{show:!0,is_show:!1,title:"添加",treeData:[],visible:!1,confirmLoading:!1,id:0,type:0,selectedKey:[],checkedKey:[],checkedKeysArr:[],checkedKeysArrTemp:[],index:0}},methods:{add:function(t,e,i){this.selectedKey=[],this.checkedKey=[],this.checkedKeysArrTemp=[],void 0!=i&&i&&i.length>0?this.checkedKeysArrTemp=i:this.checkedKeysArrTemp=[],this.checkedKey=this.checkedKeysArrTemp,console.log("checkedKeysArr",i),this.index=e,this.type=t,this.is_show=2==t,console.log("type",t,"is_show",this.is_show),this.title="添加",this.getDirectortree()},onSelect:function(t,e){this.selectedKey=t,console.log("selected",t,e)},onCheck:function(t,e){this.checkedKey=t,console.log("onCheck",t,e)},getDirectortree:function(){var t=this;this.request(n["a"].getDirectortree).then((function(e){t.treeData=e.res,console.log("resTree",e.res),t.checkedKeysArr=t.checkedKeysArrTemp,t.visible=!0,t.show=!0,setTimeout((function(){t.show=!0}),5e3)}))},handleSubmit:function(){this.visible=!1,this.is_show=!1,this.confirmLoading=!1,console.log("type",this.type),1==this.type?(console.log("selectedKey",this.selectedKey,this.index),this.$emit("ok",this.selectedKey,this.index)):(console.log("checkedKey",this.checkedKey,this.index),this.$emit("ok",this.checkedKey,this.index))},handleCancel:function(){this.selectedKey=[],this.checkedKey=[],this.visible=!1,this.is_show=!1,this.checkedKeysArr=[],this.checkedKeysArrTemp=[]}}},r=o,c=(i("286b"),i("2877")),l=Object(c["a"])(r,s,a,!1,null,"bf1dbf2c",null);e["default"]=l.exports},e842:function(t,e,i){"use strict";i("3544")}}]);