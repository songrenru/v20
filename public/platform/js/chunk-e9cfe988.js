(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9cfe988","chunk-2d0b3786"],{2909:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t("6b75");function r(e){if(Array.isArray(e))return Object(o["a"])(e)}t("a4d3"),t("e01a"),t("d3b7"),t("d28b"),t("3ca3"),t("ddb0"),t("a630");function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var l=t("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e){return r(e)||i(e)||Object(l["a"])(e)||s()}},"474a":function(e,a,t){"use strict";var o={getShopSeckillIndex:"/common/platform.viewpage.ShopSeckill/getDefaultInfo",getCategoryDetail:"/common/platform.viewpage.ShopSeckill/getCategoryDetail",editCategory:"/common/platform.viewpage.ShopSeckill/editCategory",getCategoryList:"/common/platform.viewpage.ShopSeckill/getCategoryList",delCategory:"/common/platform.viewpage.ShopSeckill/delCategory",getCategoryGoodsList:"/common/platform.viewpage.ShopSeckill/getCategoryGoodsList",editCategoryGoodsSort:"/common/platform.viewpage.ShopSeckill/editCategoryGoodsSort",delCategoryGoods:"/common/platform.viewpage.ShopSeckill/delCategoryGoods",addCategoryGoods:"/common/platform.viewpage.ShopSeckill/addCategoryGoods"};a["a"]=o},"5d95":function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"是否展示显示秒杀",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1==e.detail.status,valuePropName:"checked"}],expression:"['status', { initialValue: detail.status == 1 ? true : false, valuePropName: 'checked' }]"}],attrs:{"checked-children":"展示","un-checked-children":"关闭"}})],1),t("a-form-item",{attrs:{label:"活动名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{initialValue:e.detail.title,rules:[{required:!0,message:"请输入活动名称！"}]}],expression:"[\n            'title',\n            { initialValue: detail.title, rules: [{ required: true, message: '请输入活动名称！' }] },\n          ]"}]})],1),t("a-form-item",{attrs:{label:"分享主标题",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["share_title",{initialValue:e.detail.share_title,rules:[{required:!0,message:"请输入分享主标题！"}]}],expression:"[\n            'share_title',\n            { initialValue: detail.share_title, rules: [{ required: true, message: '请输入分享主标题！' }] },\n          ]"}]})],1),t("a-form-item",{attrs:{label:"分享副标题",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["share_desc",{initialValue:e.detail.share_desc,rules:[{required:!0,message:"请输入分享副标题！"}]}],expression:"[\n            'share_desc',\n            { initialValue: detail.share_desc, rules: [{ required: true, message: '请输入分享副标题！' }] },\n          ]"}]})],1),t("a-form-item",{attrs:{label:"分享图片",help:"图片尺寸建议500px*400px",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-upload",{attrs:{name:"reply_pic","file-list":e.shareImageFileList,action:e.uploadImg,headers:e.headers},on:{change:e.shareImgChange}},[t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v(" 上传图片")],1)],1)],1),t("a-form-item",{attrs:{label:"管理商品",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-button",{attrs:{type:"primary"},on:{click:e.goList}},[e._v("去管理")]),t("br"),t("label",{staticStyle:{cursor:"pointer",color:"#1890ff"}},[e._v("当前商品数量："+e._s(e.detail.goods_count)+"；")]),t("label",{attrs:{for:""}},[e._v("平台可自定义设置推荐的限时秒杀商品与所属分类")])],1)],1)],1)],1)},r=[],i=t("2909"),l=(t("fb6a"),t("d81d"),t("b0c0"),t("474a")),s=t("7a6b"),n=t("7b3f"),c=void 0,m={components:{CustomTooltip:s["a"]},data:function(){return{title:"限时秒杀配置",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:12},sm:{span:13}},confirmLoading:!1,uploadImg:"/v20/public/index.php"+n["a"].uploadImg+"?upload_dir=/group/group_combine",form:this.$form.createForm(this),shareImageFileList:[],headers:{authorization:"authorization-text"},detail:{cat_id:0,name:""}}},mounted:function(){c=this,this.getDefaultInfo()},methods:{getDefaultInfo:function(){var e=this;this.shareImageFileList=[],this.request(l["a"].getShopSeckillIndex,{}).then((function(a){if(e.detail=a,a.share_image){var t={uid:"1",name:a.share_image,status:"done",url:a.share_image};e.shareImageFileList.push(t)}}))},shareImgChange:function(e){var a=this,t=Object(i["a"])(e.fileList);console.log(t,"fileList"),console.log(t.length,"fileList1"),0==t.length&&(this.detail.share_image=""),t=t.slice(-1),t=t.map((function(t){return console.log(t,"file"),t.response&&(t.url=t.response.data.full_url,a.detail.share_image=e.file.response.data.image,console.log(a.detail.share_image,"this.detail.share_image")),t})),this.shareImageFileList=t,console.log(this.shareImageFileList,"this.shareImageFileList"),"done"===e.file.status?console.log("done"):"error"===e.file.status&&(console.log("error"),this.$message.error("".concat(e.file.name," 上传失败.")))},goList:function(){window.top.closeiframe(),window.top.goV20Url("/common/platform.viewpage/ShopSeckillCategory")}}};window.dialogConfirm=function(){var e=c,a=e.form.validateFields;c.confirmLoading=!0,a((function(e,a){e?c.confirmLoading=!1:(a.share_image=c.detail.share_image,a.cat_id=1,c.request(l["a"].editCategory,a).then((function(e){c.$message.success("编辑成功"),setTimeout((function(){c.form=c.$form.createForm(c),c.confirmLoading=!1,c.getDefaultInfo()}),1500)})).catch((function(e){c.confirmLoading=!1})))}))},window.dialogCancel=function(){c.form=c.$form.createForm(c)};var d=m,u=t("2877"),p=Object(u["a"])(d,o,r,!1,null,null,null);a["default"]=p.exports},"7b3f":function(e,a,t){"use strict";var o={uploadImg:"/common/common.UploadFile/uploadImg"};a["a"]=o}}]);