(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43fca92a","chunk-d1ab0270"],{"116d":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ant-pro-page-header-wrap-children-content",staticStyle:{margin:"24px 0 0"}},[a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",[a("a-form-item",{attrs:{label:"业务"}},[a("a-select",{staticStyle:{width:"120px"},attrs:{"label-in-value":"","default-value":{key:t.queryParam.business_type}},on:{change:t.handleBusinessTypeChange}},[a("a-select-option",{attrs:{value:"shop"}},[t._v("外卖")]),a("a-select-option",{attrs:{value:"mall"}},[t._v("商城")]),a("a-select-option",{attrs:{value:"group"}},[t._v("团购")])],1)],1),a("a-form-item",{attrs:{label:"店铺"}},[a("a-select",{staticStyle:{width:"200px"},attrs:{"label-in-value":"","default-value":{key:t.queryParam.store_id}},on:{change:t.handleStoreIdChange}},[a("a-select-option",{attrs:{value:"0"}},[t._v("全部门店")]),t._l(t.shopData,(function(e,o){return a("a-select-option",{attrs:{value:e.store_id}},[t._v(t._s(e.name)+"}")])}))],2)],1),a("a-form-item",{attrs:{label:"券类型"}},[a("a-select",{staticStyle:{width:"120px"},attrs:{"label-in-value":"","default-value":{key:t.queryParam.is_discount}},on:{change:t.handleIsDiscountChange}},[a("a-select-option",{attrs:{value:"-1"}},[t._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[t._v("折扣券")]),a("a-select-option",{attrs:{value:"0"}},[t._v("普通券")])],1)],1),a("a-form-item",{attrs:{label:"核销端口"}},[a("a-select",{staticStyle:{width:"120px"},attrs:{"label-in-value":"","default-value":{key:t.queryParam.is_mobile_pay}},on:{change:t.handleIsMobilePayChange}},[a("a-select-option",{attrs:{value:"-1"}},[t._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[t._v("微信端")]),a("a-select-option",{attrs:{value:"2"}},[t._v("APP")]),a("a-select-option",{attrs:{value:"3"}},[t._v("小程序")])],1)],1),a("a-form-item",{attrs:{label:"有效时间"}},[a("a-range-picker",{attrs:{ranges:{"今日":[t.moment(),t.moment()],"昨日":[t.moment().subtract(1,"days"),t.moment().subtract(1,"days")],"近七天":[t.moment().subtract(7,"days"),t.moment()],"近30天":[t.moment().subtract(30,"days"),t.moment()]},allowClear:!0},on:{change:t.dateOnChange},model:{value:t.search_data,callback:function(e){t.search_data=e},expression:"search_data"}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1)],1)],1),a("a-row",{staticStyle:{"margin-top":"15px","margin-bottom":"15px"},attrs:{gutter:24}},[a("a-col",[a("a-form-item",{attrs:{label:"关键字"}},[a("a-input-group",{attrs:{compact:""}},[a("a-input",{staticStyle:{width:"235px"},attrs:{"allow-clear":""},model:{value:t.queryParam.keyword,callback:function(e){t.$set(t.queryParam,"keyword",e)},expression:"queryParam.keyword"}})],1)],1),a("a-form-item",[a("a-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.searchBtn()}}},[t._v("查询")])],1)],1)],1)],1),a("a-table",{attrs:{columns:t.columns,"data-source":t.searchHotList,pagination:t.pagination,rowKey:"order_id"},on:{change:t.tableChange},scopedSlots:t._u([t._l(["sort"],(function(e){return{key:e,fn:function(o,n,r){return[a("div",{key:e},[[t._v(" "+t._s(o)+" ")]],2)]}}}))],null,!0)}),a("create-brand-selection-coupon",{ref:"createModal",on:{ok:t.handleOk}})],1)],1)},n=[],r=a("5530"),s=(a("d81d"),a("c1df")),i=a.n(s),c=a("65eb"),u=a("4892"),l={0:{status:"default",text:"否"},1:{status:"error",text:"是"}},d=[],m={name:"SearchHotList",components:{CreateBrandSelectionCoupon:u["default"]},data:function(){return this.cacheData=d.map((function(t){return Object(r["a"])({},t)})),{search_data:[],shopData:[{store_id:429,name:"张涛专属测试店铺"},{store_id:430,name:"张涛店铺"}],couponMainBrandAlias:"",sortedInfo:null,searchHotList:d,queryParam:{page:1,pageSize:10,business_type:"shop",is_discount:"-1",is_mobile_pay:"-1",keyword:"",store_id:"0"},pagination:{pageSize:10,total:10,"show-total":function(t){return"共 ".concat(t," 条记录")},"show-size-changer":!0,"show-quick-jumper":!0},editingKey:"",selectedRowKeys:[]}},filters:{statusFilter:function(t){return l[t].text},statusTypeFilter:function(t){return l[t].status}},created:function(){},computed:{columns:function(){var t=this.sortedInfo,e=this.filteredInfo;t=t||{},e=e||{};var a=[{title:"时间",dataIndex:"use_date"},{title:"券名",dataIndex:"name"},{title:"核销端口",dataIndex:"mobile_pay_str"},{title:"店铺",dataIndex:"store_name"},{title:"用户昵称",dataIndex:"nickname"}];return a}},mounted:function(){this.getSearchHotList(),this.getStoreLists()},methods:{moment:i.a,dateOnChange:function(t,e){this.queryParam.start_time=e[0],this.queryParam.end_time=e[1],console.log("search_data",this.queryParam)},handleIsMobilePayChange:function(t){this.queryParam.is_mobile_pay=t.key},handleBusinessTypeChange:function(t){this.queryParam.business_type=t.key},handleIsDiscountChange:function(t){this.queryParam.is_discount=t.key},handleStoreIdChange:function(t){this.queryParam.store_id=t.key},onSelectChange:function(t){console.log(t),this.selectedRowKeys=t},getStoreLists:function(){var t=this;this.request(c["a"].getStoreList,this.queryParam).then((function(e){t.shopData=e}))},getSearchHotList:function(){var t=this;this.request(c["a"].merCouponUseRecords,this.queryParam).then((function(e){console.log("res",e),t.searchHotList=e.list,t.pagination.total=e.total}))},searchBtn:function(){this.page=1,this.pagination.current=this.page,this.queryParam.page=1,this.getSearchHotList()},handleOk:function(){this.getSearchHotList()},tableChange:function(t,e,a){this.queryParam["pageSize"]=t.pageSize,t.current&&t.current>0&&(this.queryParam["page"]=t.current,this.getSearchHotList())}}},p=m,h=(a("4b58"),a("fc09"),a("2877")),f=Object(h["a"])(p,o,n,!1,null,"55e000b6",null);e["default"]=f.exports},4892:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,width:1e3,visible:t.visible,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")])],1),a("div",[a("a-tabs",{attrs:{"default-active-key":"system"},on:{change:t.callback}},[a("a-tab-pane",{key:"system",attrs:{tab:"平台优惠券"}},[a("a-form",{staticStyle:{"margin-bottom":"10px"},attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",[a("a-form-item",{attrs:{label:"券名称"}},[a("a-input-group",{attrs:{compact:""}},[a("a-input",{staticStyle:{width:"235px"},attrs:{"allow-clear":""},model:{value:t.queryParam.keyword,callback:function(e){t.$set(t.queryParam,"keyword",e)},expression:"queryParam.keyword"}})],1)],1),a("a-form-item",[a("a-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.searchBtn()}}},[t._v("查询")])],1)],1)],1)],1),a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-table",{attrs:{columns:t.columns,"data-source":t.searchHotList,pagination:t.pagination,rowKey:"id"},on:{change:t.tableChange},scopedSlots:t._u([t._l(["sort"],(function(e){return{key:e,fn:function(o,n,r){return[a("div",{key:e},[[t._v(" "+t._s(o)+" ")]],2)]}}})),{key:"action",fn:function(e,o){return a("span",{},[0==o.is_choose?a("a",{on:{click:function(e){return t.select_this(o)}}},[t._v("选中")]):t._e(),1==o.is_choose?a("a",{staticStyle:{color:"#777777"},on:{click:function(e){return t.unselect_this(o)}}},[t._v("取消")]):t._e()])}}],null,!0)})],1)],1),a("a-tab-pane",{key:"merchant",attrs:{tab:"商家优惠券","force-render":""}},[a("a-form",{staticStyle:{"margin-bottom":"10px"},attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",[a("a-form-item",{attrs:{label:"券名称"}},[a("a-input-group",{attrs:{compact:""}},[a("a-input",{staticStyle:{width:"235px"},attrs:{"allow-clear":""},model:{value:t.queryParam.keyword,callback:function(e){t.$set(t.queryParam,"keyword",e)},expression:"queryParam.keyword"}})],1)],1),a("a-form-item",[a("a-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.searchBtn()}}},[t._v("查询")])],1)],1)],1)],1),a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-table",{attrs:{columns:t.columns,"data-source":t.searchHotList,pagination:t.pagination,rowKey:"id"},on:{change:t.tableChange},scopedSlots:t._u([t._l(["sort"],(function(e){return{key:e,fn:function(o,n,r){return[a("div",{key:e},[[t._v(" "+t._s(o)+" ")]],2)]}}})),{key:"action",fn:function(e,o){return a("span",{},[0==o.is_choose?a("a",{on:{click:function(e){return t.select_this(o)}}},[t._v("选中")]):t._e(),1==o.is_choose?a("a",{staticStyle:{color:"#777777"},on:{click:function(e){return t.unselect_this(o)}}},[t._v("取消")]):t._e()])}}],null,!0)})],1)],1)],1)],1)],2)},n=[],r=a("65eb"),s=[],i={data:function(){return{title:"选择优惠券",searchHotList:s,queryParam:{page:1,pageSize:10,keyword:"",coupon_type:"system"},pagination:{current:1,pageSize:8,total:8,"show-total":function(t){return"共 ".concat(t," 条记录")}},editingKey:"",visible:!1,confirmLoading:!1,form:this.$form.createForm(this),detail:{id:0,name:"",sort:0,is_hot:"0"},id:"0"}},computed:{columns:function(){var t=this.sortedInfo,e=this.filteredInfo;t=t||{},e=e||{};var a=[{title:"券名称",dataIndex:"name"},{title:"券类型",dataIndex:"cate_name"},{title:"优惠金额",dataIndex:"discount"},{title:"门槛条件金额",dataIndex:"order_money"},{title:"上架有效期",dataIndex:"expire_date"},{title:"库存",dataIndex:"stock_str"},{title:"操作",dataIndex:"",scopedSlots:{customRender:"action"}}];return a}},mounted:function(){this.getSearchHotList()},methods:{searchBtn:function(){this.page=1,this.pagination.current=this.page,this.getSearchHotList()},callback:function(t){this.queryParam.coupon_type=t,this.queryParam.page=1,this.queryParam.keyword="",this.pagination.current=1,this.getSearchHotList()},select_this:function(t){var e=this;console.log(t),t.is_choose=1,this.request(r["a"].addBrandCoupon,{coupon_id:t.coupon_id,coupon_type:t.coupon_type}).then((function(t){e.$message.success("选中成功")}))},unselect_this:function(t){var e=this;console.log(t),t.is_choose=0,this.request(r["a"].delBrandCoupon,{coupon_id:t.coupon_id,coupon_type:t.coupon_type}).then((function(t){e.$message.success("取消成功")}))},getSearchHotList:function(){var t=this;this.request(r["a"].chooseBrandSelectCoupon,this.queryParam).then((function(e){console.log("res",e),t.searchHotList=e.list,t.pagination.total=e.total}))},tableChange:function(t,e,a){this.queryParam["pageSize"]=t.pageSize,t.current&&t.current>0&&(this.queryParam["page"]=t.current,this.pagination.current=t.current,this.getSearchHotList())},handleCancel:function(){this.visible=!1,this.id="0",this.form=this.$form.createForm(this),this.$emit("ok",{})},add:function(){this.visible=!0,this.id="0",this.detail={id:0,name:"",sort:0,is_hot:"0"}}}},c=i,u=a("2877"),l=Object(u["a"])(c,o,n,!1,null,null,null);e["default"]=l.exports},"4b58":function(t,e,a){"use strict";a("7414")},"65da":function(t,e,a){},"65eb":function(t,e,a){"use strict";var o={getConfig:"/common/platform.system.config/getConfig",saveConfig:"/common/platform.system.config/saveConfig",getSearchHotWords:"/common/platform.coupon/getSearchHotWords",getWordDetail:"/common/platform.coupon/getWordDetail",saveWords:"/common/platform.coupon/saveWords",saveWordsSort:"/common/platform.coupon/saveWordsSort",delWords:"/common/platform.coupon/delWords",getBrandSelectCoupon:"/common/platform.coupon/getBrandSelectCoupon",chooseBrandSelectCoupon:"/common/platform.coupon/chooseBrandSelectCoupon",addBrandCoupon:"/common/platform.coupon/addBrandCoupon",delBrandCoupon:"/common/platform.coupon/delBrandCoupon",sysCouponUseRecords:"/common/platform.coupon/sysCouponUseRecords",sysCouponGetRecords:"/common/platform.coupon/sysCouponGetRecords",exportSysGetRecords:"/common/platform.coupon/exportSysGetRecords",merCouponUseRecords:"/merchant/merchant.coupon/merCouponUseRecords",merCouponGetRecords:"/merchant/merchant.coupon/merCouponGetRecords",exportMerGetRecords:"/merchant/merchant.coupon/exportMerGetRecords",getStoreList:"/merchant/merchant.store/getStoreList",updateUse:"/merchant/merchant.coupon/updateUse"};e["a"]=o},7414:function(t,e,a){},fc09:function(t,e,a){"use strict";a("65da")}}]);