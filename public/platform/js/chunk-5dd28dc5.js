(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5dd28dc5"],{"2d3d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"components-layout-demo-basic"}},[a("a-spin",{attrs:{spinning:e.spinning,size:"large"}},[a("a-layout",[a("a-layout-content",{style:{margin:"24px 16px",padding:"24px",background:"#fff",minHeight:"100px"}},[a("a-form",e._b({attrs:{id:"components-form-demo-validate-other",model:e.formData}},"a-form",{labelCol:{span:3},wrapperCol:{span:21}},!1),[a("a-form-item",{attrs:{label:"模板名称:"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入模板名称"}]}],expression:"[\n                       'username',\n      { rules: [{ required: true, message: '请输入模板名称' }] },\n    ]"}],staticStyle:{width:"200px"},attrs:{placeholder:"输入模板名称"},model:{value:e.formData.name1,callback:function(t){e.$set(e.formData,"name1",t)},expression:"formData.name1"}})],1),a("a-form-item",{attrs:{label:"计费方式:"}},[a("a-radio-group",{attrs:{disabled:e.is_disabled},on:{change:function(t){return e.changeRadio()}},model:{value:e.formData.freight_type,callback:function(t){e.$set(e.formData,"freight_type",t)},expression:"formData.freight_type"}},[a("a-radio",{attrs:{value:1}},[e._v(" 按件数")]),a("a-radio",{attrs:{value:2}},[e._v(" 按重量")])],1)],1),a("a-form-item",{attrs:{label:"配送区域:"}},[a("a-table",{attrs:{columns:e.columns,"data-source":e.formData.data,pagination:!1},scopedSlots:e._u([{key:"name",fn:function(t){return a("a",{},[e._v(e._s(t))])}},{key:"action",fn:function(t,r){return a("a",{},[a("a",{on:{click:function(t){return e.updateTem(r.id)}}},[e._v("修改")]),a("a",{staticClass:"ml-10",on:{click:function(t){return e.delTem(r.id)}}},[e._v("删除")])])}},{key:"first_weight",fn:function(t,r){return a("a",{},[a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0,step:1},model:{value:r.first_weight,callback:function(t){e.$set(r,"first_weight",t)},expression:"record.first_weight"}})],1)}},{key:"first_freight",fn:function(t,r){return a("a",{},[a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0,step:.01},model:{value:r.first_freight,callback:function(t){e.$set(r,"first_freight",t)},expression:"record.first_freight"}})],1)}},{key:"add_weight",fn:function(t,r){return a("a",{},[a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0,step:1},model:{value:r.add_weight,callback:function(t){e.$set(r,"add_weight",t)},expression:"record.add_weight"}})],1)}},{key:"add_freight",fn:function(t,r){return a("a",{},[a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0,step:.01},model:{value:r.add_freight,callback:function(t){e.$set(r,"add_freight",t)},expression:"record.add_freight"}})],1)}}])},[a("template",{slot:"footer"},[a("a",{on:{click:function(t){return e.showModal(1)}}},[e._v("指定可配送区域")]),a("a-modal",{attrs:{title:"选择可配送区域"},on:{ok:e.handleOk,cancel:e.handleCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticStyle:{"overflow-y":"scroll",height:"600px"}},[a("a-transfer",{staticClass:"tree-transfer",attrs:{rowKey:function(e){return e.key},"data-source":e.dataSource,"target-keys":e.targetKeys,render:function(e){return e.title},"show-select-all":!0},on:{change:e.onChange,scroll:e.handleScroll},scopedSlots:e._u([{key:"children",fn:function(t){var r=t.props,i=r.direction,l=r.selectedKeys,n=t.on,o=n.itemSelect,s=n.itemSelectAll;return["left"===i?a("a-tree",{attrs:{defaultExpandAll:!1,blockNode:"",checkable:"",checkStrictly:"",checkedKeys:l.concat(e.targetKeys),treeData:e.treeData},on:{check:function(t,a){e.onChecked(t,a,l.concat(e.targetKeys),o,s)},select:function(t,a){e.onChecked(t,a,l.concat(e.targetKeys),o,s)}}}):e._e()]}}])})],1)])],1)],2)],1),a("a-form-item",{attrs:{"label-col":e.formTailLayout.labelCol,"wrapper-col":e.formTailLayout.wrapperCol}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveData()}}},[e._v(" 保存 ")])],1)],1)],1)],1)],1)],1)},i=[],l=(a("5cad"),a("7b2d")),n=(a("d3b7"),a("159b"),a("b0c0"),a("25f0"),a("a434"),a("d81d"),a("4de4"),a("c1df")),o=a.n(n),s=a("4031"),d=a("8bbf"),c=a.n(d);c.a.use(l["a"]);var m={labelCol:{span:4},wrapperCol:{span:8,offset:4}},h=[],g=[],f=[];function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){f.push(e),p(e.children)}))}function u(e,t){return-1!==e.indexOf(t)}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.forEach((function(e){e.children&&_(e.children,t)})),e}var v=[{title:"可配送区域",dataIndex:"name",key:"name",slots:{title:"customTitle"},scopedSlots:{customRender:"name"}},{title:"操作",dataIndex:"action",width:"20%",key:"action",scopedSlots:{customRender:"action"}},{title:"首件(件)",init:1,step:1,dataIndex:"first_weight",width:"15%",key:"first_weight",scopedSlots:{customRender:"first_weight"}},{title:"运费(元)",init:0,step:.01,dataIndex:"first_freight",width:"15%",key:"first_freight",scopedSlots:{customRender:"first_freight"}},{title:"续件(件)",key:"add_weight",init:0,step:1,dataIndex:"add_weight",width:"15%",scopedSlots:{customRender:"add_weight"}},{title:"运费(元)",init:0,step:.01,key:"add_freight",dataIndex:"add_freight",width:"15%",scopedSlots:{customRender:"add_freight"}}],S=[{title:"可配送区域",dataIndex:"name",key:"name",slots:{title:"customTitle"},scopedSlots:{customRender:"name"}},{title:"操作",dataIndex:"action",width:"20%",key:"action",scopedSlots:{customRender:"action"}},{title:"首重(KG)",init:0,step:.1,dataIndex:"first_weight",width:"15%",key:"first_weight",scopedSlots:{customRender:"first_weight"}},{title:"运费(元)",init:0,step:.01,dataIndex:"first_freight",width:"15%",key:"first_freight",scopedSlots:{customRender:"first_freight"}},{title:"续重(KG)",key:"add_weight",init:0,step:1,dataIndex:"add_weight",width:"15%",scopedSlots:{customRender:"add_weight"}},{title:"续费(元)",init:0,step:.01,key:"add_freight",dataIndex:"add_freight",width:"15%",scopedSlots:{customRender:"add_freight"}}],M={name:"TemplateEdit",data:function(){return{is_disabled:!1,disabled:!1,columns:v,formTailLayout:m,loading:!1,visible:!1,is_put:!0,spinning:!1,first_weight:"",first_freight:"",add_weight:"",add_freight:"",freight_type:1,freight:0,tem_id:0,mer_id:0,areas:[],areas_name:[],get_area_id:[],vid:0,up_id:0,check_id:0,event_code:"",formData:{name1:"",freight_type:1,data:[]},targetKeys:[],dataSource:f,son_list:[],check_prov:[],show_status:0,sel_pro:[]}},computed:{treeData:function(){return _(h,this.targetKeys)}},watch:{"$route.query.tid":{deep:!0,handler:function(e){var t=this;e&&1*e!=0?(this.is_disabled=!0,this.tem_id=this.$route.query.tid,this.request(s["a"].editTemplate,{tid:this.tem_id}).then((function(e){t.formData.name1=e.name,t.formData.freight_type=e.freight_type,t.formData.data=e.value_list,t.get_area_id=e.already_check,t.mer_id=e.mer_id,t.columns=1==e.freight_type?v:S}))):(this.formData={name1:"",freight_type:1,data:[]},this.is_disabled=!1,this.get_area_id=[],this.tem_id=0)}}},created:function(){var e=this;this.tem_id=this.$route.query.tid||0;var t=localStorage.getItem("tid");1*t==0&&(this.tem_id=0),this.tem_id&&this.request(s["a"].editTemplate,{tid:this.tem_id}).then((function(t){e.formData.name1=t.name,e.formData.freight_type=t.freight_type,e.formData.data=t.value_list,e.get_area_id=t.already_check,e.mer_id=t.mer_id,e.columns=1==t.freight_type?v:S}))},methods:{moment:o.a,showModal:function(e){var t=this;this.show_status=e,h=[],g=[],this.targetKeys=[];var a={vid:this.up_id};this.request(s["a"].getTemplateAreaList,a).then((function(a){for(var r=0;r<a.province_list.length;++r){var i={};if(t.get_area_id.length>0&&1==e){var l=t.get_area_id.indexOf(a.province_list[r].area_id.toString());i=1*l==-1?{key:a.province_list[r].area_id.toString(),title:a.province_list[r].area_name,level:a.province_list[r].area_type}:{key:a.province_list[r].area_id.toString(),title:a.province_list[r].area_name,level:a.province_list[r].area_type,disabled:!0}}else i={key:a.province_list[r].area_id.toString(),title:a.province_list[r].area_name,level:a.province_list[r].area_type};a.province_list[r].son_list&&a.province_list[r].son_list.length>0&&(i.children=t.getSonList(a.province_list[r].son_list,e)),h.push(i)}if(a.area_list.length>0){for(var n=0;n<a.area_list.length;++n)g[n]=a.area_list[n].area_id+"";t.targetKeys=g}else t.check_id>0&&0==e?t.targetKeys=t.areas_name[t.check_id]:t.check_id>0&&1==e&&(t.targetKeys=[]);if(console.log(t.sel_pro,"this.sel_pro===this.sel_pro==this.sel_pro"),t.sel_pro.length>0&&0==e)for(var o=function(e){t.formData.data[e]["id"]==t.up_id&&t.targetKeys.forEach((function(a){var r=t.formData.data[e]["areas"].indexOf(a.toString());if(-1==r){var i=t.targetKeys.indexOf(a.toString());t.targetKeys.splice(i,1)}}))},s=0;s<t.formData.data.length;s++)o(s);p(JSON.parse(JSON.stringify(h))),t.visible=!0}))},handleOk:function(e){var t=this,a=this.formData.data||[];this.request(s["a"].getTemplateAreaNameList,{arrs:this.targetKeys}).then((function(e){if(""==e)t.$message.error("请选择城市到右边展示区内！");else{var r={vid:0,id:e.id,name:e.area_name,first_weight:0,freight:0,first_freight:0,add_weight:0,add_freight:0,areas:t.unique(t.targetKeys)};if(t.up_id>0)for(var i=0;i<t.formData.data.length;i++)t.formData.data[i]["id"]==t.up_id&&(0==t.show_status&&(r.first_weight=t.formData.data[i]["first_weight"],r.freight=t.formData.data[i]["freight"],r.first_freight=t.formData.data[i]["first_freight"],r.add_weight=t.formData.data[i]["add_weight"],r.add_freight=t.formData.data[i]["add_freight"]),t.formData.data.splice(i,1,r));else a.push(r),t.$set(t.formData,"data",a);if(t.visible=!1,t.areas_name[e.id]=t.targetKeys,t.targetKeys.length>0)for(var l=0;l<t.targetKeys.length;l++)t.get_area_id.push(t.targetKeys[l]);if(e.area_pid.length>0)for(var n=0;n<e.area_pid.length;n++){t.get_area_id.push(e.area_pid[n]);var o=t.get_area_id.indexOf(e.area_pid[n].toString());t.sel_pro[o]=e.area_pid[n]}t.targetKeys=[],t.up_id=0}}))},handleCancel:function(e){this.visible=!1,h=[]},updateTem:function(e){this.up_id=e,this.check_id=e,this.showModal(0)},delTem:function(e){for(var t=this,a=0;a<this.formData.data.length;a++)this.formData.data[a]["id"]==e&&(this.formData.data[a]["areas"].length>0&&(this.formData.data[a]["areas"].forEach((function(e){var a=t.get_area_id.indexOf(e+"");a>-1&&t.get_area_id.splice(a,1)})),this.sel_pro.length>0&&this.sel_pro.forEach((function(e){var a=t.get_area_id.indexOf(e+"");a>-1&&t.get_area_id.splice(a,1)}))),this.formData.data.splice(a,1))},unique:function(e){if(!Array.isArray(e))return[];for(var t=[],a=0;a<e.length;a++)-1===t.indexOf(e[a])&&t.push(e[a]);return t},changeRadio:function(){1==this.formData.freight_type?this.columns=v:this.columns=S},onChange:function(e,t,a){var r=this;"right"==t&&(console.log(this.event_code,"this.event_code==this.event_code"),this.targetKeys=e),"left"==t&&(0==a.length&&window.location.reload(),a.forEach((function(t){var a=e.indexOf(t+"");a>-1&&e.splice(a,1),r.targetKeys=e;var i=r.get_area_id.indexOf(t+"");i>-1&&r.get_area_id.splice(i,1);var l=r.sel_pro.indexOf(t+"");l>-1&&r.sel_pro.splice(l,1)})),this.sel_pro.length>0&&this.sel_pro.forEach((function(e){var t=r.get_area_id.indexOf(e+"");t>-1&&r.get_area_id.splice(t,1)})))},onChecked:function(e,t,a,r,i){var l=t.node.eventKey,n=t.node.dataRef.level||"",o=t.node.dataRef.children||[],s=t.checked||!1;if(1==n&&o.length){if(s)this.event_code=l,a.push(l),o.forEach((function(e){a.push(e.key)}));else{var d=o.map((function(e){return e.key}));d.push(l),a=a.filter((function(e){if(-1!=d.indexOf(e))return e}))}i(a,s)}else r(l,!u(a,l))},getSonList:function(e,t){if(this.son_list=[],e.length>0)for(var a=0;a<e.length;++a)if(this.get_area_id.length>0&&1==t){var r=this.get_area_id.indexOf(e[a].area_id.toString());1*r==-1?this.son_list.push({key:e[a].area_id.toString(),title:e[a].area_name,disabled:!1}):this.son_list.push({key:e[a].area_id.toString(),title:e[a].area_name,disabled:!0})}else this.son_list.push({key:e[a].area_id.toString(),title:e[a].area_name,disabled:!1});return this.son_list},handleScroll:function(e,t){console.log("direction:",e),console.log("target:",t.target)},saveData:function(){var e=this,t={};t=this.tem_id?{tpl_id:this.tem_id,name:this.formData.name1,datas:this.formData.data,freight_type:this.formData.freight_type}:{tpl_id:0,name:this.formData.name1,datas:this.formData.data,freight_type:this.formData.freight_type},0==this.formData.data.length?this.$message.error("请选择可配送区域再提交！"):this.request(s["a"].addTemplate,t).then((function(t){1==t.status?(e.$message.success("提交成功！"),e.sel_pro=[],e.get_area_id=[],e.$set(e.formData,"data",[]),e.$router.push({path:"/merchant/merchant.mall/templateList"})):e.$message.error(t.msg)}))},getAreaidExit:function(e){}}},y=M,G=(a("338d"),a("0c7c")),w=Object(G["a"])(y,r,i,!1,null,"6279a723",null);t["default"]=w.exports},"338d":function(e,t,a){"use strict";a("e9dd")},4031:function(e,t,a){"use strict";var r={getLists:"/mall/merchant.MerchantStoreMall/getStoreList",perfectedStore:"/mall/merchant.MerchantStoreMall/perfectedStore",getStoreConfigList:"/mall/merchant.MerchantStoreMall/getStoreConfigList",getShippingList:"/mall/merchant.MallShipping/getShippingList",updateShipping:"/mall/merchant.MallShipping/addShipping",changeState:"/mall/merchant.MallShipping/changeState",removeShipping:"/mall/merchant.MallShipping/del",getShippingInfo:"/mall/merchant.MallShipping/edit",getMerchantSort:"/mall/merchant.MallGoods/getMerchantSort",getMallGoods:"/mall/merchant.MallGoods/getMallGoodsSelect",getGiveList:"/mall/merchant.MallGive/getGiveList",giveAdd:"/mall/merchant.MallGive/addGive",giveChangeState:"/mall/merchant.MallGive/changeState",giveDel:"/mall/merchant.MallGive/del",getGiveInfo:"/mall/merchant.MallGive/edit",getPlatSort:"/mall/merchant.MallGoods/getPlatformSort",getStoreSort:"/mall/merchant.MallGoods/getMerchantSort",getPrepareList:"/mall/merchant.MallPrepare/getPrepareList",updatePrepare:"/mall/merchant.MallPrepare/addPrepare",prepareChangeState:"/mall/merchant.MallPrepare/changeState",removePrepare:"/mall/merchant.MallPrepare/del",getPrepareInfo:"/mall/merchant.MallPrepare/edit",getReachedList:"/mall/merchant.MallReached/getReachedList",updateReachedList:"/mall/merchant.MallReached/addReached",getReachedInfo:"/mall/merchant.MallReached/edit",reachedChangeState:"/mall/merchant.MallReached/changeState",reachedDel:"/mall/merchant.MallReached/del",addRobot:"/mall/merchant.MallGroup/addRobot",delRobot:"/mall/merchant.MallGroup/delRobot",getRobotList:"/mall/merchant.MallGroup/getRobotList",getRobotName:"/mall/merchant.MallGroup/getRobotName",getUploadImages:"/common/common.UploadFile/getUploadImages",getGoodsSort:"/mall/merchant.MallGoods/getMerchantSort",getGoodsStatus:"/mall/merchant.MallGoods/getNumbers",getGoodsList:"/mall/merchant.MallGoods/getGoodsList",changeGoodsStatus:"/mall/merchant.MallGoods/setStatusLot",setVirtualSales:"/mall/merchant.MallGoods/setVirtualSales",changeGoodsSort:"/mall/merchant.MallGoods/setSort",getGoodsSkuPrice:"/mall/merchant.MallGoods/getGoodsSkuInfo",changeGoodsPrice:"/mall/merchant.MallGoods/setGoodsSkuInfo",getPlatProps:"/mall/merchant.MallGoods/getPlatformProperties",getFreightList:"/mall/merchant.MallGoods/getfreightList",getServiceList:"/mall/merchant.MallGoods/dealService",removeGoods:"/mall/merchant.MallGoods/delGoods",updateGoods:"/mall/merchant.MallGoods/addOrEditGoods",exportGoods:"/mall/merchant.MallGoods/exportGoods",getGoodsInfo:"/mall/merchant.MallGoods/getEditGoods",getGroupList:"/mall/merchant.MallGroup/getGroupList",groupAdd:"/mall/merchant.MallGroup/addGroup",groupChangeState:"/mall/merchant.MallGroup/changeState",groupDel:"/mall/merchant.MallGroup/del",getGroupInfo:"/mall/merchant.MallGroup/editDetail",getPeriodicList:"/mall/merchant.MallPeriodic/getPeriodicList",updatePeriodic:"/mall/merchant.MallPeriodic/addPeriodic",periodicChangeState:"/mall/merchant.MallPeriodic/changeState",removePeriodic:"/mall/merchant.MallPeriodic/del",getPeriodicInfo:"/mall/merchant.MallPeriodic/edit",getBargainList:"/mall/merchant.MallBargain/getBargainList",bargainAdd:"/mall/merchant.MallBargain/addBargain",bargainChangeState:"/mall/merchant.MallBargain/changeState",bargainDel:"/mall/merchant.MallBargain/del",getBargainInfo:"/mall/merchant.MallBargain/editDetail",getMinusDiscountList:"/mall/merchant.MallFullMinusDiscount/getFullMinusDiscountList",updateMinusDiscount:"/mall/merchant.MallFullMinusDiscount/addFullMinusDiscount",minusDiscountChangeState:"/mall/merchant.MallFullMinusDiscount/changeState",removeMinusDiscount:"/mall/merchant.MallFullMinusDiscount/del",getMinusDiscountInfo:"/mall/merchant.MallFullMinusDiscount/edit",getLimitedList:"/mall/merchant.MallLimited/getLimitedList",updateLimited:"/mall/merchant.MallLimited/addLimited",limitedChangeState:"/mall/merchant.MallLimited/changeState",removeLimited:"/mall/merchant.MallLimited/del",getLimitedInfo:"/mall/merchant.MallLimited/edit",getGoodsSortList:"/mall/merchant.MallGoodsSort/getSortList",delGoodsSort:"/mall/merchant.MallGoodsSort/delSort",editGoodsSort:"/mall/merchant.MallGoodsSort/addOrEditSort",getEditSort:"/mall/merchant.MallGoodsSort/getEditSort",editSort:"/mall/merchant.MallGoodsSort/saveSort",saveStatus:"/mall/merchant.MallGoodsSort/saveStatus",getAllGoodsSort:"/mall/merchant.MallGoodsSort/getSort",getStoreList:"/mall/merchant.MallMerchantReply/getStores",getReplyList:"/mall/merchant.MallMerchantReply/searchReply",addComment:"/mall/merchant.MallMerchantReply/merchantReply",getReplyDetails:"/mall/merchant.MallMerchantReply/getReplyDetails",getShowHomePage:"/mall/merchant.MallMerchantReply/getShowHomePage",getQualityReviews:"/mall/merchant.MallMerchantReply/getQualityReviews",getShowHomePageCancel:"/mall/merchant.MallMerchantReply/getShowHomePageCancel",getQualityReviewsCancel:"/mall/merchant.MallMerchantReply/getQualityReviewsCancel",getOrderList:"/mall/merchant.MallOrder/searchOrders",getOrderDetails:"/mall/merchant.MallOrder/getOrderDetails",getCollect:"/mall/merchant.MallOrder/getCollect",getDiscount:"/mall/merchant.MallOrder/getDiscount",exportOrder:"/mall/merchant.MallOrder/exportOrder ",deleteJudge:"/mall/merchant.MallGoods/deleteJudge ",getTemplateList:"/mall/merchant.ExpressTemplate/index",getTemplateAreaList:"/mall/merchant.ExpressTemplate/ajax_area",getTemplateAreaNameList:"/mall/merchant.ExpressTemplate/get_area_name",addTemplate:"/mall/merchant.ExpressTemplate/save",editTemplate:"/mall/merchant.ExpressTemplate/edit",delTemplate:"/mall/merchant.ExpressTemplate/delete",goodsBatch:"/mall/merchant.MallGoods/goodsBatch",viewLogistics:"/mall/merchant.MallOrder/viewLogistics",orderPrintTicket:"/mall/merchant.MallOrder/printOrder"};t["a"]=r},e9dd:function(e,t,a){}}]);