(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a6d7e37a"],{"63f1":function(t,e,i){"use strict";i.r(e);i("ac1f"),i("841c"),i("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[e("a-row",{staticClass:"center",attrs:{type:"flex",align:"middle"}},[e("div",[e("a-input",{staticStyle:{width:"300px"},attrs:{allowClear:"",placeholder:"请输入WiFi名称"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),e("a-button",{staticStyle:{margin:"10px 20px"},attrs:{type:"primary"},on:{click:t.search}},[t._v(t._s(t.L("搜索")))])],1),e("div",{staticClass:"btn_list"},[e("a-button",{staticStyle:{margin:"10px 20px"},attrs:{type:"primary"},on:{click:t.addClick}},[t._v(t._s(t.L("新建")))]),e("a-button",{staticStyle:{margin:"10px 20px"},attrs:{type:"danger"},on:{click:t.deleltClick}},[t._v(t._s(t.L("删除")))])],1)]),e("a-table",{staticStyle:{background:"#ffffff"},attrs:{columns:t.columns,rowKey:"id","data-source":t.dataList,pagination:t.pagination,rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onParkingChange}},scopedSlots:t._u([{key:"start_time",fn:function(i,s){return e("span",{},[e("span",{attrs:{title:s.add_time}},[t._v(t._s(s.add_time))])])}},{key:"status",fn:function(i,s){return e("span",{},[e("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关",checked:1==s.status},on:{change:function(e){return t.switchOnChange(e,s)}}})],1)}},{key:"old_price",fn:function(i,s){return e("span",{},[1==s.is_sku?e("span",[t._v("--")]):e("span",[t._v(t._s(i))])])}},{key:"action",fn:function(i,s){return e("span",{},[e("a",{staticClass:"inline-block",staticStyle:{"margin-right":"10px"},on:{click:function(e){return t.EditTicket(s)}}},[t._v(t._s(t.L("编辑")))]),e("a",{staticClass:"inline-block",staticStyle:{color:"red"},on:{click:function(e){return t.delPackage(s)}}},[t._v(t._s(t.L("删除")))])])}}])}),e("a-modal",{attrs:{maskClosable:!1,destroyOnClose:"",width:"45%",title:t.titles},on:{ok:t.handleOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("div",{staticClass:"newBox"},[e("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-col":{span:5},"wrapper-col":{span:12}}},[e("a-form-model-item",{attrs:{label:"WiFi名称",prop:"name"}},[e("a-input",{attrs:{placeholder:"请输入WiFi名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("a-form-model-item",{attrs:{label:"WiFi密码",prop:"wifi_pass"}},[e("a-input",{attrs:{placeholder:"请输入WiFi密码"},model:{value:t.form.wifi_pass,callback:function(e){t.$set(t.form,"wifi_pass",e)},expression:"form.wifi_pass"}})],1),e("a-form-model-item",{attrs:{label:"WiFi中心经纬度",prop:"latlng"}},[e("a-input",{staticStyle:{width:"200px"},attrs:{disabled:!0,placeholder:"请选择位置"},model:{value:t.form.latlng,callback:function(e){t.$set(t.form,"latlng",e)},expression:"form.latlng"}}),e("a",{staticStyle:{"margin-left":"5px"},on:{click:t.mapPointClick}},[t._v("地图选点")])],1),e("a-form-model-item",{attrs:{label:"有效范围半径",prop:"effective_range"}},[e("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入有效范围半径"},model:{value:t.form.effective_range,callback:function(e){t.$set(t.form,"effective_range",e)},expression:"form.effective_range"}}),e("span",[t._v("  米")])],1),e("a-form-model-item",{attrs:{label:"发布单位",prop:"issued_by"}},[e("a-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入发布单位"},model:{value:t.form.issued_by,callback:function(e){t.$set(t.form,"issued_by",e)},expression:"form.issued_by"}})],1),e("a-form-model-item",{attrs:{label:"是否开启",prop:"status"}},[e("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1)],1)]),e("map-point",{ref:"mapPointModel",on:{loadRefresh:t.setLongLat}}),e("a-modal",{attrs:{visible:t.previewVisibleCover,footer:null},on:{cancel:function(){t.previewVisibleCover=!1}}},[t.previewImageCover?e("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImageCover}}):t._e()])],1)},a=[],n=(i("1276"),i("4d95")),r=i("70e4"),o=i("c1df"),l=i.n(o),c={components:{mapPoint:r["default"]},data:function(){var t=this;return{visible:!1,previewVisibleCover:!1,previewImageCover:null,tools_id:"",form:{name:"",wifi_pass:"",long:"",lat:"",latlng:"",time:"",effective_range:"",issued_by:"",status:!0},formData:{},rules:{name:[{required:!0,message:"请输入WiFi名称",trigger:"blur"}],latlng:[{required:!0,message:"请选择位置",trigger:"blur"}],wifi_pass:[{required:!0,message:"请输入WiFi密码",trigger:"change"}],effective_range:[{required:!0,message:"请输入有效范围半径",trigger:"change"}],issued_by:[{required:!0,message:"请输入发布单位",trigger:"change"}],status:[{required:!0,message:"",trigger:"change"}],time:[{required:!0,message:"请选择使用时间",trigger:"change"}]},titles:"新建",columns:[{title:this.L("WiFi名称"),dataIndex:"name",ellipsis:!0,width:300},{title:this.L("发布时间"),dataIndex:"start_time",ellipsis:!0,width:200,scopedSlots:{customRender:"start_time"}},{title:this.L("密码"),dataIndex:"wifi_pass",ellipsis:!0,width:300,scopedSlots:{customRender:"wifi_pass"}},{title:this.L("状态"),dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:this.L("操作"),dataIndex:"ticket_id",key:"ticket_id",scopedSlots:{customRender:"action"}}],dataList:[],keywords:"",pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(e){return t.L("共X1个WiFi",{X1:e})}},audit_status:"",selectedRowKeys:[],pageNum:0}},created:function(){this.getWiFiList()},methods:{moment:l.a,mapPointClick:function(){this.$refs.mapPointModel.selectPoint(),this.$store.state.user&&this.$store.state.user.info.area_name&&this.$refs.mapPointModel.onSearch(this.$store.state.user.info.area_name)},changeTimeSelect:function(t,e,i){"start_time"==i?this.form.start_time=l()(t).format("HH:mm"):this.form.end_time=l()(t).format("HH:mm"),null!=this.form.start_time&&null!=this.form.end_time&&(this.form.time=this.form.start_time+"_"+this.form.end_time,this.$refs.ruleForm.validateField("time",(function(t,e){})))},switchOnChange:function(t,e){var i=this;this.request(n["a"].wifiStatusChange,{id:e.id,status:t?1:0}).then((function(t){i.$message.success("修改状态成功"),i.getWiFiList()}))},getWiFiList:function(){var t=this,e={page:this.pagination.current,page_size:this.pagination.pageSize,keywords:this.keywords};this.request(n["a"].wifiList,e).then((function(e){t.dataList=e.data,t.$set(t.pagination,"total",e.total)}))},onPageChange:function(t,e){this.$set(this.pagination,"current",t),this.getWiFiList()},onPageSizeChange:function(t,e){this.$set(this.pagination,"current",1),this.$set(this.pagination,"pageSize",e),this.getWiFiList()},EditTicket:function(t){var e=this;this.titles="编辑",this.request(n["a"].wifiShow,{id:t.id}).then((function(t){e.visible=!0,e.form=t,e.form.status=1==t.status,e.form.latlng=t.lat+","+t.long}))},toSetPage:function(t){var e=Math.ceil((this.pagination.total-(1==t?1:this.dataList.length))/this.pagination.pageSize);this.pagination.current=this.pagination.current>e?e:this.pagination.current,this.pagination.current=this.pagination.current<1?1:this.pagination.current},search:function(){this.pagination.current=1,this.getWiFiList()},onParkingChange:function(t){this.selectedRowKeys=t},addClick:function(){this.titles="新建",this.visible=!0,this.form={name:"",wifi_pass:"",long:"",lat:"",latlng:"",time:"",effective_range:"",issued_by:"",status:!0}},delPackage:function(t){var e=this;this.$confirm({title:"是否删除该WiFi吗?",centered:!0,onOk:function(){e.request(n["a"].wifiDelete,{id:[t.id]}).then((function(t){e.toSetPage(1),e.$message.success("删除成功"),e.getWiFiList()}))},onCancel:function(){}})},deleltClick:function(){var t=this;0!=this.selectedRowKeys.length?this.$confirm({title:"是否删除单个或多个WiFi?",centered:!0,onOk:function(){t.request(n["a"].wifiDelete,{id:t.selectedRowKeys}).then((function(e){t.toSetPage(2),t.$message.success("删除成功"),t.getWiFiList()}))},onCancel:function(){}}):this.$message.warning("请选择单个或多个列表")},add_editList:function(t){var e=this,i={name:this.form.name,wifi_pass:this.form.wifi_pass,long:this.form.long,lat:this.form.lat,effective_range:this.form.effective_range,issued_by:this.form.issued_by,status:this.form.status?1:0},s="添加成功";s=1==t?"添加成功":"编辑成功",this.request(n["a"].wifiAdd,i).then((function(t){e.$message.success(s),e.visible=!1,e.getWiFiList()}))},handleOk:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.add_editList(1)}))},setLongLat:function(t){var e=t.split(",");this.form.latlng=t,this.form.long=e[0],this.form.lat=e[1],this.$refs.ruleForm.validateField("latlng",(function(t,e){}))}}},u=c,f=(i("f288"),i("2877")),d=Object(f["a"])(u,s,a,!1,null,"3c2031a0",null);e["default"]=d.exports},7416:function(t,e,i){},f288:function(t,e,i){"use strict";i("7416")}}]);