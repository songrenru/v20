(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b03dc2e","chunk-2d0c20b9","chunk-2d0c20b9"],{4942:function(t,e){var a={getrem:function(){var t=1/window.devicePixelRatio;document.write('<meta name="viewport" content="width=device-width,initial-scale='+t+",minimum-scale="+t+",maximum-scale="+t+'" />');var e=document.getElementsByTagName("html")[0],a=e.getBoundingClientRect().width;e.style.fontSize=a/10+"px"}};t.exports=a},a2b9:function(t,e,a){"use strict";a("b352")},b352:function(t,e,a){},ffc8:function(t,e,a){"use strict";a.r(e);a("54f8");var i=function(){var t=this,e=t._self._c;return e("a-drawer",{attrs:{title:t.title,placement:"right",width:t.widthDrawer,closable:!0,visible:t.visible},on:{close:t.onClose}},[e("div",{staticClass:"flex_row_center"},[e("div",{staticClass:"top_title fix_top_title"},[t._v("房间号/车位号："),e("span",{staticClass:"top_title_color"},[t._v(t._s(t.lastinfo.number))])]),e("div",{staticClass:"top_title"},[t._v("业主名："),e("span",{staticClass:"top_title_color"},[t._v(t._s(t.lastinfo.name))])]),e("div",{staticClass:"top_title"},[t._v("电话："),e("span",{staticClass:"top_title_color"},[t._v(t._s(t.lastinfo.phone))])]),e("div",{staticClass:"top_title"},[t._v("合计："),e("span",{staticClass:"top_title_color"},[t._v(t._s(t.lastinfo.total_money))])])]),t._l(t.OrderData,(function(a,i){return e("div",{key:i,staticClass:"father_box"},[e("div",{staticClass:"top_box flex_row_center flex_row_center_color",on:{click:function(e){return e.stopPropagation(),t.changeyear(i)}}},[e("div",{staticClass:"right_icon"},[t._v(t._s(a.active?"-":"+"))]),e("div",{staticClass:"title"},[t._v(t._s(a.title))]),e("div",{staticClass:"text_1"},[t._v("本年应收金额合计: ￥"+t._s(a.money))])]),t._l(a.childerList,(function(s,n){return a.active?e("div",{key:n,staticClass:"father_box childer_box"},[e("div",{staticClass:"top_box flex_row_center flex_row_center_color",on:{click:function(e){return e.stopPropagation(),t.changemonth(i,n)}}},[e("div",{staticClass:"right_icon"},[t._v(t._s(s.active?"-":"+"))]),e("div",{staticClass:"title_1"},[t._v(t._s(s.title))]),e("div",{staticClass:"text_1"},[t._v("本月应收金额合计: ￥"+t._s(s.money))])]),s.active?e("a-table",{attrs:{columns:t.columns,"data-source":s.childerList,pagination:t.pagination,loading:t.loading},on:{change:t.table_change},scopedSlots:t._u([{key:"action",fn:function(a,i){return e("span",{},[i.my_check_status&&0!=i.my_check_status?t._e():e("a",{on:{click:function(e){return t.invalidShow(i.order_id)}}},[t._v("作废账单")]),3==i.my_check_status?e("a",{staticStyle:{color:"#808080"}},[t._v("已审核")]):t._e(),2==i.my_check_status?e("a",{on:{click:function(e){return t.needCheckOrder(i)}}},[t._v("需审核")]):t._e(),e("a-divider",{attrs:{type:"vertical"}}),i.my_check_status>0?e("a",{on:{click:function(e){return t.showpopup_detailsList(i)}}},[t._v("审核详情")]):t._e()],1)}}],null,!0)}):t._e()],1):t._e()}))],2)})),e("a-modal",{attrs:{width:500,title:"作废账单",visible:t.visible_invalid,"confirm-loading":t.confirmLoading,maskClosable:!1},on:{ok:t.confirm_invalid,cancel:t.handleCancel1}},[e("div",{staticClass:"modal_box"},[e("div",{staticClass:"flex_text_box margin_top_10"},[e("div",{staticClass:"text_1"},[t._v("作废原因：")]),e("a-textarea",{staticStyle:{width:"200px",height:"100px"},attrs:{placeholder:"请输入作废原因","auto-size":""},model:{value:t.invalidReasons,callback:function(e){t.invalidReasons=e},expression:"invalidReasons"}})],1),e("br"),e("br"),e("br")])]),e("a-modal",{staticStyle:{"z-index":"1000"},attrs:{width:1e3,title:"详情",visible:t.visible_details,maskClosable:!1,"confirm-loading":t.confirmLoading,footer:null},on:{cancel:t.handle2Cancel}},[0==t.currentIndex?e("div",[e("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(e){return t.changeXTab(0)}}},[t._v("订单基本信息")]),t.show_check_detail?e("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(e){return t.changeXTab(1)}}},[t._v("作废审核记录")]):t._e()],1):e("div",[e("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(e){return t.changeXTab(0)}}},[t._v("订单基本信息")]),t.show_check_detail?e("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(e){return t.changeXTab(1)}}},[t._v("作废审核记录")]):t._e()],1),0==t.currentIndex?e("div",{staticClass:"modal_box_1"},[e("div",{staticClass:"flex_text_box"},[e("div",{staticClass:"text_1"},[t._v("收费标准名称：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.charge_name))])]),e("div",{staticClass:"flex_text_box margin_top_10"},[e("div",{staticClass:"text_1"},[t._v("收费项目：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.project_name))])]),e("div",{staticClass:"flex_text_box"},[e("div",{staticClass:"text_1"},[t._v("应收费用：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.total_money)+"元")])]),e("div",{staticClass:"flex_text_box margin_top_10"},[e("div",{staticClass:"text_1"},[t._v("实收费用：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.modify_money)+"元")])]),e("div",{staticClass:"flex_text_box"},[e("div",{staticClass:"text_1"},[t._v("预计计费开始时间：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.service_start_time))])]),e("div",{staticClass:"flex_text_box margin_top_10"},[e("div",{staticClass:"text_1"},[t._v("预计计费结束时间：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.service_end_time))])]),t.details_data.now_ammeter-t.details_data.last_ammeter>0?e("div",{staticClass:"flex_text_box margin_top_10"},[e("div",{staticClass:"text_1"},[t._v("使用电量：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.now_ammeter-t.details_data.last_ammeter))])]):t._e(),e("div",{staticClass:"flex_text_box"},[e("div",{staticClass:"text_1"},[t._v("滞纳天数：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.late_payment_day))])]),e("div",{staticClass:"flex_text_box margin_top_10"},[e("div",{staticClass:"text_1"},[t._v("滞纳金收取比例（每天）：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.late_fee_rate))])]),e("div",{staticClass:"flex_text_box"},[e("div",{staticClass:"text_1"},[t._v("滞纳金费用：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.late_payment_money))])]),e("div",{staticClass:"flex_text_box margin_top_10"},[e("div",{staticClass:"text_1"},[t._v("收费标准生效时间：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.charge_valid_time_txt))])]),e("div",{staticClass:"flex_text_box"},[e("div",{staticClass:"text_1"},[t._v("预缴周期：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.service_month_num?t.details_data.service_month_num:"无"))])]),e("div",{staticClass:"flex_text_box margin_top_10"},[e("div",{staticClass:"text_1"},[t._v("预缴优惠：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.diy_content?t.details_data.diy_content:"无"))])]),e("div",{staticClass:"flex_text_box"},[e("div",{staticClass:"text_1"},[t._v("计费模式：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.fees_type_txt?t.details_data.fees_type_txt:"无"))])]),e("div",{staticClass:"flex_text_box margin_top_10"},[e("div",{staticClass:"text_1"},[t._v("账单生成周期设置：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.bill_create_set_txt?t.details_data.bill_create_set_txt:"无"))])]),e("div",{staticClass:"flex_text_box"},[e("div",{staticClass:"text_1"},[t._v("账单欠费模式：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.bill_arrears_set_txt?t.details_data.bill_arrears_set_txt:"无"))])]),e("div",{staticClass:"flex_text_box margin_top_10"},[e("div",{staticClass:"text_1"},[t._v("生成账单模式：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.bill_type_txt?t.details_data.bill_type_txt:"无"))])]),e("div",{staticClass:"flex_text_box"},[e("div",{staticClass:"text_1"},[t._v("预缴费用：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.prepare_money?t.details_data.prepare_money:"无"))])]),e("div",{staticClass:"flex_text_box margin_top_10"},[e("div",{staticClass:"text_1"},[t._v("账单生成时间：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.add_time_txt))])]),e("div",{staticClass:"flex_text_box margin_top_10"},[e("div",{staticClass:"text_1"},[t._v("合计欠费：")]),e("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.all_fee)+"元")])])]):t._e(),1==t.currentIndex?e("div",{staticClass:"order_apply_list",staticStyle:{margin:"30px 0px 20px 35px"}},[e("div",[e("p",[e("strong",[t._v("申请详情")])]),e("p",[e("strong",[t._v("申请人：")]),t._v(" "+t._s(t.apply_check_info.apply_name))]),e("p",[e("strong",[t._v("申请时间：")]),t._v(" "+t._s(t.apply_check_info.add_time_str))]),e("p",[e("strong",[t._v("作废原因：")]),t._v(" "+t._s(t.apply_check_info.apply_reason))])]),e("a-timeline",t._l(t.dataCheckDetail,(function(a,i){return e("a-timeline-item",{attrs:{color:a.color_v}},[e("p",[e("strong",[t._v("审批人：")]),t._v(" "+t._s(a.pname))]),e("p",[e("strong",[t._v("审核状态：")]),t._v(" "+t._s(a.status_str))]),e("p",[e("strong",[t._v("审核时间：")]),t._v(" "+t._s(a.apply_time_str))]),e("p",[e("strong",[t._v("审核说明：")]),t._v(" "+t._s(a.bak))])])})),1)],1):t._e()]),e("a-modal",{attrs:{title:"作废审核",width:700,visible:t.checkVisible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{ok:t.checkHandleSubmit,cancel:t.checkHandleCancel}},[e("a-spin",{attrs:{spinning:t.confirmLoading,height:800}},[e("a-form",[e("a-form-item",{attrs:{label:"审核状态",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[e("a-col",{attrs:{span:20}},[e("a-radio-group",{attrs:{name:"radioGroup","default-value":1},model:{value:t.check_post.status,callback:function(e){t.$set(t.check_post,"status",e)},expression:"check_post.status"}},[e("a-radio",{attrs:{value:1,name:"status"}},[t._v(" 审核通过 ")]),e("a-radio",{attrs:{value:2,name:"status"}},[t._v(" 审核不通过 ")])],1)],1),e("a-col",{attrs:{span:6}})],1),e("a-form-item",{attrs:{label:"审核说明",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-col",{attrs:{span:20}},[e("a-textarea",{ref:"textareax",staticStyle:{width:"250px",height:"120px"},attrs:{placeholder:"请输入审核说明"},model:{value:t.check_post.bak,callback:function(e){t.$set(t.check_post,"bak",e)},expression:"check_post.bak"}})],1),e("a-col",{attrs:{span:6}})],1)],1)],1),e("div",{staticClass:"rule_detail",staticStyle:{"margin-top":"10px"}},[e("a-descriptions",{attrs:{title:"申请作废信息",column:4}},t._l(t.retrunDetail,(function(a,i){return e("a-descriptions-item",{attrs:{span:2,label:a.title}},[t._v(" "+t._s(a.value)+" ")])})),1)],1)],1)],2)},s=[],n=a("dff4"),r=a("d34b"),l=(a("c5cb"),a("a0e0")),o=a("4942"),_=a.n(o);a("8bbf");_.a.getrem();var c=[{title:"标准名称",dataIndex:"charge_name",key:"charge_name"},{title:"标准生效时间",dataIndex:"charge_valid_time_txt",key:"charge_valid_time_txt"},{title:"项目名称",dataIndex:"name",key:"name"},{title:"所属收费科目",dataIndex:"charge_number_name",key:"charge_number_name"},{title:"应收费用",dataIndex:"total_money",key:"total_money"},{title:"预计计费开始时间",dataIndex:"service_start_time_txt",key:"service_start_time_txt"},{title:"预计计费结束时间",dataIndex:"service_end_time_txt",key:"service_end_time_txt"},{title:"上次度数",dataIndex:"last_ammeter",key:"last_ammeter"},{title:"本次度数",dataIndex:"now_ammeter",key:"now_ammeter"},{title:"审核状态",dataIndex:"check_status_str",key:"check_status_str"},{title:"操作",key:"action",dataIndex:"",scopedSlots:{customRender:"action"}}],d={name:"receivableModal",props:{},data:function(){var t=this;return{title:"应收帐单",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,text:"A dog is a type of domesticated animal.Known for its loyalty and faithfulness,it can be found as a welcome guest in many households across the world.",activeKey:["0"],activeKeys:["0"],expandIconPosition:"left",loading:!1,columns:c,year:"",room_id:"",position_id:"",key_id:"",type:"",OrderData:[],yearindex:"",monthindex:"",month:"",spinning:!1,firstLoad:!1,visible_invalid:!1,invalidReasons:"",order_id:0,confirmLoading:!1,lastIndex:1,lastChildIndex:1,pagination:{current:1,pageSize:10,total:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(t){return"共 ".concat(t," 条")},onShowSizeChange:function(e,a){return t.onTableChange(e,a)},onChange:function(e,a){return t.onTableChange(e,a)}},search:{keyword:"",key_val:"name",key_val1:"paytime",garage_id:"0",pay_type:"0",project_id:"0",page:1},page:1,widthDrawer:1300,lastinfo:{},visible_details:!1,currentIndex:0,apply_check_info:{},dataCheckDetail:[],show_check_detail:!1,details_data:[],checkVisible:!1,retrunDetail:[],check_order_record:{},check_post:{order_id:0,xtype:"order_discard",bak:"",status:1}}},created:function(){window.screen.width<1400?this.widthDrawer=900:window.screen.width<1600&&(this.widthDrawer=1250)},methods:{onClose:function(){var t=this;this.visible=!1,setTimeout((function(){t.post.id=0,t.form=t.$form.createForm(t)}),500),this.OrderData=[],this.yearindex="",this.monthindex="",this.year="",this.month="",console.log("OrderData-----3",this.OrderData)},changeyear:function(t){var e=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var i,s;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("key",t),e.yearindex=t,e.OrderData[e.yearindex].active=!e.OrderData[e.yearindex].active,e.year=e.OrderData[e.yearindex].number,a.next=6,e.getOrderStatisticsByYears();case 6:for(s in i=a.sent,e.OrderData[e.yearindex].childerList=i.list,i.list)e.OrderData[e.yearindex].childerList[s].active=!1;console.log("OrderData-----1",e.OrderData),e.$forceUpdate();case 11:case"end":return a.stop()}}),a)})))()},changemonth:function(t,e){console.log("key--1",t,e),this.yearindex=t,this.monthindex=e,console.log("OrderData----2",this.OrderData),this.OrderData[this.yearindex].childerList[this.monthindex].active=!this.OrderData[this.yearindex].childerList[this.monthindex].active,this.month=this.OrderData[this.yearindex].childerList[this.monthindex].month,console.log("month",this.month),this.receivableOrderInfo(),this.$forceUpdate()},getOrderStatisticsByYears:function(){var t=this;return new Promise((function(e){t.spinning=!0,t.request(l["a"].getOrderStatisticsByYears,{key_id:t.key_id,year:t.year,type:t.type}).then((function(a){e(a),t.spinning=!1}))}))},showpopup_detailsList:function(t){this.visible_details=!0,t.check_apply_id>0?this.show_check_detail=!0:this.show_check_detail=!1,this.getNeedPayOrderInfo(t),this.getCheckauthDetail(t)},getCheckauthDetail:function(t){var e=this;this.loading=!0,this.request(l["a"].getCheckauthDetail,{order_id:t.order_id,check_apply_id:t.check_apply_id,xtype:"order_discard",page:1}).then((function(t){e.dataCheckDetail=t.list,e.loading=!1,e.apply_check_info=t.apply_info}))},changeXTab:function(t){this.currentIndex=t,this.currentIndex},handle2Cancel:function(t){this.visible_details=!1,this.order_id=0,this.currentIndex=0},getNeedPayOrderInfo:function(t){var e=this;this.request(l["a"].getPayOrderInfo,{order_id:t.order_id}).then((function(t){t&&(e.details_data=t)}))},needCheckOrder:function(t){this.checkVisible=!0,this.check_order_record=t;var e=[];e.push({title:"申请时间",value:t.order_apply_info.opt_time_str}),e.push({title:"作废账单金额",value:t.order_apply_info.total_money+"元"}),e.push({title:"作废原因",value:t.order_apply_info.discard_reason}),this.retrunDetail=e},checkHandleCancel:function(){this.checkVisible=!1,this.currentIndex=0,this.check_order_record={},this.retrunDetail=[]},checkHandleSubmit:function(){this.check_post.order_id=this.check_order_record.order_id;var t="作废审核确认",e="您确认审核 通过 作废申请吗？";2==this.check_post.status&&(e="您确认审核 不通过 作废申请吗？");var a=this;this.$confirm({title:t,content:e,onOk:function(){a.request(l["a"].verifyCheckauthApply,a.check_post).then((function(t){console.log("res",t),a.$message.success("操作成功"),a.checkVisible=!1,a.confirmLoading=!1,a.receivableOrderInfo()}))},onCancel:function(){}})},onTableChange:function(t,e){this.pagination.current=t,this.page=t,this.pagination.pageSize=e,this.receivableOrderInfo(),console.log("onTableChange==>",t,e)},table_change:function(t){console.log("e",t),t.current&&t.current>0&&(this.pagination.current=t.current,this.page=t.current,this.receivableOrderInfo())},receivableOrderInfo:function(){var t=this;this.loading=!0,this.request(l["a"].receivableOrderInfo,{source:1,page:this.page,limit:this.pagination.pageSize,key_id:this.key_id,month:this.month,type:this.type}).then((function(e){t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.OrderData[t.yearindex].childerList[t.monthindex].childerList=e.list,console.log("this.OrderData",t.OrderData,e.list),t.loading=!1}))},info:function(t,e,a){var i=this;return Object(r["a"])(Object(n["a"])().mark((function s(){var r,l;return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return console.log("测试传递的id",t,e),i.room_id=t,i.position_id=e,i.order_id=0,i.lastinfo=a,e>0?(i.type="position",i.key_id=e):(i.type="room",i.key_id=t),s.next=8,i.getOrderStatisticsByYears();case 8:for(l in r=s.sent,console.log("OrderData-----5",i.OrderData,r),i.OrderData=r.list,r.list)i.OrderData[l].childerList=new Array,i.OrderData[l].active=!1;console.log("OrderData-----4",i.OrderData),i.visible=!0;case 14:case"end":return s.stop()}}),s)})))()},invalidShow:function(t){this.visible_invalid=!0,this.order_id=t},confirm_invalid:function(){""!=this.invalidReasons?this.discardOrder(this.order_id):this.$message.warning("请填写作废原因")},discardOrder:function(t){var e=this;this.request(l["a"].discardOrder,{discard_reason:this.invalidReasons,order_id:this.order_id}).then((function(t){console.log("+++++++Single",t),t&&(e.$message.success("操作成功"),e.invalidReasons="",e.order_id=0,e.visible_invalid=!1,e.receivableOrderInfo())}))},handleCancel1:function(){this.visible_invalid=!1},handleClick:function(t){t.stopPropagation()}}},h=d,v=(a("a2b9"),a("0b56")),p=Object(v["a"])(h,i,s,!1,null,"04f7490e",null);e["default"]=p.exports}}]);