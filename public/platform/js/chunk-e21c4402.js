(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e21c4402","chunk-01ccd794"],{4031:function(e,t,a){"use strict";var l={getLists:"/mall/merchant.MerchantStoreMall/getStoreList",perfectedStore:"/mall/merchant.MerchantStoreMall/perfectedStore",getStoreConfigList:"/mall/merchant.MerchantStoreMall/getStoreConfigList",getShippingList:"/mall/merchant.MallShipping/getShippingList",updateShipping:"/mall/merchant.MallShipping/addShipping",changeState:"/mall/merchant.MallShipping/changeState",removeShipping:"/mall/merchant.MallShipping/del",getShippingInfo:"/mall/merchant.MallShipping/edit",getMerchantSort:"/mall/merchant.MallGoods/getMerchantSort",getMallGoods:"/mall/merchant.MallGoods/getMallGoodsSelect",getGiveList:"/mall/merchant.MallGive/getGiveList",giveAdd:"/mall/merchant.MallGive/addGive",giveChangeState:"/mall/merchant.MallGive/changeState",giveDel:"/mall/merchant.MallGive/del",getGiveInfo:"/mall/merchant.MallGive/edit",getPlatSort:"/mall/merchant.MallGoods/getPlatformSort",getStoreSort:"/mall/merchant.MallGoods/getMerchantSort",getPrepareList:"/mall/merchant.MallPrepare/getPrepareList",updatePrepare:"/mall/merchant.MallPrepare/addPrepare",prepareChangeState:"/mall/merchant.MallPrepare/changeState",removePrepare:"/mall/merchant.MallPrepare/del",getPrepareInfo:"/mall/merchant.MallPrepare/edit",getReachedList:"/mall/merchant.MallReached/getReachedList",updateReachedList:"/mall/merchant.MallReached/addReached",getReachedInfo:"/mall/merchant.MallReached/edit",reachedChangeState:"/mall/merchant.MallReached/changeState",reachedDel:"/mall/merchant.MallReached/del",addRobot:"/mall/merchant.MallGroup/addRobot",delRobot:"/mall/merchant.MallGroup/delRobot",getRobotList:"/mall/merchant.MallGroup/getRobotList",getRobotName:"/mall/merchant.MallGroup/getRobotName",getUploadImages:"/common/common.UploadFile/getUploadImages",getGoodsSort:"/mall/merchant.MallGoods/getMerchantSort",getGoodsStatus:"/mall/merchant.MallGoods/getNumbers",getGoodsList:"/mall/merchant.MallGoods/getGoodsList",changeGoodsStatus:"/mall/merchant.MallGoods/setStatusLot",setVirtualSales:"/mall/merchant.MallGoods/setVirtualSales",changeGoodsSort:"/mall/merchant.MallGoods/setSort",getGoodsSkuPrice:"/mall/merchant.MallGoods/getGoodsSkuInfo",changeGoodsPrice:"/mall/merchant.MallGoods/setGoodsSkuInfo",getPlatProps:"/mall/merchant.MallGoods/getPlatformProperties",getFreightList:"/mall/merchant.MallGoods/getfreightList",getServiceList:"/mall/merchant.MallGoods/dealService",removeGoods:"/mall/merchant.MallGoods/delGoods",updateGoods:"/mall/merchant.MallGoods/addOrEditGoods",exportGoods:"/mall/merchant.MallGoods/exportGoods",getGoodsInfo:"/mall/merchant.MallGoods/getEditGoods",getGroupList:"/mall/merchant.MallGroup/getGroupList",groupAdd:"/mall/merchant.MallGroup/addGroup",groupChangeState:"/mall/merchant.MallGroup/changeState",groupDel:"/mall/merchant.MallGroup/del",getGroupInfo:"/mall/merchant.MallGroup/editDetail",getPeriodicList:"/mall/merchant.MallPeriodic/getPeriodicList",updatePeriodic:"/mall/merchant.MallPeriodic/addPeriodic",periodicChangeState:"/mall/merchant.MallPeriodic/changeState",removePeriodic:"/mall/merchant.MallPeriodic/del",getPeriodicInfo:"/mall/merchant.MallPeriodic/edit",getBargainList:"/mall/merchant.MallBargain/getBargainList",bargainAdd:"/mall/merchant.MallBargain/addBargain",bargainChangeState:"/mall/merchant.MallBargain/changeState",bargainDel:"/mall/merchant.MallBargain/del",getBargainInfo:"/mall/merchant.MallBargain/editDetail",getMinusDiscountList:"/mall/merchant.MallFullMinusDiscount/getFullMinusDiscountList",updateMinusDiscount:"/mall/merchant.MallFullMinusDiscount/addFullMinusDiscount",minusDiscountChangeState:"/mall/merchant.MallFullMinusDiscount/changeState",removeMinusDiscount:"/mall/merchant.MallFullMinusDiscount/del",getMinusDiscountInfo:"/mall/merchant.MallFullMinusDiscount/edit",getLimitedList:"/mall/merchant.MallLimited/getLimitedList",updateLimited:"/mall/merchant.MallLimited/addLimited",limitedChangeState:"/mall/merchant.MallLimited/changeState",removeLimited:"/mall/merchant.MallLimited/del",getLimitedInfo:"/mall/merchant.MallLimited/edit",getGoodsSortList:"/mall/merchant.MallGoodsSort/getSortList",delGoodsSort:"/mall/merchant.MallGoodsSort/delSort",editGoodsSort:"/mall/merchant.MallGoodsSort/addOrEditSort",getEditSort:"/mall/merchant.MallGoodsSort/getEditSort",editSort:"/mall/merchant.MallGoodsSort/saveSort",saveStatus:"/mall/merchant.MallGoodsSort/saveStatus",getAllGoodsSort:"/mall/merchant.MallGoodsSort/getSort",getStoreList:"/mall/merchant.MallMerchantReply/getStores",getReplyList:"/mall/merchant.MallMerchantReply/searchReply",addComment:"/mall/merchant.MallMerchantReply/merchantReply",getReplyDetails:"/mall/merchant.MallMerchantReply/getReplyDetails",getShowHomePage:"/mall/merchant.MallMerchantReply/getShowHomePage",getQualityReviews:"/mall/merchant.MallMerchantReply/getQualityReviews",getShowHomePageCancel:"/mall/merchant.MallMerchantReply/getShowHomePageCancel",getQualityReviewsCancel:"/mall/merchant.MallMerchantReply/getQualityReviewsCancel",getOrderList:"/mall/merchant.MallOrder/searchOrders",getOrderDetails:"/mall/merchant.MallOrder/getOrderDetails",getCollect:"/mall/merchant.MallOrder/getCollect",getDiscount:"/mall/merchant.MallOrder/getDiscount",exportOrder:"/mall/merchant.MallOrder/exportOrder ",deleteJudge:"/mall/merchant.MallGoods/deleteJudge ",getTemplateList:"/mall/merchant.ExpressTemplate/index",getTemplateAreaList:"/mall/merchant.ExpressTemplate/ajax_area",getTemplateAreaNameList:"/mall/merchant.ExpressTemplate/get_area_name",addTemplate:"/mall/merchant.ExpressTemplate/save",editTemplate:"/mall/merchant.ExpressTemplate/edit",delTemplate:"/mall/merchant.ExpressTemplate/delete",goodsBatch:"/mall/merchant.MallGoods/goodsBatch",viewLogistics:"/mall/merchant.MallOrder/viewLogistics",orderPrintTicket:"/mall/merchant.MallOrder/printOrder"};t["a"]=l},5756:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ant-pro-page-header-wrap-children-content",staticStyle:{margin:"24px 0 0"}},[a("a-page-header",{staticStyle:{padding:"0 0 16px 0"},attrs:{title:"商品分类"}},[a("template",{slot:"extra"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.createModal.add()}}},[e._v("新建分类")])],1)],2),a("a-card",{attrs:{bordered:!1}},[a("a-table",{attrs:{columns:e.columns,"data-source":e.dataList,pagination:e.pagination,rowKey:"id"},scopedSlots:e._u([{key:"status",fn:function(t,l){return[a("a-switch",{attrs:{"checked-children":"开启","un-checked-children":"关闭",checked:1==t},on:{change:function(t){return e.setStatus(l.id,t)}}})]}},{key:"sort",fn:function(t,l){return[a("a-input-number",{attrs:{min:0},on:{blur:function(a){return e.handleSortChange(t,l.id)}},model:{value:l.sort,callback:function(t){e.$set(l,"sort",t)},expression:"record.sort"}})]}},{key:"action",fn:function(t,l){return a("span",{},[[a("a",{on:{click:function(t){return e.$refs.createModal.edit(l.id)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}})],3==l.level?a("a",{on:{click:function(t){return e.removeGoodsSort(l)}}},[e._v("删除")]):e._e(),3!=l.level?a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link"},[e._v(" 更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{on:{click:function(t){return e.$refs.createModal.addSub(l.id,l.store_id)}}},[e._v("新增下级分类")])]),a("a-menu-item",[a("a",{on:{click:function(t){return e.removeGoodsSort(l)}}},[e._v("删除")])])],1)],1):e._e()],2)}}])}),a("create-sort",{ref:"createModal",attrs:{id:e.id,fid:e.fid,store_id:e.store_id},on:{ok:e.handleOk,loaddata:e.getDataList}})],1)],1)},i=[],r=a("4031"),o=a("d3ff"),n={name:"TableList",components:{CreateSort:o["default"]},data:function(){return{store_id:"",id:"0",fid:"0",columns:[{title:"分类名称",dataIndex:"name"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"sort",scopedSlots:{customRender:"sort"}},{title:"操作",dataIndex:"id",key:"id",scopedSlots:{customRender:"action"}}],dataList:[],pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(e){return"共 ".concat(e," 条记录")}}}},watch:{"$route.query.store_id":function(e){e&&(this.store_id=this.$route.query.store_id,this.getDataList({store_id:e}))}},created:function(){this.store_id=this.$route.query.store_id,this.getDataList({store_id:this.store_id})},methods:{getDataList:function(e){var t=this;e.page=this.pagination.current,e.pageSize=this.pagination.pageSize,this.request(r["a"].getGoodsSortList,e).then((function(a){console.log(a),a.list.length?(t.dataList=a.list||[],t.$set(t.pagination,"total",a.count)):(e.page=t.pagination.current-1<1?1:t.pagination.current-1,t.request(r["a"].getGoodsSortList,e).then((function(e){t.dataList=e.list||[],t.$set(t.pagination,"total",e.count)})))}))},onPageChange:function(e,t){this.$set(this.pagination,"current",e),this.getDataList({store_id:this.store_id})},onPageSizeChange:function(e,t){this.$set(this.pagination,"pageSize",t),this.getDataList({store_id:this.store_id})},add:function(){},handleOk:function(){},cancel:function(){},removeGoodsSort:function(e){var t=this;this.$confirm({title:"是否确定删除该分类?",centered:!0,onOk:function(){t.request(r["a"].delGoodsSort,{id:e.id,level:e.level,store_id:t.store_id}).then((function(e){100==e?t.$message.warn("该分类下存在商品，请先删除商品后再来删除该分类！"):t.$message.success("操作成功！"),t.getDataList({store_id:t.store_id})}))},onCancel:function(){}})},setStatus:function(e,t){var a=this;this.request(r["a"].saveStatus,{id:e,status:t}).then((function(e){a.getDataList({store_id:a.store_id})}))},handleSortChange:function(e,t){var a=this;this.request(r["a"].editSort,{id:t,sort:e}).then((function(e){a.getDataList({store_id:a.store_id})}))}}},s=n,d=(a("fc07"),a("2877")),c=Object(d["a"])(s,l,i,!1,null,"07163b3a",null);t["default"]=c.exports},6927:function(e,t,a){},d3ff:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:640,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"分类名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:e.detail.name,rules:[{required:!0,message:"请输入分类名称"}]}],expression:"['name', {initialValue:detail.name,rules: [{required: true, message: '请输入分类名称'}]}]"}]})],1),a("a-form-item",{attrs:{label:"上级分类",labelCol:e.labelCol,wrapperCol:e.wrapperCol,help:"不选择上级分类，则添加为一级分类"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["fid",{initialValue:e.detail.fid?e.detail.fid:e.fid}],expression:"['fid',{initialValue:detail.fid ? detail.fid : fid}]"}],staticStyle:{width:"320px"},on:{change:function(t){return e.change(t)}}},e._l(e.dataList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),a("a-form-item",{attrs:{label:"排序值",labelCol:e.labelCol,wrapperCol:e.wrapperCol,help:"排序值越高，在商城首页店铺列表排序越前"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:e.detail.sort}],expression:"['sort',{initialValue:detail.sort}]"}],attrs:{min:0}})],1),a("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1==e.detail.status,valuePropName:"checked"}],expression:"['status',{initialValue:detail.status==1 ? true : false,valuePropName: 'checked'}]"}],attrs:{"checked-children":"开启","un-checked-children":"关闭"}})],1)],1)],1)],1)},i=[],r=a("53ca"),o=(a("a9e3"),a("99af"),a("4031")),n={props:{store_id:{type:[String,Number],default:""}},data:function(){return{title:"新建分类",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),dataList:[],showMethod:[],detail:{id:0,fid:0,name:"",status:1,store_id:0,sort:""},id:0,fid:"请选择上级分类"}},mounted:function(){this.getDataList()},methods:{getDataList:function(){var e=this;this.request(o["a"].getAllGoodsSort,{store_id:this.store_id}).then((function(t){var a=[{id:"0",name:"请选择上级分类",level:"1"}];t.list.length&&(a=a.concat(t.list)),e.$set(e,"dataList",a)}))},add:function(){this.getDataList(),this.visible=!0,this.id="0",this.fid="0",this.title="新建分类",this.detail={id:0,fid:0,name:"",status:1,store_id:0,sort:""}},edit:function(e){this.getDataList(),this.visible=!0,this.id=e,this.getEditInfo(),this.id>0?this.title="编辑分类":this.title="新建分类",console.log(this.title)},addSub:function(e,t){this.getDataList(),this.title="新建分类",this.visible=!0,this.fid=e,this.id=0},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){t?e.confirmLoading=!1:(a.id=e.id,a.store_id=e.store_id,e.request(o["a"].editGoodsSort,a).then((function(t){e.id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,e.$emit("loaddata",a)}),1500)})).catch((function(t){e.confirmLoading=!1})),console.log("values",a))}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.id="0",e.fid="0",e.form=e.$form.createForm(e)}),500)},getEditInfo:function(){var e=this;this.request(o["a"].getEditSort,{id:this.id,store_id:this.store_id}).then((function(t){e.showMethod=t.showMethod,e.detail={id:0,fid:0,name:"",status:1,store_id:0,sort:""},"object"==Object(r["a"])(t.list)&&(e.detail=t.list),console.log("detail",e.detail)}))},change:function(e){this.detail.fid=e}}},s=n,d=a("2877"),c=Object(d["a"])(s,l,i,!1,null,null,null);t["default"]=c.exports},fc07:function(e,t,a){"use strict";a("6927")}}]);