(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45e7a1b8"],{1930:function(t,e,a){"use strict";a("8239")},4031:function(t,e,a){"use strict";var l={getLists:"/mall/merchant.MerchantStoreMall/getStoreList",perfectedStore:"/mall/merchant.MerchantStoreMall/perfectedStore",getStoreConfigList:"/mall/merchant.MerchantStoreMall/getStoreConfigList",getShippingList:"/mall/merchant.MallShipping/getShippingList",updateShipping:"/mall/merchant.MallShipping/addShipping",changeState:"/mall/merchant.MallShipping/changeState",removeShipping:"/mall/merchant.MallShipping/del",getShippingInfo:"/mall/merchant.MallShipping/edit",getMerchantSort:"/mall/merchant.MallGoods/getMerchantSort",getMallGoods:"/mall/merchant.MallGoods/getMallGoodsSelect",getGiveList:"/mall/merchant.MallGive/getGiveList",giveAdd:"/mall/merchant.MallGive/addGive",giveChangeState:"/mall/merchant.MallGive/changeState",giveDel:"/mall/merchant.MallGive/del",getGiveInfo:"/mall/merchant.MallGive/edit",getPlatSort:"/mall/merchant.MallGoods/getPlatformSort",getStoreSort:"/mall/merchant.MallGoods/getMerchantSort",getPrepareList:"/mall/merchant.MallPrepare/getPrepareList",updatePrepare:"/mall/merchant.MallPrepare/addPrepare",prepareChangeState:"/mall/merchant.MallPrepare/changeState",removePrepare:"/mall/merchant.MallPrepare/del",getPrepareInfo:"/mall/merchant.MallPrepare/edit",getReachedList:"/mall/merchant.MallReached/getReachedList",updateReachedList:"/mall/merchant.MallReached/addReached",getReachedInfo:"/mall/merchant.MallReached/edit",reachedChangeState:"/mall/merchant.MallReached/changeState",reachedDel:"/mall/merchant.MallReached/del",addRobot:"/mall/merchant.MallGroup/addRobot",delRobot:"/mall/merchant.MallGroup/delRobot",getRobotList:"/mall/merchant.MallGroup/getRobotList",getRobotName:"/mall/merchant.MallGroup/getRobotName",getUploadImages:"/common/common.UploadFile/getUploadImages",getGoodsSort:"/mall/merchant.MallGoods/getMerchantSort",getGoodsStatus:"/mall/merchant.MallGoods/getNumbers",getGoodsList:"/mall/merchant.MallGoods/getGoodsList",changeGoodsStatus:"/mall/merchant.MallGoods/setStatusLot",setVirtualSales:"/mall/merchant.MallGoods/setVirtualSales",changeGoodsSort:"/mall/merchant.MallGoods/setSort",getGoodsSkuPrice:"/mall/merchant.MallGoods/getGoodsSkuInfo",changeGoodsPrice:"/mall/merchant.MallGoods/setGoodsSkuInfo",getPlatProps:"/mall/merchant.MallGoods/getPlatformProperties",getFreightList:"/mall/merchant.MallGoods/getfreightList",getServiceList:"/mall/merchant.MallGoods/dealService",removeGoods:"/mall/merchant.MallGoods/delGoods",updateGoods:"/mall/merchant.MallGoods/addOrEditGoods",exportGoods:"/mall/merchant.MallGoods/exportGoods",getGoodsInfo:"/mall/merchant.MallGoods/getEditGoods",getGroupList:"/mall/merchant.MallGroup/getGroupList",groupAdd:"/mall/merchant.MallGroup/addGroup",groupChangeState:"/mall/merchant.MallGroup/changeState",groupDel:"/mall/merchant.MallGroup/del",getGroupInfo:"/mall/merchant.MallGroup/editDetail",getPeriodicList:"/mall/merchant.MallPeriodic/getPeriodicList",updatePeriodic:"/mall/merchant.MallPeriodic/addPeriodic",periodicChangeState:"/mall/merchant.MallPeriodic/changeState",removePeriodic:"/mall/merchant.MallPeriodic/del",getPeriodicInfo:"/mall/merchant.MallPeriodic/edit",getBargainList:"/mall/merchant.MallBargain/getBargainList",bargainAdd:"/mall/merchant.MallBargain/addBargain",bargainChangeState:"/mall/merchant.MallBargain/changeState",bargainDel:"/mall/merchant.MallBargain/del",getBargainInfo:"/mall/merchant.MallBargain/editDetail",getMinusDiscountList:"/mall/merchant.MallFullMinusDiscount/getFullMinusDiscountList",updateMinusDiscount:"/mall/merchant.MallFullMinusDiscount/addFullMinusDiscount",minusDiscountChangeState:"/mall/merchant.MallFullMinusDiscount/changeState",removeMinusDiscount:"/mall/merchant.MallFullMinusDiscount/del",getMinusDiscountInfo:"/mall/merchant.MallFullMinusDiscount/edit",getLimitedList:"/mall/merchant.MallLimited/getLimitedList",updateLimited:"/mall/merchant.MallLimited/addLimited",limitedChangeState:"/mall/merchant.MallLimited/changeState",removeLimited:"/mall/merchant.MallLimited/del",getLimitedInfo:"/mall/merchant.MallLimited/edit",getGoodsSortList:"/mall/merchant.MallGoodsSort/getSortList",delGoodsSort:"/mall/merchant.MallGoodsSort/delSort",editGoodsSort:"/mall/merchant.MallGoodsSort/addOrEditSort",getEditSort:"/mall/merchant.MallGoodsSort/getEditSort",editSort:"/mall/merchant.MallGoodsSort/saveSort",saveStatus:"/mall/merchant.MallGoodsSort/saveStatus",getAllGoodsSort:"/mall/merchant.MallGoodsSort/getSort",getStoreList:"/mall/merchant.MallMerchantReply/getStores",getReplyList:"/mall/merchant.MallMerchantReply/searchReply",addComment:"/mall/merchant.MallMerchantReply/merchantReply",getReplyDetails:"/mall/merchant.MallMerchantReply/getReplyDetails",getShowHomePage:"/mall/merchant.MallMerchantReply/getShowHomePage",getQualityReviews:"/mall/merchant.MallMerchantReply/getQualityReviews",getShowHomePageCancel:"/mall/merchant.MallMerchantReply/getShowHomePageCancel",getQualityReviewsCancel:"/mall/merchant.MallMerchantReply/getQualityReviewsCancel",getOrderList:"/mall/merchant.MallOrder/searchOrders",getOrderDetails:"/mall/merchant.MallOrder/getOrderDetails",getCollect:"/mall/merchant.MallOrder/getCollect",getDiscount:"/mall/merchant.MallOrder/getDiscount",exportOrder:"/mall/merchant.MallOrder/exportOrder ",deleteJudge:"/mall/merchant.MallGoods/deleteJudge ",getTemplateList:"/mall/merchant.ExpressTemplate/index",getTemplateAreaList:"/mall/merchant.ExpressTemplate/ajax_area",getTemplateAreaNameList:"/mall/merchant.ExpressTemplate/get_area_name",addTemplate:"/mall/merchant.ExpressTemplate/save",editTemplate:"/mall/merchant.ExpressTemplate/edit",delTemplate:"/mall/merchant.ExpressTemplate/delete",goodsBatch:"/mall/merchant.MallGoods/goodsBatch",viewLogistics:"/mall/merchant.MallOrder/viewLogistics",orderPrintTicket:"/mall/merchant.MallOrder/printOrder"};e["a"]=l},8239:function(t,e,a){},f0b9:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[a("a-form-model",{attrs:{layout:"inline",model:t.searchForm}},[a("a-form-model-item",{attrs:{label:"商品名称"}},[a("a-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.searchForm.goods_name,callback:function(e){t.$set(t.searchForm,"goods_name",e)},expression:"searchForm.goods_name"}})],1),a("a-form-model-item",{attrs:{label:"活动状态"}},[a("a-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择活动状态"},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[a("a-select-option",{attrs:{value:3}},[t._v(" 全部活动")]),a("a-select-option",{attrs:{value:"0"}},[t._v(" 未开始")]),a("a-select-option",{attrs:{value:"1"}},[t._v(" 进行中")]),a("a-select-option",{attrs:{value:"2"}},[t._v(" 已失效")])],1)],1)],1),a("div",{staticClass:"mt-20"},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.createActivity()}}},[t._v(" 新建活动")]),a("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(e){return t.submitForm(!0)}}},[t._v(" 查询")]),a("a-button",{staticClass:"ml-20",on:{click:function(e){return t.resetForm()}}},[t._v(" 重置")])],1),a("a-table",{staticClass:"mt-20",attrs:{rowKey:"id",columns:t.columns,"data-source":t.dataList,pagination:t.pagination},scopedSlots:t._u([{key:"goods_name",fn:function(e,l){return a("span",{},[a("div",{staticClass:"product-info"},[a("div",[a("img",{attrs:{src:l.image}})]),a("div",[t._v(t._s(e))])])])}},{key:"periodic_count",fn:function(e,l){return a("span",{},[a("div",[t._v("每"+t._s(1==l.periodic_type?"日":2==l.periodic_type?"周":"月")+"一期 共"+t._s(e)+"期")])])}},{key:"activityTime",fn:function(e,l){return a("span",{},[t._v(" "+t._s(e)+" ~ "+t._s(l.end_time)+" ")])}},{key:"status",fn:function(e){return a("span",{},[1==e?a("a-badge",{attrs:{status:"success",text:"进行中"}}):t._e(),2==e?a("a-badge",{attrs:{status:"default",text:"已失效"}}):t._e(),0==e?a("a-badge",{attrs:{status:"warning",text:"未开始"}}):t._e()],1)}},{key:"action",fn:function(e,l){return a("span",{},[a("a",{staticClass:"inline-block",on:{click:function(a){return t.editActivity(e,l.status)}}},[t._v(t._s(2!=l.status?"编辑":"查看"))]),2!=l.status?a("a",{staticClass:"ml-10 inline-block",on:{click:function(a){return t.changeActivityState(e)}}},[t._v("失效")]):t._e(),2==l.status?a("a",{staticClass:"ml-10 inline-block",on:{click:function(a){return t.removeActivity(e)}}},[t._v("删除")]):t._e()])}}])},[a("span",{attrs:{slot:"payNumTitle"},slot:"payNumTitle"},[t._v(" 支付单数 "),a("a-tooltip",{attrs:{trigger:"“hover"}},[a("template",{slot:"title"},[t._v("该活动支付单数，若一个用户支付多次，支付人数依然算多次 ")]),a("a-icon",{staticClass:"ml-10",attrs:{type:"question-circle"}})],2)],1)])],1)},i=[],r=a("5530"),o=a("4031"),s={name:"PeriodicList",data:function(){return{store_id:"",searchForm:{goods_name:"",status:3},columns:[{title:"商品信息",dataIndex:"goods_name",scopedSlots:{customRender:"goods_name"},width:"300px"},{title:"周期",dataIndex:"periodic_count",scopedSlots:{customRender:"periodic_count"}},{title:"延期期数",dataIndex:"delay_limit",key:"delay_limit"},{dataIndex:"pay_order_num",key:"pay_order_num",slots:{title:"payNumTitle"},width:"120px"},{title:"实收金额",dataIndex:"real_income",key:"real_income"},{title:"活动状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"},width:"120px"},{title:"操作",dataIndex:"id",key:"id",scopedSlots:{customRender:"action"}}],dataList:[],pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(t){return"共 ".concat(t," 个活动")}}}},watch:{"$route.query.store_id":function(t){console.log(this.$route.path),"/merchant/merchant.mall/periodicList"==this.$route.path&&t&&(this.store_id=t,this.getDataList({store_id:t}))}},created:function(){this.store_id=this.$route.query.store_id,this.getDataList({store_id:this.store_id})},activated:function(){var t=sessionStorage.getItem("periodicEdit")||"";t&&1==t&&(this.store_id=this.$route.query.store_id,this.$set(this.pagination,"current",1),this.$set(this.pagination,"pageSize",10),this.$set(this.pagination,"total",0),this.getDataList({store_id:this.store_id}),sessionStorage.removeItem("periodicEdit"))},methods:{getDataList:function(t){var e=this;t.is_search&&1==t.is_search?(t.page=1,this.$set(this.pagination,"current",1)):(t.page=this.pagination.current,this.$set(this.pagination,"current",this.pagination.current)),t.pageSize=this.pagination.pageSize,this.request(o["a"].getPeriodicList,t).then((function(t){console.log(t),e.dataList=t.list,e.$set(e.pagination,"total",t.count)}))},submitForm:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=Object(r["a"])({store_id:this.store_id},this.searchForm);delete e.time,e.is_search=t,console.log(e),this.getDataList(e)},onPageChange:function(t,e){this.$set(this.pagination,"current",t),this.submitForm()},onPageSizeChange:function(t,e){this.$set(this.pagination,"pageSize",e),this.submitForm()},resetForm:function(){this.$set(this,"searchForm",{name:"",start_time:"",end_time:"",status:3,time:[]}),this.$set(this.pagination,"current",1),this.getDataList({store_id:this.store_id})},createActivity:function(){this.$router.push({path:"/merchant/merchant.mall/editPeriodic",query:{store_id:this.store_id}})},editActivity:function(t,e){2==e?this.$router.push({path:"/merchant/merchant.mall/EditPeriodicLook",query:{store_id:this.store_id,id:t}}):this.$router.push({path:"/merchant/merchant.mall/EditPeriodic",query:{store_id:this.store_id,id:t}})},changeActivityState:function(t){var e=this;this.$confirm({title:"是否将活动失效，失效的活动将无法恢复！",centered:!0,onOk:function(){e.request(o["a"].periodicChangeState,{id:t}).then((function(t){e.$message.success("操作成功！"),e.submitForm()}))},onCancel:function(){}})},removeActivity:function(t){var e=this;this.$confirm({title:"是否确定删除该活动?",centered:!0,onOk:function(){e.request(o["a"].removePeriodic,{id:t}).then((function(t){e.$message.success("操作成功！"),e.submitForm()}))},onCancel:function(){}})}}},n=s,c=(a("1930"),a("0c7c")),m=Object(c["a"])(n,l,i,!1,null,"698d8568",null);e["default"]=m.exports}}]);