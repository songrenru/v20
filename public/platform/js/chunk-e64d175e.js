(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e64d175e"],{"2a4e":function(i,e,n){},5355:function(i,e,n){"use strict";n.r(e);var o=function(){var i=this,e=i.$createElement,n=i._self._c||e;return n("a-modal",{attrs:{title:i.title,width:800,visible:i.visible,maskClosable:!1,confirmLoading:i.confirmLoading},on:{ok:function(e){return i.handleSubmit()},cancel:i.handleCancel}},[n("span",{staticClass:"page_top"},[n("span",{staticClass:"notice"},[i._v(" 注意："),n("br"),i._v(" 1、需要先在收费标准绑定页面，绑定房间数据。绑定成功后在进行操作生成账单"),n("br"),i._v(" 2、手动生成账单是给已绑定该收费标准的房间，批量生成待缴账单"),n("br")])]),n("a-spin",{attrs:{spinning:i.confirmLoading,height:800}},[n("div",[i._v("请点击确定按钮给已绑定房间的【"+i._s(i.charge_name)+"】标准生成账单")])])],1)},t=[],s=(n("a434"),n("a0e0")),r={data:function(){return{title:"新建",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},index_row:[{id:0}],single_id:0,floor_id:0,floor:[],single:[],confirmLoading:!1,form:this.$form.createForm(this),visible:!1,loadingLayer:!1,rule_id:0,rule_info:[],bind_type:"",charge_name:""}},components:{},mounted:function(){},methods:{add:function(i,e){this.title="给已绑定该标准的房间手动批量生成账单",e&&(this.title="给已绑定【"+e+"】手动批量生成账单"),this.charge_name=e,this.visible=!0,this.loadingLayer=!0,this.single=[],this.floor_id=0,this.floor=[],this.single_id=0,this.index_row=[{id:0,single_id:0,floor_id:[]}],this.confirmLoading=!1,this.rule_id=i,this.getSingle(),this.getRuleInfo()},add_row:function(){if(this.index_row.length>=5)return this.$message.error("最多每次添加5条数据操作"),!1;var i={id:0,single_id:0,floor_id:[]};this.index_row.push(i)},getSingle:function(){var i=this;this.request(s["a"].getSingleListByVillage).then((function(e){console.log("resSingle",e),i.single=e}))},getRuleInfo:function(){var i=this;this.request(s["a"].getRuleInfo,{rule_id:this.rule_id}).then((function(e){i.rule_info=e,console.log("rule_info",e)}))},del_row:function(i){i>0&&this.index_row.splice(i,1)},singleChange:function(i,e){var n=this;if(console.log("value: ".concat(i)),console.log("index: ".concat(e)),this.index_row[e].floor_id=[],i<1)return!1;console.log("floor0",this.floor),this.loadingLayer=!1,this.request(s["a"].getFloorList,{pid:i}).then((function(e){n.floor[i]=e,console.log("floor1",n.floor),n.loadingLayer=!0,n.$forceUpdate()}))},addBind:function(){var i=this,e={};e.rule_id=this.rule_id,e.create_order=1,e.single_data=this.index_row,this.confirmLoading=!0,this.request(s["a"].standardCreateManyOrderByRuleId,e).then((function(e){if(console.log("resx",e),1e3==e.status&&e.msg)i.$message.error(e.msg),i.confirmLoading=!1;else{var n="操作成功！";n=e.standard_bind_count<1?"此标准还没有绑定房间！":"已成功生成"+e.ordercount+"个待缴账单",i.$message.success(n),setTimeout((function(){i.confirmLoading=!1,i.form=i.$form.createForm(i),i.visible=!1,i.loading=!1,i.$emit("ok",i.rule_id)}),1500)}}))},handleSubmit:function(i){var e=this;this.$confirm({title:"是否确定手动批量生成账单?",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){e.addBind()},onCancel:function(){}})},handleCancel:function(){var i=this;this.visible=!1,this.index_row=[{id:0,single_id:0,floor_id:[]}],this.floor=[],this.confirmLoading=!1,setTimeout((function(){i.form=i.$form.createForm(i)}),500)}}},a=r,l=(n("69d9"),n("abf8"),n("0c7c")),d=Object(l["a"])(a,o,t,!1,null,"7d8b802f",null);e["default"]=d.exports},"69d9":function(i,e,n){"use strict";n("2a4e")},abf8:function(i,e,n){"use strict";n("fe25")},fe25:function(i,e,n){}}]);