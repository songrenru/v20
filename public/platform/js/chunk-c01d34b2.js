(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c01d34b2","chunk-76e1e06f","chunk-e4ac9ea2"],{"057d":function(e,t,a){"use strict";a("b8bd")},"0b8f":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.modelTitle,width:900,visible:e.visible,"confirm-loading":e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleSubCancel}},[a("a-form-model",{ref:"ruleForm",attrs:{model:e.groupForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("div",{staticClass:"add_black"},[a("a-form-model-item",{attrs:{label:"关联功能",prop:"cat_function"}},[a("a-select",{attrs:{"show-search":"",placeholder:"请选择","filter-option":e.filterOption,value:e.groupForm.cat_function},on:{change:function(t){return e.handleSelectChange(t,"cat_function")}}},e._l(e.labelFunction,(function(t,i){return a("a-select-option",{attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"分组名称",prop:"cat_name"}},[a("a-input",{attrs:{placeholder:"请输入分组名称"},model:{value:e.groupForm.cat_name,callback:function(t){e.$set(e.groupForm,"cat_name",t)},expression:"groupForm.cat_name"}})],1)],1)])],1)},l=[],n=a("a0e0"),o={props:{visible:{type:Boolean,default:!1},modelTitle:{type:String,default:""},cat_type:{type:String,default:""},cat_id:{type:String,default:""}},watch:{cat_id:{immediate:!0,handler:function(e){"edit"==this.cat_type&&this.getCatInfo()}}},mounted:function(){this.getLabelFunction()},data:function(){return{confirmLoading:!1,labelCol:{span:4},wrapperCol:{span:14},groupForm:{cat_function:""},rules:{cat_function:[{required:!0,message:"请选择关联功能",trigger:"blur"}],cat_name:[{required:!0,message:"请输入分组名称",trigger:"blur"}]},labelFunction:[]}},methods:{clearForm:function(){this.groupForm={cat_function:""}},getLabelFunction:function(){var e=this;e.request(n["a"].getLabelFunction,{}).then((function(t){e.labelFunction=t}))},getCatInfo:function(){var e=this;e.cat_id&&e.request(n["a"].getLabelCatInfo,{cat_id:e.cat_id}).then((function(t){e.groupForm=t,e.groupForm.cat_id=t.id}))},getLabelCatList:function(){var e=this;e.request(n["a"].getLabelCatList,{}).then((function(t){e.cateList=t}))},handleSubmit:function(e){var t=this;t.confirmLoading=!0,t.$refs.ruleForm.validate((function(e){if(!e)return console.log("error submit!!"),t.confirmLoading=!1,!1;t.groupForm.cat_id=t.cat_id;var a=n["a"].addLabelCat;"edit"==t.cat_type&&(a=n["a"].editLabelCat),t.request(a,t.groupForm).then((function(e){"edit"==t.cat_type?t.$message.success("编辑成功！"):t.$message.success("添加成功！"),t.$emit("closeGroup",!0),t.clearForm(),t.confirmLoading=!1})).catch((function(e){t.confirmLoading=!1}))}))},handleSubCancel:function(e){this.$refs.ruleForm.resetFields(),this.confirmLoading=!1,this.$emit("closeGroup",!1),this.clearForm()},handleSelectChange:function(e,t){this.groupForm[t]=e,this.$forceUpdate()},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},s=o,c=(a("057d"),a("2877")),r=Object(c["a"])(s,i,l,!1,null,"8f1d52d4",null);t["default"]=r.exports},"15b7":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"black_list"},[a("div",{staticClass:"left_grouping"},[a("div",{staticClass:"menu_title"},[a("span",{staticStyle:{"margin-left":"75px",color:"#ffffff"}},[e._v("分组管理")]),a("span",{staticStyle:{"margin-right":"27px","font-size":"20px",color:"#ffffff",cursor:"pointer"},on:{click:e.newGroup}},[e._v("+")])]),a("a-menu",{staticClass:"menu_content",attrs:{mode:"vertical","default-selected-keys":[e.defaultKey]}},e._l(e.cateList,(function(t,i){return a("a-menu-item",{key:t.cat_id,staticClass:"menu_item",on:{click:function(a){return e.chooseMenu(t)}}},[a("div",{staticClass:"cat_name"},[e._v(e._s(t.cat_name))]),a("a-popover",{attrs:{title:"",placement:"right"}},[a("template",{slot:"content"},[a("a-icon",{attrs:{type:"edit"},on:{click:function(a){return a.stopPropagation(),e.editCate(t.cat_id)}}}),a("a-divider",{attrs:{type:"vertical"}}),a("a-icon",{staticStyle:{color:"red"},attrs:{type:"delete"},on:{click:function(a){return a.stopPropagation(),e.deleteCate(t.cat_id)}}})],1),a("a-icon",{attrs:{type:"more"}})],2)],1)})),1)],1),a("div",{staticClass:"right_content"},[a("div",{staticClass:"header_search"},[a("a-collapse",{attrs:{accordion:""}},[a("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[e._v(" 1、标签分组名称不能重复。"),a("br"),e._v(" 2、标签总数量不限制。"),a("br"),e._v(" 3、标签分组一旦被删除，归属改分组的标签均将转移到【未分组】。"),a("br"),e._v(" 4、【未分组】为固定存在，不可修改名称，亦不可删除。 ")])],1)],1),a("div",{staticClass:"header_search",staticStyle:{"padding-top":"0"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.addThis("新建标签","add")}}},[e._v("新增标签")]),a("a-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary"},on:{click:function(t){return e.addThis("移动标签","remove")}}},[e._v("移动标签")])],1),a("div",{staticClass:"table_content"},[a("a-table",{attrs:{columns:e.columns,"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},"row-key":function(e){return e.id},pagination:e.pageInfo,loading:e.tableLoadding,"data-source":e.labelList},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t,i){return a("span",{},[a("a",{on:{click:function(t){return e.editThis(i)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确定要删除该项吗?","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.delConfirm(i)},cancel:e.delCancel}},[a("a",{staticStyle:{color:"red"}},[e._v("删除")])])],1)}}])}),a("newgroup-model",{attrs:{cat_id:e.cat_id,cat_type:e.cat_type,visible:e.groupVisible,modelTitle:e.modelTitle},on:{closeGroup:e.closeGroup}}),a("label-model",{attrs:{select_keys:e.selectedRowKeys,select_names_str:e.select_names_str,cat_id:e.pageInfo.cat_id,label_type:e.label_type,label_id:e.label_id,visible:e.labelVisible,modelTitle:e.modelTitle},on:{closeLabel:e.closeLabel}})],1)])])},l=[],n=(a("d81d"),a("0b8f")),o=a("735a"),s=a("a0e0"),c=[{title:"标签名称",dataIndex:"label_name",key:"label_name",width:300},{title:"分组名称",dataIndex:"cat_name",key:"cat_name",width:300},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],r={data:function(){return{columns:c,modelTitle:"",openKeys:[],selectedRowKeys:[],groupVisible:!1,labelVisible:!1,pageInfo:{current:1,page:1,pageSize:20,total:0,cat_id:""},tableLoadding:!1,labelList:[],label_type:"add",label_id:"",cateList:[],defaultKey:"",cat_id:"",cat_type:"add",show_cat_id:"",show_cat_name:"",select_names:[],select_names_str:""}},mounted:function(){this.getLabelList(),this.getLabelCatList()},components:{newgroupModel:n["default"],labelModel:o["default"]},methods:{handleTableChange:function(e,t,a){this.pageInfo.current=e.current,this.pageInfo.page=e.current,this.getLabelList()},getLabelList:function(){var e=this;e.tableLoadding=!0,e.request(s["a"].getLabelList,e.pageInfo).then((function(t){e.labelList=t.list,e.pageInfo.total=t.count,e.tableLoadding=!1}))},editThis:function(e){this.label_type="edit",this.label_id=e.id+"",this.modelTitle="编辑标签",this.labelVisible=!0},getLabelCatList:function(){var e=this;e.request(s["a"].getLabelCatList,{}).then((function(t){t[0]&&t[0].cat_id&&(e.defaultKey=t[0].cat_id),e.cateList=t}))},delConfirm:function(e){var t=this;t.request(s["a"].delLabel,{label_id:e.id}).then((function(e){t.$message.success("删除成功！"),t.getLabelList()}))},delCancel:function(){},closeGroup:function(e){this.cat_id="",this.groupVisible=!1,e&&this.getLabelCatList()},closeLabel:function(e){this.label_id="",this.labelVisible=!1,e&&this.getLabelList()},addThis:function(e,t){console.log("this.select_names_str===>",this.select_names_str,this.selectedRowKeys),"remove"!=t||0!=this.selectedRowKeys.length?(this.label_type=t,this.modelTitle=e,this.labelVisible=!0):this.$message.warn("请选择要移动的标签")},handleClick:function(){},onSelectChange:function(e){var t=this;console.log("selectedRowKeys changed: ",e),this.selectedRowKeys=e,this.select_names=[],this.select_names_str="",this.labelList.map((function(a){e.map((function(e,i){e==a.id&&t.select_names.push(a.label_name)}))})),this.select_names.map((function(e,a){a+1<t.select_names.length?t.select_names_str+=e+"、":t.select_names_str+=e})),console.log("this.select_names_str===>",this.select_names_str,this.selectedRowKeys)},newGroup:function(){this.cat_type="add",this.modelTitle="添加标签分类",this.groupVisible=!0},delLabels:function(){},chooseMenu:function(e){this.pageInfo={current:1,page:1,pageSize:20,total:0,cat_id:e.cat_id+""},this.selectedRowKeys=[],this.select_names_str="",this.getLabelList()},showOperation:function(){},editCate:function(e){this.cat_id=e+"",this.modelTitle="编辑标签分类",this.cat_type="edit",this.groupVisible=!0},deleteCate:function(e){var t=this;t.$confirm({title:"提示",content:"确定要删除此标签分类吗？",onOk:function(){t.request(s["a"].delLabelCat,{cat_id:e}).then((function(e){t.$message.success("删除成功！"),t.getLabelCatList()}))},onCancel:function(){}})}}},d=r,u=(a("6815"),a("2877")),m=Object(u["a"])(d,i,l,!1,null,"5d2d49e8",null);t["default"]=m.exports},6815:function(e,t,a){"use strict";a("8b0c")},"735a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.modelTitle,width:900,visible:e.visible,"confirm-loading":e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleSubCancel}},[a("a-form-model",{ref:"ruleForm",attrs:{model:e.labelForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("div",{staticClass:"add_black"},[a("a-form-model-item",{attrs:{label:"分组名称",prop:"cat_id"}},[a("a-select",{attrs:{"show-search":"",placeholder:"请选择分组名称","filter-option":e.filterOption,value:e.labelForm.cat_id},on:{change:function(t){return e.handleSelectChange(t,"cat_id")}}},e._l(e.cateList,(function(t,i){return a("a-select-option",{attrs:{value:t.cat_id}},[e._v(" "+e._s(t.cat_name)+" ")])})),1)],1),"remove"==e.label_type?a("a-form-model-item",{attrs:{label:"标签名称"}},[a("a-input",{attrs:{disabled:!0},model:{value:e.select_names_str,callback:function(t){e.select_names_str=t},expression:"select_names_str"}})],1):a("a-form-model-item",{attrs:{label:"标签名称",prop:"label_name"}},[a("a-input",{attrs:{placeholder:"请输入标签名称"},model:{value:e.labelForm.label_name,callback:function(t){e.$set(e.labelForm,"label_name",t)},expression:"labelForm.label_name"}})],1)],1)])],1)},l=[],n=a("a0e0"),o={props:{visible:{type:Boolean,default:!1},modelTitle:{type:String,default:""},label_type:{type:String,default:"add"},label_id:{type:String,default:""},cat_id:{type:String,default:""},select_keys:{type:Array,default:function(){return[]}},select_names:{type:Array,default:function(){return[]}},select_names_str:{type:String,default:""}},watch:{label_id:{immediate:!0,handler:function(e){"edit"==this.label_type&&this.getLabelInfo()}},cat_id:{immediate:!0,handler:function(e){}}},data:function(){return{confirmLoading:!1,labelCol:{span:4},wrapperCol:{span:14},labelForm:{cat_id:""},rules:{cat_id:[{required:!0,message:"请选择分组",trigger:"blur"}],label_name:[{required:!0,message:"请输入标签名称",trigger:"blur"}]},cateList:[]}},mounted:function(){this.getLabelCatList()},methods:{clearForm:function(){this.labelForm={cat_id:""}},getLabelInfo:function(){var e=this;e.label_id&&e.request(n["a"].getLabelInfo,{label_id:e.label_id}).then((function(t){e.labelForm=t,e.labelForm.label_id=t.id}))},getLabelCatList:function(){var e=this;e.request(n["a"].getLabelCatList,{}).then((function(t){e.cateList=t}))},handleSubmit:function(e){var t=this;t.confirmLoading=!0,t.$refs.ruleForm.validate((function(e){if(!e)return t.confirmLoading=!1,!1;var a=n["a"].addLabel;"edit"==t.label_type&&(a=n["a"].editLabel),"remove"==t.label_type&&(a=n["a"].moveLabel,t.labelForm.label_id=t.select_keys),t.request(a,t.labelForm).then((function(e){"edit"==t.label_type?t.$message.success("编辑成功！"):"add"==t.label_type?t.$message.success("添加成功！"):"remove"==t.label_type&&t.$message.success("移动成功！"),t.$emit("closeLabel",!0),t.clearForm(),t.confirmLoading=!1})).catch((function(e){t.confirmLoading=!1}))}))},handleSubCancel:function(e){this.confirmLoading=!1,this.$emit("closeLabel"),"remove"!=this.label_type&&(this.clearForm(),this.$refs.ruleForm.resetFields())},handleSelectChange:function(e,t){this.labelForm[t]=e,this.$forceUpdate()},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},s=o,c=(a("ce80"),a("2877")),r=Object(c["a"])(s,i,l,!1,null,"749796f3",null);t["default"]=r.exports},"8b0c":function(e,t,a){},b8bd:function(e,t,a){},ce80:function(e,t,a){"use strict";a("f790")},f790:function(e,t,a){}}]);