(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-179eee1e"],{"12ec":function(t,e,n){},dbbe:function(t,e,n){"use strict";n("12ec")},ded8:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-modal",{attrs:{title:t.title,width:900,footer:null,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel}},[n("div",{staticClass:"search-box"},[n("a-row",{attrs:{gutter:48}},[n("a-col",{attrs:{md:10,sm:10}},[n("a-input-group",{attrs:{compact:""}},[n("p",{staticStyle:{"margin-top":"5px"}},[t._v("关键词：")]),n("a-input",{staticStyle:{width:"70%"},model:{value:t.search.keyword,callback:function(e){t.$set(t.search,"keyword",e)},expression:"search.keyword"}})],1)],1),n("a-col",{staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"},attrs:{md:3,sm:24}},[n("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.subBut()}}},[t._v(" 提交 ")])],1),n("a-col",{staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"},attrs:{md:2,sm:24}},[n("a-button",{on:{click:function(e){return t.resetList()}}},[t._v("清空")])],1),t.markerPoint.lng>0?n("span",{staticStyle:{"line-height":"30px",color:"red"}},[t._v("当前选中地址："+t._s(t.markerPoint.address))]):t._e()],1)],1),n("div",{staticClass:"map",staticStyle:{width:"100% !important",height:"500px !important"}},[n("baidu-map",{staticClass:"BMap",staticStyle:{width:"100%",height:"100%"},attrs:{center:t.center,"scroll-wheel-zoom":!0,zoom:t.zoom},on:{ready:t.handler,click:t.getClickInfo}},[n("bm-marker",{attrs:{position:t.markerPoint,dragging:!0},on:{dragend:t.dragend}},[n("bm-label",{attrs:{content:"我在这",labelStyle:{color:"red",fontSize:"24px"},offset:{width:-26,height:26}}})],1),n("bm-local-search",{attrs:{keyword:t.search.keyword,"auto-viewport":!0,location:t.search.location}})],1)],1)])},a=[],i=(n("d81d"),n("ac1f"),n("841c"),n("a9e3"),n("c1df")),r=n.n(i),s=n("a0e0"),l={name:"activityMap",components:{},data:function(){return{title:"新建",confirmLoading:!1,visible:!1,loading:!1,center:{lng:106.35586,lat:27.759588},post:{id:0,lng:0,lat:0},markerPoint:{lng:0,lat:0,address:""},zoom:16,search:{location:"",keyword:""},map:"",BMap:""}},mounted:function(){},methods:{moment:r.a,handler:function(t){var e=t.BMap,n=t.map;this.map=n,this.BMap=e,console.log("handler")},dragend:function(t){this.getLocations(t,0)},getClickInfo:function(t){this.getLocations(t,0)},getLocations:function(t,e){var n=this;console.log("获取地址");var o=new n.BMap.Geocoder,a=[];a=1==e?new n.BMap.Point(t.point.lng,t.point.lat):t.point,o.getLocation(a,(function(t){var e=t.addressComponents,o=t.surroundingPois,a=e.province,i=e.city,r=e.district,s=e.street;o.length>0&&o[0].title?s+=s?"-".concat(o[0].title):"".concat(o[0].title):s+=e.streetNumber,n.markerPoint["address"]=a+i+r+s})),n.markerPoint["lng"]=t.point["lng"],n.markerPoint["lat"]=t.point["lat"]},subBut:function(){if(0==this.markerPoint.lng)return this.$message.error("请先在地图完成选点"),!1;this.$emit("change",this.markerPoint),this.resetList(),this.handleCancel()},resetList:function(){this.markerPoint={lng:0,lat:0,address:""},this.search={location:"",keyword:""}},init_:function(t,e,n){var o=this;t=Number(t),e=Number(e),n=Number(n),o.title="地图选点",o.search={location:"",keyword:""},o.post={id:t,lng:e,lat:n},o.markerPoint={lng:0,lat:0,address:""},0==t&&this.request(s["a"].venueActivityLocation).then((function(t){t&&(o.post.lng=Number(t.lng),o.post.lat=Number(t.lat))})),console.log(o.post),o.post.id>0?setTimeout((function(){o.center={lng:o.post.lng,lat:o.post.lat},o.getLocations({point:{lng:o.post.lng,lat:o.post.lat}},1)}),800):setTimeout((function(){o.center={lng:o.post.lng,lat:o.post.lat}}),800),o.zoom=15,o.loading=!0,o.visible=!0,console.log("init_")},handleCancel:function(){this.visible=!1}}},c=l,d=(n("dbbe"),n("2877")),p=Object(d["a"])(c,o,a,!1,null,"80acfac6",null);e["default"]=p.exports}}]);