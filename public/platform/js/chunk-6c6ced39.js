(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c6ced39"],{b1da:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,width:500,height:300,visible:t.visible,footer:null},on:{cancel:t.closeWindow}},[a("a-form",{attrs:{form:t.form,"label-col":{span:5},"wrapper-col":{span:12}},on:{submit:t.handleSubmit}},[a("a-form-item",{attrs:{label:"类型名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:t.detail.name,rules:[{required:!0,message:"请输入类型名称!"}]}],expression:"['name', { initialValue: detail.name,rules: [{ required: true, message: '请输入类型名称!' }] }]"}],attrs:{"field-names":"name",placeholder:"请输入类型名称"}})],1),a("a-form-item",{attrs:{label:"类型说明"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe",{initialValue:t.detail.describe}],expression:"['describe', { initialValue: detail.describe }]"}],attrs:{"field-names":"describe",placeholder:"请输入类型说明","auto-size":{minRows:2,maxRows:6}}})],1),a("a-form-item",{attrs:{label:"排序"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:t.detail.sort}],expression:"['sort', { initialValue: detail.sort }]"}],staticStyle:{width:"200px"},attrs:{"field-names":"sort",min:0}})],1),a("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[a("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v(" 提交 ")])],1)],1)],1)},r=[],o=(a("b0c0"),a("4e82"),a("6c54")),s={data:function(){return{sort_id:0,title:"添加类型",visible:!1,queryParam:{sort_id:0,name:"",describe:"",sort:0},detail:{name:"",describe:"",sort:0},edit:!1,form:this.$form.createForm(this,{name:"coordinated"})}},methods:{handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,a){e.queryParam.name=a.name,e.queryParam.describe=a.describe,e.queryParam.sort=a.sort,e.submitRequest()}))},getData:function(){var t=this;this.request(o["a"].getGoodsSortInfo,{sort_id:this.sort_id}).then((function(e){t.detail={name:"",describe:"",sort:0},t.form.resetFields(),t.detail={name:e.name,describe:e.describe,sort:e.sort},t.queryParam.sort_id=t.sort_id,t.visible=!0}))},closeWindow:function(){this.visible=!1},showEdit:function(t){0==t?(this.resetForm(),this.title="添加类型",this.visible=!0):(this.sort_id=t,this.title="编辑类型",this.getData())},resetForm:function(){this.detail={name:"",describe:"",sort:0},this.form.resetFields(),this.queryParam.sort_id=0},submitRequest:function(){var t=this;this.request(o["a"].getGoodsSortEdit,this.queryParam).then((function(e){t.$message.success(t.L("操作成功！")),t.visible=!1,t.$emit("loadRefresh")}))}},mounted:function(){this.$route.query.sort_id?(this.sort_id=this.$route.query.sort_id,this.getData(),this.edit=!0):(this.edit=!1,this.resetForm())},watch:{$route:function(t,e){var a=t.path,i=e.path;if("/merchant/merchant.card/goodsEdit"==a){var r=t.query;r.sort_id?(this.sort_id=r.sort_id,this.edit=!0,"/merchant/merchant.card/goodsSort"!=i&&"/merchant/merchant.card/goodsSortEdit"!=i&&e||this.getData()):(this.resetForm(),this.edit=!1)}}}},n=s,d=a("0c7c"),c=Object(d["a"])(n,i,r,!1,null,null,null);e["default"]=c.exports},df60:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[a("router-link",{attrs:{to:{path:"/merchant/merchant.card/goodsList"}}},[a("a-button",{staticStyle:{margin:"10px 10px"},attrs:{type:"default"}},[t._v(t._s(t.L("会员商品列表")))])],1),a("router-link",{attrs:{to:{path:"/merchant/merchant.card/goodsSort"}}},[a("a-button",{staticStyle:{margin:"10px 10px"},attrs:{type:"primary"}},[t._v(t._s(t.L("类型管理")))])],1),a("a-button",{attrs:{type:"default"},on:{click:function(e){return t.$refs.goodsModel.showEdit(0)}}},[t._v(" 添加商品 ")]),a("router-link",{attrs:{to:{path:"/merchant/merchant.card/verificationList"}}},[a("a-button",{staticStyle:{margin:"10px 10px"},attrs:{type:"default"}},[t._v(t._s(t.L("核销列表")))])],1),a("a-table",{staticStyle:{background:"#ffffff"},attrs:{columns:t.columns,rowKey:"id","data-source":t.goodsList,pagination:t.pagination},on:{change:t.changePage},scopedSlots:t._u([{key:"action",fn:function(e){return a("span",{},[a("a",{staticClass:"inline-block",staticStyle:{"margin-right":"10px"},on:{click:function(a){return t.$refs.goodsSortModel.showEdit(e)}}},[t._v(t._s(t.L("编辑")))]),a("a",{staticClass:"inline-block",on:{click:function(a){return t.delGoodsSort(e)}}},[t._v(t._s(t.L("删除")))])])}}])}),a("a-button",{attrs:{block:""},on:{click:function(e){return t.$refs.goodsSortModel.showEdit(0)}}},[t._v(" 增加 ")]),a("goods-edit",{ref:"goodsModel",on:{loadRefresh:t.goGoodsList}}),a("goods-sort-edit",{ref:"goodsSortModel",on:{loadRefresh:t.getData}})],1)},r=[],o=a("c1df"),s=a.n(o),n=a("6c54"),d=a("7309"),c=a("b1da"),u={components:{goodsEdit:d["default"],goodsSortEdit:c["default"]},data:function(){return{store_id:0,queryParam:{page:1},goodsList:[],isAllCheck:!1,pagination:{pageSize:10,total:0,current:1,page:1},columns:[{title:this.L("序号"),dataIndex:"sort"},{title:this.L("分类名称"),dataIndex:"name"},{title:this.L("说明"),dataIndex:"describe"},{title:this.L("操作"),dataIndex:"sort_id",key:"sort_id",scopedSlots:{customRender:"action"}}]}},watch:{$route:function(){console.log(this.$route.query.store_id,"watch"),this.$route.query.store_id&&(this.store_id=this.$route.query.store_id,this.getData())}},created:function(){this.getData()},mounted:function(){this.getData()},methods:{moment:s.a,getData:function(){var t=this;this.queryParam.pageSize=this.pagination.pageSize,this.queryParam.page=this.pagination.current,this.request(n["a"].getGoodsSortList,this.queryParam).then((function(e){console.log(e.data),t.pagination.total=e.total,t.goodsList=e.data}))},handleTableChange:function(t){t.current&&t.current>0&&(this.queryParam["page"]=t.current)},goGoodsList:function(){this.$router.push({path:"/merchant/merchant.card/goodsList"})},editGoodsSort:function(t){this.$router.push({path:"/merchant/merchant.card/goodsSortEdit",query:{sort_id:t}})},delGoodsSort:function(t){var e=this;this.$confirm({title:"是否确定删除该类型?",centered:!0,onOk:function(){e.request(n["a"].delGoodsSort,{sort_id:t}).then((function(t){e.$message.success("操作成功！"),e.getData()}))},onCancel:function(){}})},addBtn:function(){this.$router.push("/merchant/merchant.card/goodsSortEdit")},changePage:function(t,e){this.pagination.current=t.current,this.getData()}}},l=u,h=a("0c7c"),m=Object(h["a"])(l,i,r,!1,null,null,null);e["default"]=m.exports}}]);