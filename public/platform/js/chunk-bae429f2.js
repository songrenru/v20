(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bae429f2","chunk-016408ff","chunk-6dcbf536","chunk-0aaa7850","chunk-2d33a754","chunk-58118a8a","chunk-2d207bd1"],{"05e9":function(e,t,a){},2061:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:e.modalTitle,width:1300,visible:e.visible,bodyStyle:{padding:"0 25px"}},on:{close:e.onClose}},[a("a-table",{staticClass:"table_con",attrs:{rowKey:function(e){return e.id},loading:e.tableLoading,pagination:e.pageInfo,columns:e.columns,"data-source":e.alertList,bordered:""},on:{change:e.tableChange},scopedSlots:e._u([{key:"action",fn:function(t,i){return[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.addAlert(i)}}},[e._v("详情")])]}},{key:"channelId",fn:function(t,i){return[a("div",{staticStyle:{width:"170px","text-align":"center"}},[e._v(" "+e._s(i.channel_id?i.channel_id:"--")+" ")])]}},{key:"pictureUrl",fn:function(t,i){return[i.picture_url?a("viewer",{attrs:{images:[i.picture_url]}},[a("img",{staticStyle:{width:"50px",height:"50px","border-radius":"5px"},attrs:{src:i.picture_url}})]):e._e()]}}])}),a("alertAddModal",{attrs:{id:e.event_id,visible:e.alertVisible},on:{close:e.closeAdd}})],1)},s=[],o=(a("a9e3"),a("8bbf")),r=a.n(o),l=a("768c"),n=(a("0808"),a("6944")),c=a.n(n);r.a.use(c.a);var d=200,p=[{title:"事件时间",dataIndex:"date_time",key:"date_time",width:d+40},{title:"事件类型",key:"event_type",dataIndex:"event_type",width:d-80},{title:"事件描述",key:"event_description",dataIndex:"event_description",width:d-40},{title:"图片URL",key:"picture_url",dataIndex:"picture_url",width:d-100,scopedSlots:{customRender:"pictureUrl"}},{title:"备注",key:"event_remark",dataIndex:"event_remark",width:d},{title:"操作",key:"action",width:d-100,scopedSlots:{customRender:"action"}}],u={props:{visible:{type:Boolean,default:!1},camera_id:{type:[String,Number],default:0}},watch:{visible:{handler:function(e){e&&this.camera_id&&(this.pageInfo.camera_id=this.camera_id,this.getAlertList())},immediate:!0}},components:{alertAddModal:l["default"]},data:function(){return{event_id:0,modalTitle:"监控事件报警",tableLoading:!1,columns:p,alertList:[],alertVisible:!1,pageInfo:{current:1,pageSize:10,total:0,page:1},cameraInfo:{}}},methods:{onClose:function(){this.$emit("close")},addAlert:function(e){this.alertVisible=!0,this.event_id=e.id},closeAdd:function(){this.alertVisible=!1,this.event_id=0},getAlertList:function(){var e=this;this.tableLoading=!0,this.request("/community/village_api.CameraDevice/getDeviceAlarmEventList",this.pageInfo).then((function(t){e.alertList=t.alarm_list,e.cameraInfo=t.cameraInfo,e.pageInfo.total=t.count,e.tableLoading=!1,t.cameraInfo.camera_sn&&t.cameraInfo.camera_name&&(e.modalTitle="设备编号："+t.cameraInfo.camera_sn+"      设备名称："+t.cameraInfo.camera_name)})).catch((function(t){e.tableLoading=!1}))},tableChange:function(e,t,a){console.log(e,t,a),this.pageInfo.page=e.current,this.pageInfo.current=e.current,this.pageInfo.pageSize=e.pageSize,this.getAlertList()}}},_=u,m=(a("6041"),a("0c7c")),h=Object(m["a"])(_,i,s,!1,null,"5f081e8b",null);t["default"]=h.exports},"2d82":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"视频监控类型",width:1e3,visible:e.visible,maskClosable:!1,placement:"right"},on:{close:e.handleCancel}},[a("p",[a("a",{staticClass:"ant-btn ant-btn-primary",staticStyle:{"margin-left":"50px"},on:{click:function(t){return e.addItem()}}},[e._v(" 添 加 ")])]),a("div",{staticClass:"message-suggestions-list-box",staticStyle:{"margin-top":"5px"}},[a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination,loading:e.loading,"row-key":function(e){return e.id}},on:{change:e.table_change},scopedSlots:e._u([{key:"status_slot",fn:function(t,i,s){return a("span",{},[1==i.status?a("span",{staticStyle:{color:"green"}},[e._v("已开启")]):0==i.status?a("span",{staticStyle:{color:"red"}},[e._v("已关闭")]):e._e()])}},{key:"action",fn:function(t,i,s){return a("span",{},[a("a",{on:{click:function(t){return e.editItem(i)}}},[e._v("编辑")]),i.xtype<1?a("span",[a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.delItem(i)}}},[e._v("删除")])],1):e._e()])}}])}),a("a-modal",{attrs:{width:500,title:e.addtitle,visible:e.visible_edit,maskClosable:!1,"confirm-loading":e.confirmLoading},on:{cancel:e.handle2Cancel,ok:e.handleSubmit}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"类型名称",labelCol:e.labelCol,required:!0}},[a("a-col",{attrs:{span:18}},[a("a-input",{staticStyle:{width:"250px"},attrs:{placeholder:"15字符以内",autocomplete:"off",name:"vname","max-length":15,type:"text"},model:{value:e.post.vname,callback:function(t){e.$set(e.post,"vname",t)},expression:"post.vname"}})],1)],1),a("a-form-item",{attrs:{label:"排序值",labelCol:e.labelCol}},[a("a-col",{attrs:{span:18}},[a("a-input-number",{staticStyle:{width:"210px"},attrs:{placeholder:"不填则默认为0,越大越靠前",name:"xsort",autocomplete:"off",min:0},model:{value:e.post.xsort,callback:function(t){e.$set(e.post,"xsort",t)},expression:"post.xsort"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,required:!0}},[a("a-col",{attrs:{span:18}},[a("a-radio-group",{attrs:{disabled:e.is_disabled},model:{value:e.post.status,callback:function(t){e.$set(e.post,"status",t)},expression:"post.status"}},[a("a-radio",{attrs:{value:1}},[e._v("开启")]),a("a-radio",{attrs:{value:0}},[e._v("关闭")])],1)],1),a("a-col",{attrs:{span:6}})],1)],1)],1)],1)])},s=[],o=(a("7d24"),a("dfae")),r=(a("ac1f"),a("841c"),a("a0e0")),l=[{title:"类型名称",dataIndex:"vname",key:"vname"},{title:"状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status_slot"}},{title:"排序值",dataIndex:"xsort",key:"xsort"},{title:"最后编辑时间",dataIndex:"updatetime_str",key:"updatetime_str"},{title:"操作",dataIndex:"",key:"",width:150,scopedSlots:{customRender:"action"}}],n=[],c={name:"videoMonitorTypeList",filters:{},components:{"a-collapse":o["a"],"a-collapse-panel":o["a"].Panel},data:function(){return{labelCol:{xs:{span:10},sm:{span:5}},pagination:{pageSize:10,total:10,current:1},search:{keyword:"",key_val:"name",key_val1:"paytime",page:1},form:this.$form.createForm(this),visible:!1,visible_edit:!1,loading:!1,data:n,columns:l,page:1,confirmLoading:!1,editRecord:{},post:{vname:"",xsort:"",status:1},idd:0,addtitle:"添加",is_disabled:!1}},activated:function(){},methods:{listpage:function(){this.visible=!0,this.idd=0,this.visible_edit=!1,this.getList()},getList:function(){var e=this;this.loading=!0,this.search["page"]=this.page,this.request(r["a"].getVmonitorTypeList,this.search).then((function(t){e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data=t.list,e.loading=!1}))},handleSubmit:function(){var e=this;return!this.post.vname||this.post.vname.length<1?(this.$message.error("请填写类型名称!"),!1):this.post.vname.length>15?(this.$message.error("请保持填写的类型名称在15个字符以内!"),!1):(this.post.id=this.idd,this.confirmLoading=!0,void this.request(r["a"].addVmonitorType,this.post).then((function(t){e.confirmLoading=!1,e.$message.success("保存成功!"),setTimeout((function(){e.visible_edit=!1,e.idd=0,e.editRecord={},e.post={vname:"",xsort:"",status:1},e.getList(),e.$emit("ok")}),1e3)})).catch((function(t){e.confirmLoading=!1})))},table_change:function(e){console.log("e",e),e.current&&e.current>0&&(this.pagination.current=e.current,this.page=e.current,this.getList())},handleCancel:function(){this.visible=!1,this.idd=0,this.editRecord={},this.post={vname:"",xsort:"",status:1}},handle2Cancel:function(){this.visible_edit=!1,this.idd=0,this.editRecord={},this.post={vname:"",xsort:"",status:1},this.is_disabled=!1},addItem:function(){this.visible_edit=!0,this.editRecord={},this.idd=0,this.post={vname:"",xsort:"",status:1},this.is_disabled=!1},editItem:function(e){this.visible_edit=!0,this.editRecord=e,this.idd=e.id,this.post.vname=e.vname,this.post.xsort=e.xsort,this.post.status=1*e.status,e.xtype>0&&(this.is_disabled=!0)},delItem:function(e){var t=this,a="你确定要删除【"+e.vname+"】这条数据吗？";e.relation_count>0&&(a="【"+e.vname+"】已经关联了"+e.relation_count+"条数据，您确定删除？"),t.$confirm({title:"操作提示",cancelText:"取消",okText:"确认删除",content:a,onOk:function(){t.request(r["a"].delVmonitorType,{idd:e.id}).then((function(e){t.$message.success("操作成功！")})).catch((function(e){t.$message.error("操作失败！")})),t.getList()},onCancel:function(){}})},dateOnChange:function(e,t){this.search.date=t,console.log("search",this.search)},searchList:function(){console.log("search",this.search),this.page=1;var e={current:1,pageSize:20,total:20};this.table_change(e)},resetList:function(){this.search={keyword:"",page:1},this.getList()}}},d=c,p=(a("a7ab3"),a("0c7c")),u=Object(p["a"])(d,i,s,!1,null,"1bd6b92a",null);t["default"]=u.exports},3348:function(e,t,a){"use strict";a("05e9")},3386:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{staticClass:"project_info",attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,required:!e.editAuth.edit_brand_id}},[a("span",{class:e.editAuth.edit_brand_id?"label_col":"label_col ant-form-item-required"},[e._v("设备厂商")]),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.brand_id",{initialValue:e.post.brand_id,rules:[{required:!e.editAuth.edit_brand_id,message:e.L("请选择设备厂商！")}]}],expression:"['post.brand_id',{initialValue: post.brand_id,rules: [{ required: !editAuth.edit_brand_id, message: L('请选择设备厂商！') }] }]"}],staticStyle:{width:"300px !important"},attrs:{placeholder:"请选择设备厂商",disabled:e.editAuth.edit_brand_id},on:{change:e.handleChange}},e._l(e.brand_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),e.editAuth.edit_thirdProtocol?e._e():a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,required:!0}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("设备协议")]),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.thirdProtocol",{initialValue:e.post.thirdProtocol,rules:[{required:!0,message:e.L("请选择设备协议")}]}],expression:"['post.thirdProtocol',{initialValue: post.thirdProtocol,rules: [{ required: true, message: L('请选择设备协议') }] }]"}],staticStyle:{width:"300px !important"},attrs:{placeholder:"请选择设备协议"}},e._l(e.thirdProtocolArr,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.thirdProtocol}},[e._v(" "+e._s(t.thirdTitle)+" ")])})),1)],1),e.editAuth.edit_thirdProtocol?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",{staticClass:"label_col"},[e._v("设备协议")]),e._v(" "+e._s(e.post.protocolTitle)+" ")]):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,required:!e.editAuth.edit_device_type}},[a("span",{class:e.editAuth.edit_device_type?"label_col":"label_col ant-form-item-required"},[e._v("设备类型")]),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.device_type",{initialValue:e.post.device_type,rules:[{required:!e.editAuth.edit_device_type,message:e.L("请选择设备类型！")}]}],expression:"['post.device_type',{initialValue: post.device_type,rules: [{ required: !editAuth.edit_device_type, message: L('请选择设备类型！') }] }]"}],staticStyle:{width:"300px !important"},attrs:{placeholder:"请选择设备类型",disabled:e.editAuth.edit_device_type},on:{change:e.handleChange1}},e._l(e.device_type_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1),e.tips["device_type"]&&e.tips["device_type"]["href"]?a("a",{staticStyle:{color:"blue","padding-left":"15px"},attrs:{target:"_blank",href:e.tips["device_type"]["href"]}},[e._v(e._s(e.tips.device_type.title))]):e._e(),e.tips["device_type"]&&!e.tips["device_type"]["href"]?a("a",{staticStyle:{color:"rgba(0, 0, 0, 0.65)","padding-left":"15px"}},[e._v(e._s(e.tips.device_type.title))]):e._e()],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,required:!e.editAuth.edit_camera_name}},[a("a-col",{attrs:{span:30}},[a("span",{class:e.editAuth.edit_camera_name?"label_col":"label_col ant-form-item-required"},[e._v("设备名称")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.camera_name",{initialValue:e.post.camera_name,rules:[{required:!e.editAuth.edit_camera_name,message:e.L("请输入名称！")}]}],expression:"['post.camera_name',{ initialValue: post.camera_name, rules: [{ required: !editAuth.edit_camera_name, message: L('请输入名称！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入名称",disabled:e.editAuth.edit_camera_name}}),e.tips["name"]&&e.tips["name"]["href"]?a("a",{staticStyle:{color:"blue","padding-left":"15px"},attrs:{target:"_blank",href:e.tips["name"]["href"]}},[e._v(e._s(e.tips.name.title))]):e._e(),e.tips["name"]&&!e.tips["name"]["href"]?a("a",{staticStyle:{color:"rgba(0, 0, 0, 0.65)","padding-left":"15px"}},[e._v(e._s(e.tips.name.title))]):e._e()],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,required:!e.editAuth.edit_camera_sn}},[a("a-col",{attrs:{span:30}},[a("span",{class:e.editAuth.edit_camera_sn?"label_col":"label_col ant-form-item-required"},[e._v("设备编号")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.camera_sn",{initialValue:e.post.camera_sn,rules:[{required:!e.editAuth.edit_camera_sn,message:e.L("请输入设备编号！")}]}],expression:"['post.camera_sn',{ initialValue: post.camera_sn, rules: [{ required: !editAuth.edit_camera_sn, message: L('请输入设备编号！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入设备编号",disabled:e.editAuth.edit_camera_sn}}),e.tips["sn"]&&e.tips["sn"]["href"]?a("a",{staticStyle:{color:"blue","padding-left":"15px"},attrs:{target:"_blank",href:e.tips["sn"]["href"]}},[e._v(e._s(e.tips.sn.title))]):e._e(),e.tips["sn"]&&!e.tips["sn"]["href"]?a("a",{staticStyle:{color:"rgba(0, 0, 0, 0.65)","padding-left":"15px"}},[e._v(e._s(e.tips.sn.title))]):e._e()],1),a("a-col",{attrs:{span:6}})],1),"1"==e.post.brand_id?a("a-form-item",{attrs:{label:"",required:!e.editAuth.edit_device_code,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:24}},[a("span",{class:e.editAuth.edit_device_code?"label_col":"label_col ant-form-item-required"},[e._v("设备验证码")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.device_code",{initialValue:e.post.device_code,rules:[{required:!e.editAuth.edit_device_code,message:e.L("请输入设备验证码！")}]}],expression:"['post.device_code',{ initialValue: post.device_code, rules: [{ required: !editAuth.edit_device_code, message: L('请输入设备验证码！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入设备验证码",disabled:e.editAuth.edit_device_code}}),e.tips["code"]&&e.tips["code"]["href"]?a("a",{staticStyle:{color:"blue","padding-left":"15px"},attrs:{target:"_blank",href:e.tips["code"]["href"]}},[e._v(e._s(e.tips.code.title))]):e._e(),e.tips["code"]&&!e.tips["code"]["href"]?a("a",{staticStyle:{color:"rgba(0, 0, 0, 0.65)","padding-left":"15px"}},[e._v(e._s(e.tips.code.title))]):e._e()],1),a("a-col",{attrs:{span:6}})],1):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col"},[e._v("出厂编号")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.product_model",{initialValue:e.post.product_model,rules:[{message:e.L("请输入出厂编号！")}]}],expression:"['post.product_model',{ initialValue: post.product_model, rules: [{message: L('请输入出厂编号！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入出厂编号",disabled:e.editAuth.edit_product_model}}),e.tips["product_model"]&&e.tips["product_model"]["href"]?a("a",{staticStyle:{color:"blue","padding-left":"15px"},attrs:{target:"_blank",href:e.tips["product_model"]["href"]}},[e._v(e._s(e.tips.product_model.title))]):e._e(),e.tips["product_model"]&&!e.tips["product_model"]["href"]?a("a",{staticStyle:{color:"rgba(0, 0, 0, 0.65)","padding-left":"15px"}},[e._v(e._s(e.tips.product_model.title))]):e._e()],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col"},[e._v("设备用户名")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.thirdLoginName",{initialValue:e.post.thirdLoginName,rules:[{message:e.L("请输入请输入设备用户名！")}]}],expression:"['post.thirdLoginName',{ initialValue: post.thirdLoginName, rules: [{message: L('请输入请输入设备用户名！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入设备用户名",disabled:e.editAuth.edit_thirdLoginName}}),e.tips["login_name"]&&e.tips["login_name"]["href"]?a("a",{staticStyle:{color:"blue","padding-left":"15px"},attrs:{target:"_blank",href:e.tips["login_name"]["href"]}},[e._v(e._s(e.tips.login_name.title))]):e._e(),e.tips["login_name"]&&!e.tips["login_name"]["href"]?a("a",{staticStyle:{color:"rgba(0, 0, 0, 0.65)","padding-left":"15px"}},[e._v(e._s(e.tips.login_name.title))]):e._e()],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col"},[e._v("设备密码")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.thirdLoginPassword",{initialValue:e.post.thirdLoginPassword,rules:[{message:e.L("请输入设备密码！")}]}],expression:"['post.thirdLoginPassword',{ initialValue: post.thirdLoginPassword, rules: [{message: L('请输入设备密码！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入设备密码",disabled:e.editAuth.edit_thirdLoginPassword}}),e.tips["login_password"]&&e.tips["login_password"]["href"]?a("a",{staticStyle:{color:"blue","padding-left":"15px"},attrs:{target:"_blank",href:e.tips["login_password"]["href"]}},[e._v(e._s(e.tips.login_password.title))]):e._e(),e.tips["login_password"]&&!e.tips["login_password"]["href"]?a("a",{staticStyle:{color:"rgba(0, 0, 0, 0.65)","padding-left":"15px"}},[e._v(e._s(e.tips.login_password.title))]):e._e()],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col"},[e._v("启用时间")]),a("a-date-picker",{attrs:{value:e.moment(e.post.open_time,e.dateFormat),disabled:e.editAuth.edit_open_time},on:{change:e.onChange}}),e.tips["open_time"]&&e.tips["open_time"]["href"]?a("a",{staticStyle:{color:"blue","padding-left":"15px"},attrs:{target:"_blank",href:e.tips["open_time"]["href"]}},[e._v(e._s(e.tips.open_time.title))]):e._e(),e.tips["open_time"]&&!e.tips["open_time"]["href"]?a("a",{staticStyle:{color:"rgba(0, 0, 0, 0.65)","padding-left":"15px"}},[e._v(e._s(e.tips.open_time.title))]):e._e()],1)],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col"},[e._v("设备相关参数")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.param",{initialValue:e.post.param}],expression:"['post.param',{ initialValue: post.param }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入设备相关参数",disabled:e.editAuth.edit_param}}),e.tips["param"]&&e.tips["param"]["href"]?a("a",{staticStyle:{color:"blue","padding-left":"15px"},attrs:{target:"_blank",href:e.tips["param"]["href"]}},[e._v(e._s(e.tips.param.title))]):e._e(),e.tips["param"]&&!e.tips["param"]["href"]?a("a",{staticStyle:{color:"rgba(0, 0, 0, 0.65)","padding-left":"15px"}},[e._v(e._s(e.tips.param.title))]):e._e()],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col"},[e._v("备注")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.remark",{initialValue:e.post.remark}],expression:"['post.remark',{ initialValue: post.remark }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入名称",disabled:e.editAuth.edit_remark}}),e.tips["remark"]&&e.tips["remark"]["href"]?a("a",{staticStyle:{color:"blue","padding-left":"15px"},attrs:{target:"_blank",href:e.tips["remark"]["href"]}},[e._v(e._s(e.tips.remark.title))]):e._e(),e.tips["remark"]&&!e.tips["remark"]["href"]?a("a",{staticStyle:{color:"rgba(0, 0, 0, 0.65)","padding-left":"15px"}},[e._v(e._s(e.tips.remark.title))]):e._e()],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col"},[e._v("排序")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.sort",{initialValue:e.post.sort}],expression:"['post.sort',{ initialValue: post.sort }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"数值越大，越靠前"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col"},[e._v("业主查看视频监控")]),a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.is_support_look",{initialValue:e.post.is_support_look}],expression:"['post.is_support_look',{ initialValue: post.is_support_look}]"}],attrs:{disabled:e.editAuth.edit_is_support_look}},[a("a-radio",{attrs:{value:0}},[e._v("不支持")]),a("a-radio",{attrs:{value:1}},[e._v("支持")])],1),e.tips["look"]&&e.tips["look"]["href"]?a("a",{staticStyle:{color:"blue","padding-left":"15px"},attrs:{target:"_blank",href:e.tips["look"]["href"]}},[e._v(e._s(e.tips.look.title))]):e._e(),e.tips["look"]&&!e.tips["look"]["href"]?a("a",{staticStyle:{color:"rgba(0, 0, 0, 0.65)","padding-left":"15px"}},[e._v(e._s(e.tips.look.title))]):e._e()],1)],1)],1)],1)],1)},s=[],o=a("ade3"),r=(a("4e82"),a("a0e0")),l=a("c1df"),n=a.n(l),c={components:{},data:function(){return{title:"新建",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,post:{camera_id:0,camera_name:"",camera_sn:"",product_name:"",param:"",remark:"",is_support_look:1,open_time:"",thirdLoginName:"",thirdLoginPassword:"",protocolTitle:"",thirdProtocol:"",sort:0},brand_list:[],device_type_list:[],dateFormat:"YYYY-MM-DD",date:"",thirdProtocolArr:[],editAuth:{edit_brand_id:!1,edit_thirdProtocol:!1,edit_device_type:!1,edit_camera_name:!1,edit_camera_sn:!1,edit_device_code:!1,edit_product_model:!1,edit_thirdLoginName:!1,edit_thirdLoginPassword:!1,edit_open_time:!1,edit_remark:!1,edit_edit_param:!1,edit_is_support_look:!1},tips:[]}},mounted:function(){},methods:{moment:n.a,onChange:function(e,t){console.log(e,t),this.post.open_time=t},handleChange:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.post.brand_id=""+e,this.thirdProtocolArr=[],this.request(r["a"].getThirdProtocol,{brand_id:e}).then((function(e){e.thirdProtocol&&(t.thirdProtocolArr=e.thirdProtocol,t.post.thirdProtocol=a,console.log("this.post.thirdProtocol",t.post.thirdProtocol),t.form.setFieldsValue({"post.thirdProtocol":a}),t.$forceUpdate()),e.tips&&(t.tips=e.tips),console.log("选择品牌",t.thirdProtocolArr)}))},handleChange1:function(e){console.log(e),this.post.device_type=e},add:function(){var e;this.tips=[],this.post=(e={camera_id:0,camera_name:"",camera_sn:"",product_name:"",param:"",remark:"",is_support_look:1,open_time:"",thirdProtocol:"",device_code:"",thirdLoginName:"",thirdLoginPassword:""},Object(o["a"])(e,"thirdLoginPassword",""),Object(o["a"])(e,"protocolTitle",""),Object(o["a"])(e,"sort",0),e),this.editAuth={edit_brand_id:!1,edit_thirdProtocol:!1,edit_device_type:!1,edit_camera_name:!1,edit_camera_sn:!1,edit_device_code:!1,edit_product_model:!1,edit_thirdLoginName:!1,edit_thirdLoginPassword:!1,edit_open_time:!1,edit_remark:!1,edit_edit_param:!1,edit_is_support_look:!1},this.editAuth={},this.title="添加",this.visible=!0,this.get_brand_list(),this.get_device_type_list(),this.getCurrentTime()},edit:function(e){var t;this.post=(t={camera_id:0,camera_name:"",camera_sn:"",product_name:"",param:"",remark:"",is_support_look:0,open_time:"",thirdProtocol:"",device_code:"",thirdLoginName:"",thirdLoginPassword:""},Object(o["a"])(t,"thirdLoginPassword",""),Object(o["a"])(t,"protocolTitle",""),Object(o["a"])(t,"sort",0),t),this.editAuth={edit_brand_id:!1,edit_thirdProtocol:!1,edit_device_type:!1,edit_camera_name:!1,edit_camera_sn:!1,edit_device_code:!1,edit_product_model:!1,edit_thirdLoginName:!1,edit_thirdLoginPassword:!1,edit_open_time:!1,edit_remark:!1,edit_edit_param:!1,edit_is_support_look:!1},this.confirmLoading=!0,this.title="编辑",this.visible=!0,this.post.camera_id=e,this.get_brand_list(),this.get_device_type_list();var a=this;setTimeout((function(){a.getCameraInfo(e)}),800)},get_brand_list:function(){var e=this;this.request(r["a"].getBrandList).then((function(t){e.brand_list=t,console.log("this.brand_list",e.brand_list)}))},get_device_type_list:function(){var e=this;this.request(r["a"].getDeviceTypeList).then((function(t){e.device_type_list=t}))},getCameraInfo:function(e){var t=this;this.request(r["a"].getCameraInfo,{camera_id:e}).then((function(e){t.handleChange(e.brand_id,e.thirdProtocol),t.post.camera_id=e.camera_id,t.post.camera_name=e.camera_name,t.post.camera_sn=e.camera_sn,t.post.device_type=e.device_type,t.post.product_model=e.product_model,t.post.remark=e.remark,t.post.param=e.param,t.post.is_support_look=e.is_support_look,t.post.open_time=e.open_time_txt,t.post.device_code=e.device_code,t.post.thirdLoginName=e.thirdLoginName,t.post.thirdLoginPassword=e.thirdLoginPassword,t.post.protocolTitle=e.protocolTitle,parseInt(e.sort)>0?t.post.sort=e.sort:t.post.sort=0,t.editAuth=e.editAuth,t.confirmLoading=!1}))},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){if(t)e.confirmLoading=!1;else{var i=r["a"].addCameraDevice;a.post.open_time=e.post.open_time,a.post.camera_id=e.post.camera_id,e.request(i,a.post).then((function(t){e.post.camera_id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,e.$emit("ok")}),1500)})).catch((function(t){e.confirmLoading=!1}))}}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.post.id=0,e.form=e.$form.createForm(e)}),500)},getCurrentTime:function(){var e=(new Date).getFullYear(),t=(new Date).getMonth()+1,a=(new Date).getDate();(new Date).getHours(),(new Date).getMinutes(),(new Date).getMinutes(),(new Date).getSeconds(),(new Date).getSeconds();this.post.open_time=e+"-"+t+"-"+a}}},d=c,p=(a("add0"),a("0c7c")),u=Object(p["a"])(d,i,s,!1,null,"24d41c2a",null);t["default"]=u.exports},"35ab":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-suggestions-box-1"},[a("div",[a("a-collapse",[a("a-collapse-panel",{attrs:{header:"注意事项"}},[a("p",[e._v("目前已知情况如下")]),a("p",[e._v("1、海康梯控自从22年四月底所有的经销型号都无法配置到云牟，如果想当做视频监控来查看必须要通过硬盘录像机的方式单独实现，此处不支持")]),a("p",[e._v("1、海康高空抛物，此处也不支持作为监控视频查看的。")])])],1)],1),a("div",{staticClass:"add-box"},[a("a-row",[a("a-col",{attrs:{md:24,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.addCamera.add()}}},[e._v(" 添加视频监控设备 ")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.vmonitorType.listpage()}}},[e._v(" 监控类型管理 ")]),e.hikCloudInfo&&e.hikCloudInfo.community_id?a("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hikCloudInfo&&e.hikCloudInfo.community_id?a("a-button",{attrs:{type:"primary",icon:"cloud-download"},on:{click:function(t){return e.getDeviceByCommunityId()}}},[e._v(" 获取6000C社区边缘设备 ")]):e._e()],1)],1)],1),a("div",{staticClass:"search-box"},[a("div",{staticClass:"form_item"},[a("div",{staticClass:"left_label"},[e._v("设备类型：")]),a("div",{staticClass:"right_value"},[a("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择设备类型"},model:{value:e.search.device_type,callback:function(t){e.$set(e.search,"device_type",t)},expression:"search.device_type"}},[a("a-select-option",{attrs:{value:0}},[e._v("全部")]),e._l(e.type_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id}},[e._v(" "+e._s(t.title)+" ")])}))],2)],1)]),a("div",{staticClass:"form_item"},[a("div",{staticClass:"left_label"},[e._v("设备协议：")]),a("div",{staticClass:"right_value"},[a("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择设备协议"},model:{value:e.search.device_protocol,callback:function(t){e.$set(e.search,"device_protocol",t)},expression:"search.device_protocol"}},[a("a-select-option",{attrs:{value:0}},[e._v("全部")]),e._l(e.protocolList,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.name}},[e._v(" "+e._s(t.label)+" ")])}))],2)],1)]),a("div",{staticClass:"form_item"},[a("div",{staticClass:"left_label"},[e._v("设备编号：")]),a("div",{staticClass:"right_value"},[a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入设备编号"},model:{value:e.search.camera_sn,callback:function(t){e.$set(e.search,"camera_sn",t)},expression:"search.camera_sn"}})],1)]),a("div",{staticClass:"form_item"},[a("div",{staticClass:"left_label"},[e._v("设备名称：")]),a("div",{staticClass:"right_value"},[a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入设备名称"},model:{value:e.search.camera_name,callback:function(t){e.$set(e.search,"camera_name",t)},expression:"search.camera_name"}})],1)]),a("div",{staticClass:"form_item"},[a("div",{staticClass:"left_label"},[e._v("设备状态：")]),a("div",{staticClass:"right_value"},[a("a-select",{staticStyle:{width:"117px"},attrs:{"default-value":"0",placeholder:"请选择项目"},model:{value:e.search.is_online,callback:function(t){e.$set(e.search,"is_online",t)},expression:"search.is_online"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[e._v("在线")]),a("a-select-option",{attrs:{value:"2"}},[e._v("离线")])],1)],1)]),a("div",{staticClass:"form_item"},[a("div",{staticClass:"left_label"},[e._v("业主查看：")]),a("div",{staticClass:"right_value"},[a("a-select",{staticStyle:{width:"117px"},attrs:{"default-value":"0",placeholder:"请选择项目"},model:{value:e.search.is_support_look,callback:function(t){e.$set(e.search,"is_support_look",t)},expression:"search.is_support_look"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[e._v("可以查看")]),a("a-select-option",{attrs:{value:"2"}},[e._v("不可查看")])],1)],1)]),a("div",{staticClass:"form_item"},[a("div",{staticClass:"right_value"},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(t){return e.searchList()}}},[e._v(" 查询 ")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{on:{click:function(t){return e.resetList()}}},[e._v("重置")])],1)])]),a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination,loading:e.loading},on:{change:e.table_change},scopedSlots:e._u([{key:"action",fn:function(t,i){return a("span",{},[a("a",{on:{click:function(t){return e.$refs.addCamera.edit(i.camera_id)}}},[e._v("修改设备")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.reviewVideo(i)}}},[e._v("预览")]),a("a-divider",{attrs:{type:"vertical"}}),i.thirdProtocol>0?a("a",{on:{click:function(t){return e.$refs.getDeviceInfo.detail(i.camera_id)}}},[e._v("设备信息")]):e._e(),i.is_del?a("a-divider",{attrs:{type:"vertical"}}):e._e(),i.is_del?a("a-popconfirm",{staticClass:"ant-dropdown-link",staticStyle:{"margin-left":"10px",color:"red"},attrs:{title:"确认删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.del_camera(i.camera_id)}}},[a("a",[e._v("删除")])]):e._e(),i.isAlarmEvent?a("a-divider",{attrs:{type:"vertical"}}):e._e(),i.isAlarmEvent?a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.showAlertEvent(i)}}},[e._v("报警事件")]):e._e()],1)}}])}),a("add-camera",{ref:"addCamera",on:{ok:e.getList}}),a("vmonitor-type",{ref:"vmonitorType",on:{ok:e.getTypeList}}),a("device-info",{ref:"getDeviceInfo"}),a("video-preview",{attrs:{visible:e.showVideoPreview,videoUrl:e.videoUrl,videoType:e.videoType,videoTitle:e.videoTitle},on:{closeVideo:e.closeVideo}}),a("alertEventModal",{attrs:{camera_id:e.camera_id,visible:e.showAlertModal},on:{close:e.closeAlert}})],1)},s=[],o=(a("ac1f"),a("841c"),a("a0e0")),r=a("3386"),l=a("2d82"),n=a("a28b"),c=a("f1d4"),d=a("2061"),p=[{title:"设备编号",dataIndex:"camera_sn",key:"camera_sn"},{title:"设备名称",dataIndex:"camera_name",key:"camera_name"},{title:"设备品牌",dataIndex:"brand_name",key:"brand_name"},{title:"设备类型",dataIndex:"device_type",key:"device_type"},{title:"业主查看",dataIndex:"is_support_look_txt",key:"is_support_look_txt"},{title:"启用时间",dataIndex:"open_time_txt",key:"open_time_txt"},{title:"支持设备协议",dataIndex:"thirdProtocol_txt",key:"thirdProtocol_txt"},{title:"排序",dataIndex:"sort",key:"sort"},{title:"操作",key:"action",width:"440px",dataIndex:"",scopedSlots:{customRender:"action"}}],u=[],_={name:"cameraList",filters:{},components:{addCamera:r["default"],vmonitorType:l["default"],deviceInfo:n["default"],videoPreview:c["default"],alertEventModal:d["default"]},data:function(){return{pagination:{pageSize:10,total:10,current:1},search:{camera_sn:"",camera_name:"",page:1,device_type:void 0,device_protocol:void 0},form:this.$form.createForm(this),visible:!1,loading:!1,data:u,columns:p,page:1,type_list:[],camera_id:0,showDeviceBtn:["12","31"],showVideoPreview:!1,videoType:"flv",videoUrl:"",videoTitle:"",hikCloudInfo:{},showAlertModal:!1,protocolList:[]}},mounted:function(){this.getList(),this.getType(),this.getProtocols()},methods:{getDeviceByCommunityId:function(){var e=this;this.request(o["a"].getDeviceByCommunityId).then((function(t){console.log("getDeviceByCommunityId",t),e.$message.success("已经下发执行获取，请在稍后刷新列表确认")}))},getProtocols:function(){var e=this;this.request("/community/village_api.CameraDevice/getCameraThirdProtocols").then((function(t){e.protocolList=t.list}))},reviewVideo:function(e){var t={};t["camera_id"]=e.camera_id;var a="",i="",s=this;e.look_url?(a=e.look_url,i=e.lookUrlType,this.videoUrl=a,this.videoType=i,this.videoTitle="设备名称："+e.camera_name+"，设备品牌："+e.brand_name,this.showVideoPreview=!0):this.request(o["a"].getCameraLiveAddress,t).then((function(t){a=t.look_url,i=t.lookUrlType,s.videoUrl=a,s.videoType=i,s.videoTitle="设备名称："+e.camera_name+"，设备品牌："+e.brand_name,s.showVideoPreview=!0}))},videoV2CamerasPreviewURLs:function(e){},getList:function(){var e=this;this.loading=!0,this.search["page"]=this.page,this.request(o["a"].getCameraList,this.search).then((function(t){e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data=t.list,e.hikCloudInfo=t.hikCloudInfo,e.loading=!1}))},del_camera:function(e){var t=this;this.request(o["a"].delCamera,{camera_id:e}).then((function(e){t.$message.success("删除成功"),t.getList()}))},table_change:function(e){e.current&&e.current>0&&(this.pagination.current=e.current,this.page=e.current,this.getList())},searchList:function(){console.log("search",this.search),this.page=1;var e={current:1,pageSize:10,total:10};console.log("searchList"),this.table_change(e)},getType:function(){var e=this;this.request(o["a"].getCameraDeviceType).then((function(t){e.type_list=t})).catch((function(e){}))},resetList:function(){this.getType(),this.search={camera_sn:"",camera_name:"",is_online:void 0,is_support_look:void 0,device_type:void 0,device_protocol:void 0,page:1},this.table_change({current:1,pageSize:10,total:10})},getTypeList:function(){this.getType()},closeVideo:function(){this.showVideoPreview=!1},showAlertEvent:function(e){this.showAlertModal=!0,this.camera_id=e.camera_id},closeAlert:function(){this.camera_id=0,this.showAlertModal=!1}}},m=_,h=(a("9550"),a("0c7c")),v=Object(h["a"])(m,i,s,!1,null,"5d480f5b",null);t["default"]=v.exports},6041:function(e,t,a){"use strict";a("d712")},"768c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"告警事件详情",width:800,visible:e.visible,footer:null},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("div",{staticClass:"detail_con"},e._l(e.detailList,(function(t,i){return a("div",{key:i,staticClass:"detail_item"},[a("div",{staticClass:"left_label"},[e._v(e._s(t.label)+"：")]),"text"==t.type?a("div",{staticClass:"right_value"},[e._v(e._s(t.value))]):e._e(),t.value&&"image"==t.type?a("viewer",{attrs:{images:[t.value]}},[a("img",{staticStyle:{width:"50px",height:"50px","border-radius":"5px"},attrs:{src:t.value}})]):e._e()],1)})),0)])},s=[],o=(a("a9e3"),a("8bbf")),r=a.n(o),l=(a("0808"),a("6944")),n=a.n(l);r.a.use(n.a);var c={props:{visible:{type:Boolean,default:!1},id:{type:[String,Number],default:0}},watch:{visible:{handler:function(e){e&&this.id&&this.getDetails()},immediate:!0}},data:function(){return{detailList:[]}},methods:{handleOk:function(){this.$emit("close")},handleCancel:function(){this.$emit("close")},getDetails:function(){var e=this;this.request("/community/village_api.CameraDevice/getDeviceAlarmInfo",{id:this.id}).then((function(t){e.detailList=t.alarmShow}))}}},d=c,p=(a("c036"),a("0c7c")),u=Object(p["a"])(d,i,s,!1,null,"c28caa42",null);t["default"]=u.exports},"90f7":function(e,t,a){},9550:function(e,t,a){"use strict";a("90f7")},a28b:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[31==e.protocol?a("a-page-header",{staticStyle:{padding:"10px 5px"},attrs:{ghost:!1,title:"大华摄像头","sub-title":"大华云睿开放平台"}},[a("a-descriptions",{attrs:{size:"small",column:3}},[a("a-descriptions-item",{attrs:{label:"设备ID"}},[a("a",[e._v(" "+e._s(e.cameraDeviceInfo.deviceId))])]),a("a-descriptions-item",{attrs:{label:"设备名称"}},[e._v(" "+e._s(e.cameraDeviceInfo.name)+" ")]),a("a-descriptions-item",{attrs:{label:"设备型号"}},[e._v(" "+e._s(e.cameraDeviceInfo.deviceModel)+" ")]),a("a-descriptions-item",{attrs:{label:"设备序列号"}},[a("a",[e._v(e._s(e.cameraDeviceInfo.deviceId))])]),a("a-descriptions-item",{attrs:{label:"设备状态"}},[e._v(" "+e._s(1==e.cameraDeviceInfo.status?"在线":0==e.cameraDeviceInfo.status?"离线":"升级中")+" ")]),a("a-descriptions-item",{attrs:{label:"设备分类"}},[e._v(" "+e._s(e.cameraDeviceInfo.deviceCatalog)+" ")]),a("a-descriptions-item",{attrs:{label:"设备品牌信息"}},[e._v(" "+e._s(e.cameraDeviceInfo.brand)+" ")]),a("a-descriptions-item",{attrs:{label:"设备基线类型"}},[e._v(" "+e._s(e.cameraDeviceInfo.baseline)+" ")]),a("a-descriptions-item",{attrs:{label:"是否有新版本可以升级"}},[e._v(" "+e._s(e.cameraDeviceInfo.canBeUpgrade?"可以":"不可以")+" ")])],1),e._l(e.cameraDeviceInfo.channelList,(function(t,i){return a("a-descriptions",{key:i,attrs:{size:"small",column:3}},[a("a-descriptions-item",{attrs:{label:"通道号"}},[e._v(" "+e._s(t.channelId)+" ")]),a("a-descriptions-item",{attrs:{label:"通道名称"}},[e._v(" "+e._s(t.channelName)+" ")]),a("a-descriptions-item",{attrs:{label:"通道状态"}},[e._v(" "+e._s(t.onlineStatus?"在线":"离线")+" ")]),a("a-descriptions-item",{attrs:{label:"报警布撤防状态"}},[e._v(" "+e._s(t.alarmStatus?"布防":"撤防")+" ")])],1)})),a("a-descriptions",{attrs:{size:"small",column:1}},[a("a-descriptions-item",{attrs:{label:"FLV"}},[e._v(" "+e._s(e.cameraVideo.flv)+" ")]),a("a-descriptions-item",{attrs:{label:"HDFLV"}},[e._v(" "+e._s(e.cameraVideo.flvHD)+" ")])],1),a("a-descriptions",{attrs:{size:"small",column:3}},[a("a-descriptions-item",{attrs:{label:"设备能力集"}},[a("div",{staticStyle:{"word-wrap":"break-word",width:"800px"}},[e._v(" "+e._s(e.cameraDeviceInfo.ability))])])],1)],2):e._e(),12==e.protocol?a("a-page-header",{staticStyle:{padding:"10px 5px"},attrs:{ghost:!1,title:"海康摄像头","sub-title":"海康云牟内部协议"}},[a("a-descriptions",{attrs:{column:3}},[a("a-descriptions-item",{attrs:{label:"设备ID"}},[a("a",[e._v(e._s(e.cameraDeviceInfo.deviceId))])]),a("a-descriptions-item",{attrs:{label:"设备名称"}},[e._v(" "+e._s(e.cameraDeviceInfo.deviceName)+" ")]),a("a-descriptions-item",{attrs:{label:"设备型号"}},[e._v(" "+e._s(e.cameraDeviceInfo.deviceModel)+" ")]),a("a-descriptions-item",{attrs:{label:"设备序列号"}},[a("a",[e._v(e._s(e.cameraDeviceInfo.deviceSerial))])]),a("a-descriptions-item",{attrs:{label:"设备状态"}},[e._v(" "+e._s(e.cameraDeviceInfo.deviceStatus?"在线":"离线")+" ")]),a("a-descriptions-item",{attrs:{label:"设备路径"}},[e._v(" "+e._s(e.cameraDeviceInfo.devicePath)+" ")]),a("a-descriptions-item",{attrs:{label:"设备IP"}},[e._v(" "+e._s(e.cameraDeviceInfo.deviceIp)+" ")])],1),a("a-descriptions",{attrs:{size:"small",column:1}},[a("a-descriptions-item",{attrs:{label:"FLV"}},[e._v(" "+e._s(e.cameraVideo.flvAddress)+" ")]),a("a-descriptions-item",{attrs:{label:"HDFLV"}},[e._v(" "+e._s(e.cameraVideo.hdFlvAddress)+" ")]),a("a-descriptions-item",{attrs:{label:"HLS"}},[e._v(" "+e._s(e.cameraVideo.hls)+" ")]),a("a-descriptions-item",{attrs:{label:"HLSHD"}},[e._v(" "+e._s(e.cameraVideo.hlsHd)+" ")]),a("a-descriptions-item",{attrs:{label:"RTMP"}},[e._v(" "+e._s(e.cameraVideo.rtmp)+" ")]),a("a-descriptions-item",{attrs:{label:"RTMPHD"}},[e._v(" "+e._s(e.cameraVideo.rtmpHd)+" ")])],1)],1):e._e(),14==e.protocol?a("a-page-header",{staticStyle:{padding:"10px 5px"},attrs:{ghost:!1,title:"6000C摄像头","sub-title":"6000C社区边缘"}},[a("a-descriptions",{attrs:{column:3}},[a("a-descriptions-item",{attrs:{label:"设备ID"}},[a("a",[e._v(e._s(e.cameraDeviceInfo.deviceId))])]),a("a-descriptions-item",{attrs:{label:"设备名称"}},[e._v(" "+e._s(e.cameraDeviceInfo.deviceName)+" ")]),a("a-descriptions-item",{attrs:{label:"设备型号"}},[e._v(" "+e._s(e.cameraDeviceInfo.deviceModel)+" ")]),a("a-descriptions-item",{attrs:{label:"设备序列号"}},[a("a",[e._v(e._s(e.cameraDeviceInfo.deviceSerial))])]),a("a-descriptions-item",{attrs:{label:"设备状态"}},[e._v(" "+e._s(e.cameraDeviceInfo.deviceStatus?"在线":"离线")+" ")]),a("a-descriptions-item",{attrs:{label:"设备路径"}},[e._v(" "+e._s(e.cameraDeviceInfo.devicePath)+" ")]),a("a-descriptions-item",{attrs:{label:"设备IP"}},[e._v(" "+e._s(e.cameraDeviceInfo.deviceIp)+" ")])],1),a("a-descriptions",{attrs:{size:"small",column:1}},[a("a-descriptions-item",{attrs:{label:"FLV"}},[e._v(" "+e._s(e.cameraVideo.flv)+" ")])],1)],1):e._e()],1)},s=[],o=a("a0e0"),r={components:{},data:function(){return{title:"信息",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},camera_id:0,confirmLoading:!1,device_type:"",visible:!1,protocol:0,protocolTitle:"",cameraDeviceInfo:{},cameraVideo:{}}},mounted:function(){},methods:{handleChange:function(e,t){},handleChange1:function(e){console.log(e),this.device_type=e},detail:function(e){this.title="查看设备在平台的信息",this.visible=!0,this.camera_id=e,this.getCameraInfo(e)},getCameraInfo:function(e){var t=this;this.request(o["a"].getCameraDeviceInfo,{camera_id:e}).then((function(e){t.protocol=e.protocol,t.protocolTitle=e.protocolTitle,t.cameraDeviceInfo=e.cameraDeviceInfo,t.cameraVideo=e.cameraVideo.liveResult,console.log("--------\x3e",e.cameraVideo.liveResult)}))},handleSubmit:function(){},handleCancel:function(){this.visible=!1,this.protocol=0,this.protocolTitle="",this.cameraDeviceInfo={},this.cameraVideo={}}}},l=r,n=a("0c7c"),c=Object(n["a"])(l,i,s,!1,null,"7a72a37b",null);t["default"]=c.exports},a412:function(e,t,a){},a7ab3:function(e,t,a){"use strict";a("ecb1")},add0:function(e,t,a){"use strict";a("aded")},aded:function(e,t,a){},c036:function(e,t,a){"use strict";a("a412")},d6d3:function(e,t,a){!function(t,i){e.exports=i(a("3d337"))}(0,(function(e){return function(e){function t(i){if(a[i])return a[i].exports;var s=a[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,i){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=3)}([function(t,a){t.exports=e},function(e,t,a){"use strict";function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),o=function(e){return e&&e.__esModule?e:{default:e}}(s),r=window.videojs||o.default;"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),i=1;i<arguments.length;i++){var s=arguments[i];if(null!=s)for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])}return a},writable:!0,configurable:!0});var l=["loadeddata","canplay","canplaythrough","play","pause","waiting","playing","ended","error"];t.default={name:"video-player",props:{start:{type:Number,default:0},crossOrigin:{type:String,default:""},playsinline:{type:Boolean,default:!1},customEventName:{type:String,default:"statechanged"},options:{type:Object,required:!0},events:{type:Array,default:function(){return[]}},globalOptions:{type:Object,default:function(){return{controls:!0,controlBar:{remainingTimeDisplay:!1,playToggle:{},progressControl:{},fullscreenToggle:{},volumeMenuButton:{inline:!1,vertical:!0}},techOrder:["html5"],plugins:{}}}},globalEvents:{type:Array,default:function(){return[]}}},data:function(){return{player:null,reseted:!0}},mounted:function(){this.player||this.initialize()},beforeDestroy:function(){this.player&&this.dispose()},methods:{initialize:function(){var e=this,t=Object.assign({},this.globalOptions,this.options);this.playsinline&&(this.$refs.video.setAttribute("playsinline",this.playsinline),this.$refs.video.setAttribute("webkit-playsinline",this.playsinline),this.$refs.video.setAttribute("x5-playsinline",this.playsinline),this.$refs.video.setAttribute("x5-video-player-type","h5"),this.$refs.video.setAttribute("x5-video-player-fullscreen",!1)),""!==this.crossOrigin&&(this.$refs.video.crossOrigin=this.crossOrigin,this.$refs.video.setAttribute("crossOrigin",this.crossOrigin));var a=function(t,a){t&&e.$emit(t,e.player),a&&e.$emit(e.customEventName,i({},t,a))};t.plugins&&delete t.plugins.__ob__;var s=this;this.player=r(this.$refs.video,t,(function(){for(var e=this,t=l.concat(s.events).concat(s.globalEvents),i={},o=0;o<t.length;o++)"string"==typeof t[o]&&void 0===i[t[o]]&&function(t){i[t]=null,e.on(t,(function(){a(t,!0)}))}(t[o]);this.on("timeupdate",(function(){a("timeupdate",this.currentTime())})),s.$emit("ready",this)}))},dispose:function(e){var t=this;this.player&&this.player.dispose&&("Flash"!==this.player.techName_&&this.player.pause&&this.player.pause(),this.player.dispose(),this.player=null,this.$nextTick((function(){t.reseted=!1,t.$nextTick((function(){t.reseted=!0,t.$nextTick((function(){e&&e()}))}))})))}},watch:{options:{deep:!0,handler:function(e,t){var a=this;this.dispose((function(){e&&e.sources&&e.sources.length&&a.initialize()}))}}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(1),s=a.n(i);for(var o in i)["default","default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);var r=a(5),l=a(4),n=l(s.a,r.a,!1,null,null,null);t.default=n.exports},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.install=t.videoPlayer=t.videojs=void 0;var s=a(0),o=i(s),r=a(2),l=i(r),n=window.videojs||o.default,c=function(e,t){t&&(t.options&&(l.default.props.globalOptions.default=function(){return t.options}),t.events&&(l.default.props.globalEvents.default=function(){return t.events})),e.component(l.default.name,l.default)},d={videojs:n,videoPlayer:l.default,install:c};t.default=d,t.videojs=n,t.videoPlayer=l.default,t.install=c},function(e,t){e.exports=function(e,t,a,i,s,o){var r,l=e=e||{},n=typeof e.default;"object"!==n&&"function"!==n||(r=e,l=e.default);var c,d="function"==typeof l?l.options:l;if(t&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0),a&&(d.functional=!0),s&&(d._scopeId=s),o?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},d._ssrRegister=c):i&&(c=i),c){var p=d.functional,u=p?d.render:d.beforeCreate;p?(d._injectStyles=c,d.render=function(e,t){return c.call(t),u(e,t)}):d.beforeCreate=u?[].concat(u,c):[c]}return{esModule:r,exports:l,options:d}}},function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.reseted?a("div",{staticClass:"video-player"},[a("video",{ref:"video",staticClass:"video-js"})]):e._e()},s=[],o={render:i,staticRenderFns:s};t.a=o}])}))},d712:function(e,t,a){},ecb1:function(e,t,a){},f1d4:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.videoTitle,visible:e.visible,footer:null,width:1e3},on:{cancel:e.handleCancel}},["flv"==e.videoType?a("video",{staticClass:"videoPlayer",attrs:{id:"myFlvVideo",controls:"",autoplay:""},domProps:{muted:!1}}):e._e(),e.visible&&"hls"==e.videoType?a("video-player",{ref:"videoPlayer",staticClass:"video-player",attrs:{playsinline:!0,options:e.playerOptions},on:{play:function(t){return e.onPlayerPlay(t)}}}):e._e(),e.visible&&!e.videoType?a("div",{staticClass:"no_video",staticStyle:{width:"100%",height:"600px",display:"flex","align-items":"center","justify-content":"center"}},[a("h1",[e._v("暂无数据源")])]):e._e()],1)},s=[],o=a("fc78"),r=a.n(o),l=a("d6d3"),n=(a("fda2"),a("a151"),{props:{visible:{type:Boolean,default:!1},videoUrl:{type:String,default:""},videoType:{type:String,default:"flv"},videoTitle:{type:String,default:"视频预览"}},watch:{visible:{handler:function(e){var t=this;e&&this.videoUrl&&"flv"==this.videoType&&this.$nextTick((function(){t.createVideo()})),e&&this.videoUrl&&"hls"==this.videoType&&(this.playerOptions.sources[0].src=this.videoUrl)}}},components:{videoPlayer:l["videoPlayer"]},data:function(){return{videoSrc:"https://cmgw-vpc.lechange.com:8890/flv/LCO/8F03A4EPAG5D721/0/0/20220819133149/26090cd7734e89b8033db7e12a874201.flv?proto=https",flvPlayer:null,m3u8Src:"http://hls01open.ys7.com/openlive/daac42b18e4b4bd1826e52d50f84add5.m3u8",playerOptions:{autoplay:!0,muted:!0,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:"http://hls01open.ys7.com/openlive/daac42b18e4b4bd1826e52d50f84add5.m3u8"}],notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},interval:null}},mounted:function(){},beforeDestroy:function(){this.videoUrl&&this.destoryVideo()},methods:{onPlayerPlay:function(e){console.log(e)},createVideo:function(){var e=this;if(r.a.isSupported()){console.log("this.videoUrl===>",this.videoUrl);var t=document.getElementById("myFlvVideo");if(this.flvPlayer=r.a.createPlayer({type:"flv",isLive:!0,hasAudio:!1,url:this.videoUrl}),!this.flvPlayer)return;this.flvPlayer.attachMediaElement(t),this.flvPlayer.load(),this.flvPlayer.play(),this.flvPlayer.on(r.a.Events.ERROR,(function(t,a){console.log("errorType:",t),console.log("errorDetail:",a),e.flvPlayer&&(e.destoryVideo(),e.createVideo())}))}},destoryVideo:function(){this.flvPlayer&&(this.flvPlayer.pause(),this.flvPlayer.unload(),this.flvPlayer.detachMediaElement(),this.flvPlayer.destroy(),this.flvPlayer=null)},handleCancel:function(){this.$emit("closeVideo")}}}),c=n,d=(a("3348"),a("0c7c")),p=Object(d["a"])(c,i,s,!1,null,"19dd4a33",null);t["default"]=p.exports}}]);