(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b2bfa79a","chunk-8edfacdc"],{3884:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.formDataDecorate?o("div",[o("componentDesc",{attrs:{content:t.desc}}),o("div",{staticClass:"content"},[o("a-form-model",{attrs:{model:t.formDataDecorate,"label-col":t.labelCol,"wrapper-col":t.wrapperCol,labelAlign:"left"}},[o("a-form-model-item",{attrs:{label:t.L("排列样式")}},[o("div",{staticClass:"flex align-center justify-between"},[o("span",[t._v(t._s(t.getLabel(t.$store.state.customPage.styleTypeOptions,t.formDataDecorate.style_type)))]),o("div",[o("a-radio-group",{attrs:{"button-style":"solid"},on:{change:function(e){return t.$store.dispatch("updatePageScroll",!0)}},model:{value:t.formDataDecorate.style_type,callback:function(e){t.$set(t.formDataDecorate,"style_type",e)},expression:"formDataDecorate.style_type"}},t._l(t.$store.state.customPage.styleTypeOptions,(function(t){return o("a-radio-button",{key:t.value,attrs:{value:t.value}},[o("IconFont",{staticClass:"itemIcon",attrs:{type:t.icon}})],1)})),1)],1)])]),o("a-form-model-item",{attrs:{label:t.L("颜色")}},[o("div",{staticClass:"flex align-center justify-between"},[o("span",[t._v(t._s(t.getLabel(t.bgColorOptions,t.formDataDecorate.bg_color)))]),o("div",{staticClass:"flex align-center"},t._l(t.bgColorOptions,(function(e){return o("span",{key:e.value,staticClass:"color-item pointer",class:{active:e.value==t.formDataDecorate.bg_color},style:{background:e.value},on:{click:function(o){return t.bgColorOpt(e)}}})})),0)])]),o("a-form-model-item",{staticClass:"margin-bottom-none",attrs:{label:t.L("隐藏已抢完及失效的券"),labelCol:{span:10},wrapperCol:{span:14}}},[o("div",{staticClass:"flex align-center justify-between"},[o("span",[t._v(t._s(1==t.formDataDecorate.is_show?t.L("显示"):t.L("隐藏")))]),o("a-checkbox",{attrs:{checked:1==t.formDataDecorate.is_show},on:{change:t.isShowChange}})],1)]),o("div",{staticClass:"ant-form-explain"},[t._v(t._s(t.L("当页面无可显示优惠券时，优惠券区块将隐藏")))])],1)],1),t.formDataDecorate.list&&t.formDataDecorate.list.length?o("div",{staticClass:"list-wrap"},[o("draggable",{model:{value:t.formDataDecorate.list,callback:function(e){t.$set(t.formDataDecorate,"list",e)},expression:"formDataDecorate.list"}},t._l(t.formDataDecorate.list,(function(e){return o("div",{key:e.coupon_id,staticClass:"flex list-item"},[o("div",{staticClass:"text-nowrap"},[o("a-icon",{staticClass:"mr-10",attrs:{type:"menu"}}),t._v(t._s(t.L("优惠券"))+"：")],1),o("div",{staticClass:"flex-1 text-wrap"},[t._v(" "+t._s(e.name+(e.discount_txt?" ("+e.discount_txt+")":""))+" ")])])})),0)],1):t._e(),o("div",{staticClass:"mt-20 mb-20 padding-24"},[o("a-button",{attrs:{block:""},on:{click:function(e){return t.addBtn()}}},[o("a-icon",{attrs:{type:"plus"}}),t._v(t._s(t.L("添加优惠券"))+" ")],1)],1),o("a-modal",{attrs:{title:t.L("已发布的优惠券"),visible:t.visible,destroyOnClose:!0,width:"60%",cancelText:t.L("取消"),okText:t.L("确定")},on:{ok:t.handleOk,cancel:t.handleCancel}},[o("a-row",{staticClass:"mb-20",attrs:{type:"flex",justify:"space-between"}},[o("a-col",[o("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.getList(!0)}}},[t._v(" "+t._s(t.L("刷新"))+" ")])],1),o("a-col",[o("a-input",{attrs:{placeholder:t.L("搜索")},on:{change:t.inputChange,pressEnter:t.inputChange},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[o("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1)],1),o("a-table",{attrs:{"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},columns:t.columns,rowKey:"coupon_id",scroll:{y:442},pagination:t.pagination,"data-source":t.dataList},scopedSlots:t._u([{key:"num",fn:function(e,a){return o("span",{},[t._v(" "+t._s(a.had_pull)+"/"+t._s(a.num)+" ")])}}],null,!1,2872827810)})],1)],1):t._e()},n=[],s=(o("d3b7"),o("159b"),o("d81d"),o("4de4"),o("498a"),o("a2f8")),i=o("5bb2"),c=o("9686"),r=o("b76a"),l=o.n(r),d={components:{componentDesc:s["default"],IconFont:i["a"],draggable:l.a},props:{formContent:{type:[String,Object],default:""}},data:function(){var t=this;return{desc:{title:"优惠券",desc:"最多添加10张优惠券"},labelCol:{span:4},wrapperCol:{span:20},formDataDecorate:"",bgColorOptions:[{value:"#e74c2c",label:"#e74c2c",font_color:"#ffffff"},{value:"#ffe9b7",label:"#ffe9b7",font_color:"#f39343"},{value:"#ffffff",label:"#ffffff",font_color:"#000000",discount_font_color:"#dc4726",dashed_color:"#e0e0e0"},{value:"#000000",label:"#000000",font_color:"#ffffff"},{value:"#e0f4e4",label:"#e0f4e4",font_color:"#4cac5a"}],columns:[{title:this.L("面值"),dataIndex:"discount",key:"discount",scopedSlots:{customRender:"discount"}},{title:this.L("优惠券名称"),dataIndex:"name",key:"name"},{title:this.L("已领取/总共"),dataIndex:"num",key:"num",scopedSlots:{customRender:"num"}}],dataList:[],visible:!1,pagination:{current:1,pageSize:10,total:0,"show-total":function(e){return!!e&&t.L("共 X1 条记录",{X1:e})},"show-size-changer":!0,"show-quick-jumper":!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange},selectedRowKeys:[],keyword:"",dataAllList:[]}},watch:{formContent:{deep:!0,handler:function(t,e){if(t)for(var o in this.formDataDecorate={},t)this.$set(this.formDataDecorate,o,t[o]);else this.formDataDecorate=""}},formDataDecorate:{deep:!0,handler:function(t){this.$emit("updatePageInfo",t)}}},computed:{sourceInfo:function(){return this.$store.state.customPage.sourceInfo}},mounted:function(){if(this.formContent)for(var t in this.formDataDecorate={},this.formContent)this.$set(this.formDataDecorate,t,this.formContent[t]);this.$store.dispatch("updateStyleTypeOptions")},methods:{getLabel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o="";return t.length&&t.forEach((function(t){t.value==e&&(o=t.label)})),o},bgColorOpt:function(t){this.$set(this.formDataDecorate,"bg_color",t.value),this.$set(this.formDataDecorate,"font_color",t.font_color),this.$set(this.formDataDecorate,"discount_font_color",t.discount_font_color||t.font_color),this.$set(this.formDataDecorate,"dashed_color",t.dashed_color||t.font_color)},isShowChange:function(t){this.$set(this.formDataDecorate,"is_show",t.target.checked?1:2)},addBtn:function(){var t=this.formDataDecorate.list||[];t.length&&(this.selectedRowKeys=t.map((function(t){return t.coupon_id}))),this.visible=!0,this.keyword="",this.$set(this.pagination,"current",1),this.$set(this.pagination,"pageSize",10),this.getList()},getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o={source:this.sourceInfo.source,source_id:this.sourceInfo.source_id,keyword:this.keyword,page:this.pagination.current,pageSize:this.pagination.pageSize};this.request(c["a"].getCoupons,o).then((function(o){t.dataList=o.list||[],(!t.dataAllList.length||e)&&o.list&&o.list.length&&(t.dataAllList=o.list),t.$set(t.pagination,"total",parseInt(o.total))}))},onPageChange:function(t,e){this.$set(this.pagination,"current",t)},onPageSizeChange:function(t,e){this.$set(this.pagination,"current",1),this.$set(this.pagination,"pageSize",e)},onSelectChange:function(t){t.length>10?(this.$message.error(this.L("最多可添加10张优惠券")),this.selectedRowKeys=t.filter((function(t,e){if(e<10)return t}))):this.selectedRowKeys=t},inputChange:function(){""===this.keyword.trim()&&0!=this.keyword||(this.$set(this.pagination,"current",1),this.$set(this.pagination,"pageSize",10),this.getList())},handleOk:function(){var t=this,e=[];this.selectedRowKeys.length&&this.dataAllList.length&&this.selectedRowKeys.forEach((function(o){t.dataAllList.forEach((function(t){o==t.coupon_id&&e.push(t)}))})),this.$set(this.formDataDecorate,"list",e),this.visible=!1,this.selectedRowKeys=[],this.dataAllList=[]},handleCancel:function(){this.visible=!1,this.selectedRowKeys=[],this.keyword="",this.dataAllList=[]}}},m=d,g=(o("efec0"),o("2877")),f=Object(g["a"])(m,a,n,!1,null,"76990912",null);e["default"]=f.exports},9686:function(t,e,o){"use strict";var a={getMicroPageList:"/common/common.DecoratePage/getMicroPageList",getpersonalDec:"/common/common.DecoratePage/getpersonalDec",delMicroPage:"/common/common.DecoratePage/delMicroPage",setHomePage:"/common/common.DecoratePage/setHomePage",addOrEditpersonalDec:"/common/common.DecoratePage/addOrEditpersonalDec",getNavBottomDec:"/common/common.DecoratePage/getNavBottomDec",addOrEditNavBottom:"/common/common.DecoratePage/addOrEditNavBottom",getSuspendedWindow:"/common/common.DecoratePage/getSuspendedWindow",addOrEditSuspendedWindow:"/common/common.DecoratePage/addOrEditSuspendedWindow",getIndexPage:"/common/common.DecoratePage/getIndexPage",getEditMicoPage:"/common/common.DecoratePage/getEditMicoPage",getCoupons:"/common/common.DecoratePage/getCoupons",getActInfo:"/common/common.DecoratePage/getActInfo",getMallActInfo:"/common/common.DecoratePage/getMallActInfo",getMallGoods:"/common/common.DecoratePage/getMallGoods",getMallGoodsGroup:"/common/common.DecoratePage/getMallGoodsGroup",getShopGoodsGroup:"/common/common.DecoratePage/getShopGoodsGroup",getShopGoods:"/common/common.DecoratePage/getShopGoods",addOrEditMicroPage:"/common/common.DecoratePage/addOrEditMicroPage",getMerchantStoreMsg:"/common/common.DecoratePage/getMerchantStoreMsg",getDiypageModel:"/common/platform.diypage/getDiypageModel",getDiypageDetail:"/common/platform.diypage/getDiypageDetail",getFeedCategoryList:"/common/platform.diypage/getFeedCategoryList",getSearchHotList:"/common/platform.diypage/getSearchHotList",saveDiypage:"/common/platform.diypage/saveDiypage",getMerchantCategoryChildList:"/common/platform.diypage/getMerchantCategoryChildList",getStoreList:"/common/common.DecoratePage/getStore"};e["a"]=a},a2f8:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.content?o("div",{staticClass:"wrap",class:{borderNone:t.borderNone}},[o("div",{staticClass:"title"},[t._v(t._s(t.L(t.content.title)))]),o("div",{staticClass:"desc"},[t._v(t._s(t.L(t.content.desc)))])]):t._e()},n=[],s={props:{content:{type:[String,Object],default:""},borderNone:{type:Boolean,default:!1}}},i=s,c=(o("f0ca"),o("2877")),r=Object(c["a"])(i,a,n,!1,null,"9947987e",null);e["default"]=r.exports},c3d3:function(t,e,o){},d743:function(t,e,o){},efec0:function(t,e,o){"use strict";o("c3d3")},f0ca:function(t,e,o){"use strict";o("d743")}}]);