(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34fd56e3","chunk-2d0dd3b1"],{8102:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{width:1e3,title:t.title,visible:t.visible_director,maskClosable:!1,"confirm-loading":t.confirmLoading},on:{cancel:t.handleCancel,ok:t.handleOk}},[a("a-spin",{attrs:{spinning:t.confirmLoading,height:800}},[a("a-form",{attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"负责人",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-select",{staticStyle:{width:"30%"},attrs:{placeholder:"请选择"},on:{change:t.select_director},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},t._l(t.work_list,(function(e){return a("a-select-option",{key:e},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"负责人手机号",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:10,disabled:"disabled"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"提醒时间",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("span",[t._v("将在每月")]),t._v("   "),a("a-select",{staticStyle:{width:"120px"},attrs:{"default-value":"1"},model:{value:t.day,callback:function(e){t.day=e},expression:"day"}},[a("a-select-option",{attrs:{value:1}},[t._v(" 01 ")]),a("a-select-option",{attrs:{value:2}},[t._v(" 02 ")]),a("a-select-option",{attrs:{value:3}},[t._v(" 03 ")]),a("a-select-option",{attrs:{value:4}},[t._v(" 04 ")]),a("a-select-option",{attrs:{value:5}},[t._v(" 05 ")]),a("a-select-option",{attrs:{value:6}},[t._v(" 06 ")]),a("a-select-option",{attrs:{value:7}},[t._v(" 07 ")]),a("a-select-option",{attrs:{value:8}},[t._v(" 08 ")]),a("a-select-option",{attrs:{value:9}},[t._v(" 09 ")]),a("a-select-option",{attrs:{value:10}},[t._v(" 10 ")]),a("a-select-option",{attrs:{value:11}},[t._v(" 11 ")]),a("a-select-option",{attrs:{value:12}},[t._v(" 12 ")]),a("a-select-option",{attrs:{value:13}},[t._v(" 13 ")]),a("a-select-option",{attrs:{value:14}},[t._v(" 14 ")]),a("a-select-option",{attrs:{value:15}},[t._v(" 15 ")]),a("a-select-option",{attrs:{value:16}},[t._v(" 16 ")]),a("a-select-option",{attrs:{value:17}},[t._v(" 17 ")]),a("a-select-option",{attrs:{value:18}},[t._v(" 18 ")]),a("a-select-option",{attrs:{value:19}},[t._v(" 19 ")]),a("a-select-option",{attrs:{value:20}},[t._v(" 20 ")]),a("a-select-option",{attrs:{value:21}},[t._v(" 21 ")]),a("a-select-option",{attrs:{value:22}},[t._v(" 22 ")]),a("a-select-option",{attrs:{value:23}},[t._v(" 23 ")]),a("a-select-option",{attrs:{value:24}},[t._v(" 24 ")]),a("a-select-option",{attrs:{value:25}},[t._v(" 25 ")]),a("a-select-option",{attrs:{value:26}},[t._v(" 26 ")]),a("a-select-option",{attrs:{value:27}},[t._v(" 27 ")]),a("a-select-option",{attrs:{value:28}},[t._v(" 28 ")]),a("a-select-option",{attrs:{value:29}},[t._v(" 29 ")]),a("a-select-option",{attrs:{value:30}},[t._v(" 30 ")])],1),a("span",[t._v("日")]),a("a-time-picker",{attrs:{format:"HH:mm",value:t.moment(t.dateDay,"HH:mm")},on:{change:t.onChange}}),a("span",[t._v("发送模板消息给工作人员")])],1),a("a-form-item",{attrs:{label:"状态",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-col",{attrs:{span:18}},[a("a-radio-group",{model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("a-radio",{attrs:{value:1}},[t._v("正常")]),a("a-radio",{attrs:{value:2}},[t._v("禁止")])],1)],1)],1)],1)],1)],1)},o=[],s=(a("b0c0"),a("c1df")),n=a.n(s),r=a("a0e0"),l=a("ca00"),c={data:function(){return{visible_director:!1,labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),project_id:0,dateFormat:"YYYY-MM-DD",dateDay:"09:00",day:1,title:"添加负责人",work_list:[],worker_id:"",phone:"",status:1,time:"2021-7-30",name:"",id:0,tokenName:"",sysName:""}},methods:{onChange:function(t,e){null==t&&(e="00:00"),this.dateDay=e,this.$forceUpdate()},select_director:function(t){this.phone=t.phone,this.worker_id=t.wid,this.name=t.name},moment:n.a,add:function(t){var e=Object(l["j"])(location.hash);e?(this.tokenName=e+"_access_token",this.sysName=e):this.sysName="village",this.name="",this.phone="",this.worker_id=0,this.dateDay="09:00",this.day=1,this.status=1,this.title="添加负责人",this.project_id=t,this.getWorkers(),this.visible_director=!0,this.id=0},edit:function(t,e){var a=Object(l["j"])(location.hash);a?(this.tokenName=a+"_access_token",this.sysName=a):this.sysName="village",this.title="编辑负责人",this.project_id=t,this.id=e,this.getWorkers(),this.getWorkerInfo(),this.visible_director=!0},getWorkerInfo:function(){var t=this;this.request(r["a"].getWorkerInfo,{id:this.id,tokenName:this.tokenName}).then((function(e){t.status=e.status,t.name=e.name,t.phone=e.phone,t.worker_id=e.worker_id,t.dateDay=e.dateDay,t.day=e.day}))},getWorkers:function(){var t=this;this.request(r["a"].getWorkers,{tokenName:this.tokenName}).then((function(e){t.work_list=e}))},handleCancel:function(){this.visible_director=!1},handleOk:function(){var t=this;this.id>0?this.request(r["a"].saveMeterDirector,{id:this.id,worker_id:this.worker_id,name:this.name,phone:this.phone,status:this.status,dateDay:this.dateDay,day:this.day,tokenName:this.tokenName}).then((function(e){t.$message.success("修改成功"),t.$emit("getMeterDirectorList"),t.visible_director=!1})):this.request(r["a"].addMeterDirector,{project_id:this.project_id,worker_id:this.worker_id,name:this.name,phone:this.phone,status:this.status,dateDay:this.dateDay,day:this.day,tokenName:this.tokenName}).then((function(e){t.$message.success("添加成功"),t.$emit("getMeterDirectorList"),t.visible_director=!1}))}}},d=c,u=a("2877"),h=Object(u["a"])(d,i,o,!1,null,"41a3f0cc",null);e["default"]=h.exports},"99a6":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-drawer",{attrs:{width:1e3,title:"负责人列表",visible:t.visible,maskClosable:!1,"confirm-loading":t.confirmLoading},on:{close:t.handleCancel}},[a("div",{staticClass:"package-list ant-pro-page-header-wrap-children-content",staticStyle:{margin:"24px 0 0"}},[1==t.role_addmanage?a("a-button",{staticClass:"margin_top_20",attrs:{type:"primary"},on:{click:function(e){return t.$refs.addDirectorModel.add(t.project_id)}}},[t._v(" 添加 ")]):t._e(),a("a-card",{attrs:{bordered:!1}},[a("a-table",{attrs:{columns:t.columns,"data-source":t.list,pagination:t.pagination},on:{change:t.tableChange},scopedSlots:t._u([{key:"action",fn:function(e,i){return a("span",{},[1==t.role_editmanage?a("a",{on:{click:function(e){return t.$refs.addDirectorModel.edit(t.project_id,i.id)}}},[t._v("修改")]):t._e(),a("a-divider",{attrs:{type:"vertical"}}),1==t.role_delmanage?a("a-popconfirm",{staticClass:"ant-dropdown-link",staticStyle:{"margin-left":"10px"},attrs:{title:"确认删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.del_director(i.id)}}},[a("a",[t._v("删除")])]):t._e()],1)}},{key:"status",fn:function(e,i){return a("span",{},[1==i.status?a("span",{staticStyle:{color:"dodgerblue"}},[t._v("正常")]):a("span",{staticStyle:{color:"red"}},[t._v("禁止")])])}}])})],1),a("add-director",{ref:"addDirectorModel",on:{getMeterDirectorList:t.getMeterDirectorList}})],1)])},o=[],s=a("a0e0"),n=a("8102"),r=a("ca00"),l={components:{AddDirector:n["default"]},data:function(){var t=this;return{visible:!1,confirmLoading:!1,list:[],pagination:{current:1,pageSize:10,total:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(t){return"共 ".concat(t," 条")},onShowSizeChange:function(e,a){return t.onTableChange(e,a)},onChange:function(e,a){return t.onTableChange(e,a)}},page:1,project_id:0,tokenName:"",sysName:"",role_addmanage:0,role_delmanage:0,role_editmanage:0}},mounted:function(){var t=Object(r["j"])(location.hash);t?(this.tokenName=t+"_access_token",this.sysName=t):this.sysName="village"},computed:{columns:function(){var t=[{title:"负责人姓名",dataIndex:"name",key:"name"},{title:"负责人手机号",dataIndex:"phone",key:"phone"},{title:"提醒时间",dataIndex:"notice_time_txt",key:"notice_time_txt"},{title:"添加时间",dataIndex:"add_time_txt",key:"add_time_txt"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",key:"action",dataIndex:"",scopedSlots:{customRender:"action"}}];return t}},created:function(){},methods:{del_director:function(t){var e=this;this.request(s["a"].delMeterDirector,{id:t,tokenName:this.tokenName}).then((function(t){e.$message.success("删除成功"),e.getMeterDirectorList()}))},get:function(t){this.project_id=t,this.getMeterDirectorList(),this.visible=!0},getMeterDirectorList:function(){var t=this;this.request(s["a"].getMeterDirectorList,{page:this.page,limit:this.pagination.pageSize,project_id:this.project_id,tokenName:this.tokenName}).then((function(e){console.log("res",e),t.list=e.list,t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,void 0!=e.role_addmanage?(t.role_addmanage=e.role_addmanage,t.role_delmanage=e.role_delmanage,t.role_editmanage=e.role_editmanage):(t.role_addmanage=1,t.role_delmanage=1,t.role_editmanage=1)}))},onTableChange:function(t,e){this.page=t,this.pagination.current=t,this.pagination.pageSize=e,this.getMeterDirectorList(),console.log("onTableChange==>",t,e)},tableChange:function(t){t.current&&t.current>0&&(this.page=t.current,this.getMeterDirectorList())},handleCancel:function(){this.visible=!1}}},c=l,d=a("2877"),u=Object(d["a"])(c,i,o,!1,null,"05c2e845",null);e["default"]=u.exports}}]);