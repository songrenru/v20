(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d923979"],{"3bd8":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-modal",{attrs:{title:t.title,width:1300,footer:null,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel}},[1==t.is_customized_meter_reading?i("div",{staticClass:"search-box",staticStyle:{margin:"0px 0px 10px 20px"}},[i("a-row",{attrs:{gutter:48}},[i("a-col",{attrs:{md:6,sm:24}},[i("label",{staticStyle:{"margin-top":"5px"}},[t._v("预存类型：")]),i("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择预存类型"},model:{value:t.money_type,callback:function(e){t.money_type=e},expression:"money_type"}},[i("a-select-option",{attrs:{value:"0"}},[t._v("全部")]),i("a-select-option",{attrs:{value:"4"}},[t._v("冷水")]),i("a-select-option",{attrs:{value:"3"}},[t._v("热水")]),i("a-select-option",{attrs:{value:"2"}},[t._v("电费")]),i("a-select-option",{attrs:{value:"1"}},[t._v("物业费")])],1)],1),i("a-col",{attrs:{md:2,sm:24}},[i("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.searchList()}}},[t._v(" 查询 ")])],1),1==t.is_customized_meter_reading?i("a-col",{attrs:{md:2,sm:24}},[i("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.excelExportData()}}},[t._v("Excel导出")])],1):t._e()],1)],1):t._e(),i("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination,loading:t.loading,"row-key":function(t){return t.id}},on:{change:t.table_change},scopedSlots:t._u([{key:"money",fn:function(e,a){return i("span",{},[1==a.type?i("div",{staticStyle:{color:"green"}},[t._v(t._s(a.money))]):t._e(),2==a.type?i("div",{staticStyle:{color:"red"}},[t._v(t._s(a.money))]):t._e()])}}])})],1),i("a-modal",{attrs:{title:"导出提示",width:450,visible:t.exportVisible,maskClosable:!1,confirmLoading:t.confirmLoading,footer:null,closable:!1,centered:!0}},[i("div",{staticStyle:{padding:"15px",color:"black","font-size":"16px"}},[t._v(" 正在为您导出数据，你稍等 . . . ")])])],1)},n=[],o=(i("ac1f"),i("841c"),i("a0e0")),s=[{title:"订单编号",dataIndex:"order_no",key:"order_no"},{title:"预存时间",dataIndex:"add_time",key:"add_time"},{title:"金额变更前（元）",dataIndex:"current_money",key:"current_money"},{title:"缴费金额（元）",dataIndex:"money",key:"money",scopedSlots:{customRender:"money"}},{title:"金额变更后（元）",dataIndex:"after_price",key:"after_price"},{title:"备注",dataIndex:"desc",key:"desc"}],r=[],c={name:"balanceList",filters:{},components:{},data:function(){return{reply_content:"",pagination:{current:1,pageSize:10,total:10},search:{uid:"",keyword:"",page:1},form:this.$form.createForm(this),visible:!1,loading:!1,data:r,columns:s,title:"",confirmLoading:!1,is_customized_meter_reading:0,uid:"",money_type:"0",exportVisible:!1}},methods:{List:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.title="余额记录",this.uid=t||0,this.loading=!0,this.exportVisible=!1,this.is_customized_meter_reading=e||0,1==this.is_customized_meter_reading&&(this.columns=[{title:"订单编号",dataIndex:"order_no",key:"order_no"},{title:"预存类型",dataIndex:"money_type_str",key:"money_type_str"},{title:"预存时间",dataIndex:"add_time",key:"add_time"},{title:"金额变更前（元）",dataIndex:"current_money",key:"current_money"},{title:"缴费金额（元）",dataIndex:"money",key:"money",scopedSlots:{customRender:"money"}},{title:"金额变更后（元）",dataIndex:"after_price",key:"after_price"},{title:"备注",dataIndex:"desc",key:"desc"}]),this.getListData()},getListData:function(){var t=this;this.uid>0&&(this.$set(this.pagination,"current",1),this.search["uid"]=this.uid),this.search["page"]=this.pagination.current,this.search["money_type"]=this.money_type,this.request(o["a"].storageUserBalanceRecord,this.search).then((function(e){t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.data=e.list,t.loading=!1,t.confirmLoading=!0,t.visible=!0}))},handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.id="0",t.form=t.$form.createForm(t)}),500)},cancel:function(){},excelExportData:function(){var t=this;this.exportVisible=!0,this.loading=!0,this.confirmLoading=!0,this.search["uid"]=this.uid,this.search["money_type"]=this.money_type,this.request(o["a"].excelExportBalanceRecord,this.search).then((function(e){console.log("res",e),e&&e.url&&(window.location.href=e.url),t.loading=!1,t.exportVisible=!1,t.confirmLoading=!1})).catch((function(e){t.loading=!1,t.exportVisible=!1,t.confirmLoading=!1}))},table_change:function(t){var e=this;console.log("e",t),t.current&&t.current>0&&(e.pagination.current=t.current,e.getListData())},searchList:function(){console.log("search",this.search),this.table_change({current:1,pageSize:10,total:10})},resetList:function(){this.search.keyword="",this.search.page=1,this.table_change({current:1,pageSize:10,total:10})}}},l=c,d=(i("755c"),i("2877")),u=Object(d["a"])(l,a,n,!1,null,null,null);e["default"]=u.exports},"755c":function(t,e,i){"use strict";i("7e3d")},"7e3d":function(t,e,i){}}]);