(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79cfa0f4","chunk-7b3621f8","chunk-370a5052"],{"016e":function(e,t,a){},"048c":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADqUlEQVRoQ+2ZXWwMURTH/2dnW0RKI213+yFKGh+JiGhEREgrCBERIR3xxDOpmX3wqhIvou2uhgdvHq0IEaEhghDxGV9BqiEIa6etSIOmZLtzZKYj6d5u25nuzCyy93XuPef3v+dj791L+McH/eP8+D8FVB/n+ekUqtyKTjqFrr4DpLllb6SdUREIx/gGgAYPnJ3SFNrj1G7oGO8ixnowDmkqvRfXZwgoj/JSifDEqRPb8xlzs0FkXd/CgfBMxEHYYX1/ryk0d1wB4Sg3gGBEwIvxXVNohi3DLRwMl+I0gO0Z8xmNmko3x0whDwV0povQ3LeX3kwkoP4kF30aRJyAbQJ8t6bSAscR0BTyrVPVdfCUgTTiTNgqgDICaNKa6exfK6CmnacNkZnzWwTINAXQlGymc9mil7G72VLIjwiEjvJ0KkYcjM0CZIp0yMkInR8r9fIuoOwIlwSnIA5gkwD5i3XIPRG6MF7d5FXArA6eUczmzm8UIAct+IsTFX3eBNRGuXQwgDgxNgiQA2DImkqXJoI3vudFQE07z0pLiDNjnQD5A4wmTaVOO/B5EVDVymV60Mz5tQLkNwKakgpdsQvvu4DQUa6gIhM+46zFQL+kQ/4coatO4H0VUBHjUAA4A2CNAPmVGXKPStecwvsmoCzKlcGA2W1WC5BfLPjrk4H3RUBNO1enjG4DrBIge61uk3E4cyrE0y5U1cazdcnM+ZUCWI9VsLfsAoejXDvhfcDNo0RlK8/h4W6zQoBMWseD23bgy09wnZTCYwAlAEZdijyJgLFbILNgl4+EZCAhMeTPKt2xA2/MCcf48shjRlBHzacIJf6sd11AKMrzaBi+XoD8qDPkXpXu2oW3BHDGfOFS46qA8nauk4xuAyzLcEr4YHYbhe47gfdVQHUbzzcKloGlAvw7s9so9NApvG8Cqlp5oXU8WCLAv6U0diYj9Ggy8L4IqIzyIh7O+cVCrr4hQE6qZHSQSY9wjL2tgXCMH4jdBoxuCZATKj2dNLm10FMBFTFeEgCeCZBdOiD3KvQ8V3jPU6i2haf+LEWv9SNj+HvFBLlnP71wA95zAaaDKO8G4SCAe9BxWIvQS7fgfRHgJmw2W57WgNfwhQgYO+DHH1vjRbKQQoUI5FjphRTKcQPdX+70QuM+QY4WxxNgPq8O4XWOLjxdLgWxILGPuv848fOZ1Q1hNzWFGkcayvr+ZT63AqVueHTLRhro78tyv/DtAc8tIaKdggCvdtau3d+cjBBPKZkkcgAAAABJRU5ErkJggg=="},"15d81":function(e,t,a){},"22af":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAACgCAYAAADJjBS6AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAT4SURBVHhe7Z2LTuJAAEX3/z9PBIJBAr4Q8REFFUXs5rIMTPSCPDrQruckZ90lMC3TIy22uH+yHBmPx1m73c5qtVp2fHyMJVLbrNPpTLehyDWMZrNpF4rlsdFoZJPJJL8w7u7u7IKwfPb7/fzC6Ha784HPzs6y5+dnLJHaZmH7nZ+f5xfG5eXlfGD93S0ci+vV1RVh4HcJA62EgVbCQCthoJUw0EoYaN1LGL1eL7u9vcUCqZ9MDwYDG4UkjF/ucDgkDPyuXjkIA7+5URgvLy/T6yh0yrVer29lpVKZD1ytVnGPhm2gE2Euhti1w9ABCRfW/D+2Wi0bRHDtMDRQPDCW31W78rXDiF8tRqPR9NIuLJ86FAjbcdUuZe0wwj8klJf44J8wYA5hgIUwwEIYYCEMsBAGWAgDLIQBFsIAC2GAhTDAQhhgIQywEAZYCAMshAEWwgALYYCFMMBCGGA5aBj6/Y9uYWVQE/I/QxhbShiLeSCMSMJYzANhRBLGYh4II5IwFvNAGJGEsZgHwogkjMU85B4GFBfCAAthgIUwwEIYYCEMsBAGWAgDLIQBFsIAC2GAhTDActAwPj8/7cIwjW9vb7OZ/xnC+EUSBloJA62lCQOKC2GAhTDAQhhgIQywEAZYCAMshAEWwgALYYCFMMBCGGA5aBicRNuvnF1FK2GglTDQyvUYsDOEARbCAAthgIUwwEIYYCEMsBAGWAgDLIQBFsIAC2GA5aBhcBJtv3J2Fa2EgVbCQCvXY8DOEAZYCAMshAEWwgALYYCFMMBCGGAhDLAQBlgIAyyEAZaDh+EWhmkcjUazWf8ZwvhFEgZaCQOtpQoDiglhgIUwwEIYYCEMsBAGWAgDLIQBFsIAC2GAhTDAQhhgIYwVuIkos4U5iaZPVx/SyWQye5rb4SaizBYmjNfXV/ugfToej2dPdXPcRJRZwojUOmyLm4gySxhfhM1JEka9Xp/e0O12k6uVcysWC5uTNIx92Wg0ssFgYFdQwubkHob+CDfs01arZVdQwubkHoYGvbi4mN8Y22w2s16vl5vxwqVbQQmbkyQM8XWjBR8eHmb3yId4t7VsdwKbkywMsSwODZYXhJGGpGGI6+vr+R1i84qDMNKQPAyh44Fwp1gNvCuEkYa9hCGWvXJo8F0gjDSsCkMxhK9S8/5VPSY8Xm9GloYhbm5u5neO1e3bQhhpiMPY1fv7+9VhiH6/bx+s3c02EEYa8grj5ORkOt6PYQgV5AbZJg7CSEMcRq1W21htF43x8fExHW+tMIT2TWHBsTr/sQmEkYY4DH0j78raYQgt8OjoaL4CQR3RrgthpOGgYQgttFKpzFciqBVbB8JIw8HDEPoxeViJWL3N+QnCSEMhwhBPT09ZtVqdr0xQ74dXQRhpKEwY4vHxcXpEG1YouCoOwkhDocIQeuVwxxzL4iCMNBQuDKEN7HYrnU5ndo8FhJGGQoYhhsOh3a202+3p/74YIIw0FDYMoTjiDR/UZXwhDsJIQ6HDENqw7pUjxEEYaSh8GEIb18Wha0gJIw2lCEPow0sujljCyI/ShCEUhzvmCBJGfpQqDLEqDsLIj9KFIfThXBeH3sUonK+6X5GAq9XBfZjXPD7ysZcwhFZeVwfFYWAaN/mU/DL2FoZQHPrcqnsymI+6iDsP9hqGeH9/z05PT6eB6BVEX3E3NY+a0zyOLf6RZX8BwtMEUxRorzMAAAAASUVORK5CYII="},3037:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACp0lEQVRoQ+2ZPWgUQRTH/+/iV6GFkOP2Uln4hUnjBwhWRggoIliJ2ggWgoLJrh6k9CwVZTdbaGGhlaKFYGNAEK0EQW00CkGwEW9yHiIoiBr3yZx7cW+zl93LHLc7sNPuzO7/N/95M2/eEjRvpLl+5ABpO9gTBwyXt+EPjmAA98Q4vY2DMmzeKyx6GtcvyfPeADj8BsAwgBlh0kinDxsuF+Gh3nouTFL+vvIL5GyC8GRBNGO00+yG+xLjQc2iw0lmulOfVAGaoggnxQTdXC5E+gBSeQHDSWInCjIbAEBdfEUZVfK6dSIrAPJAulEz6ZReAIxZEDYHNoAzwqLr3UCk6wBjtG0H+xfU+8QE/d/VYmiyALATwJWAzpl5xljDoloSJ1IHkGdG2eHbDBwLCL4rTDqqDcDgJV63YhVehOLhorCoGgeRCQekyEUnOvBQmHRQG4AmhMPnF+KBMSksuqwVQBNCJnxAMenJnJklFDfT2UzmlshckwLlDqjcB5A7IDMPxZY7oHi5zx3Il1C/ltCQw1sKHj5/PEdfgnGvhQOGzS4IZ33hFWHS1RaEHgAOfwCwIap4pQeAzVUQLgQAZud/YVdjkr5pAeDn6tMA9rcgCLhTM+m4NgBDLm/3PDwGsD4QxBUwXi63Ntr3XMiw+TQI19qyj3BppIvibt8B/LvrLRBOBOMhdBlPXJ1OBcCPh3cAtkbmgVl3QIouTfEIMV5rC7CoghAk0cGBlt6Sw48IGAsHddI/NKnFQFsu5PAPAGuiTunwEuvmzEh6z1K+DxSneNOALJP7zQOMuklzUQI2urz6u4dnAHYAeLW2gD3vx+lnUrFR/ZQB5EsHbS6vLOAQ/cb9TxVqLCWo5PBuYhxgwvScSc9VxMuxPQFQFaEyPgdQmb1ejNXegb8pjylP7QRfzgAAAABJRU5ErkJggg=="},3351:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"components-layout-demo-basic"}},[a("a-layout",[a("a-layout",{staticStyle:{padding:"0 20px",background:"#fff"}},[a("a-layout-sider",{staticStyle:{"min-width":"300px"}},[a("div",{style:"margin:10px 5px 5px -3px"},[a("a-input",{staticStyle:{width:"180px",height:"28px"},attrs:{placeholder:"搜索编号/姓名/手机号"},model:{value:e.queryParam.keywords,callback:function(t){e.$set(e.queryParam,"keywords",t)},expression:"queryParam.keywords"}}),a("a-button",{staticClass:"add-goods ant-btn btn_an",attrs:{type:"primary"},on:{click:function(t){return e.search_all()}}},[e._v("搜索")]),a("a-button",{staticClass:"add-goods ant-btn btn_an",on:{click:function(t){return e.resetList()}}},[e._v("重置")])],1),[a("div",{staticClass:"left_tree"},[e.default_selected?a("a-tree",{attrs:{treeData:e.treeData,"default-expand-all":e.defaultExpandAll,"selected-keys":[e.default_selected],defaultExpandedKeys:[e.default_selected]},on:{select:e.onSelect},scopedSlots:e._u([{key:"edit_out",fn:function(t){return[a("div",{staticClass:"tree_name_content"},[a("a-tooltip",[a("span",{staticClass:"node-title tree_name",attrs:{id:"title-item"}},[1*t.type==1?a("img",{staticClass:"icon_press",attrs:{src:"https://hf.pigcms.com/static/images/village_icon_press.png"}}):e._e(),1*t.type==2?a("img",{staticClass:"icon_press",attrs:{src:"https://hf.pigcms.com/static/images/property_icon_press.png"}}):e._e(),e._v(" "+e._s(t.title)+" ")])]),a("div",{staticClass:"right_operation"},[1*t.is_del==1?a("span",{staticClass:"icon-wrap"},[a("a",{on:{click:function(a){return e.delAlert(t.id)}}},[a("a-icon",{attrs:{type:"close"}})],1)]):e._e(),1*t.is_edit==1?a("span",{staticClass:"icon-wrap",staticStyle:{"margin-left":"10px"}},[a("a",{on:{click:function(a){return e.$refs.createModal.edit(t.id,t.title)}}},[a("a-icon",{attrs:{type:"form"}})],1)]):e._e()])],1)]}},{key:"no_edit",fn:function(t){return[a("a-tooltip",{attrs:{title:t.title}},[a("span",{staticClass:"node-title tree_name",attrs:{id:"title-item"}},[1*t.type==1?a("img",{staticClass:"icon_press",attrs:{src:"https://hf.pigcms.com/static/images/village_icon_press.png"}}):e._e(),1*t.type==2?a("img",{staticClass:"icon_press",attrs:{src:"https://hf.pigcms.com/static/images/property_icon_press.png"}}):e._e(),e._v(" "+e._s(t.title)+" ")])])]}}],null,!1,3945695290)}):e._e()],1)]],2),a("div",{staticClass:"line"}),e.treeData&&e.treeData.length>0&&e.workerList?a("a-layout-content",[a("div",{staticStyle:{"margin-top":"10px",width:"100%",height:"40px"}},[a("a-input-group",{staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"space-between"}},[a("label",{staticStyle:{width:"360px","margin-top":"5px","font-size":"20px","font-weight":"bold",display:"flex","align-items":"center","justify-content":"flex-start"}},[a("span",{staticClass:"table_title"},[e._v(e._s(e.selectTitle))]),e._v(" （共"+e._s(e.pagination.total)+"人） ")]),a("label",[1*e.synchronizationBtn.status==1?a("a-button",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"},attrs:{type:"primary"},on:{click:e.synchronizationWx}},[a("img",{staticStyle:{width:"20px",height:"17px","margin-right":"5px"},attrs:{src:e.synchronizationBtn.icon}}),e._v(" 同步企业微信按钮 ")]):e._e()],1)])],1),a("hr",{staticStyle:{color:"#eeeeee",height:"0.5px"}}),a("div",{staticClass:"board-content",staticStyle:{"margin-top":"5px"}},[e.is_org?a("a-button",{staticClass:"add-goods",attrs:{type:"primary"},on:{click:function(t){return e.$refs.createModal.add(e.queryParam.group_id,e.selectTitle)}}},[e._v("添加子组织 ")]):e._e(),e.is_user?a("a-button",{staticClass:"add-goods",attrs:{type:"primary"},on:{click:function(t){return e.$refs.createUserModel.addMember(e.queryParam.group_id,e.selectTitle,e.role_type)}}},[e._v("添加人员")]):e._e(),e.is_del?a("a-button",{staticClass:"add-goods",attrs:{type:"danger"},on:{click:function(t){return e.delete_all()}}},[e._v("批量删除")]):e._e()],1),e.workerList?a("a-table",{attrs:{"row-selection":e.is_del?e.rowSelection:null,columns:e.columns,rowKey:function(e){return e.wid},"data-source":e.workerList,pagination:e.pagination,scroll:{y:this.clientHeight-230},loading:e.loading},on:{change:e.tableChange},scopedSlots:e._u([{key:"action",fn:function(t,i){return a("span",{},[e.data_see?a("a",{on:{click:function(t){return e.$refs.createUserModel.editMember(i.wid,e.queryParam.group_id,1,e.selectTitle,e.role_type)}}},[e._v("查看")]):e._e(),e.data_see&&e.data_edit?a("a-divider",{attrs:{type:"vertical"}}):e._e(),e.data_edit?a("a",{on:{click:function(t){return e.$refs.createUserModel.editMember(i.wid,e.queryParam.group_id,2,e.selectTitle,e.role_type)}}},[e._v("编辑")]):e._e(),e.data_edit&&e.data_del?a("a-divider",{attrs:{type:"vertical"}}):e._e(),e.data_del?a("a-popconfirm",{staticClass:"ant-dropdown-link",staticStyle:{color:"red"},attrs:{title:"确认删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.deleteConfirm(i.wid,e.queryParam.group_id)},cancel:e.cancel}},[a("a",{attrs:{href:"#"}},[e._v("删除")])]):e._e()],1)}},{key:"name",fn:function(t,i){return a("span",{},[a("div",[e._v(e._s(i.name))]),e._l(i.name_type,(function(t,i){return a("span",{key:i},[a("a-tag",{staticClass:"name_label_0516",attrs:{color:t.color,title:t.title}},[e._v(" "+e._s(t.value)+" ")])],1)}))],2)}},{key:"tags",fn:function(t){return a("span",{},e._l(t,(function(t){return a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"#FCBE79"}},[e._v(" "+e._s(t)+" ")])})),1)}}],null,!1,2195961501)}):e._e()],1):a("a-layout-content",[a("div",{staticStyle:{width:"98%"}},[a("div",{staticStyle:{"text-align":"center","margin-top":"15%"}},[a("img",{attrs:{src:e.imgUrl}}),a("p",{staticStyle:{color:"#0a0a0a","font-size":"16px"}},[e._v("您还没有添加任何数据")]),a("p",{staticStyle:{color:"#626262","margin-top":"-50px","font-size":"14px"}},[e._v("您需要添加分类，再添加资产")])]),a("div",{staticStyle:{"text-align":"center","margin-top":"-30px"}},[a("a-button",{staticClass:"add-goods",attrs:{type:"primary"},on:{click:function(t){return e.$refs.createModal.add()}}},[e._v("立即添加")])],1)])])],1),a("child-info",{ref:"createModal",attrs:{height:800,width:1200},on:{ok:e.handleLeftOks}}),a("member-info",{ref:"createUserModel",attrs:{height:800,width:1200},on:{ok:e.handleRightOks}})],1)],1)},o=[],r=a("5530"),n=(a("d81d"),a("ac1f"),a("1276"),a("c740"),a("a434"),a("b0c0"),a("47c8")),s=a("7c9a"),l=a("c1df"),c=a.n(l),d=a("4f2c"),u=a("3971"),m=a("a20d"),p=a("ca00"),h=[],g=[],f=[],y={name:"frameworkList",components:{DragBox:s["a"],childInfo:u["default"],memberInfo:m["default"]},data:function(){return this.cacheData=g.map((function(e){return Object(r["a"])({},e)})),{is_org:!1,is_user:!1,is_del:!1,data_see:!1,data_edit:!1,data_del:!1,id:0,queryParam:{assets_id:"0",num:"",status:"0",time:"",keywords:"",group_id:"0"},columns:[{title:"编号",dataIndex:"job_number",key:"job_number"},{title:"姓名",dataIndex:"name",key:"name",width:120,scopedSlots:{customRender:"name"}},{title:"手机号码",dataIndex:"phone",key:"phone",width:120},{title:"组织名称",dataIndex:"group_name",key:"group_name"},{title:"微信号",dataIndex:"nickname",key:"nickname"},{title:"性别",dataIndex:"gender",key:"gender"},{title:"标签",dataIndex:"label",key:"label",width:"20%",scopedSlots:{customRender:"tags"}},{title:"是否可以开门",dataIndex:"open_door",key:"open_door",width:140},{title:"操作",key:"action",dataIndex:"",width:"20%",scopedSlots:{customRender:"action"}}],data:g,sortList:f,workerList:[],type:"",defaultExpandAll:!0,clientHeight:0,loading:!1,sortLoading:!1,treeData:h,treeDataKey:{},assets_id:0,pagination:{current:1,pageSize:10,total:10},search:{page:1,keywords:""},page:1,dateFormat:"YYYY/MM/DD",start_time:"",end_time:"",workers_id_arr:[],imgUrl:a("22af"),default_selected:"",autoExpandParent:!0,selectTitle:"",tokenName:"",sysName:"",role_type:0,synchronizationBtn:{}}},watch:{$route:{handler:function(){this.queryParam.store_id=this.$route.query.store_id,this.queryParam.sort_id=0,this.getGroupList()},deep:!0}},created:function(){},mounted:function(){var e=this,t=Object(p["i"])(location.hash);t?(this.tokenName=t+"_access_token",this.sysName=t):this.sysName="village",this.clientHeight=window.document.body.clientHeight,window.onresize=function(){e.clientHeight=window.document.body.clientHeight},this.getGroupList()},computed:{hasSelected:function(){return this.selectedRowKeys.length>0},rowSelection:function(){var e=this;return{onChange:function(t,a){console.log("selectedRows: ",a),a!=[]&&(e.workers_id_arr=a)},getCheckboxProps:function(e){return{props:{}}}}}},methods:{moment:c.a,getGroupList:function(){var e=this;this.sortLoading=!0,this.sortList=[],this.request(d["a"].frameworkTissueNav,{tokenName:this.tokenName}).then((function(t){e.sortLoading=!1,e.treeData=t.menu_list,e.treeDataKey=t.menu_list[0],void 0!=t.role_type&&(e.role_type=t.role_type),t&&(e.treeData.length>0&&(e.default_selected=e.treeData[0].key),e.synchronizationBtn=t.button,e.queryParam.group_id=t.menu_list.length>0?t.menu_list[0].id:0,e.selectTitle=t.menu_list.length>0?t.menu_list[0].title:"--",e.defaultExpandAll=!0,e.getworkerList())}))},getworkerList:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=!0,this.queryParam["page"]=this.pagination.current,this.queryParam["tokenName"]=this.tokenName,this.request(d["a"].frameworkTissueUser,this.queryParam).then((function(a){e.workerList=a.list,e.is_org=a.button.is_org,e.is_user=a.button.is_user,e.is_del=a.button.is_del,e.data_see=a.button.data_see,e.data_edit=a.button.data_edit,e.data_del=a.button.data_del,void 0!=a.role_type&&(e.role_type=a.role_type),t&&(e.tabColumn=a.tabs),a.list&&a.list.length>0?(e.pagination.total=a.count?a.count:0,e.pagination.pageSize=a.total_limit?a.total_limit:10):(e.pagination.total=0,e.pagination.pageSize=a.total_limit?a.total_limit:10),e.loading=!1}))},onSelect:function(e,t){if(console.log("345435",e,t,this),t.node.onExpand(),e[0]){var a=e[0].split("-");this.selectTitle=a[a.length-2],this.queryParam.id=a[a.length-1],this.id=this.queryParam.id,this.queryParam.group_id=this.queryParam.id,this.default_selected=e[0],this.queryParam.keywords="",this.getworkerList()}},tableChange:function(e){var t=this;e.current&&e.current>0&&(t.pagination.current=e.current,t.getworkerList())},search_all:function(){""==this.queryParam.keywords?this.$message.warn("请输入搜索内容"):this.tableChange({current:1,pageSize:10,total:10})},resetList:function(){this.queryParam.keywords="",this.queryParam.num="",this.queryParam.status="",this.queryParam.time="",this.start_time="",this.end_time="",this.tableChange({current:1,pageSize:10,total:10})},handleLeftOks:function(){this.getGroupList()},handleRightOks:function(){this.getworkerList()},delAlert:function(e){var t=this;this.$confirm({title:"提示",content:"您确定要删除该组织吗？（会联动删除下级组织和人员数据）",okText:"是",okType:"danger",cancelText:"否",onOk:function(){t.delClassifyNav(e)},onCancel:function(){}})},delClassifyNav:function(e){var t=this;this.loading=!0,this.request(d["a"].frameworkOrganizationDel,{id:e,tokenName:this.tokenName}).then((function(e){t.loading=!1,e?(t.$message.success("操作成功"),t.getGroupList()):t.$message.error("操作失败")}))},onCheck:function(e,t){console.log("onCheck",e,t)},onChange:function(e,t){this.start_time=t[0],this.end_time=t[1],this.queryParam.time=t},cancel:function(){},querys:function(){console.log("search",this.queryParam),this.getworkerList()},deleteConfirm:function(e,t){var a=this;this.loading=!0,this.request(n["a"].workerDel,{wid:[e],group_id:t,tokenName:this.tokenName}).then((function(t){if(a.loading=!1,t.error){if(a.$message.success(t.msg),""!=a.workers_id_arr){var i=a.workers_id_arr.findIndex((function(t){return 1*t.wid==1*e}));-1!=i&&a.workers_id_arr.splice(i,1)}a.getworkerList()}else a.$message.error(t.msg)}))},delete_all:function(){var e=this,t=this;if(""==this.workers_id_arr)return this.$message.warn("请选择删除的数据"),!1;var a=[],i="",o=this.queryParam.group_id;this.workers_id_arr.map((function(t,o){a.push(t.wid),o<e.workers_id_arr.length-1?i+=t.name+"、":i+=t.name})),this.$confirm({title:"提示",content:"确定要删除【"+i+"】这些数据吗？",onOk:function(){t.loading=!0,t.request(n["a"].workerDel,{wid:a,group_id:o,tokenName:t.tokenName}).then((function(e){t.loading=!1,e.error?(t.$message.success(e.msg),t.workers_id_arr="",t.getworkerList()):t.$message.error(e.msg)}))},onCancel:function(){}})},synchronizationWx:function(){var e=this;e.$confirm({title:"提示",content:"确定同步企业微信数据吗？",onOk:function(){e.loading=!0,e.request(n["a"].organizationSynQw,{tokenName:e.tokenName}).then((function(t){e.loading=!1,t.error?e.$message.success(t.msg):e.$message.error(t.msg)}))},onCancel:function(){}})}}},_=y,A=(a("f36c"),a("0c7c")),w=Object(A["a"])(_,i,o,!1,null,"2539bb3d",null);t["default"]=w.exports},3971:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.sort",{initialValue:e.post.sort}],expression:"['post.sort', {initialValue:post.sort}]"}],attrs:{maxLength:10,placeholder:"0，越大越靠前"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.group_type",{initialValue:e.post.group_type,rules:[{required:!0,message:e.L("请选择类型！")}]}],expression:"['post.group_type',{ initialValue: post.group_type, rules: [{ required: true, message: L('请选择类型！') }] }]"}],staticStyle:{width:"345px"},attrs:{placeholder:"请选择类型"},on:{change:e.handleGroupType}},e._l(e.group_type,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("a-col",{attrs:{span:6}})],1),e.is_show_village?a("a-form-item",{attrs:{label:"选择小区",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.village_id",{initialValue:e.post.village_id,rules:[{required:!0,message:e.L("请选择小区！")}]}],expression:"['post.village_id',{ initialValue: post.village_id, rules: [{ required: true, message: L('请选择小区！') }] }]"}],staticStyle:{width:"345px"},attrs:{placeholder:"请选择小区"},on:{change:e.handleVillage}},e._l(e.village_all,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.village_id}},[e._v(" "+e._s(t.village_name)+" ")])})),1)],1),a("a-col",{attrs:{span:6}})],1):e._e(),e.is_show?a("a-form-item",{attrs:{label:"部门类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.department_type",{initialValue:e.post.department_type,rules:[{required:!0,message:e.L("请选择部门类型！")}]}],expression:"['post.department_type',{ initialValue: post.department_type, rules: [{ required: true, message: L('请选择部门类型！') }] }]"}],staticStyle:{width:"345px"},attrs:{placeholder:"请选择部门类型"},on:{change:e.handleDepartment}},e._l(e.department_type,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("a-col",{attrs:{span:6}})],1):e._e(),e.is_show?a("a-form-item",{attrs:{label:"部门名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.name",{initialValue:e.post.name,rules:[{required:!0,message:"请输入部门名称，长度最多8位！"}]}],expression:"['post.name', {initialValue:post.name,rules: [{required: true, message: '请输入部门名称，长度最多8位！'}]}]"}],attrs:{placeholder:"请输入部门名称，长度最多8位",maxLength:8}})],1),a("a-col",{attrs:{span:6}})],1):e._e()],1)],1)],1)},o=[],r=a("47c8"),n=a("4f2c"),s=a("ca00"),l={data:function(){return{title:"新建",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),post:{id:0,fid:0,group_type:void 0,department_type:void 0,sort:0,name:"",village_id:void 0},id:0,fid:0,group_type:[],department_type:[],village_all:[],is_show:!1,is_show_village:!1,tokenName:"",sysName:""}},mounted:function(){var e=Object(s["i"])(location.hash);e?(this.tokenName=e+"_access_token",this.sysName=e):this.sysName="village"},methods:{add:function(e,t){this.title="【"+t+"】添加子组织",this.visible=!0,this.is_show_village=!1,this.post={id:0,fid:e,group_type:void 0,department_type:void 0,sort:0,name:""},this.getGroupParam(e)},getGroupParam:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.request(n["a"].frameworkGroupParam,{group_id:e,type:a,tokenName:this.tokenName}).then((function(e){t.group_type=e.group_type,t.department_type=e.department_type,e.is_show&&(t.post.group_type=e.key),t.is_show=e.is_show}))},handleGroupType:function(e){var t=this;this.request(n["a"].frameworkPropertyVillage,{type:e,tokenName:this.tokenName}).then((function(e){1==e.status?(t.village_all=e.data,t.is_show=!1,t.is_show_village=!0):(t.village_all=[],t.is_show=!0,t.is_show_village=!1)}))},handleDepartment:function(e){},handleVillage:function(e){},edit:function(e,t){this.title="【"+t+"】编辑子组织",this.visible=!0,this.is_show_village=!1,this.post={id:e,fid:e,group_type:void 0,department_type:void 0,sort:0,name:""},this.getGroupParam(e,1),this.getEditInfo()},getEditInfo:function(){var e=this;this.request(n["a"].frameworkOrganizationQuery,{id:this.post.id,tokenName:this.tokenName}).then((function(t){e.post=t.data}))},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){if(t)e.confirmLoading=!1;else{a.post.fid=e.post.fid;var i=r["a"].organizationAdd;e.post.id>0&&(a.post.id=e.post.id,i=r["a"].organizationSub),a.post.tokenName=e.tokenName,e.request(i,a.post).then((function(t){e.post.id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",a)})).catch((function(t){e.confirmLoading=!1}))}}))},handleCancel:function(){this.visible=!1,this.id="0",this.form=this.$form.createForm(this)}}},c=l,d=(a("4ee5"),a("0c7c")),u=Object(d["a"])(c,i,o,!1,null,null,null);t["default"]=u.exports},"47c8":function(e,t,a){"use strict";var i={config:"/community/login.login/config",login:"/community/login.login/check",sendCode:"/community/login.PropertyGuide/sendCode",addInformation:"/community/login.PropertyGuide/addInformation",propertyGuide:"/community/login.PropertyGuide/propertyGuide",completePropertyGuide:"/community/login.PropertyGuide/completePropertyGuide",workerAdd:"/community/common.Framework/workerAdd",workerSub:"/community/common.Framework/workerSub",workerDel:"/community/common.Framework/workerDel",workerQuery:"/community/common.Framework/workerQuery",organizationDel:"/community/common.Framework/organizationDel",organizationAdd:"/community/common.Framework/organizationAdd",organizationSub:"/community/common.Framework/organizationSub",organizationSynQw:"/community/common.Framework/organizationSynQw"};t["a"]=i},"4bfa":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACO0lEQVRoQ+2WT2sTURTFz0mk+A1mih/AzyFuhLppUgVFcKHgwrSdgbootFAKulB0JojoQsGNiwp1Y2k3Ilm46KKbLrpQEKRgM2kLuijoouFKJJmGcULy/gxSeFnm3XPvPef3Xghxyj885fvDGfjfBB0BR8AwAXeFDAM0ljsCxhEaNnAEDAM0ljsCxhEaNnAEDAM0lmsR8CK51gYahyGbxht0G3ixXKbgKAnZUOmpbMCLJSIQANgpAdW9gJ9VBubV+nVZhGC5c1Y+g/Pfa/wyak9lA34s9wA87AygYLtdRnV/hl9HHZit8yKZJ/Gg933hBjqD/FjeArjSHbrVJbGrasKvyxwEj3o6EgvNWd5X6aNMoNc8Y2LzuIzq4TT3Rh0+HkkgRNRXP5cEfDyqPjWtKuivz5j4hBIqyQwPhvX0Y6kBeJrWCWpJyGfDdHnn2gQGkGiM/UJld54/Bi0zHssdAV70zgW43Qr4Smf5v+9QVziIBAUfjscweXCXR/882FhuEXiZ4hfcaIZ8Y7KDFQM5D3vj7E9Uvi3xd0rqidxECa/77u5UM+CqyfLWCOReJ8H75BwmcZVtry7XKThJmphIZrluurx1Azkk3oFYgWAlvfOCi62QH20sX4iBHBMnuwouqP5VGGbU2hvIDsr8xAIFLF8Ygb438RzAJQGmWwHXhqWpc14YAZ1ldDTOgE5qNjWOgM00dXo5Ajqp2dQ4AjbT1OnlCOikZlPjCNhMU6eXI6CTmk2NI2AzTZ1efwBNIpsx5fSC1QAAAABJRU5ErkJggg=="},"4ee5":function(e,t,a){"use strict";a("fac7")},"4f2c":function(e,t,a){"use strict";var i={propertyGetOrderPackage:"/community/property_api.PrivilagePackage/getOrderPackage",propertyGetPackageRoom:"/community/property_api.PrivilagePackage/getPackageRoom",propertyGetPackageRoomList:"/community/property_api.PrivilagePackage/getPackageRoomList",propertyCreateOrder:"/community/property_api.PrivilagePackage/createOrder",propertygetRoomOrderPrice:"/community/property_api.PrivilagePackage/getRoomOrderPrice",propertyCreateRoomOrderNew:"/community/property_api.PrivilagePackage/createRoomOrderNew",propertyGetPayType:"/community/property_api.PrivilagePackage/getPayType",propertyCreateQrCode:"/community/property_api.PrivilagePackage/createQrCode",propertyCreateRoomQrCode:"/community/property_api.PrivilagePackage/createRoomQrCode",propertyQueryOrderPayStatus:"/community/property_api.PrivilagePackage/queryOrderPayStatus",propertyGetRoomList:"/community/property_api.RoomPackage/getRoomList",propertyGetBuyRoom:"/community/property_api.RoomPackage/getBuyRoom",propertyCreateRoomOrder:"/community/property_api.RoomPackage/createRoomOrder",propertyRoomCreateQrCode:"/community/property_api.RoomPackage/createQrCode",propertyRoomQueryOrderPayStatus:"/community/property_api.RoomPackage/queryOrderPayStatus",propertyGetPrivilagePackage:"/community/property_api.BuyPackage/getPrivilagePackage",propertyGetRoomPackage:"/community/property_api.BuyPackage/getRoomPackage",chargeTimeInfo:"/community/property_api.ChargeTime/takeEffectTimeInfo",setChargeTime:"/community/property_api.ChargeTime/takeEffectTimeSet",chargeNumberList:"/community/property_api.ChargeTime/chargeNumberList",chargeNumberInfo:"/community/property_api.ChargeTime/chargeNumberInfo",addChargeNumber:"/community/property_api.ChargeTime/addChargeNumber",editChargeNumber:"/community/property_api.ChargeTime/editChargeNumber",getChargeType:"/community/property_api.ChargeTime/getChargeType",offlinePayList:"/community/property_api.ChargeTime/offlinePayList",offlinePayInfo:"/community/property_api.ChargeTime/offlinePayInfo",addOfflinePay:"/community/property_api.ChargeTime/addOfflinePay",editOfflinePay:"/community/property_api.ChargeTime/editOfflinePay",delOfflinePay:"/community/property_api.ChargeTime/delOfflinePay",getCountFeeList:"/community/property_api.ChargeTime/countVillageFee",villageLogin:"/community/property_api.ChargeTime/village_login",frameworkTissueNav:"/community/common.Framework/getTissueNav",frameworkTissueUser:"/community/common.Framework/getTissueUser",frameworkGroupParam:"/community/common.Framework/getGroupParam",frameworkPropertyVillage:"/community/common.Framework/getPropertyVillage",frameworkOrganizationAdd:"/community/common.Framework/organizationAdd",frameworkOrganizationQuery:"/community/common.Framework/organizationQuery",frameworkOrganizationSub:"/community/common.Framework/organizationSub",frameworkOrganizationDel:"/community/common.Framework/organizationDel",frameworkWorkerAdd:"/community/common.Framework/workerAdd",frameworkWorkerSub:"/community/common.Framework/workerSub",powerRoleList:"/community/property_api.Power/getRoleList",powerRoleDel:"/community/property_api.Power/roleDel"};t["a"]=i},"547d":function(e,t,a){"use strict";a("c8c54")},"6bc4":function(e,t,a){},"7c9a":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"drag-box"},[a("draggable",{staticClass:"list-group",attrs:{list:e.dataList,handle:".handle"},on:{end:function(t){return e.getNewData("drag")}}},e._l(e.dataList,(function(t){return a("div",{key:t.id,staticClass:"box"},[a("drag-item",{attrs:{content:t,draggable:e.draggable,editable:e.editable,show:!0,type:"1"},on:{handleItemClick:e.handleItemClick}}),t.children&&t.children.length?[a("draggable",{staticClass:"list-group",attrs:{list:t.children,handle:".handle"},on:{end:function(t){return e.getNewData("drag")}}},e._l(t.children,(function(i){return a("div",{key:i.id,staticClass:"box"},[a("drag-item",{attrs:{content:i,draggable:e.draggable,editable:e.editable,show:t.open,type:"2"},on:{handleItemClick:e.handleItemClick}}),i.children&&i.children.length?[a("draggable",{staticClass:"list-group",attrs:{list:i.children,handle:".handle"},on:{end:function(t){return e.getNewData("drag")}}},e._l(i.children,(function(o){return a("div",{key:o.id,staticClass:"box"},[a("drag-item",{attrs:{content:o,draggable:e.draggable,editable:e.editable,show:i.open&&t.open,type:"3"},on:{handleItemClick:e.handleItemClick}})],1)})),0)]:e._e()],2)})),0)]:e._e()],2)})),0)],1)},o=[],r=a("b85c"),n=(a("a9e3"),a("d3b7"),a("159b"),a("b76a")),s=a.n(n),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.show?i("div",{staticClass:"handle",class:[e.currentSelected,e.currentClass],on:{click:function(t){return t.stopPropagation(),e.handleClick("click")},mouseenter:e.onMouseOver,mouseleave:e.onMouseOut}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.draggable,expression:"draggable"}],staticClass:"img-container"},[e.showIcon?i("a-tooltip",[i("template",{slot:"title"},[e._v("拖动整行排序")]),i("img",{staticClass:"drag-img",attrs:{src:a("3037")}})],2):e._e()],1),i("div",{staticClass:"title-con"},[i("span",{staticClass:"title"},[e._v(e._s(e.content.title))]),void 0!=e.content.goods_count?i("span",[e._v("（"+e._s(e.content.goods_count)+"）")]):e._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.editable,expression:"editable"}],staticClass:"img-container",on:{click:function(t){return t.stopPropagation(),e.handleClick("edit")}}},[e.showIcon?i("img",{staticClass:"edit-img",attrs:{src:a("048c")}}):e._e()]),e.content.children&&e.content.children.length&&e.showIcon?i("div",{staticClass:"img-container"},[e.content.open?i("img",{attrs:{src:a("bcea")}}):i("img",{attrs:{src:a("4bfa")}})]):e._e(),e.content.children&&e.content.children.length&&!e.showIcon?i("div",{staticClass:"img-container"},[e.content.open?i("img",{attrs:{src:a("eb9e")}}):i("img",{attrs:{src:a("8b11")}})]):e._e()]):e._e()},c=[],d={name:"DragItem",props:{content:{type:Object,default:function(){return{}}},type:{type:[Number,String],default:1},draggable:{type:Boolean,default:!0},editable:{type:Boolean,default:!0},show:{type:Boolean,default:!1}},computed:{currentClass:function(){return 1==this.type?"first-box":2==this.type?"second-box":"third-box"},currentSelected:function(){return 1==this.content.selected?"parentactive":2==this.content.selected?"active":""}},data:function(){return{showIcon:!1}},mounted:function(){},methods:{handleClick:function(e){this.$emit("handleItemClick",{type:e,data:this.content})},onMouseOver:function(){this.showIcon=!0},onMouseOut:function(){this.showIcon=!1}}},u=d,m=(a("547d"),a("0c7c")),p=Object(m["a"])(u,l,c,!1,null,"786f264e",null),h=p.exports,g={name:"DragBox",components:{draggable:s.a,DragItem:h},props:{list:{type:Array,default:function(){return[]}},draggable:{type:Boolean,default:!0},editable:{type:Boolean,default:!0},defaultSelect:{type:Boolean,default:!0},select:{type:[Number,String],default:0}},data:function(){return{dataList:[],selectedId:0,selectedItem:{}}},watch:{defaultSelect:function(e){this.select&&(e?this.defaultSelectFirst():this.initList(this.dataList))},select:function(e){e&&(this.selectedId=e,this.setListSelected(this.dataList,this.selectedId),this.setFather(this.dataList))}},mounted:function(){this.initData()},methods:{initData:function(){this.dataList=JSON.parse(JSON.stringify(this.list)),console.log(this.dataList),this.dataList.length&&(this.initList(this.dataList),console.log(this.dataList),this.select?(this.selectedId=this.select,this.setListSelected(this.dataList,this.selectedId),this.setFather(this.dataList)):this.defaultSelect&&this.defaultSelectFirst())},defaultSelectFirst:function(){var e=this.dataList[0];this.getSelectedId(e),this.selectedItem=e,e.children&&e.children.length&&(e.open=!0,e.children[0].open=!0),this.$set(this.dataList,0,e),this.setListSelected(this.dataList,this.selectedId),this.setFather(this.dataList)},initList:function(e){var t=this;e.forEach((function(e){e.selected=0,e.children&&e.children.length&&(e.open=!1,t.initList(e.children))})),this.dataList=JSON.parse(JSON.stringify(e))},getSelectedId:function(e){e.children&&e.children.length?this.getSelectedId(e.children[0]):this.selectedId=e.id},setListSelected:function(e,t){var a=this;e.forEach((function(e,i){e.id==t?(e.selected=2,a.selectedItem=e):e.selected=0,e.children&&e.children.length&&a.setListSelected(e.children,t)})),this.dataList=JSON.parse(JSON.stringify(e))},setFather:function(e){var t=this.selectedItem.fid;if(0!=t){var a,i=Object(r["a"])(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o.id==t)return this.selectedItem=o,void(o.selected=1);if(o.children&&o.children.length){var n=this.getParentId(o.children,t);n&&(this.selectedItem=n,this.setFather(this.dataList))}}}catch(s){i.e(s)}finally{i.f()}}},getParentId:function(e,t){var a,i=Object(r["a"])(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o.id==t)return o.selected=1,o}}catch(n){i.e(n)}finally{i.f()}},setMenuOpen:function(e){var t=0,a={};0==e.fid?this.dataList.forEach((function(i,o){e.id==i.id&&(e.open=!e.open,t=o,a=i)})):this.dataList.forEach((function(i,o){if(e.fid==i.id){var n,s=Object(r["a"])(i.children);try{for(s.s();!(n=s.n()).done;){var l=n.value;l.id==e.id&&(l.open=!l.open)}}catch(c){s.e(c)}finally{s.f()}t=o,a=i}})),this.$set(this.dataList,t,a)},handleItemClick:function(e){var t=e.type,a=e.data;"click"==t&&(a.children&&a.children.length?this.setMenuOpen(a):(this.setListSelected(this.dataList,a.id),this.setFather(this.dataList))),this.getNewData(t,JSON.parse(JSON.stringify(a)))},getNewData:function(e,t){var a=JSON.parse(JSON.stringify(this.dataList));if(a.length){var i,o=Object(r["a"])(a);try{for(o.s();!(i=o.n()).done;){var n=i.value;delete n.selected,delete n.open}}catch(s){o.e(s)}finally{o.f()}"drag"==e?this.$emit("handleChange",{type:e,data:a}):(delete t.selected,delete t.open,"edit"==e&&this.$emit("handleChange",{type:e,data:t}),"click"!=e||t.children&&0!=t.children.length||this.$emit("handleChange",{type:e,data:t}))}else console.log("数据出错了")}}},f=g,y=(a("f431"),Object(m["a"])(f,i,o,!1,null,"6774c60e",null));t["a"]=y.exports},"8b11":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACQklEQVRoQ+2Wv2uTQRjHnyfZ8z9kcr+7f0BcBF2a1EERHBRcKnSog6CL0A6KdCiig4KLQw26KLqIvINDCc/diwQDFlwc6tDBpUMI9B55pSnHS0JyP4IULlPI3fd7z/f7uTcJwhl/4RmfH3KA/00wE8gEIhvIVyiywGh5JhBdYaRBJhBZYLQ8E4iuMNIgE4gsMFoeREApdZWZC6317+gJTgyEEJcbjcYRERU+nt4BlFLbzLwOAN8RsUtEP3wOnLZXSvkAAB5Wa81m81y/399f1NM7gBDiLiI+OjngGwB0tdY/Fz2wvk9KeQ8AtiafLz1AdZCU8g0AXKneIyIxcxXil28IKeUGADye6BDxPhFt+vh4E5iYuyEAYM9a2y3L8mDRw4UQ64i47ezf0Fo/WVR/GtpX4O6vhfhqre2UZXk4z1MptcbMO5N9zLxmjHk6TzdtPZjADBLFeDzuDAaDP7OGUUrdZubnzrW5RUQvQ4b/d4VDhbNIMPPn0Wi0MhwOj+reSqmbzPzCaf66MeZ1zAxJAtQfbGb+1Gq1OkVRjBxSNwDgldP8KhG9jRk+GYFp1wkR37fb7ZVer3cspbwGAKdNI+IlIvoYO3zyAHUSiPjOWruLiLvOtblgjPmSYvilBKiHcAdFxPO+fxXmBU32DNQPqn3FVj94yYdfGgHnmXgGABeZ+Y4x5sO8NkPWl0YgZJgQTQ4Q0lpKTSaQss0Qr0wgpLWUmkwgZZshXplASGspNZlAyjZDvDKBkNZSajKBlG2GeP0F2Ou2MQxMJhwAAAAASUVORK5CYII="},a20d:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal_container"},[a("a-modal",{attrs:{title:e.title,width:1e3,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form-model",{ref:"ruleForm",staticClass:"div_box",attrs:{model:e.detail,labelCol:e.labelCol,wrapperCol:e.wrapperCol,rules:e.rules}},[a("a-form-model-item",{attrs:{label:"编号",prop:"job_number"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入工号"},model:{value:e.detail.job_number,callback:function(t){e.$set(e.detail,"job_number",t)},expression:"detail.job_number"}})],1),a("a-form-model-item",{attrs:{label:"姓名",prop:"work_name"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入姓名"},model:{value:e.detail.work_name,callback:function(t){e.$set(e.detail,"work_name",t)},expression:"detail.work_name"}})],1),a("a-form-model-item",{attrs:{label:"性别",prop:"gender"}},[a("a-radio-group",{model:{value:e.detail.gender,callback:function(t){e.$set(e.detail,"gender",t)},expression:"detail.gender"}},[a("a-radio",{attrs:{value:1}},[e._v("男")]),a("a-radio",{attrs:{value:2}},[e._v("女")])],1)],1),a("a-form-model-item",{attrs:{label:"手机号码",prop:"phone",extra:"此手机号需与注册的手机号一致,才能开门成功"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入手机号码"},on:{change:e.phoneBlur},model:{value:e.detail.phone,callback:function(t){e.$set(e.detail,"phone",t)},expression:"detail.phone"}})],1),a("a-form-model-item",{attrs:{label:"身份证号",prop:"id_card",extra:"填写后该用户可通过身份证进入门禁"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入身份证号"},model:{value:e.detail.id_card,callback:function(t){e.$set(e.detail,"id_card",t)},expression:"detail.id_card"}})],1),a("a-form-model-item",{attrs:{label:"IC卡",prop:"ic_card",extra:"填写后该用户可通过IC卡进入门禁"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入IC卡"},model:{value:e.detail.ic_card,callback:function(t){e.$set(e.detail,"ic_card",t)},expression:"detail.ic_card"}})],1),2==e.role_type?a("a-form-model-item",{attrs:{label:"小区管理人员身份",prop:"is_worker_admin",extra:"选择“否”时，有小区工作人员身份可登录；选择“是”时，有小区工作人员和小区管理人员身份可登录"}},[a("a-radio-group",{staticStyle:{"margin-left":"10px"},model:{value:e.detail.is_worker_admin,callback:function(t){e.$set(e.detail,"is_worker_admin",t)},expression:"detail.is_worker_admin"}},[a("a-radio",{attrs:{value:1}},[e._v("是")]),a("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1):e._e(),a("a-form-model-item",{attrs:{label:"是否可以开门",prop:"open_door"}},[a("a-radio-group",{model:{value:e.detail.open_door,callback:function(t){e.$set(e.detail,"open_door",t)},expression:"detail.open_door"}},[a("a-radio",{attrs:{value:1}},[e._v("是")]),a("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1),a("a-form-model-item",{attrs:{label:"入职时间",prop:"job_create_time"}},[e.detail.job_create_time?a("a-date-picker",{attrs:{disabled:e.is_edit,placeholder:"请选择入职时间",value:e.moment(e.detail.job_create_time,e.dateFormat),format:e.dateFormat},on:{change:e.onChange}}):a("a-date-picker",{attrs:{disabled:e.is_edit,placeholder:"请选择入职时间"},on:{change:e.onChange}})],1),a("a-form-model-item",{attrs:{label:"账号",prop:"account"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入登录账号"},on:{change:e.accountFoucs},model:{value:e.detail.account,callback:function(t){e.$set(e.detail,"account",t)},expression:"detail.account"}})],1),"人员添加"==e.title?a("a-form-model-item",{attrs:{label:"密码",prop:"password",extra:"如果不填写密码或为空，则默认密码 123abc"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入登录密码"},model:{value:e.detail.password,callback:function(t){e.$set(e.detail,"password",t)},expression:"detail.password"}})],1):a("a-form-model-item",{attrs:{label:"密码",prop:"password",extra:"如果不填写密码或为空，则密码不做修改"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入登录密码"},model:{value:e.detail.password,callback:function(t){e.$set(e.detail,"password",t)},expression:"detail.password"}})],1),a("a-form-model-item",{attrs:{label:"备注",prop:"remarks"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入内容"},model:{value:e.detail.remarks,callback:function(t){e.$set(e.detail,"remarks",t)},expression:"detail.remarks"}})],1),"人员添加"!=e.title?a("a-form-model-item",{attrs:{label:"是否同步企微"}},[a("a-input",{attrs:{disabled:!0},model:{value:e.detail.qy_txt,callback:function(t){e.$set(e.detail,"qy_txt",t)},expression:"detail.qy_txt"}})],1):e._e(),"人员添加"!=e.title?a("a-form-model-item",{attrs:{label:"企微同步时间"}},[a("a-input",{attrs:{disabled:!0},model:{value:e.detail.qy_time,callback:function(t){e.$set(e.detail,"qy_time",t)},expression:"detail.qy_time"}})],1):e._e(),1*e.uploadFace.status==1?a("a-form-model-item",{attrs:{label:"上传人脸"}},[a("a-button",{attrs:{type:"primary"},on:{click:e.uploadPeopleface}},[e._v("上传人脸")])],1):e._e()],1)],1)],1),a("a-modal",{attrs:{title:e.title,width:800,visible:e.lookVisiable,maskClosable:!1,footer:null},on:{cancel:e.handleLookCancel}},[a("div",{staticClass:"look_content"},e._l(e.propsList,(function(t,i){return a("div",{key:i,staticClass:"look_item"},[a("div",{staticClass:"item_title"},[e._v(e._s(t.name)+":")]),1==t.type&&t.value?a("div",e._l(t.value,(function(t){return a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"#FCBE79"}},[e._v(" "+e._s(t))])})),1):a("div",{staticClass:"item_value"},[e._v(e._s(t.value?t.value:"暂无"))])])})),0)]),a("a-drawer",{attrs:{title:"人脸上传",width:800,visible:e.showUploadface},on:{close:e.handleUploadCancel}},[a("iframe",{attrs:{src:e.uploadFace.url,width:"100%",height:"800px"}})])],1)},o=[],r=(a("ac1f"),a("47c8")),n=(a("0f28"),a("c1df")),s=a.n(n),l=a("ca00"),c={data:function(){return{title:"新建",labelCol:{span:6},wrapperCol:{span:16},lookVisiable:!1,visible:!1,is_edit:!1,confirmLoading:!1,loading:!1,detail:{group_id:null,job_number:"",work_name:"",gender:1,phone:"",id_card:"",ic_card:"",job_create_time:null,open_door:1,account:"",password:"",remarks:"",is_worker_admin:0},dateFormat:"YYYY-MM-DD",is_footer:!0,propsList:[],rules:{work_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],account:[{required:!0,message:"请输入账号",trigger:"blur"}],id_card:[{required:!0,message:"请输入身份证号",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:this.phoneConfirm}]},tokenName:"",uploadFace:{},showUploadface:!1,isBianhua:!0,role_type:0}},mounted:function(){var e=Object(l["i"])(location.hash);e?(this.tokenName=e+"_access_token",this.sysName=e):this.sysName="village"},methods:{moment:s.a,phoneConfirm:function(e,t,a){var i=/^1[3456789]\d{9}$/;i.test(t)?a():a("请输入正确的手机号码")},onChange:function(e,t){this.detail.job_create_time=t},addMember:function(e,t,a){this.role_type=a,this.detail.group_id=e,this.is_edit=!1,this.title="人员添加",this.visible=!0},phoneBlur:function(){"人员添加"==this.title&&this.isBianhua&&(this.detail.account=this.detail.phone)},handleSubmit:function(){var e=this;this.confirmLoading=!0,this.$refs.ruleForm.validate((function(t){if(!t)return e.confirmLoading=!1,!1;e.detail.tokenName=e.tokenName,""==e.detail.password&&(e.detail.password="123abc");var a=r["a"].workerAdd;1*e.detail.wid>0&&(a=r["a"].workerSub),e.request(a,e.detail).then((function(t){e.detail.wid,t.error?e.$message.success(t.msg):e.$message.error(t.msg),e.confirmLoading=!1,t.error&&(e.visible=!1,e.$emit("ok",e.detail),e.clearForm(),e.$refs.ruleForm.resetFields())})).catch((function(t){e.confirmLoading=!1}))}))},clearForm:function(){this.detail={group_id:null,job_number:"",work_name:"",gender:1,phone:"",id_card:"",ic_card:"",job_create_time:null,open_door:1,account:"",password:"",remarks:"",is_worker_admin:0},this.uploadFace={},this.isBianhua=!0},accountFoucs:function(){""==this.detail.account?this.isBianhua=!0:this.isBianhua=!1},handleCancel:function(){this.visible=!1,this.clearForm(),this.$refs.ruleForm.resetFields()},editMember:function(e,t,a,i,o){var n=this;this.role_type=o,this.request(r["a"].workerQuery,{wid:e,group_id:t,source_type:a,tokenName:this.tokenName}).then((function(e){1==a?(n.propsList=e,n.detail.group_id=t,n.is_edit=!0,n.title="【"+n.propsList[1].value+"】查看",n.lookVisiable=!0):(n.detail=e,""!=n.detail.account&&null!=n.detail.account&&0!=n.detail.account.length||(n.detail.account=n.detail.phone),n.uploadFace=e.upload_face,n.detail.group_id=t,n.is_edit=!1,n.title="【"+n.detail.work_name+"】编辑",n.visible=!0)}))},uploadPeopleface:function(){this.showUploadface=!0},handleLookCancel:function(){this.lookVisiable=!1,this.propsList=[]},handleUploadCancel:function(){this.showUploadface=!1}}},d=c,u=(a("e7c7"),a("0c7c")),m=Object(u["a"])(d,i,o,!1,null,null,null);t["default"]=m.exports},bcea:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACBUlEQVRoQ+2Vvy8EQRzF3/coSBQk2KW4CIVCo5DQSCgUFAqFaxQSUShk90QUJH6ERCGySxARjUIi5K7T+0PUbvwHQuIrzi0XjjE3MxHJXHO5/c68eZ/3dvcI//xD/9w/HMBfN+gacA1oJuBuIc0Atbe7BrQj1BRwDWgGqL3dNaAdoaaAa0AzQO3t1hrwYu4nQh7AiQhoQ9vpNwJWAPw9HgPjuuzMKxHSpA0I4wBezBkCLiqYtQJhFMCLeYaA03fzhAwYGQATpWvGIYwBeHscECNOzBNjqpClc1xyjX9XfBbGbUAYAWiLeIUJW2XJT4uAzpLfHetc99BYhBg1DaEN4Ee8DsJaYpYZs/dZ+riNSoOWQ25IPSFPwIhJCC2Az+aJMFcI6Pi7t016m5se65EDMGwKomqAz+YBzIuQDmSvSn+fW8DIgTFoAqIqgC/JAwuFkCKZ+WTeHHFb7duf3IAuhDJAheSXREg7vzWfrGuPOf2M4u3UpwOhBNC6z12pZ9yWPbDL91naVjWfrPci7kwRcgz0lq7tipAWVfSqByCsioA2VQ6rtLY95u5SEz0AFkVIuyqaSgCvwn7EQ6/fIks3Kgf9tNaPuAOEMRHSkaqmMoDqAbbXOwDbCcv0XQOyhGzPXQO2E5bpuwZkCdmeuwZsJyzTdw3IErI9dw3YTlim7xqQJWR7/gIoJ4sxUA2kRAAAAABJRU5ErkJggg=="},c8c54:function(e,t,a){},e7c7:function(e,t,a){"use strict";a("6bc4")},eb9e:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACD0lEQVRoQ+2Vv0pcQRTGz7kLiws2FhZpQohFYGVh984sSSOshUUsUgjrNhaCpLAQQSRFAvlDBIsgWoiEkCZFIBDcLn0eYM48gfsS+wB75II3XGR1Mp4ZRJjbLHf+fPP9vm+4i/DAH3zg/iEB3HeDqYHUgDCBdIWEAYq3pwbEEQoFUgPCAMXbUwPiCIUCqQFhgOLt0RpQSj0HgCEzf7PWfhI7vUEgCoDWepWZ/1TO/E1E6zEgggPkeT5AxF9TzEaBCAqgtd5i5u+leWYeZFk2YOa1q7HgEMEAlFK7AHBSMb9hrf3Z7/dro9FoiIivYkAEAdBav2Pmg8q12SSiH+V7r9ebGY/HBcTL0BBigDzPPyLih4r510T07xqV481mc7bRaAwBYCUkhAhgivltIvp609em1WrN1ev1cwBYDgVxZ4Dr5hFxxxhz6vpUdjqd+SzLCoilEBB3Aphifs8Yc+wyX84rpR4Vf3IA8EIK4Q1w3Twzv7HWfvlf8xWIx4h4zsxaAuEFoJRaAICLitm3RHToa75c3+12n04mk+I6ta/Gjoho30dPAvCeiD77HDZtrdb6GTMXEIsAsE9ERz6aXgCFsNa6V/waY/76HHTb2na7/aRWq60S0ZmvpjeA7wGx1yeA2Am79FMDroRiz6cGYifs0k8NuBKKPZ8aiJ2wSz814Eoo9nxqIHbCLv3UgCuh2POXPbCeMfyLhFcAAAAASUVORK5CYII="},f36c:function(e,t,a){"use strict";a("15d81")},f431:function(e,t,a){"use strict";a("016e")},fac7:function(e,t,a){}}]);