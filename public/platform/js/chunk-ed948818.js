(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed948818"],{9987:function(t,a,i){"use strict";i.r(a);var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10 list"},[i("div",{staticClass:"btn-wrap mt-20"},[i("a-button",{attrs:{type:"primary",disabled:!t.pagination.total},on:{click:function(a){return t.handleRead("",1)}}},[t._v(t._s(t.L("全部已读")))])],1),i("div",{staticClass:"mt-20 list"},[i("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},on:{change:t.listChange}},t._l(t.list,(function(a){return i("a-collapse-panel",{key:a.pigcms_id,class:[{"is-read":1==a.is_read}]},[i("span",{staticClass:"flex-1 text-wrap",attrs:{slot:"header"},slot:"header"},[t._v(t._s(a.title))]),i("span",{staticClass:"cr-gray ml-20 mr-10",attrs:{slot:"extra"},slot:"extra"},[t._v(t._s(a.create_time))]),i("div",{staticClass:"msg-content text-wrap cr-gray "},[t._v(t._s(a.content)),a.pcUrl?i("a",{staticClass:"router-link-exact-active router-link-active ml-20 mr-20",attrs:{href:a.pcUrl}},[t._v(t._s(t.L("前往")))]):t._e()])])})),1)],1),0==t.pagination.total?i("a-empty",{attrs:{description:t.L("暂无消息")}}):t._e(),i("div",{staticClass:"mt-20 pagination-wrap mb-20"},[i("a-pagination",{attrs:{total:t.pagination.total,"show-less-items":"","show-quick-jumper":"",pageSize:t.pagination.pageSize,showTotal:t.pagination.showTotal,hideOnSinglePage:""},on:{change:t.pagination.onChange,showSizeChange:t.pagination.onShowSizeChange},model:{value:t.pagination.current,callback:function(a){t.$set(t.pagination,"current",a)},expression:"pagination.current"}})],1)],1)},e=[],s=(i("d3b7"),i("159b"),i("c740"),i("3c7c")),o={data:function(){return{list:[],pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(t){return"共 ".concat(t," 条记录")}}}},mounted:function(){this.getList()},beforeRouteLeave:function(t,a,i){this.$destroy(),i()},methods:{getList:function(){var t=this,a={page:this.pagination.current,pageSize:this.pagination.pageSize};this.request(s["a"].getNoticeList,a).then((function(a){t.list=a.data||[],t.pagination.total=a.total||0}))},onPageChange:function(t,a){this.$set(this.pagination,"current",t),this.getList()},onPageSizeChange:function(t,a){this.$set(this.pagination,"pageSize",a),this.getList()},listChange:function(t){var a=this;t.length&&this.list.forEach((function(i){1!=i.is_read&&-1!=t.findIndex((function(t){return t==i.pigcms_id}))&&a.handleRead(i.pigcms_id)}))},handleRead:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={id:a,is_all:i};this.request(s["a"].msgRead,n).then((function(n){if(1==i)t.getList();else{var e=t.list.findIndex((function(t){return t.pigcms_id==a}));t.$set(t.list[e],"is_read",1)}}))}}},r=o,c=(i("dc56"),i("0c7c")),l=Object(c["a"])(r,n,e,!1,null,"78ed6da9",null);a["default"]=l.exports},af5f:function(t,a,i){},dc56:function(t,a,i){"use strict";i("af5f")}}]);