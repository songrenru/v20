(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-575c34dd"],{"46ca":function(e,t,i){},6135:function(e,t,i){"use strict";i("46ca")},e6bb:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-modal",{attrs:{title:e.title,width:1e3,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[i("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[i("a-form",{attrs:{form:e.form}},[i("a-form-item",{attrs:{label:"记录标题",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[i("a-col",{attrs:{span:18}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{initialValue:e.detail.title,rules:[{required:!0,message:"请输入记录标题！"}]}],expression:"['title', {initialValue:detail.title,rules: [{required: true, message: '请输入记录标题！'}]}]"}]})],1),i("a-col",{attrs:{span:6}})],1),i("a-form-item",{attrs:{label:"记录内容",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[i("a-col",{attrs:{span:18}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{initialValue:e.detail.content,rules:[{required:!0,message:"请输入记录内容！"}]}],expression:"['content', {initialValue:detail.content,rules: [{required: true, message: '请输入记录内容！'}]}]"}]})],1),i("a-col",{attrs:{span:6}})],1),i("a-form-item",{attrs:{label:"图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[i("a-col",{attrs:{span:18}},[i("a-row",[i("div",[i("a-upload",{staticClass:"avatar-uploader",attrs:{name:"img","list-type":"picture-card","show-upload-list":!1,action:e.upload_url,"before-upload":e.beforeUpload},on:{change:e.handleChange}},[e.img?i("img",{staticClass:"imgname",attrs:{src:e.img,alt:"img"}}):i("div",[i("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),i("div",{staticClass:"ant-upload-text"},[e._v(" 上传 ")])],1)])],1)])],1),i("a-col",{attrs:{span:6}})],1)],1)],1)],1)},n=[],o=i("53ca"),l=i("567c"),s=i("3683");function r(e,t){var i=new FileReader;i.addEventListener("load",(function(){return t(i.result)})),i.readAsDataURL(e)}var c={data:function(){return{title:"添加记录",labelCol:{xs:{span:20},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),detail:{bind_id:0,type:0,content:"",title:"",status:0,img:"",record_id:0},upload_url:"/v20/public/index.php/"+l["a"].uploadMeeting,img:"",isClear:!1,loading:!1}},components:{Editor:s["a"]},mounted:function(){},methods:{change:function(e){console.log(e)},onSelect:function(e,t){console.log("selected",e,t)},onCheck:function(e,t){console.log("onCheck",e,t),this.detail.community=e,this.checkedKeys=e,console.log("community",this.detail.community)},getEditInfo:function(){var e=this;this.request(l["a"].getRecordDetail,{record_id:this.record_id}).then((function(t){e.detail={title:"",content:""},e.checkedKeys=[],"object"==Object(o["a"])(t)&&(e.detail=t,e.img=t.img)}))},add:function(e,t){this.title="添加记录",this.visible=!0,this.bind_id=t,this.type=e,this.img="",this.detail={bind_id:0,type:0,content:"",title:"",status:0,img:""}},edit:function(e){this.visible=!0,this.record_id=e,this.getEditInfo(),this.record_id>0?this.title="查看":this.title="新建"},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,i){var a;t?e.confirmLoading=!1:(i.bind_id=e.bind_id,i.type=e.type,i.img=e.detail.img,i.status=1,console.log(i),a=l["a"].addSpecialGroupsRecord,e.request(a,i).then((function(t){e.$message.success("添加成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",i)}),1500)})).catch((function(t){e.confirmLoading=!1})),console.log("values",i))}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.cat_id="0",e.form=e.$form.createForm(e)}),500)},handleChange:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&(r(e.file.originFileObj,(function(e){t.img=e,t.loading=!1})),1e3===e.file.response.status&&(this.detail.img=e.file.response.data)):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||this.$message.error("You can only upload JPG file!");var i=e.size/1024/1024<2;return i||this.$message.error("Image must smaller than 2MB!"),t&&i}}},d=c,u=(i("6135"),i("2877")),m=Object(u["a"])(d,a,n,!1,null,null,null);t["default"]=m.exports}}]);