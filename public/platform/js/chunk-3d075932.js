(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d075932"],{"0e6b":function(e,t,a){"use strict";a("8676")},"126e":function(e,t,a){"use strict";var r={regionalAgencyList:"/new_marketing/platform.RegionalAgency/regionalAgencyList",findArea:"/new_marketing/platform.RegionalAgency/findArea",findRight:"/new_marketing/platform.RegionalAgency/findRight",findRightEdit:"/new_marketing/platform.RegionalAgency/findRightEdit",addRegionalAgency:"/new_marketing/platform.RegionalAgency/addRegionalAgency",editRegionalAgency:"/new_marketing/platform.RegionalAgency/editRegionalAgency",saveRegionalAgency:"/new_marketing/platform.RegionalAgency/saveRegionalAgency",delRegionalAgency:"/new_marketing/platform.RegionalAgency/delRegionalAgency",reduceWin:"/new_marketing/platform.RegionalAgency/reduceWin",addReduce:"/new_marketing/platform.RegionalAgency/addReduce",getTeamList1:"/new_marketing/platform.RegionalAgency/getTeamList",updatePercent:"/new_marketing/platform.RegionalAgency/updatePercent",getMarketingArtisanList:"/new_marketing/platform.MarketingArtisan/getMarketingArtisanList",getMarketingArtisanCreate:"/new_marketing/platform.MarketingArtisan/getMarketingArtisanCreate",getMarketingArtisanInfo:"/new_marketing/platform.MarketingArtisan/getMarketingArtisanInfo",getMarketingArtisanDir:"/new_marketing/platform.MarketingArtisan/getMarketingArtisanDir",getDirectorList:"/new_marketing/platform.MarketingArtisan/getDirectorList",getMarketingArtisanDel:"/new_marketing/platform.MarketingArtisan/getMarketingArtisanDel",getMarketingDirectorList:"/new_marketing/platform.MarketingDirector/getMarketingDirectorList",getMarketingDirectorCreate:"/new_marketing/platform.MarketingDirector/getMarketingDirectorCreate",getMarketingDirectorInfo:"/new_marketing/platform.MarketingDirector/getMarketingDirectorInfo",getMarketingDirectorDel:"/new_marketing/platform.MarketingDirector/getMarketingDirectorDel",getMarketingDirectorRemove:"/new_marketing/platform.MarketingDirector/getMarketingDirectorRemove",getMarketingDirectorArtisan:"/new_marketing/platform.MarketingDirector/getMarketingDirectorArtisan",getManagerList:"/new_marketing/platform.ServiceManager/serviceManagerList",addManager:"/new_marketing/platform.ServiceManager/addServiceManager",editManager:"/new_marketing/platform.ServiceManager/saveServiceManager",delNoTeamManager:"/new_marketing/platform.ServiceManager/doDelManager",getTeamMemberList:"/new_marketing/platform.ServiceManager/getTeamPerson",upgradeManager:"/new_marketing/platform.ServiceManager/doUpLevel",deleteManager:"/new_marketing/platform.ServiceManager/doDelServiceManager",demoteManager:"/new_marketing/platform.ServiceManager/doDownLevel",getAreaList:"/new_marketing/platform.Region/regionList",getClassifyPriceList:"/new_marketing/platform.Region/classPriceList",saveAreaPriceForm:"/new_marketing/platform.Region/addRegion",saveClassifyPriceForm:"/new_marketing/platform.Region/addClassPrice",deleteAreaPriceForm:"/new_marketing/platform.Region/delRegion",getAreaMealList:"/new_marketing/platform.MarketingPackage/getAreaSearchList",saveAreaMealForm:"/new_marketing/platform.MarketingPackage/editAreaPost",saveAreaMealStatus:"/new_marketing/platform.MarketingPackage/setAreaStatus",getStoreTypeList:"/new_marketing/platform.MarketingPackage/getStoreTypeList",addMeal:"/new_marketing/platform.MarketingPackage/add",getMealList:"/new_marketing/platform.MarketingPackage/getSearchList",deleteMeal:"/new_marketing/platform.MarketingPackage/del",editMeal:"/new_marketing/platform.MarketingPackage/editPost",getCommissionSearchData:"/new_marketing/platform.MarketingPersonSettle/getSearchData",getCommissionList:"/new_marketing/platform.MarketingPersonSettle/getSearchList",teamManagementList:"/new_marketing/platform.TeamManagement/teamManagementList",teamPerformance:"/new_marketing/platform.TeamManagement/teamPerformance",serviceManagerList:"/new_marketing/platform.TeamManagement/serviceManagerList",serviceManagerNoList:"/new_marketing/platform.TeamManagement/serviceManagerNoList",regionalAgentList:"/new_marketing/platform.TeamManagement/regionalAgentList",artisanList:"/new_marketing/platform.TeamManagement/artisanList",teamManagementAdd:"/new_marketing/platform.TeamManagement/teamManagementAdd",teamManagementBasic:"/new_marketing/platform.TeamManagement/teamManagementBasic",teamManagementReplace:"/new_marketing/platform.TeamManagement/teamManagementReplace",teamManagementUpgrade:"/new_marketing/platform.TeamManagement/teamManagementUpgrade",teamBusinessList:"/new_marketing/platform.TeamManagement/teamBusinessList",teamManagementDel:"/new_marketing/platform.TeamManagement/teamManagementDel",teamManagementTransfer:"/new_marketing/platform.TeamManagement/teamManagementTransfer",teamManagementDiss:"/new_marketing/platform.TeamManagement/teamManagementDiss",teamMemberAdd:"/new_marketing/platform.TeamManagement/teamMemberAdd",teamManagementEdit:"/new_marketing/platform.TeamManagement/teamManagementEdit",teamMemberEdit:"/new_marketing/platform.TeamManagement/teamMemberEdit",teamMemberCode:"/new_marketing/platform.TeamManagement/teamMemberCode",teamManagementSavage:"/new_marketing/platform.TeamManagement/teamManagementSavage",teamManagementMerchantList:"/new_marketing/platform.TeamManagement/teamManagementMerchantList",teamManagementSavageDetail:"/new_marketing/platform.TeamManagement/teamManagementSavageDetail",getCommunityOrderDetail:"/new_marketing/platform.TeamManagement/getCommunityOrderDetail",positionReviewList:"/new_marketing/platform.PositionReview/positionReviewList",getTeamList:"/new_marketing/platform.PositionReview/getTeamList",reviewAgree:"/new_marketing/platform.PositionReview/reviewAgree",reviewDisagree:"/new_marketing/platform.PositionReview/reviewDisagree",getOrderList:"/new_marketing/platform.OrderInfo/orderList",getAreaUidByProvince:"/new_marketing/platform.OrderInfo/getAreaUidByProvince",getTeamIdByAreaUid:"/new_marketing/platform.OrderInfo/getTeamIdByAreaUid",getOrderDetail:"/new_marketing/platform.OrderInfo/getOrderInfo",teamManagementMerchantTransferList:"/new_marketing/platform.TeamManagement/teamManagementMerchantTransferList",teamManagementMerchantTransferCreate:"/new_marketing/platform.TeamManagement/teamManagementMerchantTransferCreate",getMerchantList:"/new_marketing/platform.Merchant/getMerchantList",getMerchantStoreList:"/new_marketing/platform.Merchant/getMerchantStoreList",teamMembeInfo:"/new_marketing/platform.TeamManagement/teamMembeInfo",getPropertyList:"/new_marketing/platform.MarketingProperty/getPropertyList",villageTransferBusiness:"/new_marketing/platform.MarketingProperty/transferBusiness",teamMerchantOrderList:"/new_marketing/platform.TeamManagement/teamMerchantOrderList",getHousePropertyList:"/new_marketing/platform.HouseProperty/getHousePropertyList",getHousePropertyDetail:"/new_marketing/platform.HouseProperty/getHousePropertyDetail"};t["a"]=r},"1cec":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"position-review-list",attrs:{bordered:!1,"tab-list":e.tabList,"active-tab-key":e.activeTab},on:{tabChange:e.onTabChange}},[a("a-form-model",e._b({attrs:{model:e.searchForm}},"a-form-model",e.searchFormLayout,!1),[a("a-row",[a("a-col",{attrs:{span:9}},[a("a-form-model-item",{attrs:{label:"申请职位"}},[a("a-select",{attrs:{placeholder:"请选择申请职位"},model:{value:e.searchForm.identity,callback:function(t){e.$set(e.searchForm,"identity",t)},expression:"searchForm.identity"}},[a("a-select-option",{attrs:{value:"1"}},[e._v(" 业务员 ")]),a("a-select-option",{attrs:{value:"2"}},[e._v(" 业务经理 ")]),a("a-select-option",{attrs:{value:"3"}},[e._v(" 区域代理 ")])],1)],1)],1),a("a-col",{attrs:{span:9}},[a("a-form-model-item",{attrs:{label:"人员姓名"}},[a("a-input",{attrs:{placeholder:"请输入人员姓名"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",[a("a-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v(" 搜索 ")]),a("a-button",{staticClass:"ml-10",on:{click:e.reset}},[e._v(" 重置 ")])],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:9}},[a("a-form-model-item",{attrs:{label:"申请时间"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"近7天":[e.moment().subtract("days",6),e.moment()],"近15天":[e.moment().subtract("days",14),e.moment()],"近30天":[e.moment().subtract("days",29),e.moment()]},value:e.time,format:"YYYY-MM-DD"},on:{change:e.onDateRangeChange}})],1)],1),a("a-col",{attrs:{span:9}},[1==e.activeTab?a("a-form-model-item",{attrs:{label:"审核状态"}},[a("a-select",{attrs:{placeholder:"请选择审核状态"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("a-select-option",{attrs:{value:"0"}},[e._v(" 待审核 ")]),a("a-select-option",{attrs:{value:"1"}},[e._v(" 已通过 ")]),a("a-select-option",{attrs:{value:"2"}},[e._v(" 已拒绝 ")])],1)],1):e._e()],1),a("a-col",{attrs:{span:6}})],1)],1),a("a-table",{staticClass:"mt-10",attrs:{columns:e.columns,"row-key":function(e){return e.id},"data-source":e.dataList,pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status_type",fn:function(e,t){return[2==t.status?a("a-badge",{attrs:{color:"#f50",text:e}}):1==t.status?a("a-badge",{attrs:{color:"#2db7f5",text:e}}):a("a-badge",{attrs:{color:"#108ee9",text:e}})]}},{key:"action",fn:function(t,r){return[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.btnClick("check",r)}}},[e._v("查看")]),0==r.status?[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.btnClick("pass",r)}}},[e._v("通过")]),a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.btnClick("refuse",r)}}},[e._v("拒绝")])]:e._e()]}}])}),a("a-modal",{staticClass:"check-modal",attrs:{title:"查看详情",footer:null,centered:""},model:{value:e.checkModalVisible,callback:function(t){e.checkModalVisible=t},expression:"checkModalVisible"}},[a("a-row",{attrs:{gutter:[16,16]}},[a("a-col",{staticClass:"title",attrs:{span:6}},[e._v(" 姓名： ")]),a("a-col",{staticClass:"content",attrs:{span:14}},[e._v(" "+e._s(e.currentRecord.person_name)+" ")])],1),a("a-row",{attrs:{gutter:[16,16]}},[a("a-col",{staticClass:"title",attrs:{span:6}},[e._v(" UID： ")]),a("a-col",{staticClass:"content",attrs:{span:14}},[e._v(" "+e._s(e.currentRecord.uid)+" ")])],1),a("a-row",{attrs:{gutter:[16,16]}},[a("a-col",{staticClass:"title",attrs:{span:6}},[e._v(" 申请理由： ")]),a("a-col",{staticClass:"content",attrs:{span:14}},[e._v(" "+e._s(e.currentRecord.reason)+" ")])],1)],1),a("a-modal",{staticClass:"review-modal",attrs:{title:"审核通过",width:700,centered:"",destroyOnClose:""},on:{ok:e.reviewRecord},model:{value:e.reviewModalVisible,callback:function(t){e.reviewModalVisible=t},expression:"reviewModalVisible"}},[a("a-form-model",e._b({ref:"reviewForm",attrs:{model:e.reviewForm,rules:e.rules}},"a-form-model",e.formLayout,!1),[e.teamList.length?[a("a-form-model-item",{attrs:{label:"选择接手成员",prop:"pid"}},[a("a-select",{attrs:{placeholder:"请选择接手成员"},model:{value:e.reviewForm.pid,callback:function(t){e.$set(e.reviewForm,"pid",t)},expression:"reviewForm.pid"}},e._l(e.teamList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)]:e._e(),3==e.currentRecord.identity?[a("a-form-model-item",{attrs:{label:"选择接手业务经理",prop:"manage_id"}},[a("a-select",{attrs:{placeholder:"请选择接手业务经理"},model:{value:e.reviewForm.manage_id,callback:function(t){e.$set(e.reviewForm,"manage_id",t)},expression:"reviewForm.manage_id"}},e._l(e.manageList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"代理抽成比率",prop:"percent"}},[a("a-input-number",{attrs:{min:0,max:100,placeholder:"请输入"},model:{value:e.reviewForm.percent,callback:function(t){e.$set(e.reviewForm,"percent",t)},expression:"reviewForm.percent"}}),e._v(" % ")],1)]:e._e(),a("a-form-model-item",{attrs:{label:"选择区域",prop:"area"}},[a("a-cascader",{attrs:{options:e.areaList,placeholder:"请选择区域"},model:{value:e.reviewForm.area,callback:function(t){e.$set(e.reviewForm,"area",t)},expression:"reviewForm.area"}})],1),a("a-form-model-item",{attrs:{label:"备注",prop:"agree_reason"}},[a("a-textarea",{attrs:{placeholder:"请输入备注","auto-size":{minRows:3,maxRows:5}},model:{value:e.reviewForm.agree_reason,callback:function(t){e.$set(e.reviewForm,"agree_reason",t)},expression:"reviewForm.agree_reason"}})],1)],2)],1)],1)},n=[],i=a("5530"),o=(a("b64b"),a("c1df")),s=a.n(o),m=a("126e"),g={name:"PositionReviewList",data:function(){return{tabList:l,activeTab:"1",searchForm:{identity:void 0,name:"",status:void 0,start_time:"",end_time:""},time:[],order:0,searchFormLayout:c,formLayout:d,columns:p,loading:!1,dataList:[],pagination:{current:1,pageSize:10,total:0},currentRecord:{},checkModalVisible:!1,reviewModalVisible:!1,reviewForm:{agree_reason:"",area:[],pid:void 0},teamList:[],manageList:[],areaList:[],rules:{}}},created:function(){this.getData()},methods:{moment:s.a,onTabChange:function(e){this.activeTab=e,this.reset()},getData:function(){var e=this;2==this.activeTab&&(this.searchForm.status=2),this.request(m["a"].positionReviewList,Object(i["a"])(Object(i["a"])({},this.searchForm),{},{page:this.pagination.current,pageSize:this.pagination.pageSize,order:this.order})).then((function(t){t&&(t.arr&&(e.$set(e.pagination,"total",t.arr.total),e.dataList=t.arr.data||[]),e.manageList=t.manager_list,e.areaList=t.areaList)}))},handleTableChange:function(e,t,a){var r=e.current;r==this.pagination.current&&(a.order?this.order="ascend"==a.order?2:1:this.order=0,r=1),this.$set(this.pagination,"current",r),this.getData()},onDateRangeChange:function(e,t){this.$set(this,"time",[e[0],e[1]]),this.searchForm.start_time=t[0],this.searchForm.end_time=t[1]},search:function(){this.$set(this.pagination,"current",1),this.getData()},reset:function(){this.$set(this,"searchForm",this.$options.data().searchForm),this.$set(this,"time",[]),this.$set(this.pagination,"current",1),this.getData()},btnClick:function(e,t){var a=this;this.currentRecord=t,"check"==e?this.checkModalVisible=!0:"pass"==e?(this.$set(this,"reviewForm",this.$options.data().reviewForm),this.request(m["a"].getTeamList,{pid:t.pid}).then((function(e){a.teamList=e||[],a.teamList.length&&(a.rules.pid=[{required:!0,message:"请选择接手成员",trigger:"blur"}]),a.rules.area&&delete a.rules.area,3==t.identity&&(a.reviewForm=Object(i["a"])(Object(i["a"])({},a.reviewForm),{},{manage_id:void 0,percent:void 0}),a.rules=Object(i["a"])(Object(i["a"])({},a.rules),{},{manage_id:[{required:!0,message:"请选择接手业务经理",trigger:"blur"}],percent:[{required:!0,message:"请输入代理抽成比率",trigger:"blur"}],area:[{required:!0,message:"请选择区域",trigger:"blur"}]})),a.reviewModalVisible=!0}))):"refuse"==e&&this.$confirm({title:"提示",content:"您确定要拒绝该成员的申请吗？",okText:"确定",okType:"danger",cancelText:"取消",centered:!0,onOk:function(){a.request(m["a"].reviewDisagree,{id:t.id}).then((function(e){a.$message.success("已拒绝该申请~"),a.getData()}))}})},reviewRecord:function(){var e=this;this.$refs.reviewForm.validate((function(t){if(!t)return!1;var a=JSON.parse(JSON.stringify(e.reviewForm));a.id=e.currentRecord.id,a.type=3==e.currentRecord.identity?1:0,a.area.length&&(a.province_id=a.area[0]||"",a.city_id=a.area[1]||"",a.area_id=a.area[2]||""),delete a.area,console.log("reviewRecord",a),e.request(m["a"].reviewAgree,a).then((function(t){e.reviewModalVisible=!1,e.$message.success("审核已通过~"),e.getData()}))}))}}},l=[{key:"1",tab:"审核列表"},{key:"2",tab:"已拒绝列表"}],c={labelCol:{span:4},wrapperCol:{span:18}},d={labelCol:{span:8},wrapperCol:{span:12}},p=[{title:"姓名",dataIndex:"person_name",align:"center"},{title:"当前职位",dataIndex:"now_identity_name",align:"center"},{title:"所属团队",dataIndex:"team_name",align:"center"},{title:"累计（个人/团队）业绩",dataIndex:"total_performance",align:"center"},{title:"申请职位",dataIndex:"identity_name",align:"center"},{title:"申请时间",dataIndex:"add_time",sorter:!0,align:"center"},{title:"审核状态",dataIndex:"status_type",scopedSlots:{customRender:"status_type"},align:"center"},{title:"操作",dataIndex:"id",scopedSlots:{customRender:"action"},align:"center"}],f=g,k=(a("0e6b"),a("0c7c")),u=Object(k["a"])(f,r,n,!1,null,"87b27aa4",null);t["default"]=u.exports},8676:function(e,t,a){}}]);