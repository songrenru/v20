(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-faafbbec"],{"29c1":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{visible:e.visible,title:"身份标签列表",width:"40%"},on:{cancel:e.handleCancel,ok:e.handleOk}},[a("div",{staticStyle:{padding:"20px","background-color":"#fff"}},[a("a-form-model",{attrs:{layout:"inline",model:e.searchForm}},[a("a-form-model-item",[a("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("添加")])],1)],1),a("a-table",{attrs:{rowKey:"id",columns:e.columns,"data-source":e.datalist,pagination:e.pagination,bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,o){return[a("a-input",{staticClass:"sort-input",attrs:{"default-value":t},on:{blur:function(a){return e.handleNameChange(a,t,o)}},model:{value:o.name,callback:function(t){e.$set(o,"name",t)},expression:"record.name"}})]}},{key:"action",fn:function(t,o){return a("span",{},[a("a",{on:{click:function(t){return e.showBindStore(o.id,o.bind_store_id,o.name)}}},[e._v("绑定店铺")]),e._v("  "),a("a-popconfirm",{attrs:{title:"确认删除？","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(t){return e.handleDel(o.id)}}},[a("a",{attrs:{href:"#"}},[e._v("删除")])])],1)}}])}),a("a-modal",{attrs:{title:"添加身份标签",visible:e.addVisible,width:"500px"},on:{cancel:e.setCancel}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:e.setCancel}},[e._v(" 取消 ")]),a("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.addOk}},[e._v(" 确定 ")])],1),a("a-form-model",{attrs:{layout:"horizontal",model:e.addForm,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-model-item",{attrs:{label:"身份名称"}},[a("a-input",{attrs:{placeholder:"身份名称"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1)],1)],2),a("a-modal",{attrs:{title:"绑定店铺",visible:e.bindStoreVisible,width:"500px"},on:{cancel:e.bindStoreCancel}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:e.bindStoreCancel}},[e._v(" 取消 ")]),a("a-button",{attrs:{type:"primary"},on:{click:e.bindStoreOk}},[e._v(" 确定 ")])],1),a("a-form-model",{attrs:{layout:"horizontal",model:e.addForm,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-model-item",{attrs:{label:"身份名称"}},[a("a-input",{attrs:{placeholder:"身份名称",disabled:""},model:{value:e.bindStoreForm.name,callback:function(t){e.$set(e.bindStoreForm,"name",t)},expression:"bindStoreForm.name"}})],1),a("a-form-item",{attrs:{label:"店铺列表"}},[a("a-checkbox-group",{model:{value:e.bindStoreForm.store_ids,callback:function(t){e.$set(e.bindStoreForm,"store_ids",t)},expression:"bindStoreForm.store_ids"}},[a("a-row",[a("a-col",{staticStyle:{"line-height":"40px"},attrs:{span:24}},e._l(e.storeList,(function(t,o){return a("a-checkbox",{attrs:{value:o},on:{change:e.ckeckBindStore}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1)],1)],1)],2)],1)])},r=[],n=a("5530"),i=(a("b0c0"),a("a434"),a("c5bf")),s=[{title:"序号",dataIndex:"id",key:"id"},{title:"身份名称",dataIndex:"name",key:"name",scopedSlots:{customRender:"name"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],l={props:{visible:Boolean,title:String,scanId:null},data:function(){return{datalist:[],dateRange:[],storeList:[],selectStoreList:[],addVisible:!1,bindStoreVisible:!1,addForm:{name:""},bindStoreForm:{label_id:0,name:"",store_ids:[]},labelCol:{span:4},wrapperCol:{span:14},columns:s,searchForm:{},pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(e){return"共 ".concat(e," 条记录")}}}},created:function(){this.getDataList(!1),this.getStoreList()},methods:{getDataList:function(e){var t=this,a=Object(n["a"])({},this.searchForm);!0===e?(a.page=1,this.$set(this.pagination,"current",1)):(a.page=this.pagination.current,this.$set(this.pagination,"current",this.pagination.current)),a.pageSize=this.pagination.pageSize,this.request(i["a"].employLableList,a).then((function(e){t.datalist=e.data,t.$set(t.pagination,"total",e.total)}))},getStoreList:function(){var e=this;this.request(i["a"].getStoreList).then((function(t){e.storeList=t}))},onPageChange:function(e,t){this.$set(this.pagination,"current",e),this.submitForm()},onPageSizeChange:function(e,t){this.$set(this.pagination,"pageSize",t),this.submitForm()},handleOk:function(){this.$emit("handleCancel")},handleCancel:function(){this.$emit("handleCancel")},handleNameChange:function(e,t,a){var o=this,r={id:a.id,name:t};this.request(i["a"].employLableAddOrEdit,r).then((function(e){o.getDataList()}))},handleAdd:function(){this.addVisible=!0},setCancel:function(){this.$set(this.addForm,"name",""),this.addVisible=!1},addOk:function(){var e=this;if(""==this.addForm.name)return this.$message.error("身份名称必填"),!1;this.request(i["a"].employLableAddOrEdit,this.addForm,"POST").then((function(t){e.$message.success("添加成功!",1),setTimeout((function(){e.setCancel(),e.getDataList()}),1e3)}))},handleDel:function(e){var t=this;this.request(i["a"].employLableDel,{id:e},"POST").then((function(e){t.$message.success("删除成功!",1),t.getDataList()}))},bindStoreOk:function(){var e=this;this.request(i["a"].lableBindStore,this.bindStoreForm).then((function(t){e.$message.success("操作成功"),e.bindStoreForm.label_id=0,e.bindStoreForm.store_ids=[],e.bindStoreVisible=!1,e.getDataList()}))},bindStoreCancel:function(){this.bindStoreForm.label_id=0,this.bindStoreForm.store_ids=[],this.bindStoreVisible=!1},showBindStore:function(e,t,a){this.bindStoreVisible=!0,this.bindStoreForm.label_id=e,this.bindStoreForm.store_ids=t,this.bindStoreForm.name=a},ckeckBindStore:function(e){var t=parseInt(e.target.value),a=this.bindStoreForm.store_ids.indexOf(t);e.target.checked&&-1===a&&this.bindStoreForm.store_ids.push(t),e.target.checked||-1===a||this.bindStoreForm.store_ids.splice(a,1)}}},d=l,m=a("2877"),c=Object(m["a"])(d,o,r,!1,null,null,null);t["default"]=c.exports},c5bf:function(e,t,a){"use strict";var o={getCardList:"/employee/merchant.EmployeeCard/getCardList",editCard:"/employee/merchant.EmployeeCard/editCard",saveCard:"/employee/merchant.EmployeeCard/saveCard",getCouponList:"/employee/merchant.EmployeeCard/getCouponList",editCoupon:"/employee/merchant.EmployeeCard/editCoupon",saveCoupon:"/employee/merchant.EmployeeCard/saveCoupon",delCoupon:"/employee/merchant.EmployeeCard/delCoupon",getUserCardList:"/employee/merchant.EmployeeCardUser/getUserCardList",exportUserCardList:"/employee/merchant.EmployeeCardUser/exportUserCardList",editCardUser:"/employee/merchant.EmployeeCardUser/editCardUser",saveCardUser:"/employee/merchant.EmployeeCardUser/saveCardUser",delData:"/employee/merchant.EmployeeCardUser/delData",findUser:"/employee/merchant.EmployeeCardUser/findUser",loadExcel:"/employee/merchant.EmployeeCardUser/loadExcel",orderList:"/employee/merchant.EmployeeCardUser/orderList",cardLogList:"/employee/merchant.EmployeeCard/cardLogList",cardLogStorestaffList:"/employee/storestaff.EmployeeCardOrder/cardLogList",paymentScan:"/employee/storestaff.EmployeePayCode/deductions",cardLogExport:"/employee/merchant.EmployeeCard/export",employLableList:"/employee/merchant.EmployeeCardUser/employLableList",employLableAddOrEdit:"/employee/merchant.EmployeeCardUser/employLableAddOrEdit",employLableDel:"/employee/merchant.EmployeeCardUser/employLableDel",dataStatistics:"/employee/merchant.EmployeeCardLog/dataStatistics",getStoreConsumerList:"/employee/merchant.EmployeeCardLog/getStoreConsumerList",dataRechargeStatistics:"/employee/merchant.EmployeeCardOrder/getEmployeeOrderStatistics",dataRechargeStatisticsExport:"/employee/merchant.EmployeeCardOrder/getEmployeeOrderStatisticsExport",dataRechargeOrderExport:"/employee/merchant.EmployeeCardOrder/getEmployeeOrderExport",paymentMode:"/employee/merchant.EmployeeCardOrder/getPayType",getOrderList:"/employee/merchant.EmployeeCardOrder/getEmployeeOrderList",refundMoney:"/employee/merchant.EmployeeCardOrder/employeeOrderRefund",employeeCouponRefund:"/employee/merchant.EmployeeCardLog/employeeCouponRefund",isOpenUseMoney:"/employee/merchant.EmployeeCard/isOpenUseMoney",getLabelList:"/employee/merchant.EmployeeCardUser/getLabelList",getSendCouponDateList:"/employee/merchant.EmployeeCard/getSendCouponDateList",getCalcDateList:"/employee/merchant.EmployeeCard/getCalcDateList",getStaffDataStatistics:"/employee/storestaff.EmployeeCardLog/dataStatistics",delUserCard:"/employee/merchant.EmployeeCardUser/delUserCard",openUserCard:"/employee/merchant.EmployeeCardUser/openUserCard",closeUserCard:"/employee/merchant.EmployeeCardUser/closeUserCard",getClearScoreList:"/employee/merchant.EmployeeCard/getClearScoreList",staffRefundMoney:"/employee/storestaff.EmployeeCardOrder/employeeOrderRefund",openOrCloseUserCard:"/employee/merchant.EmployeeCardUser/openOrCloseUserCard",getStoreList:"/employee/merchant.EmployeeCardUser/getStoreList",lableBindStore:"/employee/merchant.EmployeeCardUser/lableBindStore"};t["a"]=o}}]);