(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17b4af18","chunk-56a71555","chunk-526708de","chunk-1dd116dc","chunk-e09d083e"],{"0c98":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABFUlEQVQ4T6XTvyvFURjH8dcNfwEGE2WyWFn8iEFKShkNZPIH6I4yyh9gEoNRKSkZyI+F1WJSTAbXX4DSczsn324395SzPufz7jzP8z41/zy1NvkhbGAE86l+jifs4aWaaQWsYh/LuMVHutyLSRxjHYcZUgVMYAbbHbrawhXu4l4G9OENPYUj+cQAGhmwixucFQIWMIXNDLjACt4LAf04wlwGfKE7hacRfbY7MZ/rVGhmMiB6yv2XApqZDDjFWmVtnTqJtR5gMQN2cI+TTslUX8I46hkQ9j2jqxDwjeGwsipSWDhYKNJrtrFV5bAxLIsnPlTWGmsbSy2GrU0LqyZWXx5W1jGK2VS4xCNiVo2/PlPhCH6v/QDddDIRAGtWtQAAAABJRU5ErkJggg=="},"0cca":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("a-modal",{attrs:{title:"选择企业成员",width:850,height:588,visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[i("div",{staticClass:"container"},[i("div",{staticClass:"box_left"},[t.isSearch?i("a-input-search",{staticStyle:{"margin-bottom":"8px"},attrs:{placeholder:"搜索成员"},on:{search:t.onSearch}}):t._e(),i("a-tree",{attrs:{blockNode:t.blockNode,multiple:"","tree-data":t.treeData,"show-icon":"","default-expand-all":"",selectedKeys:t.enterprise_staff_arr},on:{select:t.onSelect}},[i("a-icon",{attrs:{slot:"switcherIcon",type:"down"},slot:"switcherIcon"}),i("a-icon",{attrs:{slot:"cluster",type:"cluster"},slot:"cluster"}),i("a-icon",{attrs:{slot:"user",type:"user"},slot:"user"})],1)],1),i("div",{staticClass:"box_right"},[i("span",[t._v("已选择的成员")]),""==t.enterprise_staff_arr?i("a-empty",{staticClass:"a-empty",attrs:{image:t.simpleImage}}):i("a-list",{attrs:{"item-layout":"horizontal","data-source":t.enterprise_staff_arr},scopedSlots:t._u([{key:"renderItem",fn:function(a,s){return i("a-list-item",{},[i("div",{staticClass:"list_box",staticStyle:{width:"7%"}},[i("img",{attrs:{src:e("694d")}})]),i("div",{staticClass:"list_box",staticStyle:{width:"83%"}},[t._v(t._s(a.split("-")[1]))]),i("div",{staticClass:"list_box",staticStyle:{width:"10%"},on:{click:function(a){return t.delStaff(s)}}},[i("img",{staticStyle:{"margin-right":"5px"},attrs:{src:e("0c98")}})])])}}])})],1)])])},s=[],n=(e("06f4"),e("fc25")),o=(e("4de4"),e("a0e0")),r=e("ca00"),c=[{}],l={data:function(){return{visible:!1,confirmLoading:!1,enterprise_staff_arr:[],simpleImage:n["a"].PRESENTED_IMAGE_SIMPLE,blockNode:!0,treeData:c,tokenName:"",sysName:"",isSearch:!1,isSearchStaff:0}},methods:{onSearch:function(t){var a=this;console.log(t);var e={};this.tokenName&&(e["tokenName"]=this.tokenName),e["name"]=t,this.request(o["a"].getWorker,e).then((function(t){if(""!=t){var e=a.enterprise_staff_arr.indexOf(t);e<0&&a.enterprise_staff_arr.push(t),console.log("0416",a.enterprise_staff_arr)}}))},choose:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.isSearch=!1;var a=Object(r["i"])(location.hash);a?(this.tokenName=a+"_access_token",this.sysName=a):this.sysName="village",this.isSearchStaff=t,this.visible=!0,this.getTissueNav(),this.enterprise_staff_arr=[]},chooseSearch:function(){this.isSearch=!0,this.isSearchStaff=0;var t=Object(r["i"])(location.hash);t?(this.tokenName=t+"_access_token",this.sysName=t):this.sysName="village",this.visible=!0,this.getTissueNav(),this.enterprise_staff_arr=[]},getTissueNav:function(){var t=this,a={};this.tokenName&&(a["tokenName"]=this.tokenName),a["type_"]=1,this.request(o["a"].getTissueNav,a).then((function(a){t.treeData=a}))},onSelect:function(t,a){if(console.log(t),1==this.isSearchStaff&&t.length>1)return this.$message.warning("仅可选择一位成员"),!1;this.enterprise_staff_arr=t},delStaff:function(t){var a=this;console.log("enterprise_staff_arr",this.enterprise_staff_arr),a.enterprise_staff_arr=a.removeByIndex(a.enterprise_staff_arr,t)},removeByIndex:function(t,a){return t.filter((function(t,e){return a!==e}))},handleSubmit:function(){var t=this;t.visible=!1,t.$emit("change",this.enterprise_staff_arr)},handleCancel:function(){this.visible=!1}}},f=l,d=(e("1fe9"),e("2877")),u=Object(d["a"])(f,i,s,!1,null,"729f65e3",null);a["default"]=u.exports},"1fe9":function(t,a,e){"use strict";e("f552")},2273:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABXklEQVQ4T6XTMUjXQRjG8Y9Ti6OD4CIhhCA6hAlJQiGJiwhCoFMNDYEuYdgmbYXiouDgoJNCIIRLKFKgGFQ6GEIEES5Jg6NLm7xwB8cl/oduud/d+96X933e59fkP1fTFe/b8QyduJ3iR/iOZZyWb2rAYyzhF3bxNSX3YhA3MYm1DCkB97CHHYzhoqquGZt4iAHsRzwDWvAD65hqIMsiJnAL5xkwhwe4i78F4G36flTc3cAnfMCLDNhOfYd45fqYDver+xAz9BjKgD94WYqTHqyk/WkFCLFfozUDfmMaG1XibDq/qu7HMY+2DNjCTzyvElfT3GvAAjowkgFvMJxELMd3iLNILMAxzhDxPWYyINx3goMQpsEYQ/B+dEV1pZFCmCg5nBh6lOMMZowv+g4nPsmC11YON75LfX/B51RNH+4gKh3NLiydWFYdrpxBN3pS4BjfEFqdX/czNWj/3/AlpjBAEaEIpmUAAAAASUVORK5CYII="},"22af":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAACgCAYAAADJjBS6AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAT4SURBVHhe7Z2LTuJAAEX3/z9PBIJBAr4Q8REFFUXs5rIMTPSCPDrQruckZ90lMC3TIy22uH+yHBmPx1m73c5qtVp2fHyMJVLbrNPpTLehyDWMZrNpF4rlsdFoZJPJJL8w7u7u7IKwfPb7/fzC6Ha784HPzs6y5+dnLJHaZmH7nZ+f5xfG5eXlfGD93S0ci+vV1RVh4HcJA62EgVbCQCthoJUw0EoYaN1LGL1eL7u9vcUCqZ9MDwYDG4UkjF/ucDgkDPyuXjkIA7+5URgvLy/T6yh0yrVer29lpVKZD1ytVnGPhm2gE2Euhti1w9ABCRfW/D+2Wi0bRHDtMDRQPDCW31W78rXDiF8tRqPR9NIuLJ86FAjbcdUuZe0wwj8klJf44J8wYA5hgIUwwEIYYCEMsBAGWAgDLIQBFsIAC2GAhTDAQhhgIQywEAZYCAMshAEWwgALYYCFMMBCGGA5aBj6/Y9uYWVQE/I/QxhbShiLeSCMSMJYzANhRBLGYh4II5IwFvNAGJGEsZgHwogkjMU85B4GFBfCAAthgIUwwEIYYCEMsBAGWAgDLIQBFsIAC2GAhTDActAwPj8/7cIwjW9vb7OZ/xnC+EUSBloJA62lCQOKC2GAhTDAQhhgIQywEAZYCAMshAEWwgALYYCFMMBCGGA5aBicRNuvnF1FK2GglTDQyvUYsDOEARbCAAthgIUwwEIYYCEMsBAGWAgDLIQBFsIAC2GA5aBhcBJtv3J2Fa2EgVbCQCvXY8DOEAZYCAMshAEWwgALYYCFMMBCGGAhDLAQBlgIAyyEAZaDh+EWhmkcjUazWf8ZwvhFEgZaCQOtpQoDiglhgIUwwEIYYCEMsBAGWAgDLIQBFsIAC2GAhTDAQhhgIYwVuIkos4U5iaZPVx/SyWQye5rb4SaizBYmjNfXV/ugfToej2dPdXPcRJRZwojUOmyLm4gySxhfhM1JEka9Xp/e0O12k6uVcysWC5uTNIx92Wg0ssFgYFdQwubkHob+CDfs01arZVdQwubkHoYGvbi4mN8Y22w2s16vl5vxwqVbQQmbkyQM8XWjBR8eHmb3yId4t7VsdwKbkywMsSwODZYXhJGGpGGI6+vr+R1i84qDMNKQPAyh44Fwp1gNvCuEkYa9hCGWvXJo8F0gjDSsCkMxhK9S8/5VPSY8Xm9GloYhbm5u5neO1e3bQhhpiMPY1fv7+9VhiH6/bx+s3c02EEYa8grj5ORkOt6PYQgV5AbZJg7CSEMcRq1W21htF43x8fExHW+tMIT2TWHBsTr/sQmEkYY4DH0j78raYQgt8OjoaL4CQR3RrgthpOGgYQgttFKpzFciqBVbB8JIw8HDEPoxeViJWL3N+QnCSEMhwhBPT09ZtVqdr0xQ74dXQRhpKEwY4vHxcXpEG1YouCoOwkhDocIQeuVwxxzL4iCMNBQuDKEN7HYrnU5ndo8FhJGGQoYhhsOh3a202+3p/74YIIw0FDYMoTjiDR/UZXwhDsJIQ6HDENqw7pUjxEEYaSh8GEIb18Wha0gJIw2lCEPow0sujljCyI/ShCEUhzvmCBJGfpQqDLEqDsLIj9KFIfThXBeH3sUonK+6X5GAq9XBfZjXPD7ysZcwhFZeVwfFYWAaN/mU/DL2FoZQHPrcqnsymI+6iDsP9hqGeH9/z05PT6eB6BVEX3E3NY+a0zyOLf6RZX8BwtMEUxRorzMAAAAASUVORK5CYII="},"365d":function(t,a,e){},"3dac":function(t,a,e){},"547e":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-modal",{attrs:{title:"选择群聊",width:850,height:588,visible:t.visible},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[e("div",{staticStyle:{"margin-bottom":"15px"}},[e("span",{staticStyle:{color:"#c00e18"}},[t._v("只显示历史上设置过违规提醒的群聊。如曾经设置过某群聊违规提醒，现在该群聊不再设置，那么其历史触发敏感词的监控内容，依然在列表中可见。")])]),e("div",{staticStyle:{"margin-bottom":"15px"}},[e("span",[t._v("全部群聊（ "+t._s(t.count)+" ）：")])]),e("div",{staticClass:"package-list ant-pro-page-header-wrap-children-content",staticStyle:{margin:"0 0 0"}},[e("a-card",{attrs:{bordered:!0}},[e("a-list",{attrs:{"item-layout":"horizontal","data-source":t.list_a,rowKey:t.chat_id},scopedSlots:t._u([{key:"renderItem",fn:function(a,i){return e("a-list-item",{},[e("a-list-item-meta",{attrs:{description:a.avatarData.length}},[e("a",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(a.chat))]),e("a-avatar",{attrs:{slot:"avatar",src:a.avatarData[0]},slot:"avatar"}),e("a-avatar",{attrs:{slot:"avatar",src:a.avatarData[1]},slot:"avatar"})],1),e("a-checkbox",{on:{change:function(e){return t.onChange(e,a)}}})],1)}}])})],1)],1)])},s=[],n=(e("159b"),e("a434"),e("ca00"),e("a0e0")),o={name:"chioceGroupChat",data:function(){return{visible:!1,list_a:[],count:0,group_arr:[],chat_id:0}},mounted:function(){var t=this;t.list_a=[]},computed:{},methods:{tableChange:function(){},handleSubmit:function(){var t=this;t.visible=!1,t.$emit("change",this.group_arr)},handleCancel:function(){this.visible=!1},handleOks:function(){},add:function(){this.visible=!0,this.getGroupChat()},onChange:function(t,a){var e=this;console.log(t.target.checked),console.log(a);var i=a.chat_id+"-"+a.chat+"-"+a.roomid;1==t.target.checked?this.group_arr.push(i):(console.log("obj",a),this.group_arr.forEach((function(t,a){t==i&&e.group_arr.splice(a,1)}))),console.log("group_arr",this.group_arr)},getGroupChat:function(){var t=this;this.request(n["a"].groupChatList).then((function(a){t.list_a=a.list,t.count=a.list.length,console.log("list_a",t.list_a)})).catch((function(a){t.confirmLoading=!1}))},handleCandel:function(){this.visible=!1},cancel1:function(){}}},r=o,c=(e("e92e"),e("2877")),l=Object(c["a"])(r,i,s,!1,null,null,null);a["default"]=l.exports},"572d":function(t,a,e){"use strict";e("3dac")},"64e3":function(t,a,e){},"694d":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA+klEQVQ4T6XTvS5FQRTF8d+Ngl4ioRIK74DiKohaUHkBnwUPcKmFSHyVSgWNRnw0CpR6BVHxChqJTMxJjsk5ZyR2OXuv/6xZmd3yz2o16HswFPuv+KyarQNM4wDDUfSCFVylkCrACO5xjp0o2MAsxvFchlQBttGF9eS2XXRjOQe4xAnOEsAcDtGXAwTxE/YTwCpmMJEDdLCJAXzE4X68x/OtHCD0C8hdHG5XiUOvKsRC/IYyYPAvDgrxMZaSDI6wmELKDkbxgCnc1vzQSdxgDI/pE/ZicPOZ9TjFFxZSwAWuEaw21VoMuTcFhKRDFcHVQX7NNW1jxshP+xt2tSwRr0CjWQAAAABJRU5ErkJggg=="},"77ba":function(t,a,e){"use strict";e("bbf0")},ad06:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("a-modal",{attrs:{title:t.title,width:900,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[i("a-spin",{attrs:{spinning:t.confirmLoading,height:800}},[i("a-form",{attrs:{form:t.form}},[i("a-form-item",{attrs:{label:"员工触发",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[0==t.post_data.id?i("a-col",{attrs:{span:18}},[i("a-button",{staticClass:"add-goods ",staticStyle:{float:"left"},attrs:{type:"btn"},on:{click:function(a){return t.$refs.chooseEnterpriseStaffModal.choose("1")}}},[t._v("选择部门成员")]),i("a-tooltip",{staticStyle:{display:"block",padding:"8px"},attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("监控员工及其业主敏感词内容")])]),i("img",{attrs:{src:e("2273")}})],2)],1):i("a-col",{attrs:{span:18}},[t._v(" "+t._s(t.post_data.staff_name)+" ")]),i("a-col",{attrs:{span:18}},t._l(t.staff_txt,(function(a,e){return i("div",{key:e,staticClass:"label_"},[i("a-tag",{attrs:{color:"#1890ff"}},[t._v(" "+t._s(a.value)+" ")])],1)})),0),i("a-col",{attrs:{span:6}})],1),i("a-form-item",{attrs:{label:"提醒通知成员",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post_data.choice_remind",{initialValue:t.post_data.choice_remind}],expression:"['post_data.choice_remind', {initialValue:post_data.choice_remind}]"}],on:{change:t.onChange}},[i("a-radio",{attrs:{value:1,disabled:t.is_select1}},[t._v(" 对应部门负责人（按照企业微信组织架构） ")]),i("a-radio",{staticClass:"label_2",attrs:{value:2,disabled:t.is_select1},on:{click:function(a){return t.$refs.appointEnterpriseStaffModal.choose("0")}}},[t._v(" 指定成员 ")]),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("员工与员工的业主触发敏感词，系统会立即给相应的成员发消息提醒，提醒该员工或是该员工的业主可能出现违规行为。【不对群起效，只监控单聊】")])]),i("img",{attrs:{src:e("2273")}})],2)],1)],1),t.post_data.id>0?i("a-form-item",{attrs:{label:"状态",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post_data.status",{initialValue:t.post_data.status}],expression:"['post_data.status', {initialValue:post_data.status}]"}],on:{change:t.onChange}},[i("a-radio",{attrs:{value:1}},[t._v(" 开启 ")]),i("a-radio",{attrs:{value:0}},[t._v(" 关闭 ")])],1)],1):t._e(),i("a-form-item",{attrs:{label:"触发敏感词",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-col",{attrs:{span:18}},[i("a-select",{staticStyle:{width:"200px"},attrs:{mode:"multiple",placeholder:"请选择",disabled:t.disabled},on:{change:t.choiceKeys},model:{value:t.post_data.sensitive_info,callback:function(a){t.$set(t.post_data,"sensitive_info",a)},expression:"post_data.sensitive_info"}},t._l(t.sensitive_info,(function(a,e){return i("a-select-option",{key:e,attrs:{value:a.id}},[t._v(" "+t._s(a.name)+" ")])})),1)],1),i("a-col",{attrs:{span:6}}),i("chooseBranch",{ref:"chooseEnterpriseStaffModal",on:{change:t.change_enterprise_staff}}),i("chooseBranch",{ref:"appointEnterpriseStaffModal",on:{change:t.appoint_staff}})],1)],1)],1)],1)},s=[],n=e("53ca"),o=(e("4de4"),e("ac1f"),e("1276"),e("a0e0")),r=e("0cca"),c={components:{chooseBranch:r["default"]},data:function(){return{title:"新建",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),id:0,fid:0,diasabledInput:!0,staff_txt:[],post_data:{id:0,staff_name:"",sensitive_info:[],staff_id:"",choice_remind:1,name:""},sensitive_info:[],is_select1:!1,disabled:!1}},mounted:function(){},methods:{choiceKeys:function(t){this.sensitive_id=t},change_enterprise_staff:function(t){var a=this,e=[];this.staff_id=[],this.staff_txt=[],t.filter((function(t,i){a.staff_id[i]=t.split("-")[0]+"-"+t.split("-")[1],e[i]=t.split("-")[1],a.staff_txt.push({key:t.split("-")[0],value:t.split("-")[1]})}))},appoint_staff:function(t){var a=this;this.appoint_staff_id=[],t.filter((function(t,e){a.appoint_staff_id[e]=t.split("-")[0]}))},onChange:function(t){},add:function(){var t=this;this.title="设置违规员工",this.visible=!0,this.id="0",this.checkedKeys=[],this.staff_txt=[],this.is_select1=!1,this.disabled=!1,this.post_data={id:0,staff_name:"",sort:0,sensitive_info:[],des:""},this.post_data.choice_remind=1,this.request(o["a"].choiceSensitive).then((function(a){t.sensitive_info=a}))},edit:function(t){var a=this;console.log("erererererer",t),this.visible=!0,this.id=t,this.getEditInfo(),this.is_select1=!0,this.staff_txt=[],this.disabled=!0,this.request(o["a"].choiceSensitive).then((function(t){a.sensitive_info=t})).catch((function(t){a.sensitive_info=[]})),this.id>0?this.title="编辑":this.title="添加"},handleSubmit:function(){var t=this,a=this.form.validateFields;this.confirmLoading=!0;var e=this.staff_id,i=this.sensitive_id,s=this.appoint_staff_id;a((function(a,n){if(n["post_data"]["staff_id"]=e,n["post_data"]["sensitive_id"]=i,n["post_data"]["appoint_staff_id"]=s,a)t.confirmLoading=!1;else{n["post_data"]["id"]=t.id,n["post_data"]["fid"]=t.fid;var r=o["a"].addViolationStaff;t.post_data.id>0&&(r=o["a"].subViolationStaff),t.request(r,n.post_data).then((function(a){t.post_data.id>0?t.$message.success("编辑成功"):t.$message.success("添加成功"),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1,console.log(123),t.$emit("ok")}),1500),console.log(345)})).catch((function(a){t.confirmLoading=!1}))}}))},handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.id="0",t.form=t.$form.createForm(t)}),500)},getEditInfo:function(){var t=this;this.request(o["a"].editViolationStaff,{id:this.id}).then((function(a){t.post_data={id:a.id,staff_name:a.staff_name},t.post_data.status=a.status,t.post_data.choice_remind=a.remind_type,t.post_data.sensitive_info=a.sensitive_info,"object"==Object(n["a"])(a.info)&&(t.post_data=a.info)}))}}},l=c,f=(e("77ba"),e("2877")),d=Object(f["a"])(l,i,s,!1,null,null,null);a["default"]=d.exports},b525:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-modal",{attrs:{title:t.title,width:900,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[e("a-spin",{attrs:{spinning:t.confirmLoading,height:800}},[e("a-form",{attrs:{form:t.form}},[e("a-form-item",{attrs:{label:"规则名称",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[0==t.formData.id?e("a-col",[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["rule_name",{rules:[{required:!0,message:"请输入规则名称！"}]}],expression:"['rule_name', {rules: [{required: true, message: '请输入规则名称！'}]}]"}],attrs:{maxLength:20,placeholder:"请输入规则名称,限20字！"}}),e("span",{staticStyle:{color:"red"}},[t._v("(一旦创建，不可修改)")])],1):e("a-col",[t._v(" "+t._s(t.formData.rule_name)+" ")]),e("a-col",{attrs:{span:18}},t._l(t.group_txt,(function(a,i){return e("div",{key:i,staticClass:"label_"},[e("a-tag",{attrs:{color:"#1890ff"}},[t._v(" "+t._s(a.value)+" ")])],1)})),0)],1),e("a-form-item",{attrs:{label:"选择适用业主群",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[0==t.formData.id?e("a-col",{attrs:{span:18}},[e("a-button",{staticClass:"add-goods ",staticStyle:{float:"left"},attrs:{type:"btn"},on:{click:function(a){return t.$refs.chooseGroupChatModal.add()}}},[t._v("选择群聊")])],1):e("a-col",t._l(t.formData.groups,(function(a,i){return e("div",{key:i,staticClass:"label_"},[e("a-tag",{attrs:{color:"#1890ff"}},[t._v(" "+t._s(a)+" ")])],1)})),0)],1),e("a-form-item",{attrs:{label:"设置提醒行为",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-row",[e("a-checkbox-group",{on:{change:t.onChangeAction},model:{value:t.formData.action,callback:function(a){t.$set(t.formData,"action",a)},expression:"formData.action"}},t._l(t.groupAction,(function(a){return e("a-checkbox",{key:a.key,attrs:{value:a.key}},[t._v(" "+t._s(a.value)+" ")])})),1)],1),e("a-col",{attrs:{span:18}},[t.is_sensitive_show?e("a-select",{staticStyle:{width:"200px"},attrs:{mode:"multiple",placeholder:"选择敏感词"},on:{change:t.choiceKeys},model:{value:t.formData.sensitive_id,callback:function(a){t.$set(t.formData,"sensitive_id",a)},expression:"formData.sensitive_id"}},t._l(t.sensitive_info,(function(a,i){return e("a-select-option",{key:i,attrs:{value:a.id}},[t._v(" "+t._s(a.name)+" ")])})),1):t._e()],1)],1),t.formData.id>0?e("a-form-item",{attrs:{label:"状态",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["formData.status",{initialValue:t.formData.status}],expression:"['formData.status', {initialValue:formData.status}]"}],on:{change:t.onChangeStatus}},[e("a-radio",{attrs:{value:1}},[t._v(" 开启 ")]),e("a-radio",{attrs:{value:0}},[t._v(" 关闭 ")])],1)],1):t._e(),0==t.formData.id?e("a-form-item",{attrs:{label:"通知人",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-checkbox-group",{attrs:{"default-value":t.checkbox_value},on:{change:t.onChangeRemind}},[e("a-row",[e("a-col",[e("a-checkbox",{attrs:{value:"1",disabled:!0}},[t._v("群主")]),e("a-checkbox",{attrs:{value:"2"},on:{click:function(a){return t.$refs.appointEnterpriseStaffModal.chooseSearch()}}},[t._v("选择成员")])],1)],1)],1)],1):t._e(),e("chooseBranch",{ref:"appointEnterpriseStaffModal",on:{change:t.appoint_staff}}),e("choose-group-chat",{ref:"chooseGroupChatModal",on:{change:t.change_group_chat}})],1)],1)],1)},s=[],n=(e("4de4"),e("ac1f"),e("1276"),e("a0e0")),o=e("0cca"),r=e("547e"),c={components:{chooseBranch:o["default"],chooseGroupChat:r["default"]},data:function(){return{title:"新建",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),id:0,fid:0,diasabledInput:!0,formData:{id:0,rule_name:"",group_id:[],groupAction:[],sensitive_id:[],staff_type:[],appoint_staff_id:[],groups:[],status:"",action:[]},sensitive_info:[],groupAction:[],is_select1:!1,checkbox_value:[],group_txt:[],is_sensitive_show:!1}},mounted:function(){},methods:{onChangeStatus:function(t){this.formData.status=t.target.value},change_group_chat:function(t){var a=this,e=[];this.group_txt=[],t.filter((function(t,i){e[i]=t.split("-")[0]+"-"+t.split("-")[1],a.group_txt.push({key:t.split("-")[0],value:t.split("-")[1]})})),this.formData.group_id=e},choiceKeys:function(t){this.formData.sensitive_id=t},appoint_staff:function(t){var a=[];t.filter((function(t,e){a[e]=t.split("-")[0]})),this.formData.appoint_staff_id=a},onChangeAction:function(t){this.formData.action=t,t.indexOf(8)>-1?this.is_sensitive_show=!0:(this.is_sensitive_show=!1,this.formData.sensitive_id=[])},onChangeRemind:function(t){this.formData.staff_type=t},add:function(){var t=this;this.title="设置违规群聊",this.visible=!0,this.id="0",this.checkedKeys=[],this.group_txt=[],this.formData.group_id=[],this.is_select1=!1,this.is_sensitive_show=!1,this.formData={id:0,rule_name:"",groupAction:[],sensitive_id:[],staff_type:["1"]},this.checkbox_value=["1"],this.request(n["a"].getGroupAction).then((function(a){t.groupAction=a})),this.request(n["a"].choiceSensitive).then((function(a){t.sensitive_info=a}))},edit:function(t){var a=this;this.visible=!0,this.id=t,this.getEditInfo(),this.is_select1=!0,this.group_txt=[],this.checkbox_value=["1"],this.request(n["a"].getGroupAction).then((function(t){a.groupAction=t})),this.request(n["a"].choiceSensitive).then((function(t){a.sensitive_info=t})),this.id>0?this.title="编辑":this.title="添加"},handleSubmit:function(){var t=this,a=this.form.validateFields;this.confirmLoading=!0,a((function(a,e){if(a)t.confirmLoading=!1;else{var i=n["a"].addViolationGroup;t.formData.id>0?i=n["a"].subViolationGroup:t.formData.rule_name=e["rule_name"],t.request(i,t.formData).then((function(a){t.formData.id>0?t.$message.success("编辑成功"):t.$message.success("添加成功"),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1,t.$emit("ok")}),1500)})).catch((function(a){t.confirmLoading=!1}))}}))},handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.id="0",t.form=t.$form.createForm(t)}),500)},getEditInfo:function(){var t=this;this.request(n["a"].editViolationGroup,{id:this.id}).then((function(a){t.formData.id=a.id,t.formData.rule_name=a.rule_name,t.formData.sensitive_id=a.sensitive_id,t.formData.groups=a.groups,t.formData.status=a.status,t.formData.action=a.action,""!=a.sensitive_id?t.is_sensitive_show=!0:t.is_sensitive_show=!1}))}}},l=c,f=(e("572d"),e("2877")),d=Object(f["a"])(l,i,s,!1,null,null,null);a["default"]=d.exports},bbf0:function(t,a,e){},d52a:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"engine-index-box",attrs:{id:"components-layout-demo-basic"}},[e("a-layout",[t.isshow?e("span",{staticClass:"content-p1"},[t._v("员工及员工的业主触发敏感词，系统会立即给相应的成员发消息提醒，提醒该员工或是该员工的业主可能出现违规行为，不对群起效，只监控单聊。")]):t._e(),t.isshow?t._e():e("span",{staticClass:"content-p1"},[e("p",[t._v("业主在业主群的违规提醒。当业主群中，业主触发所设置的违规行为时，群主或是指定成员会立即收到提醒，有效帮助员工管理客户群。")]),e("p",[t._v("1、若群主不在可见应用成员范围内，会接收不到提醒通知")]),e("p",[t._v("2、若群成员为“外部非联系人”身份时，群主可以看到其违规行为，但不知是谁，用户昵称是“未知”。")])]),e("a-layout",{staticStyle:{background:"#fff"}},[e("a-layout-content",[e("div",{staticClass:"card-container"},[t.channel_code?t._e():e("a-tabs",{staticStyle:{width:"100%"},attrs:{type:"card"},on:{change:t.switchType}},[e("a-tab-pane",{key:"1",attrs:{tab:"员工违规"}},[e("div",{staticStyle:{margin:"10px",width:"1200px"}},[""!=t.send_type_choose_staff?e("a-button",{staticClass:"add-goods ",staticStyle:{float:"left"},attrs:{type:"btn"},on:{click:function(a){return t.$refs.chooseEnterpriseStaffModal.chooseSearch()}}},[t._v("已选择"+t._s(t.send_type_choose_staff.length)+"名成员")]):e("a-button",{staticClass:"add-goods ",staticStyle:{float:"left"},attrs:{type:"btn"},on:{click:function(a){return t.$refs.chooseEnterpriseStaffModal.chooseSearch()}}},[t._v("选择部门成员")]),e("a-col",{staticStyle:{display:"inline-block !important"},attrs:{md:3,sm:24}},[e("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择状态","label-in-value":"","default-value":{key:String(t.search.send_type)}},on:{change:t.handleChangeType}},[e("a-select-option",{attrs:{value:"-1"}},[t._v("全部状态")]),e("a-select-option",{attrs:{value:"1"}},[t._v("开启")]),e("a-select-option",{attrs:{value:"0"}},[t._v("关闭")])],1)],1),e("a-button",{staticClass:"add-goods",attrs:{type:"primary"},on:{click:function(a){return t.querys()}}},[t._v("查询")]),e("div",{staticClass:"set_yg"},[e("a-button",{staticClass:"add-goods ",staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(a){return t.$refs.violationStaffModal.add()}}},[t._v("设置违规员工")])],1)],1),e("a-col",t._l(t.staff_txt,(function(a,i){return e("div",{key:i,staticClass:"label_"},[e("a-tag",{attrs:{color:"#1890ff"}},[t._v(" "+t._s(a.value)+" ")])],1)})),0),t.contentList?e("a-table",{staticStyle:{margin:"10px"},attrs:{columns:t.columns,"data-source":t.contentList,pagination:t.pagination,loading:t.loading},on:{change:t.tableChange},scopedSlots:t._u([{key:"name_",fn:function(a,i){return e("span",{staticClass:"div_"},[i.avatar?e("div",{staticClass:"img_"},[e("img",{attrs:{src:i.avatar}})]):t._e(),e("div",[t._v(t._s(i.name))])])}},{key:"sensitive_tags",fn:function(a){return e("span",{},t._l(a,(function(a){return e("a-tag",{attrs:{color:"#FCBE79"}},[t._v(" "+t._s(a)+" ")])})),1)}},{key:"tags",fn:function(a){return e("span",{},t._l(a,(function(a){return e("a-tag",{attrs:{color:"#1890ff"}},[t._v(" "+t._s(a)+" ")])})),1)}},{key:"status",fn:function(a,i){return e("span",{},[0==i.status?e("div",{staticStyle:{color:"red"}},[t._v("关闭")]):t._e(),1==i.status?e("div",{staticStyle:{color:"#1890ff"}},[t._v("开启")]):t._e()])}},{key:"action",fn:function(a,i){return e("span",{},[e("a",{on:{click:function(a){return t.$refs.violationStaffModal.edit(i.id)}}},[t._v("编辑")])])}}],null,!1,79542087)}):t._e()],1),e("a-tab-pane",{key:"2",attrs:{tab:"群聊违规"}},[e("div",{staticStyle:{margin:"10px",width:"1200px",height:"75px"}},[""!=t.enterprise_staff?e("a-button",{staticClass:"add-goods ",staticStyle:{float:"left"},attrs:{type:"btn"},on:{click:function(a){return t.$refs.chooseGroupChatModal.add()}}},[t._v("已选择"+t._s(t.enterprise_staff.length)+"群聊")]):e("a-button",{staticClass:"add-goods ",staticStyle:{float:"left"},attrs:{type:"btn"},on:{click:function(a){return t.$refs.chooseGroupChatModal.add()}}},[t._v("选择群聊")]),e("a-input-group",{staticStyle:{width:"180px",float:"left"},attrs:{compact:""}},[e("a-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入规则名称"},model:{value:t.queryParam.title,callback:function(a){t.$set(t.queryParam,"title",a)},expression:"queryParam.title"}})],1),e("a-button",{staticClass:"add-goods",attrs:{type:"primary"},on:{click:function(a){return t.querys()}}},[t._v("查询")]),e("div",{staticClass:"set_yg"},[e("a-button",{staticClass:"add-goods ",staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(a){return t.$refs.violationGroupModal.add()}}},[t._v("设置违规群聊")])],1)],1),e("a-col",t._l(t.group_txt,(function(a,i){return e("div",{key:i,staticClass:"label_"},[e("a-tag",{attrs:{color:"#1890ff"}},[t._v(" "+t._s(a.value)+" ")])],1)})),0),t.contentList?e("a-table",{staticStyle:{margin:"10px"},attrs:{columns:t.columns_txt,"data-source":t.contentList,pagination:t.pagination,loading:t.loading},on:{change:t.tableChange},scopedSlots:t._u([{key:"groups_tags",fn:function(a){return e("span",{},t._l(a,(function(a){return e("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"#1890ff"}},[t._v(t._s(a)+" ")])})),1)}},{key:"action_tags",fn:function(a,i){return e("span",{},[t._l(i.action_tags,(function(a){return e("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"#FCBE79"}},[t._v(" "+t._s(a)+" ")])})),e("div",[""!=i.sensitive_tags?e("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"#FCBE79"}},[t._v(" "+t._s(i.sensitive_tags)+" ")]):t._e()],1)],2)}},{key:"remind_info_tags",fn:function(a){return e("span",{},t._l(a,(function(a){return e("div",[t._v(" "+t._s(a)+" ")])})),0)}},{key:"action",fn:function(a,i){return e("span",{},[e("a",{on:{click:function(a){return t.$refs.violationGroupModal.edit(i.id)}}},[t._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-popconfirm",{staticClass:"ant-dropdown-link",attrs:{title:"确认删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(a){return t.delAlertC(i.id,2)},cancel:t.cancel}},[e("a",{attrs:{href:"#"}},[t._v("删除")])])],1)}}],null,!1,3017088650)}):t._e()],1)],1)],1)])],1),e("chooseBranch",{ref:"chooseEnterpriseStaffModal",on:{change:t.change_enterprise_staff}}),e("addStaff",{ref:"violationStaffModal",on:{ok:t.add_violation_staff}}),e("addGroup",{ref:"violationGroupModal",on:{ok:t.add_violation_group}}),e("choose-group-chat",{ref:"chooseGroupChatModal",on:{change:t.change_group_chat}})],1)],1)},s=[],n=e("5530"),o=(e("d81d"),e("ac1f"),e("841c"),e("4de4"),e("1276"),e("c1df")),r=e.n(o),c=e("a0e0"),l=e("0cca"),f=e("ad06"),d=e("b525"),u=e("547e"),h=e("ca00"),p=e("6944"),_=e.n(p),m=e("8bbf"),g=e.n(m);e("0808");g.a.use(_.a);var v={1:{status:"green",text:"开启"},0:{status:"red",text:"关闭"}},b=[],A=[],y={name:"remindIndex",components:{chooseBranch:l["default"],addStaff:f["default"],addGroup:d["default"],chooseGroupChat:u["default"]},data:function(){return this.cacheData=b.map((function(t){return Object(n["a"])({},t)})),{form:this.$form.createForm(this),id:1,queryParam:{gid:"0",title:""},queryParams:{gid:"0",title:""},columns:[{title:"部门成员",key:"name",dataIndex:"name",scopedSlots:{customRender:"name_"}},{title:"敏感词",key:"sensitive",dataIndex:"sensitive",scopedSlots:{customRender:"sensitive_tags"}},{title:"通知人",key:"tags",dataIndex:"tags",scopedSlots:{customRender:"tags"}},{title:"状态",key:"status",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",key:"action",dataIndex:"action",scopedSlots:{customRender:"action"}}],columns_txt:[{title:"规则名称",key:"rule_name",dataIndex:"rule_name",width:"12%"},{title:"适合群聊",key:"groups_tags",dataIndex:"groups_tags",width:"12%",scopedSlots:{customRender:"groups_tags"}},{title:"提醒行为",key:"action_tags",dataIndex:"action_tags",width:"12%",scopedSlots:{customRender:"action_tags"}},{title:"通知人",key:"remind_info",dataIndex:"remind_info",width:"12%",scopedSlots:{customRender:"remind_info_tags"}},{title:"添加时间",key:"add_time",dataIndex:"add_time",width:"15%"},{title:"操作",key:"operation",dataIndex:"action",width:"12%",scopedSlots:{customRender:"action"}}],data:b,sortList:A,contentList:[],type:0,clientHeight:0,loading:!1,sortLoading:!1,gid:0,pagination:{pageSize:10,total:10},search:{page:1,send_type:-1,staff_id:[],group_id:[]},page:1,imgUrl:e("22af"),id_arr:[],first_gid:"",default_selected:"",autoExpandParent:!0,expandedKeys:[],channel_code:!1,codeList:[],paginations:{pageSize:10,total:10},searchs:{page:1},pages:1,loadings:!1,clientHeights:0,id_arr_c:[],total_sum_number:"",total_sum_numbers:"",tokenName:"",sysName:"",isshow:!0,isCode:!1,showMoveCode:!1,smgHtmlPath:"",staff_txt:[],group_txt:[],send_type_choose_staff:[],enterprise_staff:[]}},watch:{$route:{handler:function(){this.queryParam.store_id=this.$route.query.store_id,this.queryParam.sort_id=0,this.getContentList()},deep:!0}},created:function(){},filters:{statusFilter:function(t){return v[t].text},statusTypeFilter:function(t){return v[t].status}},mounted:function(){var t=this;this.clientHeight=window.document.body.clientHeight,window.onresize=function(){t.clientHeight=window.document.body.clientHeight};var a=Object(h["i"])(location.hash);a?(this.tokenName=a+"_access_token",this.sysName=a):this.sysName="village",this.getContentList()},computed:{},methods:{moment:r.a,handleChangeType:function(t){this.search.send_type=t.key},change_enterprise_staff:function(t){var a=this;this.staff_txt=[],this.search.staff_id=[],this.send_type_choose_staff=t,t.filter((function(t,e){a.search.staff_id[e]=t.split("-")[0]}))},add_violation_staff:function(){this.getContentList()},add_violation_group:function(){this.getContentList()},change_group_chat:function(t){var a=this;this.group_txt=[],this.search.group_id=[],this.enterprise_staff=t,t.filter((function(t,e){a.search.group_id[e]=t.split("-")[0]}))},switchType:function(t){this.isshow=1==t,this.type=t-1,this.queryParam.title="",this.getContentList()},tableChange:function(t){t.current&&t.current>0&&(this.page=t.current,this.getContentList())},tableChanges:function(t){t.current&&t.current>0&&(this.pages=t.current,this.getChannelCodeList())},getContentList:function(){var t=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=!0,this.queryParam["page"]=this.page,this.queryParam["type"]=this.type,this.queryParam["staff_id"]=this.search.staff_id,this.queryParam["send_type"]=this.search.send_type,this.queryParam["group_id"]=this.search.group_id,this.tokenName&&(this.queryParam["tokenName"]=this.tokenName),this.request(c["a"].getViolationRemindList,this.queryParam).then((function(e){t.contentList=e.list,a&&(t.tabColumn=e.tabs),e.list&&e.list.length>0&&(t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10),e.title_number?t.total_sum_number=e.title_number:t.total_sum_number=t.total_sum_numbers,t.loading=!1}))},cancel:function(){},querys:function(){this.getContentList()},delAlertC:function(t,a){var e=this;this.$confirm({title:"提示",content:"您确定要删除吗？",okText:"是",okType:"danger",cancelText:"否",onOk:function(){e.delContent(t,a)},onCancel:function(){}})},delContent:function(t,a){var e=this,i={id:t};this.tokenName&&(i["tokenName"]=this.tokenName);var s=c["a"].delViolationStaff;a>1&&(s=c["a"].delViolationGroup),this.request(s,i).then((function(t){t?(e.$message.success("操作成功"),e.getContentList()):e.$message.error("操作失败")}))}}},C=y,w=(e("f19d"),e("2877")),k=Object(w["a"])(C,i,s,!1,null,null,null);a["default"]=k.exports},e92e:function(t,a,e){"use strict";e("64e3")},f19d:function(t,a,e){"use strict";e("365d")},f552:function(t,a,e){}}]);