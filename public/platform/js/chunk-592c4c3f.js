(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-592c4c3f","chunk-01ccd794"],{"17a14":function(t,e,a){},4031:function(t,e,a){"use strict";var l={getLists:"/mall/merchant.MerchantStoreMall/getStoreList",perfectedStore:"/mall/merchant.MerchantStoreMall/perfectedStore",getStoreConfigList:"/mall/merchant.MerchantStoreMall/getStoreConfigList",getShippingList:"/mall/merchant.MallShipping/getShippingList",updateShipping:"/mall/merchant.MallShipping/addShipping",changeState:"/mall/merchant.MallShipping/changeState",removeShipping:"/mall/merchant.MallShipping/del",getShippingInfo:"/mall/merchant.MallShipping/edit",getMerchantSort:"/mall/merchant.MallGoods/getMerchantSort",getMallGoods:"/mall/merchant.MallGoods/getMallGoodsSelect",getGiveList:"/mall/merchant.MallGive/getGiveList",giveAdd:"/mall/merchant.MallGive/addGive",giveChangeState:"/mall/merchant.MallGive/changeState",giveDel:"/mall/merchant.MallGive/del",getGiveInfo:"/mall/merchant.MallGive/edit",getPlatSort:"/mall/merchant.MallGoods/getPlatformSort",getStoreSort:"/mall/merchant.MallGoods/getMerchantSort",getPrepareList:"/mall/merchant.MallPrepare/getPrepareList",updatePrepare:"/mall/merchant.MallPrepare/addPrepare",prepareChangeState:"/mall/merchant.MallPrepare/changeState",removePrepare:"/mall/merchant.MallPrepare/del",getPrepareInfo:"/mall/merchant.MallPrepare/edit",getReachedList:"/mall/merchant.MallReached/getReachedList",updateReachedList:"/mall/merchant.MallReached/addReached",getReachedInfo:"/mall/merchant.MallReached/edit",reachedChangeState:"/mall/merchant.MallReached/changeState",reachedDel:"/mall/merchant.MallReached/del",addRobot:"/mall/merchant.MallGroup/addRobot",delRobot:"/mall/merchant.MallGroup/delRobot",getRobotList:"/mall/merchant.MallGroup/getRobotList",getRobotName:"/mall/merchant.MallGroup/getRobotName",getUploadImages:"/common/common.UploadFile/getUploadImages",getGoodsSort:"/mall/merchant.MallGoods/getMerchantSort",getGoodsStatus:"/mall/merchant.MallGoods/getNumbers",getGoodsList:"/mall/merchant.MallGoods/getGoodsList",changeGoodsStatus:"/mall/merchant.MallGoods/setStatusLot",setVirtualSales:"/mall/merchant.MallGoods/setVirtualSales",changeGoodsSort:"/mall/merchant.MallGoods/setSort",getGoodsSkuPrice:"/mall/merchant.MallGoods/getGoodsSkuInfo",changeGoodsPrice:"/mall/merchant.MallGoods/setGoodsSkuInfo",getPlatProps:"/mall/merchant.MallGoods/getPlatformProperties",getFreightList:"/mall/merchant.MallGoods/getfreightList",getServiceList:"/mall/merchant.MallGoods/dealService",removeGoods:"/mall/merchant.MallGoods/delGoods",updateGoods:"/mall/merchant.MallGoods/addOrEditGoods",exportGoods:"/mall/merchant.MallGoods/exportGoods",getGoodsInfo:"/mall/merchant.MallGoods/getEditGoods",getGroupList:"/mall/merchant.MallGroup/getGroupList",groupAdd:"/mall/merchant.MallGroup/addGroup",groupChangeState:"/mall/merchant.MallGroup/changeState",groupDel:"/mall/merchant.MallGroup/del",getGroupInfo:"/mall/merchant.MallGroup/editDetail",getPeriodicList:"/mall/merchant.MallPeriodic/getPeriodicList",updatePeriodic:"/mall/merchant.MallPeriodic/addPeriodic",periodicChangeState:"/mall/merchant.MallPeriodic/changeState",removePeriodic:"/mall/merchant.MallPeriodic/del",getPeriodicInfo:"/mall/merchant.MallPeriodic/edit",getBargainList:"/mall/merchant.MallBargain/getBargainList",bargainAdd:"/mall/merchant.MallBargain/addBargain",bargainChangeState:"/mall/merchant.MallBargain/changeState",bargainDel:"/mall/merchant.MallBargain/del",getBargainInfo:"/mall/merchant.MallBargain/editDetail",getMinusDiscountList:"/mall/merchant.MallFullMinusDiscount/getFullMinusDiscountList",updateMinusDiscount:"/mall/merchant.MallFullMinusDiscount/addFullMinusDiscount",minusDiscountChangeState:"/mall/merchant.MallFullMinusDiscount/changeState",removeMinusDiscount:"/mall/merchant.MallFullMinusDiscount/del",getMinusDiscountInfo:"/mall/merchant.MallFullMinusDiscount/edit",getLimitedList:"/mall/merchant.MallLimited/getLimitedList",updateLimited:"/mall/merchant.MallLimited/addLimited",limitedChangeState:"/mall/merchant.MallLimited/changeState",removeLimited:"/mall/merchant.MallLimited/del",getLimitedInfo:"/mall/merchant.MallLimited/edit",getGoodsSortList:"/mall/merchant.MallGoodsSort/getSortList",delGoodsSort:"/mall/merchant.MallGoodsSort/delSort",editGoodsSort:"/mall/merchant.MallGoodsSort/addOrEditSort",getEditSort:"/mall/merchant.MallGoodsSort/getEditSort",editSort:"/mall/merchant.MallGoodsSort/saveSort",saveStatus:"/mall/merchant.MallGoodsSort/saveStatus",getAllGoodsSort:"/mall/merchant.MallGoodsSort/getSort",getStoreList:"/mall/merchant.MallMerchantReply/getStores",getReplyList:"/mall/merchant.MallMerchantReply/searchReply",addComment:"/mall/merchant.MallMerchantReply/merchantReply",getReplyDetails:"/mall/merchant.MallMerchantReply/getReplyDetails",getShowHomePage:"/mall/merchant.MallMerchantReply/getShowHomePage",getQualityReviews:"/mall/merchant.MallMerchantReply/getQualityReviews",getShowHomePageCancel:"/mall/merchant.MallMerchantReply/getShowHomePageCancel",getQualityReviewsCancel:"/mall/merchant.MallMerchantReply/getQualityReviewsCancel",getOrderList:"/mall/merchant.MallOrder/searchOrders",getOrderDetails:"/mall/merchant.MallOrder/getOrderDetails",getCollect:"/mall/merchant.MallOrder/getCollect",getDiscount:"/mall/merchant.MallOrder/getDiscount",exportOrder:"/mall/merchant.MallOrder/exportOrder ",deleteJudge:"/mall/merchant.MallGoods/deleteJudge ",getTemplateList:"/mall/merchant.ExpressTemplate/index",getTemplateAreaList:"/mall/merchant.ExpressTemplate/ajax_area",getTemplateAreaNameList:"/mall/merchant.ExpressTemplate/get_area_name",addTemplate:"/mall/merchant.ExpressTemplate/save",editTemplate:"/mall/merchant.ExpressTemplate/edit",delTemplate:"/mall/merchant.ExpressTemplate/delete",goodsBatch:"/mall/merchant.MallGoods/goodsBatch",viewLogistics:"/mall/merchant.MallOrder/viewLogistics",orderPrintTicket:"/mall/merchant.MallOrder/printOrder"};e["a"]=l},5756:function(t,e,a){"use strict";a.r(e);a("3849");var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ant-pro-page-header-wrap-children-content",staticStyle:{margin:"24px 0 0"}},[e("a-page-header",{staticStyle:{padding:"0 0 16px 0"},attrs:{title:"商品分类"}},[e("template",{slot:"extra"},[e("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.$refs.createModal.add()}}},[t._v("新建分类")])],1)],2),e("a-card",{attrs:{bordered:!1}},[e("a-table",{attrs:{columns:t.columns,"data-source":t.dataList,pagination:t.pagination,rowKey:"id"},scopedSlots:t._u([{key:"status",fn:function(a,l){return[e("a-switch",{attrs:{"checked-children":"开启","un-checked-children":"关闭",checked:1==a},on:{change:function(e){return t.setStatus(l.id,e)}}})]}},{key:"sort",fn:function(a,l){return[e("a-input-number",{attrs:{min:0},on:{blur:function(e){return t.handleSortChange(a,l.id)}},model:{value:l.sort,callback:function(e){t.$set(l,"sort",e)},expression:"record.sort"}})]}},{key:"action",fn:function(a,l){return e("span",{},[[e("a",{on:{click:function(e){return t.$refs.createModal.edit(l.id)}}},[t._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}})],3==l.level?e("a",{on:{click:function(e){return t.removeGoodsSort(l)}}},[t._v("删除")]):t._e(),3!=l.level?e("a-dropdown",[e("a",{staticClass:"ant-dropdown-link"},[t._v(" 更多 "),e("a-icon",{attrs:{type:"down"}})],1),e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e("a-menu-item",[e("a",{on:{click:function(e){return t.$refs.createModal.addSub(l.id,l.store_id)}}},[t._v("新增下级分类")])]),e("a-menu-item",[e("a",{on:{click:function(e){return t.removeGoodsSort(l)}}},[t._v("删除")])])],1)],1):t._e()],2)}}])}),e("create-sort",{ref:"createModal",attrs:{id:t.id,fid:t.fid,store_id:t.store_id},on:{ok:t.handleOk,loaddata:t.getDataList}})],1)],1)},i=[],r=a("4031"),o=a("d3ff"),n={name:"TableList",components:{CreateSort:o["default"]},data:function(){return{store_id:"",id:"0",fid:"0",columns:[{title:"分类名称",dataIndex:"name"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"sort",scopedSlots:{customRender:"sort"}},{title:"操作",dataIndex:"id",key:"id",scopedSlots:{customRender:"action"}}],dataList:[],pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(t){return"共 ".concat(t," 条记录")}}}},watch:{"$route.query.store_id":function(t){t&&(this.store_id=this.$route.query.store_id,this.getDataList({store_id:t}))}},created:function(){this.store_id=this.$route.query.store_id,this.getDataList({store_id:this.store_id})},methods:{getDataList:function(t){var e=this;t.page=this.pagination.current,t.pageSize=this.pagination.pageSize,this.request(r["a"].getGoodsSortList,t).then((function(a){console.log(a),a.list.length?(e.dataList=a.list||[],e.$set(e.pagination,"total",a.count)):(t.page=e.pagination.current-1<1?1:e.pagination.current-1,e.request(r["a"].getGoodsSortList,t).then((function(t){e.dataList=t.list||[],e.$set(e.pagination,"total",t.count)})))}))},onPageChange:function(t,e){this.$set(this.pagination,"current",t),this.getDataList({store_id:this.store_id})},onPageSizeChange:function(t,e){this.$set(this.pagination,"pageSize",e),this.getDataList({store_id:this.store_id})},add:function(){},handleOk:function(){},cancel:function(){},removeGoodsSort:function(t){var e=this;this.$confirm({title:"是否确定删除该分类?",centered:!0,onOk:function(){e.request(r["a"].delGoodsSort,{id:t.id,level:t.level,store_id:e.store_id}).then((function(t){100==t?e.$message.warn("该分类下存在商品，请先删除商品后再来删除该分类！"):e.$message.success("操作成功！"),e.getDataList({store_id:e.store_id})}))},onCancel:function(){}})},setStatus:function(t,e){var a=this;this.request(r["a"].saveStatus,{id:t,status:e}).then((function(t){a.getDataList({store_id:a.store_id})}))},handleSortChange:function(t,e){var a=this;this.request(r["a"].editSort,{id:e,sort:t}).then((function(t){a.getDataList({store_id:a.store_id})}))}}},s=n,d=(a("fc07"),a("0b56")),c=Object(d["a"])(s,l,i,!1,null,"07163b3a",null);e["default"]=c.exports},d3ff:function(t,e,a){"use strict";a.r(e);a("54f8"),a("3849");var l=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.title,width:640,visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[e("a-spin",{attrs:{spinning:t.confirmLoading}},[e("a-form",{attrs:{form:t.form}},[e("a-form-item",{attrs:{label:"分类名称",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:t.detail.name,rules:[{required:!0,message:"请输入分类名称"}]}],expression:"['name', {initialValue:detail.name,rules: [{required: true, message: '请输入分类名称'}]}]"}]})],1),e("a-form-item",{attrs:{label:"上级分类",labelCol:t.labelCol,wrapperCol:t.wrapperCol,help:"不选择上级分类，则添加为一级分类"}},[e("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["fid",{initialValue:t.detail.fid?t.detail.fid:t.fid}],expression:"['fid',{initialValue:detail.fid ? detail.fid : fid}]"}],staticStyle:{width:"320px"},on:{change:function(e){return t.change(e)}}},t._l(t.dataList,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])})),1)],1),e("a-form-item",{attrs:{label:"排序值",labelCol:t.labelCol,wrapperCol:t.wrapperCol,help:"排序值越高，在商城首页店铺列表排序越前"}},[e("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:t.detail.sort}],expression:"['sort',{initialValue:detail.sort}]"}],attrs:{min:0}})],1),e("a-form-item",{attrs:{label:"状态",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1==t.detail.status,valuePropName:"checked"}],expression:"['status',{initialValue:detail.status==1 ? true : false,valuePropName: 'checked'}]"}],attrs:{"checked-children":"开启","un-checked-children":"关闭"}})],1)],1)],1)],1)},i=[],r=a("2396"),o=(a("19f1"),a("6e84"),a("4031")),n={props:{store_id:{type:[String,Number],default:""}},data:function(){return{title:"新建分类",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),dataList:[],showMethod:[],detail:{id:0,fid:0,name:"",status:1,store_id:0,sort:""},id:0,fid:"请选择上级分类"}},mounted:function(){this.getDataList()},methods:{getDataList:function(){var t=this;this.request(o["a"].getAllGoodsSort,{store_id:this.store_id}).then((function(e){var a=[{id:"0",name:"请选择上级分类",level:"1"}];e.list.length&&(a=a.concat(e.list)),t.$set(t,"dataList",a)}))},add:function(){this.getDataList(),this.visible=!0,this.id="0",this.fid="0",this.title="新建分类",this.detail={id:0,fid:0,name:"",status:1,store_id:0,sort:""}},edit:function(t){this.getDataList(),this.visible=!0,this.id=t,this.getEditInfo(),this.id>0?this.title="编辑分类":this.title="新建分类",console.log(this.title)},addSub:function(t,e){this.getDataList(),this.title="新建分类",this.visible=!0,this.fid=t,this.id=0},handleSubmit:function(){var t=this,e=this.form.validateFields;this.confirmLoading=!0,e((function(e,a){e?t.confirmLoading=!1:(a.id=t.id,a.store_id=t.store_id,t.request(o["a"].editGoodsSort,a).then((function(e){t.id>0?t.$message.success("编辑成功"):t.$message.success("添加成功"),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1,t.$emit("loaddata",a)}),1500)})).catch((function(e){t.confirmLoading=!1})),console.log("values",a))}))},handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.id="0",t.fid="0",t.form=t.$form.createForm(t)}),500)},getEditInfo:function(){var t=this;this.request(o["a"].getEditSort,{id:this.id,store_id:this.store_id}).then((function(e){t.showMethod=e.showMethod,t.detail={id:0,fid:0,name:"",status:1,store_id:0,sort:""},"object"==Object(r["a"])(e.list)&&(t.detail=e.list),console.log("detail",t.detail)}))},change:function(t){this.detail.fid=t}}},s=n,d=a("0b56"),c=Object(d["a"])(s,l,i,!1,null,null,null);e["default"]=c.exports},fc07:function(t,e,a){"use strict";a("17a14")}}]);