(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b1b95610","chunk-3d779326"],{1175:function(t,e,a){"use strict";a("7b8f")},4576:function(t,e,a){},7421:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-drawer",{attrs:{title:t.title,placement:"right",width:t.widthDrawer,closable:!0,visible:t.drawer_visible},on:{close:t.onClose}},[a("div",{staticClass:"top_box"},[a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("物业编号：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.user_info.usernum?t.user_info.usernum:"暂无"))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("业主：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.user_info.name?t.user_info.name:"暂无"))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("电话：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.user_info.phone?t.user_info.phone:"暂无"))])]),a("div",{staticClass:"flex_text_box"},[t.user_info.room?a("div",{staticClass:"text_1"},[t._v("房间号：")]):t._e(),a("div",{staticClass:"text_2"},[t._v(t._s(t.user_info.room))])]),t.user_info.housesize?a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("房屋面积：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.user_info.housesize))])]):t._e(),t.user_info.is_car_position?a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("车场面积：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.user_info.position_area?t.user_info.position_area:"暂无"))])]):t._e()]),a("div",{staticClass:"message-suggestions-box-1"},[a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination,loading:t.loading},on:{change:t.table_change},scopedSlots:t._u([{key:"action",fn:function(e,i){return a("span",{},[a("a",{on:{click:function(e){return t.$refs.OrderModel.add(i.order_id,i.check_apply_id)}}},[t._v("详情")])])}}])}),a("payable-order-info",{ref:"OrderModel"})],1)])},s=[],r=(a("7d24"),a("dfae")),n=(a("ac1f"),a("841c"),a("a0e0")),o=a("bf3f"),l=[{title:"收费项目名称",dataIndex:"project_name",key:"project_name"},{title:"实际缴费金额",dataIndex:"pay_money",key:"pay_money"},{title:"支付方式",dataIndex:"pay_type",key:"pay_type"},{title:"支付时间",dataIndex:"pay_time",key:"pay_time"},{title:"开票状态",dataIndex:"record_status",key:"record_status"},{title:"账单状态",dataIndex:"order_status",key:"order_status"},{title:"计费开始时间",dataIndex:"service_start_time",key:"service_start_time"},{title:"计费结束时间",dataIndex:"service_end_time",key:"service_end_time"},{title:"账单生成时间",dataIndex:"add_time",key:"add_time"},{title:"已退款金额",dataIndex:"refund_money",key:"refund_money"},{title:"操作",key:"action",width:"100px",dataIndex:"",scopedSlots:{customRender:"action"}}],c=[],d={name:"PayableOrderList",filters:{},components:{PayableOrderInfo:o["default"],"a-collapse":r["a"],"a-collapse-panel":r["a"].Panel},data:function(){return{reply_content:"",title:"详细订单列表",pagination:{current:1,pageSize:15,total:15},search:{record_id:0,order_id:0,sub_order_ids:"",table_name:"",room_id:0},drawer_visible:!1,loading:!1,data:c,columns:l,search_data:"",page:1,widthDrawer:1500,confirmLoading:!1,record:{},user_info:{}}},created:function(){window.screen.width<1400?this.widthDrawer=900:window.screen.width<1600&&(this.widthDrawer=1300)},activated:function(){},methods:{onClose:function(){this.drawer_visible=!1},getList:function(){var t=this;this.loading=!0,this.search["page"]=this.page,this.search["limit"]=this.pagination.pageSize,this.request(n["a"].getHouseNewPayOrderList,this.search).then((function(e){t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.data=e.list,e.user_info&&(t.user_info=e.user_info),t.loading=!1}))},bindOk:function(){this.getList()},dateOnChange:function(t,e){this.search.date=e},table_change:function(t){console.log("table_change",t),t.current&&t.current>0&&(this.pagination.current=t.current,this.page=t.current,this.getList())},search_btn:function(t){this.drawer_visible=!0,this.record=t,this.search={record_id:t.id,order_id:t.order_id,sub_order_ids:t.sub_order_ids,table_name:t.table_name,room_id:t.room_id},this.searchList()},searchList:function(){this.page=1;var t={current:1,pageSize:10,total:10};this.table_change(t)},arrUnique:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pigcms_id",a=[],i=0,s=t.length;i<s;i++)-1===a.indexOf(t[i][e])&&a.push(t[i][e]);return a}}},_=d,u=(a("eb25"),a("0c7c")),p=Object(u["a"])(_,i,s,!1,null,"70498128",null);e["default"]=p.exports},"7b8f":function(t,e,a){},d844:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fee-summary-list-box"},[a("div",{staticClass:"search-box"},[a("a-row",{attrs:{gutter:48}},[a("a-col",{staticStyle:{"padding-right":"0px"},attrs:{md:8,sm:24}},[a("a-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择单号类别"},model:{value:t.search.order_type,callback:function(e){t.$set(t.search,"order_type",e)},expression:"search.order_type"}},[a("a-select-option",{key:"1",attrs:{value:"1"}},[t._v("业务订单编号")]),a("a-select-option",{key:"2",attrs:{value:"2"}},[t._v("商户支付订单号")]),a("a-select-option",{key:"3",attrs:{value:"3"}},[t._v("第三方支付流水号")])],1),a("a-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入单号"},model:{value:t.search.order_no,callback:function(e){t.$set(t.search,"order_no",e)},expression:"search.order_no"}})],1),a("a-col",{staticStyle:{"padding-left":"5px","padding-right":"1px",width:"430px"},attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("支付时间：")]),a("a-range-picker",{staticStyle:{width:"320px"},attrs:{allowClear:!0},on:{change:t.dateOnChange},model:{value:t.search_data,callback:function(e){t.search_data=e},expression:"search_data"}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1),a("a-col",{staticStyle:{"padding-right":"0px"},attrs:{md:4,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("订单状态：")]),a("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择单号类别"},model:{value:t.search.order_status,callback:function(e){t.$set(t.search,"order_status",e)},expression:"search.order_status"}},[a("a-select-option",{key:"0",attrs:{value:"0"}},[t._v("全部")]),a("a-select-option",{key:"1",attrs:{value:"1"}},[t._v("已支付")]),a("a-select-option",{key:"2",attrs:{value:"2"}},[t._v("部分退款")]),a("a-select-option",{key:"3",attrs:{value:"3"}},[t._v("全额退款")])],1)],1)],1),a("a-row",{staticStyle:{"margin-top":"15px"}},[a("a-col",{staticStyle:{"padding-right":"1px"},attrs:{md:5,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("所属业务：")]),a("a-select",{staticStyle:{width:"230px"},attrs:{placeholder:"全部"},model:{value:t.search.business_type,callback:function(e){t.$set(t.search,"business_type",e)},expression:"search.business_type"}},[a("a-select-option",{key:"",attrs:{value:""}},[t._v("全部")]),t._l(t.business_arr,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.value))])}))],2)],1),a("a-col",{staticStyle:{"padding-left":"25px","padding-right":"1px",width:"90px"},attrs:{md:6,sm:24}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.searchList()}}},[t._v(" 查询 ")])],1),a("a-col",{staticStyle:{"padding-left":"25px","padding-right":"1px",width:"90px"},attrs:{md:6,sm:24}},[a("a-button",{staticClass:"ml-20",attrs:{icon:"refresh"},on:{click:t.resetList}},[t._v(" 重置")])],1),a("a-col",{staticClass:"suggestions_col_btn",staticStyle:{"padding-left":"40px"},attrs:{md:3,sm:12}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.excelExportOut()}}},[t._v("Excel导出")])],1)],1)],1),a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination,"row-key":function(t){return t.id},scroll:t.xscroll,loading:t.loading,bordered:""},on:{change:t.table_change},scopedSlots:t._u([{key:"action_opt",fn:function(e,i){return a("span",{},[1==i.house_new_pay_order_list?a("a",{on:{click:function(e){return t.$refs.PayableOrderRecordModel.search_btn(i)}}},[t._v(" 子订单列表 ")]):t._e()])}}])}),a("a-modal",{attrs:{title:"请稍等,正在为您导出数据...",visible:t.tips_visible,closable:!1,"mask-closable":!1,footer:null,width:550}},[a("div",[a("a-spin",{attrs:{size:"large"}}),a("span",{staticStyle:{"margin-left":"25px"}},[t._v("导出数据中,请耐心等待,数量越多时间越长。")]),a("p",{staticStyle:{margin:"15px"}},[t._v("若长时间未成功导出，建议调整筛选条件减少导出数，然后分多次导出。")])],1)]),a("PayableOrderRecordModel",{ref:"PayableOrderRecordModel"})],1)},s=[],r=(a("ac1f"),a("841c"),a("a0e0")),n=a("7421"),o=[{title:"商户支付订单号",dataIndex:"pay_order_no",key:"pay_order_no",fixed:"left",width:220},{title:"业务订单编号",dataIndex:"order_no",key:"order_no",fixed:"left",width:200},{title:"第三方支付流水号",dataIndex:"third_transaction_no",key:"third_transaction_no",fixed:"left",width:250},{title:"应收费用",dataIndex:"order_money",key:"order_money",width:120},{title:"实际缴费金额",dataIndex:"pay_money",key:"pay_money",width:120},{title:"支付时间",dataIndex:"pay_time_str",key:"pay_time_str",width:160},{title:"余额支付金额",dataIndex:"balance_money",key:"balance_money",width:120},{title:"支付方式",dataIndex:"pay_type_str",key:"pay_type_str",width:160},{title:"积分抵扣金额",dataIndex:"score_money",key:"score_money",width:120},{title:"退款金额",dataIndex:"refund_money",key:"refund_money",width:120},{title:"退款时间",dataIndex:"refund_time_str",key:"refund_time_str",width:160},{title:"订单状态",dataIndex:"order_status_str",key:"order_status_str",width:120},{title:"所属业务",dataIndex:"business_type_name",key:"business_type_name",fixed:"right",width:200},{title:"操作",dataIndex:"",key:"action_opt",fixed:"right",width:150,scopedSlots:{customRender:"action_opt"}}],l=[],c={name:"orderTransactionRecordList",components:{PayableOrderRecordModel:n["default"]},data:function(){return{pagination:{current:1,pageSize:10,total:10},search:{order_type:"1",business_type:"",order_status:"0",date:""},visible:!1,loading:!1,data:l,columns:o,xscroll:{x:1500},page:1,search_data:null,business_arr:[],tips_visible:!1,excelExportOutFileUrl:"",export_out_id:0,setTimeoutS:null}},mounted:function(){this.getList(),this.getOrderBusinessTypeInfo()},methods:{getList:function(){var t=this;this.loading=!0,this.search["page"]=this.page,this.search["limit"]=this.pagination.pageSize,this.request(r["a"].getPaidOrderRecordList,this.search).then((function(e){t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.data=e.lists,t.excelExportOutFileUrl=e.excelExportOutFileUrl,t.loading=!1}))},getOrderBusinessTypeInfo:function(){var t=this;this.request(r["a"].getOrderBusinessTypeInfo).then((function(e){t.business_arr=e.lists}))},excelExportOut:function(){var t=this;this.tips_visible=!0,this.loading=!0,this.request(r["a"].excelExportPaidOrderRecordOut,this.search).then((function(e){t.export_out_id=e.export_id,t.excelExportOutFileUrl=t.excelExportOutFileUrl+"&id="+e.export_id,console.log("excelExportOutFileUrl",t.excelExportOutFileUrl),t.CheckExportOutStatus()})).catch((function(e){t.loading=!1}))},CheckExportOutStatus:function(){var t=this,e=this.excelExportOutFileUrl+"&ajax=village_ajax";console.log("excelExportOutFileUrlCheck",this.excelExportOutFileUrlCheck),this.request(e,{tokenName:"village_access_token",ajax:"village_ajax"}).then((function(e){return console.log("exportOutStatus",e),0==e.error_code?(clearTimeout(t.setTimeoutS),t.setTimeoutS=null,window.location.href=t.excelExportOutFileUrl,t.loading=!1,t.tips_visible=!1,!1):404==e.error_code?(t.tips_visible=!1,t.loading=!1,clearTimeout(t.setTimeoutS),t.setTimeoutS=null,t.$message.error(e.error_msg),!1):void(t.setTimeoutS=setTimeout(t.CheckExportOutStatus,2e3))})).catch((function(e){t.$message.error("出错了，请刷新页面重试！"),t.tips_visible=!1,t.loading=!1}))},table_change:function(t){console.log("e",t),t.current&&t.current>0&&(this.pagination.current=t.current,this.page=t.current,this.getList())},dateOnChange:function(t,e){this.search.date=e,console.log("search",this.search)},searchList:function(){console.log("search",this.search),this.page=1;var t={current:1};this.table_change(t)},resetList:function(){this.search={order_type:"1",business_type:"",order_status:"0",date:""},this.search_data=null,this.getList()}}},d=c,_=(a("1175"),a("0c7c")),u=Object(_["a"])(d,i,s,!1,null,"1e5e41ff",null);e["default"]=u.exports},eb25:function(t,e,a){"use strict";a("4576")}}]);