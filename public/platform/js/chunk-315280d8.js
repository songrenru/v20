(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-315280d8"],{1349:function(e,t,o){"use strict";o("810f")},"74ea":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("a-modal",{attrs:{title:e.modelTitle,width:900,visible:e.visible,"confirm-loading":e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleSubCancel}},[o("a-form-model",{ref:"ruleForm",attrs:{model:e.shopForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[o("div",{staticClass:"add_space"},[o("a-form-model-item",{attrs:{label:"是否是合作店铺",prop:"type"}},[o("a-radio-group",{attrs:{name:"radioGroup","default-value":1},model:{value:e.shopForm.type,callback:function(t){e.$set(e.shopForm,"type",t)},expression:"shopForm.type"}},[o("a-radio",{attrs:{value:1}},[e._v("是")]),o("a-radio",{attrs:{value:2}},[e._v("否")])],1)],1),o("a-form-model-item",{attrs:{label:"店铺名称",prop:"bind_m_id"}},[o("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"请选择","filter-option":e.filterOption,value:e.shopForm.bind_m_id},on:{change:e.handleSelectChange}},e._l(e.searchshopList,(function(t,r){return o("a-select-option",{attrs:{value:t.store_id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),o("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[o("a-textarea",{staticStyle:{padding:"5px width:200px",height:"100px",resize:"none"},attrs:{placeholder:"请输入"},model:{value:e.shopForm.remark,callback:function(t){e.$set(e.shopForm,"remark",t)},expression:"shopForm.remark"}})],1)],1)])],1)},a=[],i=(o("d81d"),o("b0c0"),o("a0e0")),s={props:{visible:{type:Boolean,default:!1},modelTitle:{type:String,default:""},shop_type:{type:String,default:""},shop_id:{type:String,default:""}},watch:{shop_id:{immediate:!0,handler:function(e){"edit"==this.shop_type&&this.getShopInfo()}},visible:{immediate:!0,handler:function(e){e&&this.getShopList()}}},data:function(){return{confirmLoading:!1,labelCol:{span:4},wrapperCol:{span:14},shopForm:{type:1,bind_m_id:""},rules:{m_name:[{required:!0,message:"请输入店铺名称",trigger:"blur"}],bind_m_id:[{required:!0,message:"请选择绑定店铺",trigger:"blur"}]},searchshopList:[]}},methods:{clearForm:function(){this.shopForm={type:1,bind_m_id:""}},handleSubmit:function(e){var t=this;this.confirmLoading=!0,this.$refs.ruleForm.validate((function(e){if(!e)return console.log("error submit!!"),t.confirmLoading=!1,!1;var o=t,r=i["a"].add_park_shop;"edit"==t.shop_type&&(r=i["a"].edit_park_shop),o.request(r,o.shopForm).then((function(e){"edit"==t.shop_type?o.$message.success("编辑成功！"):o.$message.success("添加成功！"),t.$emit("closeShop",!0),t.clearForm(),t.confirmLoading=!1})).catch((function(e){t.confirmLoading=!1}))}))},handleSubCancel:function(e){this.$refs.ruleForm.resetFields(),this.confirmLoading=!1,this.$emit("closeShop",!1),this.clearForm()},getShopInfo:function(){var e=this;e.shop_id&&e.request(i["a"].getParkShopInfo,{m_id:e.shop_id}).then((function(t){e.shopForm=t}))},getShopList:function(){var e=this;e.request(i["a"].shop_search,{}).then((function(t){e.searchshopList=t}))},search_shop:function(){var e=this;e.shopForm.m_name&&""!=e.shopForm.m_name&&1==e.shopForm.type&&e.request(i["a"].shop_search,{m_name:e.shopForm.m_name}).then((function(t){e.searchshopList=t})),""==e.shopForm.m_name&&(e.searchshopList=[])},handleSelectChange:function(e){var t=this;this.searchshopList.map((function(o){o.store_id==e&&(t.shopForm.m_name=o.name)})),this.shopForm.bind_m_id=e,this.$forceUpdate()},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},n=s,l=(o("1349"),o("2877")),p=Object(l["a"])(n,r,a,!1,null,"5e70c222",null);t["default"]=p.exports},"810f":function(e,t,o){}}]);