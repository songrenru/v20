(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-726372de","chunk-4f17862c","chunk-2d0b3786"],{"1a49":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,width:640,visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"用户名称",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:t.detail.name,rules:[{required:!0,message:"请输入搜索词名称"}]}],expression:"[\n            'name',\n            { initialValue: detail.name, rules: [{ required: true, message: '请输入搜索词名称' }] },\n          ]"}]}),a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.getRandNames()}}},[t._v("随机姓名")])],1),a("a-form-item",{attrs:{label:"用户头像",help:"建议100*100px",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-upload",{attrs:{name:"reply_pic","file-list":t.avatarFileList,action:t.uploadImg,headers:t.headers},on:{change:t.avatarImgChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 上传图片")],1)],1)],1)],1)],1)],1)},i=[],n=a("2909"),r=(a("b0c0"),a("fb6a"),a("d81d"),a("5c08")),s=a("7b3f"),l={data:function(){return{title:"新增机器人",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),detail:{id:0,name:"",avatar:""},id:"0",uploadImg:"/v20/public/index.php"+s["a"].uploadImg+"?upload_dir=/system/robot",avatarFileList:[],headers:{authorization:"authorization-text"}}},mounted:function(){},methods:{add:function(){this.visible=!0,this.id="0",this.detail={id:0,name:"",avatar:""},this.avatarFileList=[]},edit:function(t){this.visible=!0,this.id=t,this.avatarFileList=[],this.getEditInfo(),this.id>0?this.title="编辑机器人":this.title="新增机器人"},getRandNames:function(){var t=this;this.request(r["a"].getRandName,{}).then((function(e){t.detail.name=e}))},avatarImgChange:function(t){var e=this,a=Object(n["a"])(t.fileList);a=a.slice(-1),a=a.map((function(a){return a.response&&(a.url=a.response.data.full_url,e.detail.avatar=t.file.response.data.image),a})),this.avatarFileList=a,console.log(this.avatarFileList,"this.avatarFileList"),"done"===t.file.status?console.log("done"):"error"===t.file.status&&(console.log("error"),this.$message.error("".concat(t.file.name," 上传失败.")))},handleSubmit:function(){var t=this,e=this.form.validateFields;this.confirmLoading=!0,e((function(e,a){if(e)t.confirmLoading=!1;else{if(a.id=t.id,a.avatar=t.detail.avatar,""==a.avatar)return t.$message.error("请上传头像"),void(t.confirmLoading=!1);t.request(r["a"].editRobot,a).then((function(e){t.id>0?t.$message.success("编辑成功"):t.$message.success("添加成功"),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1,t.$emit("ok",a)}),1500)})).catch((function(e){t.confirmLoading=!1}))}}))},handleCancel:function(){this.visible=!1,this.id="0",this.form=this.$form.createForm(this)},getEditInfo:function(){var t=this;this.request(r["a"].getRobotDetail,{id:this.id}).then((function(e){if(t.detail=e,e.avatar){var a={uid:"1",name:e.avatar,status:"done",url:e.avatar};t.avatarFileList.push(a)}}))}}},c=l,d=a("0c7c"),u=Object(d["a"])(c,o,i,!1,null,null,null);e["default"]=u.exports},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var o=a("6b75");function i(t){if(Array.isArray(t))return Object(o["a"])(t)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var r=a("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return i(t)||n(t)||Object(r["a"])(t)||s()}},"5c08":function(t,e,a){"use strict";var o={getRobotList:"/common/platform.robot/getRobotList",getRobotDetail:"/common/platform.robot/getRobotDetail",editRobot:"/common/platform.robot/editRobot",delRobot:"/common/platform.robot/delRobot",getRandName:"/common/platform.robot/getRandName"};e["a"]=o},"7b3f":function(t,e,a){"use strict";var o={uploadImg:"/common/common.UploadFile/uploadImg"};e["a"]=o},"983a":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"24px 0 0"},attrs:{id:"components-layout-demo-basic"}},[a("a-page-header",{staticStyle:{padding:"0 0 16px 0"},attrs:{title:"机器人管理"}},[a("template",{slot:"extra"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.$refs.RobotEditModal.add()}}},[t._v("添加机器人")])],1),a("div",{staticStyle:{color:"#999"}},[t._v("提供各业务所需数据")])],2),a("a-card",[a("a-table",{attrs:{columns:t.columns,"data-source":t.robotList,rowKey:"id",loading:t.loading,pagination:t.pagination},on:{change:t.tableChange},scopedSlots:t._u([{key:"avatar",fn:function(t){return a("span",{},[a("div",{staticClass:"img-wrap"},[a("img",{staticClass:"goods-image",attrs:{src:t}})])])}},{key:"action",fn:function(e,o){return a("span",{},[a("a-popconfirm",{staticClass:"ant-dropdown-link",attrs:{title:"确认删除?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(e){return t.deleteRobot(o.id)},cancel:t.cancel}},[a("a-button",{attrs:{type:"link"}},[t._v("删除")])],1)],1)}}])})],1),a("robot-edit",{ref:"RobotEditModal",on:{ok:t.handleOk}})],1)},i=[],n=a("5c08"),r=a("1a49"),s=[],l={name:"robotList",components:{robotEdit:r["default"]},data:function(){return{form:this.$form.createForm(this),queryParam:{page:1},columns:[{title:"编号",dataIndex:"id",width:"15%"},{title:"机器人名称",dataIndex:"name",width:"20%"},{title:"机器人头像  ",width:"20%",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"添加时间",dataIndex:"create_time",width:"20%"},{title:"操作",dataIndex:"action",width:"20%",scopedSlots:{customRender:"action"}}],pagination:{pageSize:10,total:0,"show-total":function(t){return"共 ".concat(t," 条记录")},"show-quick-jumper":!0},selectedRowKeys:s,robotList:[],loading:!1}},created:function(){},mounted:function(){this.getRobotList()},computed:{hasSelected:function(){return this.selectedRowKeys.length>0}},methods:{getRobotList:function(){var t=this;this.loading=!0,this.request(n["a"].getRobotList,this.queryParam).then((function(e){t.robotList=e.list,t.pagination.total=e.total,t.loading=!1}))},onSelectChange:function(t){console.log("selectedRowKeys changed: ",t),this.selectedRowKeys=t},deleteRobot:function(t){var e=this;this.request(n["a"].delRobot,{id:t}).then((function(t){e.getRobotList(),e.$message.success("删除成功")}))},tableChange:function(t){t.current&&t.current>0&&(this.queryParam["page"]=t.current,this.getRobotList())},cancel:function(){},handleOk:function(){this.getRobotList()}}},c=l,d=(a("de9a"),a("0c7c")),u=Object(d["a"])(c,o,i,!1,null,"68633d43",null);e["default"]=u.exports},de9a:function(t,e,a){"use strict";a("f4e8")},f4e8:function(t,e,a){}}]);