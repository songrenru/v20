(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62b49e78"],{ad42:function(t,e,i){"use strict";i("bc755")},bc755:function(t,e,i){},da83:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showTemplate?i("a-drawer",{attrs:{visible:t.showTemplate,title:"新版打印模板设置",width:1300},on:{close:t.handleCancel}},[t.showTemplate?i("a-modal",{attrs:{title:"【"+t.modelTitle+"】自定义字段",visible:t.showModel},on:{ok:t.confirmModel,cancel:t.cancelModel}},[i("a-input",{attrs:{placeholder:"请输入自定义内容"},model:{value:t.customName,callback:function(e){t.customName=e},expression:"customName"}})],1):t._e(),i("a-collapse",{attrs:{accordion:""}},[i("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[t._v(" 注意："),i("br"),t._v(" 1、仅页眉和页脚支持换行"),i("br"),t._v(" 2、选择自定义时，需要填写自定义名称且不能和模板字段名称重复"),i("br"),t._v(" 3、所有自定义字段均为空白字头，不支持自动填充"),i("br"),t._v(" 4、自定义字段名称最长8位"),i("br"),t._v(" 5、系统关键词："),t._l(t.templateKeyword,(function(e,s){return i("span",{key:s},[t._v(t._s(e)+" "+t._s(s!=t.templateKeyword.length-1?"、":""))])})),i("br"),i("strong",[t._v("6、模板配置中页眉区标题不选或打印标题不填，打印时则不展示账单标题")]),t._v(" "),i("br"),t._v(" 7、起度和止度只对 水费、电费、燃气费账单打印有效，且只支持新版收费。"),i("br"),t._v(" 8、收款员显示问题，只针对批量打印订单的情况，订单中只要有自动缴费的，收款员就显示自动缴费，否则就判断是否有平台缴费且没有收款人信息的，如果有就显示平台缴费，最后如果订单中没有自动缴费，且没有平台缴费(没有收款人信息)的，收款员就显示第一笔订单的收款人"),i("br"),t._v(" 9、"),i("strong",[t._v("NO")]),t._v(" 是打印模板编号，同一订单同一模板编号不变，同一订单不同模板编号不一样，批量打印同理。"),i("br"),t._v(" 10、模板中的 "),i("strong",[t._v("备注")]),t._v(" 是统计所选打印订单中有备注的条数，当统计条数小于2时，展示备注内容。"),i("br"),t._v(" 11、页眉区中的"),i("strong",[t._v("收款人")]),t._v(",如果存在多个账单一起打印，以最后一个账单的收款人为准。 "),i("br")],2)],1),i("div",{staticClass:"plate_content"},[i("div",{staticClass:"left_menu"},[i("div",{staticClass:"page_header",style:{border:1==t.activeType?"0.5px dashed red":""}},[i("div",{staticClass:"header_content"},[i("div",{staticClass:"left_title"},[t._v("页眉区")]),i("div",{staticClass:"right_selet"},[i("div",{staticClass:"select_list"},[i("a-select",{staticStyle:{width:"140px"},attrs:{size:"small","label-in-value":"",placeholder:"请选择显示内容",allowClear:!0},on:{change:t.handleChange}},t._l(t.selectList1,(function(e,s){return i("a-select-option",{key:e.configure_id},[t._v(" "+t._s(e.title)+" ")])})),1)],1),i("div",{staticClass:"select_confirm"},[i("a-tooltip",{attrs:{placement:"topLeft",title:"点击可填写自定义名称且不能和模板字段名称重复"}},[i("a-button",{staticStyle:{"font-size":"12px"},attrs:{size:"small",type:"primary"},on:{click:function(e){return t.customThis(1)}}},[t._v(" 自定义 ")])],1)],1)])]),i("div",{staticClass:"line"}),i("div",{staticClass:"selected_content"},t._l(t.printList,(function(e,s){return 1==e.print_type?i("div",{key:s,staticClass:"select_item"},[t._v(" "+t._s(e.title)+" "),i("span",{staticClass:"reduce_item",on:{click:function(i){return t.reduceItem(e.key)}}},[t._v("x")])]):t._e()})),0)]),2==t.templateType?i("div",{staticClass:"page_header",style:{border:4==t.activeType?"0.5px dashed red":""}},[i("div",{staticClass:"header_content"},[i("div",{staticClass:"left_title"},[t._v("表格顶部区")]),i("div",{staticClass:"right_selet"},[i("div",{staticClass:"select_list"},[i("a-select",{staticStyle:{width:"140px"},attrs:{size:"small","label-in-value":"",placeholder:"请选择显示内容",allowClear:!0},on:{change:t.handleChange}},t._l(t.selectList4,(function(e,s){return i("a-select-option",{key:e.configure_id},[t._v(" "+t._s(e.title)+" ")])})),1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"select_confirm"},[i("a-tooltip",{attrs:{placement:"topLeft",title:"点击可填写自定义名称且不能和模板字段名称重复"}},[i("a-button",{staticStyle:{"font-size":"12px"},attrs:{size:"small",type:"primary"},on:{click:function(e){return t.customThis(4)}}},[t._v(" 自定义 ")])],1)],1)])]),i("div",{staticClass:"line"}),i("div",{staticClass:"selected_content"},t._l(t.printList,(function(e,s){return 4==e.print_type?i("div",{key:s,staticClass:"select_item"},[t._v(" "+t._s(e.title)+" "),i("span",{staticClass:"reduce_item",on:{click:function(i){return t.reduceItem(e.key)}}},[t._v("x")])]):t._e()})),0)]):t._e(),i("div",{staticClass:"page_header",style:{border:2==t.activeType?"0.5px dashed red":""}},[i("div",{staticClass:"header_content"},[i("div",{staticClass:"left_title"},[t._v("表格区")]),i("div",{staticClass:"right_selet"},[i("div",{staticClass:"select_list"},[i("a-select",{staticStyle:{width:"140px"},attrs:{size:"small","label-in-value":"",placeholder:"请选择显示内容",allowClear:!0},on:{change:t.handleChange}},t._l(t.selectList2,(function(e,s){return i("a-select-option",{key:e.configure_id},[t._v(" "+t._s(e.title)+" ")])})),1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"select_confirm"},[i("a-tooltip",{attrs:{placement:"topLeft",title:"点击可填写自定义名称且不能和模板字段名称重复"}},[i("a-button",{staticStyle:{"font-size":"12px"},attrs:{size:"small",type:"primary"},on:{click:function(e){return t.customThis(2)}}},[t._v(" 自定义 ")])],1)],1)])]),i("div",{staticClass:"line"}),i("div",{staticClass:"selected_content"},t._l(t.printList,(function(e,s){return 2==e.print_type?i("div",{key:s,staticClass:"select_item"},[t._v(" "+t._s(e.title)+" "),i("span",{staticClass:"reduce_item",on:{click:function(i){return t.reduceItem(e.key)}}},[t._v("x")])]):t._e()})),0)]),2==t.templateType?i("div",{staticClass:"page_header",style:{border:5==t.activeType?"0.5px dashed red":""}},[i("div",{staticClass:"header_content"},[i("div",{staticClass:"left_title"},[t._v("表格底部三列区")]),i("div",{staticClass:"right_selet"},[i("div",{staticClass:"select_list"},[i("a-select",{staticStyle:{width:"140px"},attrs:{size:"small","label-in-value":"",placeholder:"请选择显示内容",allowClear:!0},on:{change:t.handleChange}},t._l(t.selectList5,(function(e,s){return i("a-select-option",{key:e.configure_id},[t._v(" "+t._s(e.title)+" ")])})),1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"select_confirm"},[i("a-tooltip",{attrs:{placement:"topLeft",title:"点击可填写自定义名称且不能和模板字段名称重复"}},[i("a-button",{staticStyle:{"font-size":"12px"},attrs:{size:"small",type:"primary"},on:{click:function(e){return t.customThis(5)}}},[t._v(" 自定义 ")])],1)],1)])]),i("div",{staticClass:"line"}),i("div",{staticClass:"selected_content"},t._l(t.printList,(function(e,s){return 5==e.print_type?i("div",{key:s,staticClass:"select_item"},[t._v(" "+t._s(e.title)+" "),i("span",{staticClass:"reduce_item",on:{click:function(i){return t.reduceItem(e.key)}}},[t._v("x")])]):t._e()})),0)]):t._e(),2==t.templateType?i("div",{staticClass:"page_header",style:{border:6==t.activeType?"0.5px dashed red":""}},[i("div",{staticClass:"header_content"},[i("div",{staticClass:"left_title"},[t._v("表格底部单行区")]),i("div",{staticClass:"right_selet"},[i("div",{staticClass:"select_list"},[i("a-select",{staticStyle:{width:"140px"},attrs:{size:"small","label-in-value":"",placeholder:"请选择显示内容",allowClear:!0},on:{change:t.handleChange}},t._l(t.selectList6,(function(e,s){return i("a-select-option",{key:e.configure_id},[t._v(" "+t._s(e.title)+" ")])})),1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"select_confirm"},[i("a-tooltip",{attrs:{placement:"topLeft",title:"点击可填写自定义名称且不能和模板字段名称重复"}},[i("a-button",{staticStyle:{"font-size":"12px"},attrs:{size:"small",type:"primary"},on:{click:function(e){return t.customThis(6)}}},[t._v(" 自定义 ")])],1)],1)])]),i("div",{staticClass:"line"}),i("div",{staticClass:"selected_content"},t._l(t.printList,(function(e,s){return 6==e.print_type?i("div",{key:s,staticClass:"select_item"},[t._v(" "+t._s(e.title)+" "),i("span",{staticClass:"reduce_item",on:{click:function(i){return t.reduceItem(e.key)}}},[t._v("x")])]):t._e()})),0)]):t._e(),i("div",{staticClass:"page_header",style:{border:3==t.activeType?"0.5px dashed red":""}},[i("div",{staticClass:"header_content"},[i("div",{staticClass:"left_title"},[t._v("页脚区")]),i("div",{staticClass:"right_selet"},[i("div",{staticClass:"select_list"},[i("a-select",{staticStyle:{width:"140px"},attrs:{size:"small","label-in-value":"",placeholder:"请选择显示内容",allowClear:!0},on:{change:t.handleChange}},t._l(t.selectList3,(function(e,s){return i("a-select-option",{key:e.configure_id},[t._v(" "+t._s(e.title)+" ")])})),1)],1),i("div",{staticClass:"select_confirm"},[i("a-tooltip",{attrs:{placement:"topLeft",title:"点击可填写自定义名称且不能和模板字段名称重复"}},[i("a-button",{staticStyle:{"font-size":"12px"},attrs:{size:"small",type:"primary"},on:{click:function(e){return t.customThis(3)}}},[t._v(" 自定义 ")])],1)],1)])]),i("div",{staticClass:"line"}),i("div",{staticClass:"selected_content"},t._l(t.printList,(function(e,s){return 3==e.print_type?i("div",{key:s,staticClass:"select_item"},[t._v(" "+t._s(e.title)+" "),i("span",{staticClass:"reduce_item",on:{click:function(i){return t.reduceItem(e.key)}}},[t._v("x")])]):t._e()})),0)])]),i("div",{staticClass:"right_table"},[i("div",{staticClass:"table_content"},[i("div",{staticClass:"table_header"},[i("div",{staticClass:"header_title",staticStyle:{"font-weight":"bold"}},[t._v(" 【"+t._s(t.templateName)+"】 预览区 ")]),i("div",{staticClass:"header_operate"},[i("a-button",{staticStyle:{"font-size":"12px"},attrs:{type:"primary",size:"small"},on:{click:t.saveThis}},[t._v(" 保存 ")])],1)]),i("div",{staticClass:"line"}),i("div",{staticClass:"main_content"},[-1!=t.printList.findIndex((function(t){return"标题"==t.title}))&&t.printObj.top_title?i("div",{staticClass:"print_table_title"},[t._v(" "+t._s(t.printObj.top_title)+" ")]):t._e(),t.printList.filter((function(t){return 1==t.print_type})).length>0?i("div",{staticClass:"module_one",style:{border:1==t.activeType?"0.5px dashed red":""}},[i("a-descriptions",{staticStyle:{"padding-top":"10px"},attrs:{column:t.col_num}},t._l(t.printList,(function(e,s){return"换行"!==e.title&&"标题"!==e.title&&1==e.print_type?i("a-descriptions-item",{key:s+30,staticStyle:{"white-space":"nowrap"},attrs:{span:t.jscolspan(t.printList[s+1],s,t.printList[s-1]),label:e.title}},[t._v(" "+t._s(e.value)+" ")]):t._e()})),1)],1):t._e(),i("div",{staticClass:"module_two"},[t.printList.filter((function(t){return 4==t.print_type})).length>0?i("div",{style:{border:4==t.activeType?"0.5px dashed red":""}},[2==t.templateType?i("div",{directives:[{name:"show",rawName:"v-show",value:t.printList.filter((function(t){return 4==t.print_type})).length>0,expression:"printList.filter(v=>v.print_type == 4).length>0"}],staticClass:"table_top"},t._l(t.printList.filter((function(t){return 4==t.print_type})),(function(e,s){return i("div",{key:s,staticClass:"header_item"},[t._v(t._s(e.title)+"：")])})),0):t._e()]):t._e(),t.printList.filter((function(t){return 2==t.print_type})).length>0?i("div",{style:{border:2==t.activeType?"0.5px dashed red":""}},[i("div",{staticClass:"table_container"},t._l(t.printList.filter((function(t){return 2==t.print_type})),(function(e,s){return i("div",{key:s,staticClass:"table_item",style:{width:1/t.printList.filter((function(t){return 2==t.print_type})).length*100+"%"}},[t._v(t._s(e.title))])})),0),t._l(2,(function(e,s){return i("div",{key:s+30,staticClass:"table_container"},t._l(t.printList.filter((function(t){return 2==t.print_type})),(function(e,n){return i("div",{key:n+s,staticClass:"table_item",style:{width:1/t.printList.filter((function(t){return 2==t.print_type})).length*100+"%"}})})),0)}))],2):t._e(),t.printList.filter((function(t){return 5==t.print_type})).length>0?i("div",{style:{border:5==t.activeType?"0.5px dashed red":""}},[2==t.templateType?i("div",{staticClass:"table_footer_one"},t._l(t.printList.filter((function(t){return 5==t.print_type})),(function(e,s){return i("div",{key:s,staticClass:"table_item",style:{width:1/t.printList.filter((function(t){return 5==t.print_type})).length*100+"%"}},[t._v(t._s(e.title)+"：")])})),0):t._e()]):t._e(),t.printList.filter((function(t){return 6==t.print_type})).length>0?i("div",{style:{border:6==t.activeType?"0.5px dashed red":""}},t._l(t.printList.filter((function(t){return 6==t.print_type})),(function(e,s){return 2==t.templateType?i("div",{key:s,staticClass:"table_footer_two"},[i("div",{staticClass:"left_title"},[t._v(t._s(e.title)+"：")]),i("div",{staticClass:"right_content"})]):t._e()})),0):t._e()]),t.printList.filter((function(t){return 3==t.print_type})).length>0?i("div",{staticClass:"module_three",style:{border:3==t.activeType?"0.5px dashed red":""}},[i("a-descriptions",{staticStyle:{"padding-top":"10px"},attrs:{column:t.col_num}},t._l(t.printList,(function(e,s){return"换行"!==e.title&&3==e.print_type?i("a-descriptions-item",{key:s+60,staticStyle:{"white-space":"nowrap"},attrs:{span:t.jscolspan(t.printList[s+1],s,t.printList[s-1]),label:e.title}},[t._v(" "+t._s(e.value)+" ")]):t._e()})),1)],1):t._e()])])])])],1):t._e()},n=[],l=(i("a9e3"),i("d81d"),i("c740"),i("4de4"),i("a434"),i("a0e0")),a={props:{showTemplate:{type:Boolean,default:!1},tempateId:{type:Number,default:0},templateName:{type:String,default:""}},data:function(){return{selectList1:[],selectList2:[],selectList3:[],selectList4:[],selectList5:[],selectList6:[],printObj:{},printList:[],templateKeyword:[],col_num:3,customName:"",showModel:!1,printType:0,modelTitle:"",templateType:1,activeType:0}},mounted:function(){this.getTemplateDetail()},methods:{handleCancel:function(t){var e=this;e.$confirm({title:"操作提示",cancelText:"继续操作",okText:"不保存且退出",content:"点击【不保存且退出】按钮可能会导致当前打印模板设置数据丢失，建议先确认是否已保存数据？",onOk:function(){e.$emit("closeThis")},onCancel:function(){}})},handleChange:function(t){var e=this;this.selectList1.map((function(i,s){if(i.configure_id==t.key)if("标题"==i.title){var n=e.printList.findIndex((function(t){return"标题"==t.title}));-1==n?(e.printList.push({id:i.configure_id,title:i.title,print_type:i.type,key:"e"+i.configure_id+(e.printList.length+1)}),e.activeType=1):e.$message.warn("你已经添加过标题了，不能重复添加")}else e.printList.push({id:i.configure_id,title:i.title,print_type:i.type,key:"e"+i.configure_id+(e.printList.length+1)}),e.activeType=1})),this.selectList2.map((function(i,s){i.configure_id==t.key&&(e.printList.push({id:i.configure_id,title:i.title,print_type:i.type,key:"e"+i.configure_id+(e.printList.length+1)}),e.activeType=2)})),this.selectList3.map((function(i,s){i.configure_id==t.key&&(e.printList.push({id:i.configure_id,title:i.title,print_type:i.type,key:"e"+i.configure_id+(e.printList.length+1)}),e.activeType=3)})),this.selectList4.map((function(i,s){i.configure_id==t.key&&(e.printList.filter((function(t){return 4==t.print_type})).length>=1*e.col_num?e.$message.warn("此项最多只能添加"+e.col_num+"个"):(e.printList.push({id:i.configure_id,title:i.title,print_type:i.type,key:"e"+i.configure_id+(e.printList.length+1)}),e.activeType=4))})),this.selectList5.map((function(i,s){i.configure_id==t.key&&(e.printList.filter((function(t){return 5==t.print_type})).length>=1*e.col_num?e.$message.warn("此项最多只能添加"+e.col_num+"个"):(e.printList.push({id:i.configure_id,title:i.title,print_type:i.type,key:"e"+i.configure_id+(e.printList.length+1)}),e.activeType=5))})),this.selectList6.map((function(i,s){i.configure_id==t.key&&(e.printList.push({id:i.configure_id,title:i.title,print_type:i.type,key:"e"+i.configure_id+(e.printList.length+1)}),e.activeType=6)})),console.log("this.activeType=====>",this.activeType)},getPrintCustom:function(t){var e=this;this.request(l["a"].getPrintCustomConfigureList,{type:t,template_id:this.tempateId}).then((function(i){1==t?e.selectList1=i:2==t?e.selectList2=i:3==t?e.selectList3=i:4==t?e.selectList4=i:5==t?e.selectList5=i:6==t&&(e.selectList6=i)}))},getTemplateDetail:function(){var t=this;this.request(l["a"].getTemplateDetail,{template_id:this.tempateId}).then((function(e){t.printObj=e.data,t.col_num=e.data.col_num,t.templateType=e.data.type,2==t.templateType?(t.getPrintCustom(1),t.getPrintCustom(2),t.getPrintCustom(3),t.getPrintCustom(4),t.getPrintCustom(5),t.getPrintCustom(6)):(t.getPrintCustom(1),t.getPrintCustom(2),t.getPrintCustom(3)),e.list.map((function(e,i){t.printList.push({id:e.id,print_type:e.print_type,title:e.title,key:"s"+e.id+(t.printList.length+1)})})),t.templateKeyword=e.template_key_word}))},reduceItem:function(t){var e=this;this.printList.map((function(i,s){i.key==t&&(e.printList.splice(s,1),e.activeType=i.print_type)}))},customThis:function(t){this.showModel=!0,this.printType=t,1==t?this.modelTitle="页眉区":2==t?this.modelTitle="表格区":3==t?this.modelTitle="页脚区":4==t?this.modelTitle="表格顶部区":5==t?this.modelTitle="表格底部三列区":6==t&&(this.modelTitle="表格底部单行区")},confirmModel:function(){var t=this.printType;""==this.customName?this.$message.warn("请先填写自定义内容"):this.customName.length>8?this.$message.warn("自定义内容不能超过8个字符"):(4==t?this.printList.filter((function(t){return 4==t.print_type})).length>=1*this.col_num?this.$message.warn("此项最多只能添加"+this.col_num+"个"):this.printList.push({id:"custom"+(this.printList.length+1),title:this.customName,print_type:t,key:"custom"+(this.printList.length+1)}):5==t&&this.printList.filter((function(t){return 5==t.print_type})).length>=1*this.col_num?this.$message.warn("此项最多只能添加"+this.col_num+"个"):this.printList.push({id:"custom"+(this.printList.length+1),title:this.customName,print_type:t,key:"custom"+(this.printList.length+1)}),this.showModel=!1,this.customName="")},cancelModel:function(){this.showModel=!1},saveThis:function(){var t=this;t.$confirm({title:"警告",content:"确定要保存当前修改吗？",onOk:function(){t.request(l["a"].addPrintTemplateCustom,{ids:t.printList,template_id:t.tempateId}).then((function(e){t.$message.success("保存成功！"),t.$emit("closeThis")}))},onCancel:function(){}})},jscolspan:function(t,e,i){return void 0===t?1:"换行"===t.title?this.col_num:"换行"!==t.title?1:void 0}}},r=a,c=(i("ad42"),i("2877")),o=Object(c["a"])(r,s,n,!1,null,"7a6fcfee",null);e["default"]=o.exports}}]);