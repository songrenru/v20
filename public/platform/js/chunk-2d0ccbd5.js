(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ccbd5"],{"4ee3":function(t,e,a){"use strict";a.r(e);a("b0c0");var n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"components-layout-demo-basic"}},[e("a-layout",[e("a-layout-content",{style:{margin:"24px 16px",padding:"24px",background:"#fff",minHeight:"100px"}},[e("a-tabs",{attrs:{"default-active-key":"1"}},[e("a-tab-pane",{key:"1",attrs:{tab:"分销员列表"}},[e("a-spin",{attrs:{spinning:t.spinning,size:"large"}},[e("div",{staticClass:"content"},[e("a-form-model",{staticStyle:{padding:"20px auto"},attrs:{layout:"inline"}},[e("a-row",{attrs:{type:"flex"}},[e("a-col",{staticStyle:{"padding-left":"29px"},attrs:{span:10}},[e("a-form-model-item",{attrs:{label:"姓名:"}},[e("a-input",{staticStyle:{width:"365px"},attrs:{placeholder:"请输入姓名"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),e("a-col",{attrs:{span:10}},[e("a-form-model-item",{attrs:{label:"绑定状态:"}},[e("a-select",{staticStyle:{width:"365px"},attrs:{placeholder:"绑定状态"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[e("a-select-option",{attrs:{value:1}},[t._v(" 待确认 ")]),e("a-select-option",{attrs:{value:2}},[t._v(" 已绑定 ")]),e("a-select-option",{attrs:{value:3}},[t._v(" 已拒绝 ")])],1)],1)],1),e("a-col",{staticClass:"text-right",attrs:{span:4}},[e("a-button",{staticClass:"mr-20",staticStyle:{"margin-top":"4px"},attrs:{type:"primary"},on:{click:function(e){return t.getPersonList()}}},[t._v(" 查询 ")]),e("a-button",{staticClass:"mr-20",attrs:{type:"warning"},on:{click:function(e){return t.reset()}}},[t._v(" 重置")])],1)],1)],1),e("a-form-model",{staticStyle:{padding:"30px auto"},attrs:{layout:"inline"}},[e("a-row",{attrs:{type:"flex"}},[e("a-col",{attrs:{span:10}},[e("a-form-model-item",{attrs:{label:"添加时间:"}},[e("a-range-picker",{staticStyle:{width:"365px"},attrs:{ranges:{"今日":[t.moment(),t.moment()],"近7天":[t.moment(),t.moment().add(7,"days")],"近15天":[t.moment(),t.moment().add(15,"days")],"近30天":[t.moment(),t.moment().add(30,"days")]},value:t.formData.time,format:"YYYY-MM-DD"},on:{change:t.onDateRangeChange}})],1)],1)],1)],1),e("a-row",{staticStyle:{"margin-bottom":"20px"}},[e("a-button",{staticClass:"mr-20",staticStyle:{"margin-top":"4px"},attrs:{type:"primary"},on:{click:function(e){return t.addStoreMarketingPerson()}}},[t._v(" 添加分销员 ")])],1),e("a-table",{attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination,rowKey:"id","row-selection":{selectedRowKeys:t.selectedRows,onChange:t.onSelectChange}},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"status",fn:function(a){return e("span",{},[1==a?e("a-badge",{attrs:{status:"processing",text:"待确认"}}):t._e(),2==a?e("a-badge",{attrs:{status:"success",text:"已绑定"}}):t._e(),3==a?e("a-badge",{attrs:{status:"error",text:"已拒绝"}}):t._e()],1)}},{key:"action",fn:function(a,n){return e("span",{},[e("a",{staticClass:"inline-block",on:{click:function(e){return t.$refs.editStoreMarketingPerson.edit(n.id,t.store_id)}}},[t._v("编辑")]),e("a",{staticClass:"ml-10 inline-block",on:{click:function(e){return t.delData(n.id,t.store_id)}}},[t._v("删除")])])}}])})],1)])],1),e("a-tab-pane",{key:"2",attrs:{tab:"分销记录","force-render":""}},[e("store-marketing-record",{ref:"storeMarketingRecord",attrs:{store_id:t.store_id}})],1)],1),e("add-store-marketing-person",{ref:"addStoreMarketingPerson",on:{ok:t.handleUpdate}}),e("edit-store-marketing-person",{ref:"editStoreMarketingPerson",on:{ok:t.handleUpdate}})],1)],1)],1)},s=[],o=(a("d81d"),a("c1df")),i=a.n(o),r=a("8e4c"),c=a("ddaa"),d=a("e2f9"),l=a("4648"),u=[],m=[{title:"昵称",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"手机号",dataIndex:"phone",scopedSlots:{customRender:"phone"}},{title:"抽成比例",dataIndex:"ratio_type",scopedSlots:{customRender:"ratio_type"},align:"center"},{title:"总业绩",dataIndex:"all_achievement",scopedSlots:{customRender:"all_achievement"},align:"center"},{title:"总抽成",dataIndex:"all_percentage",scopedSlots:{customRender:"all_percentage"},align:"center"},{title:"绑定状态",dataIndex:"status",scopedSlots:{customRender:"status"},align:"center"},{title:"添加时间",dataIndex:"create_time",scopedSlots:{customRender:"create_time"},align:"center",sortDirections:["descend","ascend"],sorter:function(t,e){return i()(t.create_time).unix()-i()(e.create_time).unix()}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],p={name:"StoreMarketingPerson",components:{StoreMarketingRecord:l["default"],EditStoreMarketingPerson:d["default"],AddStoreMarketingPerson:c["default"]},data:function(){return{spinning:!1,columns:m,selectedRows:u,data:[],store_id:this.$route.query.store_id,formData:{name:void 0,store_id:this.$route.query.store_id,start_time:"",end_time:"",status:void 0,time:[]},queryParam:{page:1,pageSize:10},pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(t){return"共 ".concat(t," 条记录")}}}},watch:{"$route.query.store_id":function(t){t&&(this.formData.store_id=t,this.store_id=t,this.getPersonList())}},mounted:function(){this.getPersonList()},methods:{moment:i.a,reset:function(){this.formData={store_id:this.$route.query.store_id,name:void 0,start_time:"",end_time:"",status:void 0,time:[],page:1},this.data=[],this.$set(this.pagination,"current",1),this.getPersonList()},getPersonList:function(){var t=this;this.selectedRows=[],this.request(r["a"].getPersonList,this.formData).then((function(e){t.data=e.list,t.pagination.total=e.count,t.areaList=e.areaList}))},delData:function(t,e){var a=this;this.$confirm({title:"是否确定删除该分销员?",centered:!0,onOk:function(){a.request(r["a"].delPerson,{id:t,store_id:e}).then((function(t){t&&a.getPersonList()}))},onCancel:function(){}})},addStoreMarketingPerson:function(){this.$refs.addStoreMarketingPerson.add(this.formData.store_id)},handleUpdate:function(){this.reset()},changeArea:function(t){this.formData.province_id=t[0]||0,this.formData.city_id=t[1]||0,this.formData.area_id=t[2]||0,this.formData.check_areaList=[t[0],t[1],t[2]]},date_moment:function(t,e){return t?i()(t,e):null},onDateRangeChange:function(t,e){this.$set(this.formData,"time",[t[0],t[1]]),this.$set(this.formData,"start_time",e[0]),this.$set(this.formData,"end_time",e[1])},onSelectChange:function(t,e){var a=this;this.selectedRows=[],this.total_num=e.length,this.achievement=0;var n=0;e.length&&e.map((function(t){a.selectedRows.push(t.id),n+=1*t.total_performance})),this.achievement=n},handleTableChange:function(t){t.current&&t.current>0&&(this.queryParam["page"]=t.current)},onPageChange:function(t,e){this.formData.page=t,this.queryParam.page=t,this.$set(this.pagination,"current",t)},onPageSizeChange:function(t,e){this.$set(this.pagination,"pageSize",e)}}},h=p,g=a("2877"),f=Object(g["a"])(h,n,s,!1,null,"7e32410b",null);e["default"]=f.exports}}]);