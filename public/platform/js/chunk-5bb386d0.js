(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bb386d0"],{"126e":function(e,a,t){"use strict";var r={regionalAgencyList:"/new_marketing/platform.RegionalAgency/regionalAgencyList",findArea:"/new_marketing/platform.RegionalAgency/findArea",findRight:"/new_marketing/platform.RegionalAgency/findRight",findRightEdit:"/new_marketing/platform.RegionalAgency/findRightEdit",addRegionalAgency:"/new_marketing/platform.RegionalAgency/addRegionalAgency",editRegionalAgency:"/new_marketing/platform.RegionalAgency/editRegionalAgency",saveRegionalAgency:"/new_marketing/platform.RegionalAgency/saveRegionalAgency",delRegionalAgency:"/new_marketing/platform.RegionalAgency/delRegionalAgency",reduceWin:"/new_marketing/platform.RegionalAgency/reduceWin",addReduce:"/new_marketing/platform.RegionalAgency/addReduce",getTeamList1:"/new_marketing/platform.RegionalAgency/getTeamList",updatePercent:"/new_marketing/platform.RegionalAgency/updatePercent",getMarketingArtisanList:"/new_marketing/platform.MarketingArtisan/getMarketingArtisanList",getMarketingArtisanCreate:"/new_marketing/platform.MarketingArtisan/getMarketingArtisanCreate",getMarketingArtisanInfo:"/new_marketing/platform.MarketingArtisan/getMarketingArtisanInfo",getMarketingArtisanDir:"/new_marketing/platform.MarketingArtisan/getMarketingArtisanDir",getDirectorList:"/new_marketing/platform.MarketingArtisan/getDirectorList",getMarketingArtisanDel:"/new_marketing/platform.MarketingArtisan/getMarketingArtisanDel",getMarketingDirectorList:"/new_marketing/platform.MarketingDirector/getMarketingDirectorList",getMarketingDirectorCreate:"/new_marketing/platform.MarketingDirector/getMarketingDirectorCreate",getMarketingDirectorInfo:"/new_marketing/platform.MarketingDirector/getMarketingDirectorInfo",getMarketingDirectorDel:"/new_marketing/platform.MarketingDirector/getMarketingDirectorDel",getMarketingDirectorRemove:"/new_marketing/platform.MarketingDirector/getMarketingDirectorRemove",getMarketingDirectorArtisan:"/new_marketing/platform.MarketingDirector/getMarketingDirectorArtisan",getManagerList:"/new_marketing/platform.ServiceManager/serviceManagerList",addManager:"/new_marketing/platform.ServiceManager/addServiceManager",editManager:"/new_marketing/platform.ServiceManager/saveServiceManager",delNoTeamManager:"/new_marketing/platform.ServiceManager/doDelManager",getTeamMemberList:"/new_marketing/platform.ServiceManager/getTeamPerson",upgradeManager:"/new_marketing/platform.ServiceManager/doUpLevel",deleteManager:"/new_marketing/platform.ServiceManager/doDelServiceManager",demoteManager:"/new_marketing/platform.ServiceManager/doDownLevel",getAreaList:"/new_marketing/platform.Region/regionList",getClassifyPriceList:"/new_marketing/platform.Region/classPriceList",saveAreaPriceForm:"/new_marketing/platform.Region/addRegion",saveClassifyPriceForm:"/new_marketing/platform.Region/addClassPrice",deleteAreaPriceForm:"/new_marketing/platform.Region/delRegion",getAreaMealList:"/new_marketing/platform.MarketingPackage/getAreaSearchList",saveAreaMealForm:"/new_marketing/platform.MarketingPackage/editAreaPost",saveAreaMealStatus:"/new_marketing/platform.MarketingPackage/setAreaStatus",getStoreTypeList:"/new_marketing/platform.MarketingPackage/getStoreTypeList",addMeal:"/new_marketing/platform.MarketingPackage/add",getMealList:"/new_marketing/platform.MarketingPackage/getSearchList",deleteMeal:"/new_marketing/platform.MarketingPackage/del",editMeal:"/new_marketing/platform.MarketingPackage/editPost",getCommissionSearchData:"/new_marketing/platform.MarketingPersonSettle/getSearchData",getCommissionList:"/new_marketing/platform.MarketingPersonSettle/getSearchList",teamManagementList:"/new_marketing/platform.TeamManagement/teamManagementList",teamPerformance:"/new_marketing/platform.TeamManagement/teamPerformance",serviceManagerList:"/new_marketing/platform.TeamManagement/serviceManagerList",serviceManagerNoList:"/new_marketing/platform.TeamManagement/serviceManagerNoList",regionalAgentList:"/new_marketing/platform.TeamManagement/regionalAgentList",artisanList:"/new_marketing/platform.TeamManagement/artisanList",teamManagementAdd:"/new_marketing/platform.TeamManagement/teamManagementAdd",teamManagementBasic:"/new_marketing/platform.TeamManagement/teamManagementBasic",teamManagementReplace:"/new_marketing/platform.TeamManagement/teamManagementReplace",teamManagementUpgrade:"/new_marketing/platform.TeamManagement/teamManagementUpgrade",teamBusinessList:"/new_marketing/platform.TeamManagement/teamBusinessList",teamManagementDel:"/new_marketing/platform.TeamManagement/teamManagementDel",teamManagementTransfer:"/new_marketing/platform.TeamManagement/teamManagementTransfer",teamManagementDiss:"/new_marketing/platform.TeamManagement/teamManagementDiss",teamMemberAdd:"/new_marketing/platform.TeamManagement/teamMemberAdd",teamManagementEdit:"/new_marketing/platform.TeamManagement/teamManagementEdit",teamMemberEdit:"/new_marketing/platform.TeamManagement/teamMemberEdit",teamMemberCode:"/new_marketing/platform.TeamManagement/teamMemberCode",teamManagementSavage:"/new_marketing/platform.TeamManagement/teamManagementSavage",teamManagementMerchantList:"/new_marketing/platform.TeamManagement/teamManagementMerchantList",teamManagementSavageDetail:"/new_marketing/platform.TeamManagement/teamManagementSavageDetail",getCommunityOrderDetail:"/new_marketing/platform.TeamManagement/getCommunityOrderDetail",positionReviewList:"/new_marketing/platform.PositionReview/positionReviewList",getTeamList:"/new_marketing/platform.PositionReview/getTeamList",reviewAgree:"/new_marketing/platform.PositionReview/reviewAgree",reviewDisagree:"/new_marketing/platform.PositionReview/reviewDisagree",getOrderList:"/new_marketing/platform.OrderInfo/orderList",getAreaUidByProvince:"/new_marketing/platform.OrderInfo/getAreaUidByProvince",getTeamIdByAreaUid:"/new_marketing/platform.OrderInfo/getTeamIdByAreaUid",getOrderDetail:"/new_marketing/platform.OrderInfo/getOrderInfo",teamManagementMerchantTransferList:"/new_marketing/platform.TeamManagement/teamManagementMerchantTransferList",teamManagementMerchantTransferCreate:"/new_marketing/platform.TeamManagement/teamManagementMerchantTransferCreate",getMerchantList:"/new_marketing/platform.Merchant/getMerchantList",getMerchantStoreList:"/new_marketing/platform.Merchant/getMerchantStoreList",teamMembeInfo:"/new_marketing/platform.TeamManagement/teamMembeInfo",getPropertyList:"/new_marketing/platform.MarketingProperty/getPropertyList",villageTransferBusiness:"/new_marketing/platform.MarketingProperty/transferBusiness",teamMerchantOrderList:"/new_marketing/platform.TeamManagement/teamMerchantOrderList",getHousePropertyList:"/new_marketing/platform.HouseProperty/getHousePropertyList",getHousePropertyDetail:"/new_marketing/platform.HouseProperty/getHousePropertyDetail"};a["a"]=r},"8b06":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"relative container"},[t("a-card",{directives:[{name:"show",rawName:"v-show",value:!e.showAreaPriceDetail,expression:"!showAreaPriceDetail"}],attrs:{title:"店铺价格设置",bordered:!1}},[t("div",{staticClass:"mb-20"},[e._v("平台为不同省创建不同的店铺（套餐）价格")]),t("div",{staticClass:"mb-20"},[t("a-button",{attrs:{type:"primary"},on:{click:function(a){e.showAreaAdd=!0}}},[e._v("创建地区价格")])],1),t("a-table",{attrs:{columns:e.areaPriceColumns,rowKey:"id","data-source":e.areaPriceList,pagination:e.areaPagination},scopedSlots:e._u([{key:"region",fn:function(a){return t("div",{},e._l(a,(function(a,r){return t("span",{key:r,staticClass:"ml-10"},[e._v(e._s(a))])})),0)}},{key:"sort",fn:function(a,r,i){return t("div",{},[t("a-input-number",{attrs:{value:a},on:{change:function(a){return e.areaHandleChange(a,"sort",r,i)}}})],1)}},{key:"status",fn:function(a,r,i){return t("div",{},[t("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关",checked:!!a},on:{change:function(a){return e.areaHandleChange(a,"status",r,i)}}})],1)}},{key:"action",fn:function(a,r){return t("span",{},[t("a-button",{attrs:{type:"link"},on:{click:function(a){return e.actionBtn(a,"editAreaPrice",r)}}},[e._v("编辑")]),t("a-button",{attrs:{type:"link"},on:{click:function(a){return e.actionBtn(a,"deleteAreaPrice",r)}}},[e._v("删除")])],1)}}])}),t("a-modal",{attrs:{title:"创建地区价格",width:640,destroyOnClose:!0,visible:e.showAreaAdd},on:{cancel:function(a){e.showAreaAdd=!1}}},[t("a-form-model",{ref:"areaPriceForm",attrs:{model:e.areaPriceForm,rules:e.areaPriceFormRules,"label-col":{span:4,offset:4},"wrapper-col":{span:10}}},[t("a-form-model-item",{attrs:{label:"区域名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"输入目标区域名称"},model:{value:e.areaPriceForm.name,callback:function(a){e.$set(e.areaPriceForm,"name",a)},expression:"areaPriceForm.name"}})],1),t("a-form-model-item",{attrs:{label:"绑定区域"}},[t("a-select",{attrs:{mode:"multiple",showArrow:!0,placeholder:"请选择区域"},model:{value:e.areaPriceForm.region,callback:function(a){e.$set(e.areaPriceForm,"region",a)},expression:"areaPriceForm.region"}},e._l(e.region_list,(function(a){return t("a-select-option",{key:a.area_id},[e._v(" "+e._s(a.area_name)+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"排序"}},[t("a-input-number",{model:{value:e.areaPriceForm.sort,callback:function(a){e.$set(e.areaPriceForm,"sort",a)},expression:"areaPriceForm.sort"}})],1),t("a-form-model-item",{attrs:{label:"状态"}},[t("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关"},model:{value:e.areaPriceForm.status,callback:function(a){e.$set(e.areaPriceForm,"status",a)},expression:"areaPriceForm.status"}})],1)],1),t("template",{slot:"footer"},[t("a-button",{on:{click:function(a){e.showAreaAdd=!1}}},[e._v("取消")]),t("a-button",{attrs:{htmlType:"submit",type:"primary"},on:{click:e.saveAreaPriceForm}},[e._v("确定")])],1)],2)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showAreaPriceDetail,expression:"showAreaPriceDetail"}]},[t("div",[t("a-card",{attrs:{bordered:!1}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("a-breadcrumb",[t("a-breadcrumb-item",[t("span",{staticClass:"pointer",on:{click:function(a){e.showAreaPriceDetail=!1}}},[e._v("店铺价格设置")])]),t("a-breadcrumb-item",[t("span",{staticClass:"cr-primary"},[e._v("创建价格详情")])])],1)],1),t("a-form-model",{ref:"areaPriceForm",attrs:{model:e.areaPriceForm,rules:e.areaPriceFormRules,"label-col":{span:2},"wrapper-col":{span:10}}},[t("a-row",[t("a-col",{staticClass:"title",attrs:{span:2}},[e._v("基本信息")])],1),t("a-form-model-item",{attrs:{label:"区域名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"输入目标区域名称"},model:{value:e.areaPriceForm.name,callback:function(a){e.$set(e.areaPriceForm,"name",a)},expression:"areaPriceForm.name"}})],1),t("a-form-model-item",{attrs:{label:"绑定区域"}},[t("a-select",{attrs:{mode:"multiple",showArrow:!0,placeholder:"请选择区域"},model:{value:e.areaPriceForm.region,callback:function(a){e.$set(e.areaPriceForm,"region",a)},expression:"areaPriceForm.region"}},e._l(e.region_list,(function(a){return t("a-select-option",{key:a.area_id},[e._v(" "+e._s(a.area_name)+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"排序"}},[t("a-input-number",{model:{value:e.areaPriceForm.sort,callback:function(a){e.$set(e.areaPriceForm,"sort",a)},expression:"areaPriceForm.sort"}})],1),t("a-form-model-item",{attrs:{label:"状态"}},[t("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关"},model:{value:e.areaPriceForm.status,callback:function(a){e.$set(e.areaPriceForm,"status",a)},expression:"areaPriceForm.status"}})],1)],1)],1),t("a-card",{staticStyle:{"margin-top":"20px"},attrs:{bordered:!1,"tab-list":e.tabList,"active-tab-key":e.activeTab},on:{tabChange:e.onTabChange}},["classify"===e.activeTab?t("div",[t("div",{staticClass:"mb-20"},[e._v(" 店铺主分类编辑为必设置项，若不设置 此区域商家购买时该店铺分类不展示；且子分类店铺年费支持单独设置 ")]),t("a-table",{attrs:{rowKey:"cat_id",columns:e.classifyPriceColumns,"data-source":e.classifyPriceList,pagination:e.classifyPagination},scopedSlots:e._u([{key:"sort",fn:function(a,r){return t("div",{},[t("a-input-number",{attrs:{value:a},on:{change:function(a){return e.classifyHandleChange(a,"sort",r)}}})],1)}},{key:"year_price",fn:function(a){return t("span",{},["未设置"==a||"0.00"==a?t("span",{staticStyle:{color:"#1890ff"}},[e._v("未设置")]):t("span",[e._v(e._s(a))])])}},{key:"discount_type",fn:function(a){return t("span",{},[1==a?t("span",[e._v("周年优惠")]):2==a?t("span",[e._v("单独设置")]):3==a?t("span",[e._v("不设置优惠")]):t("span",{staticStyle:{color:"#1890ff"}},[e._v("未设置")])])}},{key:"action",fn:function(a,r){return t("span",{},[t("a-button",{attrs:{type:"link"},on:{click:function(a){return e.actionBtn(a,"editClassifyPrice",r)}}},[e._v("编辑")])],1)}}],null,!1,3890360768)})],1):t("div",[t("a-table",{attrs:{rowKey:"id",columns:e.mealColumns,"data-source":e.areaMealList,pagination:e.mealPagination},scopedSlots:e._u([{key:"year_price",fn:function(a){return t("span",{},["未设置"==a||"0.00"==a?t("span",{staticStyle:{color:"#1890ff"}},[e._v("未设置")]):t("span",[e._v(e._s(a))])])}},{key:"discount_type",fn:function(a){return t("span",{},[1==a?t("span",[e._v("周年优惠")]):2==a?t("span",[e._v("单独设置")]):3==a?t("span",[e._v("不设置优惠")]):t("span",{staticStyle:{color:"#1890ff"}},[e._v("未设置")])])}},{key:"status",fn:function(a,r,i){return t("span",{},[t("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关",checked:!!a},on:{change:function(a){return e.mealHandleChange(a,"status",r,i)}}})],1)}},{key:"action",fn:function(a,r){return t("span",{},[t("a-button",{attrs:{type:"link"},on:{click:function(a){return e.actionBtn(a,"editMealPrice",r)}}},[e._v("编辑")])],1)}}])})],1)])],1),t("a-modal",{attrs:{title:e.classifyPriceForm.name,width:660,destroyOnClose:!0,visible:e.showClassifyEdit},on:{cancel:function(a){e.showClassifyEdit=!1}}},[t("a-form-model",{ref:"classifyPriceForm",attrs:{model:e.classifyPriceForm,rules:e.classifyPriceFormRules,"label-col":{span:4},"wrapper-col":{span:16}}},[t("a-form-model-item",{attrs:{label:"统一年费",help:"年费为1/年的收费标准"+(1==e.classifyPriceForm.is_children?"":"，若子分类店铺未设置年费则以主分类年费为准"),prop:"year_price"}},[t("a-input-number",{attrs:{min:0},model:{value:e.classifyPriceForm.year_price,callback:function(a){e.$set(e.classifyPriceForm,"year_price",a)},expression:"classifyPriceForm.year_price"}}),t("span",{staticClass:"ml-10"},[e._v("元")])],1),t("a-form-model-item",{attrs:{label:"优惠方式","wrapper-col":{span:20},prop:"discount_type"}},[t("a-radio-group",{attrs:{name:"radioGroup"},model:{value:e.classifyPriceForm.discount_type,callback:function(a){e.$set(e.classifyPriceForm,"discount_type",a)},expression:"classifyPriceForm.discount_type"}},[t("a-radio",{attrs:{value:1}},[e._v(" 周年优惠 ")]),t("a-radio",{attrs:{value:2}},[e._v(" 单独设置 ")]),t("a-radio",{attrs:{value:3}},[e._v(" 不设置优惠 ")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:1==e.classifyPriceForm.discount_type,expression:"classifyPriceForm.discount_type == 1"}]},[t("a-row",{attrs:{type:"flex"}},[t("a-col",[e._v("设置优惠率：")]),t("a-col",{attrs:{span:20}},[t("a-input-number",{attrs:{min:0,max:100},model:{value:e.classifyPriceForm.discount_rate,callback:function(a){e.$set(e.classifyPriceForm,"discount_rate",a)},expression:"classifyPriceForm.discount_rate"}}),t("span",{staticClass:"ml-10"},[e._v("%")])],1)],1),t("div",{staticClass:"gray-tips"},[e._v(" 若优惠率5%，则周期1年按标准年费，周期2年总价按标准年费的95折，周期3年总价为9折... ")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:2==e.classifyPriceForm.discount_type,expression:"classifyPriceForm.discount_type == 2"}]},[e._l(e.classifyPriceForm.manual_price,(function(a,r){return t("div",{key:r},[t("a-row",{attrs:{type:"flex"}},[t("a-col",[e._v("第"+e._s(a.year)+"年费用：")]),t("a-col",{attrs:{span:16}},[t("a-input-number",{attrs:{min:0},model:{value:a.price,callback:function(t){e.$set(a,"price",t)},expression:"item.price"}}),t("span",{staticClass:"ml-10"},[e._v("元")]),t("span",{staticClass:"gray-tips ml-10"},[e._v("第"+e._s(a.year)+"年的单独年费")])],1),t("a-col",[t("a-icon",{directives:[{name:"show",rawName:"v-show",value:r>1,expression:"index > 1"}],staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o"},on:{click:function(a){return e.removeYearPrice(r)}}})],1)],1)],1)})),t("div",[t("a-button",{directives:[{name:"show",rawName:"v-show",value:e.classifyPriceForm.manual_price.length<4,expression:"classifyPriceForm.manual_price.length < 4"}],staticStyle:{"margin-left":"-20px"},attrs:{type:"link",icon:"plus"},on:{click:e.addYearPrice}},[e._v("添加购买年限")])],1)],2)],1),e.classifyPriceForm.cat_id?t("a-form-model-item",{attrs:{label:"排序",prop:"sort"}},[t("a-input-number",{model:{value:e.classifyPriceForm.sort,callback:function(a){e.$set(e.classifyPriceForm,"sort",a)},expression:"classifyPriceForm.sort"}})],1):e._e(),e.classifyPriceForm.package_id?t("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[t("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关"},model:{value:e.classifyPriceForm.status,callback:function(a){e.$set(e.classifyPriceForm,"status",a)},expression:"classifyPriceForm.status"}})],1):e._e()],1),t("template",{slot:"footer"},[t("a-button",{on:{click:function(a){e.showClassifyEdit=!1}}},[e._v("取消")]),t("a-button",{attrs:{htmlType:"submit",type:"primary"},on:{click:e.saveClassifyPriceForm}},[e._v("确定")])],1)],2),t("div",{staticClass:"footer flex align-center bg-ff"},[t("a-button",{on:{click:function(a){e.showAreaPriceDetail=!1}}},[e._v("取消")]),t("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:e.saveAreaPriceForm}},[e._v("保存")])],1)],1)],1)},i=[],n=(t("a434"),t("b0c0"),t("d81d"),t("126e")),s=[{title:"区域名称",dataIndex:"name",align:"center"},{title:"绑定区域",dataIndex:"region",align:"center",scopedSlots:{customRender:"region"}},{title:"排序",dataIndex:"sort",width:"10%",align:"center",scopedSlots:{customRender:"sort"}},{title:"状态",dataIndex:"status",align:"center",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"add_time",sortDirections:["descend","ascend"],sorter:function(e,a){return moment(e.place_time).unix()-moment(a.place_time).unix()},align:"center"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center"}],o=[{title:"店铺分类名称",dataIndex:"cat_name",key:"cat_name"},{title:"年费",dataIndex:"year_price",key:"year_price",align:"center",scopedSlots:{customRender:"year_price"}},{title:"优惠方式",dataIndex:"discount_type",key:"discount_type",align:"center",scopedSlots:{customRender:"discount_type"}},{title:"排序",dataIndex:"sort",key:"sort",width:"10%",align:"center",scopedSlots:{customRender:"sort"}},{title:"状态",dataIndex:"status_type",key:"status_type",align:"center"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center"}],c=[{title:"套餐名称",dataIndex:"name",align:"center"},{title:"店铺数量",dataIndex:"all_num",align:"center"},{title:"年费",dataIndex:"year_price",align:"center",scopedSlots:{customRender:"year_price"}},{title:"优惠方式",dataIndex:"discount_type",align:"center",scopedSlots:{customRender:"discount_type"}},{title:"下单总数量",dataIndex:"order_count",align:"center"},{title:"排序",dataIndex:"sort",width:"10%",align:"center"},{title:"状态",dataIndex:"status",align:"center",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"create_time",sortDirections:["descend","ascend"],sorter:function(e,a){return moment(e.place_time).unix()-moment(a.place_time).unix()},align:"center"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center"}],l={data:function(){var e=this;return{showAreaPriceDetail:!1,areaPriceColumns:s,areaPriceList:[],areaPagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,onChange:function(a,t){return e.onPageChange(a,t,"areaPagination")},onShowSizeChange:function(a,t){return e.onPageSizeChange(a,t,"areaPagination")},showTotal:function(e){return"共 ".concat(e," 条记录")}},areaPriceForm:{name:"",region:[],sort:0,status:!0,id:""},areaPriceFormRules:{name:[{required:!0,trigger:"blur",message:"请输入区域名称！"}]},showAreaAdd:!1,region_list:[],tabList:[{key:"classify",tab:"分类店铺价格"},{key:"meal",tab:"套餐设置"}],activeTab:"classify",classifyPriceList:[],classifyPagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,onChange:function(a,t){return e.onPageChange(a,t,"classifyPagination")},onShowSizeChange:function(a,t){return e.onPageSizeChange(a,t,"classifyPagination")},showTotal:function(e){return"共 ".concat(e," 条记录")}},expandedRowKeys:[],classifyPriceColumns:o,showClassifyEdit:!1,classifyPriceForm:{name:"",id:"",region_id:"",cat_id:"",year_price:0,discount_type:1,discount_rate:0,manual_price:[{year:2,price:0},{year:3,price:0}],sort:0,area_id:"",status:!0,package_id:""},classifyPriceFormRules:{year_price:[{required:!0,message:"请填写统一年费！"}],discount_type:[{required:!0}]},areaFormTimer:null,classifyPriceFormTimer:null,mealStatusTimer:null,mealColumns:c,areaMealList:[],mealPagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,onChange:function(a,t){return e.onPageChange(a,t,"mealPagination")},onShowSizeChange:function(a,t){return e.onPageSizeChange(a,t,"mealPagination")},showTotal:function(e){return"共 ".concat(e," 条记录")}}}},watch:{showAreaAdd:{immediate:!0,handler:function(e){e&&(this.areaPriceForm=this.$options.data().areaPriceForm)}},showClassifyEdit:{immediate:!0,handler:function(e){e?console.log("表单数据",this.classifyPriceForm):this.classifyPriceForm=this.$options.data().classifyPriceForm}},showAreaPriceDetail:{immediate:!0,handler:function(e){e?(this.getClassifyPriceList(),this.getAreaMealList()):this.areaPriceForm=this.$options.data().areaPriceForm}}},created:function(){this.getAreaList()},activated:function(){this.showAreaPriceDetail=!1},methods:{mealHandleChange:function(e,a,t,r){var i=this;clearTimeout(this.mealStatusTimer),t.status=e?1:0,this.areaMealList.splice(r,1,t),this.mealStatusTimer=setTimeout((function(){var a={package_id:t.id,area_id:i.areaPriceForm.id,status:e?1:0};i.request(n["a"].saveAreaMealStatus,a).then((function(e){i.getAreaMealList()}))}),800)},getAreaMealList:function(){var e=this;this.request(n["a"].getAreaMealList,{area_id:this.areaPriceForm.id}).then((function(a){console.log("区域套餐列表",a),e.areaMealList=a.data}))},areaHandleChange:function(e,a,t,r){var i=this;clearTimeout(this.areaFormTimer),t[a]="status"==a?e?1:0:e,this.areaPriceList.splice(r,1,t),this.areaPriceForm={name:t.name,region:t.region_id,sort:t.sort,status:1==t.status,id:t.id},this.areaFormTimer=setTimeout((function(){i.saveAreaPriceForm(!1)}),800)},classifyHandleChange:function(e,a,t){var r=this;console.log(a,e),clearTimeout(this.classifyPriceFormTimer),t[a]=e,Array.isArray(t.manual_price)||(t.manual_price=[],t.region_id=this.areaPriceForm.id,t.discount_type=0),this.classifyPriceForm=t,this.classifyPriceFormTimer=setTimeout((function(){r.saveClassifyPriceForm(!1)}),800)},saveClassifyPriceForm:function(){var e=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=JSON.parse(JSON.stringify(this.classifyPriceForm));if(a){if(t.year_price<=0||1==t.discount_type&&0==t.discount_rate){var r=t.year_price<=0?"统一年费请设置大于0的数字！":"优惠率请设置大于0的数字！";return this.$message.error(r),!1}t.manual_price=t.manual_price.map((function(e){return e.price}))}void 0!=t.status&&(t.status=t.status?1:0);var i=t.cat_id?"saveClassifyPriceForm":"saveAreaMealForm";this.request(n["a"][i],t).then((function(r){a&&e.$message.success("保存成功！",1),e.showClassifyEdit=!1,t.cat_id?e.getClassifyPriceList(!0):e.getAreaMealList(!0)}))},addYearPrice:function(){this.classifyPriceForm.manual_price.push({year:this.classifyPriceForm.manual_price.length+2,price:0})},removeYearPrice:function(e){this.classifyPriceForm.manual_price.pop()},saveAreaPriceForm:function(){var e=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.areaPriceForm.name){var t=JSON.parse(JSON.stringify(this.areaPriceForm));t.status=t.status?1:0,this.request(n["a"].saveAreaPriceForm,t).then((function(t){a&&e.$message.success("保存成功！",1),e.showAreaPriceDetail=!1,e.showAreaAdd=!1,e.getAreaList(!0)}))}else this.$message.error("请输入区域名称")},onTabChange:function(e){this.activeTab=e},actionBtn:function(e,a,t){var r=this;if("editMealPrice"==a){var i=t.id,s=t.status,o=t.discount_type,c=t.discount_rate,l=t.manual_price,m=t.name,g=t.year_price,d={is_children:1,name:m,year_price:g,discount_type:o||1,discount_rate:c,manual_price:[{year:2,price:0},{year:3,price:0}],area_id:this.areaPriceForm.id,status:1==s,package_id:i};return Array.isArray(l)&&l.length>0&&(d.manual_price=l.map((function(e,a){return e={year:a+2,price:e},e}))),this.classifyPriceForm=d,void(this.showClassifyEdit=!0)}if("editClassifyPrice"==a){var u=t.cat_name,p=t.cat_id,f=t.is_children,_=t.id,h=void 0===_?"":_,y=t.year_price,k=t.discount_rate,P=t.discount_type,v=t.manual_price;"未设置"==y&&(y=0),null==k&&(k=0);var w={name:u,id:h,region_id:this.areaPriceForm.id,cat_id:p,year_price:y,discount_type:P||1,discount_rate:k,manual_price:[{year:2,price:0},{year:3,price:0}],sort:t.sort,is_children:f};return Array.isArray(v)&&v.length>0&&(w.manual_price=v.map((function(e,a){return e={year:a+2,price:e},e}))),this.classifyPriceForm=w,void(this.showClassifyEdit=!0)}if("editAreaPrice"==a)return this.showAreaPriceDetail=!0,void(this.areaPriceForm={name:t.name,region:t.region_id,sort:t.sort,status:1==t.status,id:t.id});"deleteAreaPrice"!=a||this.$confirm({title:"你确定要删除该地区吗？",icon:function(e){return e("a-icon",{props:{type:"close-circle",theme:"filled"},style:{color:"#f50f50"}})},onOk:function(){r.request(n["a"].deleteAreaPriceForm,{id:t.id}).then((function(e){r.$message.success("删除成功！",1),r.getAreaList()}))}})},onPageChange:function(e,a,t){this.$set(this[t],"current",e),"areaPagination"!=t?"classifyPagination"!=t?"mealPagination"!=t||this.getAreaMealList():this.getClassifyPriceList():this.getAreaList()},onPageSizeChange:function(e,a,t){this.$set(this[t],"pageSize",a),this.$set(this[t],"current",1),"areaPagination"!=t?"classifyPagination"!=t?"mealPagination"!=t||this.getAreaMealList():this.getClassifyPriceList():this.getAreaList()},getAreaList:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a&&this.$set(this.areaPagination,"current",1);var t={page:this.areaPagination.current,pageSize:this.areaPagination.pageSize};this.request(n["a"].getAreaList,t).then((function(a){e.areaPriceList=a.data||[],e.region_list=a.region_list||[],e.$set(e.areaPagination,"total",a.total||0)}))},getClassifyPriceList:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a&&this.$set(this.classifyPagination,"current",1);var t={page:this.classifyPagination.current,pageSize:this.classifyPagination.pageSize,id:this.areaPriceForm.id};this.request(n["a"].getClassifyPriceList,t).then((function(a){e.region_list=a.region_list||[],e.classifyPriceList=a.classes_price_list.data,e.$set(e.classifyPagination,"total",a.classes_price_list.total||0)}))}}},m=l,g=(t("f3ca"),t("2877")),d=Object(g["a"])(m,r,i,!1,null,"27a62d51",null);a["default"]=d.exports},c8d4:function(e,a,t){},f3ca:function(e,a,t){"use strict";t("c8d4")}}]);