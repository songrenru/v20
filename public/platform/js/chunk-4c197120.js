(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c197120","chunk-59385182"],{"4d95":function(e,t,i){"use strict";var o={getTicketList:"life_tools/merchant.LifeToolsTicket/getList",getTicketDetail:"life_tools/merchant.LifeToolsTicket/getDetail",ticketDel:"life_tools/merchant.LifeToolsTicket/del",TicketEdit:"life_tools/merchant.LifeToolsTicket/addOrEdit",getLifeToolsList:"life_tools/merchant.LifeTools/getInformationList",setLifeToolsAttrs:"life_tools/merchant.LifeTools/setLifeToolsAttrs",getSportsOrderList:"/life_tools/merchant.SportsOrder/getOrderList",exportToolsOrder:"/life_tools/merchant.SportsOrder/exportToolsOrder",getSportsOrderDetail:"/life_tools/merchant.SportsOrder/getOrderDetail",agreeSportsOrderRefund:"/life_tools/merchant.SportsOrder/agreeRefund",refuseSportsOrderRefund:"/life_tools/merchant.SportsOrder/refuseRefund",getEditInfo:"life_tools/merchant.LifeToolsTicket/getEditInfo",getCategoryList:"life_tools/merchant.LifeToolsCategory/getCategoryList",getMapConfig:"life_tools/merchant.LifeTools/getMapConfig",getAddressList:"life_tools/merchant.LifeTools/getAddressList",addEditLifeTools:"life_tools/merchant.LifeTools/addEditLifeTools",getLifeToolsDetail:"life_tools/merchant.LifeTools/getLifeToolsDetail",delLifeTools:"life_tools/merchant.LifeTools/delLifeTools",getReplyList:"/life_tools/merchant.LifeToolsReply/searchReply",isShowReply:"/life_tools/merchant.LifeToolsReply/isShowReply",getReplyDetails:"/life_tools/merchant.LifeToolsReply/getReplyDetails",delReply:"/life_tools/merchant.LifeToolsReply/delReply",subReply:"/life_tools/merchant.LifeToolsReply/subReply",getReplyContent:"/life_tools/merchant.LifeToolsReply/getReplyContent",getCardList:"/life_tools/merchant.EmployeeCard/getCardList",editCard:"/life_tools/merchant.EmployeeCard/editCard",saveCard:"/life_tools/merchant.EmployeeCard/saveCard",delCard:"/life_tools/merchant.EmployeeCard/delCard",getSportsVerifyList:"/life_tools/merchant.SportsOrder/getVerifyList",exportVerifyRecord:"/life_tools/merchant.SportsOrder/exportVerifyRecord",getLimitedList:"/life_tools/merchant.LifeScenicLimitedAct/getLimitedList",updateLimited:"/life_tools/merchant.LifeScenicLimitedAct/addLimited",limitedChangeState:"/life_tools/merchant.LifeScenicLimitedAct/changeState",removeLimited:"/life_tools/merchant.LifeScenicLimitedAct/del",getLimitedInfo:"/life_tools/merchant.LifeScenicLimitedAct/edit",getMerchantSort:"/life_tools/merchant.LifeToolsTicket/getMerchantSort",getLifeToolsTicket:"/life_tools/merchant.LifeToolsTicket/getLifeToolsTicket",getToolsCardList:"/life_tools/merchant.LifeTools/getToolsCardList",AddOrEditToolsCard:"/life_tools/merchant.LifeTools/AddOrEditToolsCard",getToolsCardEdit:"/life_tools/merchant.LifeTools/getToolsCardEdit",delToolsCard:"/life_tools/merchant.LifeTools/delToolsCard",getAllToolsList:"/life_tools/merchant.LifeTools/getAllToolsList",getToolsCardRecord:"/life_tools/merchant.LifeTools/getToolsCardRecord",getCardOrderList:"/life_tools/merchant.LifeTools/getCardOrderList",getCardOrderDetail:"/life_tools/merchant.LifeTools/getCardOrderDetail",agreeCardOrderRefund:"/life_tools/merchant.LifeTools/agreeCardOrderRefund",refuseCardOrderRefund:"/life_tools/merchant.LifeTools/refuseCardOrderRefund",getSportsActivityList:"/life_tools/merchant.LifeToolsSportsActivity/getSportsActivityList",updateSportsActivityStatus:"/life_tools/merchant.LifeToolsSportsActivity/updateSportsActivityStatus",getSportsActivityOrderList:"/life_tools/merchant.LifeToolsSportsActivity/getSportsActivityOrderList",addSportsActivity:"/life_tools/merchant.LifeToolsSportsActivity/addSportsActivity",editSportsActivity:"/life_tools/merchant.LifeToolsSportsActivity/editSportsActivity",getTravelList:"/life_tools/merchant.LifeToolsGroupTravelAgency/getTravelList",agencyAudit:"/life_tools/merchant.LifeToolsGroupTravelAgency/audit",getStaffList:"/life_tools/merchant.LifeToolsTicket/getStaffList",getAppointList:"life_tools/merchant.LifeToolsAppoint/getList",getAppointMsg:"life_tools/merchant.LifeToolsAppoint/getToolAppointMsg",saveAppoint:"life_tools/merchant.LifeToolsAppoint/saveToolAppoint",lookAppointUser:"life_tools/merchant.LifeToolsAppoint/lookAppointUser",closeAppoint:"life_tools/merchant.LifeToolsAppoint/closeAppoint",exportAppointUserOrder:"life_tools/merchant.LifeToolsAppoint/exportUserOrder",delAppoint:"life_tools/merchant.LifeToolsAppoint/delAppoint",getSeatMap:"/life_tools/merchant.LifeToolsAppoint/getSeatMap",getAppointOrderDetail:"life_tools/merchant.LifeToolsAppoint/getAppointOrderDetail",auditRefund:"life_tools/merchant.LifeToolsAppoint/auditRefund",suspend:"life_tools/merchant.LifeToolsAppoint/suspend",getSportsSecondsKillList:"/life_tools/merchant.LifeToolsSportsSecondsKill/getSecondsKillList",saveSportsSecondsKill:"/life_tools/merchant.LifeToolsSportsSecondsKill/saveSecondsKill",ChangeSportsSecondsKill:"/life_tools/merchant.LifeToolsSportsSecondsKill/ChangeSportsSecondsKill",delSportsSecondsKill:"/life_tools/merchant.LifeToolsSportsSecondsKill/delSecondsKill",getSportsSecondsKillDetail:"/life_tools/merchant.LifeToolsSportsSecondsKill/getSecondsKillDetail",getGroupTicketList:"life_tools/merchant.group/getGroupTicketList",getGroupLifeToolsTicket:"life_tools/merchant.LifeToolsTicket/getLifeToolsTicket",addGroupTicket:"life_tools/merchant.group/addGroupTicket",delGroupTicket:"life_tools/merchant.group/delGroupTicket",editSettingData:"life_tools/merchant.group/editSettingData",editGroupTicket:"life_tools/merchant.group/editGroupTicket",getSettingDataDetail:"life_tools/merchant.group/getSettingDataDetail",getStatisticsData:"life_tools/merchant.LifeToolsGroupOrder/getStatisticsData",getOrderList:"life_tools/merchant.LifeToolsGroupOrder/getOrderList",getOrderAuditList:"/life_tools/merchant.LifeToolsGroupOrder/getAuditGroupOrderList",orderAudit:"/life_tools/merchant.LifeToolsGroupOrder/audit",groupOrderRefand:"life_tools/merchant.LifeToolsGroupOrder/groupOrderRefand",editDistributionPrice:"life_tools/merchant.LifeToolsDistribution/editDistributionPrice",getDistributionSettingDataDetail:"/life_tools/merchant.LifeToolsDistribution/getSettingDataDetail",getDistributionSettingeditSetting:"/life_tools/merchant.LifeToolsDistribution/editSetting",getAtatisticsInfo:"/life_tools/merchant.LifeToolsDistribution/getAtatisticsInfo",getDistributorList:"/life_tools/merchant.LifeToolsDistribution/getDistributorList",getLowerLevel:"/life_tools/merchant.LifeToolsDistribution/getLowerLevel",audit:"/life_tools/merchant.LifeToolsDistribution/audit",getDistributionOrderList:"/life_tools/merchant.LifeToolsDistribution/getDistributionOrderList",editDistributionOrderNote:"/life_tools/merchant.LifeToolsDistribution/editDistributionOrderNote",delDistributor:"/life_tools/merchant.LifeToolsDistribution/delDistributor",addStatement:"/life_tools/merchant.LifeToolsDistribution/addStatement",getStatementList:"/life_tools/merchant.LifeToolsDistribution/getStatement",getStatementDetail:"/life_tools/merchant.LifeToolsDistribution/getStatementDetail",lifeToolsAudit:"/life_tools/platform.LifeTools/lifeToolsAudit",auditTicket:"/life_tools/platform.LifeToolsTicket/auditTicket",getMapCity:"/g=Index&c=Map&a=suggestion",getCarParkList:"/life_tools/merchant.LifeToolsCarPark/getCarParkList",addCarPark:"/life_tools/merchant.LifeToolsCarPark/addCarPark",showCarPark:"/life_tools/merchant.LifeToolsCarPark/showCarPark",getToolsList:"/life_tools/merchant.LifeToolsCarPark/getToolsList",deleteCarPark:"/life_tools/merchant.LifeToolsCarPark/deleteCarPark",statusCarPark:"/life_tools/merchant.LifeToolsCarPark/statusCarPark",wifiList:"life_tools/merchant.LifeToolsWifi/wifiList",wifiAdd:"life_tools/merchant.LifeToolsWifi/wifiAdd",wifiShow:"life_tools/merchant.LifeToolsWifi/wifiShow",wifiStatusChange:"life_tools/merchant.LifeToolsWifi/wifiStatusChange",wifiDelete:"life_tools/merchant.LifeToolsWifi/wifiDelete",scenicMapSave:"/life_tools/merchant.LifeToolsScenicMap/saveMap",scenicMapPlaceList:"/life_tools/merchant.LifeToolsScenicMap/mapPlaceList",scenicMapPlaceSave:"/life_tools/merchant.LifeToolsScenicMap/saveMapPlace",scenicMapPlaceDel:"/life_tools/merchant.LifeToolsScenicMap/mapPlaceDel",scenicMapLineList:"/life_tools/merchant.LifeToolsScenicMap/mapLineList",scenicMapLineSave:"/life_tools/merchant.LifeToolsScenicMap/saveMapLine",scenicMapLineDel:"/life_tools/merchant.LifeToolsScenicMap/mapLineDel",scenicMapScenicList:"/life_tools/merchant.LifeToolsScenicMap/scenicList",scenicMapPlaceCatList:"/life_tools/merchant.LifeToolsScenicMap/categoryList",scenicMapPlaceCategoryDel:"/life_tools/merchant.LifeToolsScenicMap/categoryDel",scenicMapPlaceCategorySave:"/life_tools/merchant.LifeToolsScenicMap/saveCategory",scenicMapList:"/life_tools/merchant.LifeToolsScenicMap/mapList",scenicMapDel:"/life_tools/merchant.LifeToolsScenicMap/mapDel",scenicMapStatusSave:"/life_tools/merchant.LifeToolsScenicMap/saveMapStatus",changeCloseStatus:"life_tools/merchant.LifeTools/changeCloseStatus",getAddEditCardMerchantInfo:"/life_tools/merchant.LifeTools/getAddEditCardMerchantInfo"};t["a"]=o},c768:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("a-modal",{attrs:{visible:e.dialogVisible,title:e.titleName,width:"90%",destroyOnClose:""},on:{cancel:e.handleCancel,ok:e.handleOk}},[i("a-form-model",{attrs:{layout:"inline",model:e.searchForm}},[i("a-form-model-item",{attrs:{label:"搜索"}},[i("a-input",{attrs:{placeholder:"门票名称"},model:{value:e.searchForm.search_keyword,callback:function(t){e.$set(e.searchForm,"search_keyword",t)},expression:"searchForm.search_keyword"}})],1),i("a-form-model-item",[i("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(t){return e.submitForm(!0)}}},[e._v("搜索")])],1)],1),i("a-table",{staticClass:"mt-20",attrs:{rowKey:"ticket_id",columns:e.columns,"data-source":e.datalist,pagination:e.pagination,"row-selection":e.rowSelection},scopedSlots:e._u([{key:"group_price",fn:function(t,o){return i("span",{},[i("a-input-number",{staticStyle:{width:"60px"},attrs:{min:0},model:{value:o.group_price,callback:function(t){e.$set(o,"group_price",t)},expression:"record.group_price"}})],1)}},{key:"max_num",fn:function(t,o){return i("span",{},[i("a-input-number",{staticStyle:{width:"60px"},attrs:{min:1,"default-value":t},model:{value:o.max_num,callback:function(t){e.$set(o,"max_num",t)},expression:"record.max_num"}})],1)}}])})],1)],1)},s=[],a=i("5530"),l=(i("d81d"),i("a434"),i("4d95")),r=[{title:"门票名称",dataIndex:"title",key:"title"},{title:"景区名称",dataIndex:"name",key:"name"},{title:"原价",dataIndex:"price",key:"price"},{title:"团体价",dataIndex:"group_price",key:"group_price",scopedSlots:{customRender:"group_price"}},{title:"限购",dataIndex:"max_num",key:"max_num",scopedSlots:{customRender:"max_num"}}],n={name:"addGroupTicket",props:{type:{type:String,default:"checkbox"},selectedList:{type:Array,default:function(){return[]}}},data:function(){return{titleName:"选择门票",labelCol:{span:4},wrapperCol:{span:14},datalist:[],columns:r,dialogVisible:!1,selectedRowKeys:[],sList:[],searchForm:{search_type:"title",search_keyword:"",source:"group",tools_id:0},pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(e){return"共 ".concat(e," 条记录")}}}},computed:{rowSelection:function(){return{type:this.type,onSelect:this.onRowSelect,onSelectAll:this.onSelectAll,getCheckboxProps:function(e){return{props:{disabled:0==e.can_be_choose}}}}}},created:function(){this.getDataList(!1)},watch:{selectedList:function(e){this.sList=JSON.parse(JSON.stringify(e))}},methods:{openDialog:function(){this.dialogVisible=!0,this.selectedRowKeys=[],this.sList=[],this.getDataList(!1)},getDataList:function(e){var t=this,i=Object(a["a"])({},this.searchForm);!0===e?(i.page=1,this.$set(this.pagination,"current",1)):(this.selectedRowKeys=[],this.sList=[],i.page=this.pagination.current,this.$set(this.pagination,"current",this.pagination.current)),i.pageSize=this.pagination.pageSize,this.request(l["a"].getLifeToolsTicket,i).then((function(e){t.datalist=e.list,t.$set(t.pagination,"total",e.count)}))},onRowSelect:function(e,t,i){console.log(e,"record1111"),console.log(t,"selected1111"),console.log(i,"------------dayinnselectedRows-------------"),"radio"==this.type?(this.sList=[e],this.selectedRowKeys=[e.ticket_id]):t?(this.sList.push(e),this.selectedRowKeys.push(e.ticket_id),console.log(this.sList,this.selectedRowKeys,"------------增加this.selectedRowKeys----------")):(console.log(this.sList,this.selectedRowKeys,"------------this.selectedRowKeys----------"),this.sList.remove(e),this.selectedRowKeys.remove(e.ticket_id))},onSelectAll:function(e,t,i){var o=this;console.log(t,"onSelectAll1111"),e?i.map((function(e){o.selectedRowKeys.push(e.ticket_id),o.sList.push(e)})):i.map((function(e){o.sList.remove(e),o.selectedRowKeys.remove(e.ticket_id)}))},submitForm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getDataList(e)},onPageChange:function(e,t){this.$set(this.pagination,"current",e),this.getDataList(!1)},onPageSizeChange:function(e,t){this.$set(this.pagination,"pageSize",t),this.getDataList(!1)},handleOk:function(){var e=this.selectedRowKeys,t=this.sList;t.length?(this.$emit("submit",{ids:e,goods:t}),this.handleCancel()):this.$message.error("请选择商品")},handleCancel:function(){this.searchForm.search_keyword="",this.selectedRowKeys=[],this.sList=[],this.dialogVisible=!1}}};Array.prototype.remove=function(e){var t=this.indexOf(e),i=-1;t>-1?this.splice(t,1):(this.map((function(t,o){t.ticket_id==e.ticket_id&&(i=o)})),i>-1&&this.splice(i,1))};var c=n,d=i("2877"),f=Object(d["a"])(c,o,s,!1,null,"96133e00",null);t["default"]=f.exports},d84d:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[i("a-form-model",{attrs:{layout:"inline",model:e.searchForm}},[i("a-form-model-item",{attrs:{label:"搜索"}},[i("a-select",{staticStyle:{width:"100px"},model:{value:e.searchForm.search_type,callback:function(t){e.$set(e.searchForm,"search_type",t)},expression:"searchForm.search_type"}},[i("a-select-option",{attrs:{value:"title"}},[e._v("景区名称")]),i("a-select-option",{attrs:{value:"ticket_title"}},[e._v("套餐名称")])],1)],1),i("a-form-model-item",{attrs:{label:""}},[i("a-input",{attrs:{placeholder:"关键词"},model:{value:e.searchForm.search_keyword,callback:function(t){e.$set(e.searchForm,"search_keyword",t)},expression:"searchForm.search_keyword"}})],1),i("a-form-model-item",[i("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(t){return e.submitForm(!0)}}},[e._v("搜索")]),i("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(t){return e.addForm()}}},[e._v("添加")])],1)],1),i("a-table",{staticClass:"mt-20",attrs:{rowKey:"id",columns:e.columns,"data-source":e.datalist,pagination:e.pagination},scopedSlots:e._u([{key:"group_price",fn:function(t,o){return i("span",{},[i("a-input-number",{staticStyle:{width:"60px"},attrs:{min:0,"default-value":t},on:{blur:function(t){return e.changeGroupPriceSort(t,o.id)}}})],1)}},{key:"max_num",fn:function(t,o){return i("span",{},[i("a-input-number",{staticStyle:{width:"60px"},attrs:{min:1,"default-value":t},on:{blur:function(t){return e.changeMaxNumSort(t,o.id)}}})],1)}},{key:"action",fn:function(t,o){return i("span",{},[i("a",{on:{click:function(){return e.handleDelete(o.id)}}},[e._v("删除")])])}}])}),i("add-group-ticket",{ref:"addGroupGoods",attrs:{selectedList:e.goodsList},on:{submit:e.selecrGoodsSubmit}})],1)},s=[],a=i("5530"),l=(i("d81d"),i("4d95")),r=i("c768"),n=[{title:"景区名称",dataIndex:"name",key:"name"},{title:"套餐名称",dataIndex:"title",key:"title"},{title:"原价",dataIndex:"price",key:"price"},{title:"团体票价",dataIndex:"group_price",key:"group_price",scopedSlots:{customRender:"group_price"}},{title:"限购",dataIndex:"max_num",key:"max_num",scopedSlots:{customRender:"max_num"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],c={name:"GroupTicketList",components:{AddGroupTicket:r["default"]},data:function(){return{labelCol:{span:4},wrapperCol:{span:14},datalist:[],goodsList:[],columns:n,searchForm:{search_type:"title",search_keyword:""},pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(e){return"共 ".concat(e," 条记录")}}}},created:function(){this.getDataList(!1)},methods:{getDataList:function(e){var t=this,i=Object(a["a"])({},this.searchForm);!0===e?(i.page=1,this.$set(this.pagination,"current",1)):(i.page=this.pagination.current,this.$set(this.pagination,"current",this.pagination.current)),i.pageSize=this.pagination.pageSize,this.request(l["a"].getGroupTicketList,i).then((function(e){t.datalist=e.data,t.$set(t.pagination,"total",e.total)}))},changeGroupPriceSort:function(e,t){var i=this,o=e.currentTarget.value,s={};s.id=t,s.type="group_price",s.group_price=o,this.request(l["a"].editGroupTicket,s).then((function(e){i.getDataList(!1)}))},changeMaxNumSort:function(e,t){var i=this,o=e.currentTarget.value,s={};s.id=t,s.type="max_num",s.max_num=o,this.request(l["a"].editGroupTicket,s).then((function(e){i.getDataList(!1)}))},submitForm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getDataList(e)},addForm:function(){this.$refs.addGroupGoods.openDialog()},onPageChange:function(e,t){this.$set(this.pagination,"current",e),this.submitForm()},onPageSizeChange:function(e,t){this.$set(this.pagination,"pageSize",t),this.submitForm()},handleDelete:function(e){var t=this;this.$confirm({title:"是否确定删除?",centered:!0,onOk:function(){t.request(l["a"].delGroupTicket,{id:e}).then((function(e){t.getDataList(!1)}))},onCancel:function(){}})},selecrGoodsSubmit:function(e){var t=this;console.log(e,"e-----selecrGoodsSubmit-----选择商品回调"),e.goods=e.goods.map((function(e){return e.tools_id=e.tools_id,e.ticket_id=e.ticket_id,e.max_num=e.max_num,e.group_price=e.group_price,e})),this.goodsList=e.goods,this.request(l["a"].addGroupTicket,{seleted_ticket_list:this.goodsList}).then((function(e){t.getDataList(!1)}))}}},d=c,f=i("2877"),p=Object(f["a"])(d,o,s,!1,null,"777e84f4",null);t["default"]=p.exports}}]);