(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53394452","chunk-337e48fa","chunk-29c9912a"],{"12be":function(t,e,i){},2297:function(t,e,i){"use strict";i("8ee04")},"242c":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{title:t.title,width:1400,footer:null,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel}},[i("div",{staticClass:"content-p1"},[i("p",[t._v("1、消费记录展示的是，水费、电费、燃气费三种费用，缴费记录")])]),i("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination,loading:t.loading},on:{change:t.table_change},scopedSlots:t._u([{key:"operation",fn:function(e,n){return i("span",{},[1==n.is_paid?i("div",[i("a",{on:{click:function(e){return t.$refs.PrintModel.add(n.order_id,n.pigcms_id)}}},[t._v("打印")])]):i("div",[i("a-popconfirm",{staticClass:"ant-dropdown-link",attrs:{title:"确认催缴?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.send_message(n.order_id)}}},[i("a",[t._v("一键催缴")])])],1)])}}])}),i("get-print-template",{ref:"PrintModel"})],1)},s=[],a=(i("ac1f"),i("841c"),i("a0e0")),l=i("ce95"),r=[{title:"收费项目",dataIndex:"project_name",key:"project_name"},{title:"收费所属类别",dataIndex:"order_type",key:"order_type"},{title:"单价（元）",dataIndex:"unit_price",key:"unit_price"},{title:"倍率",dataIndex:"rate",key:"rate"},{title:"抄表时间",dataIndex:"add_time",key:"add_time"},{title:"起度",dataIndex:"start_ammeter",key:"start_ammeter"},{title:"止度",dataIndex:"last_ammeter",key:"last_ammeter"},{title:"余额（元）",dataIndex:"now_money",key:"now_money"},{title:"应收费用（元）",dataIndex:"total_money",key:"total_money"},{title:"实缴费用（元）",dataIndex:"pay_money",key:"pay_money"},{title:"操作人",dataIndex:"realname",key:"realname"},{title:"备注",dataIndex:"note",key:"note"},{title:"操作",dataIndex:"operation",width:"100px",key:"operation",scopedSlots:{customRender:"operation"}}],o=[],d={name:"orderList",filters:{},components:{GetPrintTemplate:l["default"]},data:function(){return{reply_content:"",pagination:{current:1,pageSize:10,total:10},search:{keyword:"",page:1},form:this.$form.createForm(this),visible:!1,loading:!1,data:o,columns:r,title:"",confirmLoading:!1,uid:""}},methods:{List:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.title="消费记录",this.loading=!0,e>0&&(this.$set(this.pagination,"current",1),this.uid=e,this.search["uid"]=this.uid),this.search["page"]=this.pagination.current,this.request(a["a"].storageUserOrderRecord,this.search).then((function(e){t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.data=e.list,t.loading=!1,t.confirmLoading=!0,t.visible=!0}))},send_message:function(t){var e=this;this.request(a["a"].storageUserSendMessage,{order_id:t}).then((function(t){e.$message.success("发送成功")}))},handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.id="0",t.form=t.$form.createForm(t)}),500)},cancel:function(){},table_change:function(t){var e=this;console.log("e",t),t.current&&t.current>0&&(e.pagination.current=t.current,e.List())},searchList:function(){this.table_change({current:1,pageSize:10,total:10})},resetList:function(){this.$set(this.pagination,"current",1),this.search.keyword="",this.search.page=1,this.table_change({current:1,pageSize:10,total:10})}}},c=d,p=(i("2297"),i("2877")),h=Object(p["a"])(c,n,s,!1,null,null,null);e["default"]=h.exports},3675:function(t,e,i){"use strict";i("5304")},5304:function(t,e,i){},"73a4":function(t,e,i){"use strict";i("12be")},"8ee04":function(t,e,i){},ce95:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{title:t.title,width:500,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[t.is_set?i("div",{staticStyle:{"margin-bottom":"20px"},domProps:{innerHTML:t._s(t.set_msg)}}):t._e(),i("a-spin",{attrs:{spinning:t.confirmLoading,height:800}},[i("a-form",{attrs:{form:t.form}},[i("a-form-item",{attrs:{label:"选择打印模板",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-col",{attrs:{span:18}},[i("a-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择打印模板"},model:{value:t.template_id,callback:function(e){t.template_id=e},expression:"template_id"}},t._l(t.template_list,(function(e,n){return i("a-select-option",{key:n,attrs:{value:e.template_id}},[t._v(" "+t._s(e.title)+" ")])})),1)],1)],1)],1)],1),i("print-order",{ref:"PrintModel"})],1)},s=[],a=i("a0e0"),l=i("f7e3"),r={components:{PrintOrder:l["default"]},data:function(){return{title:"选择打印模板",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,order_id:0,template_id:void 0,template_list:[],pigcms_id:0,choice_ids:[],is_set:!1,set_msg:"",set_type:0,source_type:0}},mounted:function(){},methods:{add:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.source_type=0,0==i?(this.title="选择打印模板",this.is_set=!1,this.set_msg=""):(this.is_set=!0,this.title="设置打印模板",1==i?(this.source_type=1,this.set_msg="1、在收银台设置打印模板，收银台支持打印功能。打印功能；不设置打印模板，则不支持。<br/>2、设置打印模板后，在收银台显示已缴账单按钮，进入查看所有已缴账单数据。"):2==i&&(this.set_msg='1、设置打印模板后，联动收银台打印模板功能。<br/>2、设置打印模板后，<span style="color: #1890ff">已缴账单</span>列表点击<span style="color: #1890ff">打印</span>按钮直接打印')),this.set_type=i,this.template_id=void 0,this.visible=!0,this.pigcms_id=e,this.template_list=[],this.order_id=t,this.choice_ids=[],this.getTemplate()},batchPrint:function(t){var e=this;if(t.length<1)return e.$message.error("请勾选账单"),!1;e.title="选择打印模板",e.visible=!0,e.template_id=void 0,e.template_list=[],e.order_id=0,e.pigcms_id=0,e.choice_ids=t,this.set_type=0,this.source_type=0,e.getTemplate()},getTemplate:function(){var t=this;this.request(a["a"].getTemplate).then((function(e){t.template_list=e.list,e&&e.template_id>0&&(t.template_id=e.template_id)}))},handleSubmit:function(){var t=this;if(!this.template_id)return this.$message.error("选择打印模板"),!1;this.set_type>0?(this.confirmLoading=!0,this.request(a["a"].editSetPrint,{template_id:this.template_id}).then((function(e){t.$message.success("编辑成功"),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1,t.$emit("ok",{type:t.source_type,template_id:t.template_id})}),1e3)})).catch((function(t){}))):this.$refs.PrintModel.add(this.order_id,this.template_id,this.pigcms_id,this.choice_ids)},handleCancel:function(){this.visible=!1}}},o=r,d=(i("73a4"),i("2877")),c=Object(d["a"])(o,n,s,!1,null,null,null);e["default"]=c.exports},f7e3:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{title:t.title,width:1300,visible:t.visible,footer:null,maskClosable:!1,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel}},[i("div",{attrs:{id:t.table_id}},[t.is_title?i("span",{staticStyle:{width:"100%","text-align":"center",display:"inline-block","font-size":"20px","font-weight":"bold"}},[t._v(t._s(t.print_title))]):t._e(),i("a-descriptions",{staticStyle:{"padding-top":"10px"},attrs:{column:t.col_num}},t._l(t.list1,(function(e,n){return"换行"!==e.title?i("a-descriptions-item",{key:n+30,staticStyle:{"white-space":"nowrap"},attrs:{span:t.jscolspan(t.list1[n+1],n,t.list1[n-1]),label:e.title}},[t._v(" "+t._s(e.value)+" ")]):t._e()})),1),i("div",{staticClass:"module_two",staticStyle:{display:"flex","flex-direction":"column"}},[1*t.printType==2?i("div",{directives:[{name:"show",rawName:"v-show",value:t.printList4.length>0,expression:"printList4.length>0"}],staticClass:"table_top",staticStyle:{border:"0.5px solid #999999",display:"flex","align-items":"center","justify-content":"space-between",width:"100%",height:"27px"}},t._l(t.printList4,(function(e,n){return i("div",{key:n,staticClass:"header_item",staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"},style:{marginLeft:0==n?"10px":"",marginRight:n==t.printList4.length-1?"20px":""}},[t._v(t._s(e.title)+"："+t._s(e.value))])})),0):t._e(),i("div",{staticClass:"table_container",staticStyle:{display:"flex","align-items":"center",width:"100%","border-left":"0.5px solid #999999"}},t._l(t.printList2,(function(e,n){return i("div",{key:n,staticClass:"table_item",staticStyle:{border:"0.5px solid #999999","border-left":"0",height:"27px",display:"flex","align-items":"center","justify-content":"center","font-weight":"bold"},style:{width:1/t.printList2.length*100+"%"}},[t._v(" "+t._s(e.title))])})),0),t._l(t.tableList,(function(e,n){return i("div",{key:n+30,staticClass:"table_container",staticStyle:{display:"flex","align-items":"center",width:"100%","border-left":"0.5px solid #999999"}},t._l(e,(function(e,s){return i("div",{key:s+n,staticClass:"table_item",staticStyle:{border:"0.5px solid #999999","border-left":"0",height:"27px",display:"flex","align-items":"center","justify-content":"center","font-size":"12px"},style:{width:1/t.printList2.length*100+"%"}},[t._v(t._s(e))])})),0)})),1*t.printType==2?i("div",{staticClass:"table_footer_one",staticStyle:{display:"flex","align-items":"center","justify-content":"center",width:"100%","border-left":"0.5px solid #999999"}},t._l(t.printList5,(function(e,n){return i("div",{key:n,staticClass:"table_item",staticStyle:{border:"0.5px solid #999999","border-left":"0",height:"27px",display:"flex","align-items":"center","padding-left":"10px"},style:{width:1/t.printList5.length*100+"%",borderLeft:t.printList5.length-1?"0px":"0.5px solid #999999"}},[t._v(t._s(e.title)+"："+t._s(e.value))])})),0):t._e(),t._l(t.printList6,(function(e,n){return 1*t.printType==2?i("div",{key:n,staticClass:"table_footer_two",staticStyle:{display:"flex","align-items":"center","justify-content":"center",width:"100%","border-left":"0.5px solid #999999"}},[i("div",{staticClass:"left_title",staticStyle:{height:"27px",width:"25%",border:"0.5px solid #999999","border-left":"0",display:"flex","align-items":"center","padding-left":"10px"}},[t._v(t._s(e.title)+"：")]),i("div",{staticClass:"right_content",staticStyle:{height:"27px",width:"75%",border:"0.5px solid #999999","border-left":"0",display:"flex","align-items":"center","justify-content":"space-between","padding-left":"10px"}},[e.value.value1?i("div",{staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"space-between"}},[i("span",[t._v(t._s(e.value.value1))]),i("span",{staticStyle:{"margin-right":"20px"}},[t._v(t._s(e.value.value2))])]):i("span",[t._v(t._s(e.value))])])]):t._e()}))],2),i("a-descriptions",{staticStyle:{"margin-top":"10px"},attrs:{column:t.col_num}},t._l(t.list2,(function(e,n){return"换行"!==e.title?i("a-descriptions-item",{key:n,staticStyle:{"white-space":"nowrap"},attrs:{span:t.jscolspan(t.list2[n+1],n,t.list2[n-1]),label:e.title}},[t._v(" "+t._s(e.value)+" ")]):t._e()})),1)],1),t.is_show?i("span",{staticClass:"table-operator",staticStyle:{"text-align":"center",display:"inline-block",width:"100%"}},[i("a-button",{attrs:{type:"primary"},on:{click:t.print}},[t._v("打印")])],1):t._e()])},s=[],a=(i("159b"),i("a0e0")),l=(i("add5"),[]),r=[],o={components:{},data:function(){return{title:"打印预览",list1:[],list2:[],print_title:"",is_show:!0,labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,is_title:!1,data:r,columns:l,order_id:0,template_id:0,choice_ids:[],pigcms_id:0,id:0,col_num:3,tableList:[],printList1:[],printList2:[],printList3:[],printList4:[],printList5:[],printList6:[],printType:1,printRecordStatus:!0,table_id:""}},mounted:function(){},methods:{add:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];this.table_id="print_"+parseInt(900*Math.random()+999)+"_"+(new Date).getTime(),this.title="打印预览",this.visible=!0,this.is_title=!1,this.is_show=!0,this.order_id=t,this.template_id=e,this.pigcms_id=i,this.choice_ids=n,this.data=[],this.columns=[],this.print_title="",this.getPrintInfo()},getPrintInfo:function(){var t=this;this.confirmLoading=!0,this.request(a["a"].getPrintInfo,{order_id:this.order_id,template_id:this.template_id,pigcms_id:this.pigcms_id,choice_ids:this.choice_ids}).then((function(e){t.confirmLoading=!1,console.log("res",e),t.printList1=e.printList1,t.printList2=e.printList2,t.printList3=e.printList3,t.printList4=e.printList4,t.printList5=e.printList5,t.printList6=e.printList6,t.tableList=e.tab_list,t.printType=e.type,t.print_title=e.print_title,t.col_num=e.col,t.is_title=e.is_title,t.list1=e.printList1,console.log("list1===========",t.list1),t.data=e.data_order,t.list2=e.printList3,e.printList2.forEach((function(e){t.columns.push({title:e.title,dataIndex:e.field_name,key:e.field_name})})),console.log("data",t.data),console.log("columns",t.columns),setTimeout((function(){t.print()}),500)})).catch((function(e){t.visible=!1}))},print:function(){var t=this;console.log({printable:this.table_id,type:"html",targetStyles:["*"],maxWidth:"100%",style:e,scanStyles:!1});var e='@page {  } @media print { .ant-table-tbody > tr > td {border-bottom: 1px solid #000000;-webkit-transition: all 0.3s, border 0s;transition: all 0.3s, border 0s;}   .ant-table-bordered .ant-table-thead > tr > th, .ant-table-bordered .ant-table-tbody > tr > td {border-right: 1px solid #000000;}  .ant-table-bordered .ant-table-header > table, .ant-table-bordered .ant-table-body > table, .ant-table-bordered .ant-table-fixed-left table, .ant-table-bordered .ant-table-fixed-right table {border: 1px solid #000000;border-right: 0;border-bottom: 0;} .ant-table-thead > tr > th {color: rgba(0, 0, 0, 1);font-weight: 600;text-align: left;background: #fafafa;border-bottom: 1px solid #000000;-webkit-transition: background 0.3s ease;transition: background 0.3s ease;} .ant-descriptions-item-colon::after {content:":";} .ant-table table {width: 100%;} .ant-descriptions-row td { width:3% } ';printJS({printable:this.table_id,type:"html",targetStyles:["*"],maxWidth:"100%",style:e,scanStyles:!1,onPrintDialogClose:function(){console.log("回调================",t.printRecordStatus),t.printRecordStatus&&(t.printRecordStatus=!1,t.request(a["a"].printRecordUrl,{order_id:t.order_id,pigcms_id:t.pigcms_id,choice_ids:t.choice_ids}).then((function(e){t.printRecordStatus=!0})))}})},handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.form=t.$form.createForm(t)}),500)},jscolspan:function(t,e,i){return void 0===t?1:"换行"===t.title?this.col_num:"换行"!==t.title?1:void 0}}},d=o,c=(i("3675"),i("2877")),p=Object(c["a"])(d,n,s,!1,null,"78222d74",null);e["default"]=p.exports}}]);