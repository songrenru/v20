(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7d7d"],{7916:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,height:640,visible:e.visible},on:{cancel:e.handelCancle,ok:e.handleSubmit}},[a("div",[a("a-tabs",{attrs:{"default-active-key":"1","hide-add":""},on:{change:e.editOne,edit:e.onEdit},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-tab-pane",{key:"1",attrs:{tab:e.tab_name}},[a("a-table",{attrs:{columns:e.columns,"data-source":e.list,scroll:{y:440}},scopedSlots:e._u([{key:"sort",fn:function(t,s){return a("span",{},[e._v(e._s(s.sort))])}},{key:"name",fn:function(t,s){return a("span",{},[e._v(e._s(s.name))])}},{key:"subname",fn:function(t,s){return a("span",{},[e._v(e._s(s.subname))])}},{key:"type",fn:function(t,s){return a("span",{},[e._v(e._s(s.type_txt))])}},{key:"status",fn:function(t,s){return a("span",{},[0==t?a("a-badge",{attrs:{status:"error",text:"关闭"}}):e._e(),1==t?a("a-badge",{attrs:{status:"success",text:"开启"}}):e._e()],1)}},{key:"related_goods",fn:function(t,s){return a("a-button",{attrs:{type:"dashed"},on:{click:function(t){return e.getRelatedGoods(s.id)}}},[e._v(" 关联商品 ")])}},{key:"action",fn:function(t,s){return a("span",{},[a("a",{on:{click:function(t){return e.getEdit(s.id)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),999999!=s.id?a("a-popconfirm",{attrs:{title:"确认删除？","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(t){return e.delOne(s.id)}}},[a("a",[e._v("删除")])]):a("a",{staticStyle:{color:"lightgrey"}},[e._v("删除")])],1)}}])})],1),a("a-tab-pane",{key:"2",attrs:{tab:"添加"}},[a("a-form",e._b({attrs:{preserve:"{false}",id:"components-form-demo-validate-other1",form:e.form}},"a-form",e.formItemLayout,!1),[a("a-form-item",{attrs:{label:"活动标题",help:"标题字数不超过4个字符"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入活动标题"}]}],expression:"['name', {rules: [{required: true, message: '请输入活动标题'}]}]"}],attrs:{placeholder:"请输入活动标题",max:4}})],1),a("a-form-item",{attrs:{label:"副标题",help:"副标题字数不超过6个字符"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["subname",{rules:[{required:!0,message:"请输入活动副标题"}]}],expression:"['subname', {rules: [{required: true, message: '请输入活动副标题'}]}]"}],attrs:{placeholder:"请输入活动副标题"}})],1),a("a-form-item",{attrs:{label:"排序"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:0}],expression:"['sort', {initialValue:0}]"}],attrs:{min:0}}),a("span",{staticClass:"ant-form-text"},[e._v(" 值越大越靠前 ")])],1),a("a-form-item",{attrs:{label:"状态"}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:!0,valuePropName:"checked"}],expression:"['status', {initialValue: true,valuePropName: 'checked'}] "}],attrs:{"checked-children":"开启","un-checked-children":"关闭"}})],1),a("a-form-item",{attrs:{"wrapper-col":{span:12,offset:6}}})],1)],1),e.edit_show?a("a-tab-pane",{key:3,attrs:{tab:"编辑"}},[a("a-form",e._b({attrs:{id:"components-form-demo-validate-other",form:e.form,"data-source":e.detail}},"a-form",e.formItemLayout,!1),[a("a-form-item",{attrs:{label:"活动标题",help:"标题字数不超过4个字符"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:e.detail.name,rules:[{required:!0,message:"请输入活动标题"}]}],expression:"['name', {initialValue:detail.name,rules: [{required: true, message: '请输入活动标题'}]}]"}],attrs:{placeholder:"请输入活动标题"}})],1),a("a-form-item",{attrs:{label:"副标题",help:"副标题字数不超过6个字符"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["subname",{initialValue:e.detail.subname,rules:[{required:!0,message:"请输入活动副标题"}]}],expression:"['subname', {initialValue:detail.subname,rules: [{required: true, message: '请输入活动副标题'}]}]"}],attrs:{placeholder:"请输入活动副标题"}})],1),a("a-form-item",{attrs:{label:"排序"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:e.detail.sort}],expression:"['sort', {initialValue:detail.sort}]"}],attrs:{min:0}}),a("span",{staticClass:"ant-form-text"},[e._v(" 值越大越靠前 ")])],1),a("a-form-item",{attrs:{label:"状态",help:"为你推荐不可关闭"}},[999999==e.detail.id?a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:e.detail.status,valuePropName:"checked"}],expression:"['status', {initialValue:detail.status,valuePropName: 'checked'}]"}],attrs:{disabled:e.disabled,valuePropName:"checked","checked-children":"开启","un-checked-children":"关闭"}}):a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:e.detail.status,valuePropName:"checked"}],expression:"['status', {initialValue:detail.status,valuePropName: 'checked'}]"}],attrs:{valuePropName:"checked","checked-children":"开启","un-checked-children":"关闭"}})],1),a("a-form-item",{attrs:{"wrapper-col":{span:12,offset:6}}})],1)],1):e._e()],1),a("related-goods",{ref:"relatedGoods",attrs:{source:"platform_rec",selectedList:e.list}})],1)])},i=[],r=(a("b0c0"),a("011d")),o=a("cd39"),n=[{title:"排序",dataIndex:"sort",width:60,key:"sort",scopedSlots:{customRender:"sort"}},{title:"活动标题",dataIndex:"name",key:"name",scopedSlots:{customRender:"name"}},{title:"副标题",dataIndex:"subname",key:"subname",scopedSlots:{customRender:"subname"}},{title:"状态",dataIndex:"status",width:120,key:"status",scopedSlots:{customRender:"status"}},{title:"关联商品",dataIndex:"related_goods",width:120,key:"related_goods",scopedSlots:{customRender:"related_goods"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],d={name:"sixDecorate",components:{relatedGoods:o["default"]},data:function(){return{disabled:!0,visible:!1,edit_show:!1,title:"",tab_name:"",cat_id:"",cat_key:"",columns:n,list:[],detail:[],tab_key:1,form:this.$form.createForm(this),id:"",activeKey:"1",formItemLayout:{labelCol:{span:6},wrapperCol:{span:14}}}},methods:{onEdit:function(e,t){this[t](e)},getEdit:function(e){var t=this;this.editOne(3),this.edit_show=!0,this.id=e,this.request(r["a"].getRecEdit,{id:e}).then((function(e){console.log(e),t.detail=e,t.detail.status=1==t.detail.status})),this.activeKey=3,this.tab_key=3},dateOnChange:function(e,t){this.start_time=t[0],this.end_time=t[1]},getList:function(e,t){var a=this;this.visible=!0,this.cat_key=e,this.title=t,this.tab_name=t,this.request(r["a"].getRecList).then((function(e){console.log(e),a.list=e}))},handelCancle:function(){this.visible=!1},editOne:function(e){this.tab_key=e,2==e?this.id=0:3==e&&(this.edit_show=!0)},delOne:function(e){var t=this;this.request(r["a"].delRecAdver,{id:e}).then((function(e){t.getList(t.cat_key,t.title)}))},handleSubmit:function(e){var t=this;console.log(this.tab_key,"this.tab_key==this.tab_key"),1!=this.tab_key?(e.preventDefault(),this.form.validateFields((function(e,a){e||(console.log(a),a.start_time=t.start_time,a.end_time=t.end_time,a.id=t.id,a.name.length>4?t.$message.error("标题字数不超过4个字符"):a.subname.length>6?t.$message.error("副标题字数不超过6个字符"):t.request(r["a"].addOrEditRec,a).then((function(e){t.id>0?(t.$message.success("编辑成功"),setTimeout((function(){t.form=t.$form.createForm(t),t.edit_show=!1,t.activeKey="1",t.getList(t.cat_key,t.tab_name),t.$emit("ok",a)}),1500)):(t.$message.success("添加成功"),setTimeout((function(){t.form=t.$form.createForm(t),t.activeKey="1",t.getList(t.cat_key,t.tab_name),t.$emit("ok",a)}),1500))})))}))):1==this.tab_key&&(this.visible=!1)},getRelatedGoods:function(e){this.record_id=e,this.$refs.relatedGoods.openDialog(this.record_id,2)}}},l=d,c=a("2877"),u=Object(c["a"])(l,s,i,!1,null,"10541a4b",null);t["default"]=u.exports}}]);