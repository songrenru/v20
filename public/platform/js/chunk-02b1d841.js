(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02b1d841"],{"4f2c":function(e,r,a){"use strict";var o={propertyGetOrderPackage:"/community/property_api.PrivilagePackage/getOrderPackage",propertyGetPackageRoom:"/community/property_api.PrivilagePackage/getPackageRoom",propertyGetPackageRoomList:"/community/property_api.PrivilagePackage/getPackageRoomList",propertyCreateOrder:"/community/property_api.PrivilagePackage/createOrder",propertygetRoomOrderPrice:"/community/property_api.PrivilagePackage/getRoomOrderPrice",propertyCreateRoomOrderNew:"/community/property_api.PrivilagePackage/createRoomOrderNew",propertyGetPayType:"/community/property_api.PrivilagePackage/getPayType",propertyCreateQrCode:"/community/property_api.PrivilagePackage/createQrCode",propertyCreateRoomQrCode:"/community/property_api.PrivilagePackage/createRoomQrCode",propertyQueryOrderPayStatus:"/community/property_api.PrivilagePackage/queryOrderPayStatus",propertyGetRoomList:"/community/property_api.RoomPackage/getRoomList",propertyGetBuyRoom:"/community/property_api.RoomPackage/getBuyRoom",propertyCreateRoomOrder:"/community/property_api.RoomPackage/createRoomOrder",propertyRoomCreateQrCode:"/community/property_api.RoomPackage/createQrCode",propertyRoomQueryOrderPayStatus:"/community/property_api.RoomPackage/queryOrderPayStatus",propertyGetPrivilagePackage:"/community/property_api.BuyPackage/getPrivilagePackage",propertyGetRoomPackage:"/community/property_api.BuyPackage/getRoomPackage",chargeTimeInfo:"/community/property_api.ChargeTime/takeEffectTimeInfo",setChargeTime:"/community/property_api.ChargeTime/takeEffectTimeSet",chargeNumberList:"/community/property_api.ChargeTime/chargeNumberList",chargeNumberInfo:"/community/property_api.ChargeTime/chargeNumberInfo",addChargeNumber:"/community/property_api.ChargeTime/addChargeNumber",editChargeNumber:"/community/property_api.ChargeTime/editChargeNumber",getChargeType:"/community/property_api.ChargeTime/getChargeType",chargeWaterType:"/community/property_api.ChargeTime/chargeWaterType",offlinePayList:"/community/property_api.ChargeTime/offlinePayList",offlinePayInfo:"/community/property_api.ChargeTime/offlinePayInfo",addOfflinePay:"/community/property_api.ChargeTime/addOfflinePay",editOfflinePay:"/community/property_api.ChargeTime/editOfflinePay",delOfflinePay:"/community/property_api.ChargeTime/delOfflinePay",getCountFeeList:"/community/property_api.ChargeTime/countVillageFee",villageLogin:"/community/property_api.ChargeTime/village_login",frameworkTissueNav:"/community/common.Framework/getTissueNav",frameworkTissueUser:"/community/common.Framework/getTissueUser",frameworkGroupParam:"/community/common.Framework/getGroupParam",frameworkPropertyVillage:"/community/common.Framework/getPropertyVillage",frameworkOrganizationAdd:"/community/common.Framework/organizationAdd",frameworkOrganizationQuery:"/community/common.Framework/organizationQuery",frameworkOrganizationSub:"/community/common.Framework/organizationSub",frameworkOrganizationDel:"/community/common.Framework/organizationDel",frameworkWorkerAdd:"/community/common.Framework/workerAdd",frameworkWorkerSub:"/community/common.Framework/workerSub",powerRoleList:"/community/property_api.Power/getRoleList",powerRoleDel:"/community/property_api.Power/roleDel",propertyConfigSetApi:"/community/property_api.Property/config",passwordChangeApi:"/community/property_api.Property/passwordChange",digitApi:"/community/property_api.Property/digit",saveDigitApi:"/community/property_api.Property/saveDigit",ajaxProvince:"/community/property_api.Property/ajaxProvince",ajaxCity:"/community/property_api.Property/ajaxCity",ajaxArea:"/community/property_api.Property/ajaxArea",saveConfig:"/community/property_api.Property/saveConfig",loginLogList:"/community/property_api.Security/loginLog",loginLogDetail:"/community/property_api.Security/loginLogDetail",commonLog:"/community/property_api.Security/commonLog",commonLogDetail:"/community/property_api.Security/commonLogDetail"};r["a"]=o},"74fb":function(e,r,a){},b223:function(e,r,a){"use strict";a.r(r);var o=function(){var e=this,r=e._self._c;return r("div",{staticClass:"base_config"},[r("a-form-model",{ref:"ruleForm",attrs:{model:e.baseConfigForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{attrs:{label:"物业名称",prop:"property_name",extra:" 如果想再次修改物业公司名称,请联系平台修改"}},[r("a-input",{staticClass:"form_width",attrs:{disabled:!!e.baseConfigForm.set_name_time},model:{value:e.baseConfigForm.property_name,callback:function(r){e.$set(e.baseConfigForm,"property_name",r)},expression:"baseConfigForm.property_name"}})],1),r("a-form-model-item",{attrs:{label:"物业公司名称简称",prop:"property_short_name",extra:"如果想再次修改物业公司名称简称,请联系平台修改"}},[r("a-input",{staticClass:"form_width",attrs:{disabled:!!e.baseConfigForm.set_short_name_time},model:{value:e.baseConfigForm.property_short_name,callback:function(r){e.$set(e.baseConfigForm,"property_short_name",r)},expression:"baseConfigForm.property_short_name"}})],1),r("a-form-model-item",{attrs:{label:"所在省市区",prop:"choose_cityarea"}},[r("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择省"},on:{change:function(r){return e.handleSelectChange(r,"province")}},model:{value:e.baseConfigForm.province_id,callback:function(r){e.$set(e.baseConfigForm,"province_id",r)},expression:"baseConfigForm.province_id"}},e._l(e.provinceList,(function(a,o){return r("a-select-option",{key:o,attrs:{value:a.area_id}},[e._v(e._s(a.area_name))])})),1),r("a-select",{staticStyle:{width:"200px","margin-left":"20px"},attrs:{placeholder:"请选择市"},on:{change:function(r){return e.handleSelectChange(r,"city")}},model:{value:e.baseConfigForm.city_id,callback:function(r){e.$set(e.baseConfigForm,"city_id",r)},expression:"baseConfigForm.city_id"}},e._l(e.cityList,(function(a,o){return r("a-select-option",{key:o,attrs:{value:a.area_id}},[e._v(e._s(a.area_name))])})),1),r("a-select",{staticStyle:{width:"200px","margin-left":"20px"},attrs:{placeholder:"请选择区"},on:{change:function(r){return e.handleSelectChange(r,"area")}},model:{value:e.baseConfigForm.area_id,callback:function(r){e.$set(e.baseConfigForm,"area_id",r)},expression:"baseConfigForm.area_id"}},e._l(e.areaList,(function(a,o){return r("a-select-option",{key:o,attrs:{value:a.area_id}},[e._v(e._s(a.area_name))])})),1)],1),r("a-form-model-item",{attrs:{label:"物业地址",prop:"property_address",extra:"地址不能带有上面所在地选择的省/市/区信息。"}},[r("a-input",{staticClass:"form_width",model:{value:e.baseConfigForm.property_address,callback:function(r){e.$set(e.baseConfigForm,"property_address",r)},expression:"baseConfigForm.property_address"}})],1),r("a-form-model-item",{attrs:{label:"物业logo",prop:"property_logo",extra:"建议上传200*200的图片"}},[r("a-upload",{staticClass:"avatar-uploader",attrs:{name:"reply_pic","list-type":"picture-card","show-upload-list":!1,data:e.uploadParams,action:e.uploadUrl,"before-upload":e.beforeUpload},on:{change:e.handleChange}},[e.imageUrl?r("img",{staticStyle:{width:"6.25rem",height:"6.25rem"},attrs:{src:e.imageUrl,alt:"avatar"}}):r("div",[r("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),r("div",{staticClass:"ant-upload-text"},[e._v(" Upload ")])],1)])],1),r("a-form-model-item",{attrs:{label:"物业经纬度",prop:"long_lat"}},[r("a-input",{staticClass:"form_width",attrs:{disabled:!0},model:{value:e.baseConfigForm.long_lat,callback:function(r){e.$set(e.baseConfigForm,"long_lat",r)},expression:"baseConfigForm.long_lat"}}),r("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(r){return e.openMap()}}},[e._v("获取经纬度")])],1),r("a-form-model-item",{attrs:{label:"物业联系方式",prop:"property_phone",extra:"电话号码以空格分开"}},[r("a-input",{staticClass:"form_width",model:{value:e.baseConfigForm.property_phone,callback:function(r){e.$set(e.baseConfigForm,"property_phone",r)},expression:"baseConfigForm.property_phone"}}),r("a-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.baseConfigForm.property_phone,expression:"baseConfigForm.property_phone",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.copySuccess,expression:"copySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.copyError,expression:"copyError",arg:"error"}],staticStyle:{"margin-left":"20px"},attrs:{type:"primary"}},[e._v(" 点击复制 ")])],1),e.baseConfigForm.house_property_login?r("a-form-model-item",{attrs:{label:"物业登录地址",prop:"house_property_login"}},[r("a-button",{attrs:{type:"link",title:"当前物业指定的登录地址，点击右侧即可复制链接"}},[e._v(" "+e._s(e.baseConfigForm.house_property_login))]),r("a-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.baseConfigForm.house_property_login,expression:"baseConfigForm.house_property_login",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.copySuccess,expression:"copySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.copyError,expression:"copyError",arg:"error"}],staticStyle:{"margin-left":"20px"},attrs:{type:"primary"}},[e._v(" 点击复制 ")])],1):e._e(),r("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:3}}},[r("a-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),r("a-button",{staticStyle:{"margin-left":"10px"},on:{click:e.resetForm}},[e._v("重置")])],1)],1),e.mapVisible?r("a-modal",{attrs:{title:"百度地图拾取经纬度",visible:e.mapVisible,width:800},on:{ok:e.handleMapOk,cancel:e.handleMapCancel}},[r("a-input",{staticClass:"input_style",staticStyle:{width:"200px"},attrs:{type:"text",id:"suggestId",name:"address_detail",placeholder:"请输入城市名/地区名"},model:{value:e.address_detail,callback:function(r){e.address_detail=r},expression:"address_detail"}}),r("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.searchMap}},[e._v("搜索")]),r("div",{staticStyle:{width:"100%",height:"500px","margin-top":"10px"},attrs:{id:"allmap"}})],1):e._e()],1)},i=[],t=(a("c740"),a("d81d"),a("4f2c"));var n={data:function(){return{loading:!1,uploadUrl:"/v20/public/index.php/common/common.UploadFile/uploadImg",imageUrl:"",labelCol:{span:3},wrapperCol:{span:14},baseConfigForm:{},rules:{property_name:[{required:!0,message:"请输入物业名称",trigger:"blur"}],property_short_name:[{required:!0,message:"请输入物业公司简称",trigger:"blur"}],choose_cityarea:[{required:!1,message:"请选择省市区域",trigger:"blur"}],property_address:[{required:!0,message:"请输入物业地址",trigger:"blur"}],property_logo:[{required:!0,message:"请选择物业图标",trigger:"blur"}],long_lat:[{required:!0,message:"请选择经纬度",trigger:"blur"}],property_phone:[{required:!0,message:"请输入物业联系方式",trigger:"blur"}]},mapVisible:!1,address_detail:"北京",userlocation:{lng:"",lat:""},userLng:"",userLat:"",provinceList:[],cityList:[],areaList:[],uploadParams:{upload_dir:"proptery"},searchArea:!1}},mounted:function(){this.getBaseConfig()},methods:{getBaseConfig:function(){var e=this;this.request(t["a"].propertyConfigSetApi).then((function(r){e.baseConfigForm=r,e.baseConfigForm.long_lat=r.long+","+r.lat,e.imageUrl=r.property_logo,r.province_id?e.baseConfigForm.province_id=r.province_id:e.baseConfigForm.province_id="",r.city_id?e.baseConfigForm.city_id=r.city_id:e.baseConfigForm.city_id="",r.area_id?e.baseConfigForm.area_id=r.area_id:e.baseConfigForm.area_id="",r.property_address&&(e.address_detail=r.property_address),e.getProvice(),e.getCity(r.province_id),e.getArea(r.city_id)}))},getProvice:function(){var e=this;this.request(t["a"].ajaxProvince).then((function(r){r.error&&1==r.error&&e.$message.warn(r.info),e.provinceList=r.list,e.baseConfigForm.province_id||(e.baseConfigForm.province_id=r.list[0].province_id)}))},getCity:function(e){var r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.request(t["a"].ajaxCity,{id:e,name:a}).then((function(e){e.error&&1==e.error&&r.$message.warn(e.info),r.cityList=e.list,r.baseConfigForm.city_id||(r.baseConfigForm.city_id=e.list[0].area_id,r.getArea(e.list[0].area_id,e.list[0].area_name))}))},getArea:function(e){var r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.request(t["a"].ajaxArea,{id:e,name:a}).then((function(e){e.error&&1==e.error&&r.$message.warn(e.info),r.areaList=e.list,r.baseConfigForm.area_id||(r.baseConfigForm.area_id=e.list[0].area_id)}))},saveForm:function(e){var r=this;this.request(t["a"].saveConfig,e).then((function(e){r.$message.success("编辑成功！"),r.getBaseConfig()}))},navigateTo:function(e){window.open(e)},copyError:function(){this.$message.error("复制失败！")},copySuccess:function(){this.$message.success("复制成功！")},onSubmit:function(){var e=this;this.$refs.ruleForm.validate((function(r){if(r){if(e.baseConfigForm.property_name&&e.baseConfigForm.property_name.length>50)return void e.$message.warn("物业名称长度限制在50个字符以内");if(e.baseConfigForm.property_short_name&&e.baseConfigForm.property_short_name.length>50)return void e.$message.warn("物业公司名字简称长度限制在50个字符以内");if(!e.baseConfigForm.province_id||!e.baseConfigForm.city_id||!e.baseConfigForm.area_id)return void e.$message.warn("请输入完整省市区");var a={property_name:e.baseConfigForm.property_name,property_short_name:e.baseConfigForm.property_short_name,province_id:e.baseConfigForm.province_id,city_id:e.baseConfigForm.city_id,area_id:e.baseConfigForm.area_id,property_address:e.baseConfigForm.property_address,property_logo:e.baseConfigForm.property_logo,long_lat:e.baseConfigForm.long_lat,lat:e.baseConfigForm.lat,long:e.baseConfigForm.long,property_phone:e.baseConfigForm.property_phone};e.baseConfigForm.set_name_time&&delete a.property_name,e.baseConfigForm.set_short_name_time&&delete a.property_short_name,e.saveForm(a)}}))},resetForm:function(){this.imageUrl="",this.baseConfigForm={},this.cityList=[],this.areaList=[],this.baseConfigForm.province_id="",this.baseConfigForm.city_id="",this.baseConfigForm.area_id="",this.$refs.ruleForm.resetFields()},handleMapOk:function(){this.userLng&&this.userLat?(this.baseConfigForm.long_lat=this.userLng+","+this.userLat,this.baseConfigForm.lat=this.userLat,this.baseConfigForm.long=this.userLng,this.mapVisible=!1,this.searchArea=!1):(this.mapVisible=!1,this.searchArea=!1)},handleMapCancel:function(){this.mapVisible=!1,this.searchArea=!1},openMap:function(){this.mapVisible=!0,this.address_detail=this.baseConfigForm.property_address,this.initMap()},searchMap:function(){this.address_detail&&(this.searchArea=!0,this.initMap())},initMap:function(){this.$nextTick((function(){var e,r=this,a=new BMap.Map("allmap");if(r.baseConfigForm.lat&&r.baseConfigForm.long&&!this.searchArea){a.clearOverlays(),e=new BMap.Point(r.baseConfigForm.long,r.baseConfigForm.lat);var o={position:e,offset:new BMap.Size(0,15)},i=new BMap.Label(r.baseConfigForm.property_name||"暂无物业名称",o);i.setStyle({color:"#fff",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"10px",padding:"0 10px",fontSize:"10px",lineHeight:"20px",border:"0",transform:"translateX(-50%)"}),a.addOverlay(i),a.addOverlay(new BMap.Marker(e))}else e=r.address_detail||"北京";a.centerAndZoom(e,15),a.enableScrollWheelZoom(),a.addEventListener("click",(function(e){a.clearOverlays(),a.addOverlay(new BMap.Marker(e.point)),r.userLng=e.point.lng,r.userLat=e.point.lat}))}))},handleChange:function(e){if("uploading"!==e.file.status)return"error"===e.file.status?(this.$message.error("上传失败!"),void(this.loading=!1)):void("done"===e.file.status&&(this.imageUrl=e.file.response.data.full_url,this.baseConfigForm.property_logo=e.file.response.data.image,this.loading=!1));this.loading=!0},beforeUpload:function(e,r){var a="image/jpeg"===e.type||"image/png"===e.type;a||this.$message.error("You can only upload JPG file!");var o=e.size/1024/1024<2;return o||this.$message.error("Image must smaller than 2MB!"),a&&o},handleSelectChange:function(e,r){var a=this;if(console.log(e,r),"province"==r){this.baseConfigForm.province_id=e,this.baseConfigForm.city_id="",this.baseConfigForm.area_id="";var o=this.provinceList.findIndex((function(r){return r.area_id==e}));this.getCity(e,this.provinceList[o].area_name)}else"city"==r?(this.baseConfigForm.city_id=e,this.baseConfigForm.area_id="",this.cityList.map((function(r){r.area_id==e&&a.getArea(e,r.area_name)}))):"area"==r&&(this.baseConfigForm.area_id=e,this.$forceUpdate())}}},s=n,p=(a("cace"),a("2877")),m=Object(p["a"])(s,o,i,!1,null,"47f0740c",null);r["default"]=m.exports},cace:function(e,r,a){"use strict";a("74fb")}}]);