(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-735c6edb","chunk-2d0c06af","chunk-2d0b3786"],{2909:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var a=s("6b75");function r(t){if(Array.isArray(t))return Object(a["a"])(t)}s("a4d3"),s("e01a"),s("d3b7"),s("d28b"),s("3ca3"),s("ddb0"),s("a630");function l(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var o=s("06c5");function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t){return r(t)||l(t)||Object(o["a"])(t)||i()}},4261:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"primary"}},[t._v(" Open the message box ")])},r=[],l={downloadExportFile:"/common/common.export/downloadExportFile"},o=l,i="updatable",n={props:{exportUrl:"",queryParam:{}},data:function(){return{file_date:"",file_url:""}},mounted:function(){},methods:{exports:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"加载中,请耐心等待,数量越多时间越长。";this.request(this.exportUrl,this.queryParam).then((function(s){t.$message.loading({content:e,key:i,duration:0}),console.log("添加导出计划任务成功"),t.file_url=o.downloadExportFile+"?id="+s.export_id,t.file_date=s,t.CheckStatus()}))},CheckStatus:function(){var t=this;this.request(this.file_url,{id:this.file_date.export_id}).then((function(e){0==e.error?(t.$message.success({content:"下载成功!",key:i,duration:2}),location.href=e.url):setTimeout((function(){t.CheckStatus(),console.log("重复请求")}),1e3)}))}}},d=n,u=s("2877"),c=Object(u["a"])(d,a,r,!1,null,"dd2f8128",null);e["default"]=c.exports},"5f66":function(t,e,s){"use strict";var a={getOrderList:"/mall/storestaff.MallOrder/getOrderList",exportOrder:"/mall/storestaff.MallOrder/exportOrder",orderTaking:"/mall/storestaff.MallOrder/orderTaking",deliverGoodsByHouseman:"/mall/storestaff.MallOrder/deliverGoodsByHouseman",staffVerify:"/mall/storestaff.MallOrder/staffVerify",postponeDelivery:"/mall/storestaff.MallOrder/postponeDelivery",agreeRefund:"/mall/storestaff.MallOrder/AgreeRefund",getExpress:"/mall/storestaff.MallOrder/getExpress",deliverGoodsByExpress:"/mall/storestaff.MallOrder/deliverGoodsByExpress",viewLogistics:"/mall/storestaff.MallOrder/viewLogistics",refuseRefund:"/mall/storestaff.MallOrder/RefuseRefund",clerkDiscount:"/mall/storestaff.MallOrder/clerkDiscount",getOrderDetails:"/mall/storestaff.MallOrder/getOrderDetails",clerkNotes:"/mall/storestaff.MallOrder/clerkNotes",getPeriodicList:"/mall/storestaff.MallOrder/getPeriodicList",downExcel:"/mall/storestaff.MallOrder/downExcel",downFailExcel:"/mall/storestaff.MallOrder/downFailExcel",uploadUrl:"/common/common.UploadFile/uploadFile",uploadExcel:"/mall/storestaff.MallOrder/uploadFile",getList:"/mall/storestaff.MallOrder/shopGoodsBatchLogList",getOrderListCopy:"/mall/storestaff.MallOrder/getOrderListCopy",getOrderDetailsCopy:"/mall/storestaff.MallOrder/getOrderDetailsCopy",orderPrintTicket:"/mall/storestaff.MallOrder/printOrder"};e["a"]=a},"75d0":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"components-layout-demo-basic"}},[s("a-spin",{attrs:{spinning:t.spinning,size:"large"}},[s("a-layout",[s("a-layout-content",{style:{margin:"24px 16px",padding:"24px",background:"#fff",minHeight:"100px"}},[s("a-row",[s("a-row",[s("a-col",{staticStyle:{"text-align":"center","font-size":"20px","font-weight":"bold","padding-left":"5px"},attrs:{span:2}},[t._v("发货流程")]),s("a-col",{staticStyle:{"text-align":"left","font-size":"15px",opacity:"0.5","padding-top":"3px"},attrs:{span:22}},[t._v("(批量发货目前仅支持快递待发货订单,暂不支持自提订单和同城配送方式的订单)")])],1),s("a-row",{staticStyle:{"padding-top":"15px"}},[s("a-col",{attrs:{span:1}}),s("a-col",{attrs:{span:17}},[s("a-steps",[s("a-step",{attrs:{status:"wait",title:"下载发货单模板"}}),s("a-step",{attrs:{title:"按模板填写发货单"}}),s("a-step",{attrs:{title:"上传发货单"}}),s("a-step",{attrs:{title:"确认发货"}})],1)],1),s("a-col",{staticStyle:{"padding-left":"160px"},attrs:{span:3}},[s("a-button",{attrs:{type:"primary"},on:{click:t.showModal}},[t._v(" 批量发货 ")]),s("a-modal",{attrs:{title:"批量发货"},on:{ok:t.handleOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[s("p",[t._v("文件:"),s("a-upload",{attrs:{name:"file",multiple:!0,data:{upload_dir:"mall/order"},action:"/v20/public/index.php/common/common.UploadFile/uploadFile","file-list":t.fileList},on:{change:t.uploadFile}},[s("a-button",[s("a-icon",{attrs:{type:"upload"}}),t._v(" 点击上传文件 ")],1)],1)],1),s("p",[t._v("最大支持10000条记录 (支持xls、xlsx,文件大小请控制在1MB以内)")]),s("p",[s("a",{attrs:{type:"link"},on:{click:t.downLodExcel}},[t._v("下载批量发货模板")])])])],1),s("a-col",{staticStyle:{"padding-left":"100px"},attrs:{span:3}},[s("a-button",{staticStyle:{"font-size":"20px"},attrs:{type:"link"},on:{click:t.showModal1}},[t._v(" 修改物流 ")]),s("a-modal",{attrs:{title:"修改物流"},on:{ok:t.handleOk1},model:{value:t.visible1,callback:function(e){t.visible1=e},expression:"visible1"}},[s("p",[t._v("文件:"),s("a-upload",{attrs:{name:"file",multiple:!0,data:{upload_dir:"mall/order"},action:"/v20/public/index.php/common/common.UploadFile/uploadFile","file-list":t.fileList4},on:{change:t.uploadFile1}},[s("a-button",[s("a-icon",{attrs:{type:"upload"}}),t._v(" 点击上传文件 ")],1)],1)],1),s("p",[t._v("1、最大支持10000条记录 (支持xls、xlsx,文件大小请控制在1MB以内)")]),s("p",[t._v("2、仅支持对24小时内自己联系的物流或者表格倒入发货的已发货快递修改一次运单信息")])])],1)],1)],1)],1),s("a-layout-content",{style:{margin:"24px 16px",padding:"24px",background:"#fff",minHeight:"100px"}},[s("a-row",[s("a-table",{staticStyle:{"text-align":"center"},attrs:{bordered:"",rowKey:"id",columns:t.columns,"data-source":t.dataList,pagination:!1},scopedSlots:t._u([{key:"pigcms_id",fn:function(e){return s("span",{},[t._v(" "+t._s(e)+" ")])}},{key:"log_date",fn:function(e){return s("span",{},[t._v(" "+t._s(e)+" ")])}},{key:"name",fn:function(e){return s("span",{},[t._v(" "+t._s(e)+" ")])}},{key:"order_num",fn:function(e){return s("span",{},[t._v(" "+t._s(e)+" ")])}},{key:"success_num",fn:function(e){return s("span",{},[t._v(" "+t._s(e)+" ")])}},{key:"status",fn:function(e){return s("span",{staticClass:"text-center"},[0==e?s("a-badge",{attrs:{status:"default",text:"处理中"}}):t._e(),2==e?s("a-badge",{attrs:{status:"default",text:"已完成"}}):t._e()],1)}},{key:"work_status",fn:function(e,a){return s("span",{staticClass:"text-center"},[0==e?s("a-badge",{attrs:{status:"default",text:"报表生成中"}}):t._e(),2==e&&a.error_num>0?s("a",{on:{click:function(e){return t.downLoadFailLog(a.pigcms_id)}}},[t._v("下载失败列表")]):t._e(),2==e&&0==a.error_num?s("a-badge",{attrs:{status:"success",text:"已完成"}}):t._e()],1)}}])})],1)],1)],1),s("export-add",{ref:"ExportAddModal",attrs:{exportUrl:t.exportUrl}})],1)],1)},r=[],l=s("2909"),o=(s("fb6a"),s("d81d"),s("5f66")),i=s("4261"),n=s("290c"),d=s("da05"),u=[{title:"记录编号",dataIndex:"pigcms_id",key:"pigcms_id",scopedSlots:{customRender:"pigcms_id"}},{title:"操作时间",dataIndex:"log_date",key:"log_date",scopedSlots:{customRender:"log_date"}},{title:"操作人",key:"name",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"发货单数",dataIndex:"order_num",key:"order_num",scopedSlots:{customRender:"order_num"}},{title:"成功发货单数",dataIndex:"success_num",key:"success_num",scopedSlots:{customRender:"success_num"}},{title:"状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"work_status",key:"work_status",scopedSlots:{customRender:"work_status"}}],c=[],f={name:"SendGoods",components:{ACol:d["b"],ARow:n["a"],ExportAdd:i["default"]},data:function(){return{data:c,columns:u,visible:!1,visible1:!1,exportUrl:o["a"].downExcel,file_url:"",file_url1:"",dataList:[],spinning:!1,fileList:[],fileList4:[]}},created:function(){this.getDataList()},methods:{submitForm:function(){this.getDataList()},getDataList:function(){var t=this;this.request(o["a"].getList).then((function(e){t.dataList=e.list}))},showModal:function(){this.visible=!0},handleOk:function(t){var e=this;""!=this.file_url&&(this.spinning=!0,this.request(o["a"].uploadExcel,{file_url:this.file_url}).then((function(t){e.spinning=!1,e.fileList=[],1==t?e.$message.success("恭喜你  导入数据成功!"):2==t?e.$message.error("导入完成！其中部分商品导入失败，您可在操作记录列表中下载导入失败记录，做相应修改后继续导入!"):3==t?e.$message.error("全部导入失败！您可在操作记录列表中下载导入失败记录，做相应修改后继续导入"):e.$message.error("表格没有数据,请编辑数据再导入"),e.submitForm()}))),this.visible=!1},showModal1:function(){this.visible1=!0},handleOk1:function(t){var e=this;if(""!=this.file_url1){this.spinning=!0;var s={type:"update",file_url:this.file_url1};this.request(o["a"].uploadExcel,s).then((function(t){e.spinning=!1,e.fileList4=[],1==t?e.$message.success("恭喜你  导入数据成功!"):2==t?e.$message.error("导入完成！其中部分商品导入失败，您可在操作记录列表中下载导入失败记录，做相应修改后继续导入!"):3==t?e.$message.error("全部导入失败！您可在操作记录列表中下载导入失败记录，做相应修改后继续导入"):e.$message.error("表格没有数据,请编辑数据再导入"),e.submitForm()}))}this.visible1=!1},downLodExcel:function(){var t=this;this.request(o["a"].downExcel,{}).then((function(e){0==e.error?(t.$message.success("下载成功!"),location.href=e.url):t.$message.error("下载失败!")}))},uploadFile:function(t){var e=Object(l["a"])(t.fileList);e=e.slice(-1),e=e.map((function(t){return t.response&&(t.url=t.response.url),t})),this.fileList=e,"done"==e[0].status&&(this.file_url=e[0].response.data)},uploadFile1:function(t){var e=Object(l["a"])(t.fileList);e=e.slice(-1),e=e.map((function(t){return t.response&&(t.url=t.response.url),t})),this.fileList4=e,"done"==e[0].status&&(this.file_url1=e[0].response.data)},downLoadFailLog:function(t){var e=this,s={log_id:t};this.request(o["a"].downFailExcel,s).then((function(t){0==t.error?(e.$message.success("下载成功!"),location.href=t.url):e.$message.error("下载失败!")}))}}},p=f,m=s("2877"),g=Object(m["a"])(p,a,r,!1,null,"ee39b8d0",null);e["default"]=g.exports}}]);