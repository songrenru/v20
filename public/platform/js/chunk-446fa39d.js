(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-446fa39d","chunk-88ff25fe"],{"0102":function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shopping_Cart"},[e("div",{staticClass:"cart_left_wrapper"},[e("div",{staticClass:"orderTotal_info"},[e("div",{staticClass:"info_container"},[e("div",{staticClass:"left_infoContent"},[e("div",{staticClass:"table_orderTime"},[t.TABLE_INFO.table_name?e("div",{staticClass:"table"},[t._v(t._s(t.L("桌号"))+"："+t._s(t.TABLE_INFO.table_name))]):t._e(),t.ORDER_INFO.create_time_str?e("div",{staticClass:"underbox"},[t._v(" "+t._s(t.L("下单时间"))+"："+t._s(t.ORDER_INFO.create_time_str)+" ")]):t._e()]),e("div",{staticClass:"table_orderTime"},[t.TABLE_INFO.table_name?e("div",{staticClass:"table"},[t._v(t._s(t.L("就餐人数"))+"："+t._s(t.ORDER_INFO.book_num))]):t._e(),e("div",{staticClass:"underbox"},[t._v(t._s(t.L("店员"))+"："+t._s(t.staffname))])])])])]),e("div",{staticClass:"slider_cart_wrapper"},[e("div",{staticClass:"slider_cart_container"},[e("div",{staticClass:"order_List"},t._l(t.PAGE_INFO.goods_list,(function(s,o){return e("div",{key:o,staticClass:"order_items",class:s.is_selected?"selected_item":"",on:{click:function(s){return t.selectFood(o)}}},[e("orderGoodsItem",{attrs:{goods:s}})],1)})),0)])]),e("div",{staticClass:"bottom_tatol_info_wrapper"},[e("div",{staticClass:"tatol_info_container"},[e("div",{staticClass:"order_food_info"},[e("div",{staticClass:"order_tatol_num"},[t._v(t._s(t.L("已加菜X1项",{X1:t.PAGE_INFO.num})))]),e("div",{staticClass:"order_tatol_price"},[e("span",[t._v(t._s(t.L("￥")))]),t._v(" "+t._s(t.PAGE_INFO.total_price)+" ")])]),e("div",{staticClass:"confirmOrder_btn",class:t.canshow?"cantOrder":"",on:{click:function(s){return t.confirmOrder()}}},[t._v(" "+t._s(t.L("确定下单"))+" ")])])])]),e("div",{staticClass:"cart_right_wrapper"},[e("div",{staticClass:"food_operation"},[t.nowSelectgooods?e("div",{staticClass:"change_num"},[e("div",{staticClass:"reduce_icon",on:{click:function(s){return t.reduceFoodcount()}}},[e("a-icon",{attrs:{type:"minus"}})],1),e("div",{staticClass:"countnum"},[t._v(t._s(t.nowSelectgooods.num))]),e("div",{staticClass:"add_icon",on:{click:function(s){return t.addFoodcount()}}},[e("a-icon",{attrs:{type:"plus"}})],1)]):t._e(),e("div",{staticClass:"cancel_order"},[t.showReturnBtn?e("div",{staticClass:"cancel_order_btn",on:{click:function(s){return t.cancelOrder()}}},[t._v(t._s(t.L("撤单")))]):t._e()]),e("div",{staticClass:"clean_up"},[e("div",{staticClass:"clean_up_btn",class:t.canshow?"cantOrder":"",on:{click:function(s){return t.clearallgoods()}}},[t._v(t._s(t.L("清空")))])])])])])},n=[],i=(e("d81d"),e("d3b7"),e("159b"),e("ac1f"),e("5319"),e("8bbf")),r=e.n(i),a=e("9e03"),c={props:{showReturnBtn:Boolean,frompage:String},components:{orderGoodsItem:a["default"]},data:function(){return{ORDER_ID:"",TABLE_INFO:"",ORDER_INFO:"",PAGE_INFO:"",canshow:!0,staffname:"",currentfoodnumber:1,nowSelectgooods:"",nowSelectgooodsNum:"",buffer:!0}},destroyed:function(){this.$bus.$off("updatacart")},created:function(){this.ORDER_ID=this.$store.state.storestaff.nowOrderId,this.staffname=r.a.ls.get("storestaff_page_info").staff_name,this.getShopcartInfo()},watch:{"$store.state.storestaff.nowOrderId":function(t,s){this.getShopcartInfo()},"$store.state.storestaff.nowSelectgooodsNum":function(t,s){this.nowSelectgooodsNum=t}},methods:{getShopcartInfo:function(){var t=this;this.request("/foodshop/storestaff.order/cartDetail",{order_id:this.$store.state.storestaff.nowOrderId}).then((function(s){t.PAGE_INFO=s,t.TABLE_INFO=s.table_info,t.ORDER_INFO=s.order.order,t.$emit("uploadMenu",t.PAGE_INFO),s.goods_list.length>0?t.canshow=!1:t.canshow=!0,t.initData()}))},initData:function(){var t=this;if(this.PAGE_INFO.goods_list.length>0){this.PAGE_INFO.goods_list.map((function(s,e){t.$store.state.storestaff.nowSelectgooodsNum==s.uniqueness_number?(s.is_selected=!0,t.nowSelectgooods=s,t.nowSelectgooodsNum=s.uniqueness_number):s.is_selected=!1,t.$set(t.PAGE_INFO.goods_list,e,s)}));var s=this.PAGE_INFO.goods_list.some((function(s){return s.uniqueness_number==t.nowSelectgooods.uniqueness_number}));s||(this.nowSelectgooods="",this.nowSelectgooodsNum="",this.$store.commit("changenowSelectgooodsNum",""))}else this.nowSelectgooods="",this.nowSelectgooodsNum="",this.$store.commit("changenowSelectgooodsNum","")},selectFood:function(t){var s=this;this.PAGE_INFO.goods_list.forEach((function(e,o){t==o?(e.is_selected=!0,e.is_selected&&(s.nowSelectgooods=e,s.$store.commit("changenowSelectgooodsNum",e.uniqueness_number))):e.is_selected=!1,s.$set(s.PAGE_INFO.goods_list,o,e)})),this.$forceUpdate()},watchmenu:function(t){var s=this;if(this.nowSelectgooodsNum){var e=this.PAGE_INFO.goods_list.some((function(t){return t.uniqueness_number==s.nowSelectgooodsNum}));e?this.PAGE_INFO.goods_list.forEach((function(t,e){t.uniqueness_number==s.nowSelectgooodsNum?(s.nowSelectgooods=t,t.is_selected=!0,s.addFoodcount()):t.is_selected=!1,s.$set(s.PAGE_INFO.goods_list,e,t)})):this.request("/foodshop/storestaff.order/addCart",{order_id:this.$store.state.storestaff.nowOrderId,product:t.length?t:[t],number:0==t.mini_num?"1":t.mini_num,operate_type:0}).then((function(t){0==t.status&&s.$message.error(t.msg),s.getShopcartInfo()}))}},reduceFoodcount:function(){var t=this;if(this.buffer){if(this.buffer=!1,this.nowSelectgooods.num>this.nowSelectgooods.mini_num)var s=1;else s=this.nowSelectgooods.mini_num||1;this.request("/foodshop/storestaff.order/addCart",{order_id:this.$store.state.storestaff.nowOrderId,uniqueness_number:this.nowSelectgooods.uniqueness_number,number:s,operate_type:1,product:[]}).then((function(s){t.getShopcartInfo(),t.buffer=!0}))}},addFoodcount:function(){var t=this;if(this.buffer){if(this.buffer=!1,this.nowSelectgooods.num<this.nowSelectgooods.mini_num)var s=this.nowSelectgooods.mini_num;else s=1;this.request("/foodshop/storestaff.order/addCart",{order_id:this.$store.state.storestaff.nowOrderId,uniqueness_number:this.nowSelectgooods.uniqueness_number,number:s,product:[],operate_type:0}).then((function(s){t.getShopcartInfo(),0==s.status&&t.$message.error(s.msg),t.buffer=!0}))}},clearallgoods:function(){var t=this;this.$confirm({title:this.L("提示"),content:this.L("确定要清空购物车吗")+"？",okText:this.L("确认"),centered:!0,cancelText:this.L("取消"),onOk:function(){t.request("/foodshop/storestaff.order/clearCart",{order_id:t.$store.state.storestaff.nowOrderId}).then((function(s){t.$store.commit("changenowSelectgooodsNum",""),t.nowSelectgooods="",t.getShopcartInfo()}))}})},cancelOrder:function(){var t=this;this.$confirm({title:this.L("提示"),content:this.L("是否取消订单")+"？",okText:this.L("确认"),centered:!0,cancelText:this.L("取消"),onOk:function(){t.request("/foodshop/storestaff.order/cancelOrder",{order_id:t.$store.state.storestaff.nowOrderId}).then((function(s){t.$router.go(-1),t.$store.commit("changeleftState",""),t.$store.commit("changenowSelectgooodsNum",""),t.nowSelectgooods=""}))}})},confirmOrder:function(){var t=this;this.request("/foodshop/storestaff.order/saveCart",{order_id:this.$store.state.storestaff.nowOrderId}).then((function(s){"order"==t.frompage?(t.$router.replace({name:"order"}),t.$store.commit("changeorderPageState","nomarlCode")):(t.$store.commit("changeleftState",2),t.$router.replace({name:"dining"}))}))}}},d=c,_=(e("6ac0"),e("2877")),u=Object(_["a"])(d,o,n,!1,null,"8e295f8c",null);s["default"]=u.exports},"1d12":function(t,s,e){},"6ac0":function(t,s,e){"use strict";e("f9884")},"6bf7":function(t,s,e){"use strict";e("1d12")},7109:function(t,s,e){t.exports=e.p+"img/return_dishes.f310e4e4.png"},"9e03":function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",[o("div",{staticClass:"items_content"},[o("div",{staticClass:"mainCourse_info"},[o("div",{staticClass:"foodname_count"},[o("div",{staticClass:"foode_name"},[o("div",{staticClass:"name"},[t._v(" "+t._s(t.goods.name)+" ")]),t.goods.is_package_goods&&"order"==t.pageType?o("span",{staticClass:"verific_num"},[t._v(t._s(t.goods.verific_num&&0!=t.goods.verific_num?t.L("已核销X1份",{X1:t.goods.verific_num}):t.L("待核销")))]):t._e()]),o("div",{staticClass:"count"},[t._v("x"+t._s(t.goods.num))])]),o("div",{staticClass:"food_totalprice"},[t._v(t._s(t.L("￥"))+t._s(t.goods.total_price))])]),t.goods.is_staff?o("div",{staticClass:"only_straff"},[o("span",[t._v(t._s(t.L("由店员下单")))])]):t._e(),t.goods.is_must?o("div",{staticClass:"isMust"},[o("span",[t._v(t._s(t.L("必点")))])]):t._e(),o("div",{staticClass:"spec_info"},[t._v(t._s(t.goods.spec))]),t.goods.spec_sub?o("div",{staticClass:"accessory_dish"},[o("div",{staticClass:"accessory_tips"},[o("span",[t._v(" "+t._s(t.goods.is_package_goods?t.L("菜品"):t.L("附"))+" ")])]),o("div",{staticClass:"accessory_dish_info"},[t._v(t._s(t.goods.spec_sub))])]):t._e()]),t.refund_goods?o("div",{staticClass:"return_img"},[o("img",{attrs:{src:e("7109"),alt:""}})]):t._e()])},n=[],i=(e("8bbf"),{props:{goods:{type:[String,Object],default:""},refund_goods:{type:Boolean,default:!1},pageType:{type:String,default:""}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}}),r=i,a=(e("6bf7"),e("2877")),c=Object(a["a"])(r,o,n,!1,null,"cd11dd7c",null);s["default"]=c.exports},f9884:function(t,s,e){}}]);