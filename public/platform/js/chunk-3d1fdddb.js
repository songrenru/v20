(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d1fdddb","chunk-2d0b3786"],{"0125":function(t,e,i){"use strict";i("7c9d")},"016e":function(t,e,i){},"048c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADqUlEQVRoQ+2ZXWwMURTH/2dnW0RKI213+yFKGh+JiGhEREgrCBERIR3xxDOpmX3wqhIvou2uhgdvHq0IEaEhghDxGV9BqiEIa6etSIOmZLtzZKYj6d5u25nuzCyy93XuPef3v+dj791L+McH/eP8+D8FVB/n+ekUqtyKTjqFrr4DpLllb6SdUREIx/gGgAYPnJ3SFNrj1G7oGO8ixnowDmkqvRfXZwgoj/JSifDEqRPb8xlzs0FkXd/CgfBMxEHYYX1/ryk0d1wB4Sg3gGBEwIvxXVNohi3DLRwMl+I0gO0Z8xmNmko3x0whDwV0povQ3LeX3kwkoP4kF30aRJyAbQJ8t6bSAscR0BTyrVPVdfCUgTTiTNgqgDICaNKa6exfK6CmnacNkZnzWwTINAXQlGymc9mil7G72VLIjwiEjvJ0KkYcjM0CZIp0yMkInR8r9fIuoOwIlwSnIA5gkwD5i3XIPRG6MF7d5FXArA6eUczmzm8UIAct+IsTFX3eBNRGuXQwgDgxNgiQA2DImkqXJoI3vudFQE07z0pLiDNjnQD5A4wmTaVOO/B5EVDVymV60Mz5tQLkNwKakgpdsQvvu4DQUa6gIhM+46zFQL+kQ/4coatO4H0VUBHjUAA4A2CNAPmVGXKPStecwvsmoCzKlcGA2W1WC5BfLPjrk4H3RUBNO1enjG4DrBIge61uk3E4cyrE0y5U1cazdcnM+ZUCWI9VsLfsAoejXDvhfcDNo0RlK8/h4W6zQoBMWseD23bgy09wnZTCYwAlAEZdijyJgLFbILNgl4+EZCAhMeTPKt2xA2/MCcf48shjRlBHzacIJf6sd11AKMrzaBi+XoD8qDPkXpXu2oW3BHDGfOFS46qA8nauk4xuAyzLcEr4YHYbhe47gfdVQHUbzzcKloGlAvw7s9so9NApvG8Cqlp5oXU8WCLAv6U0diYj9Ggy8L4IqIzyIh7O+cVCrr4hQE6qZHSQSY9wjL2tgXCMH4jdBoxuCZATKj2dNLm10FMBFTFeEgCeCZBdOiD3KvQ8V3jPU6i2haf+LEWv9SNj+HvFBLlnP71wA95zAaaDKO8G4SCAe9BxWIvQS7fgfRHgJmw2W57WgNfwhQgYO+DHH1vjRbKQQoUI5FjphRTKcQPdX+70QuM+QY4WxxNgPq8O4XWOLjxdLgWxILGPuv848fOZ1Q1hNzWFGkcayvr+ZT63AqVueHTLRhro78tyv/DtAc8tIaKdggCvdtau3d+cjBBPKZkkcgAAAABJRU5ErkJggg=="},"07da":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{title:t.title,width:640,visible:t.visible,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel,ok:t.handleSubmit}},[i("a-spin",{attrs:{spinning:t.confirmLoading}},[i("a-form",{attrs:{form:t.form}},[i("a-form-item",{attrs:{label:t.L("商品分类"),labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort_id",{initialValue:0,rules:[{required:!0}]}],expression:"['sort_id', { initialValue: 0, rules: [{ required: true }] }]"}],staticStyle:{width:"320px"}},t._l(t.sortList,(function(e,a){return i("a-select-option",{key:a,attrs:{value:e.sort_id}},[t._v(t._s(e.sort_name))])})),1)],1)],1)],1)],1)},s=[],o=(i("99af"),i("6ea1")),n={data:function(){return{title:this.L("修改分类"),labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),data:{},sortList:[]}},mounted:function(){},methods:{edit:function(t,e){this.visible=!0,this.data.pigcms_id=e,this.data.store_id=t,this.getSortList()},handleSubmit:function(){var t=this,e=this.form.validateFields;this.confirmLoading=!0,e((function(e,i){if(e)t.confirmLoading=!1;else{if(i.store_id=t.data.store_id,i.pigcms_id=t.data.pigcms_id,i.type=7,i.sort_id<=0)return t.$message.error(t.L("请选择分类")),void(t.confirmLoading=!1);t.request(o["a"].editGoodsBatch,i).then((function(e){t.$message.success(t.L("编辑成功")),t.$emit("handleGoodsUpdate",{}),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1}),1500)})).catch((function(e){t.confirmLoading=!1}))}}))},getSortList:function(){var t=this;this.sortList=[{sort_id:0,sort_name:this.L("请选择分类")}],this.request(o["a"].selectSortList,this.data).then((function(e){t.sortList=t.sortList.concat(e)}))},handleCancel:function(){this.visible=!1,this.form=this.$form.createForm(this)}}},r=n,l=i("0c7c"),d=Object(l["a"])(r,a,s,!1,null,null,null);e["default"]=d.exports},"0a24":function(t,e,i){"use strict";i("226d")},1897:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{title:t.title,width:400,visible:t.visible,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel,ok:t.handleSubmit}},[i("a-spin",{attrs:{spinning:t.confirmLoading}},[i("a-form",{attrs:{form:t.form}},[i("a-form-item",{attrs:{label:t.L("价格"),labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{initialValue:t.data.price,rules:[{required:!0,message:t.L("请输入商品价格！")}]}],expression:"[\n            'price',\n            { initialValue: data.price, rules: [{ required: true, message: L('请输入商品价格！') }] },\n          ]"}],staticClass:"small-size"})],1)],1)],1)],1)},s=[],o=i("6ea1"),n={data:function(){return{title:this.L("修改价格"),labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),data:{pigcms_id:0,price:0}}},methods:{edit:function(t,e){this.visible=!0,this.data.pigcms_id=t,this.data.price=e},handleSubmit:function(){var t=this,e=this.form.validateFields;this.confirmLoading=!0,e((function(e,i){e?t.confirmLoading=!1:(i.pigcms_id=t.data.pigcms_id,i.type=2,console.log(i),t.request(o["a"].editSingleGoods,i).then((function(e){t.$message.success(t.L("编辑成功")),t.$emit("handleGoodsUpdate"),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1}),1500)})).catch((function(e){t.confirmLoading=!1})))}))},handleCancel:function(){this.visible=!1,this.form=this.$form.createForm(this)},cancel:function(){}}},r=n,l=(i("508f"),i("0c7c")),d=Object(l["a"])(r,a,s,!1,null,"066bf7fc",null);e["default"]=d.exports},"1a82":function(t,e,i){},"1dc6":function(t,e,i){"use strict";i("1a82")},2012:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"components-layout-demo-basic"}},[i("a-layout",[i("a-layout-header",{staticStyle:{padding:"0 20px",background:"#fff"}},[i("div",{staticClass:"ant-pro-page-header-wrap-children-content",staticStyle:{margin:"24px 0 0",display:"inline-block"}},[i("div",{staticClass:"message-suggestions-list-box"},[i("a-tabs",{attrs:{"default-active-key":0,tabBarGutter:0},on:{change:t.statusChange},model:{value:t.queryParam.order_status,callback:function(e){t.$set(t.queryParam,"order_status",e)},expression:"queryParam.order_status"}},t._l(t.tabColumn,(function(t,e){return i("a-tab-pane",{key:e,attrs:{tab:t}})})),1),i("div",{staticClass:"search-input",staticStyle:{display:"inline-block"}},[i("a-input-search",{staticStyle:{width:"200px"},attrs:{placeholder:t.L("输入商品名")},on:{change:t.onSearch},model:{value:t.queryParam.name,callback:function(e){t.$set(t.queryParam,"name",e)},expression:"queryParam.name"}})],1)],1)])]),i("a-layout",{staticStyle:{padding:"0 20px",background:"#fff"}},[i("a-layout-sider",[t.sortList.length?[i("div",{staticClass:"cat-list scroll_content br-f1"},[t.sortList.length?i("drag-box",{attrs:{list:t.sortList,select:t.queryParam.sort_id},on:{handleChange:t.handleDragDataChange}}):t._e()],1),i("div",{staticClass:"add-new-cat",style:"top:"+(this.clientHeight-235)+"px"},[i("span",{staticClass:"add-sort",on:{click:function(e){return t.$refs.editSortModal.add(t.queryParam.store_id)}}},[t._v(t._s(t.L("新建分类")))])])]:0!=t.sortList.length||t.sortLoading?t._e():[i("div",{staticClass:"cat-list scroll_content br-f1"},[i("div",{staticClass:"text-center cr-99 mt-10"},[t._v(t._s(t.L("暂无分类")))])]),i("div",{staticClass:"add-new-cat",style:"top:100px"},[i("span",{staticClass:"add-sort",on:{click:function(e){return t.$refs.editSortModal.add(t.queryParam.store_id)}}},[t._v(t._s(t.L("新建分类")))])])]],2),i("a-layout-content",[i("div",{staticClass:"edit-content"},[i("a-button-group",[i("a-button",{on:{click:function(e){return t.bathEditGoods(1)}}},[t._v(t._s(t.L("沽清")))]),i("a-button",{on:{click:function(e){return t.bathEditGoods(2)}}},[t._v(t._s(t.L("置满")))]),i("a-button",{on:{click:function(e){return t.bathEditGoods(3)}}},[t._v(t._s(t.L("修改库存")))]),i("a-button",{on:{click:function(e){return t.bathEditGoods(4)}}},[t._v(t._s(t.L("上架")))])],1),i("a-dropdown-button",{on:{click:function(e){return t.bathEditGoods(5)}}},[t._v(" "+t._s(t.L("下架"))+" "),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",{key:"1",on:{click:function(e){return t.bathEditGoods(6)}}},[i("a-button",{attrs:{type:"link"}},[t._v(t._s(t.L("删除"))+" ")])],1),i("a-menu-item",{key:"2"},[i("a-button",{attrs:{type:"link"},on:{click:function(e){return t.bathEditGoods(7)}}},[t._v(t._s(t.L("修改分类")))])],1)],1)],1),i("a-button",{staticClass:"add-goods",attrs:{type:"primary"},on:{click:function(e){return t.addGoods()}}},[t._v(t._s(t.L("新建商品")))]),i("a-button",{on:{click:function(e){return t.clickbathAddGoods()}}},[t._v(t._s(t.L("批量新建商品")))])],1),i("div",[i("span",{staticStyle:{"margin-left":"8px"}},[t.hasSelected?[t._v(t._s("Selected "+t.selectedRowKeys.length+" items"))]:t._e()],2)]),i("a-table",{attrs:{columns:t.columns,"data-source":t.goodsList,pagination:!1,disabled:!t.hasSelected,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},rowKey:"pigcms_id",scroll:{y:this.clientHeight-330},loading:t.loading},on:{change:t.tableChange},scopedSlots:t._u([{key:"name",fn:function(e,a){return i("span",{},[i("div",{staticClass:"right-c"},[i("div",{staticClass:"img-wrap"},[i("a-popover",{attrs:{placement:"right"}},[i("template",{slot:"content"},[i("img",{staticClass:"goods-image-big",attrs:{src:a.product_image}})]),i("img",{staticClass:"goods-image",attrs:{src:a.product_image}})],2),0==a.status?i("div",{staticClass:"yxj"},[t._v(t._s(t.L("已下架")))]):t._e()],1),i("div",[i("div",{staticStyle:{"padding-right":"16px"}},[t._v(t._s(e))]),i("div",{staticStyle:{color:"#8e8585","font-size":"8px","margin-top":"3px"}},[t._v(" "+t._s(t.L("已售"))+"："+t._s(a.sell_count)+" ")])])])])}},{key:"price",fn:function(e,a){return i("span",{},[i("div",[i("div",[a.spec_value?i("span",[t._v(t._s(t.L("￥"))+t._s(a.min_price)+" "+t._s(t.L("起")))]):i("span",[t._v(t._s(t.L("￥"))+t._s(e))]),a.spec_value?i("a-icon",{staticStyle:{"margin-left":"4px",color:"#1890ff"},attrs:{type:"form"},on:{click:function(e){return t.$refs.editSpecPriceModal.edit(a.goods_id)}}}):i("a-icon",{staticStyle:{"margin-left":"4px",color:"#1890ff"},attrs:{type:"form"},on:{click:function(i){return t.$refs.editPriceModal.edit(a.pigcms_id,e)}}})],1)])])}},{key:"spec_stock",fn:function(e,a){return i("span",{},[a.spec_value?i("span",[t._v(t._s(t.L("多规格")))]):i("span","-1"==e?[t._v(t._s(t.L("无限")))]:[t._v(t._s(e))]),a.spec_value?i("a-icon",{staticStyle:{"margin-left":"4px",color:"#1890ff"},attrs:{type:"form"},on:{click:function(e){return t.$refs.editSpecStockModal.edit(a.goods_id)}}}):i("a-icon",{staticStyle:{"margin-left":"4px",color:"#1890ff"},attrs:{type:"form"},on:{click:function(i){return t.$refs.editStockModal.edit(a.pigcms_id,e,a.spec_original_stock,a)}}})],1)}},t._l(["sort"],(function(e){return{key:"sort",fn:function(a,s){return[i("div",{key:e},[s.editable?i("a-input",{staticStyle:{margin:"-5px 2px",width:"56px"},attrs:{value:a},on:{change:function(i){return t.handleChangeSort(i.target.value,s.pigcms_id,e)}}}):[t._v(t._s(a))],i("span",{staticClass:"editable-row-operations"},[s.editable?i("span",[i("a",{on:{click:function(){return t.saveSort(s.pigcms_id)}}},[t._v(t._s(t.L("保存")))]),i("a-divider",{attrs:{type:"vertical"}}),i("a",{on:{click:function(){return t.cancelSort(s.pigcms_id,s.sort,e)}}},[t._v(t._s(t.L("取消")))])],1):i("span",[i("a",{staticStyle:{"margin-left":"4px"},attrs:{disabled:""!==t.editingKey},on:{click:function(){return t.editSort(s.pigcms_id,s.sort)}}},[t._v(t._s(t.L("编辑")))])])])],2)]}}})),{key:"action",fn:function(e,a){return i("span",{},[i("a",{on:{click:function(e){return t.$refs.editGoodsModal.edit(t.queryParam.store_id,a.spec_sort_id,a.goods_id)}}},[t._v(t._s(t.L("编辑")))]),i("a-divider",{attrs:{type:"vertical"}}),i("a",{style:a.status?"color: #747b8b":"",on:{click:function(e){return t.editStatus(a.pigcms_id)}}},[t._v(t._s(a.status?t.L("下架"):t.L("上架")))]),i("a-divider",{attrs:{type:"vertical"}}),i("a-popconfirm",{staticClass:"ant-dropdown-link",attrs:{title:t.L("确认删除?"),"ok-text":t.L("确定"),"cancel-text":t.L("取消")},on:{confirm:function(e){return t.deleteGoods(a.pigcms_id)},cancel:t.cancel}},[i("a",{staticStyle:{color:"#747b8b"},attrs:{href:"#"}},[t._v(t._s(t.L("删除")))])])],1)}}],null,!0)})],1)],1)],1),i("edit-sort",{ref:"editSortModal",on:{handleUpdate:t.handleUpdate}}),i("edit-bath-stock",{ref:"editBathStockModal",on:{handleGoodsUpdate:t.handleGoodsUpdate}}),i("edit-goods-sort",{ref:"editGoodsSortModal",on:{handleGoodsUpdate:t.handleGoodsUpdate}}),i("edit-goods",{ref:"editGoodsModal",on:{handleGoodsUpdate:t.handleGoodsUpdate}}),i("edit-price",{ref:"editPriceModal",on:{handleGoodsUpdate:t.handleGoodsUpdate}}),i("edit-spec-price",{ref:"editSpecPriceModal",on:{handleGoodsUpdate:t.handleGoodsUpdate}}),i("edit-stock",{ref:"editStockModal",on:{handleGoodsUpdate:t.handleGoodsUpdate}}),i("edit-spec-stock",{ref:"editSpecStockModal",on:{handleGoodsUpdate:t.handleGoodsUpdate}}),i("select-shop-goods",{attrs:{visible:t.selectGoodsVisible,storeId:t.queryParam.store_id,source:"foodshop_goods_library",type:t.goodsSelectType},on:{"update:visible":function(e){t.selectGoodsVisible=e},onSubmit:t.onGoodsSelect}})],1)},s=[],o=i("2909"),n=i("5530"),r=(i("d81d"),i("b0c0"),i("4de4"),i("d3b7"),i("4e82"),i("7c9a")),l=i("54c4"),d=i("7a2c"),c=i("07da"),h=i("1897"),u=i("59f0"),m=i("8d77"),f=i("dfd6"),g=i("7a1b"),p=i("6ea1"),_=(i("5988"),i("8c58")),v=[],L=[],b=[],w={name:"goodsList",components:{DragBox:r["a"],EditSort:l["default"],EditBathStock:d["default"],EditGoodsSort:c["default"],EditSpecPrice:u["default"],EditPrice:h["default"],EditStock:m["default"],EditSpecStock:f["default"],EditGoods:g["default"],SelectShopGoods:_["a"]},data:function(){return this.cacheData=v.map((function(t){return Object(n["a"])({},t)})),{form:this.$form.createForm(this),id:1,timeTab:"",detail:{},queryParam:{order_status:0,store_id:0,sort_id:0},columns:[{title:this.L("商品名称"),dataIndex:"name",width:"35%",scopedSlots:{customRender:"name"}},{title:this.L("价格"),dataIndex:"price",width:"12%",scopedSlots:{customRender:"price"}},{title:this.L("当前库存"),width:"12%",dataIndex:"spec_stock",scopedSlots:{customRender:"spec_stock"}},{title:this.L("排序"),dataIndex:"sort",width:"12%",scopedSlots:{customRender:"sort"}},{title:this.L("操作"),dataIndex:"action",width:"12%",scopedSlots:{customRender:"action"}}],data:v,selectedRowKeys:b,sortList:L,goodsList:[],tabColumn:[this.L("全部商品(0)"),this.L("售卖中(0)"),this.L("已下架(0)"),this.L("已售完(0)")],type:"",sortSelect:!0,baseUrl:"/v20/public/platform/#",editingKey:"",selectGoodsVisible:!1,goodsSelectType:"checkbox",clientHeight:0,oldSort:0,loading:!1,sortLoading:!1}},watch:{$route:{handler:function(){this.queryParam.store_id=this.$route.query.store_id,this.queryParam.sort_id=0,this.getSortList()},deep:!0}},created:function(){console.log(this.$route.query.store_id)},filters:{},mounted:function(){var t=this;this.clientHeight=window.document.body.clientHeight,window.onresize=function(){t.clientHeight=window.document.body.clientHeight},this.queryParam.store_id=this.$route.query.store_id,console.log("queryParam",this.queryParam),this.getSortList()},computed:{hasSelected:function(){return this.selectedRowKeys.length>0}},methods:{getSortList:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];console.log("222",this.queryParam),this.sortLoading=!0,this.sortList=[],this.request(p["a"].sortList,this.queryParam).then((function(i){t.sortLoading=!1,t.sortList=i,console.log("sort_id",t.queryParam.sort_id),0==t.queryParam.sort_id&&(i.length>0?(t.queryParam.sort_id=i[0].id,t.getGoodsList()):e&&(t.tabColumn=[t.L("全部商品(0)"),t.L("售卖中(0)"),t.L("已下架(0)"),t.L("已售完(0)")]))}))},getGoodsList:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];console.log("11111",this.queryParam),this.loading=!0,this.request(p["a"].goodsList,this.queryParam).then((function(i){t.goodsList=i.list,e&&(t.tabColumn=i.tabs),t.loading=!1}))},statusChange:function(t){this.sortSelect=!0,this.queryParam.name="",this.getSortList(!1),this.getGoodsList(!1)},tableChange:function(t){},handleDragDataChange:function(t){var e=this;console.log("edit",t),"drag"==t.type?this.request(p["a"].changeSort,{sort_list:t.data}).then((function(t){console.log(t),e.$message.success(e.L("排序成功！"))})):"edit"==t.type?this.$refs.editSortModal.edit(this.queryParam.store_id,t.data.id):"click"==t.type&&(this.queryParam.sort_id=t.data.id,this.queryParam.name="",this.getGoodsList(!1))},handleUpdate:function(){this.getSortList()},handleGoodsUpdate:function(t){console.log(t),this.getGoodsList(),this.selectedRowKeys=[],(7==this.type||t)&&this.getSortList()},addGoods:function(){if(0==this.sortList.length)return this.$message.error(this.L("请先添加分类")),!1;this.$refs.editGoodsModal.add(this.queryParam.store_id,this.queryParam.sort_id)},clickbathAddGoods:function(){if(0==this.sortList.length)return this.$message.error(this.L("请先添加分类")),!1;this.selectGoodsVisible=!0},bathAddGoods:function(t){var e=this,i={goods_id:t,store_id:this.queryParam.store_id,sort_id:this.queryParam.sort_id};this.request(p["a"].addGoods,i).then((function(t){e.$message.success(t.msg),e.selectedRowKeys=[],e.getSortList(),e.getGoodsList()}))},onGoodsSelect:function(t){this.selectGoodsVisible=!1,t.ids&&this.bathAddGoods(t.ids)},bathEditGoods:function(t){var e=this;this.type=t;var i={pigcms_id:this.selectedRowKeys,store_id:this.queryParam.store_id,type:t};if(i.pigcms_id.length<=0)this.$message.success(this.L("请选择商品"));else if(3==t)this.$refs.editBathStockModal.edit(this.queryParam.store_id,this.selectedRowKeys);else if(7==t)this.$refs.editGoodsSortModal.edit(this.queryParam.store_id,this.selectedRowKeys);else if(6==t){var a=this;this.$confirm({title:this.L("确定删除选中商品？"),content:"",okText:this.L("确定"),okType:"danger",cancelText:this.L("取消"),centered:!0,onOk:function(){var t=this;a.request(p["a"].editGoodsBatch,i).then((function(e){a.$message.success(t.L("删除成功")),a.selectedRowKeys=[],a.getGoodsList()}))}})}else this.request(p["a"].editGoodsBatch,i).then((function(t){e.$message.success(t.msg),e.selectedRowKeys=[],e.getGoodsList()}))},onSelectChange:function(t){console.log("selectedRowKeys changed: ",t),this.selectedRowKeys=t},deleteGoods:function(t){var e=this;this.request(p["a"].goodsDel,{pigcms_id:t,store_id:this.queryParam.store_id}).then((function(t){e.$message.success(t.msg),e.getGoodsList(),e.getSortList()})).catch((function(t){e.confirmLoading=!1}))},editStatus:function(t){var e=this;this.request(p["a"].changeStatus,{pigcms_id:t,store_id:this.queryParam.store_id}).then((function(t){e.$message.success(t.msg),e.getGoodsList()})).catch((function(t){e.confirmLoading=!1}))},cancel:function(){},onSearch:function(){this.queryParam.name?(this.queryParam.sort_id="0",this.queryParam.order_status=0,console.log("queryParam",this.queryParam),this.sortSelect=!1,this.getGoodsList()):(this.sortSelect=!0,this.getSortList())},sellStatistics:function(){console.log(this.baseUrl+"/merchant/merchant.iframe/menu_147"),location.href=this.baseUrl+"/merchant/merchant.iframe/menu_147"},handleChangeSort:function(t,e,i){var a=Object(o["a"])(this.goodsList),s=a.filter((function(t){return e===t.pigcms_id}))[0];s&&(s[i]=t,this.goodsList=a)},editSort:function(t,e){var i=Object(o["a"])(this.goodsList),a=i.filter((function(e){return t===e.pigcms_id}))[0];this.editingKey=t,this.oldSort=e,a&&(a.editable=!0,this.goodsList=i)},saveSort:function(t){var e=this,i=Object(o["a"])(this.goodsList),a=Object(o["a"])(this.cacheData),s=i.filter((function(e){return t===e.pigcms_id}))[0];a.filter((function(e){return t===e.pigcms_id}))[0];s&&(delete s.editable,this.goodsList=i,Object.assign(s,this.cacheData.filter((function(e){return t===e.pigcms_id}))[0]),this.cacheData=a),this.request(p["a"].editSingleGoods,{type:1,pigcms_id:s.pigcms_id,sort:s.sort}).then((function(t){e.getGoodsList()})),this.editingKey=""},cancelSort:function(t,e,i){console.log(e);var a=Object(o["a"])(this.goodsList),s=a.filter((function(e){return t===e.pigcms_id}))[0];this.editingKey="",s&&(console.log(this.oldSort),s[i]=this.oldSort,this.oldSort=0,Object.assign(s,this.cacheData.filter((function(e){return t===e.pigcms_id}))[0]),delete s.editable,this.goodsList=a)}}},A=w,C=(i("f06f"),i("0c7c")),y=Object(C["a"])(A,a,s,!1,null,"66709082",null);e["default"]=y.exports},"226d":function(t,e,i){},2909:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var a=i("6b75");function s(t){if(Array.isArray(t))return Object(a["a"])(t)}i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630");function o(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var n=i("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return s(t)||o(t)||Object(n["a"])(t)||r()}},3037:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACp0lEQVRoQ+2ZPWgUQRTH/+/iV6GFkOP2Uln4hUnjBwhWRggoIliJ2ggWgoLJrh6k9CwVZTdbaGGhlaKFYGNAEK0EQW00CkGwEW9yHiIoiBr3yZx7cW+zl93LHLc7sNPuzO7/N/95M2/eEjRvpLl+5ABpO9gTBwyXt+EPjmAA98Q4vY2DMmzeKyx6GtcvyfPeADj8BsAwgBlh0kinDxsuF+Gh3nouTFL+vvIL5GyC8GRBNGO00+yG+xLjQc2iw0lmulOfVAGaoggnxQTdXC5E+gBSeQHDSWInCjIbAEBdfEUZVfK6dSIrAPJAulEz6ZReAIxZEDYHNoAzwqLr3UCk6wBjtG0H+xfU+8QE/d/VYmiyALATwJWAzpl5xljDoloSJ1IHkGdG2eHbDBwLCL4rTDqqDcDgJV63YhVehOLhorCoGgeRCQekyEUnOvBQmHRQG4AmhMPnF+KBMSksuqwVQBNCJnxAMenJnJklFDfT2UzmlshckwLlDqjcB5A7IDMPxZY7oHi5zx3Il1C/ltCQw1sKHj5/PEdfgnGvhQOGzS4IZ33hFWHS1RaEHgAOfwCwIap4pQeAzVUQLgQAZud/YVdjkr5pAeDn6tMA9rcgCLhTM+m4NgBDLm/3PDwGsD4QxBUwXi63Ntr3XMiw+TQI19qyj3BppIvibt8B/LvrLRBOBOMhdBlPXJ1OBcCPh3cAtkbmgVl3QIouTfEIMV5rC7CoghAk0cGBlt6Sw48IGAsHddI/NKnFQFsu5PAPAGuiTunwEuvmzEh6z1K+DxSneNOALJP7zQOMuklzUQI2urz6u4dnAHYAeLW2gD3vx+lnUrFR/ZQB5EsHbS6vLOAQ/cb9TxVqLCWo5PBuYhxgwvScSc9VxMuxPQFQFaEyPgdQmb1ejNXegb8pjylP7QRfzgAAAABJRU5ErkJggg=="},"4bfa":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACO0lEQVRoQ+2WT2sTURTFz0mk+A1mih/AzyFuhLppUgVFcKHgwrSdgbootFAKulB0JojoQsGNiwp1Y2k3Ilm46KKbLrpQEKRgM2kLuijoouFKJJmGcULy/gxSeFnm3XPvPef3Xghxyj885fvDGfjfBB0BR8AwAXeFDAM0ljsCxhEaNnAEDAM0ljsCxhEaNnAEDAM0lmsR8CK51gYahyGbxht0G3ixXKbgKAnZUOmpbMCLJSIQANgpAdW9gJ9VBubV+nVZhGC5c1Y+g/Pfa/wyak9lA34s9wA87AygYLtdRnV/hl9HHZit8yKZJ/Gg933hBjqD/FjeArjSHbrVJbGrasKvyxwEj3o6EgvNWd5X6aNMoNc8Y2LzuIzq4TT3Rh0+HkkgRNRXP5cEfDyqPjWtKuivz5j4hBIqyQwPhvX0Y6kBeJrWCWpJyGfDdHnn2gQGkGiM/UJld54/Bi0zHssdAV70zgW43Qr4Smf5v+9QVziIBAUfjscweXCXR/882FhuEXiZ4hfcaIZ8Y7KDFQM5D3vj7E9Uvi3xd0rqidxECa/77u5UM+CqyfLWCOReJ8H75BwmcZVtry7XKThJmphIZrluurx1Azkk3oFYgWAlvfOCi62QH20sX4iBHBMnuwouqP5VGGbU2hvIDsr8xAIFLF8Ygb438RzAJQGmWwHXhqWpc14YAZ1ldDTOgE5qNjWOgM00dXo5Ajqp2dQ4AjbT1OnlCOikZlPjCNhMU6eXI6CTmk2NI2AzTZ1efwBNIpsx5fSC1QAAAABJRU5ErkJggg=="},"508f":function(t,e,i){"use strict";i("f02f")},"547d":function(t,e,i){"use strict";i("c8c54")},"54c4":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{title:t.title,width:640,visible:t.visible,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel}},[i("a-spin",{attrs:{spinning:t.confirmLoading}},[i("a-form",{attrs:{form:t.form}},[i("a-form-item",{attrs:{label:t.L("分类名称"),labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort_name",{initialValue:t.detail.sort_name,rules:[{required:!0,message:t.L("请输入分类名称！")}]}],expression:"[\n            'sort_name',\n            { initialValue: detail.sort_name, rules: [{ required: true, message: L('请输入分类名称！') }] },\n          ]"}]})],1),i("a-form-item",{attrs:{label:t.L("分类下产品折扣率"),labelCol:t.labelCol,wrapperCol:t.wrapperCol,help:"0~10之间的数字，支持一位小数！8代表8折，8.5代表85折，0与10代表无折扣"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort_discount",{initialValue:t.detail.sort_discount,rules:[{required:!0,message:t.L("请输入分类下产品折扣率！")}]}],expression:"[\n            'sort_discount',\n            { initialValue: detail.sort_discount, rules: [{ required: true, message: L('请输入分类下产品折扣率！') }] },\n          ]"}]})],1),i("a-form-item",{attrs:{label:t.L("售卖时间"),labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["all_date",{initialValue:t.detail.all_date,rules:[{required:!0}]}],expression:"['all_date', { initialValue: detail.all_date, rules: [{ required: true }] }]"}],attrs:{name:"date_type"},on:{change:t.onDataTypeChange}},[i("a-radio",{attrs:{value:1}},[t._v(t._s(t.L("全时段售卖")))]),i("a-radio",{attrs:{value:0}},[t._v(t._s(t.L("自定义时间")))])],1)],1),0==t.detail.all_date?i("a-form-item",{staticClass:"date-content",attrs:{label:t.L("选择时间段"),labelCol:t.labelCol,wrapperCol:t.wrapperCol,"validate-status":t.showDateError?"error":"",help:t.showDateError?t.L("时间段必填"):""}},[i("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["date_range",{initialValue:""==t.detail.show_start_date?null:[t.moment(t.detail.show_start_date,t.dateFormat),t.moment(t.detail.show_end_date,t.dateFormat)]}],expression:"[\n            'date_range',\n            {\n              initialValue:\n                detail.show_start_date == ''\n                  ? null\n                  : [moment(detail.show_start_date, dateFormat), moment(detail.show_end_date, dateFormat)],\n            },\n          ]"}],staticStyle:{width:"320px"},attrs:{allowClear:!0},on:{change:t.dateOnChange}},[i("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1),i("a-checkbox-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["week",{initialValue:t.detail.week}],expression:"['week', { initialValue: detail.week }]"}],attrs:{options:t.weekList},on:{change:t.onWeekChange}})],1):t._e(),0==t.detail.all_date?i("a-form-item",{attrs:{label:t.L("售卖时间段"),labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["all_time",{initialValue:t.detail.all_time,rules:[{required:!0}]}],expression:"['all_time', { initialValue: detail.all_time, rules: [{ required: true }] }]"}],attrs:{name:"time_type"},on:{change:t.onTimeTypeChange}},[i("a-radio",{attrs:{value:1}},[t._v(t._s(t.L("全时段售卖")))]),i("a-radio",{attrs:{value:0}},[t._v(t._s(t.L("自定义时间")))])],1)],1):t._e(),0==t.detail.all_time&&0==t.detail.all_date?i("a-form-item",{staticClass:"date-content",attrs:{label:t.L("选择时间段"),labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["show_start_time",{initialValue:""==t.detail.show_start_time?null:t.moment(t.detail.show_start_time,t.timeFormat)}],expression:"[\n            'show_start_time',\n            { initialValue: detail.show_start_time == '' ? null : moment(detail.show_start_time, timeFormat) },\n          ]"}],attrs:{format:t.timeFormat}}),i("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["show_end_time",{initialValue:""==t.detail.show_end_time?null:t.moment(t.detail.show_end_time,t.timeFormat)}],expression:"[\n            'show_end_time',\n            { initialValue: detail.show_end_time == '' ? null : moment(detail.show_end_time, timeFormat) },\n          ]"}],attrs:{format:t.timeFormat}}),i("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["show_start_time2",{initialValue:""==t.detail.show_start_time2?null:t.moment(t.detail.show_start_time2,t.timeFormat)}],expression:"[\n            'show_start_time2',\n            { initialValue: detail.show_start_time2 == '' ? null : moment(detail.show_start_time2, timeFormat) },\n          ]"}],attrs:{format:t.timeFormat}}),i("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["show_end_time2",{initialValue:""==t.detail.show_end_time2?null:t.moment(t.detail.show_end_time2,t.timeFormat)}],expression:"[\n            'show_end_time2',\n            { initialValue: detail.show_end_time2 == '' ? null : moment(detail.show_end_time2, timeFormat) },\n          ]"}],attrs:{format:t.timeFormat}}),i("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["show_start_time3",{initialValue:""==t.detail.show_start_time3?null:t.moment(t.detail.show_start_time3,t.timeFormat)}],expression:"[\n            'show_start_time3',\n            { initialValue: detail.show_start_time3 == '' ? null : moment(detail.show_start_time3, timeFormat) },\n          ]"}],attrs:{format:t.timeFormat}}),i("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["show_end_time3",{initialValue:""==t.detail.show_end_time3?null:t.moment(t.detail.show_end_time3,t.timeFormat)}],expression:"[\n            'show_end_time3',\n            { initialValue: detail.show_end_time3 == '' ? null : moment(detail.show_end_time3, timeFormat) },\n          ]"}],attrs:{format:t.timeFormat}})],1):t._e(),i("a-form-item",{attrs:{label:t.L("排序值"),labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:t.detail.sort}],expression:"['sort', { initialValue: detail.sort }]"}]})],1)],1)],1),i("template",{slot:"footer"},[t.detail.sort_id?i("a-popconfirm",{staticClass:"ant-dropdown-link",staticStyle:{float:"left"},attrs:{title:t.L("确认删除?"),"ok-text":t.L("确定"),"cancel-text":t.L("取消")},on:{confirm:function(e){return t.delSort()},cancel:t.cancel}},[i("a-button",[t._v(t._s(t.L("删除分类")))])],1):t._e(),i("a-button",{key:"back",on:{click:t.handleCancel}},[t._v(t._s(t.L("取消")))]),i("a-button",{key:"submit",attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(t._s(t.L("确定")))])],1)],2)},s=[],o=i("c1df"),n=i.n(o),r=i("6ea1"),l=i("ca00"),d=i("7a6b"),c={components:{CustomTooltip:d["a"]},data:function(){return{title:"新建分类",showDateError:!1,timeFormat:"HH:mm",dateFormat:"YYYY-MM-DD",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},dateSelect:"",timeSelect:"",visible:!1,confirmLoading:!1,form:this.$form.createForm(this),categoryList:[],showMethod:[],detail:{sort_name:"",sort_discount:0,sort_id:0,store_id:this.$route.query.store_id,print_id:"",is_open_print:0,show_start_date:"",show_end_date:"",week:[this.L("星期日"),this.L("星期一"),this.L("星期二"),this.L("星期三"),this.L("星期四"),this.L("星期五"),this.L("星期六")],show_start_time:"",show_end_time:"",show_start_time2:"",show_end_time2:"",show_start_time3:"",show_end_time3:"",all_date:1,all_time:1,date_range:""},weekList:[this.L("星期日"),this.L("星期一"),this.L("星期二"),this.L("星期三"),this.L("星期四"),this.L("星期五"),this.L("星期六")],printList:[]}},mounted:function(){console.log(this.catFid)},methods:{moment:n.a,add:function(t){this.visible=!0,this.detail={sort_name:"",sort_discount:0,sort_id:0,store_id:t,print_id:"",is_open_print:0,show_start_date:"",show_end_date:"",week:[this.L("星期日"),this.L("星期一"),this.L("星期二"),this.L("星期三"),this.L("星期四"),this.L("星期五"),this.L("星期六")],show_start_time:"",show_end_time:"",show_start_time2:"",show_end_time2:"",show_start_time3:"",show_end_time3:"",all_date:1,all_time:1,date_range:""}},edit:function(t,e){this.visible=!0,this.detail.sort_id=e,this.detail.store_id=t,this.detail.sort_id>0?this.title=this.L("编辑分类"):this.title=this.L("新建分类"),console.log(this.detail.sort_id),this.getEditInfo()},handleSubmit:function(){var t=this,e=this.form,i=(e.setFields,e.validateFields);e.getFieldError;i((function(e,i){if(null!=i.date_range||0!=t.detail.all_date)if(t.showDateError=!1,e)t.confirmLoading=!1;else{i.sort_id=t.detail.sort_id,i.store_id=t.detail.store_id,i.show_start_date=t.detail.show_start_date,i.show_end_date=t.detail.show_end_date;var a={show_start_time:"time",show_end_time:"time",show_start_time2:"time",show_end_time2:"time",show_start_time3:"time",show_end_time3:"time"};Object(l["b"])(i,a),t.confirmLoading=!0,t.request(r["a"].editSort,i).then((function(e){t.detail.sort_id?t.$message.success(t.L("编辑成功")):t.$message.success(t.L("添加成功")),t.$emit("handleUpdate",{}),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1,t.$emit("ok",i)}),1500)})).catch((function(e){t.confirmLoading=!1}))}else t.showDateError=!0}))},handleCancel:function(){this.visible=!1,this.form=this.$form.createForm(this)},getEditInfo:function(){var t=this;this.request(r["a"].geSortDetail,{sort_id:this.detail.sort_id}).then((function(e){t.detail=e}))},getStorePrintList:function(){var t=this;this.request(r["a"].storePrintList,{store_id:this.detail.store_id}).then((function(e){t.printList=e.list}))},onDataTypeChange:function(t){this.detail.all_date=t.target.value},dateOnChange:function(t,e){this.detail.show_start_date=e[0],this.detail.show_end_date=e[1]},onWeekChange:function(t){},onTimeTypeChange:function(t){this.detail.all_time=t.target.value},printChange:function(){},delSort:function(){var t=this;this.request(r["a"].delSort,{sort_id:this.detail.sort_id}).then((function(e){t.$message.success(t.L("删除成功")),t.$emit("handleUpdate",{}),t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1})).catch((function(e){t.confirmLoading=!1}))},cancel:function(){}}},h=c,u=i("0c7c"),m=Object(u["a"])(h,a,s,!1,null,null,null);e["default"]=m.exports},5988:function(t,e,i){"use strict";var a={categoryList:"/foodshop/platform.StoreCategory/categoryList",getEditInfo:"/foodshop/platform.StoreCategory/getEditInfo",editSort:"/foodshop/platform.StoreCategory/editSort",delSort:"/foodshop/platform.StoreCategory/delSort",storeList:"/foodshop/platform.Store/storeList",saveSort:"/foodshop/platform.Store/saveSort",searchHotList:"/foodshop/platform.SearchHot/searchHotList",saveSearchHot:"/foodshop/platform.SearchHot/saveSearchHot",getSearchHotDetail:"/foodshop/platform.SearchHot/getSearchHotDetail",delSearchHot:"/foodshop/platform.SearchHot/delSearchHot",saveSearchHotSort:"/foodshop/platform.SearchHot/saveSort",orderList:"/foodshop/platform.order/orderList",orderDetail:"/foodshop/platform.order/orderDetail",orderExportUrl:"/foodshop/platform.order/export",merchantAutoLogin:"/foodshop/platform.login/merchantAutoLogin",staffAutoLogin:"/foodshop/platform.login/staffAutoLogin"};e["a"]=a},"59f0":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{title:t.title,width:400,visible:t.visible,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel,ok:t.handleSubmit}},[i("a-spin",{attrs:{spinning:t.confirmLoading}},[i("a-form",{staticClass:"scrollbar scroll_content",attrs:{form:t.form}},t._l(t.data.list,(function(e,a){return i("a-form-item",{attrs:{label:e.index_name,labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["indexs["+a+"]",{initialValue:e.index}],expression:"[`indexs[${index}]`, { initialValue: item.index }]"}],attrs:{type:"hidden"}}),i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["prices["+a+"]",{initialValue:e.price}],expression:"[`prices[${index}]`, { initialValue: item.price }]"}],staticClass:"small-size",attrs:{"addon-after":t.L("元")}})],1)})),1)],1)],1)},s=[],o=i("6ea1"),n={data:function(){return{title:this.L("修改价格"),labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),data:{pigcms_id:0,price:0}}},methods:{edit:function(t){this.visible=!0,this.data.goods_id=t,this.getEditInfo()},getEditInfo:function(){var t=this;this.request(o["a"].goodsDetail,{goods_id:this.data.goods_id}).then((function(e){t.data=e}))},handleSubmit:function(){var t=this,e=this.form.validateFields;this.confirmLoading=!0,e((function(e,i){e?t.confirmLoading=!1:(i.goods_id=t.data.goods_id,i.type=4,t.request(o["a"].editSingleGoods,i).then((function(e){t.$message.success(t.L("编辑成功")),t.$emit("handleGoodsUpdate"),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1}),1500)})).catch((function(e){t.confirmLoading=!1})))}))},handleCancel:function(){this.visible=!1,this.form=this.$form.createForm(this)},cancel:function(){}}},r=n,l=(i("0125"),i("0c7c")),d=Object(l["a"])(r,a,s,!1,null,"8d8daaf0",null);e["default"]=d.exports},"7a2c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{title:t.title,width:400,visible:t.visible,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel,ok:t.handleSubmit}},[i("a-spin",{attrs:{spinning:t.confirmLoading}},[i("a-form",{attrs:{form:t.form}},[i("a-form-item",{attrs:{label:t.L("当前库存"),labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["stock_num",{initialValue:t.data.sort_name,rules:[{required:!0,message:t.L("请输入当前库存！")}]}],expression:"[\n            'stock_num',\n            { initialValue: data.sort_name, rules: [{ required: true, message: L('请输入当前库存！') }] },\n          ]"}],staticClass:"small-size",attrs:{min:-1}})],1),i("a-form-item",{attrs:{label:t.L("原始库存"),labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["original_stock",{initialValue:t.data.sort_name,rules:[{required:!0,message:t.L("请输入原始库存！")}]}],expression:"[\n            'original_stock',\n            { initialValue: data.sort_name, rules: [{ required: true, message: L('请输入原始库存！') }] },\n          ]"}],staticClass:"small-size",attrs:{min:-1}})],1)],1)],1)],1)},s=[],o=i("c1df"),n=i.n(o),r=i("6ea1"),l=(i("ca00"),{data:function(){return{title:this.L("修改库存"),labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),data:{stock_num:"",goods_id:0,store_id:this.$route.query.store_id,original_stock:""}}},mounted:function(){console.log(this.catFid)},methods:{moment:n.a,edit:function(t,e){this.visible=!0,this.data.pigcms_id=e,this.data.store_id=t},handleSubmit:function(){var t=this,e=this.form.validateFields;this.confirmLoading=!0,e((function(e,i){e?t.confirmLoading=!1:(i.store_id=t.data.store_id,i.pigcms_id=t.data.pigcms_id,i.type=3,console.log(i),t.request(r["a"].editGoodsBatch,i).then((function(e){t.$message.success(t.L("编辑成功")),t.$emit("handleGoodsUpdate",{}),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1}),1500)})).catch((function(e){t.confirmLoading=!1})))}))},handleCancel:function(){this.visible=!1,this.form=this.$form.createForm(this)},cancel:function(){}}}),d=l,c=(i("0a24"),i("0c7c")),h=Object(c["a"])(d,a,s,!1,null,"3881d028",null);e["default"]=h.exports},"7c9a":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"drag-box"},[i("draggable",{staticClass:"list-group",attrs:{list:t.dataList,handle:".handle"},on:{end:function(e){return t.getNewData("drag")}}},t._l(t.dataList,(function(e){return i("div",{key:e.id,staticClass:"box"},[i("drag-item",{attrs:{content:e,draggable:t.draggable,editable:t.editable,show:!0,type:"1"},on:{handleItemClick:t.handleItemClick}}),e.children&&e.children.length?[i("draggable",{staticClass:"list-group",attrs:{list:e.children,handle:".handle"},on:{end:function(e){return t.getNewData("drag")}}},t._l(e.children,(function(a){return i("div",{key:a.id,staticClass:"box"},[i("drag-item",{attrs:{content:a,draggable:t.draggable,editable:t.editable,show:e.open,type:"2"},on:{handleItemClick:t.handleItemClick}}),a.children&&a.children.length?[i("draggable",{staticClass:"list-group",attrs:{list:a.children,handle:".handle"},on:{end:function(e){return t.getNewData("drag")}}},t._l(a.children,(function(s){return i("div",{key:s.id,staticClass:"box"},[i("drag-item",{attrs:{content:s,draggable:t.draggable,editable:t.editable,show:a.open&&e.open,type:"3"},on:{handleItemClick:t.handleItemClick}})],1)})),0)]:t._e()],2)})),0)]:t._e()],2)})),0)],1)},s=[],o=i("b85c"),n=(i("a9e3"),i("d3b7"),i("159b"),i("b76a")),r=i.n(n),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{staticClass:"handle",class:[t.currentSelected,t.currentClass],on:{click:function(e){return e.stopPropagation(),t.handleClick("click")},mouseenter:t.onMouseOver,mouseleave:t.onMouseOut}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.draggable,expression:"draggable"}],staticClass:"img-container"},[t.showIcon?a("a-tooltip",[a("template",{slot:"title"},[t._v("拖动整行排序")]),a("img",{staticClass:"drag-img",attrs:{src:i("3037")}})],2):t._e()],1),a("div",{staticClass:"title-con"},[a("span",{staticClass:"title"},[t._v(t._s(t.content.title))]),void 0!=t.content.goods_count?a("span",[t._v("（"+t._s(t.content.goods_count)+"）")]):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.editable,expression:"editable"}],staticClass:"img-container",on:{click:function(e){return e.stopPropagation(),t.handleClick("edit")}}},[t.showIcon?a("img",{staticClass:"edit-img",attrs:{src:i("048c")}}):t._e()]),t.content.children&&t.content.children.length&&t.showIcon?a("div",{staticClass:"img-container"},[t.content.open?a("img",{attrs:{src:i("bcea")}}):a("img",{attrs:{src:i("4bfa")}})]):t._e(),t.content.children&&t.content.children.length&&!t.showIcon?a("div",{staticClass:"img-container"},[t.content.open?a("img",{attrs:{src:i("eb9e")}}):a("img",{attrs:{src:i("8b11")}})]):t._e()]):t._e()},d=[],c={name:"DragItem",props:{content:{type:Object,default:function(){return{}}},type:{type:[Number,String],default:1},draggable:{type:Boolean,default:!0},editable:{type:Boolean,default:!0},show:{type:Boolean,default:!1}},computed:{currentClass:function(){return 1==this.type?"first-box":2==this.type?"second-box":"third-box"},currentSelected:function(){return 1==this.content.selected?"parentactive":2==this.content.selected?"active":""}},data:function(){return{showIcon:!1}},mounted:function(){},methods:{handleClick:function(t){this.$emit("handleItemClick",{type:t,data:this.content})},onMouseOver:function(){this.showIcon=!0},onMouseOut:function(){this.showIcon=!1}}},h=c,u=(i("547d"),i("0c7c")),m=Object(u["a"])(h,l,d,!1,null,"786f264e",null),f=m.exports,g={name:"DragBox",components:{draggable:r.a,DragItem:f},props:{list:{type:Array,default:function(){return[]}},draggable:{type:Boolean,default:!0},editable:{type:Boolean,default:!0},defaultSelect:{type:Boolean,default:!0},select:{type:[Number,String],default:0}},data:function(){return{dataList:[],selectedId:0,selectedItem:{}}},watch:{defaultSelect:function(t){this.select&&(t?this.defaultSelectFirst():this.initList(this.dataList))},select:function(t){t&&(this.selectedId=t,this.setListSelected(this.dataList,this.selectedId),this.setFather(this.dataList))}},mounted:function(){this.initData()},methods:{initData:function(){this.dataList=JSON.parse(JSON.stringify(this.list)),console.log(this.dataList),this.dataList.length&&(this.initList(this.dataList),console.log(this.dataList),this.select?(this.selectedId=this.select,this.setListSelected(this.dataList,this.selectedId),this.setFather(this.dataList)):this.defaultSelect&&this.defaultSelectFirst())},defaultSelectFirst:function(){var t=this.dataList[0];this.getSelectedId(t),this.selectedItem=t,t.children&&t.children.length&&(t.open=!0,t.children[0].open=!0),this.$set(this.dataList,0,t),this.setListSelected(this.dataList,this.selectedId),this.setFather(this.dataList)},initList:function(t){var e=this;t.forEach((function(t){t.selected=0,t.children&&t.children.length&&(t.open=!1,e.initList(t.children))})),this.dataList=JSON.parse(JSON.stringify(t))},getSelectedId:function(t){t.children&&t.children.length?this.getSelectedId(t.children[0]):this.selectedId=t.id},setListSelected:function(t,e){var i=this;t.forEach((function(t,a){t.id==e?(t.selected=2,i.selectedItem=t):t.selected=0,t.children&&t.children.length&&i.setListSelected(t.children,e)})),this.dataList=JSON.parse(JSON.stringify(t))},setFather:function(t){var e=this.selectedItem.fid;if(0!=e){var i,a=Object(o["a"])(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;if(s.id==e)return this.selectedItem=s,void(s.selected=1);if(s.children&&s.children.length){var n=this.getParentId(s.children,e);n&&(this.selectedItem=n,this.setFather(this.dataList))}}}catch(r){a.e(r)}finally{a.f()}}},getParentId:function(t,e){var i,a=Object(o["a"])(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;if(s.id==e)return s.selected=1,s}}catch(n){a.e(n)}finally{a.f()}},setMenuOpen:function(t){var e=0,i={};0==t.fid?this.dataList.forEach((function(a,s){t.id==a.id&&(t.open=!t.open,e=s,i=a)})):this.dataList.forEach((function(a,s){if(t.fid==a.id){var n,r=Object(o["a"])(a.children);try{for(r.s();!(n=r.n()).done;){var l=n.value;l.id==t.id&&(l.open=!l.open)}}catch(d){r.e(d)}finally{r.f()}e=s,i=a}})),this.$set(this.dataList,e,i)},handleItemClick:function(t){var e=t.type,i=t.data;"click"==e&&(i.children&&i.children.length?this.setMenuOpen(i):(this.setListSelected(this.dataList,i.id),this.setFather(this.dataList))),this.getNewData(e,JSON.parse(JSON.stringify(i)))},getNewData:function(t,e){var i=JSON.parse(JSON.stringify(this.dataList));if(i.length){var a,s=Object(o["a"])(i);try{for(s.s();!(a=s.n()).done;){var n=a.value;delete n.selected,delete n.open}}catch(r){s.e(r)}finally{s.f()}"drag"==t?this.$emit("handleChange",{type:t,data:i}):(delete e.selected,delete e.open,"edit"==t&&this.$emit("handleChange",{type:t,data:e}),"click"!=t||e.children&&0!=e.children.length||this.$emit("handleChange",{type:t,data:e}))}else console.log("数据出错了")}}},p=g,_=(i("f431"),Object(u["a"])(p,a,s,!1,null,"6774c60e",null));e["a"]=_.exports},"7c9d":function(t,e,i){},"7f84":function(t,e,i){},"8b11":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACQklEQVRoQ+2Wv2uTQRjHnyfZ8z9kcr+7f0BcBF2a1EERHBRcKnSog6CL0A6KdCiig4KLQw26KLqIvINDCc/diwQDFlwc6tDBpUMI9B55pSnHS0JyP4IULlPI3fd7z/f7uTcJwhl/4RmfH3KA/00wE8gEIhvIVyiywGh5JhBdYaRBJhBZYLQ8E4iuMNIgE4gsMFoeREApdZWZC6317+gJTgyEEJcbjcYRERU+nt4BlFLbzLwOAN8RsUtEP3wOnLZXSvkAAB5Wa81m81y/399f1NM7gBDiLiI+OjngGwB0tdY/Fz2wvk9KeQ8AtiafLz1AdZCU8g0AXKneIyIxcxXil28IKeUGADye6BDxPhFt+vh4E5iYuyEAYM9a2y3L8mDRw4UQ64i47ezf0Fo/WVR/GtpX4O6vhfhqre2UZXk4z1MptcbMO5N9zLxmjHk6TzdtPZjADBLFeDzuDAaDP7OGUUrdZubnzrW5RUQvQ4b/d4VDhbNIMPPn0Wi0MhwOj+reSqmbzPzCaf66MeZ1zAxJAtQfbGb+1Gq1OkVRjBxSNwDgldP8KhG9jRk+GYFp1wkR37fb7ZVer3cspbwGAKdNI+IlIvoYO3zyAHUSiPjOWruLiLvOtblgjPmSYvilBKiHcAdFxPO+fxXmBU32DNQPqn3FVj94yYdfGgHnmXgGABeZ+Y4x5sO8NkPWl0YgZJgQTQ4Q0lpKTSaQss0Qr0wgpLWUmkwgZZshXplASGspNZlAyjZDvDKBkNZSajKBlG2GeP0F2Ou2MQxMJhwAAAAASUVORK5CYII="},"8d77":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{title:t.title,width:400,visible:t.visible,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel,ok:t.handleSubmit}},[i("a-spin",{attrs:{spinning:t.confirmLoading}},[i("a-form",{attrs:{form:t.form}},[i("a-form-item",{attrs:{label:t.L("当前库存"),labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["spec_stock",{initialValue:1==t.detail.spec_stock_type?t.detail.stock_num:t.detail.spec_stock,rules:[{required:!0,message:t.L("请输入当前库存！")}]}],expression:"[\n            'spec_stock',\n            {\n              initialValue: detail.spec_stock_type == 1 ? detail.stock_num : detail.spec_stock,\n              rules: [{ required: true, message: L('请输入当前库存！') }],\n            },\n          ]"}],staticClass:"small-size",attrs:{disabled:1==t.detail.spec_stock_type,min:-1}})],1),i("a-form-item",{attrs:{label:t.L("原始库存"),labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["spec_original_stock",{initialValue:1==t.detail.spec_stock_type?t.detail.original_stock:t.detail.spec_original_stock,rules:[{required:!0,message:t.L("请输入原始库存！")}]}],expression:"[\n            'spec_original_stock',\n            {\n              initialValue: detail.spec_stock_type == 1 ? detail.original_stock : detail.spec_original_stock,\n              rules: [{ required: true, message: L('请输入原始库存！') }],\n            },\n          ]"}],staticClass:"small-size",attrs:{disabled:1==t.detail.spec_stock_type,min:-1}})],1),1==t.detail.spec_stock_type?i("div",{staticStyle:{"margin-left":"16%","margin-bottom":"10px"}},[i("span",[t._v(t._s(t.L("继承商品库商品库存后，如需修改商品库该商品的当前库存则可以到商品库中修改，规格的库存为独有库存")))])]):t._e()],1)],1)],1)},s=[],o=i("6ea1"),n={data:function(){return{title:this.L("修改库存"),labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),data:{pigcms_id:0,spec_stock:0,spec_original_stock:0},detail:{}}},methods:{edit:function(t,e,i,a){this.visible=!0,this.data.pigcms_id=t,this.data.spec_stock=e,this.data.spec_original_stock=i,this.detail=a,console.log(a)},handleSubmit:function(){var t=this,e=this.form.validateFields;this.confirmLoading=!0,e((function(e,i){e?t.confirmLoading=!1:(i.pigcms_id=t.data.pigcms_id,i.type=3,console.log(i),t.request(o["a"].editSingleGoods,i).then((function(e){t.$message.success(t.L("编辑成功")),t.$emit("handleGoodsUpdate"),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1}),1500)})).catch((function(e){t.confirmLoading=!1})))}))},handleCancel:function(){this.visible=!1,this.form=this.$form.createForm(this)},cancel:function(){}}},r=n,l=(i("1dc6"),i("0c7c")),d=Object(l["a"])(r,a,s,!1,null,"1f41f99c",null);e["default"]=d.exports},a710:function(t,e,i){"use strict";i("7f84")},bcea:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACBUlEQVRoQ+2Vvy8EQRzF3/coSBQk2KW4CIVCo5DQSCgUFAqFaxQSUShk90QUJH6ERCGySxARjUIi5K7T+0PUbvwHQuIrzi0XjjE3MxHJXHO5/c68eZ/3dvcI//xD/9w/HMBfN+gacA1oJuBuIc0Atbe7BrQj1BRwDWgGqL3dNaAdoaaAa0AzQO3t1hrwYu4nQh7AiQhoQ9vpNwJWAPw9HgPjuuzMKxHSpA0I4wBezBkCLiqYtQJhFMCLeYaA03fzhAwYGQATpWvGIYwBeHscECNOzBNjqpClc1xyjX9XfBbGbUAYAWiLeIUJW2XJT4uAzpLfHetc99BYhBg1DaEN4Ee8DsJaYpYZs/dZ+riNSoOWQ25IPSFPwIhJCC2Az+aJMFcI6Pi7t016m5se65EDMGwKomqAz+YBzIuQDmSvSn+fW8DIgTFoAqIqgC/JAwuFkCKZ+WTeHHFb7duf3IAuhDJAheSXREg7vzWfrGuPOf2M4u3UpwOhBNC6z12pZ9yWPbDL91naVjWfrPci7kwRcgz0lq7tipAWVfSqByCsioA2VQ6rtLY95u5SEz0AFkVIuyqaSgCvwn7EQ6/fIks3Kgf9tNaPuAOEMRHSkaqmMoDqAbbXOwDbCcv0XQOyhGzPXQO2E5bpuwZkCdmeuwZsJyzTdw3IErI9dw3YTlim7xqQJWR7/gIoJ4sxUA2kRAAAAABJRU5ErkJggg=="},c8c54:function(t,e,i){},dfd6:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{title:t.title,width:400,visible:t.visible,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel,ok:t.handleSubmit}},[i("a-spin",{attrs:{spinning:t.confirmLoading}},[i("a-form",{staticClass:"scrollbar scroll_content",attrs:{form:t.form}},t._l(t.data.list,(function(e,a){return i("a-form-item",{attrs:{label:e.index_name,labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["indexs["+a+"]",{initialValue:e.index}],expression:"[`indexs[${index}]`, { initialValue: item.index }]"}],attrs:{type:"hidden"}}),i("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["stock_nums["+a+"]",{initialValue:e.stock_num}],expression:"[`stock_nums[${index}]`, { initialValue: item.stock_num }]"}],staticClass:"small-size",attrs:{min:-1}})],1)})),1)],1)],1)},s=[],o=i("6ea1"),n={data:function(){return{title:this.L("修改库存"),labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),data:{goods_id:0}}},methods:{edit:function(t){this.visible=!0,this.data.goods_id=t,this.getEditInfo()},getEditInfo:function(){var t=this;this.request(o["a"].goodsDetail,{goods_id:this.data.goods_id}).then((function(e){t.data=e}))},handleSubmit:function(){var t=this,e=this.form.validateFields;this.confirmLoading=!0,e((function(e,i){e?t.confirmLoading=!1:(i.goods_id=t.data.goods_id,i.type=5,t.request(o["a"].editSingleGoods,i).then((function(e){t.$message.success(t.L("编辑成功")),t.$emit("handleGoodsUpdate"),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1}),1500)})).catch((function(e){t.confirmLoading=!1})))}))},handleCancel:function(){this.visible=!1,this.form=this.$form.createForm(this)},cancel:function(){}}},r=n,l=(i("a710"),i("0c7c")),d=Object(l["a"])(r,a,s,!1,null,"1d12273b",null);e["default"]=d.exports},e329:function(t,e,i){},eb9e:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACD0lEQVRoQ+2Vv0pcQRTGz7kLiws2FhZpQohFYGVh984sSSOshUUsUgjrNhaCpLAQQSRFAvlDBIsgWoiEkCZFIBDcLn0eYM48gfsS+wB75II3XGR1Mp4ZRJjbLHf+fPP9vm+4i/DAH3zg/iEB3HeDqYHUgDCBdIWEAYq3pwbEEQoFUgPCAMXbUwPiCIUCqQFhgOLt0RpQSj0HgCEzf7PWfhI7vUEgCoDWepWZ/1TO/E1E6zEgggPkeT5AxF9TzEaBCAqgtd5i5u+leWYeZFk2YOa1q7HgEMEAlFK7AHBSMb9hrf3Z7/dro9FoiIivYkAEAdBav2Pmg8q12SSiH+V7r9ebGY/HBcTL0BBigDzPPyLih4r510T07xqV481mc7bRaAwBYCUkhAhgivltIvp609em1WrN1ev1cwBYDgVxZ4Dr5hFxxxhz6vpUdjqd+SzLCoilEBB3Aphifs8Yc+wyX84rpR4Vf3IA8EIK4Q1w3Twzv7HWfvlf8xWIx4h4zsxaAuEFoJRaAICLitm3RHToa75c3+12n04mk+I6ta/Gjoho30dPAvCeiD77HDZtrdb6GTMXEIsAsE9ERz6aXgCFsNa6V/waY/76HHTb2na7/aRWq60S0ZmvpjeA7wGx1yeA2Am79FMDroRiz6cGYifs0k8NuBKKPZ8aiJ2wSz814Eoo9nxqIHbCLv3UgCuh2POXPbCeMfyLhFcAAAAASUVORK5CYII="},f02f:function(t,e,i){},f06f:function(t,e,i){"use strict";i("e329")},f431:function(t,e,i){"use strict";i("016e")}}]);