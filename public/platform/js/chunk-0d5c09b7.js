(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d5c09b7","chunk-748b470d"],{"1a49":function(t,a,e){"use strict";e.r(a);e("54f8");var i=function(){var t=this,a=t._self._c;return a("a-modal",{attrs:{title:t.title,width:640,visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"用户名称",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:t.detail.name,rules:[{required:!0,message:"请输入搜索词名称"}]}],expression:"[\n            'name',\n            { initialValue: detail.name, rules: [{ required: true, message: '请输入搜索词名称' }] },\n          ]"}]}),a("a-button",{attrs:{type:"primary"},on:{click:function(a){return t.getRandNames()}}},[t._v("随机姓名")])],1),a("a-form-item",{attrs:{label:"用户头像",help:"建议100*100px",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-upload",{attrs:{name:"reply_pic","file-list":t.avatarFileList,action:t.uploadImg,headers:t.headers},on:{change:t.avatarImgChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 上传图片")],1)],1)],1)],1)],1)],1)},o=[],n=e("4bb5d"),r=(e("9ae4"),e("075f"),e("5c08")),s=e("7b3f"),l={data:function(){return{title:"新增机器人",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),detail:{id:0,name:"",avatar:""},id:"0",uploadImg:"/v20/public/index.php"+s["a"].uploadImg+"?upload_dir=/system/robot",avatarFileList:[],headers:{authorization:"authorization-text"}}},mounted:function(){},methods:{add:function(){this.visible=!0,this.id="0",this.detail={id:0,name:"",avatar:""},this.avatarFileList=[]},edit:function(t){this.visible=!0,this.id=t,this.avatarFileList=[],this.getEditInfo(),this.id>0?this.title="编辑机器人":this.title="新增机器人"},getRandNames:function(){var t=this;this.request(r["a"].getRandName,{}).then((function(a){t.detail.name=a}))},avatarImgChange:function(t){var a=this,e=Object(n["a"])(t.fileList);e=e.slice(-1),e=e.map((function(e){return e.response&&(e.url=e.response.data.full_url,a.detail.avatar=t.file.response.data.image),e})),this.avatarFileList=e,console.log(this.avatarFileList,"this.avatarFileList"),"done"===t.file.status?console.log("done"):"error"===t.file.status&&(console.log("error"),this.$message.error("".concat(t.file.name," 上传失败.")))},handleSubmit:function(){var t=this,a=this.form.validateFields;this.confirmLoading=!0,a((function(a,e){if(a)t.confirmLoading=!1;else{if(e.id=t.id,e.avatar=t.detail.avatar,""==e.avatar)return t.$message.error("请上传头像"),void(t.confirmLoading=!1);t.request(r["a"].editRobot,e).then((function(a){t.id>0?t.$message.success("编辑成功"):t.$message.success("添加成功"),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1,t.$emit("ok",e)}),1500)})).catch((function(a){t.confirmLoading=!1}))}}))},handleCancel:function(){this.visible=!1,this.id="0",this.form=this.$form.createForm(this)},getEditInfo:function(){var t=this;this.request(r["a"].getRobotDetail,{id:this.id}).then((function(a){if(t.detail=a,a.avatar){var e={uid:"1",name:a.avatar,status:"done",url:a.avatar};t.avatarFileList.push(e)}}))}}},c=l,d=e("0b56"),m=Object(d["a"])(c,i,o,!1,null,null,null);a["default"]=m.exports},"4bb5d":function(t,a,e){"use strict";e.d(a,"a",(function(){return l}));var i=e("ea87");function o(t){if(Array.isArray(t))return Object(i["a"])(t)}e("6073"),e("2c5c"),e("c5cb"),e("36fa"),e("02bf"),e("a617"),e("17c8");function n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var r=e("9877");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return o(t)||n(t)||Object(r["a"])(t)||s()}},"5c08":function(t,a,e){"use strict";var i={getRobotList:"/common/platform.robot/getRobotList",getRobotDetail:"/common/platform.robot/getRobotDetail",editRobot:"/common/platform.robot/editRobot",delRobot:"/common/platform.robot/delRobot",getRandName:"/common/platform.robot/getRandName"};a["a"]=i},"7b3f":function(t,a,e){"use strict";var i={uploadImg:"/common/common.UploadFile/uploadImg"};a["a"]=i}}]);