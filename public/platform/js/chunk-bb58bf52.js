(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bb58bf52"],{"4d95":function(e,t,i){"use strict";var o={getTicketList:"life_tools/merchant.LifeToolsTicket/getList",getTicketDetail:"life_tools/merchant.LifeToolsTicket/getDetail",ticketDel:"life_tools/merchant.LifeToolsTicket/del",TicketEdit:"life_tools/merchant.LifeToolsTicket/addOrEdit",getLifeToolsList:"life_tools/merchant.LifeTools/getInformationList",setLifeToolsAttrs:"life_tools/merchant.LifeTools/setLifeToolsAttrs",getSportsOrderList:"/life_tools/merchant.SportsOrder/getOrderList",exportToolsOrder:"/life_tools/merchant.SportsOrder/exportToolsOrder",getSportsOrderDetail:"/life_tools/merchant.SportsOrder/getOrderDetail",agreeSportsOrderRefund:"/life_tools/merchant.SportsOrder/agreeRefund",refuseSportsOrderRefund:"/life_tools/merchant.SportsOrder/refuseRefund",getEditInfo:"life_tools/merchant.LifeToolsTicket/getEditInfo",getCategoryList:"life_tools/merchant.LifeToolsCategory/getCategoryList",getMapConfig:"life_tools/merchant.LifeTools/getMapConfig",getAddressList:"life_tools/merchant.LifeTools/getAddressList",addEditLifeTools:"life_tools/merchant.LifeTools/addEditLifeTools",getLifeToolsDetail:"life_tools/merchant.LifeTools/getLifeToolsDetail",delLifeTools:"life_tools/merchant.LifeTools/delLifeTools",getReplyList:"/life_tools/merchant.LifeToolsReply/searchReply",isShowReply:"/life_tools/merchant.LifeToolsReply/isShowReply",getReplyDetails:"/life_tools/merchant.LifeToolsReply/getReplyDetails",delReply:"/life_tools/merchant.LifeToolsReply/delReply",subReply:"/life_tools/merchant.LifeToolsReply/subReply",getReplyContent:"/life_tools/merchant.LifeToolsReply/getReplyContent",getCardList:"/life_tools/merchant.EmployeeCard/getCardList",editCard:"/life_tools/merchant.EmployeeCard/editCard",saveCard:"/life_tools/merchant.EmployeeCard/saveCard",delCard:"/life_tools/merchant.EmployeeCard/delCard",getSportsVerifyList:"/life_tools/merchant.SportsOrder/getVerifyList",exportVerifyRecord:"/life_tools/merchant.SportsOrder/exportVerifyRecord",getLimitedList:"/life_tools/merchant.LifeScenicLimitedAct/getLimitedList",updateLimited:"/life_tools/merchant.LifeScenicLimitedAct/addLimited",limitedChangeState:"/life_tools/merchant.LifeScenicLimitedAct/changeState",removeLimited:"/life_tools/merchant.LifeScenicLimitedAct/del",getLimitedInfo:"/life_tools/merchant.LifeScenicLimitedAct/edit",getMerchantSort:"/life_tools/merchant.LifeToolsTicket/getMerchantSort",getLifeToolsTicket:"/life_tools/merchant.LifeToolsTicket/getLifeToolsTicket",getToolsCardList:"/life_tools/merchant.LifeTools/getToolsCardList",AddOrEditToolsCard:"/life_tools/merchant.LifeTools/AddOrEditToolsCard",getToolsCardEdit:"/life_tools/merchant.LifeTools/getToolsCardEdit",delToolsCard:"/life_tools/merchant.LifeTools/delToolsCard",getAllToolsList:"/life_tools/merchant.LifeTools/getAllToolsList",getToolsCardRecord:"/life_tools/merchant.LifeTools/getToolsCardRecord",getCardOrderList:"/life_tools/merchant.LifeTools/getCardOrderList",getCardOrderDetail:"/life_tools/merchant.LifeTools/getCardOrderDetail",agreeCardOrderRefund:"/life_tools/merchant.LifeTools/agreeCardOrderRefund",refuseCardOrderRefund:"/life_tools/merchant.LifeTools/refuseCardOrderRefund",getSportsActivityList:"/life_tools/merchant.LifeToolsSportsActivity/getSportsActivityList",updateSportsActivityStatus:"/life_tools/merchant.LifeToolsSportsActivity/updateSportsActivityStatus",getSportsActivityOrderList:"/life_tools/merchant.LifeToolsSportsActivity/getSportsActivityOrderList",addSportsActivity:"/life_tools/merchant.LifeToolsSportsActivity/addSportsActivity",editSportsActivity:"/life_tools/merchant.LifeToolsSportsActivity/editSportsActivity",getTravelList:"/life_tools/merchant.LifeToolsGroupTravelAgency/getTravelList",agencyAudit:"/life_tools/merchant.LifeToolsGroupTravelAgency/audit",getStaffList:"/life_tools/merchant.LifeToolsTicket/getStaffList",getAppointList:"life_tools/merchant.LifeToolsAppoint/getList",getAppointMsg:"life_tools/merchant.LifeToolsAppoint/getToolAppointMsg",saveAppoint:"life_tools/merchant.LifeToolsAppoint/saveToolAppoint",lookAppointUser:"life_tools/merchant.LifeToolsAppoint/lookAppointUser",closeAppoint:"life_tools/merchant.LifeToolsAppoint/closeAppoint",exportAppointUserOrder:"life_tools/merchant.LifeToolsAppoint/exportUserOrder",delAppoint:"life_tools/merchant.LifeToolsAppoint/delAppoint",getSeatMap:"/life_tools/merchant.LifeToolsAppoint/getSeatMap",getAppointOrderDetail:"life_tools/merchant.LifeToolsAppoint/getAppointOrderDetail",auditRefund:"life_tools/merchant.LifeToolsAppoint/auditRefund",suspend:"life_tools/merchant.LifeToolsAppoint/suspend",getSportsSecondsKillList:"/life_tools/merchant.LifeToolsSportsSecondsKill/getSecondsKillList",saveSportsSecondsKill:"/life_tools/merchant.LifeToolsSportsSecondsKill/saveSecondsKill",ChangeSportsSecondsKill:"/life_tools/merchant.LifeToolsSportsSecondsKill/ChangeSportsSecondsKill",delSportsSecondsKill:"/life_tools/merchant.LifeToolsSportsSecondsKill/delSecondsKill",getSportsSecondsKillDetail:"/life_tools/merchant.LifeToolsSportsSecondsKill/getSecondsKillDetail",getGroupTicketList:"life_tools/merchant.group/getGroupTicketList",getGroupLifeToolsTicket:"life_tools/merchant.LifeToolsTicket/getLifeToolsTicket",addGroupTicket:"life_tools/merchant.group/addGroupTicket",delGroupTicket:"life_tools/merchant.group/delGroupTicket",editSettingData:"life_tools/merchant.group/editSettingData",editGroupTicket:"life_tools/merchant.group/editGroupTicket",getSettingDataDetail:"life_tools/merchant.group/getSettingDataDetail",getStatisticsData:"life_tools/merchant.LifeToolsGroupOrder/getStatisticsData",getOrderList:"life_tools/merchant.LifeToolsGroupOrder/getOrderList",getOrderAuditList:"/life_tools/merchant.LifeToolsGroupOrder/getAuditGroupOrderList",orderAudit:"/life_tools/merchant.LifeToolsGroupOrder/audit",groupOrderRefand:"life_tools/merchant.LifeToolsGroupOrder/groupOrderRefand",editDistributionPrice:"life_tools/merchant.LifeToolsDistribution/editDistributionPrice",getDistributionSettingDataDetail:"/life_tools/merchant.LifeToolsDistribution/getSettingDataDetail",getDistributionSettingeditSetting:"/life_tools/merchant.LifeToolsDistribution/editSetting",getAtatisticsInfo:"/life_tools/merchant.LifeToolsDistribution/getAtatisticsInfo",getDistributorList:"/life_tools/merchant.LifeToolsDistribution/getDistributorList",getLowerLevel:"/life_tools/merchant.LifeToolsDistribution/getLowerLevel",audit:"/life_tools/merchant.LifeToolsDistribution/audit",getDistributionOrderList:"/life_tools/merchant.LifeToolsDistribution/getDistributionOrderList",editDistributionOrderNote:"/life_tools/merchant.LifeToolsDistribution/editDistributionOrderNote",delDistributor:"/life_tools/merchant.LifeToolsDistribution/delDistributor",addStatement:"/life_tools/merchant.LifeToolsDistribution/addStatement",getStatementList:"/life_tools/merchant.LifeToolsDistribution/getStatement",getStatementDetail:"/life_tools/merchant.LifeToolsDistribution/getStatementDetail",lifeToolsAudit:"/life_tools/platform.LifeTools/lifeToolsAudit",auditTicket:"/life_tools/platform.LifeToolsTicket/auditTicket",getMapCity:"/g=Index&c=Map&a=suggestion",getCarParkList:"/life_tools/merchant.LifeToolsCarPark/getCarParkList",addCarPark:"/life_tools/merchant.LifeToolsCarPark/addCarPark",showCarPark:"/life_tools/merchant.LifeToolsCarPark/showCarPark",getToolsList:"/life_tools/merchant.LifeToolsCarPark/getToolsList",deleteCarPark:"/life_tools/merchant.LifeToolsCarPark/deleteCarPark",statusCarPark:"/life_tools/merchant.LifeToolsCarPark/statusCarPark",wifiList:"life_tools/merchant.LifeToolsWifi/wifiList",wifiAdd:"life_tools/merchant.LifeToolsWifi/wifiAdd",wifiShow:"life_tools/merchant.LifeToolsWifi/wifiShow",wifiStatusChange:"life_tools/merchant.LifeToolsWifi/wifiStatusChange",wifiDelete:"life_tools/merchant.LifeToolsWifi/wifiDelete",scenicMapSave:"/life_tools/merchant.LifeToolsScenicMap/saveMap",scenicMapPlaceList:"/life_tools/merchant.LifeToolsScenicMap/mapPlaceList",scenicMapPlaceSave:"/life_tools/merchant.LifeToolsScenicMap/saveMapPlace",scenicMapPlaceDel:"/life_tools/merchant.LifeToolsScenicMap/mapPlaceDel",scenicMapLineList:"/life_tools/merchant.LifeToolsScenicMap/mapLineList",scenicMapLineSave:"/life_tools/merchant.LifeToolsScenicMap/saveMapLine",scenicMapLineDel:"/life_tools/merchant.LifeToolsScenicMap/mapLineDel",scenicMapScenicList:"/life_tools/merchant.LifeToolsScenicMap/scenicList",scenicMapPlaceCatList:"/life_tools/merchant.LifeToolsScenicMap/categoryList",scenicMapPlaceCategoryDel:"/life_tools/merchant.LifeToolsScenicMap/categoryDel",scenicMapPlaceCategorySave:"/life_tools/merchant.LifeToolsScenicMap/saveCategory",scenicMapList:"/life_tools/merchant.LifeToolsScenicMap/mapList",scenicMapDel:"/life_tools/merchant.LifeToolsScenicMap/mapDel",scenicMapStatusSave:"/life_tools/merchant.LifeToolsScenicMap/saveMapStatus",changeCloseStatus:"life_tools/merchant.LifeTools/changeCloseStatus",getAddEditCardMerchantInfo:"/life_tools/merchant.LifeTools/getAddEditCardMerchantInfo"};t["a"]=o},9722:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("a-modal",{attrs:{visible:e.visible,title:e.title,width:"60%",bodyStyle:{maxHeight:"600px",overflowY:"auto"},destroyOnClose:!0},on:{cancel:e.handleCancel,ok:e.handleOk}},[i("a-form-model",{attrs:{model:e.formData,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[i("a-form-model-item",{attrs:{label:"选择次卡类型",required:""}},[i("a-select",{staticStyle:{width:"100%"},attrs:{disabled:this.isEdit,options:e.cardTypeOPtions},on:{change:e.cardTypeChange},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}})],1),i("a-form-model-item",{attrs:{label:"次卡名称",required:""}},[i("a-input",{model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),i("a-form-model-item",{attrs:{label:"原价",required:""}},[i("a-input",{attrs:{type:"number"},model:{value:e.formData.old_price,callback:function(t){e.$set(e.formData,"old_price",t)},expression:"formData.old_price"}})],1),i("a-form-model-item",{attrs:{label:"现价",required:""}},[i("a-input",{attrs:{type:"number"},model:{value:e.formData.price,callback:function(t){e.$set(e.formData,"price",t)},expression:"formData.price"}})],1),i("a-form-model-item",{attrs:{label:"图片",required:""}},[i("a-upload",{attrs:{name:"reply_pic","list-type":"picture","show-upload-list":!1,data:{upload_dir:""},action:"/v20/public/index.php/common/common.UploadFile/uploadPictures"},on:{change:e.handleUploadChange}},[e.image?i("img",{staticStyle:{width:"120px",height:"120px"},attrs:{src:e.image,alt:"image"}}):i("div",[!0===e.loading?i("a-icon",{attrs:{type:"loading"}}):e._e(),i("a-button",[i("a-icon",{attrs:{type:"upload"}}),e._v(" 上传 ")],1)],1)]),i("br"),i("font",{staticStyle:{color:"red"}},[e._v("推荐尺寸：718px * 312px")])],1),i("a-form-model-item",{attrs:{label:"购买后有效期",required:""}},[i("a-select",{staticStyle:{width:"100px"},attrs:{disabled:this.isEdit},model:{value:e.formData.term_type,callback:function(t){e.$set(e.formData,"term_type",t)},expression:"formData.term_type"}},[i("a-select-option",{attrs:{value:1}},[e._v("天")]),i("a-select-option",{attrs:{value:2}},[e._v("月")]),i("a-select-option",{attrs:{value:3}},[e._v("年")])],1),i("a-input",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{disabled:this.isEdit,type:"number"},model:{value:e.formData.term_num,callback:function(t){e.$set(e.formData,"term_num",t)},expression:"formData.term_num"}})],1),"scenic"==e.formData.type?i("a-form-model-item",{attrs:{label:"绑定景区"}},[i("a-select",{attrs:{disabled:this.isEdit,mode:"multiple",options:e.scenicList},model:{value:e.formData.scenic_ids,callback:function(t){e.$set(e.formData,"scenic_ids",t)},expression:"formData.scenic_ids"}})],1):e._e(),"sports"==e.formData.type?i("blockquote",[i("a-form-model-item",{attrs:{label:"绑定体育馆"}},[i("a-select",{attrs:{disabled:this.isEdit,mode:"multiple",options:e.stadiumList},model:{value:e.formData.stadium_ids,callback:function(t){e.$set(e.formData,"stadium_ids",t)},expression:"formData.stadium_ids"}})],1),i("a-form-model-item",{attrs:{label:"绑定体育课程"}},[i("a-select",{attrs:{disabled:this.isEdit,mode:"multiple",options:e.courseList},model:{value:e.formData.course_ids,callback:function(t){e.$set(e.formData,"course_ids",t)},expression:"formData.course_ids"}})],1)],1):e._e(),i("a-form-model-item",{attrs:{label:"总次数"}},[i("a-input",{attrs:{type:"number",disabled:this.isEdit},model:{value:e.formData.num,callback:function(t){e.$set(e.formData,"num",t)},expression:"formData.num"}})],1),i("a-form-model-item",{attrs:{label:"每日核销次数"}},[i("a-input",{attrs:{type:"number"},model:{value:e.formData.day_num,callback:function(t){e.$set(e.formData,"day_num",t)},expression:"formData.day_num"}}),e._v(" -1表示不限制 ")],1),i("a-form-model-item",{attrs:{label:"同一个用户购买次数"}},[i("a-input",{attrs:{type:"number"},model:{value:e.formData.user_num,callback:function(t){e.$set(e.formData,"user_num",t)},expression:"formData.user_num"}})],1),i("a-form-model-item",{attrs:{label:"购买须知"}},[i("a-textarea",{attrs:{placeholder:"请输入购买须知","auto-size":{minRows:3,maxRows:5}},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1)],1)],1)],1)},a=[],s=i("5530"),l=(i("b64b"),i("d81d"),i("4d95")),r=i("c1df"),n=i.n(r);function c(e,t){var i=new FileReader;i.addEventListener("load",(function(){return t(i.result)})),i.readAsDataURL(e)}var f={props:{visible:{type:Boolean,default:!1},title:String,detail:Object,toolsList:Array,isEdit:Boolean},data:function(){return{labelCol:{span:6},wrapperCol:{span:10},loading:!1,image:"",cardTypeOPtions:[],stadiumList:[],courseList:[],scenicList:[],formData:{type:"",title:"",old_price:"",price:"",term_type:1,term_num:"",scenic_ids:[],stadium_ids:[],course_ids:[],num:"",day_num:"",user_num:"",description:""}}},watch:{visible:function(e){e&&this.initFormData()}},mounted:function(){this.initFormData()},methods:{moment:n.a,initFormData:function(){this.getList(),this.detail&&Object.keys(this.detail).length?this.formData=Object(s["a"])({},this.detail):this.formData={type:"",title:"",old_price:"",price:"",term_type:1,term_num:"",scenic_ids:[],stadium_ids:[],course_ids:[],num:"",day_num:"",user_num:"",description:""},this.image=this.detail?this.detail.image:""},handleOk:function(){var e=this;return""==this.formData.title||void 0==this.formData.title?(this.$message.error("次卡名称必填"),!1):""==this.formData.old_price||void 0==this.formData.old_price?(this.$message.error("原价必填"),!1):""==this.formData.price||void 0==this.formData.price?(this.$message.error("现价必填"),!1):""==this.formData.image||void 0==this.formData.image?(this.$message.error("图片必填"),!1):""==this.formData.term_num||0==this.formData.term_num||void 0==this.formData.term_num?(this.$message.error("有效期必须大于0"),!1):""==this.formData.num||0==this.formData.num||void 0==this.formData.num?(this.$message.error("总次数必须大于0"),!1):""==this.formData.day_num||0==this.formData.day_num||void 0==this.formData.num?(this.$message.error("每日核销次数不能等于0"),!1):""==this.formData.user_num||0==this.formData.user_num||void 0==this.formData.user_num?(this.$message.error("同一个用户购买次数必须大于0"),!1):this.formData.day_num-0>this.formData.num-0?(this.$message.error("每日核销次数不能大于总次数"),!1):void this.request(l["a"].AddOrEditToolsCard,this.formData).then((function(t){e.$message.success("操作成功!",1,(function(){e.$emit("handleCancel"),e.$emit("getDataList",!1)}))}))},handleCancel:function(){this.$emit("handleCancel")},handleUploadChange:function(e){var t=this;if("uploading"!==e.file.status){if("done"===e.file.status&&1e3===e.file.response.status){var i=e.file.response.data;this.$set(this.formData,"image",i),c(e.file.originFileObj,(function(e){t.image=e,t.loading=!1}))}}else this.loading=!0},cardTypeChange:function(e){this.$set(this.formData,"type",e)},getList:function(){var e=this;this.request(l["a"].getAddEditCardMerchantInfo).then((function(t){var i=t.is_sports,o=void 0===i?0:i,a=t.is_scenic,s=void 0===a?0:a,l=t.scenic_list,r=void 0===l?[]:l,n=t.stadium_list,c=void 0===n?[]:n,f=t.course_list,d=void 0===f?[]:f,m=[];1==s&&m.push({value:"scenic",label:"景区"}),1==o&&m.push({value:"sports",label:"体育"}),e.cardTypeOPtions=m,(!e.detail||e.detail&&!e.detail.type)&&(e.formData.type=e.cardTypeOPtions.length?e.cardTypeOPtions[0]["value"]:""),e.scenicList=r.map((function(e){return{value:e.tools_id,label:e.title}})),e.stadiumList=c.map((function(e){return{value:e.tools_id,label:e.title}})),e.courseList=d.map((function(e){return{value:e.tools_id,label:e.title}}))}))}}},d=f,m=i("2877"),p=Object(m["a"])(d,o,a,!1,null,null,null);t["default"]=p.exports}}]);