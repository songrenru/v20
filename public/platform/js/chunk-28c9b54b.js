(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28c9b54b"],{"1a2a":function(e,o){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Nzg0RTdBMTdFMUZGMTFFQTk5NzhEMjBEMTg4NTNFNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Nzg0RTdBMThFMUZGMTFFQTk5NzhEMjBEMTg4NTNFNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3ODRFN0ExNUUxRkYxMUVBOTk3OEQyMEQxODg1M0U0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3ODRFN0ExNkUxRkYxMUVBOTk3OEQyMEQxODg1M0U0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pj7NP+UAAADYSURBVHja7NqxCYNAGMXxTxFsjpDOCUJWcICQmQL2kmkyQHCAjCDERicImtIi79A6RYjCyf/BO2yE7+d53UVN05hyUK/qSd1ZGOnVSr2oz0iQox4e6t7CzEvNYy1lwAibZy/j+XcKPec4oDPxLS62jQQIECBAgAABAgQIECBAgACZkvz6YpZl5pz7+0DjOFrbtuvtSJqmy3zZJFl3R7qu44wAAQIECBAgQIAAAQIECBAgy0L6DTjeHlJtAHL3kMKmq0Khxs9eeEit5upNHQICDPPMfvb6I8AAhGEh4Rh6+BMAAAAASUVORK5CYII="},"4f2c":function(e,o,t){"use strict";var i={propertyGetOrderPackage:"/community/property_api.PrivilagePackage/getOrderPackage",propertyGetPackageRoom:"/community/property_api.PrivilagePackage/getPackageRoom",propertyGetPackageRoomList:"/community/property_api.PrivilagePackage/getPackageRoomList",propertyCreateOrder:"/community/property_api.PrivilagePackage/createOrder",propertygetRoomOrderPrice:"/community/property_api.PrivilagePackage/getRoomOrderPrice",propertyCreateRoomOrderNew:"/community/property_api.PrivilagePackage/createRoomOrderNew",propertyGetPayType:"/community/property_api.PrivilagePackage/getPayType",propertyCreateQrCode:"/community/property_api.PrivilagePackage/createQrCode",propertyCreateRoomQrCode:"/community/property_api.PrivilagePackage/createRoomQrCode",propertyQueryOrderPayStatus:"/community/property_api.PrivilagePackage/queryOrderPayStatus",propertyGetRoomList:"/community/property_api.RoomPackage/getRoomList",propertyGetBuyRoom:"/community/property_api.RoomPackage/getBuyRoom",propertyCreateRoomOrder:"/community/property_api.RoomPackage/createRoomOrder",propertyRoomCreateQrCode:"/community/property_api.RoomPackage/createQrCode",propertyRoomQueryOrderPayStatus:"/community/property_api.RoomPackage/queryOrderPayStatus",propertyGetPrivilagePackage:"/community/property_api.BuyPackage/getPrivilagePackage",propertyGetRoomPackage:"/community/property_api.BuyPackage/getRoomPackage",chargeTimeInfo:"/community/property_api.ChargeTime/takeEffectTimeInfo",setChargeTime:"/community/property_api.ChargeTime/takeEffectTimeSet",chargeNumberList:"/community/property_api.ChargeTime/chargeNumberList",chargeNumberInfo:"/community/property_api.ChargeTime/chargeNumberInfo",addChargeNumber:"/community/property_api.ChargeTime/addChargeNumber",editChargeNumber:"/community/property_api.ChargeTime/editChargeNumber",getChargeType:"/community/property_api.ChargeTime/getChargeType",chargeWaterType:"/community/property_api.ChargeTime/chargeWaterType",offlinePayList:"/community/property_api.ChargeTime/offlinePayList",offlinePayInfo:"/community/property_api.ChargeTime/offlinePayInfo",addOfflinePay:"/community/property_api.ChargeTime/addOfflinePay",editOfflinePay:"/community/property_api.ChargeTime/editOfflinePay",delOfflinePay:"/community/property_api.ChargeTime/delOfflinePay",getCountFeeList:"/community/property_api.ChargeTime/countVillageFee",villageLogin:"/community/property_api.ChargeTime/village_login",frameworkTissueNav:"/community/common.Framework/getTissueNav",frameworkTissueUser:"/community/common.Framework/getTissueUser",frameworkGroupParam:"/community/common.Framework/getGroupParam",frameworkPropertyVillage:"/community/common.Framework/getPropertyVillage",frameworkOrganizationAdd:"/community/common.Framework/organizationAdd",frameworkOrganizationQuery:"/community/common.Framework/organizationQuery",frameworkOrganizationSub:"/community/common.Framework/organizationSub",frameworkOrganizationDel:"/community/common.Framework/organizationDel",frameworkWorkerAdd:"/community/common.Framework/workerAdd",frameworkWorkerSub:"/community/common.Framework/workerSub",powerRoleList:"/community/property_api.Power/getRoleList",powerRoleDel:"/community/property_api.Power/roleDel",propertyConfigSetApi:"/community/property_api.Property/config",passwordChangeApi:"/community/property_api.Property/passwordChange",digitApi:"/community/property_api.Property/digit",saveDigitApi:"/community/property_api.Property/saveDigit",ajaxProvince:"/community/property_api.Property/ajaxProvince",ajaxCity:"/community/property_api.Property/ajaxCity",ajaxArea:"/community/property_api.Property/ajaxArea",saveConfig:"/community/property_api.Property/saveConfig",loginLogList:"/community/property_api.Security/loginLog",loginLogDetail:"/community/property_api.Security/loginLogDetail",commonLog:"/community/property_api.Security/commonLog",commonLogDetail:"/community/property_api.Security/commonLogDetail"};o["a"]=i},a370:function(e,o,t){},d789:function(e,o,t){"use strict";t("a370")},dc6c:function(e,o,t){"use strict";t.r(o);var i,a=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"packages-room-buy-box"},[i("div",{staticClass:"header-box"},[1==e.type?i("a-table",{attrs:{columns:e.package_columns,"data-source":e.package_data,pagination:!1}}):e._e(),2==e.type?i("a-table",{attrs:{columns:e.package_columns2,"data-source":e.package_data,pagination:!1}}):e._e()],1),1==e.type?i("div",{staticClass:"buy-box"},[i("div",{staticClass:"buy-parent"},[i("div",{staticClass:"buy-divs",attrs:{id:"buy-pics"}},e._l(e.roomList,(function(o,a){return i("div",{key:a,staticClass:"buy-room-package"},[i("div",{staticClass:"buy-room-box",class:{active:1==o.pitch_type},attrs:{id:"box-"+a},on:{click:function(t){return e.choose_room_data(t,a,o.room_id)}}},[i("div",{staticClass:"buy-room-title"},[i("h1",[e._v(e._s(o.room_title))])]),i("div",{staticClass:"buy-room-price"},[e._v("￥"+e._s(o.room_price)+"/年")]),i("div",{staticClass:"buy-room-num-tip"},[e._v("房间数："+e._s(o.room_count))]),i("div",{staticClass:"buy-room-num"},[i("a-row",{attrs:{type:"flex"}},[i("a-col",{attrs:{span:10}},[e._v(" 购买数量： ")]),i("a-col",{attrs:{span:14}},[i("a-row",{attrs:{type:"flex"}},[i("a-col",{attrs:{span:5}},[i("div",{staticStyle:{width:"100%","text-align":"center"}},[o.room_num&&o.room_num>1?i("img",{attrs:{src:t("eaa0")},on:{click:function(o){return e.munus_period(a)}}}):i("img",{attrs:{src:t("1a2a")}})])]),i("a-col",{attrs:{span:1}}),i("a-col",{attrs:{span:10}},[i("a-input",{staticStyle:{width:"100%","text-align":"center"},attrs:{size:"small",value:o.room_num}})],1),i("a-col",{attrs:{span:1}}),i("a-col",{attrs:{span:5}},[i("div",{staticStyle:{width:"100%","text-align":"center"}},[i("img",{attrs:{src:t("f1cd")},on:{click:function(o){return e.plus_period(a)}}})])])],1)],1)],1)],1),i("div",{staticClass:"choose_icon"})])])})),0)])]):e._e(),i("div",{class:1==e.type?"pay-info-box":"pay-info-box1"},[i("div",{staticClass:"packages-end-time",staticStyle:{"margin-left":"20px"}},[e._v(" 预计到期时间："+e._s(e.package_info.package_end_time)+" ")]),i("div",{staticStyle:{display:"flex","align-items":"center","margin-right":"100px"}},[i("div",{staticClass:"total-money-info"},[e._v(" 订单总额："),i("span",{staticClass:"money-tip"},[e._v("￥"+e._s(e.order_info.total_money))])]),i("div",{staticClass:"pay-btn"},[i("a-button",{attrs:{type:"primary"},on:{click:function(o){return e.goPay()}}},[e._v("去付款")])],1)])]),i("a-modal",{attrs:{title:"请进行扫码支付",visible:e.visible,maskClosable:!1},on:{ok:e.handleOk,cancel:e.handleCancel,onCancel:e.handleCancel}},[i("div",{staticStyle:{width:"100%","text-align":"center"}},[i("img",{attrs:{src:e.pay_qrcode}})])])],1)},r=[],m=t("ade3"),n=t("4f2c"),c=[{title:"套餐标题",dataIndex:"package_title",key:"package_title_detail"},{title:"所含房间",dataIndex:"room_num",key:"room_num"},{title:"价格（元/年）",dataIndex:"package_price",key:"package_price"},{title:"续费周期",dataIndex:"package_num",key:"package_num"},{title:"总价",dataIndex:"total_money",key:"total_money"}],s=[{title:"套餐标题",dataIndex:"package_title",key:"package_title_detail"},{title:"所含房间",dataIndex:"room_num",key:"room_num"},{title:"价格（元/年）",dataIndex:"package_price",key:"package_price"},{title:"总价",dataIndex:"total_money",key:"total_money"}],p={name:"PackagesRoomBuy",data:function(){return{package_data:[{package_title:"套餐一",room_num:"100",package_price:"100",num:"1",total_money:"100"}],roomList:[],package_info:{},package_columns:c,package_columns2:s,title:"套餐续费",confirmLoading:!1,buy_periods:1,type:1,form:this.$form.createForm(this),isDrag:!1,isClick:!1,package_id:0,order_id:0,choose_room:[],isClickChoose:!0,pay_type:"",compute_type:1,order_info:{},pay_type_info:[],pay_qrcode:"",visible:!1,is_loop:!1,pay_room_total_num:0,loadPost:!1}},activated:function(){var e=this.$route.query;this.package_id=e.package_id,this.buy_periods=e.package_num,this.type=e.type,this.order_id=e.order_id,console.log("query",e),this.getPackageRoom()},mounted:function(){var e=this.$route.query;this.package_id=e.package_id,this.buy_periods=e.package_num,this.type=e.type,this.order_id=e.order_id,console.log("query",e),this.getPackageRoom()},methods:(i={getPackageRoom:function(){var e=this;if(this.loadPost)return!1;this.loadPost=!0;var o={};o["package_id"]=this.package_id,o["package_num"]=this.buy_periods,o["type"]=this.type,o["order_id"]=this.order_id,this.request(n["a"].propertyGetPackageRoom,o).then((function(o){if(e.loadPost=!1,console.log("res",o),o.package&&(e.package_data=[],e.package_data.push(o.package),e.package_info=o.package,e.order_info.total_money=o.package.total_money,e.pay_room_total_num=o.package.pay_room_total_num),o.room_list)for(var t in e.roomList=o.room_list,o.room_list)if(o.room_list[t]&&(o.room_list[t]["room_num"]=1),1==o.room_list[t].pitch_type&&o.package.pay_room_total_num>0&&o.room_list[t].room_count<o.package.pay_room_total_num){var i=Math.ceil(o.package.pay_room_total_num/o.room_list[t].room_count);o.room_list[t]["room_num"]=i}e.choose_room=[]}))},getPayType:function(){var e=this;this.request(n["a"].propertyGetPayType).then((function(o){console.log("getPayType",o),e.pay_type_info=o}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.buy_periods="0",e.form=e.$form.createForm(e)}),500)},handleSubmit:function(){var e=this;if(this.confirmLoading)return!1;console.log("dddddddd",this.roomList),this.confirmLoading=!0;var o={},t=[],i=JSON.parse(JSON.stringify(this.roomList)),a=JSON.parse(JSON.stringify(this.choose_room));console.log("roomList",i),console.log("choose_room",a);var r={};for(var m in i)i[m]&&i[m]["room_num"]>0&&a[m]>0?(r={},r["room_id"]=i[m]["room_id"],r["room_num"]=i[m]["room_num"],t.push(r)):a.length<=0&&1==i[m].pitch_type&&(console.log("dddddddddddd",i[m]),r={},r["room_id"]=i[m]["room_id"],r["room_num"]=i[m]["room_num"],t.push(r));o["package_id"]=this.package_id,o["package_num"]=this.buy_periods,o["room"]=t,o["type"]=this.type,o["pay_type"]=this.pay_type,o["order_id"]=this.order_id,o["compute_type"]=this.compute_type;var c=t.length;console.log("propertyCreateOrder-len",c),console.log("propertyCreateOrder-param",o),console.log("package_info_room_num",this.package_info.room_num),console.log(this.pay_room_total_num),c>0||this.package_info.room_num>=this.pay_room_total_num?this.request(n["a"].propertyCreateOrder,o).then((function(o){console.log("propertyCreateOrder",o),e.order_info=o,e.confirmLoading=!1,o.package_order_id>0&&e.getCreateQrCode(o.package_order_id)})):(this.$notification.warning({message:"升级套餐的房间数不能小于现有套餐房间数！"}),this.confirmLoading=!1,this.order_info.total_money=this.package_info.total_money)},handlemouse:function(e){var o,t,i=this,a=document.getElementsByClassName("buy-parent")[0],r=document.getElementsByClassName("buy-divs")[0],m=document.getElementsByClassName("buy-box")[0],n=r.offsetWidth-a.offsetWidth;if(n>0)this.isClick=!0;else if(console.log(r),console.log("buy-child",a.offsetWidth),console.log("buy-parent",r.offsetWidth),console.log("buy-box",m.offsetWidth),!(m.offsetWidth>a.offsetWidth)){o=(new Date).getTime();var c=e.clientX-a.offsetLeft;this.isDrag=!0,r.onmousemove=function(e){if(i.isDrag){var o=e.clientX,t=o-c;a.style.left=t+"px"}},r.onmouseup=function(e){t=(new Date).getTime();var a=t-o;i.isDrag=!1,i.isClick=a<150}}},leave:function(){this.isDrag=!1},clickDoSome:function(e){this.isClick&&console.log("是否在单击",1)},getCreateQrCode:function(e){var o=this,t={};t["order_id"]=e,this.request(n["a"].propertyCreateQrCode,t).then((function(t){console.log("getCreateQrCode",t),t.qrcode&&(o.pay_qrcode=t.qrcode,o.visible=!0,o.is_loop=!0,o.setTimeoutPayInfo(e))}))},setTimeoutPayInfo:function(e){var o=this;setTimeout((function(){o.getQueryOrderPayStatus(e)}),5e3)},getQueryOrderPayStatus:function(e){var o=this,t={};t["order_id"]=e,this.request(n["a"].propertyQueryOrderPayStatus,t).then((function(t){console.log("getQueryOrderPayStatus",t),t.status>0?(o.$notification.success({message:"支付成功！"}),setTimeout((function(){o.visible=!1}),1e3)):o.is_loop&&o.setTimeoutPayInfo(e)}))},handleOk:function(e){this.visible=!1,this.is_loop=!1}},Object(m["a"])(i,"handleCancel",(function(e){console.log("Clicked cancel button"),this.visible=!1,this.is_loop=!1})),Object(m["a"])(i,"goPay",(function(){this.compute_type=2,this.handleSubmit()})),Object(m["a"])(i,"choose_room_data",(function(e,o,t){var i=this.roomList[o];console.log("roomValue",i),this.isClickChoose?(1==i["pitch_type"]?(i["pitch_type"]=0,this.choose_room[o]=0,this.$set(this.roomList,o,i)):(i["pitch_type"]=1,this.choose_room[o]=t,this.$set(this.roomList,o,i)),this.compute_type=1,this.handleSubmit()):console.log("其他点击事件")})),Object(m["a"])(i,"munus_period",(function(e){var o=this;this.isClickChoose=!1;var t=JSON.parse(JSON.stringify(this.roomList)),i=t[e]["room_num"]?t[e]["room_num"]:0;t[e]["room_num"]=i<=1?0:i-1,this.roomList=t,console.log("munus_period+",this.roomList),this.$forceUpdate,this.compute_type=1,this.handleSubmit(),setTimeout((function(){o.isClickChoose=!0}),500)})),Object(m["a"])(i,"plus_period",(function(e){var o=this;this.isClickChoose=!1;var t=JSON.parse(JSON.stringify(this.roomList)),i=t[e]["room_num"]?t[e]["room_num"]:0,a=i+1;t[e]["room_num"]=a,this.roomList=t,console.log("plus_period-",this.roomList),this.$forceUpdate,this.compute_type=1,this.handleSubmit(),setTimeout((function(){o.isClickChoose=!0}),500)})),i)},y=p,g=(t("d789"),t("2877")),l=Object(g["a"])(y,a,r,!1,null,null,null);o["default"]=l.exports},eaa0:function(e,o){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzA5NTkzNzdFMUZGMTFFQTk4REY4MEI2QjgxRjdEQ0QiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzA5NTkzNzhFMUZGMTFFQTk4REY4MEI2QjgxRjdEQ0QiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozMDk1OTM3NUUxRkYxMUVBOThERjgwQjZCODFGN0RDRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozMDk1OTM3NkUxRkYxMUVBOThERjgwQjZCODFGN0RDRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmF/kyUAAADOSURBVHja7NpBCsIwFIThUYTuxEuI3qD1Gt6zPYC41xu0d+jG2my6iu9hT1BUTPgHpmQTeF+yC1WMUda9tbYOMZ0M88w+u1b2OUi6W3dKMw9r5ZDaFmelncYhgy22iUOCQ6IyyFqZBAgQIECAAAECBAgQIECAAHlns3Rj27bq+/7jAxVFobIsf3cjIYSvnOw0TYv28YoCBAgQIECAAAECBAgQIECA/C/kmYEjOOSaAeTiryhHW9yU9m9OJ7+RzlpZG+uYEGCcZ/bZu5cAAwChK/OFNzH8AQAAAABJRU5ErkJggg=="},f1cd:function(e,o){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAGFBMVEVHcEz////////39/f////a2trOzs7BwcHqTP0xAAAABHRSTlMAJq38IPEgWwAAAGRJREFUeAFjYFR2wQaMBBiEXbADQwYVHDJODCY4ZJwZXHCBYS0TZoJDxrk8ZVjJuGCVMQaB8mQQiSrjWo4AJSgy7jhlnNNAoLwMRIZgdduICeuQEZB/MAHu0gV3iYS7FMNd8gEA0jtWBbgpX8MAAAAASUVORK5CYII="}}]);