(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d1ab0270"],{4892:function(t,o,e){"use strict";e.r(o);var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("a-modal",{attrs:{title:t.title,width:1e3,visible:t.visible,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel}},[e("template",{slot:"footer"},[e("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")])],1),e("div",[e("a-tabs",{attrs:{"default-active-key":"system"},on:{change:t.callback}},[e("a-tab-pane",{key:"system",attrs:{tab:"平台优惠券"}},[e("a-form",{staticStyle:{"margin-bottom":"10px"},attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",[e("a-form-item",{attrs:{label:"券名称"}},[e("a-input-group",{attrs:{compact:""}},[e("a-input",{staticStyle:{width:"235px"},attrs:{"allow-clear":""},model:{value:t.queryParam.keyword,callback:function(o){t.$set(t.queryParam,"keyword",o)},expression:"queryParam.keyword"}})],1)],1),e("a-form-item",[e("a-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary",icon:"search"},on:{click:function(o){return t.searchBtn()}}},[t._v("查询")])],1)],1)],1)],1),e("a-spin",{attrs:{spinning:t.confirmLoading}},[e("a-table",{attrs:{columns:t.columns,"data-source":t.searchHotList,pagination:t.pagination,rowKey:"id"},on:{change:t.tableChange},scopedSlots:t._u([t._l(["sort"],(function(o){return{key:o,fn:function(n,a,r){return[e("div",{key:o},[[t._v(" "+t._s(n)+" ")]],2)]}}})),{key:"action",fn:function(o,n){return e("span",{},[0==n.is_choose?e("a",{on:{click:function(o){return t.select_this(n)}}},[t._v("选中")]):t._e(),1==n.is_choose?e("a",{staticStyle:{color:"#777777"},on:{click:function(o){return t.unselect_this(n)}}},[t._v("取消")]):t._e()])}}],null,!0)})],1)],1),e("a-tab-pane",{key:"merchant",attrs:{tab:"商家优惠券","force-render":""}},[e("a-form",{staticStyle:{"margin-bottom":"10px"},attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",[e("a-form-item",{attrs:{label:"券名称"}},[e("a-input-group",{attrs:{compact:""}},[e("a-input",{staticStyle:{width:"235px"},attrs:{"allow-clear":""},model:{value:t.queryParam.keyword,callback:function(o){t.$set(t.queryParam,"keyword",o)},expression:"queryParam.keyword"}})],1)],1),e("a-form-item",[e("a-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary",icon:"search"},on:{click:function(o){return t.searchBtn()}}},[t._v("查询")])],1)],1)],1)],1),e("a-spin",{attrs:{spinning:t.confirmLoading}},[e("a-table",{attrs:{columns:t.columns,"data-source":t.searchHotList,pagination:t.pagination,rowKey:"id"},on:{change:t.tableChange},scopedSlots:t._u([t._l(["sort"],(function(o){return{key:o,fn:function(n,a,r){return[e("div",{key:o},[[t._v(" "+t._s(n)+" ")]],2)]}}})),{key:"action",fn:function(o,n){return e("span",{},[0==n.is_choose?e("a",{on:{click:function(o){return t.select_this(n)}}},[t._v("选中")]):t._e(),1==n.is_choose?e("a",{staticStyle:{color:"#777777"},on:{click:function(o){return t.unselect_this(n)}}},[t._v("取消")]):t._e()])}}],null,!0)})],1)],1)],1)],1)],2)},a=[],r=e("65eb"),s=[],c={data:function(){return{title:"选择优惠券",searchHotList:s,queryParam:{page:1,pageSize:10,keyword:"",coupon_type:"system"},pagination:{current:1,pageSize:8,total:8,"show-total":function(t){return"共 ".concat(t," 条记录")}},editingKey:"",visible:!1,confirmLoading:!1,form:this.$form.createForm(this),detail:{id:0,name:"",sort:0,is_hot:"0"},id:"0"}},computed:{columns:function(){var t=this.sortedInfo,o=this.filteredInfo;t=t||{},o=o||{};var e=[{title:"券名称",dataIndex:"name"},{title:"券类型",dataIndex:"cate_name"},{title:"优惠金额",dataIndex:"discount"},{title:"门槛条件金额",dataIndex:"order_money"},{title:"上架有效期",dataIndex:"expire_date"},{title:"库存",dataIndex:"stock_str"},{title:"操作",dataIndex:"",scopedSlots:{customRender:"action"}}];return e}},mounted:function(){this.getSearchHotList()},methods:{searchBtn:function(){this.page=1,this.pagination.current=this.page,this.getSearchHotList()},callback:function(t){this.queryParam.coupon_type=t,this.queryParam.page=1,this.queryParam.keyword="",this.pagination.current=1,this.getSearchHotList()},select_this:function(t){var o=this;console.log(t),t.is_choose=1,this.request(r["a"].addBrandCoupon,{coupon_id:t.coupon_id,coupon_type:t.coupon_type}).then((function(t){o.$message.success("选中成功")}))},unselect_this:function(t){var o=this;console.log(t),t.is_choose=0,this.request(r["a"].delBrandCoupon,{coupon_id:t.coupon_id,coupon_type:t.coupon_type}).then((function(t){o.$message.success("取消成功")}))},getSearchHotList:function(){var t=this;this.request(r["a"].chooseBrandSelectCoupon,this.queryParam).then((function(o){console.log("res",o),t.searchHotList=o.list,t.pagination.total=o.total}))},tableChange:function(t,o,e){this.queryParam["pageSize"]=t.pageSize,t.current&&t.current>0&&(this.queryParam["page"]=t.current,this.pagination.current=t.current,this.getSearchHotList())},handleCancel:function(){this.visible=!1,this.id="0",this.form=this.$form.createForm(this),this.$emit("ok",{})},add:function(){this.visible=!0,this.id="0",this.detail={id:0,name:"",sort:0,is_hot:"0"}}}},i=c,u=e("2877"),l=Object(u["a"])(i,n,a,!1,null,null,null);o["default"]=l.exports},"65eb":function(t,o,e){"use strict";var n={getConfig:"/common/platform.system.config/getConfig",saveConfig:"/common/platform.system.config/saveConfig",getSearchHotWords:"/common/platform.coupon/getSearchHotWords",getWordDetail:"/common/platform.coupon/getWordDetail",saveWords:"/common/platform.coupon/saveWords",saveWordsSort:"/common/platform.coupon/saveWordsSort",delWords:"/common/platform.coupon/delWords",getBrandSelectCoupon:"/common/platform.coupon/getBrandSelectCoupon",chooseBrandSelectCoupon:"/common/platform.coupon/chooseBrandSelectCoupon",addBrandCoupon:"/common/platform.coupon/addBrandCoupon",delBrandCoupon:"/common/platform.coupon/delBrandCoupon",sysCouponUseRecords:"/common/platform.coupon/sysCouponUseRecords",sysCouponGetRecords:"/common/platform.coupon/sysCouponGetRecords",exportSysGetRecords:"/common/platform.coupon/exportSysGetRecords",merCouponUseRecords:"/merchant/merchant.coupon/merCouponUseRecords",merCouponGetRecords:"/merchant/merchant.coupon/merCouponGetRecords",exportMerGetRecords:"/merchant/merchant.coupon/exportMerGetRecords",getStoreList:"/merchant/merchant.store/getStoreList",updateUse:"/merchant/merchant.coupon/updateUse"};o["a"]=n}}]);