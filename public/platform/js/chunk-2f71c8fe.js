(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f71c8fe"],{"2ab4":function(t,e,a){"use strict";var i={verification:"life_tools/storestaff.LifeToolsAppoint/verification",verifyList:"life_tools/storestaff.LifeToolsAppoint/verifyList",sportsVerification:"life_tools/storestaff.LifeToolsSports/verification",sportsVerifyList:"life_tools/storestaff.LifeToolsSports/verifyList",scenicVerification:"life_tools/storestaff.LifeToolsScenic/verification",scenicVerifyList:"life_tools/storestaff.LifeToolsScenic/verifyList",getCardOrderDetail:"life_tools/storestaff.LifeToolsScenic/getCardOrderDetail",getScenic:"life_tools/storestaff.LifeToolsScenic/getScenic",getTicket:"life_tools/storestaff.LifeToolsScenic/getTicket",confirmPrice:"life_tools/storestaff.LifeToolsOrder/confirm",saveOrde:"life_tools/storestaff.LifeToolsOrder/saveOrder",goPay:"life_tools/storestaff.LifeToolsOrder/goPay",getScenicOrderList:"/life_tools/storestaff.LifeToolsScenic/getOrderList",exportToolsOrder:"/life_tools/storestaff.LifeToolsScenic/exportToolsOrder",getScenicOrderDetail:"/life_tools/storestaff.LifeToolsScenic/getOrderDetail",agreeScenicOrderRefund:"/life_tools/storestaff.LifeToolsScenic/agreeRefund",refuseScenicOrderRefund:"/life_tools/storestaff.LifeToolsScenic/refuseRefund",sportsTimeCardVerifyOrderDetail:"/life_tools/storestaff.LifeToolsScenic/getCardOrderDetail"};e["a"]=i},"3ea7":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[e("a-row",{staticStyle:{"margin-top":"10px"}},[e("a-col",{attrs:{span:24}},[e("a-input-group",{attrs:{compact:""}},[e("label",{staticStyle:{"line-height":"30px","margin-left":"15px"}},[t._v("搜索：")]),e("a-select",{staticStyle:{width:"100px"},attrs:{value:t.queryParams.ft},on:{change:t.selectSearchBy}},t._l(t.searchBy,(function(a){return e("a-select-option",{key:a.key},[t._v(" "+t._s(a.value)+" ")])})),1),e("a-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入"+t.searchByMap[t.queryParams.ft],value:t.queryParams.fv},on:{change:t.keywordsChange}}),e("label",{staticStyle:{"line-height":"30px","margin-left":"20px"}},[t._v("选择日期：")]),e("a-select",{staticStyle:{width:"100px"},attrs:{value:t.queryParams.date_by},on:{change:t.selectDateBy}},t._l(t.dateBy,(function(a){return e("a-select-option",{key:a.key},[t._v(" "+t._s(a.value)+" ")])})),1),e("a-range-picker",{on:{change:t.selectDate}}),"1"==t.tabKey?e("blockquote",[e("label",{staticStyle:{"line-height":"30px","margin-left":"20px"}},[t._v("订单类型：")]),e("a-select",{staticStyle:{width:"100px"},attrs:{value:t.queryParams.order_type},on:{change:t.selectOrderType}},t._l(t.orderType,(function(a){return e("a-select-option",{key:a.key},[t._v(" "+t._s(a.value)+" ")])})),1)],1):t._e(),"2"==t.tabKey?e("blockquote",[e("label",{staticStyle:{"line-height":"30px","margin-left":"20px"}},[t._v("次卡类型：")]),e("a-select",{staticStyle:{width:"100px"},attrs:{options:t.toolsType,placeholder:"请选择"},model:{value:t.queryParams.tools_type,callback:function(e){t.$set(t.queryParams,"tools_type",e)},expression:"queryParams.tools_type"}})],1):t._e(),e("a-button",{staticStyle:{width:"80px","margin-left":"20px"},attrs:{type:"primary"},on:{click:t.searchBtn}},[t._v("搜索")])],1)],1)],1),e("a-row",{staticClass:"mt-20"},[e("a-tabs",{on:{change:t.tabsChange},model:{value:t.tabKey,callback:function(e){t.tabKey=e},expression:"tabKey"}},[e("a-tab-pane",{key:"1",attrs:{tab:"门票"}},[e("a-table",{staticStyle:{background:"#ffffff"},attrs:{columns:t.columns,rowKey:"order_id","data-source":t.dataList,pagination:t.pagination},on:{change:t.changePage},scopedSlots:t._u([{key:"time",fn:function(a,i){return e("span",{},[t._v(" "+t._s(i.appoint.start_time_text)+" ~ "+t._s(i.appoint.end_time_text)+" ")])}}])})],1),e("a-tab-pane",{key:"2",attrs:{tab:"次卡"}},[e("a-table",{staticStyle:{background:"#ffffff"},attrs:{columns:t.timeCardColumns,rowKey:"order_id","data-source":t.timeCardList,pagination:t.timeCardPagination},on:{change:t.timeCardChangePage},scopedSlots:t._u([{key:"action",fn:function(a,i){return[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.getTimeCardDetail(i.order_id)}}},[t._v("详情")])]}}])})],1)],1)],1),e("a-modal",{attrs:{visible:t.modalVisible,width:"60%",bodyStyle:{maxHeight:"700px",overflowY:"auto"},title:"核销详情"},on:{cancel:function(e){t.modalVisible=!1},ok:function(e){t.modalVisible=!1}}},[e("a-descriptions",{staticClass:"card-detail",attrs:{title:"基本信息",column:2}},[e("a-descriptions-item",{attrs:{label:"订单编号"}},[t._v(" "+t._s(t.timeCardDetail.orderid||"-")+" ")]),e("a-descriptions-item",{attrs:{label:"订单类型"}},[t._v(" "+t._s(t.timeCardDetail.type_name||"-")+" ")]),e("a-descriptions-item",{attrs:{label:"次卡名称"}},[t._v(" "+t._s(t.timeCardDetail.title||"-")+" ")]),e("a-descriptions-item",{attrs:{label:"商家名称"}},[t._v(" "+t._s(t.timeCardDetail.merchant_name||"-")+" ")]),e("a-descriptions-item",{attrs:{label:"订单状态"}},[t._v(" "+t._s(t.timeCardDetail.order_status_val||"-")+" ")]),e("a-descriptions-item",{attrs:{label:"下单数量"}},[t._v(" "+t._s(t.timeCardDetail.num||"-")+" ")]),e("a-descriptions-item",{attrs:{label:"下单时间"}},[t._v(" "+t._s(t.timeCardDetail.add_time_text||"-")+" ")]),e("a-descriptions-item",{attrs:{label:"过期时间"}},[t._v(" "+t._s(t.timeCardDetail.out_time||"-")+" ")]),e("a-descriptions-item",{attrs:{label:"可使用次数/总次数"}},[t._v(t._s(t.timeCardDetail.all_num)+" / "+t._s(t.timeCardDetail.total_num)+" ")])],1),e("a-descriptions",{staticClass:"card-detail",attrs:{title:"用户信息",column:1}},[e("a-descriptions-item",{attrs:{label:"下单用户昵称"}},[t._v(" "+t._s(t.timeCardDetail.nickname||"-")+" ")]),e("a-descriptions-item",{attrs:{label:"下单用户手机号"}},[t._v(" "+t._s(t.timeCardDetail.phone||"-")+" ")])],1),e("a-descriptions",{staticClass:"card-detail",attrs:{title:"价格信息",column:1}},[e("a-descriptions-item",{attrs:{label:"订单总价格"}},[t._v(" "+t._s(t.currency)+t._s(t.timeCardDetail.total_price||0)+" ")]),e("a-descriptions-item",{attrs:{label:"在线支付金额"}},[t._v(" "+t._s(t.currency)+t._s(t.timeCardDetail.pay_money||0)+" ")]),e("a-descriptions-item",{attrs:{label:"平台余额支付金额"}},[t._v(" "+t._s(t.currency)+t._s(t.timeCardDetail.system_balance||0)+" ")]),e("a-descriptions-item",{attrs:{label:"商家余额支付金额"}},[t._v(" "+t._s(t.currency)+t._s(t.timeCardDetail.merchant_balance_pay||0)+" ")]),e("a-descriptions-item",{attrs:{label:"商家赠送余额支付金额"}},[t._v(" "+t._s(t.currency)+t._s(t.timeCardDetail.merchant_balance_give||0)+" ")])],1),e("template",{slot:"footer"},[e("a-button",{attrs:{type:"primary"},on:{click:function(e){t.modalVisible=!1}}},[t._v(" 确定 ")])],1)],2)],1)},s=[],r=a("8ee2"),o=a("2ab4"),l={data:function(){return{currency:"￥",queryParams:{ft:1,fv:"",stime:"",etime:"",page_size:10,date_by:1,order_type:"all",tools_type:void 0},searchBy:[{key:1,value:"订单号"},{key:2,value:"活动名称"},{key:3,value:"手机号"},{key:4,value:"景区名称"}],searchByMap:{1:"订单号",2:"用户昵称",3:"手机号"},dateBy:[{key:1,value:"下单日期"},{key:2,value:"核销日期"}],orderType:[{key:"all",value:"全部"},{key:"stadium",value:"体育馆"},{key:"course",value:"体育课程"},{key:"sports_activity",value:"运动约战"}],store_id:0,dataList:[],isAllCheck:!1,pagination:{pageSize:10,total:0,current:1,page:1},columns:[{title:this.L("订单号"),dataIndex:"orderid"},{title:this.L("订单名称"),dataIndex:"title"},{title:this.L("用户昵称"),dataIndex:"nickname"},{title:this.L("用户手机号"),dataIndex:"phone"},{title:this.L("数量"),dataIndex:"num"},{title:this.L("总价"),dataIndex:"total_price"},{title:this.L("订单状态"),dataIndex:"order_status_text"},{title:this.L("下单时间"),dataIndex:"add_time_text"},{title:this.L("核销时间"),dataIndex:"verify_time_text"}],tabKey:"1",timeCardColumns:[{title:this.L("订单号"),dataIndex:"orderid"},{title:this.L("次卡名称"),dataIndex:"title"},{title:this.L("用户昵称"),dataIndex:"nickname"},{title:this.L("用户手机号"),dataIndex:"phone"},{title:this.L("核销店员"),dataIndex:"staff_name"},{title:this.L("下单时间"),dataIndex:"add_time_text"},{title:this.L("核销时间"),dataIndex:"verify_time_text"},{title:this.L("操作"),dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],timeCardList:[],timeCardPagination:{pageSize:10,total:0,current:1,page:1},modalVisible:!1,timeCardDetail:"",toolsType:[{value:"scenic",label:"景区"},{value:"stadium",label:"场馆"},{value:"course",label:"课程"}]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.queryParams.page_size=1==this.tabKey?this.pagination.pageSize:this.timeCardPagination.pageSize,this.queryParams.page=1==this.tabKey?this.pagination.current:this.timeCardPagination.current,this.queryParams.type=1==this.tabKey?"ticket":"card";var e=Object(r["a"])(Object(r["a"])({},this.queryParams),{},{tools_type:this.queryParams.tools_type?this.queryParams.tools_type:""});this.request(o["a"].sportsVerifyList,e).then((function(e){1==t.tabKey?(t.dataList=e.data,t.pagination.total=e.total):(t.timeCardList=e.data,t.timeCardPagination.total=e.total)}))},keywordsChange:function(t){this.queryParams.fv=t.target.value},selectSearchBy:function(t){this.queryParams.ft=t},searchBtn:function(){1==this.tabKey?this.pagination.current=1:this.timeCardPagination.current=1,this.getData()},selectDate:function(t,e){this.queryParams.stime=e[0],this.queryParams.etime=e[1]},changePage:function(t,e){this.pagination.current=t.current,this.getData()},onSearch:function(t){this.queryParam.fv=t},searchByChange:function(t){this.queryParam.ft=t},selectDateBy:function(t){this.queryParams.date_by=t},selectOrderType:function(t){this.queryParams.order_type=t},tabsChange:function(t){(1==this.tabKey&&!this.dataList.length||2==this.tabKey&&!this.timeCardList.length)&&this.getData()},timeCardChangePage:function(t,e){this.timeCardPagination.current=t.current,this.getData()},getTimeCardDetail:function(t){var e=this;this.request(o["a"].sportsTimeCardVerifyOrderDetail,{order_id:t}).then((function(t){e.timeCardDetail=t,e.modalVisible=!0}))}}},n=l,c=(a("9d09"),a("0b56")),d=Object(c["a"])(n,i,s,!1,null,"4ebffa34",null);e["default"]=d.exports},"680c":function(t,e,a){},"9d09":function(t,e,a){"use strict";a("680c")}}]);