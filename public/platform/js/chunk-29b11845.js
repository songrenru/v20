(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29b11845","chunk-d59f1386"],{"2e15":function(e,t,a){},"78bd":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:e.handleCancel}},[e._v(" 取消 ")]),e.isShow?a("a-button",{key:"submit",attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.handleSubmit}},[e._v(" 确定 ")]):e._e()],1),a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{staticClass:"rule_info",attrs:{form:e.form}},[a("div",[a("h3",{staticStyle:{"margin-left":"3.5%","margin-bottom":"2%",display:"block","font-weight":"900"}},[e._v("基本设置")])]),e.isSpecialSelect?a("div",[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title",staticStyle:{width:"23.5%"}},[a("span",{staticClass:"label_col"},[e._v("收费科目")])]),a("div",{staticClass:"input_container"},[a("a-select",{staticStyle:{width:"182px"},on:{change:e.handleChargeNumberChange},model:{value:e.subjectId,callback:function(t){e.subjectId=t},expression:"subjectId"}},e._l(e.chargeNumber,(function(t){return a("a-select-option",{key:t.id},[e._v(e._s(t.name))])})),1)],1)])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title",staticStyle:{width:"23.5%"}},[a("span",{staticClass:"label_col"},[e._v("收费项目")])]),a("div",{staticClass:"input_container"},[a("a-select",{staticStyle:{width:"182px"},on:{change:e.handleChargeProjectChange},model:{value:e.charge_project_id,callback:function(t){e.charge_project_id=t},expression:"charge_project_id"}},e._l(e.chargeProject,(function(t){return a("a-select-option",{key:t.id},[e._v(e._s(t.name))])})),1)],1)])])],1):e._e(),e.isSpecial?a("div",[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show.is_bill_create_set,expression:"show.is_bill_create_set"}],attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("账单生成周期设置")])]),a("div",{staticClass:"input_container"},[a("a-select",{staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled},on:{change:e.billCreateSetChange},model:{value:e.post.bill_create_set,callback:function(t){e.$set(e.post,"bill_create_set",t)},expression:"post.bill_create_set"}},e._l(e.cycle_array,(function(t){return a("a-select-option",{key:t.key},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("div",{staticClass:"label_desc"})])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("收费标准名称")])]),a("div",{staticClass:"input_container"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.charge_name",{initialValue:e.post.charge_name,rules:[{required:!0,message:e.L("请输入名称！")}]}],expression:"['post.charge_name',{ initialValue: post.charge_name,rules: [{ required: true, message: L('请输入名称！') }] }]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,maxLength:30,placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"})])]),e.show.is_fees_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("计费模式")])]),a("div",{staticClass:"input_container"},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.fees_type",{initialValue:e.post.fees_type}],expression:"['post.fees_type', {initialValue:post.fees_type}]"}],attrs:{disabled:e.is_disabled},on:{change:e.feesTypeChange}},[a("a-radio",{attrs:{value:1}},[e._v(" 固定费用 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 单价*计量单位 ")])],1)],1),a("div",{staticClass:"label_desc"})])]):e._e(),e.show.is_unit_gage?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("计量单位")])]),a("div",{staticClass:"input_container"},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.unit_gage_type",{initialValue:e.post.unit_gage_type}],expression:"['post.unit_gage_type', {initialValue:post.unit_gage_type}]"}],attrs:{disabled:e.is_disabled},on:{change:e.unitGageChange}},[a("a-radio",{attrs:{value:1}},[e._v(" 房屋面积 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 自定义 ")])],1),e.unit_gage_txt_status?a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.unit_gage_txt",{initialValue:e.post.unit_gage_txt}],expression:"['post.unit_gage_txt',{ initialValue: post.unit_gage_txt}]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,maxLength:8,placeholder:"输入计量单位"}}):e._e()],1),a("div",{staticClass:"label_desc"},[e._v(" 根据收费项具体计算方式选择对应的计量单位，若不满足，则可自定义，例如楼道面积、走廊面积等，自定义的计量单位在绑定费用至房间/车位时需要填写对应的数值 ")])])]):e._e(),e.show.is_charge_price?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("收费金额")])]),a("div",{staticClass:"input_container"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.charge_price",{initialValue:e.post.charge_price,rules:[{required:!0,message:e.L("请输入金额！")}]}],expression:"['post.charge_price',{ initialValue: post.charge_price,rules: [{ required: true, message: L('请输入金额！') }] }]"}],staticStyle:{width:"182px"},attrs:{oninput:"value=value.replace(/[^\\d.]/g, '').replace(/\\.{2,}/g, '.').replace('.', '$#$').replace(/\\./g, '').replace('$#$', '.').replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/, '$1$2.$3').replace(/^\\./g, '')",disabled:e.is_disabled,min:0,maxLength:10,placeholder:"请输入"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.show.is_bill_create_set,expression:"show.is_bill_create_set"}]},[e._v(e._s(e.measure))])],1),a("div",{staticClass:"label_desc"},[e._v(" 固定收费金额，每次生成应收账单固定的收款金额 ")])])]):e._e(),e.show.is_cyclicity_type_set?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("周期性费用设置")])]),a("div",{staticClass:"input_container"},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.is_cyclicity_type_set",{initialValue:e.post.is_cyclicity_type_set}],expression:"['post.is_cyclicity_type_set', {initialValue:post.is_cyclicity_type_set}]"}],attrs:{disabled:e.is_disabled},on:{change:e.cyclicityTypeChange}},[a("a-radio",{attrs:{value:0}},[e._v(" 无限期 ")]),a("a-radio",{attrs:{value:1}},[e._v(" 自定义 ")])],1),e.cyclicity_set_txt_status?a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.cyclicity_set",{initialValue:e.post.cyclicity_set}],expression:"['post.cyclicity_set',{ initialValue: post.cyclicity_set}]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,min:1,placeholder:"请输入周期数"}}):e._e()],1),a("div",{staticClass:"label_desc"},[e._v(" 根据实际收费情况进行设置，若是需要业主一直缴纳则是无限期；若是仅需缴纳一段时间的费用，则自定收费周期即可 ")])])]):e._e(),e.show.is_bill_arrears_set?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("账单欠费模式")])]),a("div",{staticClass:"input_container"},[a("a-select",{staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled},on:{change:e.billArrearsSetChange},model:{value:e.post.bill_arrears_set,callback:function(t){e.$set(e.post,"bill_arrears_set",t)},expression:"post.bill_arrears_set"}},e._l(e.arrears_array,(function(t){return a("a-select-option",{key:t.key},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("div",{staticClass:"label_desc"},[e._v(" 预生成即表示在账单开始时间生成应收账单，后生成即在账单结束时间生成应收账单 ")])])]):e._e(),e.show.is_bill_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("生成账单模式")])]),a("div",{staticClass:"input_container"},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.bill_type",{initialValue:e.post.bill_type}],expression:"['post.bill_type', {initialValue:post.bill_type}]"}],attrs:{disabled:e.is_disabled}},[a("a-radio",{attrs:{value:1}},[e._v(" 手动生成 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 自动生成 ")])],1)],1),a("div",{staticClass:"label_desc"},[e._v(" 手动生成账单需手动操作给收费对象生成应缴账单，一般用于停车费的收取；自动生成账单则系统根据账单开始生成时间自动生成账单 ")])])]):e._e(),e.show.is_unit_price?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("单价")])]),a("div",{staticClass:"input_container"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.unit_price",{initialValue:e.post.unit_price,rules:[{required:!0,message:e.L("请输入单价！")}]}],expression:"['post.unit_price',{ initialValue: post.unit_price,rules: [{ required: true, message: L('请输入单价！') }] }]"}],staticStyle:{width:"182px"},attrs:{oninput:"value=value.replace(/[^\\d.]/g, '').replace(/\\.{2,}/g, '.').replace('.', '$#$').replace(/\\./g, '').replace('$#$', '.').replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/, '$1$2.$3').replace(/^\\./g, '')",disabled:e.is_disabled,min:0,maxLength:10,placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 设置计费的单价 ")])])]):e._e(),e.show.is_unit_price?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("单位")])]),a("div",{staticClass:"input_container"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.measure_unit",{initialValue:e.post.measure_unit}],expression:"['post.measure_unit',{ initialValue: post.measure_unit }]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 不填默认元/度 ")])])]):e._e(),e.show.is_rate?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("倍率")])]),a("div",{staticClass:"input_container"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.rate",{initialValue:e.post.rate}],expression:"['post.rate',{ initialValue: post.rate }]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,min:1,max:100,placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 不填默认1倍 ")])])]):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("是否支持预缴")])]),a("div",{staticClass:"input_container"},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.is_prepaid",{initialValue:e.post.is_prepaid}],expression:"['post.is_prepaid', {initialValue:post.is_prepaid}]"}],attrs:{disabled:e.show.is_prepaid_disabled},on:{change:e.onChange_is_prepaid}},[a("a-radio",{attrs:{value:1}},[e._v(" 是 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 否 ")])],1)],1),a("div",{staticClass:"label_desc"},[e._v(" 用户可提前预缴收费项，可设置预缴的优惠方案 ")])])]),e.show.is_prepaid_button?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("预缴周期管理")])]),a("div",{staticClass:"input_container"},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.prepaidModel.List(e.post.id,1,e.post.bill_create_set,e.isShow)}}},[e._v(" 管理 ")])],1),a("div",{staticClass:"label_desc"},[e._v(" 可管理用户预缴费用的缴费方案 ")])])]):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("未入住房屋折扣")])]),a("div",{staticClass:"input_container"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.not_house_rate",{initialValue:e.post.not_house_rate}],expression:"['post.not_house_rate',{ initialValue: post.not_house_rate }]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,min:0,max:100,formatter:function(e){return e+" %"},placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 房屋无人入住的状态下及没有绑定车辆的未使用车位可设置应收费用优惠折扣（以百分比计算，请输入0-100），例如输入80，则按80%进行收取，即100元仅需缴纳80元，优惠掉20元 ")])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("费用标准生效时间")])]),a("div",{staticClass:"input_container"},[a("a-date-picker",{attrs:{mode:e.date_status,format:e.dateFormat,disabled:e.is_disabled,placeholder:"请选择时间",open:e.isOpen},on:{panelChange:e.selectYear,openChange:function(t){return e.onOpenChange(t,"isOpen")}},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 设置后，生成应收账单的费用将根据正在生效的费用标准计算 ")])])]),a("div",[a("h3",{staticStyle:{"margin-left":"3.5%","font-weight":"900",display:"block",padding:"28px 0 10px 0"}},[e._v("滞纳金设置")])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_two"},[a("span",{staticClass:"label_col"},[e._v("计算时间")])]),a("div",{staticClass:"input_container_two"},[e._v(" 账单生成后 "),a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.late_fee_reckon_day",{initialValue:e.post.late_fee_reckon_day}],expression:"['post.late_fee_reckon_day',{ initialValue: post.late_fee_reckon_day }]"}],attrs:{disabled:e.is_disabled,min:1,max:100,placeholder:"请输入"}}),e._v("（天）开始计算滞纳金 ")],1)])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_two"},[a("span",{staticClass:"label_col"},[e._v("费用收取封顶天数")])]),a("div",{staticClass:"input_container_two"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.late_fee_top_day",{initialValue:e.post.late_fee_top_day}],expression:"['post.late_fee_top_day',{ initialValue: post.late_fee_top_day }]"}],attrs:{disabled:e.is_disabled,min:1,max:100,placeholder:"请输入"}}),e._v("不填为不限制，一直计算到用户缴纳费用 ")],1)])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_two"},[a("span",{staticClass:"label_col"},[e._v("滞纳金收取比例（每天）")])]),a("div",{staticClass:"input_container_two"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.late_fee_rate",{initialValue:e.post.late_fee_rate}],expression:"['post.late_fee_rate',{ initialValue: post.late_fee_rate }]"}],staticStyle:{width:"150px"},attrs:{disabled:e.is_disabled,oninput:"value=value.replace(/[^\\d.]/g, '').replace(/\\.{2,}/g, '.').replace('.', '$#$').replace(/\\./g, '').replace('$#$', '.').replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/, '$1$2.$3').replace(/^\\./g, '')",min:0,max:100,formatter:function(e){return e+" %"},placeholder:"请输入百分比"}}),e._v(" 百分比0-100，例如输入2，则每日按应收费用的2%比例收取滞纳金，即100元应收费用，每天滞纳金为2元 ")],1)])])],1):e._e()])],1),a("prepaidList",{ref:"prepaidModel",on:{ok:e.prepaidList}})],2)},s=[],l=a("c1df"),r=a.n(l),o=a("a0e0"),c=a("f51e"),n={components:{prepaidList:c["default"]},data:function(){return{title:"新建",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,cyclicity_set_txt_status:!1,unit_gage_txt_status:!1,measure:"/月",post:{id:0,charge_project_id:"",charge_name:"",unit_price:"",rate:"",not_house_rate:"0",fees_type:1,unit_gage_type:1,unit_gage_txt:"",charge_price:"",is_cyclicity_type_set:0,cyclicity_set:"",bill_create_set:2,bill_arrears_set:2,bill_type:2,is_prepaid:2,charge_valid_time:"",late_fee_reckon_day:"",late_fee_top_day:"",late_fee_rate:"",status:"",measure_unit:"元/度"},show:{is_fees_type:!1,is_charge_price:!1,is_cyclicity_type_set:!1,is_bill_create_set:!1,is_bill_arrears_set:!1,is_bill_type:!1,is_unit_price:!1,is_rate:!1,is_prepaid_disabled:!1,is_prepaid_button:!1,is_unit_gage:!1},cycle_array:[],arrears_array:[],is_disabled:!1,isOpen:!1,dateValue:null,date_status:"date",dateFormat:"YYYY-MM-DD",isSpecial:!0,isSpecialSelect:!1,chargeNumber:[],chargeProject:[],subjectId:"请选择科目",charge_project_id:"请选择项目",isShow:!0}},mounted:function(){},methods:{moment:r.a,selectYear:function(e,t){this.dateValue=e,this.isOpen=!1,console.log(e,t)},onOpenChange:function(e,t){this[t]=e},unitGageChange:function(e){var t=e.target.value;this.unit_gage_txt_status=2==t},feesTypeChange:function(e){var t=e.target.value;this.show.is_unit_gage=1!=t},onChange_is_prepaid:function(e){var t=e.target.value;this.show.is_prepaid_button=1==t},prepaidList:function(e){},cyclicityTypeChange:function(e){var t=e.target.value;this.cyclicity_set_txt_status=1==t},billCreateSetChange:function(e){switch(this.post.bill_create_set=e,e){case 1:this.measure="/日";break;case 2:this.measure="/月";break;case 3:this.measure="/年";break}},billArrearsSetChange:function(e){this.post.bill_arrears_set=e},add:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this.title="添加",this.visible=!0,0===t&&"special"===a?(this.getChargeNumber(),this.isSpecial=!1,this.isSpecialSelect=!0):(t>0&&(this.charge_project_id=t),console.log("收费项id=========",t),this.cyclicity_set_txt_status=!1,this.unit_gage_txt_status=!1,this.is_disabled=!1,this.isOpen=!1,this.dateValue=null,this.post={id:0,charge_project_id:"",charge_name:"",unit_price:"",rate:"",not_house_rate:"0",fees_type:1,unit_gage_type:1,unit_gage_txt:"",charge_price:"",is_cyclicity_type_set:0,cyclicity_set:"",bill_create_set:2,bill_arrears_set:2,bill_type:2,is_prepaid:2,charge_valid_time:"",late_fee_reckon_day:"",late_fee_top_day:"",late_fee_rate:"",status:"",measure_unit:"元/度"},this.confirmLoading=!0,this.request(o["a"].checkChargeRule,{charge_project_id:t}).then((function(t){t&&(e.show=t,t.titleName&&(e.title="添加 "+t.titleName+" 的标准"))})),this.request(o["a"].ChargeRuleBillParam).then((function(t){t&&(e.cycle_array=t.cycle_array,e.arrears_array=t.arrears_array)})),this.confirmLoading=!1)},edit:function(e){var t=this;this.title="编辑",this.visible=!0,this.post.id=e,this.confirmLoading=!0,this.request(o["a"].ChargeRuleBillParam).then((function(e){e&&(t.cycle_array=e.cycle_array,t.arrears_array=e.arrears_array)})),this.getEditInfo()},handleSubmit:function(){var e=this,t=new Date(this.dateValue),a=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),i=this.form.validateFields;if(this.post.id>0&&this.is_disabled)return this.$message.success("编辑成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,e.$emit("ok")}),1500),!1;this.confirmLoading=!0,i((function(t,i){if(t)e.confirmLoading=!1;else{var s=o["a"].ChargeRuleAdd;if(e.post.id>0?(s=o["a"].ChargeRuleSub,i.post.id=e.post.id):i.post.charge_project_id=e.charge_project_id,i.post.bill_create_set=e.post.bill_create_set,i.post.bill_arrears_set=e.post.bill_arrears_set,!a)return e.confirmLoading=!1,e.$message.error("请选择费用标准生效时间"),!1;i.post.charge_valid_time=a,e.request(s,i).then((function(t){e.post.id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,console.log(123),e.$emit("ok")}),1500),console.log(345)})).catch((function(t){e.confirmLoading=!1}))}}))},handleCancel:function(){var e=this;this.visible=!1,this.subjectId="请选择科目",this.charge_project_id="请选择项目",setTimeout((function(){e.id="0",e.form=e.$form.createForm(e)}),500)},getEditInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";this.request(o["a"].ChargeRuleEdit,{id:this.post.id,type:t}).then((function(t){t.show_data&&(e.show=t.show_data,e.show.titleName&&(e.title="编辑 "+e.show.titleName,t.edit_data.charge_name&&(e.title=e.title+" 的标准【"+t.edit_data.charge_name+"】"))),t.edit_data&&(e.post=t.edit_data,2==t.edit_data.is_prepaid&&(e.show.is_prepaid_button=!1),e.billCreateSetChange(t.edit_data.bill_create_set),e.dateValue=r()(t.edit_data.charge_valid_time,e.dateFormat)),t.edit_status&&(e.is_disabled=t.edit_status.is_disabled,e.is_disabled&&(e.show.is_prepaid_disabled=!0),e.unit_gage_txt_status=t.edit_status.unit_gage_txt_status,e.cyclicity_set_txt_status=t.edit_status.cyclicity_set_txt_status),e.confirmLoading=!1}))},handleChargeNumberChange:function(e){this.charge_project_id="请选择项目",this.getChargeProject(e)},getChargeNumber:function(){var e=this;this.request(o["a"].getChargeSubject).then((function(t){e.chargeNumber=t}))},getChargeProject:function(e){var t=this,a={subject_id:e};this.request(o["a"].getChargeProject,a).then((function(e){t.chargeProject=e}))},handleChargeProjectChange:function(e){this.isSpecial=!0,this.add(e)},detail:function(e){var t=this;this.title="查看",this.visible=!0,this.post.id=e,this.confirmLoading=!0,this.isShow=!1,this.request(o["a"].ChargeRuleBillParam).then((function(e){e&&(t.cycle_array=e.cycle_array,t.arrears_array=e.arrears_array)})),this.getEditInfo("del")}}},_=n,d=(a("c31e"),a("2877")),p=Object(d["a"])(_,i,s,!1,null,"3a76a72e",null);t["default"]=p.exports},8917:function(e,t,a){},c31e:function(e,t,a){"use strict";a("2e15")},d312:function(e,t,a){"use strict";a("8917")},f51e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:1100,footer:null,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("div",{staticClass:"message-suggestions-list-box"},[e.isShow?a("div",{staticClass:"add-box"},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.PopupAddModel.add(e.charge_rule_id,e.bill_date_set)}}},[e._v(" 添加 ")])],1)],1)],1):e._e(),a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination,loading:e.loading},on:{change:e.table_change},scopedSlots:e._u([{key:"status",fn:function(t,i){return a("span",{},[2==i.status?a("div",{staticStyle:{color:"red"}},[e._v("禁止")]):e._e(),1==i.status?a("div",{staticStyle:{color:"#1890ff"}},[e._v("开启")]):e._e(),4==i.status?a("div",{staticStyle:{color:"red"}},[e._v("已删除")]):e._e()])}},{key:"standard",fn:function(t,i){return a("span",{},[a("a",[e._v("绑定")])])}},{key:"action",fn:function(t,i){return a("span",{},[e.isShow?a("a",{on:{click:function(t){return e.$refs.PopupEditModel.edit(i.id,e.bill_date_set)}}},[e._v("编辑")]):e._e(),e.isShow?e._e():a("a",{staticStyle:{color:"#CCCCCC"}},[e._v("编辑")]),e.isShow?a("a-popconfirm",{staticClass:"ant-dropdown-link",staticStyle:{"margin-left":"20px"},attrs:{title:"确认删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.deleteConfirm(i.id)},cancel:e.cancel}},[a("a",{attrs:{href:"#"}},[e._v("删除")])]):e._e()],1)}}])}),a("prepaidInfo",{ref:"PopupAddModel",on:{ok:function(t){return e.addActive(e.charge_rule_id)}}}),a("prepaidInfo",{ref:"PopupEditModel",on:{ok:function(t){return e.editActive(e.charge_rule_id)}}})],1)])},s=[],l=(a("ac1f"),a("841c"),a("a0e0")),r=a("aa28"),o=[{title:"预缴周期",dataIndex:"cycle",key:"cycle"},{title:"优惠模式",dataIndex:"type_txt",key:"type_txt"},{title:"添加时间",dataIndex:"add_time",key:"add_time"},{title:"状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"action"}}],c=[],n={name:"prepaidList",filters:{},components:{prepaidInfo:r["default"]},data:function(){return{reply_content:"",pagination:{current:1,pageSize:10,total:10},search:{keyword:"",page:1},form:this.$form.createForm(this),visible:!1,loading:!1,data:c,columns:o,title:"",confirmLoading:!1,charge_rule_id:"",bill_date_set:2,isShow:!0}},methods:{List:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.title="预缴周期",this.loading=!0,this.isShow=s,1==a&&this.$set(this.pagination,"current",1),this.bill_date_set=i,this.charge_rule_id=t,this.search["bill_date_set"]=i,this.search["charge_rule_id"]=t,this.search["page"]=this.pagination.current,s||(this.search["type"]="del_detail"),this.request(l["a"].ChargePrepaidList,this.search).then((function(t){e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data=t.list,e.loading=!1,e.confirmLoading=!0,e.visible=!0}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.id="0",e.form=e.$form.createForm(e)}),500)},cancel:function(){},deleteConfirm:function(e){var t=this;this.request(l["a"].ChargePrepaidDel,{id:e}).then((function(e){t.List(t.charge_rule_id,1),t.$message.success("删除成功")}))},addActive:function(e){this.List(this.charge_rule_id,1)},editActive:function(e){this.List(this.charge_rule_id)},table_change:function(e){console.log("e",e),e.current&&e.current>0&&(this.$set(this.pagination,"current",e.current),this.List(this.charge_rule_id))}}},_=n,d=(a("d312"),a("2877")),p=Object(d["a"])(_,i,s,!1,null,null,null);t["default"]=p.exports}}]);