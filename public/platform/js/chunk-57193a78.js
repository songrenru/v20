(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57193a78","chunk-2d0b3786"],{"07be":function(t,e,a){"use strict";a("6453")},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var o=a("6b75");function n(t){if(Array.isArray(t))return Object(o["a"])(t)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function s(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var i=a("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return n(t)||s(t)||Object(i["a"])(t)||r()}},6453:function(t,e,a){},b4d4:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[a("a-row",[a("a-col",[a("a-button",{staticClass:"mr-20",attrs:{type:"primary"},on:{click:function(e){return t.editItem()}}},[t._v(t._s(t.L("新建子账号")))]),a("a-button",{staticClass:"mr-20",on:{click:function(e){return t.importExcel()}}},[t._v(t._s(t.L("批量新建")))]),a("a-button",{on:{click:function(e){return t.delItem()}}},[t._v(t._s(t.L("删除子账号")))])],1)],1),a("a-table",{staticClass:"mt-20",attrs:{rowKey:"id","row-selection":{selectedRowKeys:t.selectedRowKeys,onSelect:t.onSelect,onSelectAll:t.onSelectAll},columns:t.columns,"data-source":t.list,pagination:t.pagination},scopedSlots:t._u([{key:"mobile",fn:function(e){return a("span",{},[t._v(" "+t._s(e||"-")+" ")])}},{key:"station_name",fn:function(e){return a("span",{},[t._v(" "+t._s(e||"-")+" ")])}},{key:"status",fn:function(e){return a("span",{},[1==e?a("font",{staticClass:"font-blue"},[t._v(t._s(t.L("正常")))]):a("font",{staticClass:"font-red"},[t._v(t._s(t.L("禁止")))])],1)}},{key:"action",fn:function(e,o){return a("span",{},[a("span",{staticClass:"cr-primary pointer mr-20",on:{click:function(e){return t.editItem(o)}}},[t._v(t._s(t.L("编辑")))]),a("span",{staticClass:"cr-primary pointer font-gray",on:{click:function(e){return t.delItem(o)}}},[t._v(t._s(t.L("删除")))])])}}])}),a("a-modal",{attrs:{visible:t.modalVisible,title:t.modalTitle,destroyOnClose:!0,width:"40%",bodyStyle:{maxHeight:"650px",overflowY:"auto"}},on:{cancel:t.handleCancel,ok:t.handleOk}},[a("a-form-model",{attrs:{model:t.modalForm,"label-col":{span:8},"wrapper-col":{span:8}}},[a("a-form-model-item",{attrs:{label:t.L("账号名"),required:""}},[a("a-input",{attrs:{"allow-clear":"",placeholder:t.L("请输入")},model:{value:t.modalForm.account,callback:function(e){t.$set(t.modalForm,"account",e)},expression:"modalForm.account"}})],1),a("a-form-model-item",{attrs:{help:t.L("密码由字母、数字组成，长度8-15位"),label:t.L("密码"),required:""}},[a("a-input-password",{attrs:{"allow-clear":"",placeholder:t.modalForm.id?t.L("不修改则不填写"):t.L("请输入")},model:{value:t.modalForm.password,callback:function(e){t.$set(t.modalForm,"password",e)},expression:"modalForm.password"}})],1),a("a-form-model-item",{attrs:{label:t.L("手机号"),required:""}},[a("a-input",{attrs:{"allow-clear":"",placeholder:t.L("请输入")},model:{value:t.modalForm.mobile,callback:function(e){t.$set(t.modalForm,"mobile",e)},expression:"modalForm.mobile"}})],1),a("a-form-model-item",{attrs:{label:t.L("岗位")}},[a("a-select",{attrs:{allowClear:"",placeholder:t.L("请选择")},on:{popupScroll:t.popupScroll},model:{value:t.modalForm.station_id,callback:function(e){t.$set(t.modalForm,"station_id",e)},expression:"modalForm.station_id"}},t._l(t.stationsList,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.station_name))])})),1)],1),a("a-form-model-item",{attrs:{label:t.L("状态")}},[a("a-switch",{attrs:{"checked-children":t.L("正常"),"un-checked-children":t.L("禁止"),checked:1==t.modalForm.status},on:{change:t.switchChange}})],1)],1)],1),a("a-modal",{attrs:{visible:t.importExcelModalVisible,title:t.L("批量导入子账号"),okText:t.L("点击上传"),destroyOnClose:!0,footer:null,width:"40%",bodyStyle:{maxHeight:"650px",overflowY:"auto"}},on:{cancel:t.handleCancelImport}},[a("a-form-model",{attrs:{"label-col":{span:8},"wrapper-col":{span:8}}},[a("p",{staticStyle:{padding:"8px",background:"#FFF8F0","border-radius":"3px"}},[a("a-icon",{attrs:{type:"warning",theme:"twoTone",twoToneColor:"#FF8000"}}),t._v(" "+t._s(t.L("为防止导入失败，请仔细阅读模板内的注意事项。导入仅支持xls、xlsx文件，单次上传不允许超过100条，超出部分无法导入，大小不超过10M"))+" ")],1),a("a-upload-dragger",{attrs:{name:"file",multiple:!1,"before-upload":t.beforeUpload,"file-list":t.fileList}},[a("p",{staticClass:"ant-upload-drag-icon"},[a("a-icon",{attrs:{type:"file-excel",theme:"filled"}})],1),a("p",{staticClass:"ant-upload-text"},[t._v(t._s(t.L("点击选择或拖动文件至此处")))]),a("p",{staticClass:"ant-upload-hint"},[t._v(" "+t._s(t.L("导入仅支持xls、xlsx文件，大小不超过10M"))+" ")])]),""!=t.import_result?a("p",{staticStyle:{padding:"8px",background:"#FAFAFA","border-radius":"3px"},domProps:{innerHTML:t._s(t.import_result)}}):t._e(),a("a-button",{staticStyle:{"margin-top":"16px"},on:{click:function(e){return t.downloadTemmplate()}}},[a("a-icon",{attrs:{type:"download"}}),t._v(" "+t._s(t.L("下载导入模板"))+" ")],1),a("a-button",{staticStyle:{"margin-top":"16px",float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.handleUpload()}}},[t._v(" "+t._s(t.L("开始导入"))+" ")])],1)],1)],1)},n=[],s=a("2909"),i=a("5530"),r=(a("c740"),a("d81d"),a("99af"),a("4de4"),a("d3b7"),a("caad"),a("2532"),a("498a"),a("159b"),a("fb6a"),a("ea1d")),l={data:function(){return{list:[],columns:[{title:this.L("登录账号"),dataIndex:"login_username"},{title:this.L("账号"),dataIndex:"account"},{title:this.L("手机号"),dataIndex:"mobile",scopedSlots:{customRender:"mobile"}},{title:this.L("岗位"),dataIndex:"station_name",scopedSlots:{customRender:"station_name"}},{title:this.L("状态"),dataIndex:"status",scopedSlots:{customRender:"status"}},{title:this.L("创建时间"),dataIndex:"create_time"},{title:this.L("更新时间"),dataIndex:"update_time"},{title:this.L("操作"),key:"action",scopedSlots:{customRender:"action"}}],selectedRowKeys:[],pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(t){return"共 ".concat(t," 条记录")}},modalVisible:!1,modalTitle:"",modalForm:"",stationsList:[],stationsHasMore:!0,stationsPage:1,importExcelModalVisible:!1,fileList:[],import_result:""}},mounted:function(){this.getList()},beforeRouteLeave:function(t,e,a){this.$destroy(),a()},methods:{getList:function(){var t=this,e={page:this.pagination.current,pageSize:this.pagination.pageSize};this.request(r["a"].merAccountList,e).then((function(e){t.list=e.data||[],!t.list.length&&t.pagination.current>1&&(t.pageSize.current=t.pageSize.current-1,t.getList()),t.pagination.total=e.total||0}))},onPageChange:function(t,e){this.$set(this.pagination,"current",t),this.getList()},onPageSizeChange:function(t,e){this.$set(this.pagination,"pageSize",e),this.getList()},onSelect:function(t,e,a,o){if(e)this.selectedRowKeys.push(t.id);else if(this.selectedRowKeys.length){var n=this.selectedRowKeys.findIndex((function(e){return e==t.id}));-1!=n&&this.$delete(this.selectedRowKeys,n)}},onSelectAll:function(t,e,a){var o=a.map((function(t){return t.id}));this.selectedRowKeys=t?this.selectedRowKeys.concat(o):this.selectedRowKeys.concat(o).filter((function(t){return!o.includes(t)}))},editItem:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.getStations(),t?(this.modalTitle=this.L("账号编辑"),this.modalForm={id:t.id,account:t.account,password:t.password||"",mobile:t.mobile,station_id:t.station_id||void 0,status:t.status}):(this.modalTitle=this.L("新建账号"),this.modalForm={account:"",password:"",mobile:"",station_id:void 0,status:1}),this.modalVisible=!0},getStations:function(){var t=this,e={page:this.stationsPage,page_size:10};this.request(r["a"].merStationsList,e).then((function(e){var a=e.data||[];t.stationsList=1==t.stationsPage?a:t.stationsList.concat(a),t.stationsList.length<e.total?t.stationsHasMore=!0:t.stationsHasMore=!1}))},popupScroll:function(t){this.stationsHasMore&&(this.stationsPage++,this.getStations())},delItem:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$confirm({title:this.L("确定要删除吗？删除后无法恢复"),centered:!0,onOk:function(){var a=e?[e.id]:t.selectedRowKeys;t.request(r["a"].merAccountDel,{id:a}).then((function(a){if(t.$message.success(t.L("操作成功！")),t.selectedRowKeys.length&&e){var o=t.selectedRowKeys.findIndex((function(t){return t==e.id}));-1!=o&&t.$delete(t.selectedRowKeys,o)}else t.selectedRowKeys=[];t.getList()}))},onCancel:function(){}})},switchChange:function(t){t=t?1:0,this.modalForm.status=t},handleCancel:function(){this.modalVisible=!1,this.modalTitle="",this.modalForm={},this.stationsList=[],this.stationsPage=1},handleOk:function(){var t=this;if(this.modalForm.account.trim())if(this.modalForm.id||this.modalForm.password.trim())if(this.modalForm.mobile.trim()){var e=Object(i["a"])(Object(i["a"])({},this.modalForm),{},{station_id:this.modalForm.station_id||""});this.request(r["a"].merAccountEdit,e).then((function(e){t.$message.success(t.L("操作成功！")),t.getList(),t.handleCancel()}))}else this.$message.error(this.L("请填写手机号码"));else this.$message.error(this.L("请填写密码"));else this.$message.error(this.L("请填写账号名"))},importExcel:function(){this.importExcelModalVisible=!0,this.fileList=[],this.import_result=""},handleCancelImport:function(){this.importExcelModalVisible=!1,this.getList()},handleUpload:function(){var t=this;console.log("上传开始");var e=this.fileList,a=new FormData;e.forEach((function(t){a.append("file",t)})),this.request(r["a"].importMerAccount,a).then((function(e){t.import_result="<span style='color:red;font-size:1.1rem'>"+e.result+"</span><br/>"+e.fail_message}))},beforeUpload:function(t){var e=t.type;if(console.log("file_type   "+e),-1==e.indexOf("officedocument")&&-1==e.indexOf("excel"))return this.$message.error(this.L("仅支持xls、xlsx文件上传!")),!1;var a=t.size/1024/1024>10;return a?(this.$message.error(this.L("文件大小不能超过10M")),!1):(this.fileList=[].concat(Object(s["a"])(this.fileList),[t]).slice(-1),this.import_result="",!1)},downloadTemmplate:function(){window.open(location.protocol+"//"+location.host+"/static/file/m_sub_account_template.xlsx?t="+Math.random(),"_blank")}}},c=l,d=(a("07be"),a("2877")),m=Object(d["a"])(c,o,n,!1,null,"6c8584ce",null);e["default"]=m.exports},ea1d:function(t,e,a){"use strict";var o={seeWxQrcode:"/merchant/merchant.qrcode.index/seeWxQrcode",seeH5Qrcode:"/merchant/merchant.qrcode.index/seeH5Qrcode",addressSettingConfig:"/merchant/merchant.MerchantShopManagement/addressSetting",addressSettingEdit:"/merchant/merchant.MerchantShopManagement/addressSettingEdit",merAccountList:"/merchant/merchant.system.MerchantMenu/userAccountList",merAccountDel:"/merchant/merchant.system.MerchantMenu/userAccountDelete",merAccountEdit:"/merchant/merchant.system.MerchantMenu/userAccountAddOrEdit",importMerAccount:"/merchant/merchant.system.MerchantMenu/importAccount",merchantMenu:"/merchant/merchant.system.MerchantMenu/merchantMenu",merStationsList:"/merchant/merchant.system.MerchantMenu/stations",merStationsSave:"/merchant/merchant.system.MerchantMenu/saveStation",merStationsDel:"/merchant/merchant.system.MerchantMenu/delStation"};e["a"]=o}}]);