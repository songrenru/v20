(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54a9ea26"],{b372:function(e,a,t){},c2d4:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:e.title,width:600,visible:e.visibleUpload,maskClosable:!1,confirmLoading:e.confirmLoading,footer:null},on:{cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[t("div",[t("span",[e._v("示例表格")]),t("a",{staticStyle:{"margin-left":"20px"},attrs:{href:"/static/file/village/villageUserMoney/villageUserMoneyModel.xlsx",target:"_blank"}},[e._v("点击下载")])]),t("div",{staticStyle:{"border-bottom":"1px solid #e9e6e6","margin-top":"20px"}},[t("span",[e._v("导入Excel")]),t("a-upload",{attrs:{name:"file","file-list":e.avatarFileList,action:e.upload,headers:e.headers,"before-upload":e.beforeUploadFile},on:{change:e.handleChangeUpload}},[t("a-button",{staticStyle:{margin:"20px   20px  10px"},attrs:{type:"primary"}},[t("a-icon",{attrs:{type:"upload"}}),e._v(" 导入 ")],1)],1)],1),e.show?t("div",{staticStyle:{"margin-top":"20px"}},[t("span",[e._v("导入失败")]),t("a",{staticStyle:{"margin-left":"20px"},attrs:{href:e.url,target:"_blank"}},[e._v("点击下载带入失败数据表格")])]):e._e(),t("div",{staticStyle:{"margin-top":"20px"}},[t("span",{staticStyle:{"font-weight":"500"}},[e._v(" 1、对应物业编号、楼栋、单元、楼层和房间号对应已经存在的名称进行导入"),t("br"),e._v(" 2、导入的住户余额信息，必须跟小区业主列表数据一致，否则导入失败 ")])])])],1)},s=[],l=t("a0e0"),o=t("ca00"),n={data:function(){return{upload:"/v20/public/index.php"+l["a"].uploadUserMoneyFiles+"?upload_dir=/house/excel/userMoneyUpload",avatarFileList:[],headers:{authorization:"authorization-text"},visibleUpload:!1,confirmLoading:!1,title:"导入",url:"",show:!1,fileloading:!1,data_arr:[],tokenName:"",sysName:"",charge_name:"",project_id:0}},activated:function(){var e=Object(o["i"])(location.hash);e?(this.tokenName=e+"_access_token",this.sysName=e):this.sysName="village"},methods:{add:function(e,a){this.title="导入",this.visibleUpload=!0,this.url=window.location.host+"/v20/runtime/demo.xlsx",this.avatarFileList=[],this.charge_name=e,this.project_id=a},beforeUploadFile:function(e){var a=e.size/1024/1024<20;return a?this.fileloading?(this.$message.warning("当前还有文件上传中，请等候上传完成!"),!1):a:(this.$message.error("上传图片最大支持20MB!"),!1)},handleChangeUpload:function(e){var a=this;if(console.log("########",e),e.file&&!e.file.status&&this.fileloading)return!1;if("uploading"===e.file.status){if(this.fileloading)return!1;this.fileloading=!0,this.avatarFileList=e.fileList}if("uploading"!==e.file.status&&(this.fileloading=!1,console.log(e.file,e.fileList)),"done"==e.file.status&&e.file&&e.file.response){var t=e.file.response;if(1e3===t.status)this.data_arr.push(t.data),console.log("data_arr",this.data_arr),this.avatarFileList=e.fileList,console.log("--------",t.data.url),this.request(l["a"].exportUserMoney,{tokenName:this.tokenName,file:t.data.url}).then((function(e){e.error?(a.$parent.getList(),a.$message.success("上传成功")):window.location.href=e.data})),this.visibleUpload=!1;else for(var i in this.$message.error(e.file.response.msg),this.avatarFileList=[],e.fileList)if(e.fileList[i]){var s=e.fileList[i];console.log("info_1",s),s&&s.response&&1e3===s.response.status&&this.avatarFileList.push(s)}}if("removed"==e.file.status&&e.file){var o=e.file.response;if(o&&1e3===o.status)for(var i in this.data_arr=[],e.fileList)if(e.fileList[i]){var n=e.fileList[i];n&&n.response&&1e3===n.response.status&&this.data_arr.push(n.response.data)}this.avatarFileList=e.fileList,console.log("data_arr1",this.data_arr)}},handleCancel:function(){this.visibleUpload=!1}}},r=n,d=(t("ea9e"),t("0c7c")),f=Object(d["a"])(r,i,s,!1,null,"7009d00a",null);a["default"]=f.exports},ea9e:function(e,a,t){"use strict";t("b372")}}]);