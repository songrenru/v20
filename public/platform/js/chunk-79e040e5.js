(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79e040e5","chunk-b1e7199a"],{"8a97":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"bg-ff listPage"},[o("a-row",{staticClass:"mt-20 mb-20",attrs:{type:"flex",justify:"space-between"}},[o("a-col",[o("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.addCustomPageOpt()}}},[e._v(" "+e._s(e.L("新建微页面"))+" ")])],1),o("a-col",[o("a-input",{attrs:{placeholder:e.L("搜索")},on:{change:e.inputChange,pressEnter:e.inputChange},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[o("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1)],1),o("a-table",{attrs:{columns:e.columns,rowKey:"id",scroll:{y:570},pagination:e.pagination,"data-source":e.dataList},scopedSlots:e._u([{key:"page_title",fn:function(t,n){return o("a",{staticClass:"inline-block flex",attrs:{href:n.link_url,target:"_blank"}},[o("span",[e._v(e._s(t))]),1==n.is_home_page&&"platform"!=e.sourceInfo.source?o("a-button",{staticClass:"ml-10",attrs:{size:"small",type:"primary"}},[e._v(e._s("merchant"==e.sourceInfo.source?e.L("商家主页"):e.L("店铺主页")))]):e._e()],1)}},{key:"qrcode",fn:function(t,n){return o("span",{},[o("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.viewQrcode(n)}}},[e._v(e._s(e.L("查看")))])])}},{key:"action",fn:function(t,n){return o("span",{},[o("a",{staticClass:"inline-block",attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.editOpt(n)}}},[e._v(e._s(e.L("编辑")))]),o("a",{staticClass:"ml-10 inline-block",attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.removeOpt(n)}}},[e._v(e._s(e.L("删除")))]),"platform"!=e.sourceInfo.source?o("span",[n.is_home_page&&1==n.is_home_page?o("span",{staticClass:"ml-10 inline-block color-gray"},[e._v(" "+e._s(e.L("已为主页"))+" ")]):o("a",{staticClass:"ml-10 inline-block",attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.setHomePageOpt(n)}}},[e._v(" "+e._s(e.L("设为主页"))+" ")])]):e._e()])}}])}),e.componentPreviewVisible&&e.componentPreviewInfo?o("componentPreview",{attrs:{visible:e.componentPreviewVisible,componentPreviewInfo:e.componentPreviewInfo},on:{handleCancel:function(t){e.componentPreviewVisible=!1}}}):e._e()],1)},a=[],i=(o("498a"),o("9686")),s=o("b818"),c={components:{componentPreview:s["default"]},data:function(){var e=this;return{keyword:"",dataList:[],columns:[{title:this.L("标题"),dataIndex:"page_title",key:"page_title",scopedSlots:{customRender:"page_title"}},{title:this.L("创建时间"),dataIndex:"create_time",key:"create_time"},{title:this.L("浏览数"),dataIndex:"brows_times",key:"brows_times"},{title:this.L("商品数量"),dataIndex:"goods_nums",key:"goods_nums"},{title:this.L("二维码"),dataIndex:"qrcode",key:"qrcode",scopedSlots:{customRender:"qrcode"}},{title:this.L("操作"),dataIndex:"id",key:"id",scopedSlots:{customRender:"action"},align:"center"}],pagination:{current:1,pageSize:10,total:0,"show-total":function(t){return!!t&&e.L("共 X1 条记录",{X1:t})},"show-size-changer":!0,"show-quick-jumper":!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange},componentPreviewVisible:!1,componentPreviewInfo:null}},computed:{sourceInfo:function(){return this.$store.state.customPage.sourceInfo},refreshCustomPageList:function(){return this.$store.state.customPage.refreshCustomPageList}},watch:{refreshCustomPageList:{immediate:!0,handler:function(e){e&&(this.$set(this.pagination,"current",1),this.$set(this.pagination,"pageSize",10),this.keyword="",this.getCustomPageList())}}},mounted:function(){this.refreshCustomPageList||this.getCustomPageList()},methods:{getCustomPageList:function(){var e=this,t={source:this.sourceInfo.source,source_id:this.sourceInfo.source_id,keyword:this.keyword.trim(),page:this.pagination.current,pageSize:this.pagination.pageSize};this.request(i["a"].getMicroPageList,t).then((function(t){e.dataList=t.list||[],e.$set(e.pagination,"total",t.total),1!=e.pagination.current&&t.total>0&&!e.dataList.length&&(e.$set(e.pagination,"current",e.pagination.current-1),e.getCustomPageList()),e.$store.dispatch("updateCustomPageList",!1)}))},onPageChange:function(e,t){this.$set(this.pagination,"current",e),this.getCustomPageList()},onPageSizeChange:function(e,t){this.$set(this.pagination,"current",1),this.$set(this.pagination,"pageSize",t),this.getCustomPageList()},inputChange:function(){""===this.keyword.trim()&&0!=this.keyword||(this.$set(this.pagination,"current",1),this.$set(this.pagination,"pageSize",10),this.getCustomPageList())},addCustomPageOpt:function(){this.$router.push({path:this.$store.state.customPage["".concat(this.sourceInfo.source,"CustomPage")],query:{source:this.sourceInfo.source,source_id:this.sourceInfo.source_id}})},editOpt:function(e){this.$router.push({path:this.$store.state.customPage["".concat(this.sourceInfo.source,"CustomPage")],query:{source:e.source||this.sourceInfo.source,source_id:e.source_id||this.sourceInfo.source_id,pageId:e.id}})},removeOpt:function(e){var t=this;this.$confirm({title:this.L("是否确定删除该微页面?"),centered:!0,onOk:function(){t.request(i["a"].delMicroPage,{id:e.id}).then((function(e){t.$message.success(t.L("操作成功！")),t.getCustomPageList()}))}})},setHomePageOpt:function(e){var t=this,o={id:e.id,source:e.source||this.sourceInfo.source,source_id:e.source_id||this.sourceInfo.source_id};this.request(i["a"].setHomePage,o).then((function(e){t.$message.success(t.L("操作成功！")),t.getCustomPageList()}))},viewQrcode:function(e){this.componentPreviewVisible=!0,this.componentPreviewInfo={link_url:e.link_url,link_code:e.qrcode}}}},r=c,m=(o("9c39"),o("0c7c")),u=Object(m["a"])(r,n,a,!1,null,"78526c8c",null);t["default"]=u.exports},9686:function(e,t,o){"use strict";var n={getMicroPageList:"/common/common.DecoratePage/getMicroPageList",getpersonalDec:"/common/common.DecoratePage/getpersonalDec",delMicroPage:"/common/common.DecoratePage/delMicroPage",setHomePage:"/common/common.DecoratePage/setHomePage",addOrEditpersonalDec:"/common/common.DecoratePage/addOrEditpersonalDec",getNavBottomDec:"/common/common.DecoratePage/getNavBottomDec",addOrEditNavBottom:"/common/common.DecoratePage/addOrEditNavBottom",getSuspendedWindow:"/common/common.DecoratePage/getSuspendedWindow",addOrEditSuspendedWindow:"/common/common.DecoratePage/addOrEditSuspendedWindow",getIndexPage:"/common/common.DecoratePage/getIndexPage",getEditMicoPage:"/common/common.DecoratePage/getEditMicoPage",getCoupons:"/common/common.DecoratePage/getCoupons",getActInfo:"/common/common.DecoratePage/getActInfo",getMallActInfo:"/common/common.DecoratePage/getMallActInfo",getMallGoods:"/common/common.DecoratePage/getMallGoods",getMallGoodsGroup:"/common/common.DecoratePage/getMallGoodsGroup",getShopGoodsGroup:"/common/common.DecoratePage/getShopGoodsGroup",getShopGoods:"/common/common.DecoratePage/getShopGoods",addOrEditMicroPage:"/common/common.DecoratePage/addOrEditMicroPage",getMerchantStoreMsg:"/common/common.DecoratePage/getMerchantStoreMsg",getDiypageModel:"/common/platform.diypage/getDiypageModel",getDiypageDetail:"/common/platform.diypage/getDiypageDetail",getFeedCategoryList:"/common/platform.diypage/getFeedCategoryList",getSearchHotList:"/common/platform.diypage/getSearchHotList",saveDiypage:"/common/platform.diypage/saveDiypage",getMerchantCategoryChildList:"/common/platform.diypage/getMerchantCategoryChildList",getStoreList:"/common/common.DecoratePage/getStore"};t["a"]=n},"9c39":function(e,t,o){"use strict";o("bf05")},b2d2c:function(e,t,o){"use strict";o("cbb7")},b818:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("a-modal",{attrs:{title:e.L("预览"),visible:e.visible,destroyOnClose:!0,footer:null,width:"55%"},on:{cancel:e.handleCancel}},[o("div",{staticClass:"flex"},[o("span",{staticClass:"linkLabel"},[e._v(e._s(e.L("链接")))]),o("div",{staticClass:"flex flex-wrap ml-10 flex-1"},[o("span",{staticClass:"linkUrl flex-1"},[e._v(e._s(e.componentPreviewInfo.link_url))]),o("a-button",{staticClass:"ml-10",on:{click:function(t){return e.copy()}}},[e._v(e._s(e.L("复制")))])],1)]),o("div",{staticClass:"mt-10 flex align-center justify-center"},[o("img",{staticClass:"codeImg",attrs:{src:e.componentPreviewInfo.link_code,alt:""}})])])],1)},a=[],i={props:{visible:{type:Boolean,default:!1},componentPreviewInfo:{type:[String,Object],default:""}},data:function(){return{}},methods:{handleCancel:function(){this.$emit("handleCancel")},copy:function(){var e=document.createElement("input");e.setAttribute("readonly","readonly"),e.setAttribute("value",this.componentPreviewInfo.link_url),document.body.appendChild(e),e.focus(),e.setSelectionRange(0,9999),document.execCommand("copy")&&(document.execCommand("copy"),this.$message.success(this.L("复制成功！"))),document.body.removeChild(e)}}},s=i,c=(o("b2d2c"),o("0c7c")),r=Object(c["a"])(s,n,a,!1,null,"362c17e8",null);t["default"]=r.exports},bf05:function(e,t,o){},cbb7:function(e,t,o){}}]);