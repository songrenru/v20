(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23e9d87a","chunk-2e9fa3d4","chunk-2541e327"],{1768:function(e,t,o){"use strict";o("bd2f")},"721e":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("a-modal",{attrs:{title:e.title,width:350,visible:e.visible,footer:null},on:{cancel:e.handleCancel}},[o("div",{staticClass:"content"},[o("div",{staticClass:"code-box"},[o("div",{staticClass:"code"},[e.h5Qrcode?o("img",{attrs:{src:e.h5Qrcode}}):e._e()])])])])},s=[],r=(o("ea1d"),{components:{},data:function(){return{title:"查看网址二维码",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},id:0,image:"",visible:!1,h5Qrcode:""}},mounted:function(){},methods:{showModal:function(e){this.visible=!0,this.id=IDBCursor,this.qrcodeUrl=e,this.getH5Code()},getH5Code:function(){var e=encodeURIComponent(this.qrcodeUrl);this.h5Qrcode=location.origin+"/index.php?g=Index&c=Recognition&a=get_own_qrcode&qrCon="+e},handleCancel:function(){this.visible=!1}}}),a=r,n=(o("86ee"),o("2877")),l=Object(n["a"])(a,i,s,!1,null,"7310db8a",null);t["default"]=l.exports},"75ff":function(e,t,o){},"86ee":function(e,t,o){"use strict";o("75ff")},"8a11":function(e,t,o){"use strict";var i={groupCombineList:"/group/platform.groupCombine/groupCombinelist",getGroupCombineDetail:"/group/platform.groupCombine/getGroupCombineDetail",editGroupCombine:"/group/platform.groupCombine/editGroupCombine",getGroupCombineGoodsList:"/group/platform.group/getGroupCombineGoodsList",getGroupCombineOrderList:"/group/platform.groupOrder/getGroupCombineOrderList",exportCombineOrder:"/group/platform.groupOrder/exportCombineOrder",getRobotList:"/group/platform.groupCombine/getRobotList",addRobot:"/group/platform.groupCombine/addRobot",delRobot:"/group/platform.groupCombine/delRobot",editSpreadNum:"/group/platform.groupCombine/editSpreadNum",getGroupGoodsList:"/group/platform.group/getGroupGoodsList",getGroupFirstCategorylist:"/group/platform.groupCategory/getGroupFirstCategorylist",getCategoryTree:"/group/platform.groupCategory/getCategoryTree",getPayMethodList:"/group/platform.groupOrder/getPayMethodList",getOrderDetail:"/group/platform.groupOrder/getOrderDetail",editOrderNote:"/group/platform.groupOrder/editOrderNote",getCfgInfo:"/group/platform.groupRenovation/getInfo",editCfgInfo:"/group/platform.groupRenovation/editCfgInfo",editCfgSort:"/group/platform.groupRenovation/editCfgSort",getRenovationGoodsList:"/group/platform.groupRenovation/getRenovationGoodsList",editCombineCfgInfo:"/group/platform.groupRenovation/editCombineCfgInfo",editCombineCfgSort:"/group/platform.groupRenovation/editCombineCfgSort",getRenovationCombineGoodsList:"/group/platform.groupRenovation/getRenovationCombineGoodsList",getRenovationCustomList:"/group/platform.groupRenovation/getRenovationCustomList",addRenovationCustom:"/group/platform.groupRenovation/addRenovationCustom",getRenovationCustomInfo:"/group/platform.groupRenovation/getRenovationCustomInfo",delRenovationCustom:"/group/platform.groupRenovation/delRenovationCustom",getGroupCategoryList:"/group/platform.group/getGroupCategoryList",getRenovationCustomStoreSortList:"/group/platform.groupRenovation/getRenovationCustomStoreSortList",editRenovationCustomStoreSort:"/group/platform.groupRenovation/editRenovationCustomStoreSort",getRenovationCustomGroupSortList:"/group/platform.groupRenovation/getRenovationCustomGroupSortList",editRenovationCustomGroupSort:"/group/platform.groupRenovation/editRenovationCustomGroupSort",getGroupCategorylist:"/group/platform.groupCategory/getGroupCategorylist",delGroupCategory:"/group/platform.groupCategory/delGroupCategory",addGroupCategory:"/group/platform.groupCategory/addGroupCategory",configGroupCategory:"/common/platform.index/config",uploadPictures:"/common/common.UploadFile/uploadPictures",getGroupCategoryInfo:"/group/platform.groupCategory/getGroupCategoryInfo",groupCategorySaveSort:"/group/platform.groupCategory/saveSort",getGroupCategoryCueList:"/group/platform.groupCategory/getGroupCategoryCueList",getGroupCategoryCatFieldList:"/group/platform.groupCategory/getCatFieldList",getGroupCategoryWriteFieldList:"/group/platform.groupCategory/getWriteFieldList",delGroupCategoryCue:"/group/platform.groupCategory/delGroupCategoryCue",delGroupCategoryWriteField:"/group/platform.groupCategory/delWriteField",groupCategoryCatFieldShow:"/group/platform.groupCategory/catFieldShow",editGroupCategoryCue:"/group/platform.groupCategory/editGroupCategoryCue",groupCategoryAddWriteField:"/group/platform.groupCategory/addWriteField",groupCategoryAddCatField:"/group/platform.groupCategory/addCatField",getAdverList:"/group/platform.groupAdver/getAdverList",getAllArea:"/common/common.area/getAllArea",addGroupAdver:"/group/platform.groupAdver/addGroupAdver",delGroupAdver:"/group/platform.groupAdver/delGroupAdver",getEditAdver:"/group/platform.groupAdver/getEditAdver",updateGroupCategoryBgColor:"/group/platform.groupCategory/updateGroupCategoryBgColor",getGroupSearchHotList:"/group/platform.groupSearchHot/getGroupSearchHotList",addGroupSearchHot:"/group/platform.groupSearchHot/addGroupSearchHot",getGroupSearchHotInfo:"/group/platform.groupSearchHot/getGroupSearchHotInfo",saveSearchHotSort:"/group/platform.groupSearchHot/saveSearchHotSort",delSearchHot:"/group/platform.groupSearchHot/delSearchHot",getUrl:"/group/platform.group/getUrl",changeShow:"/group/platform.groupHomeMenu/changeShow",getShow:"/group/platform.groupHomeMenu/getShow"};t["a"]=i},b2cc:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("a-modal",{staticClass:"dialog",attrs:{title:"选择商品",width:"800",centered:"",visible:e.dialogVisible,destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[o("div",{staticClass:"select-goods"},[o("div",{staticClass:"left scrollbar"},[o("a-menu",{attrs:{mode:"inline","open-keys":e.openKeys,selectedKeys:e.defaultSelectedKey},on:{openChange:e.onOpenChange,select:e.onSelect}},[e._l(e.menuList,(function(t){return[t.children&&t.children.length?o("a-sub-menu",{key:t.sort_id},[o("span",{attrs:{slot:"title"},slot:"title"},[o("span",[e._v(e._s(t.sort_name))])]),t.children&&t.children.length?[e._l(t.children,(function(t){return[t.children&&t.children.length?[o("a-sub-menu",{key:t.sort_id,attrs:{title:t.sort_name}},e._l(t.children,(function(t){return o("a-menu-item",{key:t.sort_id},[e._v(e._s(t.sort_name))])})),1)]:[o("a-menu-item",{key:t.sort_id},[e._v(e._s(t.sort_name))])]]}))]:e._e()],2):o("a-menu-item",{key:t.sort_id},[e._v(e._s(t.sort_name))])]}))],2)],1),o("div",{staticClass:"right"},[o("div",{staticClass:"top"},[o("span",{staticClass:"tips"}),o("a-input-search",{staticClass:"search",attrs:{placeholder:"组合名称"},on:{search:e.onSearch,change:e.onSearchChange},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1),o("div",{staticClass:"bottom"},[o("a-table",{attrs:{"row-selection":e.rowSelection,columns:e.columns,"data-source":e.list,rowKey:"combine_id",scroll:{y:500}},scopedSlots:e._u([{key:"start_time",fn:function(t,i){return o("span",{},[e._v(" "+e._s(t)+"至"+e._s(i.end_time)+" ")])}},{key:"can_use_day",fn:function(t){return o("span",{},[e._v(" "+e._s(t)+"天 ")])}},{key:"selected",fn:function(t,i){return o("span",{},[t?o("div",{staticStyle:{color:"#1890ff"}},[e._v("已选择")]):e._e()])}},{key:"name",fn:function(t,i){return o("span",{},[o("div",{staticClass:"product-info"},[o("div",[o("img",{attrs:{src:i.image}})]),o("div",{staticStyle:{"margin-left":"10px"}},[o("p",{staticClass:"product-name"},[e._v(e._s(t))])])])])}}])})],1)])])])},s=[],r=(o("159b"),o("7db0"),o("d81d"),o("a434"),{name:"SelectGoods",props:{visible:{type:Boolean,default:!1},menuList:{type:Array,default:function(){return[]}},list:{type:Array,default:function(){return[]}},selectedList:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,rootSubmenuKeys:[],openKeys:[],columns:[{title:"优惠组合名称",dataIndex:"title",scopedSlots:{customRender:"title"}},{title:"优惠组合类型",dataIndex:"cat_name"},{title:"优惠组合活动时间",dataIndex:"start_time",width:"15%",scopedSlots:{customRender:"start_time"}},{title:"优惠组合有效期",dataIndex:"can_use_day",width:"15%",scopedSlots:{customRender:"can_use_day"}},{title:"状态",dataIndex:"selected",scopedSlots:{customRender:"selected"}}],menuId:0,selectedRowKeys:[],selectedRows:[],defaultSelectedKey:[],keywords:"",sList:[],merIdArr:[]}},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onSelect:this.onRowSelect,onSelectAll:this.onSelectAll,hideDefaultSelections:!0,getCheckboxProps:function(e){return{props:{}}}}}},watch:{visible:function(e,t){this.dialogVisible=e,e&&(this.handleMenuList(),this.handleList())},menuList:function(){this.handleMenuList()},list:function(){this.handleList()},selectedList:function(e){this.sList=JSON.parse(JSON.stringify(e))}},mounted:function(){this.dialogVisible=this.visible,this.handleMenuList(),this.handleList(),this.sList=JSON.parse(JSON.stringify(this.selectedList))},methods:{init:function(){this.rootSubmenuKeys=[],this.openKeys=[],this.defaultSelectedKey=[],this.keywords="",this.currentPage=1},handleMenuList:function(){var e=this;this.init(),console.log(this.menuList," this.menuList"),this.menuList.forEach((function(t,o){if(e.rootSubmenuKeys.push(t.sort_id),t.children&&t.children.length){0==o&&e.openKeys.push(t.sort_id);var i=t.children;i.forEach((function(t,i){if(t.children&&t.children.length){0==i&&e.openKeys.push(t.sort_id);var s=t.children;s.forEach((function(t,s){0==o&&0==i&&0==s&&(e.menuId=t.sort_id)}))}else 0==o&&0==i&&(e.menuId=t.sort_id)}))}else 0==o&&(e.menuId=t.sort_id)})),this.defaultSelectedKey.push(this.menuId),this.onSelect({key:this.menuId})},handleList:function(){var e=this;console.log("-----------1",this.sList),this.selectedRowKeys=[],this.merIdArr=[],this.sList.length&&this.sList.forEach((function(t){e.selectedRowKeys.push(t.combine_id)})),this.list.length&&this.list.forEach((function(t,o){-1!=e.selectedRowKeys.indexOf(t.combine_id)?e.list[o].selected=1:e.list[o].selected=0})),this.selectedRows=this.sList},handleOk:function(){var e=this.selectedRowKeys,t=this.sList;t.length?this.$emit("submit",{ids:e,goods:t}):this.$message.error("请选择商品")},handleCancel:function(){this.init(),this.dialogVisible=!1,this.$emit("update:visible",this.dialogVisible)},onSelect:function(e){var t=e.key;console.log("menu id selected:",t),this.menuId=t,this.defaultSelectedKey=[t],this.$emit("onMenuSelect",{id:t})},onOpenChange:function(e){var t=this,o=e.find((function(e){return-1===t.openKeys.indexOf(e)}));-1===this.rootSubmenuKeys.indexOf(o)?this.openKeys=e:this.openKeys.push(o)},onSearch:function(e){this.keywords?(this.menuId="",this.openKeys=[],this.defaultSelectedKey=[],this.$emit("onSearch",{id:this.menuId,keywords:e})):this.$message.warning("请输入组合名称！")},onSearchChange:function(e){this.keywords?this.onSearch(this.keywords):this.handleMenuList()},onRowSelect:function(e,t,o){var i=this;t?(this.sList.push(e),this.selectedRowKeys.push(e.combine_id)):-1!=this.selectedRowKeys.indexOf(e.combine_id)&&(this.merIdArr.remove(e.mer_id),this.sList.remove(e),this.selectedRowKeys.remove(e.combine_id)),this.list.length&&this.list.forEach((function(e,t){-1!=i.selectedRowKeys.indexOf(e.combine_id)?i.list[t].selected=1:i.list[t].selected=0}))},onSelectAll:function(e,t,o){var i=this;e?o.map((function(e){i.selectedRowKeys.push(e.combine_id),i.sList.push(e)})):o.map((function(e){i.sList.remove(e),i.selectedRowKeys.remove(e.combine_id)}))}}});Array.prototype.remove=function(e){var t=this.indexOf(e),o=-1;t>-1?this.splice(t,1):(this.map((function(t,i){t.combine_id==e.combine_id&&(o=i)})),o>-1&&this.splice(o,1))};var a=r,n=(o("1768"),o("2877")),l=Object(n["a"])(a,i,s,!1,null,"5ed2178a",null);t["default"]=l.exports},bd2f:function(e,t,o){},c31b:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"mt-20 ml-10 mr-10 mb-20"},[e.ajaxData?o("a-form",{attrs:{form:e.form,"label-col":{span:4},"wrapper-col":{span:10}},on:{submit:e.handleSubmit}},[o("a-card",{attrs:{title:e.title,bordered:!1}},[o("a-form-item",{attrs:{label:"活动名称"}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{initialValue:e.ajaxData.title,rules:[{required:!0,message:"请输入活动名称！"},{max:6,message:"字数限制为6个字",trigger:"blur"}]}],expression:"[\n            'title',\n            { initialValue: ajaxData.title, rules: [{ required: true, message: '请输入活动名称！' },{ max: 6, message: '字数限制为6个字', trigger: 'blur' }] },\n          ]"}],attrs:{placeholder:"填写活动名称"}})],1),o("a-form-item",{attrs:{label:"商品活动描述"}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["desc",{initialValue:e.ajaxData.desc}],expression:"[\n            'desc',\n            { initialValue: ajaxData.desc },\n          ]"}],attrs:{placeholder:"填写商品活动描述"}})],1),o("a-form-item",{attrs:{label:e.t_label}},[o("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1==e.ajaxData.status,valuePropName:"checked"}],expression:"['status', { initialValue: ajaxData.status == 1 ? true : false, valuePropName: 'checked' }]"}],attrs:{"checked-children":"是","un-checked-children":"否"},on:{change:e.switchStatus}})],1)],1),o("a-card",{staticStyle:{"margin-top":"20px"},attrs:{title:"商品信息",bordered:!1}},[o("a-row",{attrs:{type:"flex",justify:"space-between"}},[o("a-col",[o("div",[o("div",[o("h1",[o("b",[e._v(e._s(e.title)+"列表")])])]),o("div",{staticStyle:{"font-size":"12px"}},[e._v("已过期组合前端过滤不展示")])])]),o("a-col",[o("div",[o("a-button",{attrs:{type:"primary"},on:{click:e.selectGoodsClick}},[e._v("添加组合")]),e.selectedGoodsDetailList.length?o("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger"},on:{click:e.delGoodsClick}},[e._v("删除 ")]):e._e()],1)])],1),[o("div",[o("a-table",{attrs:{"row-selection":{selectedRowKeys:e.selectedGoodsList,onChange:e.onSelectChange},rowKey:"combine_id",columns:e.goodsColumns,"data-source":e.selectedGoodsDetailList},scopedSlots:e._u([{key:"detail_url",fn:function(t){return o("span",{},[o("a",{staticClass:"ant-btn-link pointer",on:{click:function(o){return e.$refs.SeeH5QrcodeModal.showModal(t)}}},[e._v("查看二维码")])])}},{key:"cfg_sort",fn:function(t,i){return o("span",{},[o("a-input-number",{staticStyle:{width:"100px"},attrs:{min:0,step:"1"},model:{value:i.cfg_sort,callback:function(t){e.$set(i,"cfg_sort",t)},expression:"record.cfg_sort"}})],1)}},{key:"start_time",fn:function(t,i){return o("span",{},[e._v(" "+e._s(t)+"至"+e._s(i.end_time)+" ")])}},{key:"can_use_day",fn:function(t){return o("span",{},[e._v(" "+e._s(t)+"天 ")])}},{key:"action",fn:function(t,i){return o("span",{},[o("a",{on:{click:function(t){return e.delGoods(i.combine_id)}}},[e._v("删除")])])}}],null,!1,2793029513)})],1)],o("select-combine-goods",{attrs:{visible:e.selectGoodsVisible,menuList:e.goodsSortList,list:e.selectGoodsList,selectedList:e.selectedGoodsDetailList},on:{"update:visible":function(t){e.selectGoodsVisible=t},submit:e.onGoodsSelect,onMenuSelect:e.onMenuSelect,onSearch:e.goodsOnSearch}}),o("see-h5-qrcode",{ref:"SeeH5QrcodeModal"})],2),o("a-form-item",{staticClass:"text-left",staticStyle:{margin:"20px 0"},attrs:{wrapperCol:{span:24}}},[o("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("提交")])],1)],1):e._e()],1)},s=[],r=(o("d81d"),o("8a11")),a=o("b2cc"),n=o("721e"),l=[{title:"优惠组合名称",dataIndex:"title",scopedSlots:{customRender:"title"}},{title:"优惠组合类型",dataIndex:"cat_name"},{title:"查看二维码",dataIndex:"detail_url",scopedSlots:{customRender:"detail_url"},width:"10%"},{title:"排序",dataIndex:"cfg_sort",width:"10%",scopedSlots:{customRender:"cfg_sort"}},{title:"优惠组合活动时间",dataIndex:"start_time",width:"15%",scopedSlots:{customRender:"start_time"}},{title:"优惠组合有效期",dataIndex:"can_use_day",width:"15%",scopedSlots:{customRender:"can_use_day"}},{title:"状态",dataIndex:"status",width:"8%",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"action",width:"15%",scopedSlots:{customRender:"action"}}],d={name:"ShopForm",components:{SelectCombineGoods:a["default"],SeeH5Qrcode:n["default"]},data:function(){return{queryParam:{type:2,page:0,cat_id:0,is_renovation:1},ajaxData:{title:"",desc:"",status:2},catArr:[],selectGoodsVisible:!1,goodsColumns:l,form:null,goodsSortList:[],selectedGoodsDetailList:[],selectedGoodsList:[],selectGoodsList:[],title:"超值组合设置",t_label:"是否展示超值组合"}},created:function(){this.getData(),this.setTitle()},mounted:function(){this.getData(),this.getCategoryListAll(),this.setTitle()},watch:{"$route.query.type":function(){this.queryParam.cat_id=this.$route.query.cat_id,this.queryParam.type=this.$route.query.type,this.getData(),this.getCategoryListAll(),this.setTitle()}},methods:{switchStatus:function(e){},getData:function(){var e=this;this.selectedGoodsDetailList=[],this.form=this.$form.createForm(this),this.queryParam["cat_id"]=this.$route.query.cat_id,console.log("请求数据。。。。"),console.log(this.queryParam),this.request(r["a"].getCfgInfo,this.queryParam).then((function(t){e.ajaxData=t.info,e.selectedGoodsDetailList=t.group_list,e.$forceUpdate()}))},getCategoryListAll:function(){var e=this;this.request(r["a"].getCategoryTree,{cat_id:this.$route.query.cat_id}).then((function(t){if(t.map((function(e){return e.children=[],e})),0==e.$route.query.cat_id){var o={sort_name:"其他",sort_id:0,key:0,children:[]};t.unshift(o)}e.goodsSortList=t}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,o){if(!e){if(o.status=o.status?1:0,o.cat_id=t.$route.query.cat_id,o.type=t.$route.query.type,o.goods_list=t.selectedGoodsDetailList,console.log(o,"values"),!o.goods_list.length)return t.$message.error("请添加商品"),!1;t.request(r["a"].editCombineCfgInfo,o).then((function(e){t.$message.success("保存成功"),t.form=t.$form.createForm(t),t.$route.query.cat_id>0?t.$router.push("/group/platform.groupCategory/edit?cat_id="+t.$route.query.cat_id+"&cat_fid=0&key=2"):t.$router.push("/group/platform.decorate/index")}))}}))},getSelectGoodsList:function(){var e=this;this.request(r["a"].groupCombineList,this.queryParam).then((function(t){e.selectGoodsList=t.list}))},selectGoodsClick:function(){this.selectGoodsVisible=!0},onGoodsSelect:function(e){var t=this;console.log(e,"onGoodsSelect");var o=[];this.selectedGoodsDetailList.map((function(e){o.push(e.combine_id)})),e.goods.map((function(e){-1==o.indexOf(e.combine_id)&&t.selectedGoodsDetailList.push(e)})),this.selectGoodsVisible=!1},onMenuSelect:function(e){this.queryParam.cat_id=e.id,this.queryParam.keywords="",this.getSelectGoodsList()},delGoodsClick:function(){for(var e=[],t=0;t<this.selectedGoodsDetailList.length;t++)-1==this.selectedGoodsList.indexOf(this.selectedGoodsDetailList[t].combine_id)&&e.push(this.selectedGoodsDetailList[t]);this.selectedGoodsDetailList=e,this.selectedGoodsList=[]},delGoods:function(e){for(var t=[],o=[],i=0;i<this.selectedGoodsList.length;i++)e!=this.selectedGoodsList[i]&&t.push(this.selectedGoodsList[i]);for(i=0;i<this.selectedGoodsDetailList.length;i++)this.selectedGoodsDetailList[i].combine_id!=e&&o.push(this.selectedGoodsDetailList[i]);this.selectedGoodsList=t,this.selectedGoodsDetailList=o},goodsOnSearch:function(e){this.queryParam.sort_id=e.id,this.queryParam.keyword=e.keywords,this.getSelectGoodsList()},onSelectChange:function(e){this.selectedGoodsList=e},handleSortChange:function(e,t){var o=this;this.request(r["a"].editCombineCfgSort,{id:t,sort:e}).then((function(e){o.request(r["a"].getRenovationCombineGoodsList,o.queryParam).then((function(e){e.group_list.length&&(o.selectedGoodsDetailList=e.group_list)}))}))},setTitle:function(){this.queryParam.cat_id>0?(this.title="超值联盟设置",this.t_label="是否展示超值联盟"):(this.title="超值组合设置",this.t_label="是否展示超值组合")}}},u=d,c=o("2877"),p=Object(c["a"])(u,i,s,!1,null,"42e10d70",null);t["default"]=p.exports},ea1d:function(e,t,o){"use strict";var i={seeWxQrcode:"/merchant/merchant.qrcode.index/seeWxQrcode",seeH5Qrcode:"/merchant/merchant.qrcode.index/seeH5Qrcode"};t["a"]=i}}]);