(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d6ac08e"],{"23b2":function(e,a,t){},"6f4b":function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[t("a-form",{staticClass:"balance_info",attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-col",{attrs:{span:30}},[t("span",{staticClass:"label_col "},[e._v("姓名")]),t("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:100,disabled:e.is_disabled},model:{value:e.post.nickname,callback:function(a){e.$set(e.post,"nickname",a)},expression:"post.nickname"}})],1),t("a-col",{attrs:{span:6}})],1),t("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-col",{attrs:{span:30}},[t("span",{staticClass:"label_col "},[e._v("手机号")]),t("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:100,disabled:e.is_disabled},model:{value:e.post.phone,callback:function(a){e.$set(e.post,"phone",a)},expression:"post.phone"}})],1),t("a-col",{attrs:{span:6}})],1),1==e.is_customized_meter_reading?t("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-col",{attrs:{span:30}},[t("span",{staticClass:"label_col "},[e._v("冷水余额")]),t("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:30,disabled:e.is_disabled,suffix:"元"},model:{value:e.cold_water_balance,callback:function(a){e.cold_water_balance=a},expression:"cold_water_balance"}})],1),t("a-col",{attrs:{span:6}})],1):e._e(),1==e.is_customized_meter_reading?t("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-col",{attrs:{span:30}},[t("span",{staticClass:"label_col "},[e._v("热水余额")]),t("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:30,disabled:e.is_disabled,suffix:"元"},model:{value:e.hot_water_balance,callback:function(a){e.hot_water_balance=a},expression:"hot_water_balance"}})],1),t("a-col",{attrs:{span:6}})],1):e._e(),1==e.is_customized_meter_reading?t("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-col",{attrs:{span:30}},[t("span",{staticClass:"label_col "},[e._v("电费余额")]),t("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:30,disabled:e.is_disabled,suffix:"元"},model:{value:e.electric_balance,callback:function(a){e.electric_balance=a},expression:"electric_balance"}})],1),t("a-col",{attrs:{span:6}})],1):e._e(),t("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-col",{attrs:{span:30}},[t("span",{staticClass:"label_col "},[e._v("物业余额")]),t("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:30,disabled:e.is_disabled,suffix:"元"},model:{value:e.current_money,callback:function(a){e.current_money=a},expression:"current_money"}})],1),t("a-col",{attrs:{span:6}})],1),1==e.is_customized_meter_reading?t("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-col",{attrs:{span:30}},[t("label",{staticClass:"label_col ant-form-item-required"},[e._v("余额类型")]),t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.opt_money_type",{initialValue:e.post.opt_money_type}],expression:"['post.opt_money_type', {initialValue:post.opt_money_type}]"}],staticStyle:{width:"180px"},attrs:{placeholder:"请选择余额类型"}},[t("a-select-option",{attrs:{value:"cold_water_balance"}},[e._v("冷水余额")]),t("a-select-option",{attrs:{value:"hot_water_balance"}},[e._v("热水余额")]),t("a-select-option",{attrs:{value:"electric_balance"}},[e._v("电费余额")]),t("a-select-option",{attrs:{value:"current_money"}},[e._v("物业余额")])],1),t("span",{staticStyle:{"margin-left":"15px"}},[e._v(" 请选择要增加或减少余额的类型")])],1),t("a-col",{attrs:{span:6}})],1):e._e(),t("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("span",{staticClass:"label_col ant-form-item-required"},[e._v("操作类型")]),t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.status",{initialValue:e.post.status}],expression:"['post.status', {initialValue:post.status}]"}]},[t("a-radio",{attrs:{value:1}},[e._v(" 增加 ")]),t("a-radio",{attrs:{value:2}},[e._v(" 减少 ")])],1)],1),t("a-form-item",{attrs:{label:"",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-col",{attrs:{span:30}},[t("span",{staticClass:"label_col ant-form-item-required"},[e._v("缴费金额")]),t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.price",{initialValue:e.post.price,rules:[{required:!0,message:e.L("请输入缴费金额！")}]}],expression:"['post.price',{ initialValue: post.price, rules: [{ required: true, message: L('请输入缴费金额！') }] }]"}],staticStyle:{width:"300px"},attrs:{placeholder:"请输入缴费金额",min:0,maxLength:10,oninput:"value=value.replace(/[^\\d.]/g, '').replace(/\\.{2,}/g, '.').replace('.', '$#$').replace(/\\./g, '').replace('$#$', '.').replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/, '$1$2.$3').replace(/^\\./g, '')",suffix:"元"}})],1),t("a-col",{attrs:{span:6}})],1),t("a-form-item",{attrs:{label:"",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-col",{attrs:{span:30}},[t("span",{staticClass:"label_col ant-form-item-required"},[e._v("备注")]),t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.remarks",{initialValue:e.post.remarks,rules:[{required:!0,message:e.L("请输入备注！")}]}],expression:"['post.remarks',{ initialValue: post.remarks, rules: [{ required: true, message: L('请输入备注！') }] }]"}],staticClass:"textarea",attrs:{placeholder:"请输入备注",rows:4}})],1),t("a-col",{attrs:{span:6}})],1)],1)],1)],1)},s=[],r=t("a0e0"),o={components:{},data:function(){return{title:"新建",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),sensitive_info:[],visible:!1,post:{pigcms_id:0,nickname:"",phone:"",status:1,price:"",uid:0,remarks:"",opt_money_type:"current_money"},hot_water_balance:"",cold_water_balance:"",electric_balance:"",current_money:"",is_disabled:!0,is_customized_meter_reading:0}},mounted:function(){},methods:{add:function(e,a){var t=this;t.title="增加/减少",t.visible=!0,t.post.status=1,t.post.price="",t.post.remarks="",t.post.opt_money_type="current_money",this.is_customized_meter_reading=0,a&&(this.is_customized_meter_reading=a),t.request(r["a"].storageUserBalance,{uid:e}).then((function(a){t.post.uid=e,t.current_money=a.current_money,t.post.nickname=a.nickname,t.post.phone=a.phone,t.hot_water_balance=a.hot_water_balance,t.cold_water_balance=a.cold_water_balance,t.electric_balance=a.electric_balance}))},handleSubmit:function(){var e=this,a=this.form.validateFields;this.confirmLoading=!0,a((function(a,t){if(a)e.confirmLoading=!1;else{if(t.post.uid=e.post.uid,2==t.post.status||"2"==t.post.status){var l=1*t.post.price;if("current_money"==t.post.opt_money_type&&l<e.post.current_money)return e.$message.error("物业余额不足！"),e.confirmLoading=!1,!1;if(e.is_customized_meter_reading&&"cold_water_balance"==t.post.opt_money_type&&l>e.cold_water_balance)return e.$message.error("冷水余额不足！"),e.confirmLoading=!1,!1;if(e.is_customized_meter_reading&&"hot_water_balance"==t.post.opt_money_type&&l>e.hot_water_balance)return e.$message.error("热水余额不足！"),e.confirmLoading=!1,!1;if(e.is_customized_meter_reading&&"electric_balance"==t.post.opt_money_type&&l>e.electric_balance)return e.$message.error("电费余额不足！"),e.confirmLoading=!1,!1}var s=r["a"].storageUserBalanceChange;e.request(s,t.post).then((function(a){e.$message.success("操作成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,console.log(123),e.$emit("ok")}),1500),console.log(345)})).catch((function(a){e.confirmLoading=!1}))}}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.post.id=0,e.form=e.$form.createForm(e)}),500)}}},i=o,n=(t("c56a"),t("2877")),c=Object(n["a"])(i,l,s,!1,null,"7a7016e8",null);a["default"]=c.exports},c56a:function(e,a,t){"use strict";t("23b2")}}]);