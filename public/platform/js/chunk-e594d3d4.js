(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e594d3d4"],{"2d82":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-drawer",{attrs:{title:"视频监控类型",width:1e3,visible:t.visible,maskClosable:!1,placement:"right"},on:{close:t.handleCancel}},[a("p",[a("a",{staticClass:"ant-btn ant-btn-primary",staticStyle:{"margin-left":"50px"},on:{click:function(e){return t.addItem()}}},[t._v(" 添 加 ")])]),a("div",{staticClass:"message-suggestions-list-box",staticStyle:{"margin-top":"5px"}},[a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination,loading:t.loading,"row-key":function(t){return t.id}},on:{change:t.table_change},scopedSlots:t._u([{key:"status_slot",fn:function(e,s,i){return a("span",{},[1==s.status?a("span",{staticStyle:{color:"green"}},[t._v("已开启")]):0==s.status?a("span",{staticStyle:{color:"red"}},[t._v("已关闭")]):t._e()])}},{key:"action",fn:function(e,s,i){return a("span",{},[a("a",{on:{click:function(e){return t.editItem(s)}}},[t._v("编辑")]),s.xtype<1?a("span",[a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.delItem(s)}}},[t._v("删除")])],1):t._e()])}}])}),a("a-modal",{attrs:{width:500,title:t.addtitle,visible:t.visible_edit,maskClosable:!1,"confirm-loading":t.confirmLoading},on:{cancel:t.handle2Cancel,ok:t.handleSubmit}},[a("a-form",{attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"类型名称",labelCol:t.labelCol,required:!0}},[a("a-col",{attrs:{span:18}},[a("a-input",{staticStyle:{width:"250px"},attrs:{placeholder:"15字符以内",autocomplete:"off",name:"vname","max-length":15,type:"text"},model:{value:t.post.vname,callback:function(e){t.$set(t.post,"vname",e)},expression:"post.vname"}})],1)],1),a("a-form-item",{attrs:{label:"排序值",labelCol:t.labelCol}},[a("a-col",{attrs:{span:18}},[a("a-input-number",{staticStyle:{width:"210px"},attrs:{placeholder:"不填则默认为0,越大越靠前",name:"xsort",autocomplete:"off",min:0},model:{value:t.post.xsort,callback:function(e){t.$set(t.post,"xsort",e)},expression:"post.xsort"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"状态",labelCol:t.labelCol,required:!0}},[a("a-col",{attrs:{span:18}},[a("a-radio-group",{attrs:{disabled:t.is_disabled},model:{value:t.post.status,callback:function(e){t.$set(t.post,"status",e)},expression:"post.status"}},[a("a-radio",{attrs:{value:1}},[t._v("开启")]),a("a-radio",{attrs:{value:0}},[t._v("关闭")])],1)],1),a("a-col",{attrs:{span:6}})],1)],1)],1)],1)])},i=[],n=(a("7d24"),a("dfae")),o=(a("ac1f"),a("841c"),a("a0e0")),l=[{title:"类型名称",dataIndex:"vname",key:"vname"},{title:"状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status_slot"}},{title:"排序值",dataIndex:"xsort",key:"xsort"},{title:"最后编辑时间",dataIndex:"updatetime_str",key:"updatetime_str"},{title:"操作",dataIndex:"",key:"",width:150,scopedSlots:{customRender:"action"}}],r=[],c={name:"videoMonitorTypeList",filters:{},components:{"a-collapse":n["a"],"a-collapse-panel":n["a"].Panel},data:function(){return{labelCol:{xs:{span:10},sm:{span:5}},pagination:{pageSize:10,total:10,current:1},search:{keyword:"",key_val:"name",key_val1:"paytime",page:1},form:this.$form.createForm(this),visible:!1,visible_edit:!1,loading:!1,data:r,columns:l,page:1,confirmLoading:!1,editRecord:{},post:{vname:"",xsort:"",status:1},idd:0,addtitle:"添加",is_disabled:!1}},activated:function(){},methods:{listpage:function(){this.visible=!0,this.idd=0,this.visible_edit=!1,this.getList()},getList:function(){var t=this;this.loading=!0,this.search["page"]=this.page,this.request(o["a"].getVmonitorTypeList,this.search).then((function(e){t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.data=e.list,t.loading=!1}))},handleSubmit:function(){var t=this;return!this.post.vname||this.post.vname.length<1?(this.$message.error("请填写类型名称!"),!1):this.post.vname.length>15?(this.$message.error("请保持填写的类型名称在15个字符以内!"),!1):(this.post.id=this.idd,this.confirmLoading=!0,void this.request(o["a"].addVmonitorType,this.post).then((function(e){t.confirmLoading=!1,t.$message.success("保存成功!"),setTimeout((function(){t.visible_edit=!1,t.idd=0,t.editRecord={},t.post={vname:"",xsort:"",status:1},t.getList(),t.$emit("ok")}),1e3)})).catch((function(e){t.confirmLoading=!1})))},table_change:function(t){console.log("e",t),t.current&&t.current>0&&(this.pagination.current=t.current,this.page=t.current,this.getList())},handleCancel:function(){this.visible=!1,this.idd=0,this.editRecord={},this.post={vname:"",xsort:"",status:1}},handle2Cancel:function(){this.visible_edit=!1,this.idd=0,this.editRecord={},this.post={vname:"",xsort:"",status:1},this.is_disabled=!1},addItem:function(){this.visible_edit=!0,this.editRecord={},this.idd=0,this.post={vname:"",xsort:"",status:1},this.is_disabled=!1},editItem:function(t){this.visible_edit=!0,this.editRecord=t,this.idd=t.id,this.post.vname=t.vname,this.post.xsort=t.xsort,this.post.status=1*t.status,t.xtype>0&&(this.is_disabled=!0)},delItem:function(t){var e=this,a="你确定要删除【"+t.vname+"】这条数据吗？";t.relation_count>0&&(a="【"+t.vname+"】已经关联了"+t.relation_count+"条数据，您确定删除？"),e.$confirm({title:"操作提示",cancelText:"取消",okText:"确认删除",content:a,onOk:function(){e.request(o["a"].delVmonitorType,{idd:t.id}).then((function(t){e.$message.success("操作成功！")})).catch((function(t){e.$message.error("操作失败！")})),e.getList()},onCancel:function(){}})},dateOnChange:function(t,e){this.search.date=e,console.log("search",this.search)},searchList:function(){console.log("search",this.search),this.page=1;var t={current:1,pageSize:20,total:20};this.table_change(t)},resetList:function(){this.search={keyword:"",page:1},this.getList()}}},d=c,u=(a("a7ab3"),a("2877")),h=Object(u["a"])(d,s,i,!1,null,"1bd6b92a",null);e["default"]=h.exports},"81a7":function(t,e,a){},a7ab3:function(t,e,a){"use strict";a("81a7")}}]);