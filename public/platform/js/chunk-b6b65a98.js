(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b6b65a98"],{"2b69":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.dialogVisible,title:"选择店铺",centered:"",maskClosable:!1,width:600},on:{ok:e.chooseStoreOk,cancel:e.chooseStoreCancel}},[[a("a-form-model",{attrs:{layout:"inline",model:e.modalSearchForm,"label-col":{span:2},"wrapper-col":{span:22}}},[a("a-row",[a("a-col",{staticClass:"mr-10",attrs:{span:10}},[a("a-cascader",{attrs:{"field-names":{label:"area_name",value:"area_id",children:"children"},options:e.areaList,placeholder:"请选择省市区"},on:{change:e.onAreaChange},model:{value:e.searchForm.areaList,callback:function(t){e.$set(e.searchForm,"areaList",t)},expression:"searchForm.areaList"}})],1),a("a-col",{staticClass:"mr-20",attrs:{span:10}},[a("a-input",{attrs:{placeholder:"输入店铺名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.selectStoreList()}},model:{value:e.modalSearchForm.keyword,callback:function(t){e.$set(e.modalSearchForm,"keyword",t)},expression:"modalSearchForm.keyword"}})],1),a("a-col",{attrs:{span:2}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.selectStoreList()}}},[e._v(" 查询 ")])],1)],1)],1),e.modalTableData?[a("a-checkbox",{staticStyle:{"padding-left":"7px",margin:"10px 0 5px"},attrs:{indeterminate:e.indeterminate,checked:e.checkAll},on:{change:function(t){return e.onCheckAllChange(t)}}},[e._v("全选")]),a("a-row",[a("a-col",{staticStyle:{"font-size":"20px","padding-left":"7px"},attrs:{span:24}},e._l(e.modalTableData,(function(t,o){return a("a-col",{key:t.store_id,staticStyle:{"line-height":"40px"},attrs:{span:24}},[t.showRow?a("div",[a("a-checkbox",{key:o,attrs:{value:t.store_id,checked:-1!=e.grouplList1.indexOf(t.store_id)},on:{change:function(a){return e.getStoreId(a,t)}}},[e._v(" "+e._s(t.name)+" ")]),t.package_list&&t.package_list.length?[a("a-col",{attrs:{span:24}},[a("a-radio-group",{attrs:{name:"radioGroup"},on:{change:function(a){return e.onExpandedRowChange(a,t)}},model:{value:e.radio_check,callback:function(t){e.radio_check=t},expression:"radio_check"}},e._l(t.package_list,(function(t){return a("a-radio",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)]:e._e()],2):e._e()])})),1)],1),a("a-row",{staticClass:"text-right"},[[a("a-pagination",{attrs:{total:e.total,"show-less-items":"",hideOnSinglePage:""},on:{change:e.pageChange},model:{value:e.modalSearchForm.page,callback:function(t){e.$set(e.modalSearchForm,"page",t)},expression:"modalSearchForm.page"}})]],2)]:e._e()]],2)],1)},r=[],s=(a("d3b7"),a("159b"),a("b0c0"),a("a434"),a("a9e3"),a("4de4"),a("d81d"),a("c740"),a("a15b"),a("4b77")),i=a("da05"),n=a("290c"),c={components:{ARow:n["a"],ACol:i["b"]},props:{visible:{type:Boolean,default:!1},storeIdArr:{type:[Array,Object],default:function(){}}},watch:{visible:function(e,t){this.checkAll=!1,this.indeterminate=!1,this.grouplList1=[],this.storeIds=[],this.dialogVisible=e,this.getAllArea(),this.selectStoreList()}},mounted:function(){this.dialogVisible=this.visible,this.getAllArea(),this.selectStoreList()},data:function(){return{checkAll:!0,indeterminate:!0,radio_check:[],total:0,grouplList1:[],showHeader:!1,dialogVisible:!1,areaList:[],searchForm:{storeIdArray:[],areaList:[]},storeIds:[],modalSearchForm:{province_id:"",city_id:"",area_id:"",keyword:"",page:1},columns:[{dataIndex:"name",slots:{title:"name"},align:"center"}],modalTableData:[],curStoreList:[],modalSelectedRowKeys:[],expandedRowKeys:[]}},methods:{onCheckAllChange:function(e){var t=this;e.target.checked?(this.checkAll=!0,this.indeterminate=!0,this.modalTableData.forEach((function(e){e.show=!0,-1==t.grouplList1.indexOf(e.store_id)&&(t.grouplList1.push(e.store_id),t.storeIds.push({store_id:e.store_id,package_id:"",name:e.name}))}))):(this.modalTableData.forEach((function(e){e.show=!1;var a=t.grouplList1.indexOf(e.store_id);a>-1&&(t.grouplList1.splice(a,1),t.storeIds.splice(a,1))})),this.checkAll=!1,this.indeterminate=!1)},pageChange:function(e,t){this.modalSearchForm.page=e,this.modalTableData=this.modalTableDataGet(this.modalTableData,this.modalSearchForm.page)},getStoreId:function(e,t){if(e.target.checked)this.grouplList1.push(e.target.value),this.storeIds.push({store_id:t.store_id,package_id:"",name:t.name}),t.show=!0;else{var a=this.grouplList1.indexOf(e.target.value);a>-1&&(this.grouplList1.splice(a,1),this.storeIds.splice(a,1)),t.show=!1}this.grouplList1.length==this.modalTableData.length?(this.indeterminate=!0,this.checkAll=!0):(this.indeterminate=!1,this.checkAll=!1)},modalTableDataGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=[];if(e&&e.length){var r=(Number(t)-1)*a,s=Number(t)*a-1>this.total?this.total:Number(t)*a-1;o=e.filter((function(e,t){return e.showRow=!1,t>=r&&t<=s&&(e.showRow=!0),e}))}return o},selectStoreList:function(){var e=this,t={province_id:this.modalSearchForm.province_id,city_id:this.modalSearchForm.city_id,area_id:this.modalSearchForm.area_id,keyword:this.modalSearchForm.keyword,page:0};this.request(s["a"].getMerchantStoreList,t).then((function(t){if(t.list&&t.list.length?e.modalTableData=e.modalTableDataGet(t.list,e.modalSearchForm.page):e.modalTableData=[],e.total=t.total,0==e.storeIdArr.length)e.modalTableData.forEach((function(t){var a=e.grouplList1.indexOf(t.store_id);-1==a&&(e.grouplList1.push(t.store_id),e.storeIds.push({store_id:t.store_id,package_id:"",name:t.name}))})),e.checkAll=!0,e.indeterminate=!0;else{var a=0;e.storeIdArr.forEach((function(t){var o=e.grouplList1.indexOf(t.store_id);-1==o&&(e.grouplList1.push(t.store_id),e.storeIds.push({store_id:t.store_id,package_id:t.package_id,name:t.name})),e.modalTableData=e.modalTableData.map((function(e){return t.store_id==e.store_id&&(e.show=!0,a+=1),e}))})),a!=e.modalTableData.length?(e.checkAll=!1,e.indeterminate=!1):(e.checkAll=!0,e.indeterminate=!0)}}))},getAllArea:function(){var e=this;this.request(s["a"].getAllArea).then((function(t){e.areaList=t}))},onAreaChange:function(e){this.modalSearchForm.province_id=e[0],this.modalSearchForm.city_id=e[1],this.modalSearchForm.area_id=e[2],this.selectStoreList()},onExpandedRowChange:function(e,t){var a=t.store_id,o=e.target.value,r=this.storeIds.findIndex((function(e){return e.store_id==a}));r>-1?this.storeIds[r].package_id=o:(this.storeIds.push({store_id:a,package_id:o||"",name:t.name}),this.radio_check.push(o))},chooseStoreOk:function(){this.$set(this.searchForm,"storeIdArray",this.grouplList1);var e=[],t="";this.modalTableData&&this.modalTableData.length?this.storeIds.forEach((function(a){e.push(a.name),t=e.filter((function(e){return e})).join(",")})):this.storeIds=[],this.$emit("submit",{storeName:t,storeIds:this.storeIds}),this.chooseStoreCancel()},chooseStoreCancel:function(){this.modalTableData=[],this.dialogVisible=!1,this.$emit("update:visible",this.dialogVisible),this.$set(this.modalSearchForm,"keyword",""),this.$set(this.modalSearchForm,"page",1),this.$set(this.modalSearchForm,"province_id",""),this.$set(this.modalSearchForm,"city_id",""),this.$set(this.modalSearchForm,"area_id",""),this.$set(this.searchForm,"areaList",[])},onModalSelectChange:function(e){var t=this;this.expandedRowKeys=e,this.storeIds=[],this.modalSelectedRowKeys=e,this.modalSelectedRowKeys.forEach((function(e){t.storeIds.push({store_id:e,package_id:""})}))}}},d=c,l=(a("9469"),a("2877")),h=Object(l["a"])(d,o,r,!1,null,"6e2d32d5",null);t["default"]=h.exports},3862:function(e,t,a){},"4b77":function(e,t,a){"use strict";var o,r=a("ade3"),s=(o={addLabel:"/group/merchant.goods/addLabel",getLabelList:"/group/merchant.goods/getLabelList",getMerchantStoreList:"/group/merchant.goods/getMerchantStoreList",getAllArea:"/common/common.area/getAllArea",getGoodsCashingDetail:"/group/merchant.goods/getGoodsCashingDetail",getGroupEditInfo:"/group/merchant.goods/getGroupEditInfo"},Object(r["a"])(o,"getGoodsCashingDetail","/group/merchant.goods/getGoodsCashingDetail"),Object(r["a"])(o,"saveCashingGoods","/group/merchant.goods/submitCashing"),Object(r["a"])(o,"saveNomalGoods","/group/merchant.goods/saveNomalGoods"),Object(r["a"])(o,"getGoodsNormalDetail","/group/merchant.goods/getGoodsNormalDetail"),Object(r["a"])(o,"getGoodsList","/group/merchant.goods/getGoodsList"),Object(r["a"])(o,"courseAppoint","/group/merchant.Goods/courseAppoint"),Object(r["a"])(o,"getCourseAppointDetail","/group/merchant.Goods/getCourseAppointDetail"),Object(r["a"])(o,"setStoreRecommend","/group/merchant.goods/setStoreRecommend"),Object(r["a"])(o,"getStoreRecommend","/group/merchant.goods/getStoreRecommend"),Object(r["a"])(o,"getGoodsOrderList","/group/merchant.goods/getGoodsOrderList"),Object(r["a"])(o,"saveBookingAppoint","/group/merchant.Goods/saveBookingAppoint"),Object(r["a"])(o,"showBookingAppoint","/group/merchant.Goods/showBookingAppoint"),Object(r["a"])(o,"getStoreList","/group/merchant.AppointManage/getStoreList"),Object(r["a"])(o,"getGiftMsg","/group/merchant.AppointManage/getGiftMsg"),Object(r["a"])(o,"updateAppointGift","/group/merchant.AppointManage/updateAppointGift"),Object(r["a"])(o,"getAppointArriveList","/group/merchant.AppointManage/getAppointArriveList"),Object(r["a"])(o,"updateAppointArriveStatus","/group/merchant.AppointManage/updateAppointArriveStatus"),Object(r["a"])(o,"getGoodsOrderDetail","/group/merchant.goods/getGoodsOrderDetail"),Object(r["a"])(o,"orderExportUrl","/group/merchant.goods/exportOrder"),Object(r["a"])(o,"noteInfo","/group/merchant.goods/noteInfo"),Object(r["a"])(o,"orderDetail","/group/merchant.goods/orderDetail"),Object(r["a"])(o,"updateOrderNote","/group/merchant.goods/updateOrderNote"),Object(r["a"])(o,"getRatioList","/group/merchant.goods/getRatioList"),Object(r["a"])(o,"getGoodsCouponList","/group/merchant.goods/getGoodsCouponList"),Object(r["a"])(o,"couponDetail","/group/merchant.goods/couponDetail"),Object(r["a"])(o,"couponVerify","/group/merchant.goods/couponVerify"),Object(r["a"])(o,"exportGoodsCouponList","/group/merchant.goods/exportGoodsCouponList"),Object(r["a"])(o,"groupPackageLists","/group/merchant.goods/groupPackageLists"),Object(r["a"])(o,"showGroupPackage","/group/merchant.goods/showGroupPackage"),Object(r["a"])(o,"saveGroupPackage","/group/merchant.goods/saveGroupPackage"),Object(r["a"])(o,"delGroupPackage","/group/merchant.goods/delGroupPackage"),Object(r["a"])(o,"delPackageBindGroup","/group/merchant.goods/delPackageBindGroup"),o);t["a"]=s},9469:function(e,t,a){"use strict";a("3862")}}]);