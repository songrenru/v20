(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4db8348a"],{"126e":function(e,t,a){"use strict";var n={regionalAgencyList:"/new_marketing/platform.RegionalAgency/regionalAgencyList",findArea:"/new_marketing/platform.RegionalAgency/findArea",findRight:"/new_marketing/platform.RegionalAgency/findRight",findRightEdit:"/new_marketing/platform.RegionalAgency/findRightEdit",addRegionalAgency:"/new_marketing/platform.RegionalAgency/addRegionalAgency",editRegionalAgency:"/new_marketing/platform.RegionalAgency/editRegionalAgency",saveRegionalAgency:"/new_marketing/platform.RegionalAgency/saveRegionalAgency",delRegionalAgency:"/new_marketing/platform.RegionalAgency/delRegionalAgency",reduceWin:"/new_marketing/platform.RegionalAgency/reduceWin",addReduce:"/new_marketing/platform.RegionalAgency/addReduce",getTeamList1:"/new_marketing/platform.RegionalAgency/getTeamList",updatePercent:"/new_marketing/platform.RegionalAgency/updatePercent",getMarketingArtisanList:"/new_marketing/platform.MarketingArtisan/getMarketingArtisanList",getMarketingArtisanCreate:"/new_marketing/platform.MarketingArtisan/getMarketingArtisanCreate",getMarketingArtisanInfo:"/new_marketing/platform.MarketingArtisan/getMarketingArtisanInfo",getMarketingArtisanDir:"/new_marketing/platform.MarketingArtisan/getMarketingArtisanDir",getDirectorList:"/new_marketing/platform.MarketingArtisan/getDirectorList",getMarketingArtisanDel:"/new_marketing/platform.MarketingArtisan/getMarketingArtisanDel",getMarketingDirectorList:"/new_marketing/platform.MarketingDirector/getMarketingDirectorList",getMarketingDirectorCreate:"/new_marketing/platform.MarketingDirector/getMarketingDirectorCreate",getMarketingDirectorInfo:"/new_marketing/platform.MarketingDirector/getMarketingDirectorInfo",getMarketingDirectorDel:"/new_marketing/platform.MarketingDirector/getMarketingDirectorDel",getMarketingDirectorRemove:"/new_marketing/platform.MarketingDirector/getMarketingDirectorRemove",getMarketingDirectorArtisan:"/new_marketing/platform.MarketingDirector/getMarketingDirectorArtisan",getManagerList:"/new_marketing/platform.ServiceManager/serviceManagerList",addManager:"/new_marketing/platform.ServiceManager/addServiceManager",editManager:"/new_marketing/platform.ServiceManager/saveServiceManager",delNoTeamManager:"/new_marketing/platform.ServiceManager/doDelManager",getTeamMemberList:"/new_marketing/platform.ServiceManager/getTeamPerson",upgradeManager:"/new_marketing/platform.ServiceManager/doUpLevel",deleteManager:"/new_marketing/platform.ServiceManager/doDelServiceManager",demoteManager:"/new_marketing/platform.ServiceManager/doDownLevel",getAreaList:"/new_marketing/platform.Region/regionList",getClassifyPriceList:"/new_marketing/platform.Region/classPriceList",saveAreaPriceForm:"/new_marketing/platform.Region/addRegion",saveClassifyPriceForm:"/new_marketing/platform.Region/addClassPrice",deleteAreaPriceForm:"/new_marketing/platform.Region/delRegion",getAreaMealList:"/new_marketing/platform.MarketingPackage/getAreaSearchList",saveAreaMealForm:"/new_marketing/platform.MarketingPackage/editAreaPost",saveAreaMealStatus:"/new_marketing/platform.MarketingPackage/setAreaStatus",getStoreTypeList:"/new_marketing/platform.MarketingPackage/getStoreTypeList",addMeal:"/new_marketing/platform.MarketingPackage/add",getMealList:"/new_marketing/platform.MarketingPackage/getSearchList",deleteMeal:"/new_marketing/platform.MarketingPackage/del",editMeal:"/new_marketing/platform.MarketingPackage/editPost",getCommissionSearchData:"/new_marketing/platform.MarketingPersonSettle/getSearchData",getCommissionList:"/new_marketing/platform.MarketingPersonSettle/getSearchList",teamManagementList:"/new_marketing/platform.TeamManagement/teamManagementList",teamPerformance:"/new_marketing/platform.TeamManagement/teamPerformance",serviceManagerList:"/new_marketing/platform.TeamManagement/serviceManagerList",serviceManagerNoList:"/new_marketing/platform.TeamManagement/serviceManagerNoList",regionalAgentList:"/new_marketing/platform.TeamManagement/regionalAgentList",artisanList:"/new_marketing/platform.TeamManagement/artisanList",teamManagementAdd:"/new_marketing/platform.TeamManagement/teamManagementAdd",teamManagementBasic:"/new_marketing/platform.TeamManagement/teamManagementBasic",teamManagementReplace:"/new_marketing/platform.TeamManagement/teamManagementReplace",teamManagementUpgrade:"/new_marketing/platform.TeamManagement/teamManagementUpgrade",teamBusinessList:"/new_marketing/platform.TeamManagement/teamBusinessList",teamManagementDel:"/new_marketing/platform.TeamManagement/teamManagementDel",teamManagementTransfer:"/new_marketing/platform.TeamManagement/teamManagementTransfer",teamManagementDiss:"/new_marketing/platform.TeamManagement/teamManagementDiss",teamMemberAdd:"/new_marketing/platform.TeamManagement/teamMemberAdd",teamManagementEdit:"/new_marketing/platform.TeamManagement/teamManagementEdit",teamMemberEdit:"/new_marketing/platform.TeamManagement/teamMemberEdit",teamMemberCode:"/new_marketing/platform.TeamManagement/teamMemberCode",teamManagementSavage:"/new_marketing/platform.TeamManagement/teamManagementSavage",teamManagementMerchantList:"/new_marketing/platform.TeamManagement/teamManagementMerchantList",teamManagementSavageDetail:"/new_marketing/platform.TeamManagement/teamManagementSavageDetail",getCommunityOrderDetail:"/new_marketing/platform.TeamManagement/getCommunityOrderDetail",positionReviewList:"/new_marketing/platform.PositionReview/positionReviewList",getTeamList:"/new_marketing/platform.PositionReview/getTeamList",reviewAgree:"/new_marketing/platform.PositionReview/reviewAgree",reviewDisagree:"/new_marketing/platform.PositionReview/reviewDisagree",getOrderList:"/new_marketing/platform.OrderInfo/orderList",getAreaUidByProvince:"/new_marketing/platform.OrderInfo/getAreaUidByProvince",getTeamIdByAreaUid:"/new_marketing/platform.OrderInfo/getTeamIdByAreaUid",getOrderDetail:"/new_marketing/platform.OrderInfo/getOrderInfo",teamManagementMerchantTransferList:"/new_marketing/platform.TeamManagement/teamManagementMerchantTransferList",teamManagementMerchantTransferCreate:"/new_marketing/platform.TeamManagement/teamManagementMerchantTransferCreate",getMerchantList:"/new_marketing/platform.Merchant/getMerchantList",getMerchantStoreList:"/new_marketing/platform.Merchant/getMerchantStoreList",teamMembeInfo:"/new_marketing/platform.TeamManagement/teamMembeInfo",getPropertyList:"/new_marketing/platform.MarketingProperty/getPropertyList",villageTransferBusiness:"/new_marketing/platform.MarketingProperty/transferBusiness",teamMerchantOrderList:"/new_marketing/platform.TeamManagement/teamMerchantOrderList",getHousePropertyList:"/new_marketing/platform.HouseProperty/getHousePropertyList",getHousePropertyDetail:"/new_marketing/platform.HouseProperty/getHousePropertyDetail"};t["a"]=n},"84d4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bg-ff wrap"},[a("div",{staticClass:"page-title"},[e._v("商家列表")]),a("div",{staticClass:"content"},[a("a-form-model",{attrs:{model:e.searchForm,layout:"inline",labelCol:{span:5},wrapperCol:{span:19}}},[a("a-row",{attrs:{type:"flex",align:"middle"}},[a("a-col",{attrs:{span:10}},[a("a-form-model-item",{attrs:{label:"区域"}},[a("a-cascader",{attrs:{options:e.areaList,placeholder:"请选择省市区"},on:{change:e.areaChange},model:{value:e.searchForm.area,callback:function(t){e.$set(e.searchForm,"area",t)},expression:"searchForm.area"}})],1)],1),a("a-col",{attrs:{span:10}},[a("a-form-model-item",{attrs:{label:"区域代理"}},[a("a-select",{attrs:{placeholder:"请选择区域代理",allowClear:""},model:{value:e.searchForm.area_uid,callback:function(t){e.$set(e.searchForm,"area_uid",t)},expression:"searchForm.area_uid"}},e._l(e.regionalAgentList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:4}},[a("a-button",{staticClass:"mr-10",attrs:{type:"primary"},on:{click:function(t){return e.getList(!0)}}},[e._v("查询")]),a("a-button",{on:{click:function(t){return e.resetBtn()}}},[e._v("重置")])],1)],1),a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:10}},[a("a-form-model-item",{attrs:{label:"商家名"}},[a("a-input",{attrs:{placeholder:"请输入商家名称"},model:{value:e.searchForm.merchant_name,callback:function(t){e.$set(e.searchForm,"merchant_name",t)},expression:"searchForm.merchant_name"}})],1)],1),a("a-col",{attrs:{span:10}},[a("a-form-model-item",{attrs:{label:"业务员"}},[a("a-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.searchForm.user_name,callback:function(t){e.$set(e.searchForm,"user_name",t)},expression:"searchForm.user_name"}})],1)],1)],1),a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:10}},[a("a-form-model-item",{attrs:{label:"注册时间"}},[a("a-range-picker",{attrs:{ranges:{"今日":[e.moment(),e.moment()],"近7天":[e.moment(),e.moment().add(7,"days")],"近15天":[e.moment(),e.moment().add(15,"days")],"近30天":[e.moment(),e.moment().add(30,"days")]},value:e.time,format:"YYYY-MM-DD"},on:{change:e.onDateRangeChange}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1)],1)],1)],1),e.selectedRowKeys.length?a("div",{staticClass:"total-performance"},[a("span",{},[e._v("已选择"),a("span",{staticClass:"cr-primary"},[e._v(e._s(e.selectedRowKeys.length))]),e._v("项")]),a("span",{staticClass:"mr-10 ml-10 cr-f1"},[e._v("|")]),a("span",[e._v("订单总金额："),a("span",{staticClass:"fw-bold"},[e._v(e._s(e.totalAchievement))])]),a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.clearOpt()}}},[e._v("清空")])],1):e._e(),a("a-table",{staticClass:"mt-20",attrs:{columns:e.columns,"data-source":e.list,pagination:e.pagination,rowKey:"mer_id","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"store_count_used",fn:function(t,n){return a("span",{},[t&&0!=t?a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.actionBtn(n,"storeDetail")}}},[e._v(e._s(t))]):a("span",[e._v(e._s(t))])],1)}},{key:"order",fn:function(t,n){return a("span",{},[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.actionBtn(n,"detail")}}},[e._v("查看")])],1)}},{key:"action",fn:function(t,n){return a("span",{},[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.actionBtn(n,"businessTransfer")}}},[e._v("业务转移")])],1)}}])})],1),a("a-modal",{attrs:{title:e.modalTitle,visible:e.modalVisible,maskClosable:!1,width:"40%"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-form-model",{attrs:{model:e.modalForm,"label-col":{span:6},"wrapper-col":{span:14}}},[a("a-form-model-item",{attrs:{label:"选择接手成员",help:"转移后此商家后续业务归接手成员服务，且业务提成均属接手成员"}},[a("a-cascader",{attrs:{fieldNames:{label:"name",value:"id",children:"lists"},options:e.transferMemberList,placeholder:"请选择"},model:{value:e.modalForm.manager_uid,callback:function(t){e.$set(e.modalForm,"manager_uid",t)},expression:"modalForm.manager_uid"}})],1)],1)],1),a("a-drawer",{attrs:{width:"60%",title:e.drawerTitle,placement:"right",closable:!1,visible:e.drawerVisible},on:{close:function(t){e.drawerVisible=!1}}},e._l(e.storeList,(function(t,n){return a("div",{key:n,staticClass:"store"},[a("div",{staticClass:"fw-bold fs-16 mb-20"},[e._v(" "+e._s(t.name)+"店 "),a("span",{staticClass:"cr-primary",class:0==t.status?"cr-red":""},[e._v("（"+e._s(t.status_value)+"）")])]),a("a-row",{staticClass:"mt-10"},[a("a-col",{attrs:{span:8}},[a("div",{staticClass:"flex"},[a("span",{staticClass:"text-nowrap"},[e._v("店铺名称：")]),a("span",{staticClass:"text-wrap flex-1"},[e._v(e._s(t.name))])])]),a("a-col",{attrs:{span:8}},[a("div",{staticClass:"flex"},[a("span",{staticClass:"text-nowrap"},[e._v("店铺类型：")]),a("span",{staticClass:"text-wrap flex-1"},[e._v(e._s(t.store_type_name))])])]),a("a-col",{attrs:{span:8}},[a("div",{staticClass:"flex"},[a("span",{staticClass:"text-nowrap"},[e._v("创建时间：")]),a("span",{staticClass:"text-wrap flex-1"},[e._v(e._s(t.add_time))])])])],1),a("a-row",{staticClass:"mt-10"},[a("a-col",{attrs:{span:8}},[a("div",{staticClass:"flex"},[a("span",{staticClass:"text-nowrap"},[e._v("有效时间：")]),a("span",{staticClass:"text-wrap flex-1"},[e._v(" "+e._s(t.effect_time))])])]),a("a-col",{attrs:{span:8}},[a("div",{staticClass:"flex"},[a("span",{staticClass:"text-nowrap"},[e._v("店铺电话：")]),a("span",{staticClass:"text-wrap flex-1"},[e._v(e._s(t.phone))])])]),a("a-col",{attrs:{span:8}},[a("div",{staticClass:"flex"},[a("span",{staticClass:"text-nowrap"},[e._v("店铺地址：")]),a("span",{staticClass:"text-wrap flex-1"},[e._v(e._s(t.address))])])])],1)],1)})),0)],1)},r=[],i=a("5530"),s=(a("7db0"),a("d3b7"),a("4de4"),a("a9e3"),a("b680"),a("d81d"),a("c1df")),o=a.n(s),m=a("126e"),g={data:function(){return{areaList:[],regionalAgentList:[],searchForm:{merchant_name:"",area:[],user_name:"",area_uid:void 0,begin_time:"",end_time:""},time:[],columns:[{title:"商家名称",dataIndex:"merchant_name",align:"center",width:"12%"},{title:"业务员",dataIndex:"user_name",align:"center",width:"12%"},{title:"已购买店铺数",dataIndex:"store_count_buy",align:"center"},{title:"已创建店铺",dataIndex:"store_count_used",scopedSlots:{customRender:"store_count_used"},align:"center"},{title:"过期店铺数",dataIndex:"store_count_overdue",align:"center"},{title:"订单总金额",dataIndex:"total_money",align:"center"},{title:"商家信息订单",dataIndex:"order",scopedSlots:{customRender:"order"},align:"center"},{title:"注册时间",dataIndex:"reg_time",align:"center",sortDirections:["descend","ascend"],sorter:function(e,t){return o()(e.reg_time).unix()-o()(t.reg_time).unix()}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center"}],list:[],pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(e){return"共 ".concat(e," 条记录")}},selectedRowKeys:[],totalAchievement:"",modalTitle:"",modalVisible:!1,modalType:"",modalForm:{manager_uid:void 0},currentData:"",drawerVisible:!1,drawerTitle:"商家店铺",storeList:[],transferMemberList:[]}},mounted:function(){this.getAreaList(),this.getRegionalAgentList(),this.getList()},methods:{moment:o.a,getAreaList:function(){var e=this;this.request(m["a"].findArea,{}).then((function(t){e.areaList=t||[]}))},getRegionalAgentList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.request(m["a"].regionalAgentList,{area:t}).then((function(t){e.regionalAgentList=t||[],e.regionalAgentList.length&&e.searchForm.area_uid&&(e.regionalAgentList.find((function(t){return t.id==e.searchForm.area_uid}))||e.$set(e.searchForm,"area_uid",void 0))}))},areaChange:function(e){this.getRegionalAgentList(e)},onDateRangeChange:function(e,t){this.$set(this,"time",[e[0],e[1]]),this.$set(this.searchForm,"begin_time",t[0]),this.$set(this.searchForm,"end_time",t[1])},clearOpt:function(){this.selectedRowKeys=[],this.totalAchievement=""},onPageChange:function(e,t){this.$set(this.pagination,"current",e),this.getList()},onPageSizeChange:function(e,t){this.$set(this.pagination,"pageSize",t),this.getList()},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(this.$set(this.pagination,"current",1),this.$set(this.pagination,"pageSize",10));var a=Object(i["a"])({page:this.pagination.current,pageSize:this.pagination.pageSize},this.searchForm);a.area_uid=a.area_uid||"",this.request(m["a"].getMerchantList,a).then((function(t){e.list=t.list||[],e.pagination.total=t.count}))},resetBtn:function(){this.searchForm=this.$options.data().searchForm,this.createTime=[],this.getRegionalAgentList(),this.getList(!0)},onSelectChange:function(e){var t=this;if(this.selectedRowKeys=e,this.selectedRowKeys.length){var a=this.list.filter((function(e){if(-1!=t.selectedRowKeys.indexOf(e.mer_id))return e})),n=a.reduce((function(e,t){return Number(t.total_money)+e}),0);this.totalAchievement=n>1e4?(Number(n)/1e3).toFixed(2)+"万":n.toFixed(2)}},actionBtn:function(e,t){"detail"==t?this.$router.push({path:"/new_marketing/platform/merchantDetail",query:{id:e.mer_id}}):"businessTransfer"==t?(this.currentData=e,this.modalType="businessTransfer",this.modalTitle="业务转移",this.modalVisible=!0,this.teamMemberList()):"storeDetail"==t&&(this.currentData=e,this.drawerVisible=!0,this.drawerTitle=e.merchant_name+"商家店铺",this.getMerchantStoreList())},handleOk:function(){"businessTransfer"==this.modalType&&this.businessTransfer()},handleCancel:function(){this.modalVisible=!1,this.modalTitle="",this.modalType="",this.currentData="",this.modalForm=this.$options.data().modalForm},businessTransfer:function(){var e=this;if(this.modalForm.manager_uid.length){var t={id:this.currentData.id,team_id:this.modalForm.manager_uid[0],per_id:this.modalForm.manager_uid[1]};this.request(m["a"].teamManagementMerchantTransferCreate,t).then((function(t){e.$message.success("业务转移成功"),e.getList(!0),e.modalVisible&&e.handleCancel()}))}else this.$message.error("请选择接手成员")},teamMemberList:function(){var e=this;this.request(m["a"].teamManagementMerchantTransferList,{}).then((function(t){t&&t.length&&(t=t.map((function(t){return(!t.lists||t.lists&&!t.lists.length)&&(t.disabled=!0),t.lists&&t.lists.length&&(t.lists=t.lists.filter((function(t){var a=e.currentData.person_id;if(t.id!=a)return t}))),t})),e.transferMemberList=t)}))},getMerchantStoreList:function(){var e=this,t={merId:this.currentData.mer_id};this.request(m["a"].getMerchantStoreList,t).then((function(t){t&&t.length&&(e.storeList=t)}))}}},l=g,c=(a("e5d9"),a("0c7c")),d=Object(c["a"])(l,n,r,!1,null,"1f34eb7d",null);t["default"]=d.exports},"9ca03":function(e,t,a){},e5d9:function(e,t,a){"use strict";a("9ca03")}}]);