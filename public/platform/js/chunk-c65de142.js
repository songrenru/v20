(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c65de142","chunk-d59f1386"],{"78bd":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:e.handleCancel}},[e._v(" 取消 ")]),e.isShow?a("a-button",{key:"submit",attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.handleSubmit}},[e._v(" 确定 ")]):e._e()],1),a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{staticClass:"rule_info",attrs:{form:e.form}},[a("div",[a("h3",{staticStyle:{"margin-left":"3.5%","margin-bottom":"2%",display:"block","font-weight":"900"}},[e._v("基本设置")])]),e.isSpecialSelect?a("div",[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title",staticStyle:{width:"23.5%"}},[a("span",{staticClass:"label_col"},[e._v("收费科目")])]),a("div",{staticClass:"input_container"},[a("a-select",{staticStyle:{width:"182px"},attrs:{"show-search":""},on:{change:e.handleChargeNumberChange},model:{value:e.subjectName,callback:function(t){e.subjectName=t},expression:"subjectName"}},e._l(e.chargeNumber,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title",staticStyle:{width:"23.5%"}},[a("span",{staticClass:"label_col"},[e._v("收费项目")])]),a("div",{staticClass:"input_container"},[a("a-select",{staticStyle:{width:"182px"},attrs:{"show-search":""},on:{change:e.handleChargeProjectChange},model:{value:e.charge_project_name,callback:function(t){e.charge_project_name=t},expression:"charge_project_name"}},e._l(e.chargeProject,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)])])],1):e._e(),e.isSpecial||"park_new"==e.project_type?a("div",["park_new"!=e.project_type?a("div",[e.show.is_bill_create_set?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("账单生成周期设置")])]),a("div",{staticClass:"input_container"},[a("a-select",{staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled},on:{change:e.billCreateSetChange},model:{value:e.post.bill_create_set,callback:function(t){e.$set(e.post,"bill_create_set",t)},expression:"post.bill_create_set"}},e._l(e.cycle_array,(function(t){return a("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("div",{staticClass:"label_desc"})])]):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("收费标准名称")])]),a("div",{staticClass:"input_container"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.charge_name",{initialValue:e.post.charge_name,rules:[{required:!0,message:e.L("请输入名称！")}]}],expression:"['post.charge_name',{ initialValue: post.charge_name,rules: [{ required: true, message: L('请输入名称！') }] }]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,maxLength:30,placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"})])]),e.show.is_fees_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("计费模式")])]),a("div",{staticClass:"input_container"},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.fees_type",{initialValue:e.post.fees_type}],expression:"['post.fees_type', {initialValue:post.fees_type}]"}],attrs:{disabled:e.is_disabled},on:{change:e.feesTypeChange}},[a("a-radio",{attrs:{value:1}},[e._v(" 固定费用 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 单价*计量单位 ")])],1)],1),a("div",{staticClass:"label_desc"})])]):e._e(),e.show.is_unit_gage?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("计量单位")])]),a("div",{staticClass:"input_container"},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.unit_gage_type",{initialValue:e.post.unit_gage_type}],expression:"['post.unit_gage_type', {initialValue:post.unit_gage_type}]"}],attrs:{disabled:e.is_disabled},on:{change:e.unitGageChange}},[a("a-radio",{attrs:{value:1}},[e._v(" 房屋面积 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 自定义 ")])],1),e.unit_gage_txt_status?a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.unit_gage_txt",{initialValue:e.post.unit_gage_txt}],expression:"['post.unit_gage_txt',{ initialValue: post.unit_gage_txt}]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,maxLength:8,placeholder:"输入计量单位"}}):e._e()],1),a("div",{staticClass:"label_desc"},[e._v(" 根据收费项具体计算方式选择对应的计量单位，若不满足，则可自定义，例如楼道面积、走廊面积等，自定义的计量单位在绑定费用至房间/车位时需要填写对应的数值 ")])])]):e._e(),e.show.is_unit_price?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("单价")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.unit_price",{initialValue:e.post.unit_price,rules:[{required:!0,message:e.L("请输入单价！")}]}],expression:"['post.unit_price',{ initialValue: post.unit_price,rules: [{ required: true, message: L('请输入单价！') }] }]"}],staticStyle:{width:"182px"},attrs:{formatter:function(e){return(""+e).replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(/^(\-)*(\d+)\.(\d\d\d\d)(.*)$/,"$1$2.$3").replace(/^\./g,"")},parser:function(e){return e.replace(/^(\-)*(\d+)\.(\d\d\d\d)(.*)$/,"$1$2.$3")},disabled:e.is_disabled,min:0,maxLength:10,placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 设置计费的单价,最多支持四位小数 ")])])])]):e._e(),e.show.is_charge_price?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("收费金额")])]),a("div",{staticClass:"input_container"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.charge_price",{initialValue:e.post.charge_price,rules:[{required:!0,message:e.L("请输入金额！")}]}],expression:"['post.charge_price',{ initialValue: post.charge_price,rules: [{ required: true, message: L('请输入金额！') }] }]"}],staticStyle:{width:"182px"},attrs:{formatter:function(e){return(""+e).replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(/^(\-)*(\d+)\.(\d\d\d\d).*$/,"$1$2.$3").replace(/^\./g,"")},parser:function(e){return e.replace(/^(\-)*(\d+)\.(\d\d\d\d)(.*)$/,"$1$2.$3")},disabled:e.is_disabled,min:0,maxLength:10,placeholder:"请输入"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.show.is_bill_create_set,expression:"show.is_bill_create_set"}]},[e._v(e._s(e.measure))])],1),a("div",{staticClass:"label_desc"},[e._v(" 固定收费金额，每次生成应收账单固定的收款金额，最多支持4位小数 ")])])]):e._e(),e.show.is_bill_arrears_set?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("账单欠费模式")])]),a("div",{staticClass:"input_container"},[a("a-select",{staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled},on:{change:e.billArrearsSetChange},model:{value:e.post.bill_arrears_set,callback:function(t){e.$set(e.post,"bill_arrears_set",t)},expression:"post.bill_arrears_set"}},e._l(e.arrears_array,(function(t){return a("a-select-option",{key:t.key},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("div",{staticClass:"label_desc"},[e._v(" 预生成即表示在账单开始时间生成应收账单，后生成即在账单结束时间生成应收账单 ")])])]):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("计算中小数位处理方式")])]),a("div",{staticClass:"input_container"},[e._v(" "+e._s(e.digit_type_txt)+" ")]),a("div",{staticClass:"label_desc"},[e._v(" 计算中小数位处理方式,跟随物业后台小数设置变化，如果物业没设置默认是 四舍五入 ")])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("账单金额计算时小数位")])]),a("div",{staticClass:"input_container"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.rule_digit",{initialValue:e.post.rule_digit}],expression:"['post.rule_digit',{ initialValue: post.rule_digit }]"}],staticStyle:{width:"190px"},attrs:{formatter:function(e){return(""+e).replace(/^(\d)(.*)$/,"$1").replace(/[^1234]/g,"")},parser:function(e){return e.replace(/^(\d)(.*)$/,"$1").replace(/[^1234]/g,"")},disabled:e.is_disabled,min:0,maxLength:1,placeholder:"请输(1到4)其中一个数字"}}),e._v(" 位 ")],1),a("div",{staticClass:"label_desc"},[e._v(" 在生成账单金额计算过程中带多少位小数位运算,最多支持四位小数（请输(1到4)其中一个数字），不设置则是跟随物业后台小数处理设置，最终订单金额是小数位最多不超过2位 ")])])]),e.show.is_unit_price?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("单位")])]),a("div",{staticClass:"input_container"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.measure_unit",{initialValue:e.post.measure_unit}],expression:"['post.measure_unit',{ initialValue: post.measure_unit }]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 不填默认元/度 ")])])]):e._e(),e.show.is_bill_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("生成账单模式")])]),a("div",{staticClass:"input_container"},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.bill_type",{initialValue:e.post.bill_type}],expression:"['post.bill_type', {initialValue:post.bill_type}]"}],attrs:{disabled:e.is_disabled}},[a("a-radio",{attrs:{value:1}},[e._v(" 手动生成 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 自动生成 ")])],1)],1),a("div",{staticClass:"label_desc"},[e._v(" 手动生成账单需手动操作给收费对象生成应缴账单，一般用于停车费的收取；自动生成账单则系统根据账单开始生成时间自动生成账单 ")])])]):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("倍率")])]),a("div",{staticClass:"input_container"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.rate",{initialValue:e.post.rate}],expression:"['post.rate',{ initialValue: post.rate }]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,min:1,max:100,placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 不填默认1倍 ")])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("是否支持预缴")])]),a("div",{staticClass:"input_container"},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.is_prepaid",{initialValue:e.post.is_prepaid}],expression:"['post.is_prepaid', {initialValue:post.is_prepaid}]"}],attrs:{disabled:e.show.is_prepaid_disabled},on:{change:e.onChange_is_prepaid}},[a("a-radio",{attrs:{value:1}},[e._v(" 是 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 否 ")])],1)],1),a("div",{staticClass:"label_desc"},[e._v(" 用户可提前预缴收费项，可设置预缴的优惠方案 ")])])]),e.show.is_prepaid_button?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("预缴周期管理")])]),a("div",{staticClass:"input_container"},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.prepaidModel.List(e.post.id,1,e.post.bill_create_set,e.isShow)}}},[e._v(" 管理 ")])],1),a("div",{staticClass:"label_desc"},[e._v(" 可管理用户预缴费用的缴费方案 ")])])]):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("周期性费用设置")])]),a("div",{staticClass:"input_container"},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.is_cyclicity_type_set",{initialValue:e.post.is_cyclicity_type_set}],expression:"['post.is_cyclicity_type_set', {initialValue:post.is_cyclicity_type_set}]"}],attrs:{disabled:e.is_disabled},on:{change:e.cyclicityTypeChange}},[a("a-radio",{attrs:{value:0}},[e._v(" 无限期 ")]),a("a-radio",{attrs:{value:1}},[e._v(" 自定义 ")])],1),e.cyclicity_set_txt_status?a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.cyclicity_set",{initialValue:e.post.cyclicity_set}],expression:"['post.cyclicity_set',{ initialValue: post.cyclicity_set}]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,min:1,placeholder:"请输入收费时长"}}):e._e()],1),a("div",{staticClass:"label_desc"},[e._v(" 根据实际收费情况进行设置，若是需要业主一直缴纳则是无限期；若是仅需缴纳一段时间的费用，则自定收费时长即可"),a("br")])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("未入住房屋折扣")])]),a("div",{staticClass:"input_container"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.not_house_rate",{initialValue:e.post.not_house_rate}],expression:"['post.not_house_rate',{ initialValue: post.not_house_rate }]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,min:0,max:100,formatter:function(e){return e+" %"},placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 房屋无人入住的状态下及没有绑定车辆的未使用车位可设置应收费用优惠折扣（以百分比计算，请输入0-100），例如输入80，则按80%进行收取，即100元仅需缴纳80元，优惠掉20元 ")])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("费用标准生效时间")])]),a("div",{staticClass:"input_container"},[a("a-date-picker",{attrs:{mode:e.date_status,format:e.dateFormat,disabled:e.is_disabled,placeholder:"请选择时间",open:e.isOpen},on:{panelChange:e.selectYear,openChange:function(t){return e.onOpenChange(t,"isOpen")}},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 设置后，生成应收账单的费用将根据正在生效的费用标准计算 ")])])])],1):e._e(),"park_new"==e.project_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("收费规则")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item"},[a("a-radio-group",{attrs:{disabled:e.parking.id>0},on:{change:e.chargingrulesChange},model:{value:e.parking.fees_type,callback:function(t){e.$set(e.parking,"fees_type",t)},expression:"parking.fees_type"}},[a("a-radio",{attrs:{value:3}},[e._v(" 临时车收费规则 ")]),a("a-radio",{attrs:{value:4}},[e._v(" 月租车收费规则 ")])],1)],1),a("div",{staticClass:"value_item value_item_txt"})])])]):e._e(),"park_new"==e.project_type&&1*e.parking.fees_type==3?a("div",[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("账单生成周期设置")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item"},[a("a-select",{staticStyle:{width:"182px"},attrs:{disabled:!0,value:1},on:{change:e.billCreateSetChange}},e._l(e.cycle_array,(function(t){return a("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("div",{staticClass:"value_item value_item_txt"})])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("收费标准名称")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item"},[a("a-input",{staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,maxLength:30,placeholder:"请输入"},model:{value:e.parking.charge_name,callback:function(t){e.$set(e.parking,"charge_name",t)},expression:"parking.charge_name"}})],1),a("div",{staticClass:"value_item"})])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("收费类型")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item"},[a("a-select",{staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled},model:{value:e.parking.charge_type,callback:function(t){e.$set(e.parking,"charge_type",t)},expression:"parking.charge_type"}},[a("a-select-option",{attrs:{value:1}},[e._v("二十四小时")])],1)],1),a("div",{staticClass:"value_item value_item_txt"})])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("费用设置")])]),a("div",{staticClass:"input_container_three"},[e._l(e.durationList,(function(t,i){return a("div",{key:i,staticClass:"duration_item"},[a("a-input",{staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,"addon-after":"小时",placeholder:"请输入时长"},model:{value:e.parking.duration_time[i],callback:function(t){e.$set(e.parking.duration_time,i,t)},expression:"parking.duration_time[index]"}}),a("a-input",{staticStyle:{width:"182px","margin-left":"20px"},attrs:{disabled:e.is_disabled,"addon-after":"元",placeholder:"请输入收费金额"},model:{value:e.parking.duration_money[i],callback:function(t){e.$set(e.parking.duration_money,i,t)},expression:"parking.duration_money[index]"}}),a("a-icon",0==i?{staticStyle:{"margin-left":"20px"},attrs:{type:"plus-circle"},on:{click:e.duration_add}}:{staticStyle:{"margin-left":"20px"},attrs:{type:"minus-circle"},on:{click:function(t){return e.duration_reduce(i)}}})],1)})),a("div",{staticClass:"duration_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 1、设置时长，并设置时长收费标准 ")]),a("div",{staticClass:"duration_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 2、车辆入场后超过设置时长，不超过时长收费金额，按时长收费标准收费 ")]),a("div",{staticClass:"duration_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 3、未设置免费时间，车辆入场后按设置时长收费 ")])],2)])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("计算步长")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-input",{staticStyle:{width:"100px"},attrs:{disabled:!0},model:{value:e.maxCount,callback:function(t){e.maxCount=t},expression:"maxCount"}}),a("a-select",{staticStyle:{width:"182px","margin-left":"20px"},attrs:{disabled:e.is_disabled},on:{change:e.chargeTimeChange},model:{value:e.parking.charge_time,callback:function(t){e.$set(e.parking,"charge_time",t)},expression:"parking.charge_time"}},e._l(e.charge_time_list,(function(t,i){return a("a-select-option",{key:i},[e._v(" "+e._s(t.title)+" ")])})),1),a("a-input",{staticStyle:{width:"182px","margin-left":"20px"},attrs:{disabled:e.is_disabled,"addon-after":"元",placeholder:"请输入收费金额"},model:{value:e.parking.charge_money,callback:function(t){e.$set(e.parking,"charge_money",t)},expression:"parking.charge_money"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 1、每超过30分钟加收2元（不足30分钟按30分钟计算） 以此类推 ")])])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("免费时间")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-input",{staticStyle:{width:"270px"},attrs:{disabled:e.is_disabled,"addon-after":"分钟",placeholder:"请输入免费停车时间"},model:{value:e.parking.free_time,callback:function(t){e.$set(e.parking,"free_time",t)},expression:"parking.free_time"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}})])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("封顶收费")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-input",{staticStyle:{width:"270px"},attrs:{disabled:e.is_disabled,"addon-after":"元",placeholder:"请输入最大收取费用"},model:{value:e.parking.max_charge_money,callback:function(t){e.$set(e.parking,"max_charge_money",t)},expression:"parking.max_charge_money"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}})])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("首停时间")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-input",{staticStyle:{width:"270px"},attrs:{disabled:e.is_disabled,"addon-after":"分钟",placeholder:"请输入首停的时间"},model:{value:e.parking.first_free_time,callback:function(t){e.$set(e.parking,"first_free_time",t)},expression:"parking.first_free_time"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 1、首停时间为0时，不计算首停 ")])])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("首停费用")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-input",{staticStyle:{width:"270px"},attrs:{disabled:e.is_disabled,"addon-after":"元",placeholder:"请输入首停费用"},model:{value:e.parking.first_charge_money,callback:function(t){e.$set(e.parking,"first_charge_money",t)},expression:"parking.first_charge_money"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}})])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("费用标准生效时间")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-date-picker",{attrs:{mode:e.date_status,format:e.dateFormat,disabled:e.is_disabled,placeholder:"请选择时间",open:e.isOpen},on:{panelChange:e.selectYear,openChange:function(t){return e.onOpenChange(t,"isOpen")}},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 设置后，生成应收账单的费用将根据正在生效的标准计算 ")])])])])],1):e._e(),"park_new"==e.project_type&&1*e.parking.fees_type==4?a("div",[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("账单生成周期设置")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item"},[a("a-select",{staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled},on:{change:e.billCreateSetChange},model:{value:e.parking.bill_create_set,callback:function(t){e.$set(e.parking,"bill_create_set",t)},expression:"parking.bill_create_set"}},e._l(e.cycle_array,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("div",{staticClass:"value_item value_item_txt"})])])]),e.show.is_prepaid_button?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("预缴时间管理")])])])]):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("收费标准名称")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item"},[a("a-input",{staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,maxLength:30,placeholder:"请输入"},model:{value:e.parking.charge_name,callback:function(t){e.$set(e.parking,"charge_name",t)},expression:"parking.charge_name"}})],1),a("div",{staticClass:"value_item"})])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("收费金额")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item"},[a("a-input",{staticStyle:{width:"180px"},attrs:{disabled:e.is_disabled,"addon-after":e.measure,placeholder:"请输入收费金额"},model:{value:e.parking.charge_price,callback:function(t){e.$set(e.parking,"charge_price",t)},expression:"parking.charge_price"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}})])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("赠送时长")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择",disabled:e.is_disabled},on:{change:e.cycleTypeChange},model:{value:e.parking.give_cycle_type,callback:function(t){e.$set(e.parking,"give_cycle_type",t)},expression:"parking.give_cycle_type"}},e._l(e.give_cycle_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.value}},[e._v(" "+e._s(t.value)+" ")])})),1),e.custom_give_cycle?a("a-input",{staticStyle:{width:"180px","margin-left":"20px"},attrs:{"addon-after":1==e.parking.give_cycle_datetype?"年":2==e.parking.give_cycle_datetype?"月":"日",placeholder:"请输入自定义周期"},model:{value:e.parking.give_cycle_type,callback:function(t){e.$set(e.parking,"give_cycle_type",t)},expression:"parking.give_cycle_type"}}):e._e(),a("a-select",{staticStyle:{width:"120px","margin-left":"20px"},attrs:{placeholder:"请选择",disabled:e.is_disabled},on:{change:e.cycleDateChange},model:{value:e.parking.give_cycle_datetype,callback:function(t){e.$set(e.parking,"give_cycle_datetype",t)},expression:"parking.give_cycle_datetype"}},e._l(e.cycle_array,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 可不填写 ")])])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("生成账单规则")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"10px"}},[a("a-radio-group",{attrs:{disabled:e.is_disabled,disabled:""},model:{value:e.parking.bill_type,callback:function(t){e.$set(e.parking,"bill_type",t)},expression:"parking.bill_type"}},[a("a-radio",{attrs:{value:1}},[e._v(" 手动生成 ")])],1)],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 手动生成账单需手动操作给收费对象生成应交账单，一般用于停车费的收取 ")])])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("未入住房屋折扣")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"10px"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.not_house_rate",{initialValue:e.post.not_house_rate}],expression:"['post.not_house_rate',{ initialValue: post.not_house_rate }]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,min:0,max:100,formatter:function(e){return e+" %"},placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 房屋在未入住状态下及没有绑定车辆的未使用车位时可享受应收费用优惠折扣（以百分比计算，请输入0-100），例如输入80，则按80%进行收取，即100元仅需缴纳80元，优惠掉20元 ")])])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("费用标准生效时间")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-date-picker",{attrs:{mode:e.date_status,format:e.dateFormat,disabled:e.is_disabled,placeholder:"请选择时间",open:e.isOpen},on:{panelChange:e.selectYear,openChange:function(t){return e.onOpenChange(t,"isOpen")}},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 设置后，生成应收账单的费用将根据正在生效的标准计算 ")])])])])],1):e._e(),"park_new"!=e.project_type?a("div",[a("div",[a("h3",{staticStyle:{"margin-left":"3.5%","font-weight":"900",display:"block",padding:"28px 0 10px 0"}},[e._v("滞纳金设置")])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_two"},[a("span",{staticClass:"label_col"},[e._v("计算时间")])]),a("div",{staticClass:"input_container_two"},[e._v(" 账单生成后 "),a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.late_fee_reckon_day",{initialValue:e.post.late_fee_reckon_day}],expression:"['post.late_fee_reckon_day',{ initialValue: post.late_fee_reckon_day }]"}],attrs:{disabled:e.is_disabled,min:1,max:100,placeholder:"请输入"}}),e._v("（天）开始计算滞纳金 ")],1)])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_two"},[a("span",{staticClass:"label_col"},[e._v("费用收取封顶天数")])]),a("div",{staticClass:"input_container_two"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.late_fee_top_day",{initialValue:e.post.late_fee_top_day}],expression:"['post.late_fee_top_day',{ initialValue: post.late_fee_top_day }]"}],attrs:{disabled:e.is_disabled,min:1,max:100,placeholder:"请输入"}}),e._v("不填为不限制，一直计算到用户缴纳费用 ")],1)])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_two"},[a("span",{staticClass:"label_col"},[e._v("滞纳金收取比例（每天）")])]),a("div",{staticClass:"input_container_two"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.late_fee_rate",{initialValue:e.post.late_fee_rate}],expression:"['post.late_fee_rate',{ initialValue: post.late_fee_rate }]"}],staticStyle:{width:"150px"},attrs:{disabled:e.is_disabled,oninput:"value=value.replace(/[^\\d.]/g, '').replace(/\\.{2,}/g, '.').replace('.', '$#$').replace(/\\./g, '').replace('$#$', '.').replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/, '$1$2.$3').replace(/^\\./g, '')",min:0,max:100,formatter:function(e){return e+" %"},placeholder:"请输入百分比"}}),e._v(" 百分比0-100，例如输入2，则每日按应收费用的2%比例收取滞纳金，即100元应收费用，每天滞纳金为2元 ")],1)])])],1):e._e()],1):e._e()])],1),a("prepaidList",{ref:"prepaidModel",on:{ok:e.prepaidList}})],2)},s=[],l=a("2909"),r=a("ade3"),o=(a("d3b7"),a("25f0"),a("ac1f"),a("5319"),a("d81d"),a("b0c0"),a("a434"),a("c1df")),n=a.n(o),c=a("a0e0"),_=a("f51e"),d={components:{prepaidList:_["default"]},data:function(){var e;return e={title:"新建",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,cyclicity_set_txt_status:!1,unit_gage_txt_status:!1,measure:"/日",post:{id:0,charge_project_id:"",charge_name:"",unit_price:"",rate:"",not_house_rate:"0",fees_type:1,unit_gage_type:1,unit_gage_txt:"",charge_price:"",is_cyclicity_type_set:0,cyclicity_set:"",bill_create_set:2,bill_arrears_set:2,bill_type:2,is_prepaid:2,charge_valid_time:"",late_fee_reckon_day:"",late_fee_top_day:"",late_fee_rate:"",status:"",measure_unit:"元/度",rule_digit:"2"},show:{is_fees_type:!1,is_charge_price:!1,is_cyclicity_type_set:!1,is_bill_create_set:!1,is_bill_arrears_set:!1,is_bill_type:!1,is_unit_price:!1,is_rate:!1,is_prepaid_disabled:!1,is_prepaid_button:!1,is_unit_gage:!1},cycle_array:[],arrears_array:[],is_disabled:!1,isOpen:!1,dateValue:null,date_status:"date",dateFormat:"YYYY-MM-DD",isSpecial:!0,isSpecialSelect:!1,chargeNumber:[],chargeProject:[],subjectId:"请选择科目",charge_project_id:"请选择项目",isShow:!0,durationList:[{id:1,name:"一"}],charge_time_list:[{title:"15分钟",value:15},{title:"30分钟",value:30},{title:"45分钟",value:45},{title:"1小时",value:60}],give_cycle_list:[{value:"1"},{value:"3"},{value:"6"},{value:"12"},{value:"24"},{value:"自定义"}],give_cycle_date:[{id:1,name:"按年生成"},{id:2,name:"按月生成"},{id:3,name:"按日生成"}],parking:{id:"",charge_project_id:"",fees_type:3,charge_time:"",bill_create_set:1,charge_name:"",charge_type:1,charge_money:"",free_time:"",max_charge_money:"",first_free_time:"",first_charge_money:"",charge_price:"",give_cycle_type:"",give_cycle_datetype:3,bill_type:1,duration_time:[""],duration_money:[""],charge_set:[]},custom_give_cycle:!1,project_type:""},Object(r["a"])(e,"cycle_array",[{key:1,value:"按日生成"},{key:2,value:"按月生成"},{key:3,value:"按年生成"}]),Object(r["a"])(e,"maxCount",""),Object(r["a"])(e,"charge_project_name","请选择项目"),Object(r["a"])(e,"subjectName","请选择科目"),Object(r["a"])(e,"digit_type",1),Object(r["a"])(e,"digit_type_txt","四舍五入"),e},mounted:function(){},methods:{moment:n.a,selectYear:function(e,t){this.dateValue=e,this.isOpen=!1,console.log(e,t)},onOpenChange:function(e,t){this[t]=e,console.log(this.dateValue)},unitGageChange:function(e){var t=e.target.value;this.unit_gage_txt_status=2==t},feesTypeChange:function(e){var t=e.target.value;this.show.is_unit_gage=1!=t},onChange_is_prepaid:function(e){var t=e.target.value;this.show.is_prepaid_button=1==t},prepaidList:function(e){},handleUnitPrice:function(e){e=e.toString(),e=e.replace(/^\./g,""),e=e.replace(/[^\d.]/g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(/^(\-)*(\d+)\.(\d\d\d\d).*$/,"$1$2.$3"),this.post.unit_price=e,console.log(e)},cyclicityTypeChange:function(e){var t=e.target.value;this.cyclicity_set_txt_status=1==t},cycleTypeChange:function(e){"自定义"==e?(this.custom_give_cycle=!0,this.parking.give_cycle_type=""):this.custom_give_cycle=!1},cycleDateChange:function(e){console.log("cycleDateChange===>",e)},chargingrulesChange:function(e){this.parking={id:this.parking.id,charge_project_id:this.parking.charge_project_id,fees_type:e.target.value,charge_time:"",bill_create_set:1,charge_name:"",charge_type:1,charge_money:"",free_time:"",max_charge_money:"",first_free_time:"",first_charge_money:"",charge_price:"",give_cycle_type:"",give_cycle_datetype:3,bill_type:1,duration_time:[""],duration_money:[""],charge_set:[]}},billCreateSetChange:function(e){switch(this.post.bill_create_set=e,this.parking.bill_create_set=e,e){case 1:this.measure="/日";break;case 2:this.measure="/月";break;case 3:this.measure="/年";break}},billArrearsSetChange:function(e){this.post.bill_arrears_set=e},add:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";console.log(t,i),this.title="添加",this.visible=!0,0===t&&"special"===a?(this.getChargeNumber(),this.isSpecial=!1,this.isSpecialSelect=!0):(t>0&&(this.charge_project_id=t,this.parking.charge_project_id=t),i&&(this.project_type=i),console.log("收费项id=========",t),this.cyclicity_set_txt_status=!1,this.unit_gage_txt_status=!1,this.is_disabled=!1,this.isOpen=!1,this.dateValue=null,this.post={id:0,charge_project_id:"",charge_name:"",unit_price:"",rate:"",not_house_rate:"0",fees_type:1,unit_gage_type:1,unit_gage_txt:"",charge_price:"",is_cyclicity_type_set:0,cyclicity_set:"",bill_create_set:2,bill_arrears_set:2,bill_type:2,is_prepaid:2,charge_valid_time:"",late_fee_reckon_day:"",late_fee_top_day:"",late_fee_rate:"",status:"",measure_unit:"元/度",rule_digit:2},this.confirmLoading=!0,this.request(c["a"].checkChargeRule,{charge_project_id:t}).then((function(t){t&&(e.show=t,e.charge_time_list=t.charge_time,t.titleName&&(e.title="添加 "+t.titleName+" 的标准"))})),this.request(c["a"].ChargeRuleBillParam).then((function(t){t&&(e.cycle_array=t.cycle_array,e.arrears_array=t.arrears_array,void 0!=t.digit_type&&t.digit_type>0&&(e.digit_type=t.digit_type,e.digit_type_txt=t.digit_type_txt))})),this.confirmLoading=!1)},edit:function(e){var t=this;this.title="编辑",this.visible=!0,this.post.id=e,this.parking.id=e,this.confirmLoading=!0,this.request(c["a"].ChargeRuleBillParam).then((function(e){e&&(t.cycle_array=e.cycle_array,t.arrears_array=e.arrears_array,void 0!=e.digit_type&&e.digit_type>0&&(t.digit_type=e.digit_type,t.digit_type_txt=e.digit_type_txt))})),this.getEditInfo()},handleSubmit:function(){var e=this,t=!1,a=new Date(this.dateValue),i=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds(),s=this.form.validateFields;if(this.confirmLoading=!0,this.post.id>0&&this.is_disabled)return this.$message.success("编辑成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.subjectName="请选择科目",e.charge_project_name="请选择项目",e.project_type="",e.id="0",e.confirmLoading=!1,e.$emit("ok")}),1500),!1;if(1*this.parking.fees_type==3&&"park_new"==this.project_type){var r=c["a"].ChargeRuleAdd;if(this.parking.id>0&&(r=c["a"].ChargeRuleSub),""==this.parking.charge_project_id)return this.confirmLoading=!1,void this.$message.warn("请选择收费项目");if(""==this.parking.charge_name)return this.confirmLoading=!1,void this.$message.warn("收费标准名称不能为空");if(""==this.parking.charge_type)return this.confirmLoading=!1,void this.$message.warn("收费类型不能为空");if(this.durationList.map((function(a,i){""!=e.parking.duration_money[i]&&""!=e.parking.duration_time[i]||(t=!0)})),t)return this.confirmLoading=!1,void this.$message.warn("费用设置时长和金额都不能为空");if(this.parking.charge_set=[],this.parking.charge_set[0]=this.parking.duration_time,this.parking.charge_set[1]=this.parking.duration_money,""==this.parking.charge_time||""==this.parking.charge_money)return this.confirmLoading=!1,this.$message.warn("计算步长不能为空"),!1;if(null==this.dateValue)return this.confirmLoading=!1,this.$message.warn("请选择费用标准生效时间"),!1;this.parking.charge_valid_time=i;var o=Math.max.apply(Math,Object(l["a"])(this.parking.duration_time));this.maxCount=o,this.request(r,{post:this.parking}).then((function(t){e.parking.id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.subjectName="请选择科目",e.charge_project_name="请选择项目",e.project_type="",e.id="0",e.confirmLoading=!1,e.durationList=[{id:1,name:"一"}],e.clearParkingForm(),e.$emit("ok")}),1500)})).catch((function(t){e.confirmLoading=!1}))}else if(1*this.parking.fees_type==4&&"park_new"==this.project_type){if(""==this.parking.charge_project_id)return this.confirmLoading=!1,void this.$message.warn("请选择收费项目");if(""==this.parking.charge_name)return this.confirmLoading=!1,void this.$message.warn("收费标准名称不能为空");if(""==this.parking.charge_price)return this.confirmLoading=!1,void this.$message.warn("收费金额不能为空");if(null==this.dateValue)return this.confirmLoading=!1,this.$message.warn("请选择费用标准生效时间"),!1;this.parking.charge_valid_time=i;var n=c["a"].ChargeRuleAdd;this.parking.id>0&&(n=c["a"].ChargeRuleSub),this.request(n,{post:this.parking}).then((function(t){e.parking.id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.subjectName="请选择科目",e.charge_project_name="请选择项目",e.project_type="",e.id="0",e.visible=!1,e.confirmLoading=!1,e.clearParkingForm(),e.$emit("ok")}),1500)})).catch((function(t){e.confirmLoading=!1}))}else this.confirmLoading=!0,s((function(t,a){if(console.log("values",a),t)e.confirmLoading=!1;else{var s=c["a"].ChargeRuleAdd;if(e.post.id>0?(s=c["a"].ChargeRuleSub,a.post.id=e.post.id):a.post.charge_project_id=e.charge_project_id,a.post.bill_create_set=e.post.bill_create_set,a.post.bill_arrears_set=e.post.bill_arrears_set,!i)return e.confirmLoading=!1,e.$message.error("请选择费用标准生效时间"),!1;a.post.charge_valid_time=i,void 0==a.post.rule_digit||null===a.post.rule_digit||"null"==a.post.rule_digit?a.post.rule_digit="":(a.post.rule_digit>0&&a.post.rule_digit<5||(a.post.rule_digit=""),a.post.rule_digit=a.post.rule_digit.toString().substr(0,1)),e.request(s,a).then((function(t){e.post.id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,console.log(123),e.$emit("ok")}),1500),console.log(345)})).catch((function(t){e.confirmLoading=!1}))}}))},clearParkingForm:function(){this.parking={id:"",charge_project_id:"",fees_type:3,charge_time:"",bill_create_set:1,charge_name:"",charge_type:1,charge_money:"",free_time:"",max_charge_money:"",first_free_time:"",first_charge_money:"",charge_price:"",give_cycle_type:"",give_cycle_datetype:3,bill_type:1,duration_time:[""],duration_money:[""],charge_set:[]},this.chargeProject=[],this.chargeNumber=[],this.dateValue=null},handleCancel:function(){var e=this;this.visible=!1,this.subjectName="请选择科目",this.charge_project_name="请选择项目",this.project_type="",this.clearParkingForm(),setTimeout((function(){e.id="0",e.form=e.$form.createForm(e)}),500)},getEditInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";this.request(c["a"].ChargeRuleEdit,{id:this.post.id,type:t}).then((function(t){if(t.charge_time&&(e.charge_time_list=t.charge_time),t.show_data&&(e.show=t.show_data,e.show.titleName&&(e.title="编辑 "+e.show.titleName,t.edit_data.charge_name&&(e.title=e.title+" 的标准【"+t.edit_data.charge_name+"】"))),t.edit_data){if(e.post=t.edit_data,e.parking={id:t.edit_data.id,charge_project_id:t.edit_data.charge_project_id,fees_type:t.edit_data.fees_type,charge_time:t.edit_data.charge_time,bill_create_set:t.edit_data.bill_create_set,charge_name:t.edit_data.charge_name,charge_type:t.edit_data.charge_type,charge_money:t.edit_data.charge_money,free_time:t.edit_data.free_time,max_charge_money:t.edit_data.max_charge_money,first_free_time:t.edit_data.first_free_time,first_charge_money:t.edit_data.first_charge_money,charge_price:t.edit_data.charge_price,give_cycle_type:t.edit_data.give_cycle_type,give_cycle_datetype:t.edit_data.give_cycle_datetype,bill_type:t.edit_data.bill_type,duration_money:t.edit_data.duration_money,duration_time:t.edit_data.duration_time},t.edit_data.charge_set&&t.edit_data.charge_set.length>0){var a=[],i=[],s=[];t.edit_data.charge_set.map((function(e,t){a.push(e.money),i.push(e.time),s.push({id:t+1,name:"charge_set"+t})})),e.parking.duration_money=a,e.parking.duration_time=i,e.durationList=s,e.maxCount=Math.max.apply(Math,i)}else e.parking.duration_money=[""],e.parking.duration_time=[""];3!=e.parking.fees_type&&4!=e.parking.fees_type||(e.project_type="park_new"),2==t.edit_data.is_prepaid&&(e.show.is_prepaid_button=!1),e.billCreateSetChange(t.edit_data.bill_create_set),e.dateValue=n()(t.edit_data.charge_valid_time,e.dateFormat)}t.edit_status&&(e.is_disabled=t.edit_status.is_disabled,e.is_disabled&&(e.show.is_prepaid_disabled=!0),e.unit_gage_txt_status=t.edit_status.unit_gage_txt_status,e.cyclicity_set_txt_status=t.edit_status.cyclicity_set_txt_status),e.confirmLoading=!1}))},handleChargeNumberChange:function(e){var t=this;this.charge_project_name="请选择项目",this.charge_project_id=0,this.parking.charge_project_id=0,this.chargeNumber.map((function(a){a.name==e&&(t.project_type=a.type,t.parking.subjectId=a.id,t.subjectId=a.id,t.getChargeProject(a.id))})),this.parking.fees_type=3},getChargeNumber:function(){var e=this;this.request(c["a"].getChargeSubject).then((function(t){e.chargeNumber=t}))},getChargeProject:function(e){var t=this,a={subject_id:e};this.request(c["a"].getChargeProject,a).then((function(e){t.chargeProject=e}))},handleChargeProjectChange:function(e){var t=this;this.isSpecial=!0,this.chargeProject.map((function(a){a.name==e&&(t.charge_project_name=e,t.charge_project_id=a.id,t.parking.charge_project_id=a.id,t.add(a.id))}))},detail:function(e){var t=this;this.title="查看",this.visible=!0,this.post.id=e,this.confirmLoading=!0,this.isShow=!1,this.request(c["a"].ChargeRuleBillParam).then((function(e){e&&(t.cycle_array=e.cycle_array,t.arrears_array=e.arrears_array)})),this.getEditInfo("del")},duration_add:function(){""!=this.parking.duration_time[this.durationList.length-1]&&""!=this.parking.duration_money[this.durationList.length-1]?(this.durationList.push({id:this.durationList.length,name:"name"+this.durationList.length}),this.parking.duration_time.push(""),this.parking.duration_money.push("")):this.$message.warn("请先填写当前行的时长和金额")},duration_reduce:function(e){this.durationList.splice(e,1),this.parking.duration_time.splice(e,1),this.parking.duration_money.splice(e,1)},chargeTimeChange:function(e){this.parking.charge_time=this.charge_time_list[e].value;var t=Math.max.apply(Math,Object(l["a"])(this.parking.duration_time));this.maxCount=t}}},p=d,u=(a("a3fb"),a("2877")),m=Object(u["a"])(p,i,s,!1,null,"1b959d3f",null);t["default"]=m.exports},8917:function(e,t,a){},a3fb:function(e,t,a){"use strict";a("c039")},c039:function(e,t,a){},d312:function(e,t,a){"use strict";a("8917")},f51e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:1100,footer:null,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("div",{staticClass:"message-suggestions-list-box"},[e.isShow?a("div",{staticClass:"add-box"},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.PopupAddModel.add(e.charge_rule_id,e.bill_date_set)}}},[e._v(" 添加 ")])],1)],1)],1):e._e(),a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination,loading:e.loading},on:{change:e.table_change},scopedSlots:e._u([{key:"status",fn:function(t,i){return a("span",{},[2==i.status?a("div",{staticStyle:{color:"red"}},[e._v("禁止")]):e._e(),1==i.status?a("div",{staticStyle:{color:"#1890ff"}},[e._v("开启")]):e._e(),4==i.status?a("div",{staticStyle:{color:"red"}},[e._v("已删除")]):e._e()])}},{key:"standard",fn:function(t,i){return a("span",{},[a("a",[e._v("绑定")])])}},{key:"action",fn:function(t,i){return a("span",{},[e.isShow?a("a",{on:{click:function(t){return e.$refs.PopupEditModel.edit(i.id,e.bill_date_set)}}},[e._v("编辑")]):e._e(),e.isShow?e._e():a("a",{staticStyle:{color:"#CCCCCC"}},[e._v("编辑")]),e.isShow?a("a-popconfirm",{staticClass:"ant-dropdown-link",staticStyle:{"margin-left":"20px"},attrs:{title:"确认删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.deleteConfirm(i.id)},cancel:e.cancel}},[a("a",{attrs:{href:"#"}},[e._v("删除")])]):e._e()],1)}}])}),a("prepaidInfo",{ref:"PopupAddModel",on:{ok:function(t){return e.addActive(e.charge_rule_id)}}}),a("prepaidInfo",{ref:"PopupEditModel",on:{ok:function(t){return e.editActive(e.charge_rule_id)}}})],1)])},s=[],l=(a("ac1f"),a("841c"),a("a0e0")),r=a("aa28"),o=[{title:"预缴时间",dataIndex:"cycle",key:"cycle"},{title:"优惠模式",dataIndex:"type_txt",key:"type_txt"},{title:"添加时间",dataIndex:"add_time",key:"add_time"},{title:"状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"action"}}],n=[],c={name:"prepaidList",filters:{},components:{prepaidInfo:r["default"]},data:function(){return{reply_content:"",pagination:{current:1,pageSize:10,total:10},search:{keyword:"",page:1},form:this.$form.createForm(this),visible:!1,loading:!1,data:n,columns:o,title:"",confirmLoading:!1,charge_rule_id:"",bill_date_set:2,isShow:!0}},methods:{List:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.title="预缴时间",this.loading=!0,this.isShow=s,1==a&&this.$set(this.pagination,"current",1),this.bill_date_set=i,this.charge_rule_id=t,this.search["bill_date_set"]=i,this.search["charge_rule_id"]=t,this.search["page"]=this.pagination.current,s||(this.search["type"]="del_detail"),this.request(l["a"].ChargePrepaidList,this.search).then((function(t){e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data=t.list,e.loading=!1,e.confirmLoading=!0,e.visible=!0}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.id="0",e.form=e.$form.createForm(e)}),500)},cancel:function(){},deleteConfirm:function(e){var t=this;this.request(l["a"].ChargePrepaidDel,{id:e}).then((function(e){t.List(t.charge_rule_id,1),t.$message.success("删除成功")}))},addActive:function(e){this.List(this.charge_rule_id,1)},editActive:function(e){this.List(this.charge_rule_id)},table_change:function(e){console.log("e",e),e.current&&e.current>0&&(this.$set(this.pagination,"current",e.current),this.List(this.charge_rule_id))}}},_=c,d=(a("d312"),a("2877")),p=Object(d["a"])(_,i,s,!1,null,null,null);t["default"]=p.exports}}]);