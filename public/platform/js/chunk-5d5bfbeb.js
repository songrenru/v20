(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d5bfbeb","chunk-2d0bacf3"],{"33c7":function(e,t,i){"use strict";i("ccf5")},3990:function(e,t,i){"use strict";var a={villageInfo:"/community/village_api.VillageConfig/getVillageInfo",baseConfig:"/community/village_api.VillageConfig/baseConfig",buildingIndex:"/community/village_api.Building/index",roomIndex:"/community/village_api.Room/index",ownerIndex:"/community/village_api.Owner/index",ownerReview:"/community/village_api.Owner/review",ownerUnbid:"/community/village_api.Owner/unbind",familyIndex:"/community/village_api.FamilyMember/index",enantIndex:"/community/village_api.Enant/index",buildingList:"/community/village_api.Building/index",deleteBuilding:"/community/village_api.Building/deleteBuilding",buildingInfo:"/community/village_api.Building/buildingInfo",updateBuildingStatus:"/community/village_api.Building/updateBuildingStatus",saveBuildingButler:"/community/village_api.Building/saveBuildingButler",getBuildingButler:"community/village_api.Building/getBuildingButler",updateBuildingInfoByID:"community/village_api.Building/updateBuildingInfoByID",buildingUnitFloor:"community/village_api.Building/unitFloor",buildingFloorLayerRooms:"community/village_api.Building/floorLayerRooms",unitRentalList:"/community/village_api.UnitRental/index",deleteUnitRental:"/community/village_api.UnitRental/deleteUnitRental",unitRentalInfo:"/community/village_api.UnitRental/unitRentalInfo",updateUnitRentalStatus:"/community/village_api.UnitRental/updateUnitRentalStatus",saveUnitRentalButler:"/community/village_api.UnitRental/saveUnitRentalButler",getUnitRentalButler:"community/village_api.UnitRental/getUnitRentalButler",updateUnitRentalInfoByID:"community/village_api.UnitRental/updateUnitRentalInfoByID",unitRentalFloorList:"community/village_api.UnitRental/unitRentalFloorList",updateUnitRentalFloorStatus:"community/village_api.UnitRental/updateUnitRentalFloorStatus",deleteUnitRentalFloor:"community/village_api.UnitRental/deleteUnitRentalFloor",unitRentalFloorInfo:"community/village_api.UnitRental/unitRentalFloorInfo",saveUnitRentalFloorInfo:"community/village_api.UnitRental/saveUnitRentalFloorInfo",unitRentalLayerList:"community/village_api.UnitRental/unitRentalLayerList",unitRentalLayerInfo:"community/village_api.UnitRental/unitRentalLayerInfo",saveUnitRentalLayerInfo:"community/village_api.UnitRental/saveUnitRentalLayerInfo",updateUnitRentalLayerStatus:"community/village_api.UnitRental/updateUnitRentalLayerStatus",deleteUnitRentalLayer:"community/village_api.UnitRental/deleteUnitRentalLayer",thirdVillageUploadFile:"community/village_api.third.Room/villageUploadFile",thirdStartRoomImport:"community/village_api.third.Room/startRoomImport",thirdStartUserImport:"community/village_api.third.Room/startUserImport",thirdStartChargeImport:"community/village_api.third.Room/startChargeImport",thirdRefreshProcess:"community/village_api.third.Room/refreshProcess",ownerList:"/community/village_api.People.Owner/index",servicesImgPreview:"/community/village_api.WorkWeiXin/servicesImgPreview"};t["a"]=a},8803:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-drawer",{attrs:{title:e.title,visible:e.visible,width:750,"body-style":{paddingBottom:"80px"}},on:{close:e.resetForm}},[i("a-form-model",{ref:"ruleForm",attrs:{model:e.buildForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[i("a-form-model-item",{attrs:{label:"绑定员工",prop:"yuangong",extra:"多选，不限制数量，绑定员工后，业主加好友时随机从其中选择"}},[i("a-select",{staticStyle:{width:"240px"},attrs:{mode:"multiple",placeholder:"请选择员工",value:e.selectedItems},on:{change:function(t){return e.handleSelectChange(t,"yuangong")}}},e._l(e.filteredOptions,(function(t,a){return i("a-select-option",{attrs:{value:t.name,index:a}},[e._v(" "+e._s(t.name))])})),1)],1),i("a-form-model-item",{attrs:{label:"绑定楼栋",prop:"is_kefu",extra:"选择“是”选项，添加客服时只能选择楼栋下的业主；选择“否”选项，添加客服时能选择楼栋所有的业主"}},[i("a-radio-group",{attrs:{name:"radioGroup"},model:{value:e.buildForm.is_kefu,callback:function(t){e.$set(e.buildForm,"is_kefu",t)},expression:"buildForm.is_kefu"}},[i("a-radio",{attrs:{value:1}},[e._v("是")]),i("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1),i("a-form-model-item",{attrs:{label:"欢迎语",prop:"welcome_tip",extra:"变量填写规则（可对应复制到填写内容）：{姓名} {手机号}"}},[i("a-textarea",{staticStyle:{padding:"5px width:200px",height:"100px",resize:"none"},attrs:{placeholder:"请输入欢迎语"},model:{value:e.buildForm.welcome_tip,callback:function(t){e.$set(e.buildForm,"welcome_tip",t)},expression:"buildForm.welcome_tip"}})],1),i("a-form-model-item",{attrs:{label:"企业微信服务群二维码"}},[i("a-upload",{attrs:{name:"reply_pic",multiple:!1,action:e.uploadUrl,data:e.uploadParams,"before-upload":e.beforeUpload,showUploadList:!1,headers:e.headers},on:{change:function(t){return e.handleUploadChange(t,"qycode")}}},[i("a-button",{attrs:{loading:e.qyimgLoading}},[e._v("上传二维码")]),e.ercodeUrl?i("a-button",{attrs:{type:"link"},on:{click:function(t){return t.stopPropagation(),e.lookCode()}}},[e._v("查看二维码")]):e._e(),i("a-button",{attrs:{type:"link"},on:{click:function(t){return t.stopPropagation(),e.lookHelp.apply(null,arguments)}}},[e._v("点击可查看使用帮助")])],1)],1),i("a-form-model-item",{attrs:{label:"装修",prop:"zhuangxiu"}},[i("template",{slot:"extra"},[e._v(" 1、无需装修：将直接使用二维码自带的模板样式"),i("br"),e._v(" 2、系统默认模板：将直接使用我们提供的模板样式，可选择查看样式"),i("br"),e._v(" 3、上传模板：需要自行设计好模板后上传，尺寸：750*1334；注意：模板左下角需距离页面边缘间距20像素预留100*100像素的空白位置，用于放置群二维码 ")]),i("a-select",{staticStyle:{width:"240px"},attrs:{placeholder:"请选择装修"},on:{change:function(t){return e.handleSelectChange(t,"zhuangxiu")}},model:{value:e.buildForm.template_type,callback:function(t){e.$set(e.buildForm,"template_type",t)},expression:"buildForm.template_type"}},e._l(e.repaireList,(function(t,a){return i("a-select-option",{attrs:{value:t.id,index:a}},[e._v(e._s(t.name))])})),1)],2),2==e.buildForm.template_type?i("a-form-model-item",{attrs:{label:"上传模板",prop:"template_url",extra:"尺寸：750*1334；注意：模板左下角需距离页面边缘间距20像素预留100*100像素的空白位置，用于放置群二维码"}},[i("a-upload",{attrs:{name:"reply_pic",multiple:!1,action:e.uploadUrl,data:e.uploadParams,"before-upload":e.beforeUpload,showUploadList:!1,headers:e.headers},on:{change:function(t){return e.handleUploadChange(t,"template")}}},[i("a-button",{attrs:{loading:e.temimgLoading}},[e._v("上传模板")]),e.imageUrl?i("a-button",{attrs:{type:"link"},on:{click:function(t){return t.stopPropagation(),e.previewImage()}}},[e._v("查看图片")]):e._e()],1)],1):e._e(),e.effect_img?i("a-form-model-item",{attrs:{label:"效果预览"}},[i("img",{staticStyle:{width:"260px"},attrs:{src:e.effect_img},on:{click:function(t){return t.stopPropagation(),e.lookEffectImg()}}})]):e._e()],1),i("a-modal",{attrs:{title:"效果预览",width:500,visible:e.effectImgVisible,footer:null},on:{cancel:e.handleEffectImgCancel}},[i("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[i("img",{staticStyle:{width:"400px"},attrs:{preview:"1",src:e.effect_img}})])]),i("a-modal",{attrs:{title:"查看二维码",width:350,visible:e.erCodeVisible,footer:null},on:{cancel:e.handleCodeCancel}},[i("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[i("img",{staticStyle:{width:"150px"},attrs:{preview:"1",src:e.ercodeUrl}})])]),i("a-modal",{attrs:{title:"预览图片",width:350,visible:e.previewVisible,footer:null},on:{cancel:e.handlePreviewCancel}},[i("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[i("img",{staticStyle:{width:"150px"},attrs:{preview:"2",src:e.imageUrl}})])]),i("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[i("a-button",{staticStyle:{marginRight:"8px"},on:{click:e.resetForm}},[e._v(" 关闭 ")]),i("a-button",{attrs:{loading:e.confirmLoading,type:"primary"},on:{click:e.onSubmit}},[e._v(" 保存 ")])],1)],1)},l=[],n=(i("a9e3"),i("4de4"),i("d3b7"),i("caad"),i("2532"),i("d81d"),i("b0c0"),i("ac1f"),i("1276"),i("8bbf")),o=i.n(n),r=i("ed09"),u=i("3990"),d=Object(r["c"])({props:{title:{type:String,default:""},visible:{type:Boolean,default:!1},single_id:{type:[String,Number],default:0}},setup:function(e,t){var i=function(){m.value=!1},a=function(){m.value=!0},l=function(){c.value=!1},n=function(){c.value=!0},d=Object(r["h"])(""),m=Object(r["h"])(!1),c=Object(r["h"])(!1),p=Object(r["h"])(""),s=Object(r["h"])(""),g=Object(r["g"])({authorization:"authorization-text"}),v=Object(r["h"])("/v20/public/index.php/common/common.UploadFile/uploadImg"),f=Object(r["g"])({upload_dir:"village"}),y=Object(r["h"])(!1),_=function(){y.value=!1},b=Object(r["h"])(""),h=Object(r["h"])(!1),w=Object(r["h"])(!1),R=function(e,t){if("uploading"!==e.file.status)return"error"===e.file.status?(o.a.prototype.$message.error("上传失败!"),void("qycode"==t?h.value=!0:w.value=!0)):void("done"===e.file.status&&("qycode"==t?(d.value=e.file.response.data.full_url,j.value.qy_qrcode=e.file.response.data.image,h.value=!1):(b.value=e.file.response.data.full_url,j.value.template_url=e.file.response.data.image,w.value=!1)));"qycode"==t?h.value=!0:w.value=!0},U=function(e,t){var i="image/jpeg"===e.type||"image/png"===e.type;i||o.a.prototype.$message.error("You can only upload JPG file!");var a=e.size/1024/1024<2;return a||o.a.prototype.$message.error("Image must smaller than 2MB!"),i&&a},B=function(e){y.value=!0},x=Object(r["h"])([]),I=Object(r["h"])([]),F=Object(r["a"])({get:function(){return x.value.filter((function(e){return!I.value.includes(e)}))}}),k=Object(r["h"])([{name:"无需装修",id:0},{name:"系统默认模板",id:1},{name:"上传模板",id:2}]),L=function(){window.open(p.value)},O=Object(r["h"])(!1),j=Object(r["h"])({}),S=Object(r["g"])({is_kefu:[{required:!0,message:"请选择是否绑定楼栋",trigger:"blur"}],welcome_tip:[{required:!0,message:"请输入欢迎语",trigger:"blur"}]}),C=Object(r["h"])(),q=Object(r["h"])({span:6}),P=Object(r["h"])({span:16}),$=function(){C.value.validate((function(e){if(e){if(0==I.length)return void o.a.prototype.$message.warn("请选择绑定员工！");z()}}))},V=function(){t.emit("closeDrawer"),j.value={},b.value="",d.value="",s.value="",C.value.resetFields(),I.value=[]},z=function(){O.value=!0;var t=j.value;t.single_id=e.single_id,o.a.prototype.request(u["a"].saveBuildingButler,t).then((function(e){O.value=!1,V(),o.a.prototype.$message.success("保存成功！")})).catch((function(e){O.value=!1}))},E=function(e){o.a.prototype.request(u["a"].getBuildingButler,{single_id:e}).then((function(e){I.value=[],j.value={},e.buldingButler&&(j.value=e.buldingButler,I.value=e.buldingButlerBindList.map((function(e){return e.name})),d.value=e.buldingButler.qy_qrcode,j.value.template_url=e.buldingButler.template_url,b.value=e.buldingButler.template_url,s.value=e.buldingButler.effect_img,j.value.work_arr=e.buldingButler.work_arr.split(",")),e.buldingButlerList&&(x.value=e.buldingButlerList),p.value=e.qyhelp_url}))},D=function(e,t){if("yuangong"==t){I.value=e;var i=[];x.value.map((function(t){e.map((function(e){e==t.name&&i.push(t.wid)}))})),j.value.work_arr=i}"zhuangxiu"==t&&(j.value.template_type=e,1==e&&j.value.qy_qrcode||2==e&&j.value.qy_qrcode&&j.value.template_url?J():(j.value.effect_img="",s.value=""))},J=function(){var e=j.value.template_type;0!=e&&e&&(j.value.qy_qrcode?2!=e||j.value.template_url?o.a.prototype.request(u["a"].servicesImgPreview,{template_type:e,qy_qrcode:j.value.qy_qrcode,template_url:j.value.template_url}).then((function(e){if(console.log("services_look_img",e),e.data){var t=e.data.file_path,i=e.data.file;j.value.effect_img=i,s.value=t}})):o.a.prototype.$message.warn("请上传对应模板！"):o.a.prototype.$message.warn("请上传企业微信群二维码！"))};return Object(r["i"])((function(){return e.visible}),(function(t){t&&E(e.single_id)}),{deep:!0}),{confirmLoading:O,onSubmit:$,resetForm:V,buildForm:j,labelCol:q,wrapperCol:P,rules:S,saveForm:z,ruleForm:C,userList:x,repaireList:k,handleSelectChange:D,filteredOptions:F,selectedItems:I,lookHelp:L,lookCode:a,handleCodeCancel:i,ercodeUrl:d,erCodeVisible:m,getBuildInfo:E,qyhelpUrl:p,headers:g,uploadUrl:v,uploadParams:f,imageUrl:b,qyimgLoading:h,temimgLoading:w,beforeUpload:U,handleUploadChange:R,previewImage:B,previewVisible:y,handlePreviewCancel:_,services_look_img:J,effect_img:s,effectImgVisible:c,handleEffectImgCancel:l,lookEffectImg:n}}}),m=d,c=(i("33c7"),i("2877")),p=Object(c["a"])(m,a,l,!1,null,"623dedf6",null);t["default"]=p.exports},ccf5:function(e,t,i){}}]);