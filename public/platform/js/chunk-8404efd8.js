(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8404efd8","chunk-73e2e55e","chunk-e1db74a4","chunk-b8394eb8"],{4031:function(e,t,r){"use strict";var a={getLists:"/mall/merchant.MerchantStoreMall/getStoreList",perfectedStore:"/mall/merchant.MerchantStoreMall/perfectedStore",getStoreConfigList:"/mall/merchant.MerchantStoreMall/getStoreConfigList",getShippingList:"/mall/merchant.MallShipping/getShippingList",updateShipping:"/mall/merchant.MallShipping/addShipping",changeState:"/mall/merchant.MallShipping/changeState",removeShipping:"/mall/merchant.MallShipping/del",getShippingInfo:"/mall/merchant.MallShipping/edit",getMerchantSort:"/mall/merchant.MallGoods/getMerchantSort",getMallGoods:"/mall/merchant.MallGoods/getMallGoodsSelect",getGiveList:"/mall/merchant.MallGive/getGiveList",giveAdd:"/mall/merchant.MallGive/addGive",giveChangeState:"/mall/merchant.MallGive/changeState",giveDel:"/mall/merchant.MallGive/del",getGiveInfo:"/mall/merchant.MallGive/edit",getPlatSort:"/mall/merchant.MallGoods/getPlatformSort",getStoreSort:"/mall/merchant.MallGoods/getMerchantSort",getPrepareList:"/mall/merchant.MallPrepare/getPrepareList",updatePrepare:"/mall/merchant.MallPrepare/addPrepare",prepareChangeState:"/mall/merchant.MallPrepare/changeState",removePrepare:"/mall/merchant.MallPrepare/del",getPrepareInfo:"/mall/merchant.MallPrepare/edit",getReachedList:"/mall/merchant.MallReached/getReachedList",updateReachedList:"/mall/merchant.MallReached/addReached",getReachedInfo:"/mall/merchant.MallReached/edit",reachedChangeState:"/mall/merchant.MallReached/changeState",reachedDel:"/mall/merchant.MallReached/del",addRobot:"/mall/merchant.MallGroup/addRobot",delRobot:"/mall/merchant.MallGroup/delRobot",getRobotList:"/mall/merchant.MallGroup/getRobotList",getRobotName:"/mall/merchant.MallGroup/getRobotName",getUploadImages:"/common/common.UploadFile/getUploadImages",getGoodsSort:"/mall/merchant.MallGoods/getMerchantSort",getGoodsStatus:"/mall/merchant.MallGoods/getNumbers",getGoodsList:"/mall/merchant.MallGoods/getGoodsList",changeGoodsStatus:"/mall/merchant.MallGoods/setStatusLot",setVirtualSales:"/mall/merchant.MallGoods/setVirtualSales",changeGoodsSort:"/mall/merchant.MallGoods/setSort",getGoodsSkuPrice:"/mall/merchant.MallGoods/getGoodsSkuInfo",changeGoodsPrice:"/mall/merchant.MallGoods/setGoodsSkuInfo",getPlatProps:"/mall/merchant.MallGoods/getPlatformProperties",getFreightList:"/mall/merchant.MallGoods/getfreightList",getServiceList:"/mall/merchant.MallGoods/dealService",removeGoods:"/mall/merchant.MallGoods/delGoods",updateGoods:"/mall/merchant.MallGoods/addOrEditGoods",exportGoods:"/mall/merchant.MallGoods/exportGoods",getGoodsInfo:"/mall/merchant.MallGoods/getEditGoods",getGroupList:"/mall/merchant.MallGroup/getGroupList",groupAdd:"/mall/merchant.MallGroup/addGroup",groupChangeState:"/mall/merchant.MallGroup/changeState",groupDel:"/mall/merchant.MallGroup/del",getGroupInfo:"/mall/merchant.MallGroup/editDetail",getPeriodicList:"/mall/merchant.MallPeriodic/getPeriodicList",updatePeriodic:"/mall/merchant.MallPeriodic/addPeriodic",periodicChangeState:"/mall/merchant.MallPeriodic/changeState",removePeriodic:"/mall/merchant.MallPeriodic/del",getPeriodicInfo:"/mall/merchant.MallPeriodic/edit",getBargainList:"/mall/merchant.MallBargain/getBargainList",bargainAdd:"/mall/merchant.MallBargain/addBargain",bargainChangeState:"/mall/merchant.MallBargain/changeState",bargainDel:"/mall/merchant.MallBargain/del",getBargainInfo:"/mall/merchant.MallBargain/editDetail",getMinusDiscountList:"/mall/merchant.MallFullMinusDiscount/getFullMinusDiscountList",updateMinusDiscount:"/mall/merchant.MallFullMinusDiscount/addFullMinusDiscount",minusDiscountChangeState:"/mall/merchant.MallFullMinusDiscount/changeState",removeMinusDiscount:"/mall/merchant.MallFullMinusDiscount/del",getMinusDiscountInfo:"/mall/merchant.MallFullMinusDiscount/edit",getLimitedList:"/mall/merchant.MallLimited/getLimitedList",updateLimited:"/mall/merchant.MallLimited/addLimited",limitedChangeState:"/mall/merchant.MallLimited/changeState",removeLimited:"/mall/merchant.MallLimited/del",getLimitedInfo:"/mall/merchant.MallLimited/edit",getGoodsSortList:"/mall/merchant.MallGoodsSort/getSortList",delGoodsSort:"/mall/merchant.MallGoodsSort/delSort",editGoodsSort:"/mall/merchant.MallGoodsSort/addOrEditSort",getEditSort:"/mall/merchant.MallGoodsSort/getEditSort",editSort:"/mall/merchant.MallGoodsSort/saveSort",saveStatus:"/mall/merchant.MallGoodsSort/saveStatus",getAllGoodsSort:"/mall/merchant.MallGoodsSort/getSort",getStoreList:"/mall/merchant.MallMerchantReply/getStores",getReplyList:"/mall/merchant.MallMerchantReply/searchReply",addComment:"/mall/merchant.MallMerchantReply/merchantReply",getReplyDetails:"/mall/merchant.MallMerchantReply/getReplyDetails",getShowHomePage:"/mall/merchant.MallMerchantReply/getShowHomePage",getQualityReviews:"/mall/merchant.MallMerchantReply/getQualityReviews",getShowHomePageCancel:"/mall/merchant.MallMerchantReply/getShowHomePageCancel",getQualityReviewsCancel:"/mall/merchant.MallMerchantReply/getQualityReviewsCancel",getOrderList:"/mall/merchant.MallOrder/searchOrders",getOrderDetails:"/mall/merchant.MallOrder/getOrderDetails",getCollect:"/mall/merchant.MallOrder/getCollect",getDiscount:"/mall/merchant.MallOrder/getDiscount",exportOrder:"/mall/merchant.MallOrder/exportOrder ",deleteJudge:"/mall/merchant.MallGoods/deleteJudge ",getTemplateList:"/mall/merchant.ExpressTemplate/index",getTemplateAreaList:"/mall/merchant.ExpressTemplate/ajax_area",getTemplateAreaNameList:"/mall/merchant.ExpressTemplate/get_area_name",addTemplate:"/mall/merchant.ExpressTemplate/save",editTemplate:"/mall/merchant.ExpressTemplate/edit",delTemplate:"/mall/merchant.ExpressTemplate/delete",goodsBatch:"/mall/merchant.MallGoods/goodsBatch",viewLogistics:"/mall/merchant.MallOrder/viewLogistics",orderPrintTicket:"/mall/merchant.MallOrder/printOrder"};t["a"]=a},"442e":function(e,t,r){},"5f66":function(e,t,r){"use strict";var a={getOrderList:"/mall/storestaff.MallOrder/getOrderList",exportOrder:"/mall/storestaff.MallOrder/exportOrder",orderTaking:"/mall/storestaff.MallOrder/orderTaking",deliverGoodsByHouseman:"/mall/storestaff.MallOrder/deliverGoodsByHouseman",staffVerify:"/mall/storestaff.MallOrder/staffVerify",postponeDelivery:"/mall/storestaff.MallOrder/postponeDelivery",agreeRefund:"/mall/storestaff.MallOrder/AgreeRefund",getExpress:"/mall/storestaff.MallOrder/getExpress",deliverGoodsByExpress:"/mall/storestaff.MallOrder/deliverGoodsByExpress",viewLogistics:"/mall/storestaff.MallOrder/viewLogistics",refuseRefund:"/mall/storestaff.MallOrder/RefuseRefund",clerkDiscount:"/mall/storestaff.MallOrder/clerkDiscount",getOrderDetails:"/mall/storestaff.MallOrder/getOrderDetails",clerkNotes:"/mall/storestaff.MallOrder/clerkNotes",getPeriodicList:"/mall/storestaff.MallOrder/getPeriodicList",downExcel:"/mall/storestaff.MallOrder/downExcel",downFailExcel:"/mall/storestaff.MallOrder/downFailExcel",uploadUrl:"/common/common.UploadFile/uploadFile",uploadExcel:"/mall/storestaff.MallOrder/uploadFile",getList:"/mall/storestaff.MallOrder/shopGoodsBatchLogList",getOrderListCopy:"/mall/storestaff.MallOrder/getOrderListCopy",getOrderDetailsCopy:"/mall/storestaff.MallOrder/getOrderDetailsCopy",orderPrintTicket:"/mall/storestaff.MallOrder/printOrder"};t["a"]=a},"81b5":function(e,t,r){"use strict";r.r(t);r("b0c0");var a=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1},on:{cancel:e.handleCancel}},[t("a-form-model",{attrs:{model:e.formData,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[t("a-form-model-item",{attrs:{label:"快递"}},[t("a-select",{attrs:{placeholder:"请选择"},on:{change:e.hanleChange}},e._l(e.expressOptions,(function(r){return t("a-select-option",{key:r.id},[e._v(" "+e._s(r.name)+e._s(r.is_singface&&"1"==r.is_singface?"（电子面单）":"")+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"快递单号"}},[t("a-input",{attrs:{placeholder:"请输入快递单号"},model:{value:e.formData.express_no,callback:function(t){e.$set(e.formData,"express_no",t)},expression:"formData.express_no"}})],1)],1),t("template",{slot:"footer"},[t("div",{staticClass:"flex justify-center align-center"},[t("a-button",{key:"back",staticClass:"mr-20",on:{click:function(t){return e.btnOpt(2)}}},[e._v(" 普通发货 ")]),t("a-button",{key:"submit",attrs:{type:"primary",disabled:"2"==e.fh_type||"1"==e.fh_type&&0==e.is_singface},on:{click:function(t){return e.btnOpt(1)}}},[e._v(" 电子面单发货 ")])],1)])],2)],1)},s=[],o=(r("a9e3"),r("d3b7"),r("159b"),r("5f66")),l={props:{visible:Boolean,title:String,order:Object,fh_type:[String,Number]},data:function(){return{labelCol:{span:4},wrapperCol:{span:14},formData:{order_id:"",activity_type:"",periodic_order_id:"",current_periodic:"",express_type:"",express_no:"",express_id:"",express_name:"",fh_type:"1"},expressOptions:[],is_singface:1}},created:function(){this.getExpress()},methods:{getExpress:function(){var e=this;this.request(o["a"].getExpress,"").then((function(t){e.expressOptions=t||[]}))},hanleChange:function(e){var t=this;this.$set(this.formData,"express_id",e),this.expressOptions.forEach((function(r){r.id==e&&(t.$set(t.formData,"express_name",r.name),t.is_singface=r.is_singface)}))},btnOpt:function(e){var t=this;if(this.$set(this.formData,"express_type",e),this.formData.express_id)if(2!=e||this.formData.express_no){var r=this.order,a=r.order_id,s=r.goods_activity_type,l=r.order_type,i=r.periodic_order_id,n=r.current_periodic;this.$set(this.formData,"order_id",a),this.$set(this.formData,"activity_type",s),"periodic"==l&&(this.$set(this.formData,"periodic_order_id",i),this.$set(this.formData,"current_periodic",n)),this.$set(this.formData,"fh_type",this.fh_type),this.request(o["a"].deliverGoodsByExpress,this.formData).then((function(e){var r="1"==t.fh_type?"订单发货成功":"快递更改成功";t.$message.success(r),Object.assign(t.$data,t.$options.data()),t.handleCancel(),t.$emit("updateList")}))}else this.$message.error("请输入快递单号");else this.$message.error("请选择快递")},handleCancel:function(){this.$emit("handleCancel"),Object.assign(this.$data,this.$options.data())}}},i=l,n=r("2877"),d=Object(n["a"])(i,a,s,!1,null,"a6aba266",null);t["default"]=d.exports},"857b":function(e,t,r){"use strict";r("c401")},9065:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-form-model",{attrs:{model:e.formData,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[t("a-form-model-item",{attrs:{label:""}},[t("a-input",{staticStyle:{height:"200px",resize:"none"},attrs:{type:"textarea",autosize:"",placeholder:"请输入拒绝理由"},model:{value:e.formData.reason,callback:function(t){e.$set(e.formData,"reason",t)},expression:"formData.reason"}})],1)],1)],1)],1)},s=[],o=r("5f66"),l={props:{visible:Boolean,title:String,order:Object},data:function(){return{labelCol:{span:0},wrapperCol:{span:24},formData:{order_id:"",reason:"",status:""},expressOptions:[]}},created:function(){},methods:{handleOk:function(){var e=this;this.formData.reason?(this.$set(this.formData,"order_id",this.order.order_id),this.$set(this.formData,"status",this.order.status),this.request(o["a"].refuseRefund,this.formData).then((function(t){e.$message.success("操作成功"),e.$emit("handleCancel"),e.$emit("updateList")}))):this.$message.error("请输入拒绝理由")},handleCancel:function(){this.$emit("handleCancel"),Object.assign(this.$data,this.$options.data())}}},i=l,n=r("2877"),d=Object(n["a"])(i,a,s,!1,null,"6bcd1f29",null);t["default"]=d.exports},a71b:function(e,t,r){"use strict";r("442e")},b0fa:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1,footer:null},on:{ok:e.handleCancel,cancel:e.handleCancel}},[e.rider_name?t("span",[t("span",[e._v("骑手："+e._s(e.rider_name))]),t("a-divider",{attrs:{type:"virticle"}}),t("span",[e._v("骑手号码："+e._s(e.rider_phone))]),t("a-divider")],1):e._e(),e.logistics.length?t("a-timeline",{attrs:{pending:e.pending,reverse:!0}},e._l(e.logistics,(function(r,a){return t("a-timeline-item",{key:a},[t("p",{staticClass:"mb-0"},[e._v(e._s(e.moment(r.time).format("YYYY-MM-DD HH:mm")))]),t("span",[e._v(e._s(r.context))])])})),1):t("a-empty",{attrs:{image:e.simpleImage}},[t("span",{attrs:{slot:"description"},slot:"description"},[e._v("暂无物流信息")])])],1)],1)},s=[],o=(r("06f4"),r("fc25")),l=(r("16c9"),r("387a")),i=r("8bbf"),n=r.n(i),d=r("4031"),c=r("c1df"),p=r.n(c);n.a.use(l["a"]),n.a.use(o["a"]);var m={props:{visible:Boolean,title:String,order:Object},data:function(){return{logistics:[],pending:!1,simpleImage:"",rider_name:"",rider_phone:""}},beforeCreate:function(){this.simpleImage=o["a"].PRESENTED_IMAGE_SIMPLE},mounted:function(){20==this.order.status&&(this.pending="正在配送中..."),this.viewLogistics()},methods:{moment:p.a,viewLogistics:function(){var e=this,t=this.order,r=t.order_id,a=t.order_type,s=t.periodic_order_id,o=t.express_style;console.log("bbb"),this.request(d["a"].viewLogistics,{order_id:r,periodic_order_id:s&&"periodic"==a?s:"",order_type:a,express_style:o}).then((function(t){console.log("aaa",t),t&&(e.logistics=t.list||[],e.rider_name=t.rider_name,e.rider_phone=t.rider_phone)}))},handleCancel:function(){this.$emit("handleCancel")}}},u=m,h=(r("857b"),r("2877")),_=Object(h["a"])(u,a,s,!1,null,"16631c96",null);t["default"]=_.exports},c401:function(e,t,r){},e3e6:function(e,t,r){"use strict";r.r(t);r("99af"),r("ac1f"),r("1276");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"order-item-wrap"},[t("a-row",{staticClass:"order-item-header",attrs:{type:"flex",justify:"space-between",align:"middle"}},[t("a-col",{attrs:{span:16}},[t("a-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[t("a-col",{attrs:{span:8}},[e._v("订单编号："+e._s(e.order.order_no))]),t("a-col",{attrs:{span:8}},[e._v("下单时间："+e._s(e.order.create_time))]),t("a-col",{attrs:{span:8}},[e._v("订单类型："+e._s(e.order.order_type_txt))])],1)],1),t("a-col",{attrs:{span:8}},[t("a-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[e.order.verify_text?e._e():t("a-col",{staticClass:"text-center",attrs:{span:16}},["待付款"!=e.order.pay_type?t("span",[e._v("付款方式："+e._s(e.order.pay_type))]):e._e()]),e.order.verify_text?t("a-col",{staticClass:"text-center",attrs:{span:6}},["待付款"!=e.order.pay_type?t("span",[e._v("付款方式："+e._s(e.order.pay_type))]):e._e()]):e._e(),e.order.verify_text?t("a-col",{staticClass:"text-center",attrs:{span:10}},["待付款"!=e.order.pay_type?t("span",[e._v("核销方式："+e._s(e.order.verify_text))]):e._e()]):e._e(),t("a-col",{staticClass:"text-center",attrs:{span:8}},[t("a-button",{attrs:{type:"link"},on:{click:e.orderPrintTicket}},[e._v(" 打印小票")])],1),t("a-col",{staticClass:"text-center",attrs:{span:8}},[t("a-button",{attrs:{type:"link"},on:{click:e.orderDetail}},[e._v(" 查看详情")])],1)],1)],1)],1),t("a-row",{staticClass:"order-item-content",attrs:{type:"flex",justify:"space-between"}},[t("a-col",{attrs:{span:8}},[t("div",{staticClass:"goods-wrap"},e._l(e.goods,(function(r,a){return t("div",{directives:[{name:"show",rawName:"v-show",value:r.show,expression:"goodsItem.show"}],key:a,staticClass:"goods-item"},[t("a-row",{staticClass:"pt-20 pb-20 order-item-content-goods",class:1!=a&&e.fold&&e.goods.length>1||a!=e.goods.length-1&&!e.fold?"border-bottom":"",attrs:{type:"flex",justify:"space-between",align:"middle"}},[t("a-col",{attrs:{span:12}},[t("div",{staticClass:"flex align-center"},[t("a-avatar",{attrs:{shape:"square",size:64,src:r.image}}),t("div",{staticClass:"flex flex-column pl-10 pr-10 flex-1 sx-hidden"},[t("span",{staticClass:"goods-name flex-1"},[e._v(e._s(r.goods_name))]),t("span",{directives:[{name:"show",rawName:"v-show",value:r.sku_info,expression:"goodsItem.sku_info"}]},[e._v(e._s(r.sku_info))]),1==r.is_gift?t("span",[t("a-tag",{attrs:{color:"#108ee9"}},[e._v("赠品")])],1):e._e(),r.refund_desc?t("span",e._l(r.refund_desc,(function(r,a){return t("a-tag",{key:a,attrs:{color:"red"}},[e._v(e._s(r))])})),1):e._e()])],1)]),t("a-col",{staticClass:"text-center",attrs:{span:6}},[e._v(e._s(e.currency)+e._s(r.price))]),t("a-col",{staticClass:"text-center goods-num",attrs:{span:6}},[t("span",[e._v(e._s(r.num))]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.goods.length>2&&1==a&&e.fold,expression:"goods.length > 2 && goodsIndex == 1 && fold"}],staticClass:"fold-btn"},[t("a-button",{key:"unfold",attrs:{type:"link"},on:{click:function(t){return e.foldMenu("unfold")}}},[e._v(" 展开"),t("a-icon",{attrs:{type:"down"}})],1)],1),t("span",{directives:[{name:"show",rawName:"v-show",value:a==e.goods.length-1&&!e.fold,expression:"goodsIndex == goods.length - 1 && !fold"}],staticClass:"fold-btn"},[t("a-button",{key:"fold",attrs:{type:"link"},on:{click:function(t){return e.foldMenu("fold")}}},[e._v(" 收起"),t("a-icon",{attrs:{type:"up"}})],1)],1)])],1)],1)})),0)]),t("a-col",{attrs:{span:16}},[t("a-row",{staticClass:"height-inherit",attrs:{type:"flex",justify:"space-between"}},[t("a-col",{attrs:{span:4}},[t("div",{staticClass:"content-item"},[t("span",[e._v(e._s(e.order.username))]),t("span",[e._v(e._s(e.order.phone))])])]),t("a-col",{attrs:{span:4}},[t("div",{staticClass:"content-item"},[t("span",[e._v(e._s(e.order.address))])])]),t("a-col",{attrs:{span:4}},[t("div",{staticClass:"content-item"},[e.order.periodic_count&&"periodic"==e.order.order_type?t("span",[t("span",[e._v(" 共计 "+e._s(e.order.periodic_count)+" 期 ")]),e.order.refund_count_periodic?t("span",[e._v(" 退款 "),t("span",{staticClass:"cr-red"},[e._v(" "+e._s(e.order.refund_count_periodic)+" ")]),e._v(" 期 ")]):e._e()]):e._e(),t("span",[e._v("商品总价："+e._s(e.currency)+e._s(e.order.money_total))]),e.order.discount_total?t("span",[t("a-popover",{attrs:{title:"",trigger:"click"},model:{value:e.discountTotalVisible,callback:function(t){e.discountTotalVisible=t},expression:"discountTotalVisible"}},[t("span",{attrs:{slot:"content"},slot:"content"},[t("a-list",{attrs:{"item-layout":"horizontal","data-source":e.discountList},scopedSlots:e._u([{key:"renderItem",fn:function(r){return r.value&&0!=r.value?t("a-list-item",{staticClass:"flex"},[t("a-badge",{attrs:{color:"red",text:"".concat(r.label,"：-").concat(e.currency).concat(r.value)}})],1):e._e()}}],null,!0)})],1),e.order.discount_total&&0!=e.order.discount_total?t("span",{staticClass:"pointer",on:{click:function(t){e.discountTotalVisible=!e.discountTotalVisible}}},[e._v(" 总优惠 "),t("a-icon",{attrs:{type:"exclamation-circle"}}),e._v(" ： "),t("span",[e._v("-"+e._s(e.currency)+e._s(e.order.discount_total))])],1):e._e()])],1):e._e(),e.order.money_freight&&0!=e.order.money_freight?t("span",[e._v(" 运费：+"+e._s(e.currency)+e._s(e.order.money_freight)+" ")]):e._e(),e.order.bargain_price&&0!=e.order.bargain_price&&"prepare"==e.order.order_type?t("span",[e._v(" 定金"+e._s(e.currency)+e._s(e.order.bargain_price)+" "),e.order.deduct_price&&0!=e.order.deduct_price?t("span",[e._v(" 抵"+e._s(e.currency)+e._s(e.order.deduct_price)+" ")]):e._e()]):e._e(),e.order.bargain_price&&0!=e.order.bargain_price&&"prepare"==e.order.order_type?t("span",{staticClass:"cr-red"},[e._v(" 已支付定金："+e._s(e.currency)+e._s(e.order.real_bargain_price)+" ")]):e._e(),t("span",{staticClass:"fw-bold"},[0==e.order.status?t("span",{staticClass:"cr-black"},[e._v("待付款：")]):e._e(),1==e.order.status?t("span",{staticClass:"cr-black"},[e._v("尾款待付款：")]):e._e(),e.order.status>=10?t("span",{staticClass:"cr-black"},[e._v("实付款：")]):e._e(),t("span",{staticClass:"cr-red"},[e._v(e._s(e.currency)+e._s(e.order.money_real))])]),e.order.status>=60&&e.order.status<80&&(e.order.refund_money_periodic&&0!=e.order.refund_money_periodic||e.order.refund_money&&0!=e.order.refund_money)&&1==e.order.is_all?t("span",{staticClass:"cr-red"},[e._v(" 退款金额："+e._s(e.currency)+e._s("periodic"==e.order.order_type?e.order.refund_money_periodic:e.order.refund_money)+" ")]):e._e(),e.order.status>=60&&e.order.status<80&&(e.order.refund_money_periodic&&0!=e.order.refund_money_periodic||e.order.refund_money&&0!=e.order.refund_money)&&0==e.order.is_all?t("span",{staticClass:"cr-red"},[e._v(" 部分退款金额："+e._s(e.currency)+e._s("periodic"==e.order.order_type?e.order.refund_money_periodic:e.order.refund_money)+" ")]):e._e()])]),t("a-col",{attrs:{span:4}},[t("div",{staticClass:"content-item"},[t("span",[e._v(e._s(e.order.express_style_txt))]),1==e.order.express_style?t("span",[e._v("期望送达时间："+e._s(e.order.express_current_time))]):e._e()])]),t("a-col",{attrs:{span:4}},[t("div",{staticClass:"content-item"},[t("span",["periodic"==e.order.order_type&&e.order.current_periodic?t("span",{staticClass:"cr-red"},[e._v(" 第"+e._s(e.order.current_periodic)+"期 ")]):e._e(),t("span",[e._v(e._s(e.order.status_txt||"---"))])]),e.order.current_time?t("span",{staticClass:"cr-red"},[e._v(" "+e._s(-1!=e.order.current_time.indexOf(" ")?e.order.current_time.split(" ")[0]:e.order.current_time)+"送达 ")]):e._e(),10==e.order.status&&e.order.send_time&&"prepare"==e.order.order_type?t("span",{staticClass:"cr-red"},[e._v(" 发货时间："+e._s(e.moment(e.order.send_time).format("YYYY.MM.DD"))+" ")]):e._e()])]),t("a-col",{attrs:{span:4}},[t("div",{staticClass:"content-item"},[t("span",[e._v(e._s(e.order.store_name))])])]),t("a-col",{attrs:{span:4}},[e.isHasBtn?t("div",{staticClass:"content-item"},e._l(e.btnList,(function(r){return t("span",{key:r.props},[1==r.show?t("a-button",{style:{color:r.color},attrs:{type:"link"},on:{click:function(t){return e.btnOpt(r)}}},[e._v(" "+e._s(r.label)+" ")]):e._e()],1)})),0):t("div",{staticClass:"content-item"},[e._v("---")])])],1)],1)],1),e.order.remark&&""!=e.order.remark?t("a-row",{staticClass:"remark"},[e._v(" 买家备注："+e._s(e.order.remark)+" ")]):e._e(),e.order.clerk_remark&&""!=e.order.clerk_remark?t("a-row",{staticClass:"clerk_remark"},[e._v(" 店员备注："+e._s(e.order.clerk_remark)+" ")]):e._e(),"express_btn"==e.currentBtn.props?t("deliverGoods",{attrs:{visible:e.deliverGoodsVisible,title:e.currentBtn.title,order:e.order},on:{handleCancel:function(t){e.deliverGoodsVisible=!1},updateList:e.updateList}}):e._e(),"trajectory_btn"==e.currentBtn.props||"logistics_btn"==e.currentBtn.props?t("logistics",{attrs:{visible:e.logisticsVisible,title:e.currentBtn.title,order:e.order},on:{handleCancel:function(t){e.logisticsVisible=!1}}}):e._e(),"refuse_refund_btn"==e.currentBtn.props?t("refuseRefund",{attrs:{visible:e.refuseRefundVisible,title:e.currentBtn.title,order:e.order},on:{handleCancel:function(t){e.refuseRefundVisible=!1},updateList:e.updateList}}):e._e()],1)},s=[],o=(r("a9e3"),r("d81d"),r("4de4"),r("d3b7"),r("c1df")),l=r.n(o),i=r("4031"),n=r("81b5"),d=r("b0fa"),c=r("9065"),p={props:{order:Object,tabStatus:[Number,String]},components:{deliverGoods:n["default"],logistics:d["default"],refuseRefund:c["default"]},data:function(){return{fold:!0,discountTotalVisible:!1,goods:[],discountList:[{label:"平台优惠券优惠金额",value:"",props:"discount_system_coupon"},{label:"商家优惠券优惠金额",value:"",props:"discount_merchant_coupon"},{label:"商家会员卡优惠金额",value:"",props:"discount_merchant_card"},{label:"平台会员等级优惠金额",value:"",props:"discount_system_level"},{label:"店员优惠金额",value:"",props:"discount_clerk_money"},{label:"参加活动优惠金额",value:"",props:"discount_act_money"}],btnList:[{label:"接单",props:"take_btn",show:"0",action:"confirm",tips:"是否确定接单？",success:"接单成功",api:"orderTaking",color:"#1890ff"},{label:"骑手配送",props:"hoseman_btn",show:"0",action:"confirm",tips:"是否确定骑手配送？",success:"订单已转至平台配送！",api:"deliverGoodsByHouseman",color:"#1890ff"},{label:"店员核销",props:"clerk_btn",show:"0",action:"confirm",tips:"是否确定核销？",success:"该订单已核销",api:"staffVerify",color:"#1890ff"},{label:"快递发货",props:"express_btn",show:"0",action:"modal",title:"发货",color:"#1890ff"},{label:"查看物流",props:"logistics_btn",show:"0",action:"modal",title:"查看物流",color:"#1890ff"},{label:"顺延配送",props:"postpone_btn",show:"0",action:"confirm",tips:"是否确定顺延配送？",success:"该订单已顺延配送",api:"postponeDelivery",color:"rgb(250, 173, 20)"},{label:"骑手轨迹",props:"trajectory_btn",show:"0",action:"modal",title:"骑手轨迹",color:"#1890ff"},{label:"同意退款",props:"agree_refund_btn",show:"0",action:"confirm",tips:"是否确定同意退款？",success:"同意退款成功",api:"agreeRefund",color:"#1890ff"},{label:"拒绝退款",props:"refuse_refund_btn",show:"0",action:"modal",title:"拒绝退款",color:"rgb(250, 173, 20)"}],currentBtn:"",deliverGoodsVisible:!1,logisticsVisible:!1,refuseRefundVisible:!1,moneyRealVisible:!1,after_money:"",isHasBtn:0,currency:"￥"}},watch:{order:{immediate:!0,handler:function(e){e&&(this.initGoods(),this.initDiscountList(),this.initBtnList())}}},mounted:function(){this.initGoods(),this.initDiscountList(),this.initBtnList()},methods:{moment:l.a,foldMenu:function(e){"unfold"==e?(this.fold=!1,this.goods=this.goods.map((function(e,t){return e.show=!0,e}))):(this.fold=!0,this.initGoods())},initGoods:function(){this.goods=this.order&&this.order.children?this.order.children:[],this.goods.length&&(this.goods=this.goods.map((function(e,t){return e.show=!(t>1),e})))},initDiscountList:function(){var e=this;this.discountList=this.discountList.map((function(t){return e.order&&(t.value=e.order[t.props]),t}))},initBtnList:function(){var e=this;this.btnList=this.btnList.map((function(t){return t.show=e.order.button[t.props],70==e.order.status&&"logistics_btn"==t.props&&(t.show=0),t})),this.isHasBtn=this.btnList.filter((function(e){return 1==e.show})).length},btnOpt:function(e){var t=this;this.currentBtn=e,console.log(this.currentBtn,"this.currentBtn");var r=this.currentBtn,a=r.api,s=void 0===a?"":a,o=r.success,l=void 0===o?"":o,n=r.tips,d=void 0===n?"":n,c=r.action,p=void 0===c?"":c,m=r.props,u=void 0===m?"":m,h=this.order,_=h.order_id,f=h.periodic_order_id,g=h.order_type;"confirm"==p&&this.$confirm({title:d||"提醒",content:"",okText:"确认",cancelText:"取消",onOk:function(){if(s){var e={order_id:_},r=["take_btn","hoseman_btn"];"periodic"==g&&-1!=r.indexOf(u)&&(e.periodic_order_id=f),t.request(i["a"][s],e).then((function(e){t.$message.success(l),t.updateList()}))}},onCancel:function(){console.log("Cancel"),t.currentBtn=""},class:"test"}),"modal"==p&&("express_btn"==u?this.deliverGoodsVisible=!0:"trajectory_btn"==u||"logistics_btn"==u?this.logisticsVisible=!0:"refuse_refund_btn"==u&&(this.refuseRefundVisible=!0))},updateList:function(){this.$emit("getOrderList")},orderDetail:function(){var e=this.order,t=e.order_id,r=void 0===t?"":t,a=e.periodic_order_id,s=void 0===a?"":a,o=e.order_type,l=e.refund_id,i=void 0===l?"":l,n={order_id:r};s&&"periodic"==o&&(n.periodic_order_id=s),i&&(n.refund_id=i);var d=this.$router.resolve({path:"/merchant/merchant.mall/orderDetail",query:n});window.open(d.href,"_blank")},orderPrintTicket:function(){var e=this,t={order_id:this.order.order_id};this.request(i["a"].orderPrintTicket,t).then((function(t){e.$message.success("打印成功")}))}}},m=p,u=(r("a71b"),r("2877")),h=Object(u["a"])(m,a,s,!1,null,"ec84fd54",null);t["default"]=h.exports}}]);