(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51241e24","chunk-2d0b6a79","chunk-2d0b6a79","chunk-2d0b3786"],{"0f19":function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("a-tabs",{attrs:{"default-active-key":"1"}},[t("a-tab-pane",{key:"1",attrs:{tab:e.title}})],1),t("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[t("a-form",{attrs:{form:e.form,"label-col":{span:5},"wrapper-col":{span:8}},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"贷款类型"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["loans_type",{initialValue:e.detail.loans_type}],expression:"['loans_type', { initialValue: detail.loans_type }]"}],staticStyle:{width:"110px"}},e._l(e.loansTypeArr,(function(a){return t("a-select-option",{key:a.value,attrs:{value:a.value}},[e._v(" "+e._s(a.name)+" ")])})),1)],1),t("a-form-item",{attrs:{label:"贷款标题",help:"建议不要超过10个字"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{initialValue:e.detail.title,rules:[{required:!0,message:"请输入贷款标题!"}]}],expression:"['title', { initialValue: detail.title,rules: [{ required: true, message: '请输入贷款标题!' }] }]"}],attrs:{"field-names":"title",placeholder:"请输入贷款标题"}})],1),t("a-form-item",{attrs:{label:"贷款标签",help:"建议不要超过20个字"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["label",{initialValue:e.detail.label,rules:[{required:!0,message:"请输入贷款标签!"}]}],expression:"['label', { initialValue: detail.label,rules: [{ required: true, message: '请输入贷款标签!' }] }]"}],attrs:{"field-names":"label",placeholder:"请输入贷款标签",help:"每个标签之间用空格分栏"}})],1),t("a-form-item",{attrs:{label:"贷款期限"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loans_time_limit",{initialValue:e.detail.loans_time_limit,rules:[{required:!0,message:"请输入贷款期限!"}]}],expression:"['loans_time_limit', { initialValue: detail.loans_time_limit,rules: [{ required: true, message: '请输入贷款期限!' }] }]"}],attrs:{"field-names":"loans_time_limit",placeholder:"请输入贷款期限"}})],1),t("a-form-item",{attrs:{label:"贷款利率"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loans_interest_rate",{initialValue:e.detail.loans_interest_rate,rules:[{required:!0,message:"请输入贷款利率!"}]}],expression:"['loans_interest_rate', { initialValue: detail.loans_interest_rate,rules: [{ required: true, message: '请输入贷款利率!' }] }]"}],attrs:{"field-names":"loans_interest_rate",placeholder:"请输入贷款利率"}})],1),t("a-form-item",{attrs:{label:"适用客户",help:"建议不要超过100个字"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["for_customer",{initialValue:e.detail.for_customer,rules:[{required:!0,message:"请输入适用客户!"}]}],expression:"['for_customer', { initialValue: detail.for_customer,rules: [{ required: true, message: '请输入适用客户!' }] }]"}],attrs:{"field-names":"for_customer",placeholder:"请输入适用客户"}})],1),t("a-form-item",{attrs:{label:"最高额度"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["loans_highest_amount",{initialValue:e.detail.loans_highest_amount,rules:[{required:!0,message:"请输入最高额度!"}]}],expression:"['loans_highest_amount', { initialValue: detail.loans_highest_amount,rules: [{ required: true, message: '请输入最高额度!' }] }]"}],staticStyle:{width:"140px"},attrs:{"field-names":"loans_highest_amount",placeholder:"请输入最高额度"}}),t("span",{staticClass:"ml-10"},[e._v("万")])],1),t("a-form-item",{attrs:{label:"贷款方式"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loans_method",{initialValue:e.detail.loans_method}],expression:"['loans_method', { initialValue: detail.loans_method}]"}],attrs:{"field-names":"loans_method",placeholder:"请输入贷款方式"}})],1),t("a-form-item",{attrs:{label:"还款方式"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loans_repayment_method",{initialValue:e.detail.loans_repayment_method}],expression:"['loans_repayment_method', { initialValue: detail.loans_repayment_method }]"}],attrs:{"field-names":"loans_repayment_method",placeholder:"请输入还款方式"}})],1),t("a-form-item",{attrs:{label:"联系电话"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone",{initialValue:e.detail.phone,rules:[{required:!0,message:"请输入联系电话!"}]}],expression:"['phone', { initialValue: detail.phone,rules: [{ required: true, message: '请输入联系电话!' }] }]"}],attrs:{"field-names":"phone",placeholder:"请输入联系电话"}})],1),t("a-form-item",{attrs:{label:"发布人"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["release_people",{initialValue:e.detail.release_people,rules:[{required:!0,message:"请输入发布人!"}]}],expression:"['release_people', { initialValue: detail.release_people,rules: [{ required: true, message: '请输入发布人!' }] }]"}],attrs:{"field-names":"release_people",placeholder:"请输入发布人"}})],1),e.detail.banking_id?t("a-form-item",{attrs:{label:"修改人"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["edit_people",{initialValue:e.detail.edit_people,rules:[{required:!0,message:"请输入修改人!"}]}],expression:"['edit_people', { initialValue: detail.edit_people,rules: [{ required: true, message: '请输入修改人!' }] }]"}],attrs:{"field-names":"edit_people",placeholder:"请输入修改人"}})],1):e._e(),t("a-form-item",{attrs:{label:"上传产品封面图片",help:"建议200*200px"}},[t("a-upload",{attrs:{name:"reply_pic","file-list":e.fileListCover,action:e.uploadImg,headers:e.headers,"list-type":"picture-card"},on:{preview:e.handlePreviewCover,change:function(a){return e.upLoadChangeCover(a)}}},[e.fileListCover.length<1?t("div",[t("a-icon",{attrs:{type:"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v("上传图片")])],1):e._e()]),t("a-modal",{attrs:{visible:e.previewVisibleCover,footer:null},on:{cancel:e.handleCancelCover}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImageCover}})])],1),t("a-form-item",{attrs:{label:"上传产品详情图片",help:"建议659*330px"}},[t("a-upload",{attrs:{name:"reply_pic","file-list":e.fileList,action:e.uploadImg,headers:e.headers,"list-type":"picture-card"},on:{preview:e.handlePreview,change:function(a){return e.upLoadChange(a)}}},[e.fileList.length<1?t("div",[t("a-icon",{attrs:{type:"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v("上传图片")])],1):e._e()]),t("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),t("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[t("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v(" 提交 ")])],1)],1)],1)],1)},n=[],r=t("1da1"),l=t("2909"),s=(t("96cf"),t("d3b7"),t("25f0"),t("4de4"),t("99af"),t("fb6a"),t("d81d"),t("b0c0"),t("b706")),o=t("7b3f"),u=[{value:1,name:"个人贷"},{value:2,name:"企业贷"}],d={components:{},data:function(){return{type:"loans",loansTypeArr:u,headers:{authorization:"authorization-text"},uploadImg:"/v20/public/index.php"+o["a"].uploadImg+"?upload_dir=/banking/loans",baseData:{banking_id:0,type:"loans",title:"",introduce:"",images:"",cover_image:"",phone:"",label:"",release_people:"",for_customer:"",loans_type:1,loans_time_limit:"",loans_interest_rate:"",loans_highest_amount:"",loans_method:"",loans_repayment_method:""},inputVisibleLoansMethod:!1,inputVisibleLoansRepaymentMethod:!1,inputValue:"",title:"新建贷款",detail:{},updateData:{upload_dir:"banking"},updateDataCover:{upload_dir:"banking"},fileList:[],fileListCover:[],previewVisible:!1,previewVisibleCover:!1,previewImage:null,previewImageCover:null,form:this.$form.createForm(this,{name:"coordinated"})}},mounted:function(){console.log("mounted"),this.resetForm(),this.$route.query.banking_id&&(this.detail.banking_id=this.$route.query.banking_id,this.getBankingDetail())},watch:{$route:function(e,a){console.log("watch");var t=e.query;t.banking_id?(this.detail.banking_id=t.banking_id,this.getBankingDetail()):this.resetForm()}},methods:{resetForm:function(){this.title="新建贷款",this.form.resetFields(),this.detail=this.baseData},getBankingDetail:function(){var e=this;this.request(s["a"].getBankingDetail,{banking_id:this.detail.banking_id}).then((function(a){e.detail=a,e.detail.loans_method=e.detail.loans_method.toString(),e.detail.loans_repayment_method=e.detail.loans_repayment_method.toString(),e.title="编辑贷款";var t=[];if(a.images.length>0)for(var i in a.images)t.push({uid:i+1,name:"image.png",status:"done",url:a.images[i],data:a.images[i]});e.fileList=t,e.fileListCover[0]={uid:1,name:"image.png",status:"done",url:a.cover_image,data:a.cover_image}}))},handleClose:function(e,a){var t=this.detail[a].filter((function(a){return a!==e}));this.detail[a]=t},showInputRepayment:function(){this.inputVisibleLoansRepaymentMethod=!0,this.$nextTick((function(){this.$refs.input.focus()}))},showInput:function(){this.inputVisibleLoansMethod=!0,this.$nextTick((function(){this.$refs.input.focus()}))},handleInputChange:function(e){this.inputValue=e.target.value},handleInputConfirm:function(e){var a=this.inputValue,t=this.detail[e];switch(a&&-1===t.indexOf(a)&&(t=[].concat(Object(l["a"])(t),[a])),this.detail[e]=t,e){case"loans_method":this.inputVisibleLoansMethod=!1;break;case"loans_repayment_method":this.inputVisibleLoansRepaymentMethod=!1;break}Object.assign(this,{tags:t,inputValue:""})},handlePreview:function(e){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,getBase64(e.originFileObj);case 3:e.preview=t.sent;case 4:a.previewImage=e.url||e.preview,a.previewVisible=!0;case 6:case"end":return t.stop()}}),t)})))()},handlePreviewCover:function(e){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,getBase64(e.originFileObj);case 3:e.preview=t.sent;case 4:a.previewImageCover=e.url||e.preview,a.previewVisibleCover=!0;case 6:case"end":return t.stop()}}),t)})))()},upLoadChange:function(e){var a=this,t=Object(l["a"])(e.fileList);t=t.slice(-1),t=t.map((function(t){return t.response&&(t.url=t.response.data.full_url,a.detail.images=e.file.response.data.image),t})),this.fileList=t,"done"===e.file.status||"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传失败."))},upLoadChangeCover:function(e){var a=this,t=Object(l["a"])(e.fileList);t=t.slice(-1),t=t.map((function(t){return t.response&&(t.url=t.response.data.full_url,a.detail.cover_image=e.file.response.data.image),t})),this.fileListCover=t,"done"===e.file.status||"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传失败."))},handleCancel:function(){this.previewVisible=!1},handleCancelCover:function(){this.previewVisibleCover=!1},handleSubmit:function(e){var a=this;e.preventDefault(),this.form.validateFields((function(e,t){if(!e){if(console.log(t,"values"),console.log(a.detail,"detail"),t.banking_id=a.detail.banking_id,t.cover_image=a.detail.cover_image,t.images=a.detail.images,t.type=a.detail.type,!a.detail.cover_image)return a.$message.error("请上传产品封面图！"),!1;if(!a.detail.images)return a.$message.error("请上传产品详情图！"),!1;a.request(s["a"].saveBanking,t).then((function(e){a.resetForm(),a.$message.success(a.L("操作成功！")),localStorage.setItem("refresh",1),a.$router.push({path:"/banking/platform.banking/BankingList"})}))}}))}}},m=d,p=t("2877"),c=Object(p["a"])(m,i,n,!1,null,null,null);a["default"]=c.exports},"1da1":function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));t("d3b7");function i(e,a,t,i,n,r,l){try{var s=e[r](l),o=s.value}catch(u){return void t(u)}s.done?a(o):Promise.resolve(o).then(i,n)}function n(e){return function(){var a=this,t=arguments;return new Promise((function(n,r){var l=e.apply(a,t);function s(e){i(l,n,r,s,o,"next",e)}function o(e){i(l,n,r,s,o,"throw",e)}s(void 0)}))}}},2909:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var i=t("6b75");function n(e){if(Array.isArray(e))return Object(i["a"])(e)}t("a4d3"),t("e01a"),t("d3b7"),t("d28b"),t("3ca3"),t("ddb0"),t("a630");function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var l=t("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){return n(e)||r(e)||Object(l["a"])(e)||s()}},"7b3f":function(e,a,t){"use strict";var i={uploadImg:"/common/common.UploadFile/uploadImg"};a["a"]=i},b706:function(e,a,t){"use strict";var i={getBankingList:"/banking/platform.Banking/getList",getBankingDetail:"/banking/platform.Banking/getDetail",saveBanking:"/banking/platform.Banking/saveBanking",getBankingLogList:"/banking/platform.Banking/getLogList",delBanking:"/banking/platform.Banking/delBanking",getApplyList:"/banking/platform.BankingApply/getList",changeStatus:"/banking/platform.BankingApply/changeStatus",exportUrl:"/banking/platform.BankingApply/export",getVillageList:"/banking/platform.BankingApply/getVillageList",getBankingConfigList:"/banking/platform.Banking/getConfigDataList",editSeting:"/banking/platform.Banking/editSeting",getInformationList:"/banking/platform.Banking/getInformationList",delInformation:"/banking/platform.Banking/delInformation",getInformationData:"/banking/platform.Banking/getInformationData",editOrAddInformation:"/banking/platform.Banking/editOrAddInformation"};a["a"]=i}}]);