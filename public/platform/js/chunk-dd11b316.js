(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd11b316","chunk-2d0b6a79"],{"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("d3b7");function i(t,e,a,i,o,n,r){try{var s=t[n](r),l=s.value}catch(m){return void a(m)}s.done?e(l):Promise.resolve(l).then(i,o)}function o(t){return function(){var e=this,a=arguments;return new Promise((function(o,n){var r=t.apply(e,a);function s(t){i(r,o,n,s,l,"next",t)}function l(t){i(r,o,n,s,l,"throw",t)}s(void 0)}))}}},8347:function(t,e,a){},b168c:function(t,e,a){"use strict";a("8347")},b460:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-volunteer-activity-box"},[a("a-form",{attrs:{form:t.form},on:{submit:t.addVolunteerActivity}},[a("a-form-item",t._b({attrs:{label:"活动名称"}},"a-form-item",t.formItemLayout,!1),[a("a-input",{attrs:{placeholder:"请填写活动名称"},model:{value:t.detail.active_name,callback:function(e){t.$set(t.detail,"active_name",e)},expression:"detail.active_name"}})],1),a("a-form-item",t._b({attrs:{label:"上传图片"}},"a-form-item",t.formItemLayout,!1),[a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{name:"active_img",action:t.uploadImgUrl,"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview,change:t.handleChange}},[t.fileList.length<5?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v(" 上传 ")])],1):t._e()]),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)]),a("a-form-item",t._b({attrs:{label:"活动内容"}},"a-form-item",t.formItemLayout,!1),[a("rich-text",{attrs:{info:t.detail.richText},on:{"update:info":function(e){return t.$set(t.detail,"richText",e)}}})],1),a("a-form-item",t._b({attrs:{label:"活动时间"}},"a-form-item",t.formItemLayout,!1),[a("a-date-picker",{attrs:{format:t.dateFormat,placeholder:"开始时间",value:t.date_moment(t.detail.start_time,t.dateFormat)},on:{change:t.startOnChange}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1),a("a-date-picker",{attrs:{format:t.dateFormat,placeholder:"结束时间",value:t.date_moment(t.detail.end_time,t.dateFormat)},on:{change:t.endOnChange}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1),a("a-form-item",t._b({attrs:{label:"报名截止时间"}},"a-form-item",t.formItemLayout,!1),[a("a-date-picker",{attrs:{format:t.dateFormat,placeholder:"报名截止时间",value:t.date_moment(t.detail.close_time,t.dateFormat)},on:{change:t.onChange}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1),a("a-form-item",t._b({attrs:{label:"活动报名人数"}},"a-form-item",t.formItemLayout,!1),[a("a-input",{attrs:{placeholder:"请填写活动报名人数"},model:{value:t.detail.max_num,callback:function(e){t.$set(t.detail,"max_num",e)},expression:"detail.max_num"}})],1),a("a-form-item",t._b({attrs:{label:"是否需要添加身份证"}},"a-form-item",t.formItemLayout,!1),[a("a-radio-group",{attrs:{name:"is_need"},model:{value:t.detail.is_need,callback:function(e){t.$set(t.detail,"is_need",e)},expression:"detail.is_need"}},[a("a-radio",{attrs:{value:1}},[t._v(" 需要 ")]),a("a-radio",{attrs:{value:2}},[t._v(" 不需要 ")])],1)],1),a("a-form-item",t._b({attrs:{label:"活动状态"}},"a-form-item",t.formItemLayout,!1),[a("a-radio-group",{attrs:{name:"status"},model:{value:t.detail.status,callback:function(e){t.$set(t.detail,"status",e)},expression:"detail.status"}},[a("a-radio",{attrs:{value:1}},[t._v(" 开启 ")]),a("a-radio",{attrs:{value:0}},[t._v(" 关闭 ")])],1)],1),a("a-form-item",t._b({attrs:{label:"排序"}},"a-form-item",t.formItemLayout,!1),[a("a-input",{attrs:{placeholder:"请填写排序值"},model:{value:t.detail.sort,callback:function(e){t.$set(t.detail,"sort",e)},expression:"detail.sort"}})],1),a("a-form-item",t._b({},"a-form-item",t.tailFormItemLayout,!1),[a("a-button",{attrs:{type:"primary",htmlType:"submit",loading:t.submitBtn,disabled:t.submitBtn}},[t._v(" 保存 ")])],1)],1)],1)},o=[],n=a("5530"),r=a("1da1"),s=(a("96cf"),a("d3b7"),a("4e82"),a("159b"),a("ac1f"),a("5319"),a("d81d"),a("99af"),a("c1df")),l=a.n(s),m=a("7a6b"),c=a("6ec16"),u=a("3683"),d=(a("0f28"),a("567c"));function f(t){return new Promise((function(e,a){var i=new FileReader;i.readAsDataURL(t),i.onload=function(){return e(i.result)},i.onerror=function(t){return a(t)}}))}var v={name:"addVolunteerActivitiesInfo",components:{CustomTooltip:m["a"],RichText:c["a"],Editor:u["a"]},data:function(){return{uploadImgUrl:"/v20/public/index.php/"+d["a"].uploadImgApi,form:this.$form.createForm(this),detail:{active_name:"",add_time_txt:"",img_arr:[],start_time:"",end_time:"",max_num:"",status:1,is_need:2,sort:"",richText:"",activity_id:0,close_time:""},isClear:!1,dateFormat:"YYYY-MM-DD",confirmDirty:!1,autoCompleteResult:[],formItemLayout:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},tailFormItemLayout:{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},submitBtn:!1,previewVisible:!1,previewImage:"",fileList:[]}},mounted:function(){console.log("router",this.$route.query.aa),console.log("router",this.$route.query.activity_id);var t=this.$route.query.activity_id;"add"!==this.$route.query.aa?t&&t>0&&(this.detail.activity_id=t,this.getVolunteerDetail(t)):(this.detail={active_name:"",add_time_txt:"",img_arr:[],start_time:"",end_time:"",max_num:"",status:1,is_need:2,sort:"",richText:"",activity_id:0,close_time:""},this.fileList=[])},methods:{change:function(t){console.log(t)},handleCancel:function(){this.previewVisible=!1},handlePreview:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,f(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handleChange:function(t){var e=t.fileList;this.fileList=e,console.log("th",this.fileList)},getVolunteerDetail:function(t){var e=this;this.request(d["a"].getVolunteerDetail,{activity_id:t}).then((function(t){t&&t.info&&(e.detail=t.info,t.info.imgList?e.fileList=t.info.imgList:e.fileList=[],console.log("detail",e.detail))}))},moment:l.a,date_moment:function(t,e){return t?l()(t,e):""},startOnChange:function(t,e){console.log("date",t),console.log("dateString",e),this.detail.start_time=e},endOnChange:function(t,e){console.log("date",t),console.log("dateString",e),this.detail.end_time=e},onChange:function(t,e){console.log("date",t),console.log("dateString",e),this.detail.close_time=e},add_img_info:function(){console.log("添加图片",1)},addVolunteerActivity:function(t){var e=this;console.log("提交",1),this.submitBtn=!0,t.preventDefault(),this.form.validateFieldsAndScroll((function(t,a){if(!t){var i=Object(n["a"])({},a);if(console.log("Received values of form: ",i),e.detail.activity_id&&(i.activity_id=e.detail.activity_id),i.active_name=e.detail.active_name,!i.active_name)return e.$message.warning("请填写活动名称!"),!1;if(console.log("Received values of form: ",i),i.start_time=e.detail.start_time,!i.start_time)return e.$message.warning("请填写活动开始时间!"),!1;if(i.end_time=e.detail.end_time,!i.end_time)return e.$message.warning("请填写活动结束时间!"),!1;if(i.close_time=e.detail.close_time,!i.close_time)return e.$message.warning("请填写活动报名截止时间!"),!1;i.max_num=e.detail.max_num,i.status=e.detail.status,i.is_need=e.detail.is_need,i.sort=e.detail.sort,i.richText=e.detail.richText,console.log("indexParams ",i);var o=e.fileList,r=[];o.forEach((function(t){t.response?r.push(t.response):r.push(t.url_path)})),r.length>0&&(i.img_arr=r),console.log("img",r);var s=e;e.request(d["a"].addVolunteerActivity,i).then((function(t){console.log("res",t),t&&(e.$message.success("操作成功！"),setTimeout((function(){var t=s.getRouterPath("volunteerActivitiesList");console.log("addVolunteerActivity",t),s.$router.replace({path:t})}),1e3)),e.submitBtn=!1}))}}))},handleConfirmBlur:function(t){var e=t.target.value;this.confirmDirty=this.confirmDirty||!!e},handleWebsiteChange:function(t){var e;e=t?[".com",".org",".net"].map((function(e){return"".concat(t).concat(e)})):[],this.autoCompleteResult=e}}},_=v,h=(a("b168c"),a("0c7c")),p=Object(h["a"])(_,i,o,!1,null,null,null);e["default"]=p.exports}}]);