(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d222cbc"],{cfad:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[s("div",{staticClass:"mt-20"},[s("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.createUser()}}},[t._v(" 添加提醒人 ")])],1),s("a-table",{staticClass:"mt-20",attrs:{rowKey:"mer_id",columns:t.columns,"data-source":t.dataList,pagination:t.pagination},scopedSlots:t._u([{key:"goods_name",fn:function(e,a){return s("span",{staticClass:"flex align-center"},[s("a-avatar",{attrs:{shape:"square",size:"large",src:a.goods_image}}),s("span",{staticClass:"ml-10"},[t._v(t._s(e))])],1)}},{key:"activityTime",fn:function(e,a){return s("span",{},[t._v(" "+t._s(e)+" ~ "+t._s(a.end_time)+" ")])}},{key:"qrcode",fn:function(e){return s("span",{},[s("a-popover",{attrs:{trigger:"click"}},[s("img",{attrs:{slot:"content",src:e,alt:"二维码"},slot:"content"}),s("a-button",{attrs:{type:"link"}},[t._v("二维码")])],1)],1)}},{key:"status",fn:function(e){return s("span",{},[1==e?s("a-badge",{attrs:{status:"1",text:"正常"}}):t._e(),2==e?s("a-badge",{attrs:{status:"0",text:"禁止"}}):t._e()],1)}},{key:"action",fn:function(e){return s("span",{},[s("a",{staticClass:"mr-10 inline-block",staticStyle:{color:"red"},on:{click:function(s){return t.removeUser(e)}}},[t._v("删除")]),s("a",{staticClass:"inline-block",on:{click:function(s){return t.editUser(e)}}},[t._v("编辑")])])}}])}),s("a-modal",{attrs:{title:t.title,width:"45%"},on:{ok:t.handleOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[s("div",[s("a-form-model",{attrs:{model:t.formData,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[s("a-form-model-item",{attrs:{label:"姓名"}},[s("a-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),s("a-form-model-item",{attrs:{label:"手机号"}},[s("a-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}}),s("span",{staticStyle:{color:"#999"}},[t._v("需要先绑定公众号，再使用手机号注册用户端，授权微信")])],1),s("a-form-model-item",{attrs:{label:"业务"}},[s("div",{style:{borderBottom:"1px solid #E9E9E9"}},[s("a-checkbox",{attrs:{indeterminate:t.businessMinate,checked:t.formData.checkBusinessAll},on:{change:t.checkBusinessChange}},[t._v("全选")])],1),s("a-checkbox-group",{attrs:{options:t.formData.businessOptions},on:{change:t.checkBusinessGroupChange},model:{value:t.formData.businessCheckedList,callback:function(e){t.$set(t.formData,"businessCheckedList",e)},expression:"formData.businessCheckedList"}})],1),s("a-form-model-item",{attrs:{label:"上班时间"}},[s("div",{style:{borderBottom:"1px solid #E9E9E9"}},[s("a-checkbox",{attrs:{indeterminate:t.workMinate,checked:t.formData.checkWorkAll},on:{change:t.checkWorkChange}},[t._v("全选")])],1),s("a-checkbox-group",{attrs:{options:t.formData.workOptions},on:{change:t.checkWorkGroupChange},model:{value:t.formData.workCheckedList,callback:function(e){t.$set(t.formData,"workCheckedList",e)},expression:"formData.workCheckedList"}})],1),s("a-form-model-item",{attrs:{label:"状态"}},[s("a-radio-group",{attrs:{options:t.formData.statusOptions},model:{value:t.formData.statusCheckedList,callback:function(e){t.$set(t.formData,"statusCheckedList",e)},expression:"formData.statusCheckedList"}})],1)],1)],1)])],1)},i=[],o=s("5530"),n=(s("b0c0"),s("d3b7"),s("159b"),s("c1df")),r=s.n(n),c={getLists:"/warn/merchant.Warn/getList",addUser:"/warn/merchant.Warn/addUser",editUser:"/warn/merchant.Warn/editUser",delUser:"/warn/merchant.Warn/delUser",getUserDetail:"/warn/merchant.Warn/getUserDetail"},h=c,l={name:"GroupList",data:function(){return{columns:[{title:"姓名",dataIndex:"name",key:"name",scopedSlots:{customRender:"name"}},{title:"手机号",dataIndex:"phone",key:"phone",scopedSlots:{customRender:"phone"}},{title:"业务",dataIndex:"business",key:"business",scopedSlots:{customRender:"business"}},{title:"工作时间",dataIndex:"work_time",key:"work_time"},{title:"状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"pigcms_id",key:"pigcms_id",scopedSlots:{customRender:"action"}}],labelCol:{span:4},wrapperCol:{span:14},dataList:[],pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(t){return"共 ".concat(t," 条记录")}},queryParams:{page:1,pageSize:10,store_id:""},title:"新建运营",modalType:"add",visible:!1,formData:{id:"",name:"",phone:"",businessCheckedList:[],businessOptions:[{label:"新版商城",value:"mall"},{label:"外卖",value:"shop"},{label:"团购",value:"group"}],workCheckedList:[],workOptions:[{label:"周一",value:1},{label:"周二",value:2},{label:"周三",value:3},{label:"周四",value:4},{label:"周五",value:5},{label:"周六",value:6},{label:"周日",value:0}],statusCheckedList:[],statusOptions:[{label:"正常",value:1},{label:"禁止",value:0}],checkBusinessAll:!1,checkWorkAll:!1},businessMinate:!0,workMinate:!0}},watch:{"$route.query.store_id":function(t){"/merchant/merchant.mall/groupList"==this.$route.path&&t&&(this.queryParams.store_id=t,this.getDataList())}},created:function(){this.getDataList()},activated:function(){var t=sessionStorage.getItem("groupEdit")||"";t&&1==t&&(this.queryParams.store_id=this.$route.query.store_id,this.$set(this.pagination,"current",1),this.$set(this.pagination,"pageSize",10),this.$set(this.pagination,"total",0),this.getDataList(),sessionStorage.removeItem("groupEdit"))},methods:{moment:r.a,getDataList:function(){var t=this;this.queryParams.page=this.pagination.current,this.queryParams.pageSize=this.pagination.pageSize,this.request(h.getLists,this.queryParams).then((function(e){t.dataList=e.data,t.$set(t.pagination,"total",e.total)}))},onDateRangeChange:function(t,e){this.$set(this.searchForm,"time",[t[0],t[1]]),this.$set(this.searchForm,"start_time",e[0]),this.$set(this.searchForm,"end_time",e[1])},submitForm:function(){var t=Object(o["a"])({store_id:this.store_id},this.searchForm);delete t.time,this.getDataList(t)},onPageChange:function(t,e){this.$set(this.pagination,"current",t),this.submitForm()},onPageSizeChange:function(t,e){this.$set(this.pagination,"pageSize",e),this.submitForm()},createUser:function(){this.visible=!0,this.modalType="add",this.title="新建提醒人",this.formData.id="",this.formData.name="",this.formData.phone="",this.formData.businessCheckedList=[],this.formData.workCheckedList=[],this.formData.statusCheckedList=[]},editUser:function(t){var e=this;this.visible=!0,this.modalType="edit",this.title="编辑提醒人",this.request(h.getUserDetail,{id:t}).then((function(t){e.formData.id=t.pigcms_id,e.formData.name=t.name,e.formData.phone=t.phone,e.formData.businessCheckedList=t.business,e.formData.workCheckedList=t.work_times,e.formData.statusCheckedList=t.status}))},removeUser:function(t){var e=this;this.$confirm({title:"是否确定删除该消息提醒人?",centered:!0,onOk:function(){e.request(h.delUser,{id:t}).then((function(t){e.$message.success("操作成功！"),e.submitForm()}))},onCancel:function(){}})},handleOk:function(){var t=this;if("edit"==this.modalType)this.request(h.editUser,{id:this.formData.id,name:this.formData.name,phone:this.formData.phone,businessCheckedList:this.formData.businessCheckedList,workCheckedList:this.formData.workCheckedList,statusCheckedList:this.formData.statusCheckedList}).then((function(e){t.$message.success("操作成功！");var s=Object(o["a"])({store_id:t.store_id},t.searchForm);t.getDataList(s),t.visible=!1}));else{this.formData;this.request(h.addUser,{name:this.formData.name,phone:this.formData.phone,businessCheckedList:this.formData.businessCheckedList,workCheckedList:this.formData.workCheckedList,statusCheckedList:this.formData.statusCheckedList}).then((function(e){t.$message.success("操作成功！");var s=Object(o["a"])({store_id:t.store_id},t.searchForm);t.getDataList(s),t.visible=!1}))}},checkBusinessChange:function(t){console.log(t);var e=[];this.formData.businessOptions.forEach((function(t){e.push(t.value)})),this.formData.checkBusinessAll=t.target.checked,this.businessMinate=!1,this.formData.businessCheckedList=t.target.checked?e:[]},checkBusinessGroupChange:function(t){this.businessMinate=!!t.length&&t.length<this.formData.businessOptions.length,this.formData.checkBusinessAll=t.length===this.formData.businessOptions.length},checkWorkChange:function(t){console.log(t);var e=[];console.log(123,this.formData.workOptions),this.formData.workOptions.forEach((function(t){e.push(t.value)})),this.formData.checkWorkAll=t.target.checked,this.workMinate=!1,this.formData.workCheckedList=t.target.checked?e:[]},checkWorkGroupChange:function(t){this.workMinate=!!t.length&&t.length<this.formData.workOptions.length,this.formData.checkWorkAll=t.length===this.formData.workOptions.length}}},u=l,m=s("2877"),d=Object(m["a"])(u,a,i,!1,null,"121baed4",null);e["default"]=d.exports}}]);