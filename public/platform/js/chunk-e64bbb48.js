(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e64bbb48"],{"0c74":function(e,t,a){},"47c8":function(e,t,a){"use strict";var r={config:"/community/login.login/config",login:"/community/login.login/check",sendCode:"/community/login.PropertyGuide/sendCode",addInformation:"/community/login.PropertyGuide/addInformation",propertyGuide:"/community/login.PropertyGuide/propertyGuide",completePropertyGuide:"/community/login.PropertyGuide/completePropertyGuide",workerAdd:"/community/common.Framework/workerAdd",workerSub:"/community/common.Framework/workerSub",workerDel:"/community/common.Framework/workerDel",workerQuery:"/community/common.Framework/workerQuery",organizationDel:"/community/common.Framework/organizationDel",organizationAdd:"/community/common.Framework/organizationAdd",organizationSub:"/community/common.Framework/organizationSub",organizationSynQw:"/community/common.Framework/organizationSynQw"};t["a"]=r},"4f2c":function(e,t,a){"use strict";var r={propertyGetOrderPackage:"/community/property_api.PrivilagePackage/getOrderPackage",propertyGetPackageRoom:"/community/property_api.PrivilagePackage/getPackageRoom",propertyGetPackageRoomList:"/community/property_api.PrivilagePackage/getPackageRoomList",propertyCreateOrder:"/community/property_api.PrivilagePackage/createOrder",propertygetRoomOrderPrice:"/community/property_api.PrivilagePackage/getRoomOrderPrice",propertyCreateRoomOrderNew:"/community/property_api.PrivilagePackage/createRoomOrderNew",propertyGetPayType:"/community/property_api.PrivilagePackage/getPayType",propertyCreateQrCode:"/community/property_api.PrivilagePackage/createQrCode",propertyCreateRoomQrCode:"/community/property_api.PrivilagePackage/createRoomQrCode",propertyQueryOrderPayStatus:"/community/property_api.PrivilagePackage/queryOrderPayStatus",propertyGetRoomList:"/community/property_api.RoomPackage/getRoomList",propertyGetBuyRoom:"/community/property_api.RoomPackage/getBuyRoom",propertyCreateRoomOrder:"/community/property_api.RoomPackage/createRoomOrder",propertyRoomCreateQrCode:"/community/property_api.RoomPackage/createQrCode",propertyRoomQueryOrderPayStatus:"/community/property_api.RoomPackage/queryOrderPayStatus",propertyGetPrivilagePackage:"/community/property_api.BuyPackage/getPrivilagePackage",propertyGetRoomPackage:"/community/property_api.BuyPackage/getRoomPackage",chargeTimeInfo:"/community/property_api.ChargeTime/takeEffectTimeInfo",setChargeTime:"/community/property_api.ChargeTime/takeEffectTimeSet",chargeNumberList:"/community/property_api.ChargeTime/chargeNumberList",chargeNumberInfo:"/community/property_api.ChargeTime/chargeNumberInfo",addChargeNumber:"/community/property_api.ChargeTime/addChargeNumber",editChargeNumber:"/community/property_api.ChargeTime/editChargeNumber",getChargeType:"/community/property_api.ChargeTime/getChargeType",chargeWaterType:"/community/property_api.ChargeTime/chargeWaterType",offlinePayList:"/community/property_api.ChargeTime/offlinePayList",offlinePayInfo:"/community/property_api.ChargeTime/offlinePayInfo",addOfflinePay:"/community/property_api.ChargeTime/addOfflinePay",editOfflinePay:"/community/property_api.ChargeTime/editOfflinePay",delOfflinePay:"/community/property_api.ChargeTime/delOfflinePay",getCountFeeList:"/community/property_api.ChargeTime/countVillageFee",villageLogin:"/community/property_api.ChargeTime/village_login",frameworkTissueNav:"/community/common.Framework/getTissueNav",frameworkTissueUser:"/community/common.Framework/getTissueUser",frameworkGroupParam:"/community/common.Framework/getGroupParam",frameworkPropertyVillage:"/community/common.Framework/getPropertyVillage",frameworkOrganizationAdd:"/community/common.Framework/organizationAdd",frameworkOrganizationQuery:"/community/common.Framework/organizationQuery",frameworkOrganizationSub:"/community/common.Framework/organizationSub",frameworkOrganizationDel:"/community/common.Framework/organizationDel",frameworkWorkerAdd:"/community/common.Framework/workerAdd",frameworkWorkerSub:"/community/common.Framework/workerSub",powerRoleList:"/community/property_api.Power/getRoleList",powerRoleDel:"/community/property_api.Power/roleDel",propertyConfigSetApi:"/community/property_api.Property/config",passwordChangeApi:"/community/property_api.Property/passwordChange",digitApi:"/community/property_api.Property/digit",saveDigitApi:"/community/property_api.Property/saveDigit",ajaxProvince:"/community/property_api.Property/ajaxProvince",ajaxCity:"/community/property_api.Property/ajaxCity",ajaxArea:"/community/property_api.Property/ajaxArea",saveConfig:"/community/property_api.Property/saveConfig",loginLogList:"/community/property_api.Security/loginLog",loginLogDetail:"/community/property_api.Security/loginLogDetail",commonLog:"/community/property_api.Security/commonLog",commonLogDetail:"/community/property_api.Security/commonLogDetail"};t["a"]=r},"83e7":function(e,t,a){"use strict";a("0c74")},a20d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal_container"},[a("a-modal",{attrs:{title:e.title,width:1e3,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form-model",{ref:"ruleForm",staticClass:"div_box",attrs:{model:e.detail,labelCol:e.labelCol,wrapperCol:e.wrapperCol,rules:e.rules}},[a("a-form-model-item",{attrs:{label:"编号",prop:"job_number"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入工号"},model:{value:e.detail.job_number,callback:function(t){e.$set(e.detail,"job_number",t)},expression:"detail.job_number"}})],1),a("a-form-model-item",{attrs:{label:"姓名",prop:"work_name"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入姓名"},model:{value:e.detail.work_name,callback:function(t){e.$set(e.detail,"work_name",t)},expression:"detail.work_name"}})],1),a("a-form-model-item",{attrs:{label:"性别",prop:"gender"}},[a("a-radio-group",{model:{value:e.detail.gender,callback:function(t){e.$set(e.detail,"gender",t)},expression:"detail.gender"}},[a("a-radio",{attrs:{value:1}},[e._v("男")]),a("a-radio",{attrs:{value:2}},[e._v("女")])],1)],1),a("a-form-model-item",{attrs:{label:"手机号码",prop:"phone",extra:"此手机号需与注册的手机号一致,才能开门成功"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入手机号码"},on:{change:e.phoneBlur},model:{value:e.detail.phone,callback:function(t){e.$set(e.detail,"phone",t)},expression:"detail.phone"}})],1),a("a-form-model-item",{attrs:{label:"部门名称",extra:"选择部门名称"}},[a("a-input",{staticStyle:{width:"210px","margin-right":"10px"},attrs:{disabled:!0,placeholder:"选择部门名称请选择!"},model:{value:e.detail.depart_name,callback:function(t){e.$set(e.detail,"depart_name",t)},expression:"detail.depart_name"}}),e.is_edit||e.is_add?e._e():a("a-button",{attrs:{type:"primary"},on:{click:e.selectDepartment}},[e._v("选择部门")])],1),a("a-form-model-item",{attrs:{label:"IC卡",prop:"ic_card",extra:"填写后该用户可通过IC卡进入门禁"}},[a("a-input",{staticStyle:{width:"220px","margin-right":"10px"},attrs:{disabled:e.is_edit,placeholder:"请输入IC卡"},model:{value:e.detail.ic_card,callback:function(t){e.$set(e.detail,"ic_card",t)},expression:"detail.ic_card"}}),2==e.role_type&&1==e.is_write_iccard?a("a",{on:{click:e.rfid_get_card_func}},[e._v("读取卡号")]):e._e()],1),a("a-form-model-item",{attrs:{label:"身份证号",extra:"填写后该用户可通过身份证进入门禁"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入身份证号"},model:{value:e.detail.id_card,callback:function(t){e.$set(e.detail,"id_card",t)},expression:"detail.id_card"}})],1),2==e.role_type?a("a-form-model-item",{attrs:{label:"小区管理人员身份",prop:"is_worker_admin",extra:"选择“否”时，有小区工作人员身份可登录；选择“是”时，有小区工作人员和小区管理人员身份可登录"}},[a("a-radio-group",{staticStyle:{"margin-left":"10px"},model:{value:e.detail.is_worker_admin,callback:function(t){e.$set(e.detail,"is_worker_admin",t)},expression:"detail.is_worker_admin"}},[a("a-radio",{attrs:{value:1}},[e._v("是")]),a("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1):e._e(),a("a-form-model-item",{attrs:{label:"是否可以开门",prop:"open_door"}},[a("a-radio-group",{model:{value:e.detail.open_door,callback:function(t){e.$set(e.detail,"open_door",t)},expression:"detail.open_door"}},[a("a-radio",{attrs:{value:1}},[e._v("是")]),a("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1),a("a-form-model-item",{attrs:{label:"入职时间",prop:"job_create_time"}},[e.detail.job_create_time?a("a-date-picker",{attrs:{disabled:e.is_edit,placeholder:"请选择入职时间",value:e.moment(e.detail.job_create_time,e.dateFormat),format:e.dateFormat},on:{change:e.onChange}}):a("a-date-picker",{attrs:{disabled:e.is_edit,placeholder:"请选择入职时间"},on:{change:e.onChange}})],1),a("a-form-model-item",{attrs:{label:"账号",prop:"account"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入登录账号"},on:{change:e.accountFoucs},model:{value:e.detail.account,callback:function(t){e.$set(e.detail,"account",t)},expression:"detail.account"}})],1),"人员添加"==e.title?a("a-form-model-item",{attrs:{label:"密码",prop:"password",extra:"如果不填写密码或为空，则默认密码 123abc"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入登录密码"},model:{value:e.detail.password,callback:function(t){e.$set(e.detail,"password",t)},expression:"detail.password"}})],1):a("a-form-model-item",{attrs:{label:"密码",prop:"password",extra:"如果不填写密码或为空，则密码不做修改"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入登录密码"},model:{value:e.detail.password,callback:function(t){e.$set(e.detail,"password",t)},expression:"detail.password"}})],1),a("a-form-model-item",{attrs:{label:"备注",prop:"remarks"}},[a("a-input",{attrs:{disabled:e.is_edit,placeholder:"请输入内容"},model:{value:e.detail.remarks,callback:function(t){e.$set(e.detail,"remarks",t)},expression:"detail.remarks"}})],1),"人员添加"!=e.title?a("a-form-model-item",{attrs:{label:"是否同步企微"}},[a("a-input",{attrs:{disabled:!0},model:{value:e.detail.qy_txt,callback:function(t){e.$set(e.detail,"qy_txt",t)},expression:"detail.qy_txt"}})],1):e._e(),"人员添加"!=e.title?a("a-form-model-item",{attrs:{label:"企微同步时间"}},[a("a-input",{attrs:{disabled:!0},model:{value:e.detail.qy_time,callback:function(t){e.$set(e.detail,"qy_time",t)},expression:"detail.qy_time"}})],1):e._e(),1*e.uploadFace.status==1?a("a-form-model-item",{attrs:{label:"上传人脸"}},[a("a-button",{attrs:{type:"primary"},on:{click:e.uploadPeopleface}},[e._v("上传人脸")])],1):e._e()],1)],1)],1),a("a-modal",{attrs:{title:e.title,width:800,visible:e.lookVisiable,maskClosable:!1,footer:null},on:{cancel:e.handleLookCancel}},[a("div",{staticClass:"look_content"},e._l(e.propsList,(function(t,r){return a("div",{key:r,staticClass:"look_item"},[a("div",{staticClass:"item_title"},[e._v(e._s(t.name)+":")]),1==t.type&&t.value?a("div",e._l(t.value,(function(t){return a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"#FCBE79"}},[e._v(" "+e._s(t))])})),1):a("div",{staticClass:"item_value"},[e._v(e._s(t.value?t.value:"暂无"))])])})),0)]),a("a-modal",{attrs:{title:"请选择组织架构的部门",width:600,visible:e.visible_tree,maskClosable:!1},on:{ok:e.handleTSubmit,cancel:e.handleTCancel}},[e.visible_tree?a("a-tree",{attrs:{defaultExpandedKeys:[e.firstKey],"tree-data":e.treeData,"default-selected-keys":e.selectedkeys,"auto-expand-parent":!0,"default-expand-parent":!0},on:{select:e.onTreeSelect}}):e._e()],1),a("a-drawer",{attrs:{title:"人脸上传",width:800,visible:e.showUploadface},on:{close:e.handleUploadCancel}},[e.showUploadface?a("iframe",{attrs:{src:e.uploadFace.url,width:"100%",height:"800px"}}):e._e()]),a("remote-js",{attrs:{src:"http://127.0.0.1:8008/YOWOCloudRFIDReader.js"},on:{"load-js-finish":e.jsLoadCallBack}})],1)},i=[],o=(a("ac1f"),a("1276"),a("47c8")),n=a("4f2c"),l=(a("0f28"),a("c1df")),d=a.n(l),s=a("ca00"),m={data:function(){return{title:"新建",labelCol:{span:6},wrapperCol:{span:16},lookVisiable:!1,visible:!1,is_edit:!1,confirmLoading:!1,loading:!1,detail:{group_id:null,job_number:"",work_name:"",gender:1,phone:"",id_card:"",ic_card:"",job_create_time:null,open_door:1,account:"",password:"",remarks:"",is_worker_admin:0,wid:0,depart_name:"",department_id:0},department_id:0,depart_name:"",visible_tree:!1,dateFormat:"YYYY-MM-DD",is_footer:!0,is_add:!0,propsList:[],rules:{work_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],account:[{required:!0,message:"请输入账号",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:this.phoneConfirm}]},tokenName:"",uploadFace:{},showUploadface:!1,isBianhua:!0,role_type:0,readCardPopVisiable:!1,rfidreader:null,is_write_iccard:0,write_iccard_exe_url:"",selectedkeys:[],firstKey:""}},components:{"remote-js":{render:function(e){var t=this;return e("script",{attrs:{type:"text/javascript",src:this.src},on:{load:function(){t.$emit("load-js-finish")}}})},props:{src:{type:String,required:!0}}}},mounted:function(){var e=Object(s["i"])(location.hash);e?(this.tokenName=e+"_access_token",this.sysName=e):this.sysName="village"},methods:{moment:d.a,phoneConfirm:function(e,t,a){var r=/^1[3456789]\d{9}$/;r.test(t)?a():a("请输入正确的手机号码")},selectDepartment:function(){this.getOrganizationTree()},getOrganizationTree:function(){var e=this;this.request(n["a"].frameworkTissueNav,{tokenName:this.tokenName,request_xfrom:"organization_edit"}).then((function(t){e.treeData=t.menu_list,console.log("resTree",e.treeData),t.menu_list[0].key&&(e.firstKey=t.menu_list[0].key,t.menu_list[0].disabled=!0,console.log("firstKey",e.firstKey)),e.visible_tree=!0}))},onTreeSelect:function(e,t){var a=e[0].split("-");this.department_id=a[a.length-1],this.department_id=1*this.department_id,this.depart_name=a[a.length-2]},handleTSubmit:function(){if(this.department_id<1)return this.$message.error("请选择一个组织架构部门！"),!1;this.detail.department_id=this.department_id,this.detail.depart_name=this.depart_name,this.handleTCancel()},handleTCancel:function(){this.department_id=0,this.depart_name="",this.visible_tree=!1},onChange:function(e,t){this.detail.job_create_time=t},addMember:function(e,t,a,r,i){this.write_iccard_exe_url=i,1==r&&this.rfid_get_card_check(),this.role_type=a,this.detail.group_id=e,this.is_edit=!1,this.is_write_iccard=r,this.is_add=!0,this.visible_tree=!1,this.detail.department_id=e,this.detail.depart_name=t,this.title="人员添加",this.visible=!0},phoneBlur:function(){"人员添加"==this.title&&this.isBianhua&&(this.detail.account=this.detail.phone)},handleSubmit:function(){var e=this;this.confirmLoading=!0,this.$refs.ruleForm.validate((function(t){if(!t)return e.confirmLoading=!1,!1;e.detail.tokenName=e.tokenName,""==e.detail.password&&(e.detail.password="123abc");var a=o["a"].workerAdd;1*e.detail.wid>0&&(a=o["a"].workerSub),e.request(a,e.detail).then((function(t){e.detail.wid,t.error?e.$message.success(t.msg):e.$message.error(t.msg),e.confirmLoading=!1,t.error&&(e.visible=!1,e.$emit("ok",e.detail),e.clearForm(),e.$refs.ruleForm.resetFields())})).catch((function(t){e.confirmLoading=!1}))}))},clearForm:function(){this.detail={group_id:null,job_number:"",work_name:"",gender:1,phone:"",id_card:"",ic_card:"",job_create_time:null,open_door:1,account:"",password:"",remarks:"",is_worker_admin:0,wid:0,depart_name:"",department_id:0},this.visible_tree=!1,this.uploadFace={},this.isBianhua=!0},accountFoucs:function(){""==this.detail.account?this.isBianhua=!0:this.isBianhua=!1},handleCancel:function(){this.visible=!1,this.clearForm(),this.$refs.ruleForm.resetFields()},editMember:function(e,t,a,r,i,n,l){var d=this;this.write_iccard_exe_url=l,1==n&&this.rfid_get_card_check(),this.role_type=i,this.is_write_iccard=n,this.role_type=i,this.visible_tree=!1,this.is_add=!1,this.request(o["a"].workerQuery,{wid:e,group_id:t,source_type:a,tokenName:this.tokenName}).then((function(e){1==a?(d.propsList=e,d.detail.group_id=t,d.is_edit=!0,d.title="【"+d.propsList[1].value+"】查看",d.lookVisiable=!0):(d.detail=e,""!=d.detail.account&&null!=d.detail.account&&0!=d.detail.account.length||(d.detail.account=d.detail.phone),d.uploadFace=e.upload_face,d.detail.group_id=t,d.is_edit=!1,d.title="【"+d.detail.work_name+"】编辑",d.visible=!0)}))},uploadPeopleface:function(){this.showUploadface=!0},handleLookCancel:function(){this.lookVisiable=!1,this.propsList=[]},handleUploadCancel:function(){this.showUploadface=!1},rfid_get_card_func:function(){if(null===this.rfidreader)return!1;var e="1",t="0";this.rfidreader.Repeat=1,this.rfidreader.HaltAfterSuccess=1,this.rfidreader.RequestTypeACardNo(e,t)},jsLoadCallBack:function(){console.log("引入完成。。。。。")},rfid_get_card_check:function(){var e=!0;try{console.log("YOWORFIDReader",YOWORFIDReader);var t=YOWORFIDReader.createNew();this.rfidreader=t}catch(r){alert("您在控制台基本配置中开启了IC卡云读写需要安装软件。软件连接失败，请先下载安装！由于软件需要开机自动启动，安装前请关闭360等安全软件。"),this.write_iccard_exe_url&&(window.top.location=this.write_iccard_exe_url),e=!1}if(t.TryConnect()||(e=!1,alert("浏览器不支持，请更换浏览器后重试！")),e){var a=this;this.rfidreader.onResult((function(e){switch(console.log("onResult",e),e.FunctionID){case 14:console.log(e.strData);break;case 0:e&&e.Result>0&&(e&&e.strData?a.detail.ic_card=e.strData:a.$message.warn("读取失败！"));break}}))}}}},c=m,p=(a("83e7"),a("2877")),u=Object(p["a"])(c,r,i,!1,null,null,null);t["default"]=u.exports}}]);