(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d230059"],{eb06:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{visible:t.visible,title:t.title,width:"60%",destroyOnClose:!0,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel,ok:t.handleOk}},[a("a-form-model",{attrs:{model:t.formData,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"资讯标题",required:""}},[a("a-input",{model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),a("a-form-model-item",{attrs:{label:"图片",required:"",help:"建议尺寸104*78"}},[a("a-upload",{attrs:{name:"reply_pic","list-type":"picture","show-upload-list":!1,data:{upload_dir:""},action:"/v20/public/index.php/common/common.UploadFile/uploadPictures"},on:{change:t.handleUploadChange}},[t.image?a("img",{staticStyle:{width:"120px",height:"120px"},attrs:{src:t.image,alt:"image"}}):a("div",[!0===t.loading?a("a-icon",{attrs:{type:"loading"}}):t._e(),a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 上传 ")],1)],1)])],1),a("a-form-model-item",{attrs:{label:"显示时长",required:""}},[a("a-radio-group",{model:{value:t.formData.show_type,callback:function(e){t.$set(t.formData,"show_type",e)},expression:"formData.show_type"}},[a("a-radio",{attrs:{value:"1"}},[t._v(" 永久显示 ")]),a("a-radio",{attrs:{value:"2"}},[t._v(" 时间段 ")])],1)],1),2==t.formData.show_type?a("a-form-model-item",{attrs:{label:"显示开始时间",required:""}},[null===t.formData.start_time?a("a-date-picker",{staticStyle:{width:"100%"},attrs:{"default-value":null,"show-time":"",type:"date",placeholder:"显示开始时间"},on:{change:t.startTimeChange}}):a("a-date-picker",{staticStyle:{width:"100%"},attrs:{"default-value":t.moment(t.formData.start_time),"show-time":"",type:"date",placeholder:"显示开始时间"},on:{change:t.startTimeChange}})],1):t._e(),2==t.formData.show_type?a("a-form-model-item",{attrs:{label:"显示结束时间",required:""}},[null===t.formData.start_time?a("a-date-picker",{staticStyle:{width:"100%"},attrs:{"default-value":null,"show-time":"",type:"date",placeholder:"显示结束时间"},on:{change:t.endTimeChange}}):a("a-date-picker",{staticStyle:{width:"100%"},attrs:{"default-value":t.moment(t.formData.end_time),"show-time":"",type:"date",placeholder:"显示结束时间"},on:{change:t.endTimeChange}})],1):t._e(),a("a-form-model-item",{attrs:{label:"资讯内容"}},[a("rich-text",{attrs:{info:t.formData.content},on:{"update:info":function(e){return t.$set(t.formData,"content",e)}}})],1)],1)],1)],1)},o=[],r=a("b706"),n=a("884f"),l=a("c1df"),s=a.n(l);function m(t,e){var a=new FileReader;a.addEventListener("load",(function(){return e(a.result)})),a.readAsDataURL(t)}var d={components:{RichText:n["a"]},props:{visible:Boolean,title:String,formData:Object},data:function(){return{labelCol:{span:6},wrapperCol:{span:12},loading:!1,image:"",confirmLoading:!1}},watch:{formData:function(t){this.image=this.formData.image}},mounted:function(){this.image=this.formData.image},methods:{moment:s.a,handleOk:function(){var t=this;if(console.log(this.formData,"dddddd"),""===this.formData.title)return this.$message.error("资讯标题必填！"),!1;if(""===this.formData.image)return this.$message.error("资讯图片必传！"),!1;if("2"===this.formData.show_type){if(void 0===this.formData.start_time||null===this.formData.start_time)return this.$message.error("显示开始时间必填！"),!1;if(void 0===this.formData.end_time||null===this.formData.end_time)return this.$message.error("显示结束时间必填！"),!1}this.confirmLoading=!0,this.request(r["a"].editOrAddInformation,this.formData).then((function(e){t.$message.success("操作成功!",1),setTimeout((function(){t.image="",t.formData={},t.$emit("handleCancel"),t.$emit("getDataList",!1),t.confirmLoading=!1}),1e3)}))},handleCancel:function(){this.$emit("handleCancel")},handleUploadChange:function(t){var e=this;if("uploading"!==t.file.status){if("done"===t.file.status&&1e3===t.file.response.status){var a=t.file.response.data;this.$set(this.formData,"image",a),m(t.file.originFileObj,(function(t){e.image=t,e.loading=!1}))}}else this.loading=!0},startTimeChange:function(t,e){this.$set(this.formData,"start_time",e)},endTimeChange:function(t,e){this.$set(this.formData,"end_time",e)}}},f=d,c=a("0c7c"),h=Object(c["a"])(f,i,o,!1,null,null,null);e["default"]=h.exports}}]);