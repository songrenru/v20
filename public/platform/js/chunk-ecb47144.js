(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ecb47144","chunk-b3cef5c8","chunk-b3cef5c8","chunk-748b470d"],{"4bb5d":function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var a=i("ea87");function r(t){if(Array.isArray(t))return Object(a["a"])(t)}i("6073"),i("2c5c"),i("c5cb"),i("36fa"),i("02bf"),i("a617"),i("17c8");function n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var s=i("9877");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return r(t)||n(t)||Object(s["a"])(t)||o()}},"9c5a":function(t,e,i){"use strict";i("a939")},a939:function(t,e,i){},d34b:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i("c5cb");function a(t,e,i,a,r,n,s){try{var o=t[n](s),l=o.value}catch(c){return void i(c)}o.done?e(l):Promise.resolve(l).then(a,r)}function r(t){return function(){var e=this,i=arguments;return new Promise((function(r,n){var s=t.apply(e,i);function o(t){a(s,r,n,o,l,"next",t)}function l(t){a(s,r,n,o,l,"throw",t)}o(void 0)}))}}},dff4:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i("6073"),i("2c5c"),i("c5cb"),i("36fa"),i("02bf"),i("a617"),i("70b9"),i("25b2"),i("0245"),i("2e24"),i("1485"),i("08c7"),i("54f8"),i("7177"),i("9ae4");var a=i("2396");function r(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
r=function(){return t};var t={},e=Object.prototype,i=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function c(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(O){c=function(t,e,i){return t[e]=i}}function d(t,e,i,a){var r=e&&e.prototype instanceof p?e:p,n=Object.create(r.prototype),s=new C(a||[]);return n._invoke=function(t,e,i){var a="suspendedStart";return function(r,n){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw n;return V()}for(i.method=r,i.arg=n;;){var s=i.delegate;if(s){var o=x(s,i);if(o){if(o===h)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var l=u(t,e,i);if("normal"===l.type){if(a=i.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(a="completed",i.method="throw",i.arg=l.arg)}}}(t,i,s),n}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(O){return{type:"throw",arg:O}}}t.wrap=d;var h={};function p(){}function f(){}function m(){}var g={};c(g,s,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(k([])));y&&y!==e&&i.call(y,s)&&(g=y);var _=m.prototype=p.prototype=Object.create(g);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function r(n,s,o,l){var c=u(t[n],t,s);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==Object(a["a"])(h)&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,l)}),(function(t){r("throw",t,o,l)})):e.resolve(h).then((function(t){d.value=t,o(d)}),(function(t){return r("throw",t,o,l)}))}l(c.arg)}var n;this._invoke=function(t,i){function a(){return new e((function(e,a){r(t,i,e,a)}))}return n=n?n.then(a,a):a()}}function x(t,e){var i=t.iterator[e.method];if(void 0===i){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var a=u(i,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,h;var r=a.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function k(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,r=function e(){for(;++a<t.length;)if(i.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:V}}function V(){return{value:void 0,done:!0}}return f.prototype=m,c(_,"constructor",m),c(m,"constructor",f),f.displayName=c(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,l,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,i,a,r,n){void 0===n&&(n=Promise);var s=new w(d(e,i,a,r),n);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(_),c(_,l,"Generator"),c(_,s,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var a=e.pop();if(a in t)return i.value=a,i.done=!1,i}return i.done=!0,i}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(i,a){return s.type="throw",s.arg=t,e.next=i,a&&(e.method="next",e.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r],s=n.completion;if("root"===n.tryLoc)return a("end");if(n.tryLoc<=this.prev){var o=i.call(n,"catchLoc"),l=i.call(n,"finallyLoc");if(o&&l){if(this.prev<n.catchLoc)return a(n.catchLoc,!0);if(this.prev<n.finallyLoc)return a(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return a(n.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return a(n.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var s=n?n.completion:{};return s.type=t,s.arg=e,n?(this.method="next",this.next=n.finallyLoc,h):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),S(i),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var r=a.arg;S(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:k(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),h}},t}},e2b1:function(t,e,i){"use strict";i.r(e);i("6073"),i("2c5c");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[e("a-form",{attrs:{form:t.form,"label-col":{span:5},"wrapper-col":{span:12}},on:{submit:t.handleSubmit}},[e("a-form-item",{attrs:{label:"标题"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{initialValue:t.detail.title,rules:[{required:!0,message:"请输入标题!"}]}],expression:"[\n                    'title',\n                    { initialValue: detail.title, rules: [{ required: true, message: '请输入标题!' }] },\n                ]"}],attrs:{"field-names":"title",disabled:t.disabled,placeholder:"请输入标题"}})],1),e("a-row",{staticStyle:{"margin-bottom":"20px"}},[e("a-col",{staticStyle:{color:"#000000","text-align":"right","padding-right":"8px"},attrs:{span:5}},[e("span",[e("span",{staticStyle:{color:"#f5222d","margin-right":"4px","font-size":"14px","font-family":"SimSun, sans-serif","line-height":"35px"}},[t._v("*")]),t._v("封面图:")])]),e("a-col",{attrs:{span:15}},[e("a-upload",{attrs:{action:"/v20/public/index.php/common/common.UploadFile/uploadPictures",name:"reply_pic",data:t.updateDataCover,"list-type":"picture-card","file-list":t.fileListCover,disabled:t.disabled},on:{preview:t.handlePreviewCover,change:function(e){return t.upLoadChangeCover(e)}}},[0==t.fileListCover.length?e("div",[e("a-icon",{attrs:{type:"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v("上传图片")])],1):t._e()]),e("div",{staticClass:"ant-form-explain"},[t._v("推荐尺寸: 1 : 1")]),e("a-modal",{attrs:{visible:t.previewVisibleCover,footer:null},on:{cancel:t.handleCancelCover}},[t.previewImageCover?e("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImageCover}}):t._e()])],1)],1),e("a-row",{staticStyle:{"margin-bottom":"20px"}},[e("a-col",{staticStyle:{color:"#000000","text-align":"right","padding-right":"8px"},attrs:{span:5}},[e("span",[e("span",{staticStyle:{color:"#f5222d","margin-right":"4px","font-size":"14px","font-family":"SimSun, sans-serif","line-height":"35px"}},[t._v("*")]),t._v("图片:")])]),e("a-col",{attrs:{span:15}},[e("a-upload",{attrs:{action:"/v20/public/index.php/common/common.UploadFile/uploadPictures",name:"reply_pic",disabled:t.disabled,data:t.updateData,"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview,change:function(e){return t.upLoadChange(e)}}},[t.fileList.length<5?e("div",[e("a-icon",{attrs:{type:"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v("上传图片")])],1):t._e()]),e("div",{staticClass:"ant-form-explain"},[t._v("推荐尺寸: 750px * 490px")]),e("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[t.previewImage?e("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}}):t._e()])],1)],1),e("a-row",{staticStyle:{"margin-bottom":"20px"}},[e("a-col",{staticStyle:{color:"#000000","text-align":"right","padding-right":"8px"},attrs:{span:5}},[e("span",[e("span",{staticStyle:{color:"#f5222d","margin-right":"4px","font-size":"14px","font-family":"SimSun, sans-serif","line-height":"30px"}},[t._v("*")]),t._v("分类:")])]),e("a-col",{attrs:{span:12}},[e("a-select",{staticStyle:{width:"200px"},attrs:{disabled:t.disabled,value:t.detail.cat_id},on:{change:t.categorySelectChange}},t._l(t.categoryList,(function(i){return e("a-select-option",{key:i.cat_id},[t._v(" "+t._s(i.cat_name)+" ")])})),1)],1)],1),e("a-row",{staticStyle:{"margin-bottom":"20px"}},[e("a-col",{staticStyle:{color:"#000000","text-align":"right","padding-right":"8px"},attrs:{span:5}},[e("span",[e("span",{staticStyle:{color:"#f5222d","margin-right":"4px","font-size":"14px","font-family":"SimSun, sans-serif","line-height":"30px"}},[t._v("*")]),t._v("地址:")])]),e("a-col",{attrs:{span:12}},[e("a-select",{staticStyle:{width:"32%"},attrs:{"field-names":"province_id",value:t.detail.province_id,disabled:t.disabled},on:{change:t.changeProvince}},t._l(t.provinceData,(function(i){return e("a-select-option",{key:i.area_id,attrs:{"allow-clear":!0}},[t._v(" "+t._s(i.area_name)+" ")])})),1),e("a-select",{staticStyle:{width:"32%","margin-left":"2%"},attrs:{"field-names":"city_id",value:t.detail.city_id,disabled:t.disabled},on:{change:t.changeCity}},t._l(t.cityData,(function(i){return e("a-select-option",{key:i.area_id,attrs:{"allow-clear":!0}},[t._v(" "+t._s(i.area_name)+" ")])})),1),e("a-select",{staticStyle:{width:"32%","margin-left":"2%"},attrs:{value:t.detail.area_id,disabled:t.disabled},on:{change:t.changeArea}},t._l(t.areaData,(function(i){return e("a-select-option",{key:i.area_id,attrs:{"allowc-lear":!0}},[t._v(" "+t._s(i.area_name)+" ")])})),1)],1)],1),e("a-form-item",{attrs:{label:"详细地址"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{initialValue:t.detail.address,rules:[{required:!0,message:"请输入详细地址!"}]}],expression:"[\n                    'address',\n                    { initialValue: detail.address, rules: [{ required: true, message: '请输入详细地址!' }] },\n                ]"}],attrs:{"field-names":"address",placeholder:"请输入详细地址",disabled:t.disabled}})],1),e("a-row",{staticStyle:{"margin-bottom":"20px"}},[e("a-col",{staticStyle:{color:"#000000","text-align":"right","padding-right":"8px"},attrs:{span:5}},[e("span",[e("span",{staticStyle:{color:"#f5222d","margin-right":"4px","font-size":"14px","font-family":"SimSun, sans-serif","line-height":"30px"}},[t._v("*")]),t._v("经纬度:")])]),e("a-col",{attrs:{span:15}},[e("a-input",{staticStyle:{width:"200px"},attrs:{disabled:t.disabled,value:t.detail.longlat,placeholder:"请选择位置"}}),t.disabled?t._e():e("a",{staticStyle:{"margin-left":"5px"},on:{click:function(e){return t.$refs.mapPointModel.selectPoint(t.detail.longlat)}}},[t._v("地图选点")])],1)],1),e("a-form-item",{attrs:{label:"联系电话"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone",{initialValue:t.detail.phone,rules:[{required:!0,message:"请输入联系电话!"}]}],expression:"[\n                    'phone',\n                    { initialValue: detail.phone, rules: [{ required: true, message: '请输入联系电话!' }] },\n                ]"}],staticStyle:{width:"200px"},attrs:{"field-names":"phone",disabled:t.disabled,placeholder:"请输入联系电话"}})],1),e("a-form-item",{attrs:{label:"大约金额",help:"填写0时,用户端显示免费"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["money",{initialValue:t.detail.money,rules:[{required:!0,message:"请输入大约金额!"}]}],expression:"[\n                    'money',\n                    { initialValue: detail.money, rules: [{ required: true, message: '请输入大约金额!' }] },\n                ]"}],staticStyle:{width:"200px"},attrs:{"field-names":"money",disabled:t.disabled,placeholder:"请输入大约金额"}})],1),e("a-row",{staticStyle:{"margin-bottom":"20px"}},[e("a-col",{staticStyle:{color:"#000000","text-align":"right","padding-right":"8px"},attrs:{span:5}},[e("span",[e("span",{staticStyle:{color:"#f5222d","margin-right":"4px","font-size":"14px","font-family":"SimSun, sans-serif","line-height":"25px"}}),t._v(" 标签:")])]),e("a-col",{attrs:{span:15}},[t._l(t.label.tags,(function(i){return[e("a-tooltip",{key:i,attrs:{title:i}},[e("a-tag",{key:i,attrs:{closable:!t.disabled},on:{close:function(){return t.handleClose(i)}}},[t._v(" "+t._s(i)+" ")])],1)]})),t.label.inputVisible?e("a-input",{ref:"input",style:{width:"78px"},attrs:{disabled:t.disabled,type:"text",size:"small",value:t.label.inputValue},on:{change:t.handleInputChange,blur:t.handleInputConfirm,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm.apply(null,arguments)}}}):t._e(),t.disabled?t._e():e("a-tag",{staticStyle:{background:"#fff",borderstyle:"dashed"},on:{click:t.showAddTagInput}},[e("a-icon",{attrs:{type:"plus"}}),t._v("添加标签 ")],1)],2)],1),e("a-form-item",{attrs:{label:"营业时间"}},[e("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["time_txt",{initialValue:t.detail.time_txt,rules:[{required:!0,message:"请输入营业时间"}]}],expression:"[\n                    'time_txt',\n                    { initialValue: detail.time_txt, rules: [{ required: true, message: '请输入营业时间' }] },\n                ]"}],attrs:{disabled:t.disabled,"field-names":"time_txt",placeholder:"请输入营业时间","auto-size":{minRows:3,maxRows:6}}})],1),e("a-form-item",{attrs:{label:"是否暂停",help:"开启暂停的时候，不可以买票"}},[e("a-switch",{attrs:{disabled:t.disabled,"checked-children":"是","un-checked-children":"否",checked:1==t.detail.is_close},on:{change:t.isClose}})],1),1==t.detail.is_close?e("a-form-item",{attrs:{label:"自定义文案"}},[e("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_close_body",{initialValue:t.detail.is_close_body,rules:[{required:!0,message:"请输入文案"}]}],expression:"[\n                    'is_close_body',\n                    { initialValue: detail.is_close_body, rules: [{ required: true, message: '请输入文案' }] },\n                ]"}],attrs:{disabled:t.disabled,"field-names":"is_close_body",placeholder:"请输入文案","auto-size":{minRows:3,maxRows:6}}})],1):t._e(),e("a-form-item",{attrs:{label:"是否启用",help:"关闭后客户端不显示"}},[e("a-switch",{attrs:{disabled:t.disabled,"checked-children":"是","un-checked-children":"否",checked:1==t.detail.status},on:{change:t.isStatus}})],1),e("a-row",{staticStyle:{"margin-bottom":"20px"}},[e("a-col",{staticStyle:{color:"#000000","text-align":"right","padding-right":"8px"},attrs:{span:5}},[e("span",[e("span",{staticStyle:{color:"#f5222d","margin-right":"4px","font-size":"14px","font-family":"SimSun, sans-serif"}},[t._v("*")]),t._v("详细描述:")])]),e("a-col",{staticStyle:{position:"relative"},attrs:{span:15}},[e("rich-text",{attrs:{info:t.detail.description,disabled:t.disabled},on:{"update:info":function(e){return t.$set(t.detail,"description",e)}}})],1)],1),t.disabled?t._e():e("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[e("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v(" 提交 ")])],1),t.disabled?e("a-form-item",{attrs:{label:"审核："}},[e("a-radio-group",{model:{value:t.auditValue,callback:function(e){t.auditValue=e},expression:"auditValue"}},[e("a-radio",{attrs:{value:"1"}},[t._v(" 成功 ")]),e("a-radio",{attrs:{value:"2"}},[t._v(" 失败 ")])],1)],1):t._e(),t.disabled?e("a-form-item",{attrs:{label:"备注："}},[e("a-textarea",{attrs:{placeholder:"请输入备注","allow-clear":""},model:{value:t.audit_msg,callback:function(e){t.audit_msg=e},expression:"audit_msg"}})],1):t._e(),t.disabled?e("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[e("a-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(" 提交审核 ")])],1):t._e()],1),e("map-point",{ref:"mapPointModel",on:{loadRefresh:t.setLongLat}})],1)},r=[],n=i("dff4"),s=i("d34b"),o=i("4bb5d"),l=(i("54f8"),i("3849"),i("cd5d"),i("c5cb"),i("6e84"),i("075f"),i("9ae4"),i("4d95")),c=i("70e4"),d=i("2f42"),u=i.n(d),h=i("884f"),p={components:{mapPoint:c["default"],RichText:h["a"]},data:function(){return{disabled:!1,auditValue:0,audit_msg:"",title:"添加景区",sort_id:0,queryParam:{sort_id:0,name:"",describe:"",sort:0},categoryList:[],detail:{tools_id:0,type:"scenic",cat_id:"",title:"",introduce:"",time_txt:"",images:"",cover_image:"",phone:"",address:"",longlat:"",province_id:"",city_id:"",area_id:"",money:"",description:"",is_appoint:0,status:0,start_time:"09:00:00",end_time:"18:00:00",label:[],tickets_description:"",coach:"",is_close:0,is_close_body:""},type_select:[{key:"stadium",value:"场馆"},{key:"course",value:"课程"},{key:"scenic",value:"景区"}],provinceData:[],cityData:[],areaData:[],startTime:null,endTime:null,label:{tags:[],inputVisible:!1,inputValue:""},updateData:{upload_dir:"merchant/life_tools/tools"},updateDataCover:{upload_dir:"merchant/life_tools/tools"},fileList:[],fileListCover:[],previewVisible:!1,previewVisibleCover:!1,previewImage:null,previewImageCover:null,ueConfig:{enableAutoSave:!1,autoSyncData:!1,autoHeightEnabled:!1,initialFrameHeight:350,initialFrameWidth:"100%",serverUrl:"/v20/public/static/UEditor/php/controller.php",UEDITOR_HOME_URL:"/v20/public/static/UEditor/"},form:this.$form.createForm(this,{name:"coordinated"})}},mounted:function(){this.resetForm(),this.$route.query.tools_id?(this.title="编辑景区",this.detail.tools_id=this.$route.query.tools_id,this.getLifeToolsDetail()):(this.title="添加景区",this.getProvinceData()),this.$route.query.disabled?this.disabled=!0:this.disabled=!1},beforeRouteLeave:function(t,e,i){this.$destroy(),i()},watch:{$route:{handler:function(t,e){var i=t?t.path:"";e&&e.path;if("/merchant/merchant.life_tools/ScenicEdit"==i){var a=t.query;a.tools_id?(this.resetForm(),this.detail.tools_id=a.tools_id,this.title="编辑景区",this.getLifeToolsDetail()):(this.resetForm(),this.title="添加景区",this.getProvinceData())}},immediate:!0}},methods:{resetForm:function(){this.form.resetFields(),this.detail.tools_id=0,this.detail.type="scenic",this.detail.cat_id="",this.detail.title="",this.detail.introduce="",this.detail.time_txt="",this.detail.images="",this.detail.cover_image="",this.detail.phone="",this.detail.address="",this.detail.longlat="",this.detail.province_id="",this.detail.city_id="",this.detail.area_id="",this.detail.money="",this.detail.description="",this.detail.tickets_description="",this.detail.is_appoint=0,this.detail.status=0,this.detail.start_time="",this.detail.end_time="",this.detail.label=[],this.label.tags=[],this.fileList=[],this.fileListCover=[],this.startTime=u()("09:00:00","HH:mm:ss"),this.endTime=u()("18:00:00","HH:mm:ss"),this.detail.is_close=0,this.detail.is_close_body="",this.getCategoryList()},getLifeToolsDetail:function(){var t=this;this.request(l["a"].getLifeToolsDetail,{tools_id:this.detail.tools_id}).then((function(e){t.detail.type=e.type,t.detail.cat_id=e.cat_id,t.detail.title=e.title,t.detail.introduce=e.introduce,t.detail.time_txt=e.time_txt,t.detail.phone=e.phone,t.detail.address=e.address,t.detail.longlat=e.longlat,t.detail.money=e.money,t.detail.is_appoint=e.is_appoint,t.detail.status=e.status,t.getAddressList(0,1,!0),t.getAddressList(e.province_id,2,!0),t.getAddressList(e.city_id,3,!0),t.detail.province_id=e.province_id,t.detail.city_id=e.city_id,t.detail.area_id=e.area_id,t.longlat=e.longlat;var i=[];if(e.images_arr.length>0)for(var a in e.images_arr)i.push({uid:a+1,name:"image.png",status:"done",url:e.images_arr[a].url,data:e.images_arr[a].data});t.fileList=i,t.fileListCover[0]={uid:1,name:"image.png",status:"done",url:e.cover_image,data:e.cover_image},t.detail.images=e.images,t.detail.cover_image=e.cover_image,t.detail.start_time=e.start_time,t.detail.end_time=e.end_time,t.startTime=u()(e.start_time,"HH:mm:ss"),t.endTime=u()(e.end_time,"HH:mm:ss"),t.detail.label=e.label,t.label.tags=e.label_arr,t.detail.description=e.description,t.detail.tickets_description=e.tickets_description,t.detail.is_close=e.is_close,t.detail.is_close_body=e.is_close_body,t.detail.coach=e.course.coach,t.getCategoryList()}))},getAddressList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.request(l["a"].getAddressList,{pid:e,type:i}).then((function(e){switch(i){case 1:t.provinceData=e,a||(t.detail.province_id=e[0].area_id?e[0].area_id:0,t.getCityData());break;case 2:t.cityData=e,a||(t.detail.city_id=e[0].area_id?e[0].area_id:0,t.getAreaData());break;case 3:t.areaData=e,a||(t.detail.area_id=e[0].area_id?e[0].area_id:0);break}}))},getCategoryList:function(){var t=this;this.request(l["a"].getCategoryList,{type:this.detail.type}).then((function(e){t.categoryList=e}))},getData:function(){this.form.resetFields(),this.detail={name:res.name,describe:res.describe,sort:res.sort}},typeSelectChange:function(t){this.detail.cat_id="",this.detail.type=t,this.getCategoryList()},categorySelectChange:function(t){this.detail.cat_id=t},getProvinceData:function(){this.getAddressList(0,1)},getCityData:function(){var t=this.detail.province_id;this.getAddressList(t,2)},getAreaData:function(){var t=this.detail.city_id;this.getAddressList(t,3)},changeProvince:function(t){this.detail.province_id=t,this.getCityData()},changeCity:function(t){this.detail.city_id=t,this.getAreaData()},changeArea:function(t){this.detail.area_id=t},startTimeChange:function(t,e){this.startTime=t,this.detail.start_time=e},endTimeChange:function(t,e){this.endTime=t,this.detail.end_time=e},handleClose:function(t){var e=this.label.tags.filter((function(e){return e!==t}));this.label.tags=e},handleInputChange:function(t){this.label.inputValue=t.target.value},handleInputConfirm:function(){var t=this.label.inputValue,e=this.label.tags;t&&-1===e.indexOf(t)&&(e=[].concat(Object(o["a"])(e),[t])),this.label.tags=e,this.label.inputVisible=!1,this.label.inputValue=""},showAddTagInput:function(){this.label.inputVisible=!0,this.$nextTick((function(){this.$refs.input.focus()}))},handlePreview:function(t){var e=this;return Object(s["a"])(Object(n["a"])().mark((function i(){return Object(n["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.url||t.preview){i.next=4;break}return i.next=3,getBase64(t.originFileObj);case 3:t.preview=i.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return i.stop()}}),i)})))()},handlePreviewCover:function(t){var e=this;return Object(s["a"])(Object(n["a"])().mark((function i(){return Object(n["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.url||t.preview){i.next=4;break}return i.next=3,getBase64(t.originFileObj);case 3:t.preview=i.sent;case 4:e.previewImageCover=t.url||t.preview,e.previewVisibleCover=!0;case 6:case"end":return i.stop()}}),i)})))()},upLoadChange:function(t){var e=this,i=Object(o["a"])(t.fileList);i.length?(this.detail.images="",i=i.map((function(t){return t.response?e.detail.images+=t.response.data+",":t.data&&(e.detail.images+=t.data+","),t})),this.fileList=i):this.fileList=[]},upLoadChangeCover:function(t){var e=this,i=Object(o["a"])(t.fileList);i.length?(i=i.slice(-1),i=i.map((function(t){return t.response&&(e.detail.cover_image=t.response.data),t})),this.fileListCover=i):(this.fileListCover=[],this.detail.cover_image="")},handleCancel:function(){this.previewVisible=!1},handleCancelCover:function(){this.previewVisibleCover=!1},handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,i){if(!t){if(e.detail.title=i.title,e.detail.time_txt=i.time_txt,e.detail.address=i.address,e.detail.money=i.money,e.detail.phone=i.phone,e.detail.label=e.label.tags,e.detail.is_close_body=i.is_close_body,!e.detail.cover_image)return e.$message.error("请上传封面图！"),!1;if(!e.detail.images)return e.$message.error("请上传图片！"),!1;if(!e.detail.cat_id)return e.$message.error("请输入选择分类！"),!1;if(!e.detail.description)return e.$message.error("请输入详细描述！"),!1;if(!e.detail.longlat)return e.$message.error("请选择经纬度！"),!1;e.request(l["a"].addEditLifeTools,e.detail).then((function(t){e.resetForm(),e.$message.success(e.L("操作成功！")),e.$router.push({path:"/merchant/merchant.life_tools/ScenicList"})}))}}))},infoWindowClose:function(){this.show=!1},infoWindowOpen:function(){this.show=!0},setLongLat:function(t){this.detail.longlat=t},isAppointChange:function(t){this.detail.is_appoint=t?1:0},isStatus:function(t){console.log(t),this.detail.status=t?1:0},isClose:function(t){this.detail.is_close=t?1:0},onSubmit:function(){var t=this;if(!this.auditValue)return this.$message.warning("请选择审核成功或失败"),!1;if(2==this.auditValue&&!this.audit_msg)return this.$message.error("请填写审核失败备注"),!1;var e=[this.detail.tools_id];this.request(l["a"].lifeToolsAudit,{tools_ids:e,audit_status:this.auditValue,audit_msg:this.audit_msg}).then((function(e){var i=t;t.$message.success({duration:2,content:"审核成功",onClose:function(){i.$router.push({path:"/life_tools/platform.scenic/audit/type=scenic"})}})}))}}},f=p,m=(i("9c5a"),i("0b56")),g=Object(m["a"])(f,a,r,!1,null,null,null);e["default"]=g.exports}}]);