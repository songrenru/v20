(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cc994b0","chunk-2540cb24","chunk-691f6e73","chunk-6e0113ff"],{"0d6c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ant-pro-page-header-wrap-children-content",staticStyle:{margin:"24px 0 0"}},[[a("div",{staticClass:"mb-10"},[a("a-form",{attrs:{layout:"inline"}},[a("div",{staticClass:"flex search-content"},[a("div",{staticClass:"right flex"},[a("div",[a("a-form-item",{attrs:{label:"店铺名称"}},[a("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"全部店铺"},model:{value:e.queryParam.store_id,callback:function(t){e.$set(e.queryParam,"store_id",t)},expression:"queryParam.store_id"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("全部店铺")]),e._l(e.store_data,(function(t){return a("a-select-option",{key:t.store_id},[e._v(" "+e._s(t.name)+" ")])}))],2)],1)],1),a("div",[a("a-form-item",{attrs:{label:"首页展示"}},[a("a-select",{staticStyle:{width:"120px"},attrs:{placeholder:"是否首页展示"},model:{value:e.queryParam.index_show,callback:function(t){e.$set(e.queryParam,"index_show",t)},expression:"queryParam.index_show"}},[a("a-select-option",{attrs:{value:"-1"}},[e._v(" 全部 ")]),a("a-select-option",{attrs:{value:"1"}},[e._v(" 是 ")]),a("a-select-option",{attrs:{value:"0"}},[e._v(" 否 ")])],1)],1)],1),a("div",[a("a-form-item",[a("a-input-search",{staticStyle:{width:"200px"},attrs:{placeholder:"输入检索关键词"},model:{value:e.queryParam.keyword,callback:function(t){e.$set(e.queryParam,"keyword",t)},expression:"queryParam.keyword"}})],1)],1),a("div",[a("a-button",{staticStyle:{"margin-right":"15px"},on:{click:function(t){return e.searchBtn()}}},[e._v("查询")]),a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.addLabelModal.add_label()}}},[e._v("设置标签")])],1)])])])],1)],a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"message-suggestions-list-box"},[a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination,rowKey:"id",loading:e.loading},on:{change:e.tableChange},scopedSlots:e._u([{key:"index_show",fn:function(t,i){return a("span",{},[a("span",1==t?[e._v("是")]:[e._v("否")])])}},{key:"reply_count",fn:function(t,i){return a("span",{},[a("a",{on:{click:function(t){return e.$refs.askDetailModal.detail(i.fid>0?i.fid:i.id)}}},[e._v(e._s(t))])])}},{key:"action",fn:function(t,i){return a("span",{},[a("a",{on:{click:function(t){return e.$refs.addLabelToAskModal.add_label(i.id,i.label_id)}}},[e._v("关联标签")]),a("a-divider",{attrs:{type:"vertical"}}),1==i.index_show?a("a",{on:{click:function(t){return e.setIndexShow(i.id,0)}}},[e._v("取消首页展示")]):a("a",{on:{click:function(t){return e.setIndexShow(i.id,1)}}},[e._v("展示到首页")])],1)}}])})],1),a("add-label",{ref:"addLabelModal",on:{refreshLists:e.initList}}),a("add-label-to-ask",{ref:"addLabelToAskModal",on:{refreshLists:e.initList}}),a("ask-detail",{ref:"askDetailModal"})],1)],2)},s=[],n=a("5530"),l=(a("d81d"),a("f91a")),r=a("57cd"),o=a("75f5"),c=a("d778"),d=[],u={name:"askLists",components:{AskDetail:c["default"],AddLabelToAsk:o["default"],AddLabel:r["default"]},data:function(){return this.cacheData=d.map((function(e){return Object(n["a"])({},e)})),{form:this.$form.createForm(this),mdl:{},selectStoreVisible:!1,loading:!0,id:1,store_data:[],search_data:[],queryParam:{index_show:"-1",store_id:"0",keyword:"",page_size:10},pagination:{current:1,page_size:10,total:10,"show-total":function(e){return"共 ".concat(e," 条记录")}},columns:[{title:"问题",width:200,dataIndex:"content"},{title:"回答数",width:10,dataIndex:"reply_count",scopedSlots:{customRender:"reply_count"}},{title:"查看数",width:10,dataIndex:"view_count"},{title:"提问时间",width:10,dataIndex:"create_date"},{title:"店铺名称",width:20,dataIndex:"store_name"},{title:"关联标签",width:10,dataIndex:"label_name"},{title:"是否首页展示",width:10,dataIndex:"index_show",scopedSlots:{customRender:"index_show"}},{title:"操作",dataIndex:"action",width:100,scopedSlots:{customRender:"action"}}],data:d}},watch:{$route:function(){this.initList()}},mounted:function(){this.initList()},methods:{setIndexShow:function(e,t){var a=this;this.request(l["a"].setIndexShow,{id:e,index_show:t}).then((function(e){a.$message.success(a.L("设置成功")),a.getLists()}))},searchBtn:function(){this.page=1,this.pagination.current=this.page,this.getLists()},initList:function(){this.getStoreLists(),this.getLists()},getStoreLists:function(){var e=this;this.request(l["a"].storeLists,this.queryParam).then((function(t){e.store_data=t}))},getLists:function(){var e=this;this.queryParam["page"]=this.page,this.loading=!0,this.request(l["a"].askLists,this.queryParam).then((function(t){e.loading=!1,e.data=t.list,e.pagination.total=t.total}))},tableChange:function(e){this.queryParam["page_size"]=e.pageSize,e.current&&e.current>0&&(this.pagination.current=e.current,this.page=e.current,this.getLists())}}},h=u,f=(a("3374"),a("0c7c")),m=Object(f["a"])(h,i,s,!1,null,"e16c5610",null);t["default"]=m.exports},"2de7":function(e,t,a){"use strict";a("a519")},3374:function(e,t,a){"use strict";a("74c6")},"57cd":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:600,visible:e.visible},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("p",[e._v("您最多可添加10个标签（限填5个字）")]),a("a-form",{attrs:{form:e.form}},[e._l(e.form.getFieldValue("keys"),(function(t,i){return a("a-form-item",e._b({key:t,staticStyle:{"margin-bottom":"0px"},attrs:{required:!1}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["names["+t+"]",{initialValue:e.label_nams[t],validateTrigger:["change","blur"],rules:[{required:!0,whitespace:!0,message:"请填写标签"}]}],expression:"[\n      `names[${k}]`,\n      {\n        initialValue:label_nams[k],\n        validateTrigger: ['change', 'blur'],\n        rules: [\n          {\n            required: true,\n            whitespace: true,\n            message: '请填写标签',\n          },\n        ],\n      },\n    ]"}],staticStyle:{width:"60%","margin-right":"8px"},attrs:{placeholder:""}}),e.form.getFieldValue("keys").length>1?a("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o",disabled:1===e.form.getFieldValue("keys").length},on:{click:function(){return e.remove(t)}}}):e._e()],1)})),a("a-form-item",e._b({},"a-form-item",e.formItemLayout,!1),[e.form.getFieldValue("keys").length<=9?a("a-button",{staticStyle:{width:"60%",color:"#1890ff",border:"1px solid #1890ff"},attrs:{type:"solid"},on:{click:e.add}},[a("a-icon",{attrs:{type:"plus"}}),e._v(" 新增 ")],1):e._e()],1)],2)],1)},s=[],n=(a("4de4"),a("d3b7"),a("99af"),a("ddb0"),a("f91a")),l=0,r={data:function(){return{title:"标签设置",visible:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:10},sm:{span:10}}},label_nams:[]}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"add_label"}),this.form.getFieldDecorator("keys",{initialValue:[],preserve:!0})},methods:{get_label:function(){var e=this;this.request(n["a"].getLabels,{}).then((function(t){l=t.length;for(var a=[],i=0;i<l;i++)a.push(i),e.label_nams.push(t[i]["label_name"]);var s=e.form;s.setFieldsValue({keys:a})}))},add_label:function(){this.visible=!0,this.get_label()},handleCancel:function(){this.visible=!1},remove:function(e){var t=this.form,a=t.getFieldValue("keys");1!==a.length&&t.setFieldsValue({keys:a.filter((function(t){return t!==e}))})},add:function(){var e=this.form,t=e.getFieldValue("keys"),a=t.concat(l++);console.log(a),e.setFieldsValue({keys:a})},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){if(!e){a.keys;var i=a.names;console.log(a),t.request(n["a"].saveLabels,{label_names:i}).then((function(e){t.visible=!1,t.$message.success(t.L("设置成功")),t.$emit("refreshLists",{})}))}}))}}},o=r,c=(a("2de7"),a("0c7c")),d=Object(c["a"])(o,i,s,!1,null,null,null);t["default"]=d.exports},"74c6":function(e,t,a){},"75f5":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:600,visible:e.visible},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-form",[a("a-radio-group",{on:{change:e.onChange},model:{value:e.checked_label_id,callback:function(t){e.checked_label_id=t},expression:"checked_label_id"}},[a("a-row",[a("a-radio",{key:"0",attrs:{value:0}},[e._v(" 不选择标签 ")]),e._l(e.labels,(function(t){return a("a-radio",{key:t.label_id,attrs:{value:t.label_id}},[e._v(" "+e._s(t.label_name)+" ")])}))],2)],1)],1)],1)},s=[],n=a("f91a"),l={name:"addLabelToAsk",data:function(){return{title:"选择标签",visible:!1,id:0,label_id:0,checked_label_id:0,labels:[]}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"add_label_to_ask"})},methods:{onChange:function(e){this.label_id=e.target.value},add_label:function(e,t){this.visible=!0,this.id=e,this.checked_label_id=t,this.get_label()},get_label:function(){var e=this;this.request(n["a"].getLabels,{}).then((function(t){e.labels=t}))},handleCancel:function(){this.visible=!1},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||t.request(n["a"].saveAskLabel,{id:t.id,label_id:t.label_id}).then((function(e){t.visible=!1,t.$message.success(t.L("设置成功")),t.$emit("refreshLists",{})}))}))}}},r=l,o=a("0c7c"),c=Object(o["a"])(r,i,s,!1,null,"6128dd4a",null);t["default"]=c.exports},7989:function(e,t,a){"use strict";a("84d7")},"84d7":function(e,t,a){},a519:function(e,t,a){},d778:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:600,visible:e.visible,footer:""},on:{cancel:e.handleCancel}},e._l(e.records,(function(t){return a("div",{key:t.id,staticClass:"main"},[a("div",{staticClass:"font_bold",staticStyle:{"flex-basis":"30px"}},[1==t.is_ask?a("span",{staticClass:"red"},[e._v("问")]):a("span",{staticClass:"blue"},[e._v("答")])]),a("div",{staticStyle:{"flex-grow":"10",display:"flex"}},[a("div",{staticStyle:{"flex-basis":"50px"}},[a("img",{staticClass:"avatar",attrs:{src:t.avatar}})]),a("div",{staticStyle:{"flex-grow":"10"}},[a("div",{staticClass:"font_bold div-margin"},[e._v(e._s(t.nickname))]),a("div",{staticClass:"div-margin"},[e._v(e._s(t.create_time))]),a("div",{staticClass:"div-margin"},[e._v(e._s(t.content))]),a("div",{staticClass:"div-margin"},e._l(t.images,(function(e){return a("a-popover",{attrs:{placement:"right"}},[a("template",{slot:"content"},[a("img",{staticClass:"goods-image-big",attrs:{src:e}})]),a("img",{staticClass:"goods-image",attrs:{src:e}})],2)})),1)])])])})),0)},s=[],n=a("f91a"),l={name:"askDetail",data:function(){return{title:"详情",visible:!1,records:[]}},methods:{detail:function(e){var t=this;this.visible=!0,this.request(n["a"].askDetail,{id:e}).then((function(e){t.records=e}))},handleCancel:function(){this.visible=!1}}},r=l,o=(a("7989"),a("0c7c")),c=Object(o["a"])(r,i,s,!1,null,"d814e850",null);t["default"]=c.exports},f91a:function(e,t,a){"use strict";var i={searchMerchant:"/qa/platform.Ask/searchMerchant",storeLists:"/merchant/merchant.Store/getStoreList",askLists:"/qa/merchant.Ask/lists",setIndexShow:"/qa/merchant.Ask/setIndexShow",saveLabels:"/qa/merchant.Ask/saveLabels",getLabels:"/qa/merchant.Ask/getLabels",saveAskLabel:"/qa/merchant.Ask/saveAskLabel",askDetail:"/qa/merchant.Ask/askDetail",getAll:"/qa/platform.Ask/getAll",delete:"/qa/platform.Ask/delete"};t["a"]=i}}]);