(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8043935a"],{7035:function(a,t,e){"use strict";var r={index:"/scan/platform.ScanSend/index",editData:"/scan/platform.ScanSend/edit",addData:"/scan/platform.ScanSend/add",setStatus:"/scan/platform.ScanSend/setStatus",recordList:"/scan/platform.ScanSend/getRecordList",setConfig:"/scan/platform.ScanSend/setConfig",exportEwm:"/scan/platform.ScanSend/exportEwm",exportRecordList:"/scan/platform.ScanSend/exportRecordList",recordAllList:"/scan/platform.ScanSend/getAllRecordList",singleDelete:"/scan/platform.ScanSend/singleDelete",multipleDelete:"/scan/platform.ScanSend/multipleDelete"};t["a"]=r},f6cd:function(a,t,e){"use strict";e.r(t);var r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("a-modal",{attrs:{visible:a.visible,title:a.title,width:"60%"},on:{cancel:a.handleCancel,ok:a.handleOk}},[e("a-form-model",{attrs:{model:a.formData,"label-col":a.labelCol,"wrapper-col":a.wrapperCol}},[e("a-form-model-item",{attrs:{label:"活动名称",required:""}},[e("a-input",{model:{value:a.formData.name,callback:function(t){a.$set(a.formData,"name",t)},expression:"formData.name"}})],1),e("a-form-model-item",{attrs:{label:"赠送余额数量"}},[e("a-input",{attrs:{type:"number"},model:{value:a.formData.balance_deno,callback:function(t){a.$set(a.formData,"balance_deno",t)},expression:"formData.balance_deno"}})],1),e("a-form-model-item",{attrs:{label:"赠送积分数量"}},[e("a-input",{attrs:{type:"number"},model:{value:a.formData.score_deno,callback:function(t){a.$set(a.formData,"score_deno",t)},expression:"formData.score_deno"}})],1),e("a-form-model-item",{attrs:{label:"广告地址"}},[e("a-input",{model:{value:a.formData.ad_url,callback:function(t){a.$set(a.formData,"ad_url",t)},expression:"formData.ad_url"}}),e("a-button",{on:{click:a.choosePower}},[a._v("功能库")])],1),e("a-form-model-item",{attrs:{label:"可领取数"}},[e("a-radio-group",{model:{value:a.formData.num_type,callback:function(t){a.$set(a.formData,"num_type",t)},expression:"formData.num_type"}},[e("a-radio",{attrs:{value:"1"}},[a._v(" 增加 ")]),e("a-radio",{attrs:{value:"2"}},[a._v(" 减少 ")])],1),e("a-input",{staticStyle:{width:"150px","margin-left":"50px"},attrs:{type:"number"},model:{value:a.formData.num,callback:function(t){a.$set(a.formData,"num",t)},expression:"formData.num"}}),e("br"),e("span",[a._v("备注：剩余可领取数"+a._s(a.formData.send_num-a.formData.get_num))])],1),e("a-form-model-item",{attrs:{label:"开始时间",required:""}},[e("a-date-picker",{staticStyle:{width:"100%"},attrs:{"default-value":a.moment(a.formData.start_time),"show-time":"",type:"date",placeholder:"活动开始时间"},on:{change:a.startTimeChange}})],1),e("a-form-model-item",{attrs:{label:"结束时间",required:""}},[e("a-date-picker",{staticStyle:{width:"100%"},attrs:{"default-value":a.moment(a.formData.end_time),"show-time":"",type:"date",placeholder:"活动结束时间"},on:{change:a.endTimeChange}})],1),e("a-form-model-item",{attrs:{label:"状态"}},[e("a-radio-group",{model:{value:a.formData.status,callback:function(t){a.$set(a.formData,"status",t)},expression:"formData.status"}},[e("a-radio",{attrs:{value:"1"}},[a._v(" 开启 ")]),e("a-radio",{attrs:{value:"0"}},[a._v(" 关闭 ")])],1)],1)],1)],1)],1)},n=[],o=(e("d3b7"),e("25f0"),e("498a"),e("b0c0"),e("7035")),s=e("c1df"),i=e.n(s);function l(a,t){var e=new FileReader;e.addEventListener("load",(function(){return t(e.result)})),e.readAsDataURL(a)}var m={props:{visible:Boolean,title:String,formData:Object},data:function(){return{labelCol:{span:6},wrapperCol:{span:10},loading:!1}},created:function(){this.$set(this.formData,"num",0),this.$set(this.formData,"num_type","1"),this.formData.status=this.formData.status.toString()},methods:{moment:i.a,handleOk:function(){var a=this;if(console.log(this.formData),""===this.formData.name.trim())return this.$message.error("活动名称必填！"),!1;if(this.formData.balance_deno<0)return this.$message.error("赠送余额数量必须大于等于0！"),!1;if(this.formData.score_deno<0)return this.$message.error("赠送积分数量必须大于等于0！"),!1;if(this.formData.score_deno<=0&&this.formData.balance_deno<=0)return this.$message.error("赠送积分/余额数量至少有一个大于0！"),!1;if(void 0===this.formData.start_time)return this.$message.error("活动开始时间必填！"),!1;if(void 0===this.formData.end_time)return this.$message.error("活动结束时间必填！"),!1;if(0!==this.formData.num){if(this.formData.num<0)return this.$message.error("设置可领取数不可小于0！"),!1;if(2===this.formData.num_type&&this.formData.send_num-this.formData.get_num<this.formData.num)return this.$message.error("剩余可领取数不足！"),!1}this.request(o["a"].editData,this.formData).then((function(t){a.$message.success("编辑成功!",1),setTimeout((function(){a.formData={},a.$emit("handleCancel"),a.$emit("getDataList",!1)}),1e3)}))},handleCancel:function(){this.$emit("handleCancel")},handleUploadChange:function(a){var t=this;if("uploading"!==a.file.status){if("done"===a.file.status&&1e3===a.file.response.status){var e=a.file.response.data;this.$set(this.formData,"image",e),l(a.file.originFileObj,(function(a){t.image=a,t.loading=!1}))}}else this.loading=!0},startTimeChange:function(a,t){this.$set(this.formData,"start_time",t)},endTimeChange:function(a,t){this.$set(this.formData,"end_time",t)},choosePower:function(){var a=this;this.$LinkBases({source:"platform",type:this.bannerLinkType,handleOkBtn:function(t){a.$set(a.formData,"ad_url",t.url)}})}}},f=m,d=e("2877"),c=Object(d["a"])(f,r,n,!1,null,null,null);t["default"]=c.exports}}]);