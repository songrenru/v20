(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b247a7b","chunk-41594f4b","chunk-986473da"],{"234b":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{staticClass:"project_info",attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"楼栋名称",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.buildingNameStrings",{initialValue:e.post.buildingNameStrings,rules:[{required:!0,message:e.L("请输入楼栋名称！")}]}],expression:"['post.buildingNameStrings',{ initialValue: post.buildingNameStrings, rules: [{ required: true, message: L('请输入楼栋名称！') }] }]"}],staticStyle:{width:"600px"},attrs:{maxLength:100,placeholder:"请输入楼栋名称"}}),a("div",[e._v(" 支持多个楼栋名称；英文逗号 “,” 分隔")])],1),a("a-form-item",{attrs:{label:"楼栋编号",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.buildingNumberStrings",{initialValue:e.post.buildingNumberStrings,rules:[{required:!0,message:e.L("请输入楼栋编号！")}]}],expression:"['post.buildingNumberStrings',{ initialValue: post.buildingNumberStrings, rules: [{ required: true, message: L('请输入楼栋编号！') }] }]"}],staticStyle:{width:"600px"},attrs:{maxLength:100,placeholder:"请输入楼栋编号"}}),a("div",[e._v(" 楼栋编号：支持多个楼栋编号；英文逗号 “,” 分隔；注意需要和名称 数量相同位置对应一一匹配，范围值[1,999]")])],1),a("a-form-item",{attrs:{label:"同楼栋单元数",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.unitNum",{initialValue:e.post.unitNum,rules:[{required:!0,message:e.L("请输入同楼栋单元数！")}]}],expression:"['post.unitNum',{ initialValue: post.unitNum, rules: [{ required: true, message: L('请输入同楼栋单元数！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入同楼栋单元数"}}),a("div",[e._v(" 同楼栋单元数：范围值[1,9] 由于生成不可变动 所以建议以数量多的为准")])],1),a("a-form-item",{attrs:{label:"同单元楼层数",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.floorNum",{initialValue:e.post.floorNum,rules:[{required:!0,message:e.L("请输入同单元楼层数！")}]}],expression:"['post.floorNum',{ initialValue: post.floorNum, rules: [{ required: true, message: L('请输入同单元楼层数！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入同单元楼层数"}}),a("div",[e._v(" 同单元楼层数：范围值[1,99] 由于生成不可变动 所以建议以数量多的为准")])],1),a("a-form-item",{attrs:{label:"同楼层房间数",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.houseNum",{initialValue:e.post.houseNum,rules:[{required:!0,message:e.L("请输入同楼层房间数！")}]}],expression:"['post.houseNum',{ initialValue: post.houseNum, rules: [{ required: true, message: L('请输入同楼层房间数！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入同楼层房间数"}}),a("div",[e._v(" 同楼层房间数：范围值[1,99] 由于生成不可变动 所以建议以数量多的为准")])],1)],1)],1)],1)},i=[],r=(a("b0c0"),a("a0e0")),l={components:{},data:function(){return{title:"新建",labelCol:{span:4},wrapperCol:{span:20},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,post:{buildingNameStrings:"",buildingNumberStrings:"",unitNum:"",floorNum:"",houseNum:"",auto_syn:"0"}}},mounted:function(){},methods:{add:function(){this.post={buildingNameStrings:"",buildingNumberStrings:"",unitNum:"",floorNum:"",houseNum:"",auto_syn:"0"},this.title="批量新增楼栋单元房屋",this.visible=!0},onChange:function(e){console.log("checked = ".concat(e.target.value)),this.post.auto_syn=e.target.value},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){if(t)e.confirmLoading=!1;else{var o=r["a"].setDHBuildingToDeviceCloud;a.post.auto_syn=e.post.auto_syn,console.log("相关数据",a.post),e.request(o,a.post).then((function(t){if(e.confirmLoading=!1,t.data.failNum>0&&t.data.failInfo)for(var a in t.data.failInfo)t.data.failInfo[a]&&t.data.failInfo[a]["name"]&&e.$notification["warning"]({message:"注意",duration:8,description:t.data.failInfo[a]["name"]+"("+t.data.failInfo[a]["msg"]+")"});else e.$message.success("绑定成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,e.$emit("ok")}),1500)})).catch((function(t){e.confirmLoading=!1}))}}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.form=e.$form.createForm(e)}),500)}}},n=l,s=(a("601f"),a("0c7c")),d=Object(s["a"])(n,o,i,!1,null,"14b8d2de",null);t["default"]=d.exports},"330e":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-suggestions-box-1"},[a("div",{staticClass:"add-box"},[a("a-row",[a("a-col",{attrs:{md:8,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.batchSynBuildUnitRooms.add()}}},[e._v(" 批量新增楼栋单元房屋 ")])],1)],1)],1),a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination,loading:e.loading},on:{change:e.table_change},scopedSlots:e._u([{key:"action",fn:function(t,o){return a("span",{},[a("a",{on:{click:function(t){return e.$refs.bindDahuaYuiRuiData.bind(o)}}},[e._v("绑定"+e._s(o.orgTypeTxt))]),o.isSyn?a("a-divider",{attrs:{type:"vertical"}}):e._e(),o.isSyn?a("a",{on:{click:function(t){return e.openUnitList(o)}}},[e._v(e._s(o.orgName)+"单元列表")]):e._e()],1)}}])}),a("batch-syn-build-unit-rooms",{ref:"batchSynBuildUnitRooms",on:{ok:e.getList}}),a("bind-da-hua-yui-rui-data",{ref:"bindDahuaYuiRuiData",on:{ok:e.getList}})],1)},i=[],r=(a("ac1f"),a("841c"),a("a0e0")),l=a("234b"),n=a("f10b"),s=[{title:"楼栋序号",dataIndex:"buildingNumber",key:"buildingNumber"},{title:"名称",dataIndex:"orgName",key:"orgName"},{title:"单元数量",dataIndex:"unitNum",key:"unitNum"},{title:"单元楼层数",dataIndex:"floorNum",key:"floorNum"},{title:"楼层房屋数",dataIndex:"houseNum",key:"houseNum"},{title:"房屋总数",dataIndex:"totalHouseNum",key:"totalHouseNum"},{title:"同步匹配",dataIndex:"sysModel",key:"sysModel"},{title:"匹配对象",dataIndex:"sysModelName",key:"sysModelName"},{title:"操作",key:"action",width:"300px",dataIndex:"",scopedSlots:{customRender:"action"}}],d=[],u={name:"daHuaYunRuiSynData",components:{batchSynBuildUnitRooms:l["default"],bindDaHuaYuiRuiData:n["default"]},data:function(){return{pagination:{pageSize:20,total:10,current:1},search:{camera_sn:"",camera_name:"",page:1,device_type:void 0},form:this.$form.createForm(this),visible:!1,loading:!1,data:d,columns:s,page:1}},mounted:function(){this.getList()},methods:{openUnitList:function(e){console.log("path-record",e,e.orgCode),this.$router.push({path:"/village/village.device/daHuaYunRuiSynUnitsData",query:{orgCode:e.orgCode,parent_bind_id:e.bind_id}})},getList:function(){var e=this;this.loading=!0,this.search["page"]=this.page,this.request(r["a"].getDHBuidingUnitRoomList,this.search).then((function(t){console.log("大华",t),e.pagination.total=t.totalRows?t.totalRows:0,e.pagination.pageSize=t.pageSize?t.pageSize:20,e.data=t.pageData,e.loading=!1}))},table_change:function(e){e.current&&e.current>0&&(this.pagination.current=e.current,this.page=e.current,this.getList())}}},c=u,m=(a("8dd8"),a("0c7c")),p=Object(m["a"])(c,o,i,!1,null,"becf7db6",null);t["default"]=p.exports},"561c":function(e,t,a){},"601f":function(e,t,a){"use strict";a("c77a")},"6fdab":function(e,t,a){"use strict";a("7bcb")},"7bcb":function(e,t,a){},"8dd8":function(e,t,a){"use strict";a("561c")},c77a:function(e,t,a){},f10b:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{staticClass:"project_info_1",attrs:{form:e.form}},[a("a-form-item",{attrs:{label:e.record.orgTypeTxt+"名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.orgName)+" ")]),e.record.buildingNumber?a("a-form-item",{attrs:{label:e.record.orgTypeTxt+"编号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.buildingNumber)+" ")]):e._e(),e.record.id?a("a-form-item",{attrs:{label:e.record.orgTypeTxt+"ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.id)+" ")]):e._e(),e.record.orgCode?a("a-form-item",{attrs:{label:e.record.orgTypeTxt+"组织编码",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.orgCode)+" ")]):e._e(),e.record.unitNum?a("a-form-item",{attrs:{label:"单元数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.unitNum)+" ")]):e._e(),e.record.floorNum?a("a-form-item",{attrs:{label:"单元楼层数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.floorNum)+" ")]):e._e(),e.record.houseNum?a("a-form-item",{attrs:{label:"楼层房屋数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.houseNum)+" ")]):e._e(),e.record.totalHouseNum?a("a-form-item",{attrs:{label:"房屋总数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.totalHouseNum)+" ")]):e._e(),e.record.sysModel?a("a-form-item",{attrs:{label:"同步匹配",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.sysModel)+" ")]):e._e(),e.record.sysModelName?a("a-form-item",{attrs:{label:"匹配对象",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.sysModelName)+" ")]):e._e(),12!=e.record.orgType?a("a-form-item",{attrs:{label:"同步机制",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{attrs:{"button-style":"solid"},on:{change:e.onChange},model:{value:e.record.auto_syn,callback:function(t){e.$set(e.record,"auto_syn",t)},expression:"record.auto_syn"}},[a("a-radio-button",{attrs:{value:"0"}},[e._v(" 手动匹配同步 ")]),a("a-radio-button",{attrs:{value:"1"}},[e._v(" 自动匹配同步 ")])],1),a("div",[e._v(" 默认是手动匹配同步，选择了自动匹配同步 会以序号对应数据进行关联，关联不上的需要额外进行手动匹配。")])],1):e._e(),1!=e.record.isSyn?a("a-form-item",{attrs:{label:"选择同步"+e.record.orgTypeTxt,required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{staticStyle:{width:"50%"},attrs:{"show-search":"",placeholder:"选择同步"+e.record.orgTypeTxt,"option-filter-prop":"children","filter-option":e.filterOption,value:e.bindId},on:{change:e.handleChange}},e._l(e.singleList,(function(t,o){return a("a-select-option",{key:o,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+e._s(t.sysTxt)+" ")])})),1)],1):e._e()],1)],1)],1)},i=[],r=a("a0e0"),l={components:{},data:function(){return{title:"绑定",labelCol:{span:4},wrapperCol:{span:20},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,record:{},bindId:"",relatedType:"build",singleList:[]}},mounted:function(){},methods:{handleChange:function(e){console.log("selectedItems",e),this.bindId=e},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},bindDHBuildUnitRoomsList:function(e){var t=this;this.request(r["a"].bindDHBuildUnitRoomsList,e).then((function(e){t.singleList=e.list,console.log("this.singleList",t.singleList)}))},bind:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"edit",o={orgType:e.orgType,parent_bind_id:t};this.singleList=[],this.bindId="",this.bindDHBuildUnitRoomsList(o),this.record=e,this.title="绑定"+e.orgTypeTxt,this.visible=!0,10==e.orgType?this.relatedType="build":11==e.orgType?this.relatedType="unit":12==e.orgType&&(this.relatedType="room"),this.type=a},onChange:function(e){console.log("checked = ".concat(e.target.value)),this.record.auto_syn=e.target.value},handleSubmit:function(){var e=this;if("look"==this.type)this.handleCancel();else{console.log("record",this.record),console.log("relatedType = ".concat(this.relatedType)),console.log("bindId = ".concat(this.bindId)),this.confirmLoading=!0;var t=r["a"].bindDHBuildUnitRoom;this.record.bind_id&&!this.bindId&&(this.bindId=this.record.bind_id);var a={orgParam:this.record,bindId:this.bindId,relatedType:this.relatedType};console.log("相关数据param",a),this.request(t,a).then((function(t){e.confirmLoading=!1,e.record.bind_id&&"1"==e.record.auto_syn?e.$message.success("自动下发指令执行中"):e.record.bind_id||e.$message.success("绑定成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,e.$emit("ok")}),1500),console.log("相关数据res",t)})).catch((function(t){e.confirmLoading=!1}))}},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.form=e.$form.createForm(e)}),500)}}},n=l,s=(a("6fdab"),a("0c7c")),d=Object(s["a"])(n,o,i,!1,null,"e3b280c4",null);t["default"]=d.exports}}]);