(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c94fff9","chunk-2d0c06af"],{4261:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("a-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"primary"}},[e._v(" Open the message box ")])},n=[],s={downloadExportFile:"/common/common.export/downloadExportFile"},i=s,r="updatable",c={props:{exportUrl:"",queryParam:{}},data:function(){return{file_date:"",file_url:""}},mounted:function(){},methods:{exports:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"加载中,请耐心等待,数量越多时间越长。";this.request(this.exportUrl,this.queryParam).then((function(o){e.$message.loading({content:t,key:r,duration:0}),console.log("添加导出计划任务成功"),e.file_url=i.downloadExportFile+"?id="+o.export_id,e.file_date=o,e.CheckStatus()}))},CheckStatus:function(){var e=this;this.request(this.file_url,{id:this.file_date.export_id}).then((function(t){0==t.error?(e.$message.success({content:"下载成功!",key:r,duration:2}),location.href=t.url):setTimeout((function(){e.CheckStatus(),console.log("重复请求")}),1e3)}))}}},l=c,m=o("2877"),u=Object(m["a"])(l,a,n,!1,null,"dd2f8128",null);t["default"]=u.exports},"65eb":function(e,t,o){"use strict";var a={getConfig:"/common/platform.system.config/getConfig",saveConfig:"/common/platform.system.config/saveConfig",getSearchHotWords:"/common/platform.coupon/getSearchHotWords",getWordDetail:"/common/platform.coupon/getWordDetail",saveWords:"/common/platform.coupon/saveWords",saveWordsSort:"/common/platform.coupon/saveWordsSort",delWords:"/common/platform.coupon/delWords",getBrandSelectCoupon:"/common/platform.coupon/getBrandSelectCoupon",chooseBrandSelectCoupon:"/common/platform.coupon/chooseBrandSelectCoupon",addBrandCoupon:"/common/platform.coupon/addBrandCoupon",delBrandCoupon:"/common/platform.coupon/delBrandCoupon",sysCouponUseRecords:"/common/platform.coupon/sysCouponUseRecords",sysCouponGetRecords:"/common/platform.coupon/sysCouponGetRecords",exportSysGetRecords:"/common/platform.coupon/exportSysGetRecords",merCouponUseRecords:"/merchant/merchant.coupon/merCouponUseRecords",merCouponGetRecords:"/merchant/merchant.coupon/merCouponGetRecords",exportMerGetRecords:"/merchant/merchant.coupon/exportMerGetRecords",getStoreList:"/merchant/merchant.store/getStoreList",updateUse:"/merchant/merchant.coupon/updateUse"};t["a"]=a},b576:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-top":"20px",padding:"20px","background-color":"#fff"}},[o("a-form-model",{attrs:{layout:"inline",model:e.searchForm}},[o("a-form-model-item",{attrs:{label:"搜索"}},[o("a-select",{staticStyle:{width:"150px"},model:{value:e.searchForm.search_type,callback:function(t){e.$set(e.searchForm,"search_type",t)},expression:"searchForm.search_type"}},[o("a-select-option",{attrs:{value:1}},[e._v("用户昵称")]),o("a-select-option",{attrs:{value:2}},[e._v("手机号")]),o("a-select-option",{attrs:{value:3}},[e._v("优惠券名称")]),o("a-select-option",{attrs:{value:4}},[e._v("店铺名称")]),o("a-select-option",{attrs:{value:5}},[e._v("员工会员名称")])],1)],1),o("a-form-model-item",{attrs:{label:""}},[o("a-input",{attrs:{placeholder:"关键词"},model:{value:e.searchForm.keyword,callback:function(t){e.$set(e.searchForm,"keyword",t)},expression:"searchForm.keyword"}})],1),o("a-form-model-item",{attrs:{label:"日期"}},[o("a-select",{staticStyle:{width:"100px"},model:{value:e.searchForm.time_type,callback:function(t){e.$set(e.searchForm,"time_type",t)},expression:"searchForm.time_type"}},[o("a-select-option",{attrs:{value:1}},[e._v("领取时间")]),o("a-select-option",{attrs:{value:2}},[e._v("使用时间")]),o("a-select-option",{attrs:{value:3}},[e._v("回收时间")])],1)],1),o("a-form-model-item",{attrs:{label:""}},[o("a-range-picker",{attrs:{ranges:{"过去30天":[e.moment().subtract(30,"days"),e.moment()],"过去15天":[e.moment().subtract(15,"days"),e.moment()],"过去7天":[e.moment().subtract(7,"days"),e.moment()],"今日":[e.moment(),e.moment()]},value:e.searchForm.time,format:"YYYY-MM-DD"},on:{change:e.onDateRangeChange}})],1),o("a-form-model-item",[o("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(t){return e.submitForm(!0)}}},[e._v("搜索")]),o("a-button",{staticClass:"ml-20",on:{click:function(t){return e.resetForm()}}},[e._v("重置")]),o("a-button",{staticClass:"ml-20",attrs:{type:"primary",icon:"download"},on:{click:function(t){return e.getExport()}}},[e._v("导出")])],1)],1),o("br"),o("a-table",{attrs:{rowKey:"hadpull_id",columns:e.columns,"data-source":e.datalist,pagination:e.pagination,bordered:""},scopedSlots:e._u([{key:"id",fn:function(t,a){return[o("a-row",[0==a.is_use?o("span",{staticClass:"cr-primary pointer inline-block",on:{click:function(t){return e.backCoupon(a)}}},[e._v("回收")]):e._e()])]}}])}),o("a-modal",{attrs:{title:e.backTitle,width:600,visible:e.modal1Visible},on:{ok:function(t){return e.handleSubmit()},cancel:e.handleCancel}},[o("a-form",{attrs:{layout:"inline"}},[o("a-form-item",{attrs:{label:"请输入回收理由"}},[o("a-input",{attrs:{placeholder:"请输入回收理由"},model:{value:e.backNote,callback:function(t){e.backNote=t},expression:"backNote"}})],1)],1)],1)],1)},n=[],s=o("5530"),i=o("65eb"),r=o("4261"),c=o("c1df"),l=o.n(c),m=o("322e"),u=[{title:"领取ID",dataIndex:"hadpull_id",key:"hadpull_id"},{title:"用户昵称",dataIndex:"nickname",key:"nickname"},{title:"员工会员名称",dataIndex:"card_name",key:"card_name"},{title:"用户手机",dataIndex:"phone",key:"phone"},{title:"优惠券名称",dataIndex:"coupon_name",key:"coupon_name"},{title:"数量",dataIndex:"num",key:"num"},{title:"状态",dataIndex:"status",key:"status"},{title:"使用店铺",dataIndex:"store_name",key:"store_name"},{title:"使用时间",dataIndex:"use_time",key:"use_time"},{title:"回收时间",dataIndex:"recycle_time",key:"recycle_time"},{title:"回收备注",dataIndex:"note",key:"note"},{title:"领取时间",dataIndex:"receive_time",key:"receive_time",scopedSlots:{customRender:"receive_time"}},{title:"操作",dataIndex:"id",key:"id",scopedSlots:{customRender:"id"}}],d={components:{AFormItem:m["a"],ExportAdd:r["default"]},data:function(){return{labelCol:{span:4},wrapperCol:{span:14},datalist:[],modal1Visible:!1,columns:u,backNote:"",backTitle:"",coupon_name:"",id:0,uid:0,searchForm:{keyword:"",type:0,search_type:1,time_type:1,status:-1,time:[],begin_time:"",end_time:""},exportUrl:i["a"].exportMerGetRecords,pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(e){return"共 ".concat(e," 条记录")}}}},created:function(){this.getDataList(!1)},methods:{moment:l.a,getDataList:function(e){var t=this,o=Object(s["a"])({},this.searchForm);!0===e?(o.page=1,this.$set(this.pagination,"current",1)):(o.page=this.pagination.current,this.$set(this.pagination,"current",this.pagination.current)),o.pageSize=this.pagination.pageSize,this.request(i["a"].merCouponGetRecords,o).then((function(e){t.datalist=e.data,t.$set(t.pagination,"total",e.total)}))},submitForm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getDataList(e)},backCoupon:function(e){this.modal1Visible=!0,this.id=e.id,this.uid=e.uid,this.coupon_name=e.coupon_name,this.backTitle="回收优惠券-"+e.coupon_name},handleSubmit:function(){var e=this;this.request(i["a"].updateUse,{id:this.id,note:this.backNote,uid:this.uid,coupon_name:this.coupon_name}).then((function(t){e.modal1Visible=!1,e.backNote="",e.getDataList(!1)}))},handleCancel:function(){this.modal1Visible=!1,this.backNote=""},resetForm:function(){this.$set(this,"searchForm",{keyword:"",type:0,search_type:1,time_type:1,status:-1,time:[],begin_time:"",end_time:""}),this.$set(this.pagination,"current",1),this.getDataList()},onPageChange:function(e,t){this.$set(this.pagination,"current",e),this.submitForm()},onPageSizeChange:function(e,t){this.$set(this.pagination,"pageSize",t),this.submitForm()},onDateRangeChange:function(e,t){this.$set(this.searchForm,"time",[e[0],e[1]]),this.$set(this.searchForm,"begin_time",t[0]),this.$set(this.searchForm,"end_time",t[1])},getExport:function(){this.datalist.length>0?(this.$message.success("正在导出，请耐心等待..."),this.request(this.exportUrl,this.searchForm).then((function(e){e.file_url&&window.open(e.file_url)}))):this.$message.warn("当前没有可以导出的内容")}}},p=d,h=o("2877"),f=Object(h["a"])(p,a,n,!1,null,null,null);t["default"]=f.exports}}]);