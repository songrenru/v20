(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dac66dc","chunk-2d0c06af","chunk-2d0a310a"],{"011d":function(t,e,o){"use strict";var s={getSearchHotList:"/mall/platform.MallSearchHot/getSearchHotList",getHotRecord:"/mall/platform.MallSearchHot/getHotRecord",addOrEditSearchHot:"/mall/platform.MallSearchHot/addOrEditSearchHot",getEditSearchHot:"/mall/platform.MallSearchHot/getEditSearchHot",delSearchHot:"/mall/platform.MallSearchHot/delSearchHot",saveSort:"/mall/platform.MallSearchHot/saveSort",getGoodsList:"/mall/platform.MallPlatformGoods/getGoodsList",getMerOrStoreList:"/mall/platform.MallPlatformGoods/getMerOrStoreList",goodsCategoryList:"/mall/platform.MallGoodsCategory/goodsCategoryList",goodsSetSort:"/mall/platform.MallPlatformGoods/setSort",getGoodsListByName:"/mall/platform.MallPlatformGoods/getGoodsListByName",exportGoods:"/mall/platform.MallPlatformGoods/exportGoods",goodsSetIntegral:"/mall/platform.MallPlatformGoods/setIntegral",goodsSetCommission:"/mall/platform.MallPlatformGoods/setCommission",goodsSetVirtual:"/mall/platform.MallPlatformGoods/setVirtual",goodsSetStatus:"/mall/platform.MallPlatformGoods/setStatus",goodsSetFirst:"/mall/platform.MallPlatformGoods/setFirst",merchantGoodsEdit:"/mall/platform.mallPlatformGoods/merchantGoodsEdit",getActivityRecommendList:"/mall/platform.MallActivityRecommend/getActivityRecommendList",getLimitedRecommendList:"/mall/platform.mallActivityRecommend/getLimitedRecommendList",getBargainRecommendList:"/mall/platform.mallActivityRecommend/getBargainRecommendList",getGroupRecommendList:"/mall/platform.mallActivityRecommend/getGroupRecommendList",editLimitedRecommend:"/mall/platform.mallActivityRecommend/editLimitedRecommend",editBargainRecommend:"/mall/platform.mallActivityRecommend/editBargainRecommend",editGroupRecommend:"/mall/platform.mallActivityRecommend/editGroupRecommend",setFirstLimited:"/mall/platform.mallActivityRecommend/setFirstLimited",setFirstBargain:"/mall/platform.mallActivityRecommend/setFirstBargain",setFirstGroup:"/mall/platform.mallActivityRecommend/setFirstGroup",setSortGroup:"/mall/platform.mallActivityRecommend/setSortGroup",setSortLimited:"/mall/platform.mallActivityRecommend/setSortLimited",setSortBargain:"/mall/platform.mallActivityRecommend/setSortBargain",bannerList:"/mall/platform.mallActivityRecommend/bannerList",addOrEditBanner:"/mall/platform.mallActivityRecommend/addOrEditBanner",delBanner:"/mall/platform.mallActivityRecommend/delBanner",getReplyList:"/mall/platform.MallPlatformReply/searchReply",getReplyDetails:"/mall/platform.MallPlatformReply/getReplyDetails",delReply:"/mall/platform.MallPlatformReply/delReply",getOrderList:"/mall/platform.MallOrder/searchOrders",getOrderDetails:"/mall/platform.MallOrder/getOrderDetails",getStores:"/mall/platform.MallOrder/getStores",getMers:"/mall/platform.MallOrder/getMers",loginMer:"/mall/platform.MallOrder/loginMer",loginStore:"/mall/platform.MallOrder/loginStore",getAllArea:"/mall/platform.MallOrder/getAllArea",getDiscount:"/mall/platform.MallOrder/getDiscount",getOrderLog:"/mall/platform.MallOrder/getOrderLog",exportOrder:"/mall/platform.MallOrder/exportOrder",getList:"mall/platform.MallHomeDecorate/getList",getDel:"mall/platform.MallHomeDecorate/getDel",getEdit:"mall/platform.MallHomeDecorate/getEdit",addOrEditDecorate:"mall/platform.MallHomeDecorate/addOrEdit",getSixList:"mall/platform.MallHomeDecorate/getSixList",getSixEdit:"mall/platform.MallHomeDecorate/getSixEdit",addOrEditSixAdver:"mall/platform.MallHomeDecorate/addOrEditSixAdver",delSixAdver:"mall/platform.MallHomeDecorate/delSixAdver",getRecList:"mall/platform.MallHomeDecorate/getRecList",addOrEditRec:"mall/platform.MallHomeDecorate/addOrEditRec",getRecEdit:"mall/platform.MallHomeDecorate/getRecEdit",delRecAdver:"mall/platform.MallHomeDecorate/delRecAdver",recDisplay:"mall/platform.MallHomeDecorate/recDisplay",getActGoods:"mall/platform.MallHomeDecorate/getActGoods",addRelatedGoods:"mall/platform.MallHomeDecorate/addRelatedGoods",getUrlAndRecSwitch:"mall/platform.MallHomeDecorate/getUrlAndRecSwitch",getRelatedList:"mall/platform.MallHomeDecorate/getRelatedList",saveRelatedSort:"/mall/platform.MallHomeDecorate/saveRelatedSort",delOne:"/mall/platform.MallHomeDecorate/delOne",viewLogistics:"/mall/platform.MallOrder/viewLogistics",getPeriodicList:"/mall/platform.MallOrder/getPeriodicList",setRecommend:"/mall/platform.MallPlatformGoods/setRecommend",cancelRecommend:"/mall/platform.MallPlatformGoods/cancelRecommend",isShowReply:"/mall/platform.MallPlatformReply/isShowReply",getAuditGoodsList:"/mall/platform.MallPlatformGoods/getAuditGoodsList",auditGoods:"/mall/platform.MallPlatformGoods/auditGoods",loginMerchant:"/mall/platform.MallPlatformGoods/loginMerchant",orderPrintTicket:"/mall/platform.MallOrder/printOrder"};e["a"]=s},4261:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"primary"}},[t._v(" Open the message box ")])},a=[],i={downloadExportFile:"/common/common.export/downloadExportFile"},l=i,r="updatable",n={props:{exportUrl:"",queryParam:{}},data:function(){return{file_date:"",file_url:""}},mounted:function(){},methods:{exports:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"加载中,请耐心等待,数量越多时间越长。";this.request(this.exportUrl,this.queryParam).then((function(o){t.$message.loading({content:e,key:r,duration:0}),console.log("添加导出计划任务成功"),t.file_url=l.downloadExportFile+"?id="+o.export_id,t.file_date=o,t.CheckStatus()}))},CheckStatus:function(){var t=this;this.request(this.file_url,{id:this.file_date.export_id}).then((function(e){0==e.error?(t.$message.success({content:"下载成功!",key:r,duration:2}),location.href=e.url):setTimeout((function(){t.CheckStatus(),console.log("重复请求")}),1e3)}))}}},d=n,c=o("0c7c"),m=Object(c["a"])(d,s,a,!1,null,"dd2f8128",null);e["default"]=m.exports},8405:function(t,e,o){},c2c0:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[o("a-form-model",{attrs:{layout:"inline",model:t.searchForm},on:{submit:t.getGoodsListByName},nativeOn:{submit:function(t){t.preventDefault()}}},[o("a-row",{attrs:{type:"flex",justify:"space-between"}},[o("a-col",[o("a-form-model-item",{attrs:{label:"商品名称"}},[o("a-input",{staticClass:"keyword",attrs:{placeholder:"请输入商品名称"},model:{value:t.searchForm.keyword1,callback:function(e){t.$set(t.searchForm,"keyword1",e)},expression:"searchForm.keyword1"}})],1)],1),o("a-col",[o("a-form-model-item",{attrs:{label:"选择商家"}},t._l(t.merchantOptions,(function(e){return o("a-radio",{key:e.value,attrs:{checked:e.value==t.merchantType},on:{click:function(o){return t.searchRadioOpt(e.value,"1")}}},[t._v(" "+t._s(e.label)+" ")])})),1),o("a-form-model-item",{attrs:{label:"选择店铺"}},t._l(t.storeOptions,(function(e){return o("a-radio",{key:e.value,attrs:{checked:e.value==t.storeType},on:{click:function(o){return t.searchRadioOpt(e.value,"2")}}},[t._v(" "+t._s(e.label)+" ")])})),1)],1),o("a-col",[o("a-form-model-item",[o("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[t._v(" 查询")]),o("a-button",{staticClass:"ml-20",attrs:{icon:"download"},on:{click:t.getExport}},[t._v(" 导出商品")])],1)],1)],1)],1),o("section",{staticClass:"mt-20"},[o("a-row",{attrs:{type:"flex",justify:"space-between"}},[o("a-col",{attrs:{span:3}},[o("a-menu",{staticClass:"scroll_content",staticStyle:{height:"100%"},attrs:{mode:"inline","open-keys":t.defaultOpenSort,"selected-keys":t.defaultSort},on:{select:t.onSortSelect,openChange:t.onOpenChange}},[t._l(t.sortList,(function(e){return[e.children&&e.children.length?o("a-sub-menu",{key:e.cat_id},[o("span",{attrs:{slot:"title"},slot:"title"},[o("span",[t._v(t._s(e.cat_name))])]),e.children&&e.children.length?[t._l(e.children,(function(e){return[e.children&&e.children.length?[o("a-sub-menu",{key:e.cat_id,attrs:{title:e.cat_name}},t._l(e.children,(function(e){return o("a-menu-item",{key:e.cat_id},[t._v(t._s(e.cat_name)+" ")])})),1)]:[o("a-menu-item",{key:e.cat_id},[t._v(t._s(e.cat_name))])]]}))]:t._e()],2):o("a-menu-item",{key:e.cat_id},[t._v(t._s(e.cat_name))])]}))],2)],1),o("a-col",{attrs:{span:21}},[t.findShow?t._e():[o("a-table",{attrs:{columns:t.columnsGoods,"data-source":t.goodsList,pagination:!1,"row-selection":{selectedRowKeys:t.goodsSelectedRowKeys,onChange:t.ongoodsSelectChange},rowKey:"goods_id"},scopedSlots:t._u([{key:"goods_name",fn:function(e,s){return[o("div",{staticClass:"flex align-center"},[o("img",{staticClass:"size-45",attrs:{src:s.image}}),o("div",{staticClass:"flex flex-direction justify-between"},[o("span",{staticClass:"flex-1 ml-10"},[t._v(t._s(e)+" ")]),t.joinActivityOpt(s.join_activity)?o("div",{staticClass:"ml-10"},[o("a-tag",{attrs:{color:"red"}},[t._v(" "+t._s(t.joinActivityOpt(s.join_activity))+" ")])],1):t._e()])])]}},{key:"price",fn:function(e,s){return["spu"==s.goods_type?o("span",[t._v("￥"+t._s(s.price))]):o("span",[t._v("￥"+t._s(s.min_price)+" - ￥"+t._s(s.max_price))])]}},{key:"stock_num",fn:function(e){return[o("span",[t._v(t._s(Number(e)<0?"无限量":e))])]}},{key:"status",fn:function(e,s){return[o("a-switch",{staticClass:"switch-btn",attrs:{"checked-children":"上架","un-checked-children":"下架","default-checked":1==e},on:{change:function(e){return t.setGoodsStatus(s.goods_id,e)}}})]}},{key:"sort_platform",fn:function(e,s){return[o("a-input-number",{staticClass:"sort-input",attrs:{"default-value":e||0,precision:0,min:0},on:{blur:function(o){return t.handleSortChange(o,e,s)}},model:{value:s.sort_platform,callback:function(e){t.$set(s,"sort_platform",e)},expression:"record.sort_platform"}})]}},{key:"action",fn:function(e,s){return[o("a-button",{staticClass:"link-btn",attrs:{type:"link"},on:{click:function(e){return t.btnOpt(s,"edit")}}},[t._v("编辑 ")]),o("a-button",{staticClass:"link-btn",attrs:{type:"link"},on:{click:function(e){return t.btnOpt(s,"setFirst")}}},[t._v(" "+t._s(1==s.is_first?"取消置顶":"置顶")+" ")]),o("a-button",{staticClass:"link-btn",attrs:{type:"link"},on:{click:function(e){return t.btnOpt(s,"setIntegral",3)}}},[t._v("设置积分 ")]),o("a-button",{staticClass:"link-btn",attrs:{type:"link"},on:{click:function(e){return t.btnOpt(s,"setCommission",4)}}},[t._v("设置佣金 ")]),o("a-button",{staticClass:"link-btn",attrs:{type:"link"},on:{click:function(e){return t.btnOpt(s,"setVirtualSales",11)}}},[t._v("设置虚拟销量 ")])]}}],null,!1,715039486)}),o("a-row",{staticClass:"mt-20",attrs:{type:"flex",justify:"space-between",align:"middle"}},[o("a-col",{staticClass:"ml-20",attrs:{span:10}},[o("a-checkbox",{attrs:{checked:!(t.goodsSelectedRowKeys.length!=t.goodsList.length||!t.goodsList.length),disabled:!t.goodsList.length},on:{change:t.allCheck}},[t._v("当页全选 ")]),o("span",[t._v("已选商品 "+t._s(t.goodsSelectedRowKeys.length))]),o("a-button",{staticClass:"mr-10 ml-10",attrs:{disabled:!t.goodsSelectedRowKeys.length},on:{click:function(e){return t.btnOpt("","status",5,!1)}}},[t._v(" 上架 ")]),o("a-button",{staticClass:"mr-10",attrs:{disabled:!t.goodsSelectedRowKeys.length},on:{click:function(e){return t.btnOpt("","status",6,!1)}}},[t._v(" 下架 ")]),o("a-button",{staticClass:"mr-10",attrs:{disabled:!t.goodsSelectedRowKeys.length},on:{click:function(e){return t.btnOpt("","setIntegral",3,!1)}}},[t._v(" 设置积分 ")]),o("a-button",{attrs:{disabled:!t.goodsSelectedRowKeys.length},on:{click:function(e){return t.btnOpt("","setCommission",4,!1)}}},[t._v(" 设置佣金 ")])],1),o("a-col",{staticStyle:{"text-align":"right"},attrs:{span:13}},[o("a-pagination",{attrs:{current:t.searchForm.page,pageSize:t.searchForm.pageSize,total:t.total,"show-size-changer":"","show-quick-jumper":"","show-total":function(t){return"共 "+t+" 条记录"}},on:{change:t.onPageChange,showSizeChange:t.onPageSizeChange}})],1)],1)],t.findShow?[o("a-row",[o("a-col",{attrs:{span:24}},[o("div",{staticStyle:{"padding-top":"15px","padding-bottom":"15px"}},[t._v(" 找到与 ["+t._s(t.searchForm.keyword1)+"] 相关的 "+t._s(t.total)+" 条结果 "),o("a",{on:{click:t.goodsCategoryList}},[t._v("清空搜索结果")])])])],1),t._l(t.tab_list,(function(e){return[o("a-row",[o("a-col",{staticStyle:{"padding-top":"20px","padding-bottom":"20px","padding-left":"10px","font-size":"20px"},attrs:{span:24}},[e.cat_name?o("span",[t._v(t._s(e.cat_name))]):o("span",[t._v("无分类名称")])])],1),o("a-table",{attrs:{columns:t.columnsGoods,"data-source":e.data,pagination:!1,"row-selection":{selectedRowKeys:t.goodsSelectedRowKeys,onChange:function(o){t.ongoodsSelectChange1(o,e.data)}},rowKey:"goods_id"},scopedSlots:t._u([{key:"goods_name",fn:function(e,s){return[o("div",{staticClass:"flex align-center"},[o("img",{staticClass:"size-45",attrs:{src:s.image}}),o("div",{staticClass:"flex flex-direction justify-between"},[o("span",{staticClass:"flex-1 ml-10"},[t._v(t._s(e)+" ")]),t.joinActivityOpt(s.join_activity)?o("div",{staticClass:"ml-10"},[o("a-tag",{attrs:{color:"red"}},[t._v(" "+t._s(t.joinActivityOpt(s.join_activity))+" ")])],1):t._e()])])]}},{key:"price",fn:function(e,s){return["spu"==s.goods_type?o("span",[t._v("￥"+t._s(s.price))]):o("span",[t._v("￥"+t._s(s.min_price)+" - ￥"+t._s(s.max_price))])]}},{key:"stock_num",fn:function(e){return[o("span",[t._v(t._s(Number(e)<0?"无限量":e))])]}},{key:"status",fn:function(e,s){return[o("a-switch",{staticClass:"switch-btn",attrs:{"checked-children":"上架","un-checked-children":"下架","default-checked":1==e},on:{change:function(e){return t.setGoodsStatus(s.goods_id,e)}}})]}},{key:"sort_platform",fn:function(e,s){return[o("a-input-number",{staticClass:"sort-input",attrs:{"default-value":e||0,precision:0,min:0},on:{blur:function(o){return t.handleSortChange(o,e,s)}},model:{value:s.sort_platform,callback:function(e){t.$set(s,"sort_platform",e)},expression:"record.sort_platform"}})]}},{key:"action",fn:function(e,s){return[o("a-button",{staticClass:"link-btn",attrs:{type:"link"},on:{click:function(e){return t.btnOpt(s,"edit")}}},[t._v("编辑 ")]),o("a-button",{staticClass:"link-btn",attrs:{type:"link"},on:{click:function(e){return t.btnOpt(s,"setFirst")}}},[t._v(" "+t._s(1==s.is_first?"取消置顶":"置顶")+" ")]),o("a-button",{staticClass:"link-btn",attrs:{type:"link"},on:{click:function(e){return t.btnOpt(s,"setIntegral",3)}}},[t._v("设置积分 ")]),o("a-button",{staticClass:"link-btn",attrs:{type:"link"},on:{click:function(e){return t.btnOpt(s,"setCommission",4)}}},[t._v("设置佣金 ")]),o("a-button",{staticClass:"link-btn",attrs:{type:"link"},on:{click:function(e){return t.btnOpt(s,"setVirtualSales",11)}}},[t._v("设置虚拟销量 ")])]}}],null,!0)}),o("a-row",{staticClass:"mt-20",attrs:{type:"flex",justify:"space-between",align:"middle"}},[o("a-col",{staticClass:"ml-20",attrs:{span:14}},[o("a-checkbox",{attrs:{checked:!(t.goodsSelectedRowKeys.length!=t.goodsList.length||!t.goodsList.length),disabled:!t.goodsList.length},on:{change:t.allCheck}},[t._v("当页全选 ")]),o("span",[t._v("已选商品 "+t._s(t.goodsSelectedRowKeys.length))]),o("a-button",{staticClass:"mr-10 ml-10",attrs:{disabled:!t.goodsSelectedRowKeys.length},on:{click:function(e){return t.btnOpt("","status",5,!1)}}},[t._v(" 上架 ")]),o("a-button",{staticClass:"mr-10",attrs:{disabled:!t.goodsSelectedRowKeys.length},on:{click:function(e){return t.btnOpt("","status",6,!1)}}},[t._v(" 下架 ")]),o("a-button",{staticClass:"mr-10",attrs:{disabled:!t.goodsSelectedRowKeys.length},on:{click:function(e){return t.btnOpt("","setIntegral",3,!1)}}},[t._v(" 设置积分 ")]),o("a-button",{attrs:{disabled:!t.goodsSelectedRowKeys.length},on:{click:function(e){return t.btnOpt("","setCommission",4,!1)}}},[t._v(" 设置佣金 ")])],1)],1)]}))]:t._e()],2)],1)],1),o("a-modal",{attrs:{title:t.modalTitle,centered:"",maskClosable:!1,width:"30%"},on:{ok:t.handleOk,cancel:t.handleCancel},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[1==t.modalType||2==t.modalType?[o("a-form-model",{attrs:{layout:"inline",model:t.modalSearchForm,"label-col":{span:2},"wrapper-col":{span:22}}},[o("a-form-model-item",{staticStyle:{width:"100%"},attrs:{label:"搜索",labelAlign:"left"}},[o("a-input",{attrs:{placeholder:1==t.modalType?"请输入商家名称":"请输入店铺名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getMerOrStoreList()}},model:{value:t.modalSearchForm.search,callback:function(e){t.$set(t.modalSearchForm,"search",e)},expression:"modalSearchForm.search"}})],1)],1),o("a-table",{staticClass:"mt-20",attrs:{"row-selection":{selectedRowKeys:t.modalSelectedRowKeys,onChange:t.onModalSelectChange},columns:t.columns,scroll:{y:400},"data-source":t.modalTableData,"row-key":1==t.modalType?"mer_id":"store_id"}},[o("template",{slot:"name"},[o("span",[t._v(t._s(1==t.modalType?"商家名称":"店铺名称"))])])],2)]:t._e(),3==t.modalType?[o("a-form-model",{ref:"scoreForm",attrs:{layout:"inline",model:t.setIntegralFormData,rules:t.rules}},[o("a-form-model-item",{attrs:{label:"消费1元得积分",help:"请填写>0的数字，设置百分比请填写%，如2%",prop:"score_percent"}},[o("a-input",{attrs:{placeholder:"请输入"},model:{value:t.setIntegralFormData.score_percent,callback:function(e){t.$set(t.setIntegralFormData,"score_percent",e)},expression:"setIntegralFormData.score_percent"}})],1),o("a-form-model-item",{attrs:{label:"积分最大使用数",help:2==t.isIntegral?"请填写>0的整数，如10":"",prop:"score_max"}},[o("a-row",[o("a-col",t._l(t.integralOptions,(function(e){return o("a-radio",{key:e.value,attrs:{checked:e.value==t.isIntegral},on:{click:function(o){return t.maxScoreRadio(e.value)}}},[t._v(" "+t._s(e.label)+" ")])})),1)],1),2==t.isIntegral?o("a-input",{attrs:{type:"number",placeholder:"请输入"},model:{value:t.setIntegralFormData.score_max,callback:function(e){t.$set(t.setIntegralFormData,"score_max",e)},expression:"setIntegralFormData.score_max"}}):t._e()],1)],1)]:t._e(),4==t.modalType?[o("a-form-model",{ref:"commissionForm",attrs:{model:t.commissionFormData,rules:t.rules}},t._l(t.commissionOptions,(function(e){return o("a-form-model-item",{key:e.prop,attrs:{label:e.label,help:e.help,prop:e.prop,"label-col":{span:8},"wrapper-col":{span:14}}},[o("a-input-number",{staticClass:"commission-input",attrs:{min:0,max:100,placeholder:"请输入"},model:{value:t.commissionFormData[e.prop],callback:function(o){t.$set(t.commissionFormData,e.prop,o)},expression:"commissionFormData[item.prop]"}})],1)})),1)]:t._e(),7==t.modalType?[o("p",[t._v("您当前编辑的商家与之前编辑的商家不同，之前编辑数据将被覆盖，您是否继续编辑？")])]:t._e(),11==t.modalType?[o("a-form-model",{ref:"virtualForm",attrs:{layout:"inline",model:t.setVirtualFormData,rules:t.rules}},[o("a-form-model-item",{attrs:{label:"是否取消商家平台设置的虚拟销量",prop:"virtual_set"}},[o("a-switch",{staticClass:"switch-btn",attrs:{"checked-children":"是","un-checked-children":"否","default-checked":1==t.setVirtualFormData.virtual_set},on:{change:t.setVirtualSet}})],1),o("br"),o("a-form-model-item",{attrs:{label:"设置虚拟销量",prop:"sales"}},[o("a-input-number",{staticStyle:{width:"100px"},attrs:{min:0,disabled:t.setVirtualFormData.disabled_set},model:{value:t.setVirtualFormData.sales,callback:function(e){t.$set(t.setVirtualFormData,"sales",e)},expression:"setVirtualFormData.sales"}})],1)],1)]:t._e()],2),o("export-add",{ref:"ExportAddModal",attrs:{exportUrl:t.exportUrl,queryParam:t.searchForm}})],1)},a=[],i=(o("ac1f"),o("4de4"),o("d3b7"),o("7db0"),o("d81d"),o("99af"),o("159b"),o("011d")),l=o("ca00"),r=o("4261"),n=function(t,e,o){if(""===e)o(new Error("请设置消费积分"));else if(e){var s="";s=-1!=e.indexOf("%")?/^([1-9][0-9]?|100)%$/:/^[+]{0,1}(\d+)$/,s.test(e)?o():o(new Error("请设置正确的消费积分数据格式"))}else o()},d={name:"MallGoods",components:{ExportAdd:r["default"]},data:function(){return{searchForm:{merList:[],storeList:[],keyword:"",page:1,pageSize:10,cat_id:"",keyword1:""},tab_list:[],findShow:!1,exportUrl:i["a"].exportGoods,merchantType:1,storeType:1,merchantOptions:[{label:"全部商家",value:1},{label:"部分商家",value:2}],storeOptions:[{label:"全部店铺",value:1},{label:"部分店铺",value:2}],modalType:"",modalVisible:!1,modalSearchForm:{search:"",type:"",page:0,pageSize:10},columns:[{dataIndex:"name",slots:{title:"name"},align:"center"}],modalTableData:[],modalSelectedRowKeys:[],goodsList:[],sortList:[],defaultOpenSort:[],defaultSort:[],catId:"",columnsGoods:[{title:"商品名称",dataIndex:"goods_name",scopedSlots:{customRender:"goods_name"},width:"140px"},{title:"浏览量",dataIndex:"browse_num",width:"80px",align:"center"},{title:"商家名称",dataIndex:"mer_name",width:"100px"},{title:"店铺名称",dataIndex:"store_name"},{title:"售价",dataIndex:"price",scopedSlots:{customRender:"price"},width:"80px"},{title:"虚拟销量",dataIndex:"virtual_sales",align:"center"},{title:"实际销量",dataIndex:"sale_num",align:"center"},{title:"当前库存",dataIndex:"stock_num",scopedSlots:{customRender:"stock_num"},align:"center"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"sort_platform",scopedSlots:{customRender:"sort_platform"}},{title:"操作",dataIndex:"goods_id",width:"280px",scopedSlots:{customRender:"action"}}],activityOptions:[{label:"砍价",value:"bargain"},{label:"拼团",value:"group"},{label:"限时",value:"limited"},{label:"预售",value:"prepare"},{label:"周期购",value:"periodic"},{label:"N元N件",value:"reached"},{label:"满包邮",value:"shipping"},{label:"满赠",value:"give"},{label:"满减",value:"minus"},{label:"满折",value:"discount"}],goodsSelectedRowKeys:[],total:null,currentGoods:"",rules:{score_percent:[{require:!0,validator:n,trigger:["blur","change"]}]},setIntegralFormData:{goods_id:"",min_price:"",score_percent:"",score_max:""},setVirtualFormData:{goods_id:"",sales:0,virtual_set:0,disabled_set:!0},isIntegral:1,integralOptions:[{label:"跳过",value:1},{label:"设置",value:2}],commissionOptions:[{prop:"spread_rate",help:"填写 0-100正整数，0代表不设置，微信中分享有效，佣金计算是以商品实付款为基准。",label:"第一级用户分享佣金比例"},{prop:"sub_spread_rate",help:"填写 0-100正整数，0代表不设置，微信中分享有效，佣金计算是以商品实付款为基准。",label:"第二级用户分享佣金比例"},{prop:"third_spread_rate",help:"填写 0-100正整数，0代表不设置，微信中分享有效，佣金计算是以商品实付款为基准。",label:"第三级用户分享佣金比例"}],commissionFormData:{goods_id:"",spread_rate:0,sub_spread_rate:0,third_spread_rate:0},merInfo:""}},computed:{modalTitle:function(){var t="";return 1==this.modalType?t="选择商家":2==this.modalType?t="选择店铺":3==this.modalType?t="设置积分":4==this.modalType?t="设置佣金":7==this.modalType&&(t="提示"),t}},created:function(){this.goodsCategoryList()},methods:{searchRadioOpt:function(t,e){this.modalType=e,1==this.modalType?this.merchantType=t:2==this.modalType&&(this.storeType=t),2==t&&(this.modalVisible=!0,1==this.modalType&&this.searchForm.merList&&this.searchForm.merList.length&&(this.modalSelectedRowKeys=this.searchForm.merList),2==this.modalType&&this.searchForm.storeList&&this.searchForm.storeList.length&&(this.modalSelectedRowKeys=this.searchForm.storeList)),1==t&&(this.modalSelectedRowKeys=[],1==e?this.$set(this.searchForm,"merList",[]):this.$set(this.searchForm,"storeList",[])),this.getMerOrStoreList()},getMerOrStoreList:function(){var t=this;this.modalTableData=[],this.$set(this.modalSearchForm,"type",this.modalType),this.request(i["a"].getMerOrStoreList,this.modalSearchForm).then((function(e){t.modalTableData=e.list||[]}))},onModalSelectChange:function(t){this.modalSelectedRowKeys=t},getGoodsList:function(){var t=this;this.findShow=!1,this.searchForm.keyword1="",console.log(this.searchForm,"this.searchForm"),this.goodsList=this.$options.data().goodsList,this.$set(this.searchForm,"cat_id",this.catId),this.request(i["a"].getGoodsList,this.searchForm).then((function(e){t.goodsList=e.list||[],t.total=e.count,t.goodsSelectedRowKeys=[]}))},getGoodsListByName:function(){var t=this;this.findShow=!0,this.defaultOpenSort=[],this.defaultSort=[],this.total=0,this.$set(this.searchForm,"cat_id",this.catId),this.request(i["a"].getGoodsListByName,this.searchForm).then((function(e){t.tab_list=e.tab_list||[],t.total=e.count,t.goodsSelectedRowKeys=[]}))},joinActivityOpt:function(t){var e="";return t&&(e=this.activityOptions.filter((function(e){return e.value==t}))[0]||""),e?e["label"]:""},goodsCategoryList:function(){var t=this;this.searchForm.keyword1="",this.defaultSort=[],this.defaultOpenSort=[],this.request(i["a"].goodsCategoryList,this.searchForm).then((function(e){var o=e.list||[];if(o&&o.length){var s=o[0],a="";if(s.children&&s.children.length){t.defaultOpenSort.push(s.cat_id);var i=s.children[0];if(i.children&&i.children.length){t.defaultOpenSort.push(i.cat_id);var l=i.children[0];a=l.cat_id,t.defaultSort.push(l.cat_id)}else a=i.cat_id,t.defaultSort.push(i.cat_id)}else a=s.cat_id,t.defaultSort.push(s.cat_id);t.sortList=o,t.catId=a,t.getGoodsList()}})).catch((function(e){t.getGoodsList()}))},onSortSelect:function(t){t.item;var e=t.key;t.selectedKeys;this.catId=e,this.defaultSort=[e],console.log("--------------catId",this.catId),this.goodsSelectedRowKeys=[],this.$set(this.searchForm,"page",1),this.getGoodsList()},onOpenChange:function(t){var e=this,o=t.find((function(t){return-1===e.defaultOpenSort.indexOf(t)}));-1===this.defaultOpenSort.indexOf(o)?this.defaultOpenSort=t:this.defaultOpenSort=o?[o]:[]},resetForm:function(){Object.assign(this.$data,this.$options.data()),this.goodsCategoryList(),this.getGoodsList()},handleSortChange:function(t,e,o){var s=this,a={goods_id:o.goods_id,sort:e};this.request(i["a"].goodsSetSort,a).then((function(t){s.goodsList=s.goodsList.map((function(t){return o.goods_id==t.goods_id&&(t.sort_platform=e),t})),s.goodsCategoryList(),s.getGoodsList()}))},btnOpt:function(t,e){var o=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(this.currentGoods=t,"edit"!=e)if("setFirst"!=e){if(this.modalType=s,(3==s||4==s)&&a){if(3==s){for(var r in this.setIntegralFormData)this.setIntegralFormData[r]=this.currentGoods[r];this.setIntegralFormData.score_max&&0!=this.setIntegralFormData.score_max&&(this.isIntegral=2)}if(4==s)for(var n in this.commissionFormData)this.commissionFormData[n]=this.currentGoods[n];this.modalVisible=!0}if(a||this.goodsSelectedRowKeys.length)if(5!=s){if(6!=s)return 3!=s&&4!=s||a?11==s?(this.setVirtualFormData=this.$options.data().setVirtualFormData,this.currentGoods&&(this.$set(this.setVirtualFormData,"sales",this.currentGoods.plat_virtual_sales),1===this.currentGoods.virtual_set&&(this.$set(this.setVirtualFormData,"virtual_set",!0),this.$set(this.setVirtualFormData,"disabled_set",!1))),void(this.modalVisible=!0)):void("setRecommend"!=e?"setAllRecommend"!=e?"cancelRecommend"!=e||this.cancelRecommend(t):this.setAllRecommend(this.goodsSelectedRowKeys):this.setRecommend(t)):(this.setIntegralFormData=this.$options.data().setIntegralFormData,this.commissionFormData=this.$options.data().commissionFormData,this.isIntegral=this.$options.data().isIntegral,void(this.modalVisible=!0));this.setGoodsStatus(this.goodsSelectedRowKeys,0)}else this.setGoodsStatus(this.goodsSelectedRowKeys,1);else this.$message.error("请选择商品")}else this.setFirstOpt(t);else{var d=Object(l["d"])("merchant_access_token")||"",c={mer_id:t.mer_id,ticket_mer:d};this.request(i["a"].merchantGoodsEdit,c).then((function(t){var e=t.is_one,s=t.info;0==e?(o.modalType=7,o.modalVisible=!0):1==e?o.editGoods():2==e&&o.editGoods(!0),o.merInfo=s||""}))}},editGoods:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.modalVisible=!1,this.modalType="";var e=location.href.substring(0,location.href.indexOf("#"));t&&Object(l["m"])("merchant_access_token",this.merInfo.ticket,null),window.open("".concat(e,"#/merchant/merchant.mall/editGoods?store_id=").concat(this.currentGoods.store_id,"&goods_id=").concat(this.currentGoods.goods_id))},setRecommend:function(t){var e=this;if(!t.goods_id)return this.$message.error("设置失败！"),this.modalType="",!1;var o={goods_id:[t.goods_id]};this.$confirm({title:"是否设置推荐",content:"",okText:"确认",cancelText:"取消",onOk:function(){e.request(i["a"].setRecommend,o).then((function(t){1==t?(e.$message.success("设置成功！"),e.modalType="",e.getGoodsList()):e.$message.error("设置失败！")}))},onCancel:function(){console.log("Cancel"),e.currentBtn=""},class:"test"})},setAllRecommend:function(t){var e=this;if(!t)return this.$message.error("设置失败！"),this.modalType="",!1;var o={goods_id:t};this.$confirm({title:"是否设置推荐",content:"",okText:"确认",cancelText:"取消",onOk:function(){e.request(i["a"].setRecommend,o).then((function(t){console.log(t,"sddaada==ad=adad="),1==t?(e.$message.success("设置成功！"),e.modalType="",e.getGoodsList()):e.$message.error("设置失败！")}))},onCancel:function(){console.log("Cancel"),e.currentBtn=""},class:"test"})},cancelRecommend:function(t){var e=this;if(!t.goods_id)return this.$message.error("取消失败！"),this.modalType="",!1;var o={goods_id:[t.goods_id]};this.$confirm({title:"是否取消推荐",content:"",okText:"确认",cancelText:"取消",onOk:function(){e.request(i["a"].cancelRecommend,o).then((function(t){e.$message.success("取消成功！"),e.modalType="",e.getGoodsList()}))},onCancel:function(){console.log("Cancel"),e.currentBtn=""},class:"test"})},setFirstOpt:function(t){var e=this,o={goods_id:t.goods_id,is_first:1==t.is_first?0:1,cat_id:this.catId};this.request(i["a"].goodsSetFirst,o).then((function(t){e.$message.success("设置成功！"),e.modalType="",e.getGoodsList()}))},setGoodsStatus:function(t,e){var o=this;5!=this.modalType&&6!=this.modalType&&(e=e?1:0,t=[t]);var s={goods_id:t,status:e};this.request(i["a"].goodsSetStatus,s).then((function(s){o.$message.success("设置成功！"),o.modalType="",o.currentGoods="",o.goodsList=o.goodsList.map((function(s){-1!=t.indexOf(s.goods_id)&&(s.status=e),o.goodsCategoryList()}))}))},setVirtualSet:function(t){!1===t?(this.$set(this.setVirtualFormData,"virtual_set",0),this.$set(this.setVirtualFormData,"disabled_set",!0)):(this.$set(this.setVirtualFormData,"virtual_set",1),this.$set(this.setVirtualFormData,"disabled_set",!1))},setIntegralOpt:function(){var t=this;if(this.currentGoods)this.$set(this.setIntegralFormData,"goods_id",[this.currentGoods.goods_id]),this.$set(this.setIntegralFormData,"min_price",[this.currentGoods.price]);else{var e=[];this.goodsSelectedRowKeys.length&&this.goodsList.length&&this.goodsSelectedRowKeys.forEach((function(o){var s=t.goodsList.find((function(t){if(t.goods_id==o)return t}));s&&e.push(s.price)})),this.$set(this.setIntegralFormData,"min_price",e),this.$set(this.setIntegralFormData,"goods_id",this.goodsSelectedRowKeys)}1==this.isIntegral&&this.$set(this.setIntegralFormData,"score_max",""),this.request(i["a"].goodsSetIntegral,this.setIntegralFormData).then((function(e){t.$message.success("设置成功！"),t.modalVisible=!1,t.modalType="",t.currentGoods?t.goodsList=t.goodsList.map((function(e){return e.goods_id==t.currentGoods.goods_id&&(e.score_percent=t.setIntegralFormData.score_percent,e.score_max=t.setIntegralFormData.score_max),e})):t.getGoodsList(),t.currentGoods="",t.setIntegralFormData=t.$options.data().setIntegralFormData,t.isIntegral=t.$options.data().isIntegral,t.goodsSelectedRowKeys=[]}))},setCommissionOpt:function(){var t=this;this.currentGoods?this.$set(this.commissionFormData,"goods_id",[this.currentGoods.goods_id]):this.$set(this.commissionFormData,"goods_id",this.goodsSelectedRowKeys),this.request(i["a"].goodsSetCommission,this.commissionFormData).then((function(e){t.$message.success("设置成功！"),t.modalVisible=!1,t.modalType="",t.currentGoods?t.goodsList=t.goodsList.map((function(e){return e.goods_id==t.currentGoods.goods_id&&(e.spread_rate=t.commissionFormData.spread_rate,e.sub_spread_rate=t.commissionFormData.sub_spread_rate,e.third_spread_rate=t.commissionFormData.third_spread_rate),e})):t.getGoodsList(),t.currentGoods="",t.commissionFormData=t.$options.data().commissionFormData,t.goodsSelectedRowKeys=[]}))},setVirtualOpt:function(){var t=this;this.currentGoods?this.$set(this.setVirtualFormData,"goods_id",[this.currentGoods.goods_id]):this.$set(this.setVirtualFormData,"goods_id",this.goodsSelectedRowKeys),this.request(i["a"].goodsSetVirtual,this.setVirtualFormData).then((function(e){t.$message.success("设置成功！"),t.modalVisible=!1,t.modalType="",t.getGoodsList(),t.currentGoods="",t.setVirtualFormData=t.$options.data().setVirtualFormData,t.goodsSelectedRowKeys=[]}))},maxScoreRadio:function(t){if(this.isIntegral=t,2==this.isIntegral){var e=[{required:!0,message:"请设置积分最大使用数",trigger:"change"}];this.$set(this.rules,"score_max",e)}else this.rules.score_max&&this.$delete(this.rules,"score_max")},handleOk:function(){var t=this;1==this.modalType?this.$set(this.searchForm,"merList",this.modalSelectedRowKeys):2==this.modalType&&this.$set(this.searchForm,"storeList",this.modalSelectedRowKeys),1!=this.modalType&&2!=this.modalType||(this.modalVisible=!1,this.modalSelectedRowKeys=[],this.modalTableData=[],1!=this.pagination.current&&this.$set(this.pagination,"current",1),10!=this.pagination.pageSize&&this.$set(this.pagination,"pageSize",10)),3==this.modalType&&(console.log("1111111",this.$refs["scoreForm"]),this.$refs["scoreForm"].validate((function(e){if(console.log(e,"valid"),!e)return!1;t.setIntegralOpt()}))),4==this.modalType&&this.$refs["commissionForm"].validate((function(e){if(!e)return!1;t.setCommissionOpt()})),11==this.modalType&&this.$refs["virtualForm"].validate((function(e){if(console.log(e,"valid"),!e)return!1;t.setVirtualOpt()})),7!=this.modalType||this.editGoods(!0)},handleCancel:function(){var t="";3==this.modalType&&(t="scoreForm"),4==this.modalType&&(t="commissionForm"),t&&this.$refs[t].clearValidate(),this.currentGoods&&(this.currentGoods=""),this.merInfo&&(this.merInfo=""),this.modalType="",1!=this.pagination.current&&this.$set(this.pagination,"current",1),10!=this.pagination.pageSize&&this.$set(this.pagination,"pageSize",10)},onPageChange:function(t,e){this.$set(this.searchForm,"page",t),this.getGoodsList()},onPageSizeChange:function(t,e){this.$set(this.searchForm,"pageSize",e),this.getGoodsList()},ongoodsSelectChange:function(t){this.goodsSelectedRowKeys=t},ongoodsSelectChange1:function(t,e){this.goodsSelectedRowKeys=t,this.goodsList=e},allCheck:function(t){t.target.checked?this.goodsSelectedRowKeys=this.goodsList.map((function(t){return t.goods_id})):this.goodsSelectedRowKeys=[]},allCheck1:function(t,e){console.log(t,"e==e=e=e=e"),t.target.checked?(this.goodsSelectedRowKeys=e.map((function(t){return t.goods_id})),this.goodsList=e):(this.goodsList=[],this.goodsSelectedRowKeys=[])},getExport:function(){this.goodsList.length?this.$refs.ExportAddModal.exports():this.$message.warn("当前没有可以导出的内容")}}},c=d,m=(o("ff38"),o("0c7c")),u=Object(m["a"])(c,s,a,!1,null,"0988591b",null);e["default"]=u.exports},ff38:function(t,e,o){"use strict";o("8405")}}]);