(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b90cf"],{"30fb":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a-modal",{attrs:{title:t.title,width:1300,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading,footer:null,centered:!0},on:{cancel:t.handleCancel}},[o("div",{staticClass:"search-box",staticStyle:{"margin-bottom":"10px"}},[o("a-row",{attrs:{gutter:48}},[o("a-col",{attrs:{md:8,sm:24}},[o("a-input-group",{attrs:{compact:""}},[o("a-select",{staticStyle:{width:"30%"},attrs:{"default-value":"name"},model:{value:t.search.select_option,callback:function(e){t.$set(t.search,"select_option",e)},expression:"search.select_option"}},[o("a-select-option",{attrs:{value:"name"}},[t._v(" 姓名 ")]),o("a-select-option",{attrs:{value:"phone"}},[t._v(" 联系方式 ")])],1),o("a-input",{staticStyle:{width:"70%"},model:{value:t.search.con,callback:function(e){t.$set(t.search,"con",e)},expression:"search.con"}})],1)],1),o("a-col",{attrs:{md:2,sm:2}},[o("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.searchList()}}},[t._v(" 查询 ")])],1),o("a-col",{attrs:{md:2,sm:2}},[o("a-button",{on:{click:function(e){return t.resetList()}}},[t._v("重置")])],1)],1)],1),o("a-table",{attrs:{"row-selection":t.rowSelection,rowKey:"worker_id",columns:t.columns,"data-source":t.data,pagination:t.pagination},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"operation",fn:function(e,n){return o("span",{},[0==n.is_exist?o("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.bind(n.worker_id,n.work_name,n.work_phone,n.work_id_card,n.work_addr,n.work_head,1)}}},[t._v("添加")]):o("a-button",{on:{click:function(e){return t.bind(n.worker_id,n.work_name,n.work_phone,n.work_id_card,n.work_addr,n.work_head,2)}}},[t._v("移除")])],1)}}])}),o("choiceGrid",{ref:"choiceModal",on:{change:t.info}}),o("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.bind_all()}}},[t._v("批量添加")])],1)},i=[],a=o("5530"),r=(o("ac1f"),o("841c"),o("567c")),s=o("9aed"),c=[{title:"编号",width:100,dataIndex:"work_num",key:"work_num"},{title:"姓名",width:200,dataIndex:"work_name",key:"work_name"},{title:"手机号码",dataIndex:"work_phone",key:"work_phone",width:150},{title:"职务",dataIndex:"work_job",key:"work_job",width:150},{title:"部门",dataIndex:"organization_txt",key:"organization_txt",width:150},{title:"操作",key:"operation",fixed:"right",width:100,scopedSlots:{customRender:"operation"}}],d=null,l={components:{choiceGrid:s["default"]},data:function(){return{title:"添加",visible:!1,confirmLoading:!1,pagination:{},form:this.$form.createForm(this),search:{page:1,select_option:"name",con:""},columns:c,data:[],selectedRowKeys:[],workers_id_arr:[]}},computed:{hasSelected:function(){return this.selectedRowKeys.length>0},rowSelection:function(){var t=this;return{onChange:function(e,o){console.log("selectedRows: ",o),o!=[]&&(t.workers_id_arr=o)},getCheckboxProps:function(t){return{props:{disabled:1===t.is_exist}}}}}},mounted:function(){d=this},methods:{add:function(){this.visible=!0,this.search.select_option="name",this.search.con="",this.fetch(),this.pagination.page=1},handleTableChange:function(t,e,o){console.log(t);var n=Object(a["a"])({},this.pagination);n.current=t.current,this.pagination=n,this.fetch(Object(a["a"])({results:t.pageSize,page:t.current,sortField:o.field,sortOrder:o.order},e))},fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.request(r["a"].getWorkersPage,e).then((function(e){var o=Object(a["a"])({},t.pagination);o.total=e.total,o.pageSize=e.limit,t.loading=!1,t.data=e.list,t.pagination=o}))},searchList:function(){var t=this.search;this.fetch(t)},bind_all:function(){if(""==this.workers_id_arr)return this.$message.error("请选择数据"),!1;this.bindFunc(this.workers_id_arr)},bindFunc:function(t){this.$refs.choiceModal.getList(t)},bind:function(t,e,o,n,i,a,s){var c=this;1==s?this.bindFunc([{worker_id:t,work_name:e,work_phone:o,work_id_card:n,work_addr:i,work_head:a}]):this.request(r["a"].delGridCustom,{workers_id:t}).then((function(t){d.$message.success("操作成功"),c.$emit("reload")}))},handleCancel:function(){var t=this;this.visible=!1,this.$emit("reload"),setTimeout((function(){t.form=t.$form.createForm(t)}),500)},resetList:function(){this.search={select_option:"name",value:"",status:"",date:[],page:1},this.fetch(this.search)},info:function(t,e,o){var n=this;console.log("info===========",t,e,o[0]),e.visible=!1,e.is_show=!1,this.request(r["a"].addGridCustom,{workers_id_arr:t,community_id:o[0]}).then((function(t){n.$message.success("操作成功"),n.$emit("reload")}))}}},h=l,u=o("2877"),_=Object(u["a"])(h,n,i,!1,null,"b60e0b3c",null);e["default"]=_.exports}}]);