(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1150361c"],{"05cf":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cloudintercom"},[a("div",{staticClass:"search-box"},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:15}},[a("a-input-group",{attrs:{compact:""}},[a("p",{staticStyle:{"margin-top":"5px"}},[t._v("姓名：")]),a("a-input",{staticClass:"select_position",attrs:{placeholder:"请输入姓名"},model:{value:t.search.keyword,callback:function(e){t.$set(t.search,"keyword",e)},expression:"search.keyword"}}),a("p",{staticStyle:{"margin-top":"5px"}},[t._v("非机动车卡：")]),a("a-input",{staticClass:"select_position",attrs:{placeholder:"请输入非机动车卡"},model:{value:t.search.nmvCard,callback:function(e){t.$set(t.search,"nmvCard",e)},expression:"search.nmvCard"}}),a("p",{staticStyle:{"margin-top":"5px"}},[t._v("剩余天数：")]),a("a-input",{staticClass:"select_position",attrs:{placeholder:"请输入剩余天数"},model:{value:t.search.surplusDays,callback:function(e){t.$set(t.search,"surplusDays",e)},expression:"search.surplusDays"}}),a("p",{staticStyle:{"margin-top":"5px"}},[t._v("状态：")]),a("a-select",{staticClass:"select_position",model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}},[a("a-select-option",{attrs:{value:0}},[t._v("请选择状态")]),a("a-select-option",{attrs:{value:1}},[t._v("已到期")]),a("a-select-option",{attrs:{value:2}},[t._v("未到期")]),a("a-select-option",{attrs:{value:3}},[t._v("未缴费")])],1)],1)],1),a("a-col",{staticStyle:{"margin-right":"10px"},attrs:{span:1}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.getNmvCardList(1)}}},[t._v("查询")])],1),a("a-col",{attrs:{span:1}},[a("a-button",{on:{click:function(e){return t.resetList()}}},[t._v("重置")])],1)],1)],1),a("div",{staticClass:"add-box"},[a("a-row",[a("a-col",{attrs:{span:4}},[a("a-popconfirm",{staticClass:"ant-dropdown-link",staticStyle:{"margin-left":"10px"},attrs:{title:"确认通知?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.payNotice(0,"batch")}}},[a("a-button",{attrs:{type:"primary"}},[t._v("批量通知")])],1)],1)],1)],1),a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columns,"data-source":t.data,rowKey:"id","row-selection":t.rowSelection,pagination:t.pagination,loading:t.loading},on:{change:t.table_change},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[a("a",{on:{click:function(e){return t.paymentRecordPage(n.id)}}},[t._v("缴费记录")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{staticClass:"ant-dropdown-link",staticStyle:{"margin-left":"10px"},attrs:{title:"确认通知?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.payNotice(n.id,"single")}}},[a("a",[t._v("一键通知")])])],1)}}])}),t.visible?a("a-modal",{attrs:{title:"缴费记录",width:900,visible:t.visible,footer:null,maskClosable:!1},on:{cancel:t.handleCancel}},[a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columnsOrder,"data-source":t.dataOrder,rowKey:"order_id",pagination:t.paginationOrder,loading:t.loadingOrder},on:{change:t.table_changeOrder}})],1):t._e()],1)},i=[],s=(a("ac1f"),a("841c"),a("a0e0")),r=[{title:"姓名",dataIndex:"name",key:"name"},{title:"非机动车卡",dataIndex:"nmv_card",key:"nmv_card"},{title:"到期时间",dataIndex:"expiration_time",key:"expiration_time"},{title:"剩余天数",dataIndex:"surplus_days",key:"surplus_days"},{title:"状态",dataIndex:"status",key:"status"},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"action"}}],o=[{title:"支付类型",dataIndex:"type_name",key:"type_name"},{title:"支付金额",dataIndex:"pay_money",key:"pay_money"},{title:"支付时间",dataIndex:"pay_time",key:"pay_time"},{title:"支付方式",dataIndex:"pay_type",key:"pay_type"},{title:"支付状态",dataIndex:"is_paid",key:"is_paid"}],c=[],l=[],d={name:"paymentRecord",data:function(){return{labelCol:{span:4},wrapperCol:{span:14},pagination:{current:1,pageSize:10,total:10},paginationOrder:{current:1,pageSize:10,total:10},search:{keyword:"",nmvCard:"",page:1,surplusDays:"",status:0},loading:!1,card_id:0,loadingOrder:!1,columns:r,columnsOrder:o,data:c,dataOrder:l,villageId:"",visible:!1,selectedSendUser:[]}},mounted:function(){this.getNmvCardList()},computed:{rowSelection:function(){var t=this;return{onChange:function(e,a){t.selectedSendUser=e}}}},methods:{getNmvCardList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.loading=!0,1===e&&this.$set(this.pagination,"current",1),this.search["page"]=this.pagination.current,this.request(s["a"].getNmvCardList,this.search).then((function(e){console.log(e),t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.data=e.list,t.loading=!1}))},paymentRecordPage:function(t){this.card_id=t,this.getNmvChargeOrderList(0,t),this.visible=!0},getNmvChargeOrderList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1?arguments[1]:void 0;this.loadingOrder=!0;var n={id:a};1===e&&this.$set(this.paginationOrder,"current",1),n["page"]=this.paginationOrder.current,this.request(s["a"].getNmvChargeOrderList,n).then((function(e){t.paginationOrder.total=e.count?e.count:0,t.paginationOrder.pageSize=e.total_limit?e.total_limit:10,t.dataOrder=e.list,t.loadingOrder=!1}))},resetList:function(){this.$set(this.pagination,"current",1),this.search={keyword:"",nmvCard:"",page:1,surplusDays:"",status:0},this.getNmvCardList()},table_change:function(t){var e=this;t.current&&t.current>0&&(e.$set(e.pagination,"current",t.current),e.getNmvCardList())},table_changeOrder:function(t){var e=this;t.current&&t.current>0&&(e.$set(e.paginationOrder,"current",t.current),e.getNmvChargeOrderList(0,this.card_id))},handleCancel:function(){this.visible=!1,this.$set(this.paginationOrder,"current",1),this.getNmvCardList()},payNotice:function(t,e){var a=this;if("single"===e)this.selectedSendUser=[t];else if(this.selectedSendUser.length<1)return this.$message.error("请先选择需要通知的用户"),!1;var n={send:this.selectedSendUser};this.request(s["a"].sendNmvMessage,n).then((function(t){a.$message.success("操作成功"),a.getNmvCardList()}))}}},p=d,u=(a("286e"),a("2877")),h=Object(u["a"])(p,n,i,!1,null,null,null);e["default"]=h.exports},"286e":function(t,e,a){"use strict";a("9f0c")},"9f0c":function(t,e,a){}}]);