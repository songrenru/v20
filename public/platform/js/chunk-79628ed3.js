(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79628ed3","chunk-487eb180"],{1495:function(e,t,a){},3386:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{staticClass:"project_info",attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,required:!0}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("设备厂商")]),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.brand_id",{initialValue:e.post.brand_id,rules:[{required:!0,message:e.L("请选择设备厂商！")}]}],expression:"['post.brand_id',{initialValue: post.brand_id,rules: [{ required: true, message: L('请选择设备厂商！') }] }]"}],staticStyle:{width:"300px !important"},attrs:{placeholder:"请选择设备厂商"},on:{change:e.handleChange}},e._l(e.brand_list,(function(t,s){return a("a-select-option",{key:s,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,required:!0}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("设备类型")]),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.device_type",{initialValue:e.post.device_type,rules:[{required:!0,message:e.L("请选择设备类型！")}]}],expression:"['post.device_type',{initialValue: post.device_type,rules: [{ required: true, message: L('请选择设备类型！') }] }]"}],staticStyle:{width:"300px !important"},attrs:{placeholder:"请选择设备类型"},on:{change:e.handleChange1}},e._l(e.device_type_list,(function(t,s){return a("a-select-option",{key:s,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("设备名称")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.camera_name",{initialValue:e.post.camera_name,rules:[{required:!0,message:e.L("请输入名称！")}]}],expression:"['post.camera_name',{ initialValue: post.camera_name, rules: [{ required: true, message: L('请输入名称！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入名称"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("设备编号")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.camera_sn",{initialValue:e.post.camera_sn,rules:[{required:!0,message:e.L("请输入设备编号！")}]}],expression:"['post.camera_sn',{ initialValue: post.camera_sn, rules: [{ required: true, message: L('请输入设备编号！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入名称"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col"},[e._v("出厂编号")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.product_model",{initialValue:e.post.product_model,rules:[{message:e.L("请输入出厂编号！")}]}],expression:"['post.product_model',{ initialValue: post.product_model, rules: [{message: L('请输入出厂编号！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入出厂编号"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col"},[e._v("启用时间")]),a("a-date-picker",{attrs:{value:e.moment(e.post.open_time,e.dateFormat)},on:{change:e.onChange}})],1)],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col"},[e._v("设备相关参数")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.param",{initialValue:e.post.param,rules:[{message:e.L("请输入设备相关参数！")}]}],expression:"['post.param',{ initialValue: post.param, rules: [{  message: L('请输入设备相关参数！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入设备相关参数"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col"},[e._v("备注")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.remark",{initialValue:e.post.remark,rules:[{message:e.L("请输入备注！")}]}],expression:"['post.remark',{ initialValue: post.remark, rules: [{  message: L('请输入备注！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入名称"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col"},[e._v("业主查看视频监控")]),a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.is_support_look",{initialValue:e.post.is_support_look}],expression:"['post.is_support_look',{ initialValue: post.is_support_look}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("不支持")]),a("a-radio",{attrs:{value:1}},[e._v("支持")])],1)],1)],1)],1)],1)],1)},i=[],r=a("a0e0"),o=a("c1df"),l=a.n(o),n={components:{},data:function(){return{title:"新建",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,post:{camera_id:0,camera_name:"",camera_sn:"",product_name:"",param:"",remark:"",is_support_look:1,open_time:""},brand_list:[],device_type_list:[],dateFormat:"YYYY-MM-DD",date:""}},mounted:function(){},methods:{moment:l.a,onChange:function(e,t){console.log(e,t),this.post.open_time=t},handleChange:function(e){this.post.brand_id=e},handleChange1:function(e){this.post.device_type=e},add:function(){this.post={camera_id:0,camera_name:"",camera_sn:"",product_name:"",param:"",remark:"",is_support_look:1,open_time:""},this.title="添加",this.visible=!0,this.get_brand_list(),this.get_device_type_list(),this.getCurrentTime()},edit:function(e){this.title="编辑",this.visible=!0,this.post.camera_id=e,this.getCameraInfo(e),this.get_brand_list(),this.get_device_type_list()},get_brand_list:function(){var e=this;this.request(r["a"].getBrandList).then((function(t){e.brand_list=t}))},get_device_type_list:function(){var e=this;this.request(r["a"].getDeviceTypeList).then((function(t){e.device_type_list=t}))},getCameraInfo:function(e){var t=this;this.request(r["a"].getCameraInfo,{camera_id:e}).then((function(e){t.post.camera_id=e.camera_id,t.post.camera_name=e.camera_name,t.post.camera_sn=e.camera_sn,t.post.device_type=e.device_type,t.post.brand_id=e.brand_id,t.post.product_model=e.product_model,t.post.remark=e.remark,t.post.param=e.param,t.post.is_support_look=e.is_support_look,t.post.open_time=e.open_time_txt}))},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){if(t)e.confirmLoading=!1;else{var s=r["a"].addCameraDevice;a.post.open_time=e.post.open_time,a.post.camera_id=e.post.camera_id,e.request(s,a.post).then((function(t){e.post.camera_id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,e.$emit("ok")}),1500)})).catch((function(t){e.confirmLoading=!1}))}}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.post.id=0,e.form=e.$form.createForm(e)}),500)},getCurrentTime:function(){var e=(new Date).getFullYear(),t=(new Date).getMonth()+1,a=(new Date).getDate();(new Date).getHours(),(new Date).getMinutes(),(new Date).getMinutes(),(new Date).getSeconds(),(new Date).getSeconds();this.post.open_time=e+"-"+t+"-"+a}}},c=n,p=(a("b293"),a("2877")),d=Object(p["a"])(c,s,i,!1,null,"0236ef5a",null);t["default"]=d.exports},"35ab":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-suggestions-box-1"},[a("div",{staticClass:"search-box"},[a("a-row",{attrs:{gutter:48}},[a("a-col",{staticClass:"padding-tp10",staticStyle:{"padding-left":"10px","padding-right":"1px",width:"250px"},attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("设备类型：")]),a("a-select",{staticStyle:{width:"150px"},attrs:{"default-value":"0",placeholder:"请选择设备类型"},model:{value:e.search.device_type,callback:function(t){e.$set(e.search,"device_type",t)},expression:"search.device_type"}},[a("a-select-option",{attrs:{value:"0"}},[e._v(" 全部 ")]),a("a-select-option",{attrs:{value:"1"}},[e._v(" 普通视频监控 ")]),a("a-select-option",{attrs:{value:"2"}},[e._v(" 高空抛物视频监控 ")])],1)],1),a("a-col",{staticClass:"padding-tp10",staticStyle:{width:"250px","padding-right":"1px"},attrs:{md:8,sm:24}},[a("a-input-group",{attrs:{compact:""}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("设备编号：")]),e._v(" "),a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入设备编号"},model:{value:e.search.camera_sn,callback:function(t){e.$set(e.search,"camera_sn",t)},expression:"search.camera_sn"}})],1)],1),a("a-col",{staticClass:"padding-tp10",staticStyle:{width:"250px","padding-right":"1px"},attrs:{md:8,sm:24}},[a("a-input-group",{attrs:{compact:""}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("设备名称：")]),e._v(" "),a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入设备名称"},model:{value:e.search.camera_name,callback:function(t){e.$set(e.search,"camera_name",t)},expression:"search.camera_name"}})],1)],1),a("a-col",{staticClass:"padding-tp10",staticStyle:{"padding-left":"1px","padding-right":"1px",width:"210px"},attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("设备状态：")]),a("a-select",{staticStyle:{width:"117px"},attrs:{"default-value":"0",placeholder:"请选择项目"},model:{value:e.search.is_online,callback:function(t){e.$set(e.search,"is_online",t)},expression:"search.is_online"}},[a("a-select-option",{attrs:{value:"0"}},[e._v(" 全部 ")]),a("a-select-option",{attrs:{value:"1"}},[e._v(" 在线 ")]),a("a-select-option",{attrs:{value:"2"}},[e._v(" 不在线 ")])],1)],1),a("a-col",{staticClass:"padding-tp10",staticStyle:{"padding-left":"0px","padding-right":"1px",width:"90px"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(t){return e.searchList()}}},[e._v(" 查询 ")])],1)],1)],1),a("div",{staticClass:"add-box",staticStyle:{display:"none"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:4,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.addCamera.add()}}},[e._v(" 添加视频监控设备 ")])],1)],1)],1),a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination,loading:e.loading},on:{change:e.table_change},scopedSlots:e._u([{key:"action",fn:function(t,s){return a("span",{},[a("a",{on:{click:function(t){return e.$refs.addCamera.edit(s.camera_id)}}},[e._v("修改设备")]),a("a-divider",{attrs:{type:"vertical"}}),s.videoPreviewUrl?a("a",{staticClass:"link",attrs:{href:s.videoPreviewUrl,target:"_blank"}},[e._v("预览")]):e._e()],1)}}])}),a("add-camera",{ref:"addCamera",on:{ok:e.getList}})],1)},i=[],r=(a("ac1f"),a("841c"),a("a0e0")),o=a("3386"),l=[{title:"设备编号",dataIndex:"camera_sn",key:"camera_sn"},{title:"设备名称",dataIndex:"camera_name",key:"camera_name"},{title:"设备位置",dataIndex:"address",key:"address"},{title:"设备品牌",dataIndex:"brand_name",key:"brand_name"},{title:"设备类型",dataIndex:"device_type",key:"device_type"},{title:"设备状态",dataIndex:"camera_status",key:"camera_status"},{title:"业主查看",dataIndex:"is_support_look_txt",key:"is_support_look_txt"},{title:"启用时间",dataIndex:"open_time_txt",key:"open_time_txt"},{title:"最后修改时间",dataIndex:"last_time_txt",key:"last_time_txt"},{title:"操作",key:"action",width:"300px",dataIndex:"",scopedSlots:{customRender:"action"}}],n=[],c={name:"cameraList",filters:{},components:{addCamera:o["default"]},data:function(){return{pagination:{pageSize:10,total:10,current:1},search:{camera_sn:"",camera_name:"",page:1},form:this.$form.createForm(this),visible:!1,loading:!1,data:n,columns:l,page:1}},mounted:function(){this.getList()},methods:{videoV2CamerasPreviewURLs:function(e){},getList:function(){var e=this;this.loading=!0,this.search["page"]=this.page,this.request(r["a"].getCameraList,this.search).then((function(t){e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data=t.list,e.loading=!1}))},del_camera:function(e){var t=this;this.request(r["a"].delCamera,{camera_id:e}).then((function(e){t.$message.success("删除成功"),t.getList()}))},table_change:function(e){e.current&&e.current>0&&(this.pagination.current=e.current,this.page=e.current,this.getList())},searchList:function(){console.log("search",this.search),this.page=1;var e={current:1,pageSize:10,total:10};console.log("searchList"),this.table_change(e)}}},p=c,d=(a("733f"),a("2877")),m=Object(d["a"])(p,s,i,!1,null,"7c16292d",null);t["default"]=m.exports},"733f":function(e,t,a){"use strict";a("cd31")},b293:function(e,t,a){"use strict";a("1495")},cd31:function(e,t,a){}}]);