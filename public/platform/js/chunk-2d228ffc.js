(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d228ffc"],{dc29:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticStyle:{"margin-top":"20px",padding:"20px","background-color":"#fff"}},[e("a-form-model",{attrs:{layout:"inline",model:t.searchForm}},[e("a-form-model-item",{attrs:{label:"活动名称"}},[e("a-input",{attrs:{placeholder:"关键词"},model:{value:t.searchForm.keyword,callback:function(i){t.$set(t.searchForm,"keyword",i)},expression:"searchForm.keyword"}})],1),e("a-form-model-item",[e("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(i){return t.submitForm(!0)}}},[t._v("搜索")]),e("a-button",{staticClass:"ml-20",on:{click:function(i){return t.resetForm()}}},[t._v("重置")]),e("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(i){return t.handleAdd()}}},[t._v("添加")])],1)],1),e("br"),e("a-table",{attrs:{rowKey:"pigcms_id",columns:t.columns,"data-source":t.datalist,pagination:t.pagination,bordered:""},scopedSlots:t._u([{key:"ewm",fn:function(i,n){return e("span",{},[e("a",{on:{click:function(){return t.showEwm(n.ewm,n.url)}}},[t._v("查看")])])}},{key:"action",fn:function(i,n){return e("span",{},[e("a",{on:{click:function(){return t.handleEdit(n.pigcms_id)}}},[t._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-popconfirm",{attrs:{title:"确认删除吗?","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(i){return t.handleDel(n.pigcms_id)}}},[e("a",[t._v("删除")])])],1)}}])}),"ActivityEdit"===t.currentBtn.props?e("ActivityEdit",{ref:"activityEdit",attrs:{visible:t.editVisible,title:t.currentBtn.title},on:{getDataList:t.getDataList,handleCancel:function(i){t.editVisible=!1}}}):t._e(),e("a-modal",{attrs:{title:"二维码",visible:t.ewmVisible,width:"350px"},on:{cancel:t.ewmCancel}},[e("template",{slot:"footer"},[e("a-button",{key:"back",on:{click:t.ewmCancel}},[t._v(" 关闭 ")])],1),e("img",{staticStyle:{width:"120px",height:"120px"},attrs:{src:t.ewm,alt:"image"}}),e("br"),t._v("链接："+t._s(t.ewmurl)+" ")],2)],1)},a=[],s=e("5530"),o=e("a91b"),r=e("148c"),c=[{title:"活动名称",dataIndex:"name",key:"name"},{title:"活动页二维码",scopedSlots:{customRender:"ewm"},key:"ewm"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],l={components:{ActivityEdit:o["default"]},data:function(){return{labelCol:{span:4},wrapperCol:{span:14},datalist:[],columns:c,editVisible:!1,ewmVisible:!1,ewm:"",ewmurl:"",currentBtn:{},searchForm:{keyword:""},pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(t){return"共 ".concat(t," 条记录")}}}},created:function(){this.getDataList(!1)},methods:{getDataList:function(t){var i=this,e=Object(s["a"])({},this.searchForm);!0===t?(e.page=1,this.$set(this.pagination,"current",1)):(e.page=this.pagination.current,this.$set(this.pagination,"current",this.pagination.current)),e.pageSize=this.pagination.pageSize,this.request(r["a"].getActivityList,e).then((function(t){i.datalist=t.data,i.$set(i.pagination,"total",t.total)}))},submitForm:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getDataList(t)},resetForm:function(){this.$set(this,"searchForm",{keyword:""}),this.$set(this.pagination,"current",1),this.getDataList()},onPageChange:function(t,i){this.$set(this.pagination,"current",t),this.submitForm()},onPageSizeChange:function(t,i){this.$set(this.pagination,"pageSize",i),this.submitForm()},handleEdit:function(t){var i=this;this.request(r["a"].getActivityEdit,{pigcms_id:t},"GET").then((function(t){t.status_bool=!!t.status,i.currentBtn={props:"ActivityEdit",title:"编辑活动",data:t},i.editVisible=!0,setTimeout((function(){i.$refs.activityEdit.setFormData(i.currentBtn.data)}),300)}))},handleAdd:function(){var t=this;this.currentBtn={props:"ActivityEdit",title:"添加活动",data:{name:"",pigcms_id:0,status_bool:!0}},this.editVisible=!0,setTimeout((function(){t.$refs.activityEdit.setFormData(t.currentBtn.data)}),300)},handleDel:function(t){var i=this;this.request(r["a"].delActivity,{pigcms_id:t},"GET").then((function(t){i.$message.success("操作成功!",1),setTimeout((function(){i.getDataList()}),1e3)}))},showEwm:function(t,i){this.ewm=t,this.ewmurl=i,this.ewmVisible=!0},ewmCancel:function(){this.ewmVisible=!1}}},u=l,d=e("2877"),m=Object(d["a"])(u,n,a,!1,null,null,null);i["default"]=m.exports}}]);