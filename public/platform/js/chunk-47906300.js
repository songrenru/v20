(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47906300","chunk-2d0b3786"],{1456:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[i("div",{staticStyle:{width:"80%","margin-left":"10%"}},[i("a-steps",{attrs:{current:t.currentStep}},[i("a-step",{attrs:{title:"基本信息"}}),i("a-step",{attrs:{title:"更多信息"}}),i("a-step",{attrs:{title:"商品详情"}})],1),i("div",{staticClass:"mt-50"},[i("a-form-model",t._b({ref:"form",attrs:{model:t.formData,rules:t.rules}},"a-form-model",{labelCol:{span:4},wrapperCol:{span:14}},!1),[i("a-card",{directives:[{name:"show",rawName:"v-show",value:0==t.currentStep,expression:"currentStep == 0"}],attrs:{title:"基本信息",bordered:!1}},[i("a-form-model-item",{attrs:{label:"商品名称",prop:"name",help:"商城商品数据来源于店铺商品库，请提前至综合店铺管理--商品库中进行管理商品。编辑商品时标题可改。"}},[i("a-row",{attrs:{gutter:8}},[i("a-col",{attrs:{span:14}},[i("a-input",{attrs:{disabled:!t.goods_id,placeholder:"请选择商品"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t.goods_id?t._e():i("a-col",{attrs:{span:8}},[t.goodsInfo?i("a-button",{attrs:{type:"dashed",icon:"plus"},on:{click:t.selectGoods}},[t._v(" 更换商品库商品 ")]):i("a-button",{attrs:{type:"dashed",icon:"plus"},on:{click:t.selectGoods}},[t._v(" 选择商品库商品 ")])],1)],1)],1),i("a-form-model-item",{attrs:{label:"平台分类",prop:"plat_sort"}},[i("a-cascader",{attrs:{"field-names":{label:"cat_name",value:"cat_id",children:"children"},options:t.platSortList,placeholder:"请选择平台分类",getPopupContainer:function(t){return t.parentNode}},model:{value:t.formData.plat_sort,callback:function(e){t.$set(t.formData,"plat_sort",e)},expression:"formData.plat_sort"}})],1),i("a-form-model-item",{attrs:{label:"商品分类",prop:"store_sort"}},[i("a-cascader",{attrs:{"field-names":{label:"name",value:"id",children:"children"},options:t.storeSortList,placeholder:"请选择商品分类",getPopupContainer:function(t){return t.parentNode}},model:{value:t.formData.store_sort,callback:function(e){t.$set(t.formData,"store_sort",e)},expression:"formData.store_sort"}})],1),i("a-form-model-item",{attrs:{label:"商品图片",prop:"goods_img"}},[t.formData.goods_img.length?t._l(t.formData.goods_img,(function(e,o){return i("div",{key:"img_"+o,staticClass:"goods-img"},[i("img",{attrs:{src:e}}),i("a-icon",{staticClass:"delete pointer",staticStyle:{"font-size":"16px",color:"red"},attrs:{type:"close-circle",theme:"filled"},on:{click:function(e){return t.removeImage("goods_img",o)}}})],1)})):t._e(),t.formData.goods_img.length<5?i("div",{staticClass:"b-f1 w-80 h-80 cr-99 flex ml-10 mr-10 align-center justify-around pointer br-5",on:{click:function(e){return t.chooseImage("goods_img")}}},[i("a-icon",{staticStyle:{"font-size":"32px"},attrs:{type:"plus"}})],1):t._e()],2),i("a-form-model-item",{attrs:{label:"商品视频",prop:"goods_video"}},[t.formData.goods_video.length?t._l(t.formData.goods_video,(function(e,o){return i("div",{key:"video_"+o,staticClass:"goods-img"},[i("video",{attrs:{src:e,poster:t.videoImage}}),i("a-icon",{staticClass:"delete pointer",staticStyle:{"font-size":"16px",color:"red"},attrs:{type:"close-circle",theme:"filled"},on:{click:function(e){return t.removeImage("goods_video",o)}}})],1)})):t._e(),t.formData.goods_video.length<1?i("div",{staticClass:"b-f1 w-80 h-80 cr-99 flex ml-10 mr-10 align-center justify-around pointer br-5",on:{click:function(e){return t.chooseImage("goods_video")}}},[i("a-icon",{staticStyle:{"font-size":"32px"},attrs:{type:"plus"}})],1):t._e()],2),0===t.formData.virtual_set?i("a-form-model-item",{attrs:{label:"虚拟销量",prop:"virtual_sales"}},[i("a-input-number",{staticStyle:{"margin-left":"20px","margin-right":"10px"},model:{value:t.formData.virtual_sales,callback:function(e){t.$set(t.formData,"virtual_sales",e)},expression:"formData.virtual_sales"}})],1):t._e(),1===t.formData.virtual_set?i("a-form-model-item",{attrs:{label:"虚拟销量",prop:"virtual_sales",help:"该商品虚拟销量只能平台设置，商家不可进行设置"}},[i("a-input-number",{staticStyle:{"margin-left":"20px","margin-right":"10px"},attrs:{disabled:!0},model:{value:t.formData.virtual_sales,callback:function(e){t.$set(t.formData,"virtual_sales",e)},expression:"formData.virtual_sales"}})],1):t._e(),i("a-form-model-item",{attrs:{label:"售卖库存",prop:"stock_type"}},[i("a-radio-group",{model:{value:t.formData.stock_type,callback:function(e){t.$set(t.formData,"stock_type",e)},expression:"formData.stock_type"}},[i("a-radio",{attrs:{value:1}},[t._v(" 独有库存 ")]),i("a-radio",{attrs:{value:2}},[t._v(" 继承商品库存 ")])],1)],1),t.goodsInfo||t.editInfo?[t.goodsInfo&&t.goodsInfo.has_spec||t.editInfo&&"sku"==t.editInfo.goods_type?[i("a-form-model-item",{attrs:{"wrapper-col":{span:22,offset:2}}},[i("a-table",{staticStyle:{"margin-left":"100px"},attrs:{columns:t.specColumns,"data-source":t.specList,rowKey:"index",pagination:t.stockPagination,bordered:""},on:{change:t.handleStockTableChange},scopedSlots:t._u([{key:"reg_img",fn:function(e){return(t.goodsInfo?e.image:e)?[i("img",{staticClass:"size-45",attrs:{src:t.goodsInfo?e.image:e}})]:void 0}},t._l(["price","stock_num"],(function(e){return{key:e,fn:function(o,n){return[i("div",{key:e},["stock_num"==e?i("a-input-number",{attrs:{min:-1,disabled:!t.specEditable,value:o},on:{change:function(i){return t.handleSpecChange(i,n,e)}}}):t._e(),"price"==e?i("a-input-number",{attrs:{formatter:function(t){return("￥ "+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(t){return t.replace(/\￥\s?|(,*)/g,"")},value:o},on:{change:function(i){return t.handleSpecChange(i,n,e)}}}):t._e()],1)]}}}))],null,!0)}),i("div",{staticClass:"mt-10 mb-10",staticStyle:{"margin-left":"100px"}},[i("a-input-number",{staticStyle:{width:"120px"},attrs:{min:-1,disabled:!t.specEditable,placeholder:"库存"},model:{value:t.allStock,callback:function(e){t.allStock=e},expression:"allStock"}}),i("a-button",{staticClass:"ml-10 mr-20",attrs:{disabled:!t.specEditable},on:{click:function(e){return t.batchSetGoodsSpec("stock")}}},[t._v("批量设置库存")]),i("a-input-number",{staticStyle:{width:"120px","margin-left":"20px"},attrs:{min:0,placeholder:"价格"},model:{value:t.allPrice,callback:function(e){t.allPrice=e},expression:"allPrice"}}),i("span",{staticClass:"ml-10"},[t._v("元")]),i("a-button",{staticClass:"ml-10",on:{click:function(e){return t.batchSetGoodsSpec("price")}}},[t._v("批量设置价格")])],1)],1)]:[i("a-form-model-item",{attrs:{label:"库存",prop:"stock_num",help:"-1代表库存无限量"}},[2==t.formData.stock_type?i("a-input-number",{attrs:{min:-1,disabled:!t.specEditable},model:{value:t.formData.common_stock_num,callback:function(e){t.$set(t.formData,"common_stock_num",e)},expression:"formData.common_stock_num"}}):t._e(),1==t.formData.stock_type?i("a-input-number",{attrs:{min:-1,disabled:!t.specEditable},model:{value:t.formData.stock_num,callback:function(e){t.$set(t.formData,"stock_num",e)},expression:"formData.stock_num"}}):t._e()],1),i("a-form-model-item",{attrs:{label:"价格",prop:"price"}},[i("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{formatter:function(t){return("￥ "+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(t){return t.replace(/\￥\s?|(,*)/g,"")},min:0},model:{value:t.formData.price,callback:function(e){t.$set(t.formData,"price",e)},expression:"formData.price"}})],1)]]:t._e(),i("a-form-model-item",{attrs:{label:"商品备注",help:"商品备注同商品库商品属性，方便用户选择商品备注"}},[t.propList.length?t._l(t.propList,(function(e){return i("div",{key:e.id,staticClass:"pb-10"},[i("div",{staticClass:"flex align-center"},[i("div",{staticClass:"w-100"},[t._v("属性名称:")]),i("div",{staticClass:"flex-1"},[t._v(t._s(e.name))])]),i("div",{staticClass:"flex align-center"},[i("div",{staticClass:"w-100"},[t._v("属性值:")]),i("div",{staticClass:"flex-1"},t._l(e.val,(function(e,o){return i("a-tag",{key:"val_"+o,attrs:{color:"green"}},[t._v(" "+t._s(e)+" ")])})),1)])])})):[t._v(" 无 ")]],2),t.platPropList.length?i("a-form-model-item",{attrs:{label:"平台分类属性",help:"方便用户进行筛选，快速找到该商品",prop:"cat_spec_val"}},t._l(t.platPropList,(function(e,o){return i("div",{key:e.cat_spec_id,staticClass:"inline-block ml-10"},[i("span",[t._v(t._s(e.cat_spec_name)+"：")]),i("a-select",{staticStyle:{width:"120px"},on:{change:function(i){return t.handlePlatPropChange(i,e,o)}}},t._l(e.property_list,(function(e){return i("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)})),0):t._e()],2),i("a-card",{directives:[{name:"show",rawName:"v-show",value:1==t.currentStep,expression:"currentStep == 1"}],attrs:{title:"更多信息",bordered:!1}},[i("a-form-model-item",{attrs:{label:"配送费用",prop:"free_shipping"}},[i("a-radio-group",{model:{value:t.formData.free_shipping,callback:function(e){t.$set(t.formData,"free_shipping",e)},expression:"formData.free_shipping"}},[i("a-radio",{attrs:{value:1}},[t._v(" 包邮 ")]),i("a-radio",{attrs:{value:0}},[t._v(" 不包邮 ")])],1)],1),t.showFreight?[i("a-form-model-item",{attrs:{label:"运费模板",prop:"fright_id"}},[i("a-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择运费模板"},model:{value:t.formData.fright_id,callback:function(e){t.$set(t.formData,"fright_id",e)},expression:"formData.fright_id"}},t._l(t.freightList,(function(e){return i("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1),i("span",{staticClass:"cr-primary ml-10 pointer",on:{click:function(e){return t.getFreightList(!0)}}},[t._v("刷新")]),i("span",{staticClass:"cr-primary ml-10 pointer",on:{click:t.addTemplate}},[t._v("新建")])],1),i("a-form-model-item",{attrs:{label:"其他区域运费",prop:"other_area_fright"}},[i("a-input-number",{attrs:{formatter:function(t){return("￥ "+t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(t){return t.replace(/\￥\s?|(,*)/g,"")},min:0},model:{value:t.formData.other_area_fright,callback:function(e){t.$set(t.formData,"other_area_fright",e)},expression:"formData.other_area_fright"}})],1)]:t._e(),i("a-form-model-item",{attrs:{label:"限购",prop:"is_restriction"}},[i("a-radio-group",{model:{value:t.formData.is_restriction,callback:function(e){t.$set(t.formData,"is_restriction",e)},expression:"formData.is_restriction"}},[i("a-radio",{attrs:{value:0}},[t._v(" 不限购 ")]),i("a-radio",{attrs:{value:1}},[t._v(" 限购 ")])],1)],1),1==t.formData.is_restriction?i("a-form-model-item",{attrs:{label:"限购类型",prop:"restriction_type"}},[i("a-radio-group",{model:{value:t.formData.restriction_type,callback:function(e){t.$set(t.formData,"restriction_type",e)},expression:"formData.restriction_type"}},[i("a-radio",{attrs:{value:1}},[t._v(" 终身限购 ")]),i("a-radio",{attrs:{value:2}},[t._v(" 按周期限购 ")])],1)],1):t._e(),2==t.formData.restriction_type&&1==t.formData.is_restriction?i("a-form-model-item",{attrs:{label:"限购周期",prop:"restriction_periodic"}},[i("a-select",{staticStyle:{width:"40%"},model:{value:t.formData.restriction_periodic,callback:function(e){t.$set(t.formData,"restriction_periodic",e)},expression:"formData.restriction_periodic"}},[i("a-select-option",{key:1},[t._v(" 每天 ")]),i("a-select-option",{key:2},[t._v(" 每周 ")]),i("a-select-option",{key:3},[t._v(" 每月 ")])],1),i("a-input-number",{staticStyle:{"margin-left":"20px","margin-right":"10px"},model:{value:t.formData.restriction_num,callback:function(e){t.$set(t.formData,"restriction_num",e)},expression:"formData.restriction_num"}}),t._v(" 件 ")],1):t._e(),1==t.formData.restriction_type&&1==t.formData.is_restriction?i("a-form-model-item",{attrs:{label:"限购数量",prop:"restriction_periodic"}},[i("a-input-number",{staticStyle:{"margin-left":"20px","margin-right":"10px"},model:{value:t.formData.restriction_num,callback:function(e){t.$set(t.formData,"restriction_num",e)},expression:"formData.restriction_num"}}),t._v(" 件 ")],1):t._e(),i("a-form-model-item",{attrs:{label:"起售",prop:"initial_salenum",help:"起售数量超出商品库存时，买家无法购买该商品"}},[t._v(" 商品至少 "),1==t.formData.is_restriction?i("a-input-number",{staticStyle:{"margin-left":"20px","margin-right":"10px"},attrs:{max:t.formData.restriction_num},model:{value:t.formData.initial_salenum,callback:function(e){t.$set(t.formData,"initial_salenum",e)},expression:"formData.initial_salenum"}}):i("a-input-number",{staticStyle:{"margin-left":"20px","margin-right":"10px"},model:{value:t.formData.initial_salenum,callback:function(e){t.$set(t.formData,"initial_salenum",e)},expression:"formData.initial_salenum"}}),t._v(" 件起售 ")],1),i("a-form-model-item",{attrs:{label:"留言",prop:"initial_salenum"}},[i("a-button",{on:{click:t.addRemark}},[t._v(" 新增 ")]),t._l(t.remarkList,(function(e,o){return i("div",{key:"remark_"+o},[i("a-input",{staticStyle:{width:"30%","margin-right":"10px"},attrs:{placeholder:"留言名称"},model:{value:e.message,callback:function(i){t.$set(e,"message",i)},expression:"item.message"}}),i("a-select",{staticStyle:{width:"30%","margin-right":"10px"},model:{value:e.type,callback:function(i){t.$set(e,"type",i)},expression:"item.type"}},[i("a-select-option",{key:1},[t._v(" 图片 ")]),i("a-select-option",{key:2},[t._v(" 文本 ")])],1),i("a-checkbox",{model:{value:e.is_must,callback:function(i){t.$set(e,"is_must",i)},expression:"item.is_must"}},[t._v(" 必填 ")]),i("span",{staticClass:"ml-20 cr-primary pointer",on:{click:function(e){return t.removeRemark(o)}}},[t._v("删除")])],1)}))],2),i("a-form-model-item",{attrs:{label:"服务保障",prop:"service_desc"}},[i("a-checkbox-group",{model:{value:t.formData.service_desc,callback:function(e){t.$set(t.formData,"service_desc",e)},expression:"formData.service_desc"}},t._l(t.serviceOptions,(function(e){return i("a-checkbox",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.value)+" ")])})),1)],1)],2),2==t.currentStep?i("a-card",{attrs:{bordered:!1}},[i("a-tabs",{attrs:{"default-active-key":"tuwen"}},[i("a-tab-pane",{key:"tuwen",attrs:{tab:"图文详情"}},[i("vue-ueditor-wrap",{attrs:{config:t.ueConfig},model:{value:t.formData.goods_desc,callback:function(e){t.$set(t.formData,"goods_desc",e)},expression:"formData.goods_desc"}})],1),i("a-tab-pane",{key:"guige",attrs:{tab:"规格详情"}},[i("vue-ueditor-wrap",{attrs:{config:t.ueConfig},model:{value:t.formData.spec_desc,callback:function(e){t.$set(t.formData,"spec_desc",e)},expression:"formData.spec_desc"}})],1),i("a-tab-pane",{key:"shouhou",attrs:{tab:"包装售后"}},[i("vue-ueditor-wrap",{attrs:{config:t.ueConfig},model:{value:t.formData.pack_desc,callback:function(e){t.$set(t.formData,"pack_desc",e)},expression:"formData.pack_desc"}})],1)],1)],1):t._e(),i("a-form-model-item",{attrs:{"wrapper-col":{span:16,offset:2}}},[i("div",{staticClass:"mt-20 mb-20"},[t.currentStep>0?i("a-button",{on:{click:t.lastStep}},[t._v(" 上一步 ")]):t._e(),t.currentStep<2?i("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:t.nextStep}},[t._v(" 下一步 ")]):t._e(),2==t.currentStep?i("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:t.submitForm}},[t._v(" 提交 ")]):t._e()],1)])],1)],1)],1),i("choose-image",{ref:"chooseImage",attrs:{name:t.uploadName,store_id:t.store_id,max:t.max,upload_dir:t.upload_dir,type:t.uploadType},on:{callback:t.uploadCallback}}),i("select-shop-goods",{attrs:{visible:t.selectGoodsVisible,storeId:t.store_id,source:"mall_goods",type:"radio"},on:{"update:visible":function(e){t.selectGoodsVisible=e},onSubmit:t.onGoodsSelect}})],1)},n=[],r=i("2909"),s=(i("b0c0"),i("d81d"),i("99af"),i("ac1f"),i("1276"),i("fb6a"),i("a434"),i("d3b7"),i("159b"),i("a15b"),i("4031")),a=i("6659"),c=i("37fd"),l=i("6cf3"),u=i("8c58"),d=i("6625"),f=i.n(d),p=[{title:"售价",dataIndex:"price",width:"150px",scopedSlots:{customRender:"price"}},{title:"库存",dataIndex:"stock_num",width:"150px",scopedSlots:{customRender:"stock_num"}},{title:"规格图片",dataIndex:"reg_img",width:"100px",scopedSlots:{customRender:"reg_img"}}],h="",m={name:"MallGoodsEdit",components:{SelectGoods:c["default"],ChooseImage:l["a"],SelectShopGoods:u["a"],VueUeditorWrap:f.a},data:function(){return{videoImage:"",store_id:h,currentStep:0,ueConfig:{enableAutoSave:!1,autoSyncData:!1,autoHeightEnabled:!1,initialFrameHeight:540,initialFrameWidth:"100%",serverUrl:"/v20/public/static/UEditor/php/controller.php",UEDITOR_HOME_URL:"/v20/public/static/UEditor/"},formData:{name:"",plat_sort:[],store_sort:[],goods_img:[],goods_video:[],stock_type:1,stock_num:-1,price:0,free_shipping:1,fright_id:"",other_area_fright:0,is_restriction:0,restriction_type:1,restriction_periodic:1,restriction_num:0,virtual_sales:0,virtual_set:0,initial_salenum:0,service_desc:[],goods_desc:"",spec_desc:"",pack_desc:"",cat_spec_val:[]},rules:{name:[{required:!0,message:"请选择商品",trigger:"change"}],plat_sort:[{required:!0,message:"请选择平台分类",trigger:"blur"}],store_sort:[{required:!0,message:"请选择商品分类",trigger:"blur"}],goods_img:[{required:!0,message:"请选择商品图片",trigger:"blur"}],price:[{required:!0,message:"请输入商品售价",trigger:"blur"}],fright_id:[{required:!0,message:"请选择运费模板",trigger:"blur"}],other_area_fright:[{required:!0,message:"请输入其他区域运费",trigger:"blur"}]},platSortList:[],storeSortList:[],upload_dir:"/mall/goods/images",uploadName:"goods_img",max:5,uploadType:"image",selectGoodsVisible:!1,goods_id:"",goodsInfo:null,isSku:!0,specColumns:p,oldSpecList:[],specList:[],specEditable:!0,allStock:-1,allPrice:0,propList:[],platPropList:[],platPropForm:{},freightList:[],showFreight:!1,serviceOptions:[],remarkList:[],editInfo:null,edit:!1,stockPagination:{}}},watch:{$route:function(t,e){var i=t.path,o=e.path;if("/merchant/merchant.mall/editGoods"==i){var n=t.query;n.store_id&&(this.store_id=n.store_id,this.init()),n.goods_id?(this.goods_id=n.goods_id,this.edit=!0,"/merchant/merchant.mall/goodsList"!=o&&"/merchant/merchant.mall/editGoods"!=o&&e||this.getFormData()):(this.resetForm(),this.edit=!1)}},"formData.stock_type":function(t){1==t?this.specEditable=!0:(this.specEditable=!1,this.setSpecList())},"formData.plat_sort":function(t){if(t.length){var e=t[t.length-1];this.getPlatPropList(e)}},"formData.free_shipping":function(t){1==t?this.showFreight=!1:(this.showFreight=!0,this.getFreightList())}},created:function(){this.init()},mounted:function(){this.$route.query.goods_id&&(this.goods_id=this.$route.query.goods_id,this.getFormData(),this.edit=!0)},methods:{init:function(){h=this.$route.query.store_id,this.store_id=h,this.upload_dir="/mall/goods/images_"+h,this.$set(this.stockPagination,"current",1),this.getPlatSort(),this.getStoreSort(),this.getServiceList()},resetForm:function(){Object.assign(this.$data,this.$options.data()),console.log("测试"),this.formData.goods_desc="",this.formData.spec_desc="",this.formData.pack_desc="",this.$forceUpdate()},getFormData:function(){var t=this;this.goods_id||(this.goods_id=this.$route.query.goods_id),this.request(s["a"].getGoodsInfo,{goods_id:this.goods_id}).then((function(e){console.log(e),t.editInfo=e,t.$nextTick((function(){var i=[];e.cate_first&&i.push(e.cate_first),e.cate_second&&i.push(e.cate_second),e.cate_three&&i.push(e.cate_three);var o=[];if(e.sort_first&&o.push(e.sort_first),e.sort_second&&o.push(e.sort_second),e.sort_third&&o.push(e.sort_third),t.$set(t,"formData",{name:e.name,plat_sort:i,store_sort:o,goods_img:e.images,goods_video:e.video_url?[e.video_url]:[],stock_type:e.stock_type,stock_num:e.stock_num,common_stock_num:e.common_stock_num,price:e.price,free_shipping:e.free_shipping,fright_id:e.fright_id||"",other_area_fright:e.other_area_fright,is_restriction:e.is_restriction,restriction_type:e.restriction_type,restriction_periodic:e.restriction_periodic,restriction_num:e.restriction_num,virtual_sales:e.virtual_sales,virtual_set:e.virtual_set,initial_salenum:e.initial_salenum,service_desc:e.service_desc?e.service_desc:[],goods_desc:e.goods_desc,spec_desc:e.spec_desc,pack_desc:e.pack_desc,cat_spec_val:e.cat_spec_val}),t.propList=e.notes,t.remarkList=e.leave_message?e.leave_message:[],e.spec_list&&e.spec_list.length){t.specColumns=p;var n=[];n=e.spec_list.map((function(t){return{title:t.name,dataIndex:"spec_val_sid_"+t.id}})),t.specColumns=[].concat(Object(r["a"])(n),Object(r["a"])(t.specColumns))}t.specList=e.list,t.oldSpecList=JSON.parse(JSON.stringify(t.specList)),t.$forceUpdate()}))}))},lastStep:function(){this.currentStep--},nextStep:function(){if(0==this.currentStep){if(!this.goodsInfo&&!this.goods_id)return this.$message.error("您还未选择商品库商品！"),!1;if(console.log(this.formData,this.specList,this.goodsInfo,this.editInfo),!this.formData.plat_sort||!this.formData.plat_sort.length)return this.$message.error("您还未选择平台分类！"),!1;if(!this.formData.store_sort||!this.formData.store_sort.length)return this.$message.error("您还未选择商品分类！"),!1;if(!this.formData.goods_img||!this.formData.goods_img.length)return this.$message.error("您还未选择商品图片！"),!1;this.currentStep++}else if(1==this.currentStep)if(0==this.formData.free_shipping){if(""==this.formData.fright_id)return this.$message.error("您还未选择运费模板！"),!1;if(""==this.formData.other_area_fright)return this.$message.error("您还未填写其他区域运费！"),!1;this.currentStep++}else this.currentStep++;else this.currentStep++},getPlatSort:function(){var t=this;this.request(s["a"].getPlatSort).then((function(e){t.platSortList=e.list}))},getStoreSort:function(){var t=this;this.request(s["a"].getStoreSort,{store_id:h,type:0}).then((function(e){t.storeSortList=e.list}))},chooseImage:function(t){var e="/mall/goods/images_";this.max=5,this.uploadType="image","goods_video"==t&&(e="/mall/goods/video_",this.uploadType="video",this.max=1),this.uploadName=t,this.upload_dir=e+h,this.$refs.chooseImage.openDialog()},uploadCallback:function(t){var e=this.max,i=t.name;if("goods_video"==i)this.videoImage=t.list[1],this.$set(this.formData,i,t.list[0].split()),this.$set(this.formData,"videos",t.list);else{var o=this.formData.goods_img.concat(t.list);this.$set(this.formData,i,o.slice(-e))}console.log(this.formData)},removeImage:function(t,e){this.formData[t].splice(e,1),this.$set(this.formData,t,this.formData[t])},selectGoods:function(){this.selectGoodsVisible=!0,this.specColumns=p},onGoodsSelect:function(t){var e=this;console.log(t),this.selectGoodsVisible=!1,this.allStock=-1,this.allPrice=0,t.ids&&this.request(a["a"].goodsDetail,{goods_id:t.ids}).then((function(t){if(console.log("111111------",t),e.goodsInfo=t,1==t.has_spec){if(e.isSku=!0,t.spec_list&&t.spec_list.length){var i=[];i=t.spec_list.map((function(t){return{title:t.name,dataIndex:"spec_val_sid_"+t.id,width:"120px"}})),e.specColumns=[].concat(Object(r["a"])(i),Object(r["a"])(e.specColumns))}t.list&&(e.specList=t.list,e.oldSpecList=JSON.parse(JSON.stringify(e.specList)))}else e.isSku=!1,e.$set(e.formData,"stock_num",t.stock_num),e.$set(e.formData,"common_stock_num",t.stock_num),e.$set(e.formData,"price",t.price),console.log(t.stock_num,e.formData);if(t.image){var o=t.image.split(";");e.$set(e.formData,"goods_img",o)}t.video_url&&e.$set(e.formData,"goods_video",[t.video_url]),e.$set(e.formData,"name",t.name),e.$set(e.formData,"goods_desc",t.des),t.properties_list&&(e.propList=t.properties_list)}))},handleSpecChange:function(t,e,i){var o=null,n=null;this.specList.forEach((function(t,i){(t.index&&t.index==e.index||t.sku_id&&t.sku_id==e.sku_id)&&(o=i,n=t)})),n[i]=t,this.specList[o]=n,console.log(this.specList)},batchSetGoodsSpec:function(t){var e=this;"price"==t?""===this.allPrice?this.$message.warning("请填写售价"):this.specList.forEach((function(t,i){t.price=e.allPrice})):""===this.allStock?this.$message.warning("请填写库存"):this.specList.forEach((function(t,i){t.stock_num=e.allStock})),this.$set(this,"specList",this.specList),this.$message.success("设置成功")},setSpecList:function(){for(var t in this.oldSpecList)this.oldSpecList[t].price=this.specList[t].price;this.specList=JSON.parse(JSON.stringify(this.oldSpecList))},getPlatPropList:function(t){var e=this;this.request(s["a"].getPlatProps,{cat_id:t}).then((function(t){e.platPropList=t}))},handlePlatPropChange:function(t,e,i){var o=!1;this.formData.cat_spec_val.length&&this.formData.cat_spec_val.forEach((function(i){i.cat_spec_id==e.cat_spec_id&&(i.id=t,o=!0)})),o||this.formData.cat_spec_val.push({cat_spec_id:e.cat_spec_id,id:t})},getFreightList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.request(s["a"].getFreightList).then((function(i){t.freightList=i.list,e&&t.$message.success("已重新获取运费模板~")}))},addRemark:function(){this.remarkList.push({message:"",type:1,is_must:!1})},removeRemark:function(t){this.remarkList.splice(t,1)},getServiceList:function(){var t=this;this.request(s["a"].getServiceList).then((function(e){t.serviceOptions=e}))},addTemplate:function(){this.$router.push("/merchant/merchant.mall/templateList")},submitForm:function(){var t=this;this.goodsInfo||this.goods_id?this.$refs.form.validate((function(e){if(!e)return console.log("error submit!!",t.formData),t.$message.error("您还有必填项没有填写！"),!1;console.log("submit!!",t.formData);var i=JSON.parse(JSON.stringify(t.formData));t.goods_id&&(i.goods_id=t.goods_id),i.store_id=h,console.log("this.goodsInfo---",t.goodsInfo),console.log("this.editInfo---",t.editInfo),t.goodsInfo?(i.common_goods_id=t.goodsInfo.goods_id,i.common_stock_num=t.goodsInfo.stock_num,i.notes=t.goodsInfo.properties_list,i.unit=t.goodsInfo.unit,i.spec_list=t.goodsInfo.spec_list):t.editInfo&&(i.common_goods_id=t.editInfo.common_goods_id,i.common_stock_num=t.editInfo.common_stock_num,i.notes=t.editInfo.notes,i.unit=t.editInfo.unit,i.spec_list=t.editInfo.spec_list),i.images=i.goods_img.map((function(t){var e=t.split("/upload");return"/upload"+e[1]})),i.image=i.images[0],delete i.goods_img,i.video_url=i.goods_video.join(","),delete i.goods_video,i.plat_sort.forEach((function(t,e){0==e?i.cate_first=t:1==e?i.cate_second=t:i.cate_three=t})),i.cat_id=i.plat_sort[i.plat_sort.length-1],delete i.plat_sort,i.store_sort.forEach((function(t,e){0==e?i.sort_first=t:1==e?i.sort_second=t:i.sort_third=t})),i.sort_id=i.store_sort[i.store_sort.length-1],delete i.store_sort,i.leave_message=t.remarkList;var o=[];i.cat_spec_val.length&&i.cat_spec_val.forEach((function(t){o.push(t.cat_spec_id+":"+t.id)})),i.cat_spec_val=o.join("|"),i.list=t.specList,console.log("----------要提交的表单",i),2==t.formData.stock_type&&(i.store_num=i.common_stock_num),i.goods_desc?t.request(s["a"].updateGoods,i).then((function(e){t.$message.success("提交成功"),t.resetForm();var i="/merchant/merchant.mall/goodsList";t.$router.push({path:i,query:{store_id:t.store_id}}),sessionStorage.setItem("goodsEdit",1),t.currentStep=0})):t.$message.error("图文详情必填")})):this.$message.error("您还未选择商品库商品！")},clearUeditor:function(){$EDITORUI["edui51"]._onClick()},handleStockTableChange:function(t){this.$set(this,"stockPagination",t)}}},_=m,g=(i("6834"),i("0c7c")),v=Object(g["a"])(_,o,n,!1,null,"16e27996",null);e["default"]=v.exports},2909:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var o=i("6b75");function n(t){if(Array.isArray(t))return Object(o["a"])(t)}i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var s=i("06c5");function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return n(t)||r(t)||Object(s["a"])(t)||a()}},"2e5d":function(t,e,i){},6625:function(t,e,i){!function(e,i){t.exports=i()}("undefined"!=typeof self&&self,(function(){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=40)}([function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){var o=i(28)("wks"),n=i(29),r=i(0).Symbol,s="function"==typeof r;(t.exports=function(t){return o[t]||(o[t]=s&&r[t]||(s?r:n)("Symbol."+t))}).store=o},function(t,e){var i=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=i)},function(t,e,i){var o=i(7);t.exports=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){var o=i(0),n=i(2),r=i(11),s=i(5),a=i(9),c=function(t,e,i){var l,u,d,f=t&c.F,p=t&c.G,h=t&c.S,m=t&c.P,_=t&c.B,g=t&c.W,v=p?n:n[e]||(n[e]={}),b=v.prototype,y=p?o:h?o[e]:(o[e]||{}).prototype;for(l in p&&(i=e),i)(u=!f&&y&&void 0!==y[l])&&a(v,l)||(d=u?y[l]:i[l],v[l]=p&&"function"!=typeof y[l]?i[l]:_&&u?r(d,o):g&&y[l]==d?function(t){var e=function(e,i,o){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,o)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(d):m&&"function"==typeof d?r(Function.call,d):d,m&&((v.virtual||(v.virtual={}))[l]=d,t&c.R&&b&&!b[l]&&s(b,l,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,i){var o=i(13),n=i(31);t.exports=i(6)?function(t,e,i){return o.f(t,e,n(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){t.exports=!i(14)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports={}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){var o=i(12);t.exports=function(t,e,i){if(o(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,o){return t.call(e,i,o)};case 3:return function(i,o,n){return t.call(e,i,o,n)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var o=i(3),n=i(50),r=i(51),s=Object.defineProperty;e.f=i(6)?Object.defineProperty:function(t,e,i){if(o(t),e=r(e,!0),o(i),n)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){var o=i(16);t.exports=function(t){return Object(o(t))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){var o=i(46),n=i(30);t.exports=Object.keys||function(t){return o(t,n)}},function(t,e,i){var o=i(26),n=i(16);t.exports=function(t){return o(n(t))}},function(t,e){var i=Math.ceil,o=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?o:i)(t)}},function(t,e,i){var o=i(28)("keys"),n=i(29);t.exports=function(t){return o[t]||(o[t]=n(t))}},function(t,e){t.exports=!0},function(t,e,i){var o=i(7),n=i(0).document,r=o(n)&&o(n.createElement);t.exports=function(t){return r?n.createElement(t):{}}},function(t,e,i){var o=i(13).f,n=i(9),r=i(1)("toStringTag");t.exports=function(t,e,i){t&&!n(t=i?t:t.prototype,r)&&o(t,r,{configurable:!0,value:e})}},function(t,e,i){"use strict";var o=i(12);t.exports.f=function(t){return new function(t){var e,i;this.promise=new t((function(t,o){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=o})),this.resolve=o(e),this.reject=o(i)}(t)}},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=u(i(43)),n=u(i(32)),r=u(i(79)),s=u(i(86)),a=u(i(87)),c=u(i(88)),l=u(i(89));function u(t){return t&&t.__esModule?t:{default:t}}var d="UN_READY",f="PENDING",p="READY";e.default={name:"VueUeditorWrap",data:function(){return{status:d,defaultConfig:{UEDITOR_HOME_URL:void 0!==t&&t.env.BASE_URL?t.env.BASE_URL+"UEditor/":"/static/UEditor/"}}},props:{mode:{type:String,default:"observer",validator:function(t){return-1!==["observer","listener"].indexOf(t)}},value:{type:String,default:""},config:{type:Object,default:function(){return{}}},init:{type:Function,default:function(){}},destroy:{type:Boolean,default:!0},name:{type:String,default:""},observerDebounceTime:{type:Number,default:50,validator:function(t){return t>=20}},observerOptions:{type:Object,default:function(){return{attributes:!0,attributeFilter:["src","style","type","name"],characterData:!0,childList:!0,subtree:!0}}},forceInit:{type:Boolean,default:!1},editorId:{type:String},editorDependencies:Array,editorDependenciesChecker:Function},computed:{mixedConfig:function(){return(0,r.default)({},this.defaultConfig,this.config)}},methods:{registerButton:function(t){var e=t.name,i=t.icon,o=t.tip,n=t.handler,r=t.index,s=t.UE,a=void 0===s?window.UE:s;a.registerUI(e,(function(t,e){t.registerCommand(e,{execCommand:function(){n(t,e)}});var r=new a.ui.Button({name:e,title:o,cssRules:"background-image: url("+i+") !important;background-size: cover;",onclick:function(){t.execCommand(e)}});return t.addListener("selectionchange",(function(){var i=t.queryCommandState(e);-1===i?(r.setDisabled(!0),r.setChecked(!1)):(r.setDisabled(!1),r.setChecked(i))})),r}),r,this.id)},_initEditor:function(){var t=this;this.$refs.container.id=this.id=this.editorId||"editor_"+(0,l.default)(8),this.init(),this.$emit("before-init",this.id,this.mixedConfig),this.$emit("beforeInit",this.id,this.mixedConfig),this.editor=window.UE.getEditor(this.id,this.mixedConfig),this.editor.addListener("ready",(function(){t.status===p?t.editor.setContent(t.value):(t.status=p,t.$emit("ready",t.editor),t.value&&t.editor.setContent(t.value)),"observer"===t.mode&&window.MutationObserver?t._observerChangeListener():t._normalChangeListener()}))},_loadScript:function(t){return new n.default((function(e,i){if(window.$loadEventBus.on(t,e),!1===window.$loadEventBus.listeners[t].requested){window.$loadEventBus.listeners[t].requested=!0;var o=document.createElement("script");o.src=t,o.onload=function(){window.$loadEventBus.emit(t)},o.onerror=i,document.getElementsByTagName("head")[0].appendChild(o)}}))},_loadCss:function(t){return new n.default((function(e,i){if(window.$loadEventBus.on(t,e),!1===window.$loadEventBus.listeners[t].requested){window.$loadEventBus.listeners[t].requested=!0;var o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.href=t,o.onload=function(){window.$loadEventBus.emit(t)},o.onerror=i,document.getElementsByTagName("head")[0].appendChild(o)}}))},_loadEditorDependencies:function(){var t=this;window.$loadEventBus||(window.$loadEventBus=new s.default);var e=["ueditor.config.js","ueditor.all.min.js"];return new n.default((function(i,r){if(t.editorDependencies&&t.editorDependenciesChecker&&t.editorDependenciesChecker())i();else if(!t.editorDependencies&&window.UE&&window.UE.getEditor&&window.UEDITOR_CONFIG&&0!==(0,o.default)(window.UEDITOR_CONFIG).length)i();else{var s=(t.editorDependencies||e).reduce((function(e,i){return/^((https?:)?\/\/)?[-a-zA-Z0-9]+(\.[-a-zA-Z0-9]+)+\//.test(i)||(i=(t.mixedConfig.UEDITOR_HOME_URL||"")+i),".js"===i.slice(-3)?e.jsLinks.push(i):".css"===i.slice(-4)&&e.cssLinks.push(i),e}),{jsLinks:[],cssLinks:[]}),a=s.jsLinks,l=s.cssLinks;n.default.all([n.default.all(l.map((function(e){return t._loadCss(e)}))),(0,c.default)(a.map((function(e){return function(){return t._loadScript(e)}})))]).then((function(){return i()})).catch(r)}}))},_contentChangeHandler:function(){this.innerValue=this.editor.getContent(),this.$emit("input",this.innerValue)},_normalChangeListener:function(){this.editor.addListener("contentChange",this._contentChangeHandler)},_observerChangeListener:function(){var t=this;this.observer=new MutationObserver((0,a.default)((function(){t.editor.document.getElementById("baidu_pastebin")||(t.innerValue=t.editor.getContent(),t.$emit("input",t.innerValue))}),this.observerDebounceTime)),this.observer.observe(this.editor.body,this.observerOptions)}},deactivated:function(){this.editor&&this.editor.removeListener("contentChange",this._contentChangeHandler),this.observer&&this.observer.disconnect()},beforeDestroy:function(){this.destroy&&this.editor&&this.editor.destroy&&this.editor.destroy(),this.observer&&this.observer.disconnect&&this.observer.disconnect()},watch:{value:{handler:function(t){var e=this;this.status===d?(this.status=f,(this.forceInit||"undefined"!=typeof window)&&this._loadEditorDependencies().then((function(){e.$refs.container?e._initEditor():e.$nextTick((function(){return e._initEditor()}))})).catch((function(){throw new Error("[vue-ueditor-wrap] UEditor 资源加载失败！请检查资源是否存在，UEDITOR_HOME_URL 是否配置正确！")}))):this.status===p&&(t===this.innerValue||this.editor.setContent(t||""))},immediate:!0}}}}).call(e,i(42))},function(t,e,i){var o=i(10);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==o(t)?t.split(""):Object(t)}},function(t,e,i){var o=i(19),n=Math.min;t.exports=function(t){return t>0?n(o(t),9007199254740991):0}},function(t,e,i){var o=i(2),n=i(0),r=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:o.version,mode:i(21)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){var i=0,o=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+o).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){t.exports={default:i(52),__esModule:!0}},function(t,e,i){"use strict";var o=i(21),n=i(4),r=i(56),s=i(5),a=i(8),c=i(57),l=i(23),u=i(60),d=i(1)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,i,h,m,_,g){c(i,e,h);var v,b,y,k=function(t){if(!f&&t in D)return D[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},x=e+" Iterator",S="values"==m,w=!1,D=t.prototype,L=D[d]||D["@@iterator"]||m&&D[m],C=L||k(m),I=m?S?k("entries"):C:void 0,E="Array"==e&&D.entries||L;if(E&&(y=u(E.call(new t)))!==Object.prototype&&y.next&&(l(y,x,!0),o||"function"==typeof y[d]||s(y,d,p)),S&&L&&"values"!==L.name&&(w=!0,C=function(){return L.call(this)}),o&&!g||!f&&!w&&D[d]||s(D,d,C),a[e]=C,a[x]=p,m)if(v={values:S?C:k("values"),keys:_?C:k("keys"),entries:I},g)for(b in v)b in D||r(D,b,v[b]);else n(n.P+n.F*(f||w),e,v);return v}},function(t,e,i){var o=i(0).document;t.exports=o&&o.documentElement},function(t,e,i){var o=i(10),n=i(1)("toStringTag"),r="Arguments"==o(function(){return arguments}());t.exports=function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),n))?i:r?o(e):"Object"==(s=o(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,i){var o=i(3),n=i(12),r=i(1)("species");t.exports=function(t,e){var i,s=o(t).constructor;return void 0===s||void 0==(i=o(s)[r])?e:n(i)}},function(t,e,i){var o,n,r,s=i(11),a=i(71),c=i(34),l=i(22),u=i(0),d=u.process,f=u.setImmediate,p=u.clearImmediate,h=u.MessageChannel,m=u.Dispatch,_=0,g={},v=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},b=function(t){v.call(t.data)};f&&p||(f=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return g[++_]=function(){a("function"==typeof t?t:Function(t),e)},o(_),_},p=function(t){delete g[t]},"process"==i(10)(d)?o=function(t){d.nextTick(s(v,t,1))}:m&&m.now?o=function(t){m.now(s(v,t,1))}:h?(r=(n=new h).port2,n.port1.onmessage=b,o=s(r.postMessage,r,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(o=function(t){u.postMessage(t+"","*")},u.addEventListener("message",b,!1)):o="onreadystatechange"in l("script")?function(t){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),v.call(t)}}:function(t){setTimeout(s(v,t,1),0)}),t.exports={set:f,clear:p}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){var o=i(3),n=i(7),r=i(24);t.exports=function(t,e){if(o(t),n(e)&&e.constructor===t)return e;var i=r.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(25),n=i.n(o);for(var r in o)"default"!==r&&function(t){i.d(e,t,(function(){return o[t]}))}(r);var s=i(90),a=i(41)(n.a,s.a,!1,null,null,null);a.options.__file="src/components/vue-ueditor-wrap.vue",e.default=a.exports},function(t,e){t.exports=function(t,e,i,o,n,r){var s,a=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(s=t,a=t.default);var l,u="function"==typeof a?a.options:a;if(e&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0),i&&(u.functional=!0),n&&(u._scopeId=n),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=l):o&&(l=o),l){var d=u.functional,f=d?u.render:u.beforeCreate;d?(u._injectStyles=l,u.render=function(t,e){return l.call(e),f(t,e)}):u.beforeCreate=f?[].concat(f,l):[l]}return{esModule:s,exports:a,options:u}}},function(t,e){var i,o,n=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(t){o=s}}();var c,l=[],u=!1,d=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&p())}function p(){if(!u){var t=a(f);u=!0;for(var e=l.length;e;){for(c=l,l=[];++d<e;)c&&c[d].run();d=-1,e=l.length}c=null,u=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function m(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new h(t,e)),1!==l.length||u||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,i){t.exports={default:i(44),__esModule:!0}},function(t,e,i){i(45),t.exports=i(2).Object.keys},function(t,e,i){var o=i(15),n=i(17);i(49)("keys",(function(){return function(t){return n(o(t))}}))},function(t,e,i){var o=i(9),n=i(18),r=i(47)(!1),s=i(20)("IE_PROTO");t.exports=function(t,e){var i,a=n(t),c=0,l=[];for(i in a)i!=s&&o(a,i)&&l.push(i);for(;e.length>c;)o(a,i=e[c++])&&(~r(l,i)||l.push(i));return l}},function(t,e,i){var o=i(18),n=i(27),r=i(48);t.exports=function(t){return function(e,i,s){var a,c=o(e),l=n(c.length),u=r(s,l);if(t&&i!=i){for(;l>u;)if((a=c[u++])!=a)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===i)return t||u||0;return!t&&-1}}},function(t,e,i){var o=i(19),n=Math.max,r=Math.min;t.exports=function(t,e){return(t=o(t))<0?n(t+e,0):r(t,e)}},function(t,e,i){var o=i(4),n=i(2),r=i(14);t.exports=function(t,e){var i=(n.Object||{})[t]||Object[t],s={};s[t]=e(i),o(o.S+o.F*r((function(){i(1)})),"Object",s)}},function(t,e,i){t.exports=!i(6)&&!i(14)((function(){return 7!=Object.defineProperty(i(22)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,i){var o=i(7);t.exports=function(t,e){if(!o(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!o(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!o(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!o(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){i(53),i(54),i(61),i(65),i(77),i(78),t.exports=i(2).Promise},function(t,e){},function(t,e,i){"use strict";var o=i(55)(!0);i(33)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=o(e,i),this._i+=t.length,{value:t,done:!1})}))},function(t,e,i){var o=i(19),n=i(16);t.exports=function(t){return function(e,i){var r,s,a=String(n(e)),c=o(i),l=a.length;return c<0||c>=l?t?"":void 0:(r=a.charCodeAt(c))<55296||r>56319||c+1===l||(s=a.charCodeAt(c+1))<56320||s>57343?t?a.charAt(c):r:t?a.slice(c,c+2):s-56320+(r-55296<<10)+65536}}},function(t,e,i){t.exports=i(5)},function(t,e,i){"use strict";var o=i(58),n=i(31),r=i(23),s={};i(5)(s,i(1)("iterator"),(function(){return this})),t.exports=function(t,e,i){t.prototype=o(s,{next:n(1,i)}),r(t,e+" Iterator")}},function(t,e,i){var o=i(3),n=i(59),r=i(30),s=i(20)("IE_PROTO"),a=function(){},c=function(){var t,e=i(22)("iframe"),o=r.length;for(e.style.display="none",i(34).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;o--;)delete c.prototype[r[o]];return c()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=o(t),i=new a,a.prototype=null,i[s]=t):i=c(),void 0===e?i:n(i,e)}},function(t,e,i){var o=i(13),n=i(3),r=i(17);t.exports=i(6)?Object.defineProperties:function(t,e){n(t);for(var i,s=r(e),a=s.length,c=0;a>c;)o.f(t,i=s[c++],e[i]);return t}},function(t,e,i){var o=i(9),n=i(15),r=i(20)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=n(t),o(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,i){i(62);for(var o=i(0),n=i(5),r=i(8),s=i(1)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var l=a[c],u=o[l],d=u&&u.prototype;d&&!d[s]&&n(d,s,l),r[l]=r.Array}},function(t,e,i){"use strict";var o=i(63),n=i(64),r=i(8),s=i(18);t.exports=i(33)(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,n(1)):n(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values"),r.Arguments=r.Array,o("keys"),o("values"),o("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){"use strict";var o,n,r,s,a=i(21),c=i(0),l=i(11),u=i(35),d=i(4),f=i(7),p=i(12),h=i(66),m=i(67),_=i(36),g=i(37).set,v=i(72)(),b=i(24),y=i(38),k=i(73),x=i(39),S=c.TypeError,w=c.process,D=w&&w.versions,L=D&&D.v8||"",C=c.Promise,I="process"==u(w),E=function(){},O=n=b.f,A=!!function(){try{var t=C.resolve(1),e=(t.constructor={})[i(1)("species")]=function(t){t(E,E)};return(I||"function"==typeof PromiseRejectionEvent)&&t.then(E)instanceof e&&0!==L.indexOf("6.6")&&-1===k.indexOf("Chrome/66")}catch(t){}}(),P=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},j=function(t,e){if(!t._n){t._n=!0;var i=t._c;v((function(){for(var o=t._v,n=1==t._s,r=0,s=function(e){var i,r,s,a=n?e.ok:e.fail,c=e.resolve,l=e.reject,u=e.domain;try{a?(n||(2==t._h&&$(t),t._h=1),!0===a?i=o:(u&&u.enter(),i=a(o),u&&(u.exit(),s=!0)),i===e.promise?l(S("Promise-chain cycle")):(r=P(i))?r.call(i,c,l):c(i)):l(o)}catch(t){u&&!s&&u.exit(),l(t)}};i.length>r;)s(i[r++]);t._c=[],t._n=!1,e&&!t._h&&T(t)}))}},T=function(t){g.call(c,(function(){var e,i,o,n=t._v,r=R(t);if(r&&(e=y((function(){I?w.emit("unhandledRejection",n,t):(i=c.onunhandledrejection)?i({promise:t,reason:n}):(o=c.console)&&o.error&&o.error("Unhandled promise rejection",n)})),t._h=I||R(t)?2:1),t._a=void 0,r&&e.e)throw e.v}))},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},$=function(t){g.call(c,(function(){var e;I?w.emit("rejectionHandled",t):(e=c.onrejectionhandled)&&e({promise:t,reason:t._v})}))},M=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),j(e,!0))},U=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw S("Promise can't be resolved itself");(e=P(t))?v((function(){var o={_w:i,_d:!1};try{e.call(t,l(U,o,1),l(M,o,1))}catch(t){M.call(o,t)}})):(i._v=t,i._s=1,j(i,!1))}catch(t){M.call({_w:i,_d:!1},t)}}};A||(C=function(t){h(this,C,"Promise","_h"),p(t),o.call(this);try{t(l(U,this,1),l(M,this,1))}catch(t){M.call(this,t)}},(o=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(74)(C.prototype,{then:function(t,e){var i=O(_(this,C));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=I?w.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&j(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new o;this.promise=t,this.resolve=l(U,t,1),this.reject=l(M,t,1)},b.f=O=function(t){return t===C||t===s?new r(t):n(t)}),d(d.G+d.W+d.F*!A,{Promise:C}),i(23)(C,"Promise"),i(75)("Promise"),s=i(2).Promise,d(d.S+d.F*!A,"Promise",{reject:function(t){var e=O(this);return(0,e.reject)(t),e.promise}}),d(d.S+d.F*(a||!A),"Promise",{resolve:function(t){return x(a&&this===s?C:this,t)}}),d(d.S+d.F*!(A&&i(76)((function(t){C.all(t).catch(E)}))),"Promise",{all:function(t){var e=this,i=O(e),o=i.resolve,n=i.reject,r=y((function(){var i=[],r=0,s=1;m(t,!1,(function(t){var a=r++,c=!1;i.push(void 0),s++,e.resolve(t).then((function(t){c||(c=!0,i[a]=t,--s||o(i))}),n)})),--s||o(i)}));return r.e&&n(r.v),i.promise},race:function(t){var e=this,i=O(e),o=i.reject,n=y((function(){m(t,!1,(function(t){e.resolve(t).then(i.resolve,o)}))}));return n.e&&o(n.v),i.promise}})},function(t,e){t.exports=function(t,e,i,o){if(!(t instanceof e)||void 0!==o&&o in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var o=i(11),n=i(68),r=i(69),s=i(3),a=i(27),c=i(70),l={},u={};(e=t.exports=function(t,e,i,d,f){var p,h,m,_,g=f?function(){return t}:c(t),v=o(i,d,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(r(g)){for(p=a(t.length);p>b;b++)if((_=e?v(s(h=t[b])[0],h[1]):v(t[b]))===l||_===u)return _}else for(m=g.call(t);!(h=m.next()).done;)if((_=n(m,v,h.value,e))===l||_===u)return _}).BREAK=l,e.RETURN=u},function(t,e,i){var o=i(3);t.exports=function(t,e,i,n){try{return n?e(o(i)[0],i[1]):e(i)}catch(e){var r=t.return;throw void 0!==r&&o(r.call(t)),e}}},function(t,e,i){var o=i(8),n=i(1)("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||r[n]===t)}},function(t,e,i){var o=i(35),n=i(1)("iterator"),r=i(8);t.exports=i(2).getIteratorMethod=function(t){if(void 0!=t)return t[n]||t["@@iterator"]||r[o(t)]}},function(t,e){t.exports=function(t,e,i){var o=void 0===i;switch(e.length){case 0:return o?t():t.call(i);case 1:return o?t(e[0]):t.call(i,e[0]);case 2:return o?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return o?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return o?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){var o=i(0),n=i(37).set,r=o.MutationObserver||o.WebKitMutationObserver,s=o.process,a=o.Promise,c="process"==i(10)(s);t.exports=function(){var t,e,i,l=function(){var o,n;for(c&&(o=s.domain)&&o.exit();t;){n=t.fn,t=t.next;try{n()}catch(o){throw t?i():e=void 0,o}}e=void 0,o&&o.enter()};if(c)i=function(){s.nextTick(l)};else if(!r||o.navigator&&o.navigator.standalone)if(a&&a.resolve){var u=a.resolve(void 0);i=function(){u.then(l)}}else i=function(){n.call(o,l)};else{var d=!0,f=document.createTextNode("");new r(l).observe(f,{characterData:!0}),i=function(){f.data=d=!d}}return function(o){var n={fn:o,next:void 0};e&&(e.next=n),t||(t=n,i()),e=n}}},function(t,e,i){var o=i(0).navigator;t.exports=o&&o.userAgent||""},function(t,e,i){var o=i(5);t.exports=function(t,e,i){for(var n in e)i&&t[n]?t[n]=e[n]:o(t,n,e[n]);return t}},function(t,e,i){"use strict";var o=i(0),n=i(2),r=i(13),s=i(6),a=i(1)("species");t.exports=function(t){var e="function"==typeof n[t]?n[t]:o[t];s&&e&&!e[a]&&r.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,i){var o=i(1)("iterator"),n=!1;try{var r=[7][o]();r.return=function(){n=!0},Array.from(r,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!n)return!1;var i=!1;try{var r=[7],s=r[o]();s.next=function(){return{done:i=!0}},r[o]=function(){return s},t(r)}catch(t){}return i}},function(t,e,i){"use strict";var o=i(4),n=i(2),r=i(0),s=i(36),a=i(39);o(o.P+o.R,"Promise",{finally:function(t){var e=s(this,n.Promise||r.Promise),i="function"==typeof t;return this.then(i?function(i){return a(e,t()).then((function(){return i}))}:t,i?function(i){return a(e,t()).then((function(){throw i}))}:t)}})},function(t,e,i){"use strict";var o=i(4),n=i(24),r=i(38);o(o.S,"Promise",{try:function(t){var e=n.f(this),i=r(t);return(i.e?e.reject:e.resolve)(i.v),e.promise}})},function(t,e,i){"use strict";e.__esModule=!0;var o,n=i(80),r=(o=n)&&o.__esModule?o:{default:o};e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t}},function(t,e,i){t.exports={default:i(81),__esModule:!0}},function(t,e,i){i(82),t.exports=i(2).Object.assign},function(t,e,i){var o=i(4);o(o.S+o.F,"Object",{assign:i(83)})},function(t,e,i){"use strict";var o=i(6),n=i(17),r=i(84),s=i(85),a=i(15),c=i(26),l=Object.assign;t.exports=!l||i(14)((function(){var t={},e={},i=Symbol(),o="abcdefghijklmnopqrst";return t[i]=7,o.split("").forEach((function(t){e[t]=t})),7!=l({},t)[i]||Object.keys(l({},e)).join("")!=o}))?function(t,e){for(var i=a(t),l=arguments.length,u=1,d=r.f,f=s.f;l>u;)for(var p,h=c(arguments[u++]),m=d?n(h).concat(d(h)):n(h),_=m.length,g=0;_>g;)p=m[g++],o&&!f.call(h,p)||(i[p]=h[p]);return i}:l},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.listeners={},this.on=function(t,e){void 0===this.listeners[t]&&(this.listeners[t]={triggered:!1,requested:!1,cbs:[]}),this.listeners[t].triggered&&e(),this.listeners[t].cbs.push(e)},this.emit=function(t){this.listeners[t]&&(this.listeners[t].triggered=!0,this.listeners[t].cbs.forEach((function(t){return t()})))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=null;return function(){var o=this,n=arguments;i&&clearTimeout(i),i=setTimeout((function(){t.apply(o,n)}),e)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,n=i(32),r=(o=n)&&o.__esModule?o:{default:o};e.default=function(t){return t.reduce((function(t,e){return t.then(e)}),r.default.resolve())}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e="abcdefghijklmnopqrstuvwxyz",i="",o=0;o<t;o++)i+=e.charAt(Math.floor(Math.random()*e.length));return i}},function(t,e,i){"use strict";var o=function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"container",attrs:{name:this.name}})])};o._withStripped=!0;var n={render:o,staticRenderFns:[]};e.a=n}]).default}))},6659:function(t,e,i){"use strict";var o={goodsDetail:"/shop/merchant.goods/goodsDetail",goodsList:"/shop/merchant.goods/goodsLibraryList",sortList:"/shop/merchant.sort/sortList"};e["a"]=o},6834:function(t,e,i){"use strict";i("de5d")},"6a7f":function(t,e,i){"use strict";i("d7b1")},"6cf3":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a-modal",{staticClass:"dialog",attrs:{title:"请选择素材",width:"800px",centered:"",visible:t.visible,destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[o("a-tabs",{attrs:{type:"card",defaultActiveKey:"1"},on:{change:t.onTabChange}},[o("a-tab-pane",{key:"1",attrs:{tab:"从素材库选择"}},[o("div",{staticClass:"content scroll_content1"},[t.imageList.length?t._l(t.imageList,(function(e,n){return o("div",{key:"img_"+n,staticClass:"img-list",style:e.selected?"border: 1px solid rgb(24,144,255)":"",on:{click:function(i){return t.chooseImage(e,n)}}},["image"==t.type?o("img",{staticClass:"goods-img",attrs:{src:e.img}}):t._e(),"video"==t.type?o("video",{staticClass:"goods-img",attrs:{src:e.img.url,poster:e.img.image}}):t._e(),o("img",{directives:[{name:"show",rawName:"v-show",value:e.selected,expression:"item.selected"}],staticClass:"selected",attrs:{src:i("c660")}})])})):[o("div",{staticClass:"no-data"},[t._v("暂无素材")])]],2)]),o("a-tab-pane",{key:"2",attrs:{tab:"上传新素材"}},[o("div",{staticClass:"content scroll_content"},[t.checkedList.length<this.max?[o("a-upload",{attrs:{action:t.action,name:t.uploadName,data:{upload_dir:t.upload_dir,store_id:t.store_id},"list-type":"picture-card","file-list":t.uploadList,multiple:t.multiple,showUploadList:t.showUploadList,accept:t.accept,"before-upload":t.beforeUpload},on:{change:t.handleUploadChange}},[t.showUpload?o("div",[o("a-icon",{staticStyle:{"font-size":"32px",color:"#999"},attrs:{type:t.loading?"loading":"plus"}})],1):t._e()])]:[o("div",{staticClass:"no-data"},[t._v("您最多可选择"+t._s(t.max)+"个"+t._s(t.typeTxt))])]],2)])],1)],1)},n=[],r=i("2909"),s=(i("a9e3"),i("d81d"),i("d3b7"),i("159b"),i("b0c0"),i("fb6a"),i("a434"),i("3ca3"),i("ddb0"),i("4031")),a={name:"ChooseImage",props:{name:{type:String,default:""},max:{type:Number,default:0},upload_dir:{type:String,default:""},store_id:{type:[String,Number],default:""},type:{type:String,default:"image"}},data:function(){return{visible:!1,uploadList:[],imageList:[],checkedList:[],typeTxt:"图片",action:"/v20/public/index.php/common/common.UploadFile/uploadPictures",uploadName:"reply_pic",showUploadList:!0,loading:!1}},computed:{showUpload:function(){return 0==this.max||this.uploadList.length+this.checkedList.length<this.max||!this.showUploadList},multiple:function(){return 1!=this.max&&this.checkedList.length!=this.max-1},accept:function(){return"image"==this.type?"image/*":"video/*"}},watch:{type:function(){this.initData()}},mounted:function(){var t=this;this.$nextTick((function(){t.initData()}))},methods:{initData:function(){this.typeTxt="image"==this.type?"图片":"视频",this.action="image"==this.type?"/v20/public/index.php/common/common.UploadFile/uploadPictures":"/v20/public/index.php/common/common.UploadFile/uploadVideo",this.uploadName="image"==this.type?"reply_pic":"reply_mv",this.showUploadList="image"==this.type},openDialog:function(){this.visible=!0,this.init()},getImageList:function(){var t=this,e={type:this.type,dir:this.upload_dir};""!=this.store_id&&(e.store_id=this.store_id),this.request(s["a"].getUploadImages,e).then((function(e){e.length&&(t.imageList=e.map((function(e){return"image"==t.type?{img:e,selected:!1}:{img:{url:e.url,image:e.image,vtime:e.vtime},selected:!1}})))}))},init:function(){var t=this;this.$set(this,"uploadList",[]),this.$set(this,"checkedList",[]),this.$set(this,"imageList",[]),this.$nextTick((function(){t.getImageList()}))},handleOk:function(){var t=this;console.log(this.checkedList);var e=[],i=location.origin;this.checkedList.length&&("image"==this.type?e=Object(r["a"])(this.checkedList):(e.push(this.checkedList[0].url),e.push(this.checkedList[0].image),e.push(this.checkedList[0].vtime))),this.uploadList.length&&this.showUploadList&&this.uploadList.forEach((function(o){o.response&&o.response.data&&("image"==t.type?e.push(i+o.response.data):"video"==t.type&&(e.push(i+o.response.data.url),e.push(o.response.data.image),e.push(o.response.data.vtime)))})),console.log(111111111,e),0!=e.length?(this.$emit("callback",{list:e,name:this.name}),this.handleCancel()):this.$message.error("至少得选择一个素材")},handleCancel:function(){this.visible=!1},onTabChange:function(t){},handleUploadChange:function(t){var e=t.file,i=t.fileList;console.log("----------file",e),console.log("----------fileList",i);var o=e.status,n=e.response;if("uploading"==o&&(this.loading=!0),"done"===o){if(1e3==n.status){var s=this.max-this.checkedList.length;i=i.slice(-s),"video"==this.type&&(this.showUploadList={showPreviewIcon:!1,showRemoveIcon:!0})}else n.msg&&this.$message.error(n.msg),"video"==this.type&&(this.showUploadList=!1);this.loading=!1}"error"==o&&(this.loading=!1,this.$message.error("上传失败")),this.uploadList=Object(r["a"])(i)},chooseImage:function(t,e){if(t.selected){for(var i in t.selected=!1,this.$set(this.imageList,e,t),this.checkedList)if(this.checkedList[i]==t.img)return void this.checkedList.splice(i,1)}else this.checkedList.length==this.max-this.uploadList.length?this.$message.warning("您最多可选择（包含上传）"+this.max+"个"+this.typeTxt):(t.selected=!0,this.checkedList.push(t.img),this.$set(this.imageList,e,t))},beforeUpload:function(t){return Promise.all([this.checkType(t)])},checkType:function(t){var e=this;return new Promise((function(i,o){-1==t.type.indexOf(e.type)?(e.$message.error(e.L("image"==e.type?"您上传的图片文件格式不正确！请重新选择":"您上传的视频文件格式不正确！请重新选择")),o()):(console.log("类型正确"),i())}))}}};var c=a,l=(i("b196"),i("0c7c")),u=Object(l["a"])(c,o,n,!1,null,"7619522d",null);e["a"]=u.exports},"8c58":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{staticClass:"dialog",attrs:{title:"选择商品",width:"800",centered:"",visible:t.dialogVisible,destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[i("div",{staticClass:"select-goods"},[i("div",{staticClass:"left scrollbar"},[i("a-menu",{attrs:{mode:"inline","open-keys":t.openKeys,selectedKeys:t.selectedSort},on:{openChange:t.onOpenChange,select:t.onSelect}},[t._l(t.sortList,(function(e){return[e.son_list&&e.son_list.length?i("a-sub-menu",{key:e.sort_id},[i("span",{attrs:{slot:"title"},slot:"title"},[i("span",[t._v(t._s(e.sort_name))])]),e.son_list&&e.son_list.length?[t._l(e.son_list,(function(e){return[e.son_list&&e.son_list.length?[i("a-sub-menu",{key:e.sort_id,attrs:{title:e.sort_name}},t._l(e.son_list,(function(e){return i("a-menu-item",{key:e.sort_id},[t._v(t._s(e.sort_name))])})),1)]:[i("a-menu-item",{key:e.sort_id},[t._v(t._s(e.sort_name))])]]}))]:t._e()],2):i("a-menu-item",{key:e.sort_id},[t._v(t._s(e.sort_name))])]}))],2)],1),i("div",{staticClass:"right"},[i("div",{staticClass:"top"},[i("a-input-search",{staticClass:"search",attrs:{placeholder:t.L("商品名称")},on:{change:t.onSearchChange,search:t.onSearch},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}})],1),i("div",{staticClass:"bottom"},[i("a-table",{attrs:{"row-selection":t.rowSelection,columns:t.columns,"data-source":t.tableList,rowKey:"goods_id",scroll:{y:500},pagination:!!t.tableList.length},scopedSlots:t._u([{key:"name",fn:function(e,o){return i("span",{},[i("div",{staticClass:"product-info"},[i("div",[i("img",{attrs:{src:o.image_url}})]),i("div",[t._v(t._s(e))])])])}},{key:"price",fn:function(e,o){return i("span",{},[i("span",[t._v(t._s(e))]),i("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s("1"==o.has_spec?"（"+t.L("多规格")+"）":""))])])}},{key:"selected",fn:function(e){return i("span",{},["1"==e?i("span",{staticClass:"cr-blue"},[t._v(t._s(t.L("已添加过")))]):t._e()])}}])})],1)])])])},n=[],r=(i("a9e3"),i("d3b7"),i("159b"),i("4de4"),i("99af"),i("25f0"),i("7db0"),i("6659")),s={name:"SelectShopGoods",props:{visible:{type:Boolean,default:!1},storeId:{type:[String,Number],default:"0"},source:{type:String,default:"foodshop_goods_library"},type:{type:String,default:"checkbox"}},data:function(){return{dialogVisible:!1,rootSubmenuKeys:[],openKeys:[],columns:[{title:"商品",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"价格",dataIndex:"price",scopedSlots:{customRender:"price"}},{title:"",dataIndex:"selected",width:100,scopedSlots:{customRender:"selected"}}],menuId:0,hasSelected:[],selectedRowKeys:[],selectedSort:[],sortList:[],keywords:"",tableList:[],oldMenuId:""}},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,type:this.type,onChange:this.onChange,getCheckboxProps:function(t){return{props:{disabled:"1"==t.selected}}}}}},watch:{visible:function(t,e){this.dialogVisible=t,t&&(this.init(),this.getSortList())}},mounted:function(){this.dialogVisible=this.visible},methods:{init:function(){this.rootSubmenuKeys=[],this.openKeys=[],this.selectedSort=[],this.tableList=[],this.keywords="",this.currentPage=1},getSortList:function(){var t=this;this.request(r["a"].sortList,{store_id:this.storeId}).then((function(e){t.sortList=e,t.sortList.length&&t.handleDefaultSelect()}))},handleDefaultSelect:function(){var t=this;this.init(),this.sortList.forEach((function(e,i){if(t.rootSubmenuKeys.push(e.sort_id),e.son_list&&e.son_list.length){0==i&&t.openKeys.push(e.sort_id);var o=e.son_list;o.forEach((function(e,o){if(e.son_list&&e.son_list.length){0==o&&t.openKeys.push(e.sort_id);var n=e.son_list;n.forEach((function(e,n){0==i&&0==o&&0==n&&(t.menuId=e.sort_id)}))}else 0==i&&0==o&&(t.menuId=e.sort_id)}))}else 0==i&&(t.menuId=e.sort_id)})),this.selectedSort.push(this.menuId),this.getGoodsList()},onSelect:function(t){var e=t.key;this.selectedSort=[e],this.menuId=e,this.currentPage=1,this.getGoodsList()},getGoodsList:function(){var t=this;this.tableList=[];var e={store_id:this.storeId,name:this.keywords,source:this.source};this.menuId&&(e.sort_id=this.menuId),this.request(r["a"].goodsList,e).then((function(e){t.tableList=e.list,t.tableList.length&&t.handleList()}))},handleList:function(){var t=this;this.hasSelected=[],"checkbox"==this.type&&(this.tableList.forEach((function(e){e.selected&&t.hasSelected.push(e.goods_id)})),this.selectedRowKeys=this.hasSelected)},handleOk:function(){var t=this.selectedRowKeys,e=this.hasSelected,i=[];t.length&&(i=t.concat(e).filter((function(t,e,i){return i.indexOf(t)===i.lastIndexOf(t)}))),i.length?(this.$emit("onSubmit",{ids:i.toString()}),this.init()):this.$message.warning(this.L("请先选择商品哦~"))},handleCancel:function(){this.init(),this.dialogVisible=!1,this.$emit("update:visible",this.dialogVisible)},onOpenChange:function(t){var e=this,i=t.find((function(t){return-1===e.openKeys.indexOf(t)}));-1===this.rootSubmenuKeys.indexOf(i)?this.openKeys=t:this.openKeys.push(i)},onSearch:function(t){this.menuId&&(this.oldMenuId=this.menuId),this.menuId="",this.openKeys=[],this.selectedSort=[],this.getGoodsList()},onSearchChange:function(t){this.keywords||!this.oldMenuId?this.onSearch(this.keywords):(this.menuId=this.oldMenuId,this.selectedSort=[this.menuId])},onChange:function(t){this.selectedRowKeys=t}}},a=s,c=(i("6a7f"),i("0c7c")),l=Object(c["a"])(a,o,n,!1,null,"31f19d46",null);e["a"]=l.exports},b196:function(t,e,i){"use strict";i("2e5d")},c660:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjkxMTg5NkE3M0VBMTExRUI4NUFDODgzODc3Q0QyMDMwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjkxMTg5NkE4M0VBMTExRUI4NUFDODgzODc3Q0QyMDMwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTExODk2QTUzRUExMTFFQjg1QUM4ODM4NzdDRDIwMzAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTExODk2QTYzRUExMTFFQjg1QUM4ODM4NzdDRDIwMzAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5BTNpWAAAEdklEQVR42uybXUgUURTH7272EIXSU4Gt4ENFBUmkD0X0Ke2mCEJpPQRFSgXRh0JFVGRRvRQqRi+ZYB9UJhRpDxqaJlJRD0Fg9VLBbg9G9JAEQkH1P+tZma6zu7PNx96Z6cDhjuPsnfv7zz33a+YGhAM2t/n3WiQheAGn2mOyGDzK6eTx6KHAoN1lC9gEXIgkAg/DN8Bn/WNW3+H98F54DwT5qKwAgM5FUs/Aq2x6YMMsSCPEGFNGAMDXIKmDLxHO2Ai8CSK0ZVUAgIcZPCyyY70sRK+jAgB8BpJL8BqhhlFN2A8hxm0XAPDz+IYbhVr2iB4IRPhkmwCAX8o3miPUtM/0YCDCa8sFADy17n3CHVYKEfqNXBg0CN/gIniyPi6z+RrAXdxV4U6rTddVBgx0cz3C3RZJ1U0GUsAvRvIMnutyAWjEuAIivDHcBvCwtt0D8IIZ2pnJcCPYCC8R3rESZkofAh6Je8PtgV4NqBPetbqUIcBdXtjDAoSZcWoIcCPx1MEpbbaMptIrE+sJ2hpQ7wN4wYx1eiGwWvjH1vwVAqj+tDgZdUnhv8A74bTuuMlEPgUIg1hQVkRxe0VlRcH3wctwXG22FiQEiLgA/jl8C8Dfas6Nm8gvohWgQnH4QfhmwH9InFjR+mMakr0m8owzB/ilxYDC8DQq3Q74r5ouOw/JLXiZybzXUQ0IKQz/AF4lwecj6bIAnixEAhQoCt9ROPMnxfx3DfxChreqyy7IUbQGXAP4ztG/h+nLudovsPA+IRVD4ArBS3OUNRwOCyy+lyUhcJtaaPhRHmebsRbA75Hgyxk+3waxLQmBbhT6Hhe2i6vpsn/I5wLyOSLBb0VyE55jU20LBS3IZHJgAoB31GrDX2SYx1kdeJq23rERfnIyFDOZxxntHwB5zyIMG/z9CfzmpAR/UDizFB+fC5idBFWgwHclEaIsQroB1mFce06CP46k2aEGN2pFDSCr0hFhlEVItiZ/ANdclODPUzg42OPErBIgmQhfecb2ULp2N/53SYJvQXLM4S7XkhBIJ8IYi3CfT+3AuVYJPv5+PwtjjqiVNSCVCOMswjYcX0+cn3/513Rc24HDXVkadMUSK0LfhPVvgToBm3TBAvecjeQGvDxL8GMoX15iHNBtww2m1AQNfIhDIlvwk8xBzZxbOCEC/l6EhEaO2V6GizMnRllPbLxRlfSxwilFJl1xZu2Lkce0QiL8YQOI//XaECAbEv6xIe1cIGGNFkxn3WAjQvOqPCgNWJp8IECT9jtjve8DqHX06hviXsBH5OnwFIW8/PT11gOENGyl2VubB+Hb9L4WS7YiRK/KX3oI/iUzTbH/n8kl+xX/oNoDT786GXxKATTtQa2L4WvTbaZIuyrM39o2uBD+tJEtNf8/lzeaI2dYJCY2JahqVLYio/AZCcAi0E6MYjGxa0Q1ozIVZ7JbJGMBWATak1Op2GCJylKZ6X6hjNqAJO2CP7fN6Qjhz42Tkgi5LEKp8NvWWR0x/Ld5Oo0ga4Wi2+f/CDAAp9WWHrao0YwAAAAASUVORK5CYII="},d7b1:function(t,e,i){},de5d:function(t,e,i){}}]);