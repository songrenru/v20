(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fadb66a","chunk-492a980f","chunk-c8685130","chunk-6e0113ff"],{"0d6c":function(t,e,a){"use strict";a.r(e);a("b0c0");var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ant-pro-page-header-wrap-children-content",staticStyle:{margin:"24px 0 0"}},[[e("div",{staticClass:"mb-10"},[e("a-form",{attrs:{layout:"inline"}},[e("div",{staticClass:"flex search-content"},[e("div",{staticClass:"right flex"},[e("div",[e("a-form-item",{attrs:{label:"店铺名称"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"全部店铺"},model:{value:t.queryParam.store_id,callback:function(e){t.$set(t.queryParam,"store_id",e)},expression:"queryParam.store_id"}},[e("a-select-option",{attrs:{value:"0"}},[t._v("全部店铺")]),t._l(t.store_data,(function(a){return e("a-select-option",{key:a.store_id},[t._v(" "+t._s(a.name)+" ")])}))],2)],1)],1),e("div",[e("a-form-item",{attrs:{label:"首页展示"}},[e("a-select",{staticStyle:{width:"120px"},attrs:{placeholder:"是否首页展示"},model:{value:t.queryParam.index_show,callback:function(e){t.$set(t.queryParam,"index_show",e)},expression:"queryParam.index_show"}},[e("a-select-option",{attrs:{value:"-1"}},[t._v(" 全部 ")]),e("a-select-option",{attrs:{value:"1"}},[t._v(" 是 ")]),e("a-select-option",{attrs:{value:"0"}},[t._v(" 否 ")])],1)],1)],1),e("div",[e("a-form-item",[e("a-input-search",{staticStyle:{width:"200px"},attrs:{placeholder:"输入检索关键词"},model:{value:t.queryParam.keyword,callback:function(e){t.$set(t.queryParam,"keyword",e)},expression:"queryParam.keyword"}})],1)],1),e("div",[e("a-button",{staticStyle:{"margin-right":"15px"},on:{click:function(e){return t.searchBtn()}}},[t._v("查询")]),e("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.addLabelModal.add_label()}}},[t._v("设置标签")])],1)])])])],1)],e("a-card",{attrs:{bordered:!1}},[e("div",{staticClass:"message-suggestions-list-box"},[e("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination,rowKey:"id",loading:t.loading},on:{change:t.tableChange},scopedSlots:t._u([{key:"index_show",fn:function(a,i){return e("span",{},[e("span",1==a?[t._v("是")]:[t._v("否")])])}},{key:"reply_count",fn:function(a,i){return e("span",{},[e("a",{on:{click:function(e){return t.$refs.askDetailModal.detail(i.fid>0?i.fid:i.id)}}},[t._v(t._s(a))])])}},{key:"action",fn:function(a,i){return e("span",{},[e("a",{on:{click:function(e){return t.$refs.addLabelToAskModal.add_label(i.id,i.label_id)}}},[t._v("关联标签")]),e("a-divider",{attrs:{type:"vertical"}}),1==i.index_show?e("a",{on:{click:function(e){return t.setIndexShow(i.id,0)}}},[t._v("取消首页展示")]):e("a",{on:{click:function(e){return t.setIndexShow(i.id,1)}}},[t._v("展示到首页")])],1)}}])})],1),e("add-label",{ref:"addLabelModal",on:{refreshLists:t.initList}}),e("add-label-to-ask",{ref:"addLabelToAskModal",on:{refreshLists:t.initList}}),e("ask-detail",{ref:"askDetailModal"})],1)],2)},s=[],n=a("5530"),l=(a("d81d"),a("f91a")),r=a("57cd"),o=a("75f5"),c=a("d778"),d=[],u={name:"askLists",components:{AskDetail:c["default"],AddLabelToAsk:o["default"],AddLabel:r["default"]},data:function(){return this.cacheData=d.map((function(t){return Object(n["a"])({},t)})),{form:this.$form.createForm(this),mdl:{},selectStoreVisible:!1,loading:!0,id:1,store_data:[],search_data:[],queryParam:{index_show:"-1",store_id:"0",keyword:"",page_size:10},pagination:{current:1,page_size:10,total:10,"show-total":function(t){return"共 ".concat(t," 条记录")}},columns:[{title:"问题",width:200,dataIndex:"content"},{title:"回答数",width:10,dataIndex:"reply_count",scopedSlots:{customRender:"reply_count"}},{title:"查看数",width:10,dataIndex:"view_count"},{title:"提问时间",width:10,dataIndex:"create_date"},{title:"店铺名称",width:20,dataIndex:"store_name"},{title:"关联标签",width:10,dataIndex:"label_name"},{title:"是否首页展示",width:10,dataIndex:"index_show",scopedSlots:{customRender:"index_show"}},{title:"操作",dataIndex:"action",width:100,scopedSlots:{customRender:"action"}}],data:d}},watch:{$route:function(){this.initList()}},mounted:function(){this.initList()},methods:{setIndexShow:function(t,e){var a=this;this.request(l["a"].setIndexShow,{id:t,index_show:e}).then((function(t){a.$message.success(a.L("设置成功")),a.getLists()}))},searchBtn:function(){this.page=1,this.pagination.current=this.page,this.getLists()},initList:function(){this.getStoreLists(),this.getLists()},getStoreLists:function(){var t=this;this.request(l["a"].storeLists,this.queryParam).then((function(e){t.store_data=e}))},getLists:function(){var t=this;this.queryParam["page"]=this.page,this.loading=!0,this.request(l["a"].askLists,this.queryParam).then((function(e){t.loading=!1,t.data=e.list,t.pagination.total=e.total}))},tableChange:function(t){this.queryParam["page_size"]=t.pageSize,t.current&&t.current>0&&(this.pagination.current=t.current,this.page=t.current,this.getLists())}}},h=u,f=(a("3374"),a("2877")),m=Object(f["a"])(h,i,s,!1,null,"e16c5610",null);e["default"]=m.exports},1678:function(t,e,a){},"2de7":function(t,e,a){"use strict";a("ec090")},3374:function(t,e,a){"use strict";a("3aae")},"3aae":function(t,e,a){},"57cd":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.title,width:600,visible:t.visible},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[e("p",[t._v("您最多可添加10个标签（限填5个字）")]),e("a-form",{attrs:{form:t.form}},[t._l(t.form.getFieldValue("keys"),(function(a,i){return e("a-form-item",t._b({key:a,staticStyle:{"margin-bottom":"0px"},attrs:{required:!1}},"a-form-item",t.formItemLayout,!1),[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["names[".concat(a,"]"),{initialValue:t.label_nams[a],validateTrigger:["change","blur"],rules:[{required:!0,whitespace:!0,message:"请填写标签"}]}],expression:"[\n      `names[${k}]`,\n      {\n        initialValue:label_nams[k],\n        validateTrigger: ['change', 'blur'],\n        rules: [\n          {\n            required: true,\n            whitespace: true,\n            message: '请填写标签',\n          },\n        ],\n      },\n    ]"}],staticStyle:{width:"60%","margin-right":"8px"},attrs:{placeholder:""}}),t.form.getFieldValue("keys").length>1?e("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o",disabled:1===t.form.getFieldValue("keys").length},on:{click:function(){return t.remove(a)}}}):t._e()],1)})),e("a-form-item",t._b({},"a-form-item",t.formItemLayout,!1),[t.form.getFieldValue("keys").length<=9?e("a-button",{staticStyle:{width:"60%",color:"#1890ff",border:"1px solid #1890ff"},attrs:{type:"solid"},on:{click:t.add}},[e("a-icon",{attrs:{type:"plus"}}),t._v(" 新增 ")],1):t._e()],1)],2)],1)},s=[],n=(a("4de4"),a("d3b7"),a("99af"),a("ddb0"),a("f91a")),l=0,r={data:function(){return{title:"标签设置",visible:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:10},sm:{span:10}}},label_nams:[]}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"add_label"}),this.form.getFieldDecorator("keys",{initialValue:[],preserve:!0})},methods:{get_label:function(){var t=this;this.request(n["a"].getLabels,{}).then((function(e){l=e.length;for(var a=[],i=0;i<l;i++)a.push(i),t.label_nams.push(e[i]["label_name"]);var s=t.form;s.setFieldsValue({keys:a})}))},add_label:function(){this.visible=!0,this.get_label()},handleCancel:function(){this.visible=!1},remove:function(t){var e=this.form,a=e.getFieldValue("keys");1!==a.length&&e.setFieldsValue({keys:a.filter((function(e){return e!==t}))})},add:function(){var t=this.form,e=t.getFieldValue("keys"),a=e.concat(l++);console.log(a),t.setFieldsValue({keys:a})},handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,a){if(!t){a.keys;var i=a.names;console.log(a),e.request(n["a"].saveLabels,{label_names:i}).then((function(t){e.visible=!1,e.$message.success(e.L("设置成功")),e.$emit("refreshLists",{})}))}}))}}},o=r,c=(a("2de7"),a("2877")),d=Object(c["a"])(o,i,s,!1,null,null,null);e["default"]=d.exports},"75f5":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.title,width:600,visible:t.visible},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[e("a-form",[e("a-radio-group",{on:{change:t.onChange},model:{value:t.checked_label_id,callback:function(e){t.checked_label_id=e},expression:"checked_label_id"}},[e("a-row",[e("a-radio",{key:"0",attrs:{value:0}},[t._v(" 不选择标签 ")]),t._l(t.labels,(function(a){return e("a-radio",{key:a.label_id,attrs:{value:a.label_id}},[t._v(" "+t._s(a.label_name)+" ")])}))],2)],1)],1)],1)},s=[],n=a("f91a"),l={name:"addLabelToAsk",data:function(){return{title:"选择标签",visible:!1,id:0,label_id:0,checked_label_id:0,labels:[]}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"add_label_to_ask"})},methods:{onChange:function(t){this.label_id=t.target.value},add_label:function(t,e){this.visible=!0,this.id=t,this.checked_label_id=e,this.get_label()},get_label:function(){var t=this;this.request(n["a"].getLabels,{}).then((function(e){t.labels=e}))},handleCancel:function(){this.visible=!1},handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,a){t||e.request(n["a"].saveAskLabel,{id:e.id,label_id:e.label_id}).then((function(t){e.visible=!1,e.$message.success(e.L("设置成功")),e.$emit("refreshLists",{})}))}))}}},r=l,o=a("2877"),c=Object(o["a"])(r,i,s,!1,null,"6128dd4a",null);e["default"]=c.exports},7989:function(t,e,a){"use strict";a("1678")},d778:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.title,width:600,visible:t.visible,footer:""},on:{cancel:t.handleCancel}},t._l(t.records,(function(a){return e("div",{key:a.id,staticClass:"main"},[e("div",{staticClass:"font_bold",staticStyle:{"flex-basis":"30px"}},[1==a.is_ask?e("span",{staticClass:"red"},[t._v("问")]):e("span",{staticClass:"blue"},[t._v("答")])]),e("div",{staticStyle:{"flex-grow":"10",display:"flex"}},[e("div",{staticStyle:{"flex-basis":"50px"}},[e("img",{staticClass:"avatar",attrs:{src:a.avatar}})]),e("div",{staticStyle:{"flex-grow":"10"}},[e("div",{staticClass:"font_bold div-margin"},[t._v(t._s(a.nickname))]),e("div",{staticClass:"div-margin"},[t._v(t._s(a.create_time))]),e("div",{staticClass:"div-margin"},[t._v(t._s(a.content))]),e("div",{staticClass:"div-margin"},t._l(a.images,(function(t){return e("a-popover",{attrs:{placement:"right"}},[e("template",{slot:"content"},[e("img",{staticClass:"goods-image-big",attrs:{src:t}})]),e("img",{staticClass:"goods-image",attrs:{src:t}})],2)})),1)])])])})),0)},s=[],n=a("f91a"),l={name:"askDetail",data:function(){return{title:"详情",visible:!1,records:[]}},methods:{detail:function(t){var e=this;this.visible=!0,this.request(n["a"].askDetail,{id:t}).then((function(t){e.records=t}))},handleCancel:function(){this.visible=!1}}},r=l,o=(a("7989"),a("2877")),c=Object(o["a"])(r,i,s,!1,null,"d814e850",null);e["default"]=c.exports},ec090:function(t,e,a){},f91a:function(t,e,a){"use strict";var i={searchMerchant:"/qa/platform.Ask/searchMerchant",storeLists:"/merchant/merchant.Store/getStoreList",askLists:"/qa/merchant.Ask/lists",setIndexShow:"/qa/merchant.Ask/setIndexShow",saveLabels:"/qa/merchant.Ask/saveLabels",getLabels:"/qa/merchant.Ask/getLabels",saveAskLabel:"/qa/merchant.Ask/saveAskLabel",askDetail:"/qa/merchant.Ask/askDetail",getAll:"/qa/platform.Ask/getAll",delete:"/qa/platform.Ask/delete"};e["a"]=i}}]);