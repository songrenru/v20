(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6dda0692","chunk-520e92b9"],{"0dca":function(e,t,r){"use strict";r("1cfe")},"1cfe":function(e,t,r){},8502:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.modelTitle,width:1e3,visible:e.visible,"confirm-loading":e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleSubCancel}},[t("a-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{message:"添加免费车时，车牌开头包含、车牌结尾包含、完整车牌任意填写一项即可保存成功，如果都填写，会依次查询车辆信息支持免费进出",type:"info","show-icon":""}}),t("a-form-model",{ref:"ruleForm",attrs:{model:e.freeForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[t("div",{staticClass:"add_black"},[t("a-form-model-item",{attrs:{label:"车牌类型",prop:"park_type"}},[t("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"请选择","filter-option":e.filterOption,value:e.freeForm.park_type},on:{change:function(t){return e.handleSelectChange(t,"park_type")}}},e._l(e.parkTypeList,(function(r,a){return t("a-select-option",{attrs:{value:1*r.park_type}},[e._v(" "+e._s(r.label)+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"车牌开头包含",prop:"first_name"}},[t("a-input",{attrs:{placeholder:"请输入车牌开头包含"},model:{value:e.freeForm.first_name,callback:function(t){e.$set(e.freeForm,"first_name",t)},expression:"freeForm.first_name"}})],1),t("a-form-model-item",{attrs:{label:"车牌结尾包含",prop:"last_name"}},[t("a-input",{attrs:{placeholder:"请输入车牌结尾包含"},model:{value:e.freeForm.last_name,callback:function(t){e.$set(e.freeForm,"last_name",t)},expression:"freeForm.last_name"}})],1),e.is_show_car_number?t("a-form-model-item",{attrs:{label:"完整车牌",prop:"free_park"}},[t("a-input",{attrs:{placeholder:"请输入完整车牌"},model:{value:e.freeForm.free_park,callback:function(t){e.$set(e.freeForm,"free_park",t)},expression:"freeForm.free_park"}})],1):e._e()],1)])],1)},i=[],n=r("a0e0"),o={props:{visible:{type:Boolean,default:!1},modelTitle:{type:String,default:""},free_type:{type:String,default:""},free_id:{type:String,default:""}},watch:{free_id:{immediate:!0,handler:function(e){"edit"==this.free_type&&this.getFreeInfo()}},visible:{immediate:!0,handler:function(e){e&&this.checkFree()}}},data:function(){return{confirmLoading:!1,labelCol:{span:4},wrapperCol:{span:14},freeForm:{park_type:void 0},rules:{park_type:[{required:!0,message:"请选择车牌类型",trigger:"blur"}]},parkTypeList:[],is_show_car_number:!0}},mounted:function(){this.getParkType()},methods:{clearForm:function(){this.freeForm={park_type:void 0}},checkFree:function(){var e=this;e.request(n["a"].checkFreeCar1121).then((function(t){e.is_show_car_number=t.status}))},getFreeInfo:function(){var e=this;e.free_id&&e.request(n["a"].getFreeCarInfo,{free_id:e.free_id}).then((function(t){e.freeForm=t,e.freeForm.free_id=t.id}))},getParkType:function(){var e=this;e.request(n["a"].getParkType,{}).then((function(t){for(var r in t)e.parkTypeList.push({park_type:r,label:t[r]})}))},handleSubmit:function(e){var t=this;this.confirmLoading=!0,this.$refs.ruleForm.validate((function(e){if(!e)return console.log("error submit!!"),t.confirmLoading=!1,!1;var r=t;if(!r.freeForm.first_name&&!r.freeForm.last_name&&!r.freeForm.free_park)return r.$message.warning("开头、结尾、完整车牌至少填写一个！"),void(r.confirmLoading=!1);var a=n["a"].addFreeCar;"edit"==t.free_type&&(a=n["a"].editFreeCar),r.request(a,r.freeForm).then((function(e){"edit"==t.free_type?r.$message.success("编辑成功！"):r.$message.success("添加成功！"),t.$emit("closeFree",!0),t.clearForm(),t.confirmLoading=!1})).catch((function(e){t.confirmLoading=!1}))}))},handleSubCancel:function(e){this.$refs.ruleForm.resetFields(),this.confirmLoading=!1,this.$emit("closeFree",!1),this.clearForm()},handleSelectChange:function(e,t){this.freeForm[t]=e,this.$forceUpdate()},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},s=o,l=(r("e96d"),r("2877")),c=Object(l["a"])(s,a,i,!1,null,"286b21a5",null);t["default"]=c.exports},"8ed0":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"free_car"},[t("div",{staticClass:"header_search"},[t("a-collapse",{attrs:{accordion:""}},[t("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[e._v(" 免费车说明，免费车管理设置了车辆信息后，支持车辆免费进出，免费车信息受黑名单限制（同一车辆在免费车管理、黑名单、都有车辆信息、不支持车辆免费出入） ")])],1)],1),t("div",{staticClass:"header_search",staticStyle:{display:"flex","padding-top":"0"}},[t("div",{staticClass:"search_item"},[t("label",{staticClass:"label_title"},[e._v("车牌类型：")]),t("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"请选择","filter-option":e.filterOption,value:e.pageInfo.park_type},on:{change:function(t){return e.handleSelectChange(t,"park_type")}}},e._l(e.parkTypeList,(function(r,a){return t("a-select-option",{attrs:{value:r.park_type}},[e._v(" "+e._s(r.label)+" ")])})),1)],1),t("div",{staticClass:"search_item",staticStyle:{"margin-left":"20px"}},[t("label",{staticClass:"label_title"},[e._v("车牌号：")]),t("a-input",{staticStyle:{width:"200px"},model:{value:e.pageInfo.free_name,callback:function(t){e.$set(e.pageInfo,"free_name",t)},expression:"pageInfo.free_name"}})],1),t("div",{staticClass:"search_item",staticStyle:{"margin-left":"10px"}},[t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.queryThis()}}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.clearThis()}}},[e._v("清空")])],1)]),t("div",{staticClass:"header_search",staticStyle:{"padding-top":"0"}},[1==e.role_addfreecar?t("a-button",{attrs:{type:"primary"},on:{click:e.addThis}},[e._v("添加")]):e._e()],1),t("div",{staticClass:"table_content"},[t("a-table",{attrs:{columns:e.columns,"row-key":function(e){return e.id},pagination:e.pageInfo,loading:e.tableLoadding,"data-source":e.freecarList},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(r,a){return t("span",{},[1==e.role_editfreecar?t("a",{on:{click:function(t){return e.editThis(a)}}},[e._v("编辑")]):e._e(),1==e.role_editfreecar&&1==e.role_delfreecar?t("a-divider",{attrs:{type:"vertical"}}):e._e(),1==e.role_delfreecar?t("a-popconfirm",{attrs:{title:"确定要删除该项吗?","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.delConfirm(a)},cancel:e.delCancel}},[t("a",{staticStyle:{color:"red"}},[e._v("删除")])]):e._e()],1)}}])}),t("free-model",{attrs:{free_type:e.free_type,free_id:e.free_id,visible:e.freeVisible,modelTitle:e.modelTitle},on:{closeFree:e.closeFree}})],1)])},i=[],n=r("8502"),o=r("a0e0"),s=[{title:"编号",dataIndex:"id",key:"id"},{title:"车牌类型",dataIndex:"park_type",key:"park_type"},{title:"车牌号",dataIndex:"free_name",key:"free_name"},{title:"添加时间",dataIndex:"addTime",key:"addTime"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],l={data:function(){var e=this;return{columns:s,freeVisible:!1,modelTitle:"",pageInfo:{current:1,pageSize:10,total:10,page:1,park_type:void 0,free_name:"",showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(e){return"共 ".concat(e," 条")},onShowSizeChange:function(t,r){return e.onTableChange(t,r)},onChange:function(t,r){return e.onTableChange(t,r)}},tableLoadding:!1,freecarList:[],free_type:"add",free_id:"",typeList:[{id:0,label:"军车"},{id:1,label:"警车"},{id:2,label:"消防车"}],frequency:!1,parkTypeList:[],role_addfreecar:0,role_delfreecar:0,role_editfreecar:0}},components:{freeModel:n["default"]},mounted:function(){this.getParkType(),this.getFreeList()},methods:{queryThis:function(){var e=this;if(this.frequency)this.$message.warn("请求频繁，请稍后再试");else{this.frequency=!0;var t=setTimeout((function(){e.frequency=!1,clearTimeout(t)}),2e3);this.pageInfo.page=1,this.getFreeList()}},clearThis:function(){this.pageInfo={current:1,page:1,park_type:void 0,free_name:"",pageSize:20,total:0},this.getFreeList()},onTableChange:function(e,t){this.pageInfo.current=e,this.pageInfo.page=e,this.pageInfo.pageSize=t,this.getFreeList(),console.log("onTableChange==>",e,t)},handleTableChange:function(e,t,r){this.pageInfo.current=e.current,this.pageInfo.page=e.current,this.getFreeList()},getFreeList:function(){var e=this,t=this;t.tableLoadding=!0,t.request(o["a"].getFreeCar,t.pageInfo).then((function(r){t.freecarList=r.list,t.pageInfo.total=r.count,t.tableLoadding=!1,void 0!=r.role_addfreecar?(e.role_addfreecar=r.role_addfreecar,e.role_delfreecar=r.role_delfreecar,e.role_editfreecar=r.role_editfreecar):(e.role_addfreecar=1,e.role_delfreecar=1,e.role_editfreecar=1)}))},getParkType:function(){var e=this;e.request(o["a"].getParkType,{}).then((function(t){for(var r in t)e.parkTypeList.push({park_type:r,label:t[r]})}))},handleSelectChange:function(e,t){this.pageInfo[t]=e},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},editThis:function(e){this.free_type="edit",this.modelTitle="编辑免费车",this.freeVisible=!0,this.free_id=e.id+""},delConfirm:function(e){var t=this;t.request(o["a"].delFreeCar,{free_id:e.id}).then((function(e){t.getFreeList(),t.$message.success("删除成功！")}))},delCancel:function(){},closeFree:function(e){this.free_id="",this.freeVisible=!1,e&&this.getFreeList()},addThis:function(){this.free_type="add",this.modelTitle="添加免费车",this.freeVisible=!0}}},c=l,f=(r("0dca"),r("2877")),d=Object(f["a"])(c,a,i,!1,null,"29280c4c",null);t["default"]=d.exports},"8f10":function(e,t,r){},e96d:function(e,t,r){"use strict";r("8f10")}}]);