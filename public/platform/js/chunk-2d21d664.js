(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21d664"],{d0ac:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ant-pro-page-header-wrap-children-content",staticStyle:{margin:"24px 0 0"}},[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"message-suggestions-list-box"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{md:8,sm:12}},[a("a-form-item",{attrs:{label:"下单时间："}},[a("a-range-picker",{attrs:{ranges:{"今日":[t.moment(),t.moment()],"昨日":[t.moment().subtract(1,"days"),t.moment().subtract(1,"days")],"近七天":[t.moment().subtract(7,"days"),t.moment()],"近30天":[t.moment().subtract(30,"days"),t.moment()]},allowClear:!0},on:{change:t.dateOnChange},model:{value:t.search_data,callback:function(e){t.search_data=e},expression:"search_data"}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1)],1)],1),a("a-row",{staticStyle:{"padding-top":"20px","padding-bottom":"50px"},attrs:{gutter:24}},[a("a-col",{attrs:{md:8,sm:12}},[a("a-form-item",{attrs:{label:"手动搜索："}},[a("a-input-group",{attrs:{compact:""}},[a("a-select",{staticStyle:{width:"110px"},attrs:{"default-value":"queryParam.search_type"},model:{value:t.queryParam.search_type,callback:function(e){t.$set(t.queryParam,"search_type",e)},expression:"queryParam.search_type"}},t._l(t.search_keyword,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.value))])})),1),a("a-input",{staticStyle:{width:"235px"},attrs:{"allow-clear":""},model:{value:t.queryParam.keyword,callback:function(e){t.$set(t.queryParam,"keyword",e)},expression:"queryParam.keyword"}})],1)],1)],1),a("a-col",{attrs:{md:6,sm:12}},[a("a-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.searchBtn()}}},[t._v("查询")])],1)],1)],1),a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination,rowKey:"order_id"},on:{change:t.tableChange},scopedSlots:t._u([{key:"action",fn:function(e,r){return a("a",{on:{click:function(e){return t.look(r)}}},[t._v("查看发票")])}}])})],1)])],1)},n=[],o=a("c1df"),i=a.n(o),s={getERecord:"/mall/merchant.MallEInvoice/getERecord",getInvoice:"/mall/merchant.MallEInvoice/getInvoice"},c=s,l=[],d={name:"InvoiceRecord",data:function(){return{form:this.$form.createForm(this),mdl:{},visible:!1,id:1,timeTab:"",orderId:0,detail:{},search_data:[],search_keyword:[{key:"1",value:"订单编号"},{key:"3",value:"所属门店"},{key:"2",value:"下单人"},{key:"4",value:"联系电话"}],queryParam:{search_type:"1"},pagination:{current:1,pageSize:10,total:10,"show-total":function(t){return"共 ".concat(t," 条记录")},"show-size-changer":!0,"show-quick-jumper":!0},columns:[{title:"订单编号",width:120,dataIndex:"order_no"},{title:"业务",width:120,dataIndex:"type"},{title:"订单总额",width:120,dataIndex:"money_total",sorter:function(t,e){return t.money_total-e.money_total}},{title:"开票总额",width:120,dataIndex:"money_real",sorter:function(t,e){return t.money_real-e.money_real}},{title:"所属门店",width:120,dataIndex:"store_name"},{title:"下单人",width:120,dataIndex:"username"},{title:"联系电话",width:120,dataIndex:"phone"},{title:"下单时间",width:120,dataIndex:"create_time",sorter:function(t,e){return t.create_time_s-e.create_time_s}},{title:"发票",dataIndex:"fpqqlsh",width:"220px",scopedSlots:{customRender:"action"}}],data:l,isShow:1,store_id:0}},mounted:function(){console.log(c),this.queryParam.store_id=this.$route.query.store_id,this.getRecordUrl=c.getERecord,this.getInvoicelUrl=c.getInvoice,console.log("mounted"),console.log(this.getInvoicelUrl),this.initList()},methods:{moment:i.a,searchBtn:function(){this.page=1,this.pagination.current=this.page,this.getRecord()},dateOnChange:function(t,e){this.queryParam.start_time=e[0],this.queryParam.end_time=e[1]},initList:function(){this.search_data=[i()().subtract(7,"days"),i()()],this.queryParam.start_time=i()().subtract(7,"days").format("YYYY-MM-DD"),this.queryParam.end_time=i()().format("YYYY-MM-DD"),this.getRecord()},getRecord:function(){var t=this;this.queryParam["page"]=this.page,console.log(this.getRecordUrl),this.getRecordUrl&&this.request(this.getRecordUrl,this.queryParam).then((function(e){t.data=e.data,console.log(e),t.pagination.total=e.total}))},look:function(t){this.fpqqlsh=t.fpqqlsh,console.log(this.getInvoicelUrl),this.getInvoicelUrl&&this.request(this.getInvoicelUrl,{fpqqlsh:this.fpqqlsh}).then((function(t){console.log(t),window.open(t)}))},tableChange:function(t){this.queryParam["pageSize"]=t.pageSize,t.current&&t.current>0&&(this.pagination.current=t.current,this.page=t.current,this.getRecord())},download:function(t){}}},u=d,m=a("2877"),h=Object(m["a"])(u,r,n,!1,null,"253347cb",null);e["default"]=h.exports}}]);