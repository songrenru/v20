(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4abd5073"],{"061f":function(t,e,a){"use strict";a("81bc")},"81bc":function(t,e,a){},a721:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"components-layout-demo-basic"}},[a("a-spin",{attrs:{spinning:t.spinning,size:"large"}},[a("a-layout-content",{style:{margin:"0px",padding:"0px",background:"#fff",minHeight:"100px"}},[a("div",{staticClass:"table-operations"},[a("a-row",{staticStyle:{padding:"0px",width:"100%","background-color":"#f5f5f5"},attrs:{align:"top"}},[a("a-col",{staticClass:"text-left",staticStyle:{"font-size":"20px","line-height":"30px","padding-left":"20px"},attrs:{span:11}},[t._v(" 评论管理 ")]),a("a-col",{attrs:{span:5}}),a("a-col",{staticClass:"text-center",attrs:{span:3}},[a("a-form-item",[a("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"发布状态"},on:{change:t.handleStatusChange}},t._l(t.status_list,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name)+" ")])})),1)],1)],1),a("a-col",{staticClass:"text-center",attrs:{span:3}},[a("a-form-item",[a("a-input",{attrs:{placeholder:"输入关键字"},model:{value:t.formData.comment,callback:function(e){t.$set(t.formData,"comment",e)},expression:"formData.comment"}})],1)],1),a("a-col",{staticClass:"text-center",attrs:{span:2}},[a("a-form-item",[a("a-button",{attrs:{type:"default"},on:{click:function(e){return t.commentFind()}}},[t._v(" 查询 ")])],1)],1)],1)],1),a("a-table",{attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"content",fn:function(e){return a("span",{},[t._v(" "+t._s(e)+" ")])}},{key:"nickname",fn:function(e){return a("span",{},[t._v(" "+t._s(e)+" ")])}},{key:"phone",fn:function(e){return a("span",{},[t._v(" "+t._s(e)+" ")])}},{key:"name",fn:function(e,n){return a("span",{},[a("a",{on:{click:function(e){return t.showNote(n.article_id)}}},[t._v(t._s(e))])])}},{key:"add_time",fn:function(e){return a("span",{},[t._v(" "+t._s(e)+" ")])}},{key:"status",fn:function(e){return a("span",{},[0==e?a("span",{staticClass:"height-30"},[t._v(" 待审核 ")]):t._e(),1==e?a("span",{staticClass:"height-30"},[t._v(" 发布中 ")]):t._e(),2==e?a("span",{staticClass:"height-30"},[t._v(" 未发布 ")]):t._e()])}},{key:"action",fn:function(e,n){return a("span",{},[0==n.status?a("div",[a("a-row",[a("a",{staticClass:"label-sm blue",on:{click:function(e){return t.editStatus(n.reply_id,1)}}},[t._v(" 发布")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{staticClass:"label-sm blue",on:{click:function(e){return t.editStatus(n.reply_id,2)}}},[t._v(" 不予发布")])],1)],1):t._e(),1==n.status?a("div",[a("a-row",[a("a",{staticClass:"label-sm blue",on:{click:function(e){return t.editStatus(n.reply_id,2)}}},[t._v(" 不予发布")])])],1):t._e(),2==n.status?a("div",[a("a-row",[a("a",{staticClass:"label-sm blue",on:{click:function(e){return t.editStatus(n.reply_id,1)}}},[t._v(" 发布")])])],1):t._e()])}}])}),a("a-modal",{staticClass:"text-left",attrs:{width:"1000px",title:"详情",footer:null},model:{value:t.visible_note,callback:function(e){t.visible_note=e},expression:"visible_note"}},[a("a-row",[a("a-col",{attrs:{span:24}},[t._v(" "+t._s(t.article.name)+" ")])],1),t.article.images?a("a-row",[t._l(t.article.images,(function(t,e){return[a("a-col",{staticClass:"text-center",attrs:{span:8}},[a("img",{attrs:{src:t,width:"300",height:"200"}})])]}))],2):t._e(),a("a-row",[a("a-col",{attrs:{span:24}},[t._v(" "+t._s(t.article.content)+" ")])],1)],1)],1)],1)],1)},i=[],s=a("290c"),o={getCommentList:"/grow_grass/platform.GrowGrassArticleReply/getCommentList",updateGrowGrassArticleReply:"/grow_grass/platform.GrowGrassArticleReply/updateGrowGrassArticleReply",getArticle:"/grow_grass/platform.Article/getArticleEditInfo"},c=o,r=a("da05"),l=[{title:"评论内容",dataIndex:"content",scopedSlots:{customRender:"content"},width:"300px"},{title:"用户名",dataIndex:"nickname",scopedSlots:{customRender:"nickname"}},{title:"用户电话",dataIndex:"phone",scopedSlots:{customRender:"phone"}},{title:"发布内容",dataIndex:"name",scopedSlots:{customRender:"name"},width:"200px"},{title:"评论时间",dataIndex:"add_time",scopedSlots:{customRender:"add_time"},align:"center"},{title:"发布状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],u={name:"CommentManageList",components:{ACol:r["b"],ARow:s["a"]},activated:function(){this.$set(this.pagination,"current",1),this.$set(this.pagination,"pageSize",10),this.$set(this.pagination,"total",0),this.getCommentList1()},created:function(){this.getCommentList1()},data:function(){var t=this;return{visible_note:!1,columns:l,spinning:!1,data:[],status_list:[{id:0,name:"待审核"},{id:1,name:"发布中"},{id:2,name:"未发布"}],pagination:{page:1,current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:function(e,a){return t.onPageChange(e,a)},onShowSizeChange:function(e,a){return t.onPageSizeChange(e,a)},showTotal:function(t){return"共 ".concat(t," 条评论")}},formData:{status:"",comment:""},article:{name:"",images:[],content:""}}},methods:{getCommentList1:function(){var t=this;this.pagination.total>0&&Math.ceil(this.pagination.total/this.pagination.pageSize)<this.pagination.page&&(this.pagination.current=1,this.pagination.page=1),this.request(c.getCommentList,{page:this.pagination.page,pageSize:this.pagination.pageSize}).then((function(e){t.data=e.list,t.$set(t.pagination,"total",e.count)}))},handleTableChange:function(t){t.current&&t.current>0&&this.getCommentList1()},editStatus:function(t,e){var a=this;this.$confirm({title:"是否确定修改该状态?",centered:!0,onOk:function(){a.request(c.updateGrowGrassArticleReply,{reply_id:t,status:e}).then((function(t){a.getCommentList1(),a.$message.success("操作成功！")}))},onCancel:function(){}})},showNote:function(t){var e=this;this.visible_note=!0,this.request(c.getArticle,{article_id:t}).then((function(t){e.article=t}))},handleStatusChange:function(t){this.formData.status=t},commentFind:function(){var t=this;this.request(c.getCommentList,this.formData).then((function(e){t.data=e.list,t.$set(t.pagination,"total",e.count)}))},onPageChange:function(t,e){this.$set(this.pagination,"page",t),this.$set(this.pagination,"current",t),this.getCommentList1()},onPageSizeChange:function(t,e){this.$set(this.pagination,"pageSize",e),this.getCommentList1()}}},p=u,d=(a("061f"),a("2877")),m=Object(d["a"])(p,n,i,!1,null,"4059f5ba",null);e["default"]=m.exports}}]);