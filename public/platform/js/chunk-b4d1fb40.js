(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b4d1fb40","chunk-112c6452","chunk-112c6452","chunk-2d0b3786"],{"1cc4":function(t,e,a){},"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("d3b7");function i(t,e,a,i,o,r,l){try{var s=t[r](l),n=s.value}catch(c){return void a(c)}s.done?e(n):Promise.resolve(n).then(i,o)}function o(t){return function(){var e=this,a=arguments;return new Promise((function(o,r){var l=t.apply(e,a);function s(t){i(l,o,r,s,n,"next",t)}function n(t){i(l,o,r,s,n,"throw",t)}s(void 0)}))}}},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var i=a("6b75");function o(t){if(Array.isArray(t))return Object(i["a"])(t)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var l=a("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t){return o(t)||r(t)||Object(l["a"])(t)||s()}},"4d95":function(t,e,a){"use strict";var i={getTicketList:"life_tools/merchant.LifeToolsTicket/getList",getTicketDetail:"life_tools/merchant.LifeToolsTicket/getDetail",ticketDel:"life_tools/merchant.LifeToolsTicket/del",TicketEdit:"life_tools/merchant.LifeToolsTicket/addOrEdit",getLifeToolsList:"life_tools/merchant.LifeTools/getInformationList",setLifeToolsAttrs:"life_tools/merchant.LifeTools/setLifeToolsAttrs",getSportsOrderList:"/life_tools/merchant.SportsOrder/getOrderList",exportToolsOrder:"/life_tools/merchant.SportsOrder/exportToolsOrder",getSportsOrderDetail:"/life_tools/merchant.SportsOrder/getOrderDetail",agreeSportsOrderRefund:"/life_tools/merchant.SportsOrder/agreeRefund",refuseSportsOrderRefund:"/life_tools/merchant.SportsOrder/refuseRefund",getEditInfo:"life_tools/merchant.LifeToolsTicket/getEditInfo",getCategoryList:"life_tools/merchant.LifeToolsCategory/getCategoryList",getMapConfig:"life_tools/merchant.LifeTools/getMapConfig",getAddressList:"life_tools/merchant.LifeTools/getAddressList",addEditLifeTools:"life_tools/merchant.LifeTools/addEditLifeTools",getLifeToolsDetail:"life_tools/merchant.LifeTools/getLifeToolsDetail",delLifeTools:"life_tools/merchant.LifeTools/delLifeTools",getReplyList:"/life_tools/merchant.LifeToolsReply/searchReply",isShowReply:"/life_tools/merchant.LifeToolsReply/isShowReply",getReplyDetails:"/life_tools/merchant.LifeToolsReply/getReplyDetails",delReply:"/life_tools/merchant.LifeToolsReply/delReply",subReply:"/life_tools/merchant.LifeToolsReply/subReply",getReplyContent:"/life_tools/merchant.LifeToolsReply/getReplyContent",getCardList:"/life_tools/merchant.EmployeeCard/getCardList",editCard:"/life_tools/merchant.EmployeeCard/editCard",saveCard:"/life_tools/merchant.EmployeeCard/saveCard",delCard:"/life_tools/merchant.EmployeeCard/delCard",getSportsVerifyList:"/life_tools/merchant.SportsOrder/getVerifyList",exportVerifyRecord:"/life_tools/merchant.SportsOrder/exportVerifyRecord",getLimitedList:"/life_tools/merchant.LifeScenicLimitedAct/getLimitedList",updateLimited:"/life_tools/merchant.LifeScenicLimitedAct/addLimited",limitedChangeState:"/life_tools/merchant.LifeScenicLimitedAct/changeState",removeLimited:"/life_tools/merchant.LifeScenicLimitedAct/del",getLimitedInfo:"/life_tools/merchant.LifeScenicLimitedAct/edit",getMerchantSort:"/life_tools/merchant.LifeToolsTicket/getMerchantSort",getLifeToolsTicket:"/life_tools/merchant.LifeToolsTicket/getLifeToolsTicket",getToolsCardList:"/life_tools/merchant.LifeTools/getToolsCardList",AddOrEditToolsCard:"/life_tools/merchant.LifeTools/AddOrEditToolsCard",getToolsCardEdit:"/life_tools/merchant.LifeTools/getToolsCardEdit",delToolsCard:"/life_tools/merchant.LifeTools/delToolsCard",getAllToolsList:"/life_tools/merchant.LifeTools/getAllToolsList",getToolsCardRecord:"/life_tools/merchant.LifeTools/getToolsCardRecord",getCardOrderList:"/life_tools/merchant.LifeTools/getCardOrderList",getCardOrderDetail:"/life_tools/merchant.LifeTools/getCardOrderDetail",agreeCardOrderRefund:"/life_tools/merchant.LifeTools/agreeCardOrderRefund",refuseCardOrderRefund:"/life_tools/merchant.LifeTools/refuseCardOrderRefund",getSportsActivityList:"/life_tools/merchant.LifeToolsSportsActivity/getSportsActivityList",updateSportsActivityStatus:"/life_tools/merchant.LifeToolsSportsActivity/updateSportsActivityStatus",getSportsActivityOrderList:"/life_tools/merchant.LifeToolsSportsActivity/getSportsActivityOrderList",addSportsActivity:"/life_tools/merchant.LifeToolsSportsActivity/addSportsActivity",editSportsActivity:"/life_tools/merchant.LifeToolsSportsActivity/editSportsActivity",getTravelList:"/life_tools/merchant.LifeToolsGroupTravelAgency/getTravelList",agencyAudit:"/life_tools/merchant.LifeToolsGroupTravelAgency/audit",getStaffList:"/life_tools/merchant.LifeToolsTicket/getStaffList",getAppointList:"life_tools/merchant.LifeToolsAppoint/getList",getAppointMsg:"life_tools/merchant.LifeToolsAppoint/getToolAppointMsg",saveAppoint:"life_tools/merchant.LifeToolsAppoint/saveToolAppoint",lookAppointUser:"life_tools/merchant.LifeToolsAppoint/lookAppointUser",closeAppoint:"life_tools/merchant.LifeToolsAppoint/closeAppoint",exportAppointUserOrder:"life_tools/merchant.LifeToolsAppoint/exportUserOrder",delAppoint:"life_tools/merchant.LifeToolsAppoint/delAppoint",getSeatMap:"/life_tools/merchant.LifeToolsAppoint/getSeatMap",getAppointOrderDetail:"life_tools/merchant.LifeToolsAppoint/getAppointOrderDetail",auditRefund:"life_tools/merchant.LifeToolsAppoint/auditRefund",suspend:"life_tools/merchant.LifeToolsAppoint/suspend",getSportsSecondsKillList:"/life_tools/merchant.LifeToolsSportsSecondsKill/getSecondsKillList",saveSportsSecondsKill:"/life_tools/merchant.LifeToolsSportsSecondsKill/saveSecondsKill",ChangeSportsSecondsKill:"/life_tools/merchant.LifeToolsSportsSecondsKill/ChangeSportsSecondsKill",delSportsSecondsKill:"/life_tools/merchant.LifeToolsSportsSecondsKill/delSecondsKill",getSportsSecondsKillDetail:"/life_tools/merchant.LifeToolsSportsSecondsKill/getSecondsKillDetail",getGroupTicketList:"life_tools/merchant.group/getGroupTicketList",getGroupLifeToolsTicket:"life_tools/merchant.LifeToolsTicket/getLifeToolsTicket",addGroupTicket:"life_tools/merchant.group/addGroupTicket",delGroupTicket:"life_tools/merchant.group/delGroupTicket",editSettingData:"life_tools/merchant.group/editSettingData",editGroupTicket:"life_tools/merchant.group/editGroupTicket",getSettingDataDetail:"life_tools/merchant.group/getSettingDataDetail",getStatisticsData:"life_tools/merchant.LifeToolsGroupOrder/getStatisticsData",getOrderList:"life_tools/merchant.LifeToolsGroupOrder/getOrderList",getOrderAuditList:"/life_tools/merchant.LifeToolsGroupOrder/getAuditGroupOrderList",orderAudit:"/life_tools/merchant.LifeToolsGroupOrder/audit",groupOrderRefand:"life_tools/merchant.LifeToolsGroupOrder/groupOrderRefand",editDistributionPrice:"life_tools/merchant.LifeToolsDistribution/editDistributionPrice",getDistributionSettingDataDetail:"/life_tools/merchant.LifeToolsDistribution/getSettingDataDetail",getDistributionSettingeditSetting:"/life_tools/merchant.LifeToolsDistribution/editSetting",getAtatisticsInfo:"/life_tools/merchant.LifeToolsDistribution/getAtatisticsInfo",getDistributorList:"/life_tools/merchant.LifeToolsDistribution/getDistributorList",getLowerLevel:"/life_tools/merchant.LifeToolsDistribution/getLowerLevel",audit:"/life_tools/merchant.LifeToolsDistribution/audit",getDistributionOrderList:"/life_tools/merchant.LifeToolsDistribution/getDistributionOrderList",editDistributionOrderNote:"/life_tools/merchant.LifeToolsDistribution/editDistributionOrderNote",delDistributor:"/life_tools/merchant.LifeToolsDistribution/delDistributor",addStatement:"/life_tools/merchant.LifeToolsDistribution/addStatement",getStatementList:"/life_tools/merchant.LifeToolsDistribution/getStatement",getStatementDetail:"/life_tools/merchant.LifeToolsDistribution/getStatementDetail",lifeToolsAudit:"/life_tools/platform.LifeTools/lifeToolsAudit",auditTicket:"/life_tools/platform.LifeToolsTicket/auditTicket",getMapCity:"/g=Index&c=Map&a=suggestion",getCarParkList:"/life_tools/merchant.LifeToolsCarPark/getCarParkList",addCarPark:"/life_tools/merchant.LifeToolsCarPark/addCarPark",showCarPark:"/life_tools/merchant.LifeToolsCarPark/showCarPark",getToolsList:"/life_tools/merchant.LifeToolsCarPark/getToolsList",deleteCarPark:"/life_tools/merchant.LifeToolsCarPark/deleteCarPark",statusCarPark:"/life_tools/merchant.LifeToolsCarPark/statusCarPark",wifiList:"life_tools/merchant.LifeToolsWifi/wifiList",wifiAdd:"life_tools/merchant.LifeToolsWifi/wifiAdd",wifiShow:"life_tools/merchant.LifeToolsWifi/wifiShow",wifiStatusChange:"life_tools/merchant.LifeToolsWifi/wifiStatusChange",wifiDelete:"life_tools/merchant.LifeToolsWifi/wifiDelete",scenicMapSave:"/life_tools/merchant.LifeToolsScenicMap/saveMap",scenicMapPlaceList:"/life_tools/merchant.LifeToolsScenicMap/mapPlaceList",scenicMapPlaceSave:"/life_tools/merchant.LifeToolsScenicMap/saveMapPlace",scenicMapPlaceDel:"/life_tools/merchant.LifeToolsScenicMap/mapPlaceDel",scenicMapLineList:"/life_tools/merchant.LifeToolsScenicMap/mapLineList",scenicMapLineSave:"/life_tools/merchant.LifeToolsScenicMap/saveMapLine",scenicMapLineDel:"/life_tools/merchant.LifeToolsScenicMap/mapLineDel",scenicMapScenicList:"/life_tools/merchant.LifeToolsScenicMap/scenicList",scenicMapPlaceCatList:"/life_tools/merchant.LifeToolsScenicMap/categoryList",scenicMapPlaceCategoryDel:"/life_tools/merchant.LifeToolsScenicMap/categoryDel",scenicMapPlaceCategorySave:"/life_tools/merchant.LifeToolsScenicMap/saveCategory",scenicMapList:"/life_tools/merchant.LifeToolsScenicMap/mapList",scenicMapDel:"/life_tools/merchant.LifeToolsScenicMap/mapDel",scenicMapStatusSave:"/life_tools/merchant.LifeToolsScenicMap/saveMapStatus",changeCloseStatus:"life_tools/merchant.LifeTools/changeCloseStatus",getAddEditCardMerchantInfo:"/life_tools/merchant.LifeTools/getAddEditCardMerchantInfo"};e["a"]=i},6966:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,width:"60%",visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancelModel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{staticStyle:{"max-height":"600px","overflow-y":"scroll"}},[a("a-form-item",{attrs:{label:"活动名称",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-input",{attrs:{placeholder:"请输入活动名称"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),a("a-form-item",{attrs:{label:"活动简介",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input",{attrs:{placeholder:"请输入活动简介"},model:{value:t.formData.desc,callback:function(e){t.$set(t.formData,"desc",e)},expression:"formData.desc"}})],1),a("a-form-item",{attrs:{label:"活动主办方联系方式",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-input",{attrs:{placeholder:"请输活动主办方联系方式"},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}})],1),a("a-form-model-item",{attrs:{label:"活动起止时间",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-date-picker",{attrs:{"show-time":t.showTime,format:t.dateFormat,"disabled-date":t.disabledStartDate,placeholder:"请选择活动开始时间"},on:{change:t.onDateStartChange},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}}),a("span",{style:{display:"inline-block",width:"24px",textAlign:"center"}},[t._v(" - ")]),a("a-date-picker",{attrs:{"show-time":t.showTime,format:t.dateFormat,"disabled-date":t.disabledEndDate,placeholder:"请选择活动结束时间",getCalendarContainer:function(t){return t.parentNode}},on:{change:t.onDateEndChange},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}})],1),a("a-form-model-item",{attrs:{label:"预约时间",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-date-picker",{attrs:{"show-time":t.showTime,format:t.dateFormat,placeholder:"请选择预约开始时间"},on:{change:t.onAppointDateStartChange},model:{value:t.appoint_start_time,callback:function(e){t.appoint_start_time=e},expression:"appoint_start_time"}}),a("span",{style:{display:"inline-block",width:"24px",textAlign:"center"}},[t._v(" - ")]),a("a-date-picker",{attrs:{"show-time":t.showTime,format:t.dateFormat,placeholder:"请选择预约结束时间",getCalendarContainer:function(t){return t.parentNode}},on:{change:t.onAppointDateEndChange},model:{value:t.appoint_end_time,callback:function(e){t.appoint_end_time=e},expression:"appoint_end_time"}})],1),a("a-form-item",{attrs:{label:"预约按钮文案",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-input",{attrs:{placeholder:"请输入预约按钮文案"},model:{value:t.formData.appoint_btn_txt,callback:function(e){t.$set(t.formData,"appoint_btn_txt",e)},expression:"formData.appoint_btn_txt"}})],1),a("a-form-item",{attrs:{label:"限购",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入每人限购次数"},model:{value:t.formData.limit,callback:function(e){t.$set(t.formData,"limit",e)},expression:"formData.limit"}})],1),a("a-form-item",{attrs:{label:"报名费用",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入报名费用"},model:{value:t.formData.price,callback:function(e){t.$set(t.formData,"price",e)},expression:"formData.price"}})],1),a("a-form-item",{attrs:{label:"提前几天通知",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入提前几天通知"},model:{value:t.formData.send_notice_days,callback:function(e){t.$set(t.formData,"send_notice_days",e)},expression:"formData.send_notice_days"}})],1),a("a-form-item",{attrs:{label:"地址经纬度",required:!0,labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-row",[a("a-col",{attrs:{span:6}},[a("a-button",{on:{click:t.showMapModel}},[t._v(" 点击选取经纬度 ")])],1),a("a-col",{attrs:{span:2}}),a("a-col",{attrs:{span:12}},[t._v(" "+t._s(t.formData.long)+","+t._s(t.formData.lat)+" ")])],1)],1),a("a-form-item",{attrs:{label:"所在省市区",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-cascader",{attrs:{options:t.formData.areas,placeholder:"选择省市区",value:t.sel_areas},on:{change:t.onChangeArea}})],1),a("a-form-item",{attrs:{label:"详细地址",required:!0,labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input",{attrs:{placeholder:"请输入详细地址"},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address",e)},expression:"formData.address"}})],1),a("a-form-item",{attrs:{label:"是否开启多规格",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-row",[a("a-radio-group",{attrs:{name:"radioGroup","default-value":0},model:{value:t.formData.is_sku,callback:function(e){t.$set(t.formData,"is_sku",e)},expression:"formData.is_sku"}},[a("a-radio",{attrs:{value:0}},[t._v(" 不开启 ")]),a("a-radio",{attrs:{value:1}},[t._v(" 开启 ")])],1)],1),1==t.formData.is_sku?a("a-row",{staticClass:"mt-10"},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.addSku()}}},[t._v("添加规格")])],1):t._e()],1),1==t.formData.is_sku&&t.formData.spec_list&&t.formData.spec_list.length?[a("a-form-item",{attrs:{label:"  ",colon:!1,labelCol:Object.assign({},t.labelCol,{sm:{span:4,offset:3}}),wrapperCol:Object.assign({},t.wrapperCol,{sm:{span:13}})}},t._l(t.formData.spec_list,(function(e,i){return a("div",{key:i,staticClass:"customFormWrap",class:0!=i?"mt-20":""},[a("div",{staticClass:"flex-1 mr-20"},[a("a-form-item",{attrs:{label:"规格名",labelCol:{span:5},wrapperCol:{span:18}}},[a("a-input",{attrs:{placeholder:"请输入规格名"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}})],1),a("a-form-item",{attrs:{label:"规格值",labelCol:{span:5},wrapperCol:{span:18}}},[t._l(e.list,(function(e,o){return[a("a-tooltip",{key:o,attrs:{title:e.name}},[a("a-tag",{key:o,attrs:{closable:!0},on:{close:function(){return t.delSkuAttr(i,o)}}},[t._v(" "+t._s(e.name)+" ")])],1)]})),e.inputVisible?a("a-input",{ref:"input"+i,refInFor:!0,style:{width:"78px"},attrs:{type:"text",size:"small",value:e.inputValue},on:{change:function(e){return t.skuInputChange(e,i)},blur:function(e){return t.skuInputConfirm(e,i)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.skuInputConfirm(e,i)}}}):a("a-tag",{staticStyle:{background:"#fff",borderstyle:"dashed"},on:{click:function(e){return t.showAttrInput(i)}}},[a("a-icon",{attrs:{type:"plus"}}),t._v(" 添加 ")],1)],2)],1),a("div",[a("a-button",{attrs:{type:"danger"},on:{click:function(e){return t.delItem(i,"spec_list")}}},[t._v("删除规格")])],1)])})),0),a("a-form-item",{attrs:{label:"  ",colon:!1,labelCol:Object.assign({},t.labelCol,{sm:{span:4,offset:3}}),wrapperCol:Object.assign({},t.wrapperCol,{sm:{span:13}})}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.addSkuTree()}}},[t._v("创建规格表")])],1),t.skuTable.headerList&&t.skuTable.headerList.length?a("a-form-item",{attrs:{label:"规格关系表",labelCol:Object.assign({},t.labelCol,{sm:{span:4,offset:3}}),wrapperCol:Object.assign({},t.wrapperCol,{sm:{span:13}})}},[a("a-table",{staticStyle:{width:"100%"},attrs:{"data-source":t.skuTable.bodyList,stripe:"","tooltip-effect":"dark",border:""}},[t._l(t.skuTable.headerList,(function(e){return a("a-table-column",{key:e.prop,attrs:{title:e.propName,align:"center"},scopedSlots:t._u([{key:"default",fn:function(i,o){return[a("span",[t._v(t._s(o[e.prop]))])]}}],null,!0)})})),a("a-table-column",{key:"price",attrs:{title:"价格",align:"center","data-index":"price"},scopedSlots:t._u([{key:"default",fn:function(e,i){return[a("a-input",{staticStyle:{"min-width":"100px"},attrs:{clearable:"",placeholder:"保留两位小数点",type:"number",min:0},model:{value:i.price,callback:function(e){t.$set(i,"price",e)},expression:"record.price"}})]}}],null,!1,1564948034)}),a("a-table-column",{key:"original_num",attrs:{title:"库存",align:"center","data-index":"original_num"},scopedSlots:t._u([{key:"default",fn:function(e,i){return[a("a-input",{staticStyle:{"min-width":"100px"},attrs:{clearable:"",placeholder:"请输入整数",type:"number",min:0},model:{value:i.original_num,callback:function(e){t.$set(i,"original_num",e)},expression:"record.original_num"}})]}}],null,!1,321188657)})],2)],1):t._e()]:t._e(),a("a-form-item",{attrs:{label:"是否开启自定义申请模板",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-row",[a("a-radio-group",{attrs:{name:"radioGroup","default-value":0},model:{value:t.formData.is_custom_form,callback:function(e){t.$set(t.formData,"is_custom_form",e)},expression:"formData.is_custom_form"}},[a("a-radio",{attrs:{value:0}},[t._v(" 不开启 ")]),a("a-radio",{attrs:{value:1}},[t._v(" 开启 ")])],1)],1),1==t.formData.is_custom_form?a("a-row",{staticClass:"mt-10"},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.addCustomFormList()}}},[t._v("添加")])],1):t._e()],1),1==t.formData.is_custom_form&&t.formData.custom_form&&t.formData.custom_form.length?a("a-form-item",{attrs:{label:"  ",colon:!1,labelCol:Object.assign({},t.labelCol,{sm:{span:4,offset:3}}),wrapperCol:Object.assign({},t.wrapperCol,{sm:{span:14}})}},t._l(t.formData.custom_form,(function(e,i){return a("div",{key:i,staticClass:"customFormWrap",class:0!=i?"mt-20":""},[a("div",{staticClass:"flex-1 mr-20"},[a("a-form-item",{attrs:{label:"标题名称",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-input",{attrs:{placeholder:"请输入标题名称"},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"item.title"}})],1),a("a-form-item",{attrs:{label:"排序值",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-input",{attrs:{placeholder:"请输入排序值",type:"number",min:0},model:{value:e.sort,callback:function(a){t.$set(e,"sort",a)},expression:"item.sort"}})],1),a("a-form-item",{attrs:{label:"选择表单控件",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-select",{attrs:{placeholder:"请选择表单控件",options:t.customFormOptions},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"item.type"}})],1),"image"==e.type?a("a-form-item",{attrs:{label:"数量限制",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-input",{attrs:{placeholder:"请输入图片最大上传数量",type:"number",min:0},model:{value:e.image_max_num,callback:function(a){t.$set(e,"image_max_num",a)},expression:"item.image_max_num"}})],1):t._e(),"select"==e.type?a("a-form-item",{attrs:{label:"枚举值",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-input",{attrs:{placeholder:"选择值之间用','隔开"},model:{value:e.content,callback:function(a){t.$set(e,"content",a)},expression:"item.content"}})],1):t._e(),a("a-form-item",{attrs:{label:"是否为必填",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否",checked:0!=e.is_must},on:{change:function(e){return t.customFormSwitchChange(e,i,"is_must")}}})],1),a("a-form-item",{attrs:{label:"状态",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关",checked:0!=e.status},on:{change:function(e){return t.customFormSwitchChange(e,i,"status")}}})],1)],1),a("div",[a("a-button",{attrs:{type:"danger"},on:{click:function(e){return t.delItem(i,"custom_form")}}},[t._v("删除控件")])],1)])})),0):t._e(),t.showSeatConfig?[a("a-form-item",{attrs:{label:"是否开启选座模式",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":0},model:{value:t.formData.is_select_seat,callback:function(e){t.$set(t.formData,"is_select_seat",e)},expression:"formData.is_select_seat"}},[a("a-radio",{attrs:{value:0}},[t._v(" 不开启 ")]),a("a-radio",{attrs:{value:1}},[t._v(" 开启 ")])],1)],1),1==t.formData.is_select_seat?a("a-form-item",{attrs:{label:"设置座位位置",required:!0,labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-row",{attrs:{type:"flex"}},[a("a-form-item",{attrs:{label:"横排",require:!0,labelCol:{span:4},wrapperCol:{span:16}}},[a("a-input",{attrs:{type:"number",min:0,placeholder:"请输入"},on:{change:function(e){return t.seatNumberChange(e,"seat_row")},focus:function(e){return t.seatNumberFocus(e,"seat_row")}},model:{value:t.formData.seat_row,callback:function(e){t.$set(t.formData,"seat_row",e)},expression:"formData.seat_row"}})],1),a("a-form-item",{attrs:{label:"竖排",require:!0,labelCol:{span:4},wrapperCol:{span:16}}},[a("a-input",{attrs:{type:"number",min:0,placeholder:"请输入"},on:{change:function(e){return t.seatNumberChange(e,"seat_col")},focus:function(e){return t.seatNumberFocus(e,"seat_col")}},model:{value:t.formData.seat_col,callback:function(e){t.$set(t.formData,"seat_col",e)},expression:"formData.seat_col"}})],1),a("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(e){return t.addSeatList()}}},[t._v("设置位置价格")])],1)],1):t._e(),1==t.formData.is_select_seat?a("a-form-item",{attrs:{label:"购买多张时是否生成多张二维码",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":0},model:{value:t.formData.is_multi_code,callback:function(e){t.$set(t.formData,"is_multi_code",e)},expression:"formData.is_multi_code"}},[a("a-radio",{attrs:{value:1}},[t._v(" 是 ")]),a("a-radio",{attrs:{value:0}},[t._v(" 否 ")])],1)],1):t._e(),1==t.formData.is_select_seat?a("a-form-item",{attrs:{label:"购买限购",labelCol:t.labelCol,wrapperCol:t.wrapperCol,help:"0表示不限购，限购只针对选座位"}},[a("a-input",{attrs:{type:"number",min:0,placeholder:"请输入"},model:{value:t.formData.limit,callback:function(e){t.$set(t.formData,"limit",e)},expression:"formData.limit"}})],1):t._e()]:t._e(),a("a-form-item",{attrs:{label:"活动大图",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-input",{attrs:{hidden:""},model:{value:t.formData.image_big,callback:function(e){t.$set(t.formData,"image_big",e)},expression:"formData.image_big"}}),[a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{action:t.action,name:t.uploadName,data:{upload_dir:t.upload_dir},"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview,change:t.handleChange}},[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("上传图片")])],1),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1),a("div",{staticStyle:{position:"absolute","z-index":"100",top:"100px",width:"400px"}},[t._v(" 推荐尺寸375px*181px ")])]],2),a("a-form-item",{attrs:{label:"活动小图",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-input",{attrs:{hidden:""},model:{value:t.formData.image_small,callback:function(e){t.$set(t.formData,"image_small",e)},expression:"formData.image_small"}}),[a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{action:t.action,name:t.uploadName,data:{upload_dir:t.upload_dir},"list-type":"picture-card","file-list":t.fileList1},on:{preview:t.handlePreview1,change:t.handleChange1}},[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("上传图片")])],1),a("a-modal",{attrs:{visible:t.previewVisible1,footer:null},on:{cancel:t.handleCancel1}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage1}})])],1),a("div",{staticStyle:{position:"absolute","z-index":"100",top:"100px",width:"400px"}},[t._v(" 推荐尺寸107px*105px ")])]],2),t.formData.is_sku?t._e():a("a-form-item",{attrs:{label:"人数限制",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-select",{model:{value:t.formData.limit_type,callback:function(e){t.$set(t.formData,"limit_type",e)},expression:"formData.limit_type"}},[a("a-select-option",{attrs:{value:0}},[t._v(" 不限制 ")]),a("a-select-option",{attrs:{value:1}},[t._v(" 限制 ")])],1)],1),t.formData.limit_type&&!t.formData.is_sku?a("a-form-item",{attrs:{label:"参与人数",required:!0,labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入参与人数",min:t.formData.limit_num},model:{value:t.formData.limit_num,callback:function(e){t.$set(t.formData,"limit_num",e)},expression:"formData.limit_num"}})],1):t._e(),a("a-form-item",{attrs:{label:"可参与人群",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":1},model:{value:t.formData.people_type,callback:function(e){t.$set(t.formData,"people_type",e)},expression:"formData.people_type"}},[a("a-radio",{attrs:{value:0}},[t._v(" 不限 ")]),a("a-radio",{attrs:{value:1}},[t._v(" 本商家员工 ")])],1)],1),a("a-form-item",{attrs:{label:"是否需要核销",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":1},model:{value:t.formData.need_verify,callback:function(e){t.$set(t.formData,"need_verify",e)},expression:"formData.need_verify"}},[a("a-radio",{attrs:{value:1}},[t._v(" 需要 ")]),a("a-radio",{attrs:{value:0}},[t._v(" 不需要 ")])],1)],1),a("a-form-item",{attrs:{label:"退款设置",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":1},model:{value:t.formData.can_refund,callback:function(e){t.$set(t.formData,"can_refund",e)},expression:"formData.can_refund"}},[a("a-radio",{attrs:{value:2}},[t._v(" 随时退 ")]),a("a-radio",{attrs:{value:1}},[a("span",[t._v("活动开始前")]),1==t.formData.can_refund?a("a-input-number",{attrs:{min:1},model:{value:t.formData.refund_hours,callback:function(e){t.$set(t.formData,"refund_hours",e)},expression:"formData.refund_hours"}}):a("a-input-number",{attrs:{min:1}}),a("span",[t._v("小时")])],1),a("a-radio",{attrs:{value:0}},[t._v(" 不能退款 ")])],1)],1),a("a-form-item",{attrs:{label:"活动介绍",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("rich-text",{attrs:{info:t.formData.content},on:{"update:info":function(e){return t.$set(t.formData,"content",e)}}})],1),a("a-modal",{attrs:{width:"1000px",title:"地图",destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancelMap},model:{value:t.visible_map,callback:function(e){t.visible_map=e},expression:"visible_map"}},[a("div",{staticClass:"flex flex-wrap justify-between"},[a("div",{staticClass:"flex",staticStyle:{width:"260px"}},[a("a-input",{attrs:{placeholder:"请输入关键字"},on:{change:t.showPanelInput},model:{value:t.addressKeyword,callback:function(e){t.addressKeyword=e},expression:"addressKeyword"}})],1),a("div",{staticClass:"flex-1 ml-40"},[a("baidu-map",{staticClass:"bm-view",attrs:{zoom:t.zoom,center:t.postionMap,"scroll-wheel-zoom":!0},on:{click:t.getLocationPoint}},[a("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_LEFT"}}),a("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_SATELLITE_MAP"],anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),a("bm-local-search",{staticClass:"searchRes",attrs:{keyword:t.addressKeyword,zoom:t.zoom,"auto-viewport":!0,panel:t.showPanel},on:{infohtmlset:t.infohtmlset}}),a("bm-marker",{attrs:{position:t.postionMap,dragging:!0}})],1)],1)])])],2)],1),a("a-modal",{attrs:{title:"位置设置",width:"60%",visible:t.seatModalVisible,bodyStyle:{maxHeight:"600px",overflowY:"auto"}},on:{ok:t.handleSubmit,cancel:t.handleCancelModel}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.editSeatInfo()}}},[t._v("一键设置")])],1)],1),a("div",{staticClass:"decorate-cube"},t._l(t.seatList,(function(e,i){return a("ul",{key:e.row,staticClass:"cube-row"},t._l(e.list,(function(o,r){return a("li",{key:e.row+"_"+o.col,staticClass:"cube-item",on:{click:function(e){return t.editSeatInfo(i,r)}}},[o.seat_title?[a("div",{staticClass:"no-wrap"},[t._v(t._s(o.seat_title))]),!o.seat_price&&0!=o.seat_price||1!==o.is_buy?t._e():a("div",{staticClass:"no-wrap"},[t._v(" "+t._s(t.currency)+t._s(o.seat_price)+" ")]),0===o.is_buy?a("div",{staticClass:"no-wrap"},[t._v("不可购买")]):t._e()]:t._e()],2)})),0)})),0)],1),a("a-modal",{attrs:{title:"编辑位置",width:"60%",visible:t.editSeatModalVisible,bodyStyle:{maxHeight:"600px",overflowY:"auto"}},on:{ok:t.handleSubmit,cancel:t.handleCancelModel}},[a("a-form",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-form-item",{attrs:{label:"位置名称"}},[a("a-input",{attrs:{placeholder:"请输入位置名称"},model:{value:t.seatFormData.seat_title,callback:function(e){t.$set(t.seatFormData,"seat_title",e)},expression:"seatFormData.seat_title"}})],1),a("a-form-item",{attrs:{label:"是否可以购买"}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":0},model:{value:t.seatFormData.is_buy,callback:function(e){t.$set(t.seatFormData,"is_buy",e)},expression:"seatFormData.is_buy"}},[a("a-radio",{attrs:{value:1}},[t._v(" 可以 ")]),a("a-radio",{attrs:{value:0}},[t._v(" 不可以 ")])],1)],1),a("a-form-item",{attrs:{label:"价格"}},[a("a-input",{attrs:{placeholder:"请输入价格",type:"number",min:0},model:{value:t.seatFormData.seat_price,callback:function(e){t.$set(t.seatFormData,"seat_price",e)},expression:"seatFormData.seat_price"}})],1)],1)],1)],1)},o=[],r=a("2909"),l=a("5530"),s=a("c7eb"),n=a("1da1"),c=(a("d3b7"),a("b64b"),a("d81d"),a("b0c0"),a("a434"),a("159b"),a("498a"),a("99af"),a("a15b"),a("7db0"),a("25f0"),a("4e82"),a("4d95")),p=a("c1df"),f=a.n(p),u=(a("5c3a"),a("884f"));function m(t){return new Promise((function(e,a){var i=new FileReader;i.readAsDataURL(t),i.onload=function(){return e(i.result)},i.onerror=function(t){return a(t)}}))}f.a.locale("zh-cn");var d={components:{RichText:u["a"]},name:"AppointEdit",props:{upload_dir:{type:String,default:""}},data:function(){return{title:"添加预约活动",start_time:null,end_time:null,appoint_start_time:null,appoint_end_time:null,formData:{areas:[],appoint_id:0,title:"",content:"",label:"",phone:"",start_time:null,end_time:null,appoint_start_time:null,appoint_end_time:null,price:0,send_notice_days:0,address:"",long:0,lat:0,province_id:0,city_id:0,area_id:0,image_big:"",image_small:"",limit_type:0,limit_num:"",need_verify:1,people_type:0,can_refund:2,is_custom_form:0,custom_form:[],is_select_seat:0,is_multi_code:0,seat_row:0,seat_col:0,limit:1,seat_data:[],is_sku:0,sku_list:[],spec_list:[],appoint_btn_txt:"预约"},visible:!1,visible_map:!1,previewVisible:!1,previewVisible1:!1,confirmLoading:!1,previewImage:"",previewImage1:"",showPanel:!1,zoom:13,radioStyle:{display:"block",height:"30px",lineHeight:"30px"},postionMap:{lng:119.532268,lat:35.424015},addressKeyword:"",add:{siteName:"",site:"",jd:"",wd:""},fileList:[],fileList1:[],action:"/v20/public/index.php/common/common.UploadFile/uploadPictures",uploadName:"reply_pic",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},sel_areas:[],showTime:{format:"HH:mm"},dateFormat:"YYYY-MM-DD HH:mm",customFormOptions:[{label:"输入框",value:"text"},{label:"区域",value:"area"},{label:"选择框",value:"select"},{label:"上传图片",value:"image"},{label:"身份证号",value:"idcard"},{label:"手机号",value:"phone"},{label:"邮箱",value:"email"}],seatModalVisible:!1,seatList:[],curRowIndex:-1,curColIndex:-1,editSeatModalVisible:!1,seatFormData:{seat_title:"",is_buy:0,seat_price:0},currency:"￥",canGetSeat:!0,seat_row:"",seat_col:"",showSeatConfig:!1,skuTable:{headerList:[],bodyList:[]},updateSkuTable:!1,isGetDetail:!1}},watch:{specListData:{immediate:!0,deep:!0,handler:function(t,e){this.isGetDetail?this.isGetDetail=!1:this.updateSkuTable=!this.compare(e,t),console.log("this.isGetDetail",this.isGetDetail),console.log("this.updateSkuTable",this.updateSkuTable)}}},computed:{specListData:function(){var t=this.formData.spec_list?JSON.parse(JSON.stringify(this.formData.spec_list)):[];return t=t.length?t.map((function(t){return{name:t.name,list:t.list.map((function(t){return{name:t.name}}))}})):[],t}},methods:{moment:f.a,edit:function(t){var e=this;this.request(c["a"].getAppointMsg,{appoint_id:t}).then((function(a){if(Object.assign(e.$data,e.$options.data.call(e)),t&&(e.title=e.L("编辑预约活动")),e.confirmLoading=!1,e.visible=!0,e.fileList1=[],e.fileList=[],e.sel_areas=[],a.appoint_id){if(a.province_id&&a.city_id&&a.area_id&&(e.sel_areas=[a.province_id,a.city_id,a.area_id]),e.start_time=a.start_time?f()(a.start_time):null,e.end_time=a.end_time?f()(a.end_time):null,e.appoint_start_time=a.appoint_start_time?f()(a.appoint_start_time):null,e.appoint_end_time=a.appoint_end_time?f()(a.appoint_end_time):null,e.appoint_btn_txt=a.appoint_btn_txt,e.limit=a.limit,a.image_big){var i={uid:"logo",name:"logo_1",status:"done",url:a.image_big};e.fileList.push(i)}if(a.image_small){var o={uid:"logo_3",name:"logo_1",status:"done",url:a.image_small};e.fileList1.push(o)}a.seat_data&&a.seat_data.length&&(e.canGetSeat=!1),e.formData=a,e.formData.is_sku&&1==e.formData.is_sku&&e.formData.spec_list&&e.formData.spec_list.length&&e.addSkuTree(!0),e.postionMap.lng=a.long,e.postionMap.lat=a.lat}else{var r=e.$options.data.call(e)["formData"]||null;e.formData=r?JSON.parse(JSON.stringify(r)):null}e.$set(e.formData,"areas",a.areas)}))},disabledStartDate:function(t){return t<f()().add(-1,"d")},disabledEndDate:function(t){var e=this.start_time;return e?e.valueOf()>=t.valueOf():t<f()().add(-1,"d")},onDateStartChange:function(t,e){this.$set(this.formData,"start_time",e)},onDateEndChange:function(t,e){var a=f()(this.formData.start_time).valueOf(),i=f()(e).valueOf();i<=a?this.$message.error("活动结束时间必须大于活动开始时间！"):this.$set(this.formData,"end_time",e)},onAppointDateStartChange:function(t,e){this.$set(this.formData,"appoint_start_time",e)},onAppointDateEndChange:function(t,e){var a=f()(this.formData.appoint_start_time).valueOf(),i=f()(e).valueOf();i<=a?this.$message.error("活动结束时间必须大于活动开始时间！"):this.$set(this.formData,"appoint_end_time",e)},onChangeArea:function(t){this.sel_areas=[t[0],t[1],t[2]],this.formData.province_id=t[0],this.formData.city_id=t[1],this.formData.area_id=t[2]},showMapModel:function(){this.visible_map=!0},showPanelInput:function(){this.showPanel=!this.showPanel},handleOk:function(){this.visible_map=!1},handleCancelMap:function(){this.visible_map=!1},infohtmlset:function(t){t&&(this.formData.long=t.point.lng,this.formData.lat=t.point.lat,this.postionMap.lng=t.point.lng,this.postionMap.lat=t.point.lat)},getLocationPoint:function(t){this.formData.long=t.point.lng,this.formData.lat=t.point.lat,this.postionMap.lng=t.point.lng,this.postionMap.lat=t.point.lat,this.zoom=t.target.getZoom(),this.$set(this.formData,"long",t.point.lng),this.$set(this.formData,"lat",t.point.lat),this.$set(this.postionMap,"lat",t.point.lat),this.$set(this.postionMap,"long",t.point.lng)},handlePreview:function(t){var e=this;return Object(n["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,m(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handlePreview1:function(t){var e=this;return Object(n["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,m(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage1=t.url||t.preview,e.previewVisible1=!0;case 6:case"end":return a.stop()}}),a)})))()},handleChange:function(t){var e=t.fileList;if(this.fileList=e,e.length>0){var a=e.length-1;"done"==this.fileList[a].status&&(this.formData.image_big=this.fileList[a].response.data,this.fileList[0].uid="logo",this.fileList[0].name="logo_1",this.fileList[0].status="done",this.fileList[0].url=this.fileList[a].response.data,e.length>1&&this.fileList.splice(0,a))}else this.formData.image_big=""},handleChange1:function(t){var e=t.fileList;if(this.fileList1=e,e.length>0){var a=e.length-1;"done"==this.fileList1[a].status&&(this.formData.image_small=this.fileList1[a].response.data,this.fileList1[0].uid="logo",this.fileList1[0].name="logo_1",this.fileList1[0].status="done",this.fileList1[0].url=this.fileList[a].response.data,e.length>1&&this.fileList1.splice(0,a))}else this.formData.image_small=""},handleCancel:function(){this.previewVisible=!1},isPeopleTypeChange:function(){this.formData.people_type=value?1:0},handleCancel1:function(){this.previewVisible1=!1},handleSubmit:function(){var t=this;if(this.editSeatModalVisible)if(-1==this.curColIndex)this.seatList=this.seatList.map((function(e){return e.list=e.list.map((function(e){return e=Object(l["a"])(Object(l["a"])({},e),t.seatFormData),e})),e})),this.editSeatModalVisible=!1;else{var e=this.curRowIndex,a=this.curColIndex,i=this.seatList[e]["list"][a];i=Object(l["a"])(Object(l["a"])({},i),this.seatFormData),this.$set(this.seatList[e]["list"],a,i),this.editSeatModalVisible=!1,this.curRowIndex=-1,this.curColIndex=-1}else if(this.seatModalVisible)this.seatModalVisible=!1,this.$set(this.formData,"seat_data",this.seatList);else{if(""==this.formData.title)return this.$message.error("活动名称必填"),!1;if(""==this.formData.start_time||""==this.formData.end_time)return this.$message.error("活动时间必填"),!1;if(""==this.formData.appoint_start_time||""==this.formData.appoint_end_time)return this.$message.error("预约时间必填"),!1;if(this.formData.price<0)return this.$message.error("报名费必填"),!1;if(""==this.formData.address)return this.$message.error("详细地址必填"),!1;if(1*this.formData.long<=0||1*this.formData.lat<=0)return this.$message.error("经纬度必须选"),!1;if(1*this.formData.province_id==0||1*this.formData.city_id==0||1*this.formData.area_id==0)return this.$message.error("省市区必须选"),!1;if(1==this.formData.is_sku){if(!this.formData.spec_list)return this.$message.error("请添加规格"),!1;try{this.formData.spec_list.forEach((function(t){if(""==t.name.trim())throw new Error("请输入规格名");if(!t.list||t.list&&!t.list.length)throw new Error("请输入规格值")}))}catch(r){if(r.message)return this.$message.error(r.message),!1}if(this.updateSkuTable)return this.$message.error("规格属性变化，请重新创建规格表"),!1}if(1==this.formData.is_custom_form){if(!this.formData.custom_form.length)return this.$message.error("请添加自定义模板控件"),!1;try{this.formData.custom_form.forEach((function(t){if(""==t.title.trim())throw new Error("请输入自定义表单控件标题");if("select"==t.type&&""==t.content.trim())throw new Error("请输入选择框枚举值")}))}catch(r){if(r.message)return this.$message.error(r.message),!1}}if(this.showSeatConfig&&1==this.formData.is_select_seat&&!this.formData.seat_data.length)return this.$message.error("请设置座位位置"),!1;if(""==this.formData.image_big||""==this.formData.image_small)return this.$message.error("图片必须上传"),!1;if(1*this.formData.limit_type==1&&0==this.formData.limit_num)return this.$message.error("人数限制必须填写限制人数"),!1;if(""==this.formData.content)return this.$message.error("活动介绍必填"),!1;var o=JSON.parse(JSON.stringify(this.formData));this.$delete(o,"areas"),1==this.formData.is_sku&&(o["sku_list"]=this.handleSkuList().sku_list,o["spec_list"]=this.handleSkuList().spec_list),this.request(c["a"].saveAppoint,o).then((function(e){t.$message.success("操作成功"),t.visible=!1,t.$emit("getAppointList")}))}},handleCancelModel:function(){this.editSeatModalVisible?this.editSeatModalVisible=!1:this.seatModalVisible?this.seatModalVisible=!1:(this.visible=!1,this.$emit("getAppointList"))},addCustomFormList:function(){var t={title:"",sort:0,type:"text",content:"",is_must:0,status:1,image_max_num:0},e=this.formData.custom_form||[];e.push(t),this.$set(this.formData,"custom_form",e)},delItem:function(t,e){this.$delete(this.formData[e],t)},addSeatList:function(){var t=this;this.formData.seat_row?this.formData.seat_col?this.canGetSeat?this.request(c["a"].getSeatMap,{row:this.formData.seat_row,col:this.formData.seat_col}).then((function(e){t.seatList=e||[],t.seatModalVisible=!0,t.canGetSeat=!1,t.$set(t.formData,"seat_data",t.seatList)})):(this.seatList=this.formData.seat_data||[],this.seatModalVisible=!0):this.$message.error("请填写位置竖排"):this.$message.error("请填写位置横排")},editSeatInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(this.curRowIndex=t,this.curColIndex=e,this.editSeatModalVisible=!0,-1==t||-1==e){var a=this.$options.data.call(this)["seatFormData"]||null;this.seatFormData=a?JSON.parse(JSON.stringify(a)):null}else this.seatFormData=Object(l["a"])(Object(l["a"])({},this.seatFormData),this.seatList[this.curRowIndex]["list"][this.curColIndex])},customFormSwitchChange:function(t,e,a){this.$set(this.formData.custom_form[e],a,t?1:0)},seatNumberChange:function(t,e){this[e]!=this.formData[e]?this.canGetSeat=!0:this.canGetSeat=!1},seatNumberFocus:function(t,e){this[e]=t.target.value},addSku:function(){var t=this.formData.spec_list||[];t.push({id:0,name:"",list:[],inputVisible:!1,inputValue:""}),this.$set(this.formData,"spec_list",t)},delSkuAttr:function(t,e){this.$delete(this.formData.spec_list[t]["list"],e)},skuInputChange:function(t,e){this.$set(this.formData.spec_list[e],"inputValue",t.target.value)},skuInputConfirm:function(t,e){var a=this.formData.spec_list[e]["inputValue"].trim(),i=this.formData.spec_list[e]["list"],o=i.map((function(t){return t.name}));a&&-1===o.indexOf(a)&&(i=[].concat(Object(r["a"])(i),[{id:0,name:a}])),this.$set(this.formData.spec_list,e,Object(l["a"])(Object(l["a"])({},this.formData.spec_list[e]),{},{list:i,inputVisible:!1,inputValue:""}))},showAttrInput:function(t){var e=this;this.$set(this.formData.spec_list[t],"inputVisible",!0),this.$nextTick((function(){e.$refs["input".concat(t)][0].focus()}))},addSkuTree:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{this.formData.spec_list.forEach((function(t){if(""==t.name.trim())throw new Error("请输入规格名");if(!t.list||t.list&&!t.list.length)throw new Error("请输入规格值")}))}catch(s){if(s.message)return this.$message.error(s.message),!1}var a=[],i=[];if(!e){var o=this.formData.spec_list.map((function(t){return t.id=0,t.list.map((function(t){t.id=0})),t}));this.$set(this.formData,"spec_list",o)}this.formData.spec_list.forEach((function(t){i.push(t.name),t.list=t.list.map((function(t,e){return t.index=t.index||e,t})),a.push(t.list)}));var r=this.cartesianProductOf.apply(this,a),l={bodyList:[],headerList:[]};l.headerList=i.map((function(t,e){return{id:e,prop:t,propName:t}})),console.log("result",r),l.bodyList=r.map((function(a,o){for(var r={price:0,key:o,stock_num:0,original_num:0},l=0;l<a.length;l++)if(r[i[l]]=a[l]["name"],r["index"]=a.map((function(t){return t.index})).join("_"),a[l].id&&e){r["index"]=a.map((function(t){return t.id})).join("_");var s=t.formData.sku_list.find((function(t){return t.spec_val_id==r["index"]}));s&&(r["price"]=s.price||0,r["stock_num"]=s.stock_num||0,r["original_num"]=s.original_num||0)}return r})),this.skuTable.bodyList=l.bodyList,this.skuTable.headerList=l.headerList,console.log("this.skuTable",this.skuTable),this.isGetDetail=e,this.updateSkuTable=!1},cartesianProductOf:function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return e.reduce((function(t,e){var a=[];return t.forEach((function(t){e.forEach((function(e){a.push(t.concat([e]))}))})),a}),[[]])},handleSkuList:function(){var t=this.skuTable.bodyList.map((function(t){return{index:t.index,price:t.price-0,stock_num:t.stock_num-0,original_num:t.original_num-0}})),e=this.formData.spec_list.map((function(t,e){var a={};return t.list.forEach((function(t,e){a[e]={id:t.id||0,name:t.name}})),{id:t.id||0,name:t.name,list:a}}));return{sku_list:t,spec_list:e}},compare:function(t,e){if(t===e)return!0;var a=function(t){return"[object Object]"===Object.prototype.toString.call(t)},i=function(t){return"[object Array]"===Object.prototype.toString.call(t)};if(a(t)&&a(e)&&Object.keys(t).length===Object.keys(e).length){for(var o in t)if(t.hasOwnProperty(o)&&!this.compare(t[o],e[o]))return!1}else{if(!i(t)||!i(t)||t.length!==e.length)return!1;t=t.sort(),e=e.sort();for(var r=0,l=t.length;r<l;r++)if(!this.compare(t[r],e[r]))return!1}return!0}}},h=d,_=(a("a93b"),a("0c7c")),b=Object(_["a"])(h,i,o,!1,null,"68ffe234",null);e["default"]=b.exports},a93b:function(t,e,a){"use strict";a("1cc4")},c7eb:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("b636"),a("944a"),a("0c47"),a("23dc"),a("3410"),a("159b"),a("b0c0"),a("131a"),a("fb6a");var i=a("53ca");function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
o=function(){return e};var t,e={},a=Object.prototype,r=a.hasOwnProperty,l=Object.defineProperty||function(t,e,a){t[e]=a.value},s="function"==typeof Symbol?Symbol:{},n=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",p=s.toStringTag||"@@toStringTag";function f(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,a){return t[e]=a}}function u(t,e,a,i){var o=e&&e.prototype instanceof v?e:v,r=Object.create(o.prototype),s=new $(i||[]);return l(r,"_invoke",{value:x(t,a,s)}),r}function m(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var d="suspendedStart",h="suspendedYield",_="executing",b="completed",g={};function v(){}function L(){}function y(){}var C={};f(C,n,(function(){return this}));var w=Object.getPrototypeOf,D=w&&w(w(E([])));D&&D!==a&&r.call(D,n)&&(C=D);var k=y.prototype=v.prototype=Object.create(C);function S(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function a(o,l,s,n){var c=m(t[o],t,l);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==Object(i["a"])(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){a("next",t,s,n)}),(function(t){a("throw",t,s,n)})):e.resolve(f).then((function(t){p.value=t,s(p)}),(function(t){return a("throw",t,s,n)}))}n(c.arg)}var o;l(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,o){a(t,i,e,o)}))}return o=o?o.then(r,r):r()}})}function x(e,a,i){var o=d;return function(r,l){if(o===_)throw new Error("Generator is already running");if(o===b){if("throw"===r)throw l;return{value:t,done:!0}}for(i.method=r,i.arg=l;;){var s=i.delegate;if(s){var n=O(s,i);if(n){if(n===g)continue;return n}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===d)throw o=b,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=_;var c=m(e,a,i);if("normal"===c.type){if(o=i.done?b:h,c.arg===g)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(o=b,i.method="throw",i.arg=c.arg)}}}function O(e,a){var i=a.method,o=e.iterator[i];if(o===t)return a.delegate=null,"throw"===i&&e.iterator["return"]&&(a.method="return",a.arg=t,O(e,a),"throw"===a.method)||"return"!==i&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var r=m(o,e.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,g;var l=r.arg;return l?l.done?(a[e.resultName]=l.value,a.next=e.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,g):l:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function E(e){if(e||""===e){var a=e[n];if(a)return a.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,l=function a(){for(;++o<e.length;)if(r.call(e,o))return a.value=e[o],a.done=!1,a;return a.value=t,a.done=!0,a};return l.next=l}}throw new TypeError(Object(i["a"])(e)+" is not iterable")}return L.prototype=y,l(k,"constructor",{value:y,configurable:!0}),l(y,"constructor",{value:L,configurable:!0}),L.displayName=f(y,p,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===L||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,f(t,p,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},S(T.prototype),f(T.prototype,c,(function(){return this})),e.AsyncIterator=T,e.async=function(t,a,i,o,r){void 0===r&&(r=Promise);var l=new T(u(t,a,i,o),r);return e.isGeneratorFunction(a)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},S(k),f(k,p,"Generator"),f(k,n,(function(){return this})),f(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),a=[];for(var i in e)a.push(i);return a.reverse(),function t(){for(;a.length;){var i=a.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=E,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function i(i,o){return s.type="throw",s.arg=e,a.next=i,o&&(a.method="next",a.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var l=this.tryEntries[o],s=l.completion;if("root"===l.tryLoc)return i("end");if(l.tryLoc<=this.prev){var n=r.call(l,"catchLoc"),c=r.call(l,"finallyLoc");if(n&&c){if(this.prev<l.catchLoc)return i(l.catchLoc,!0);if(this.prev<l.finallyLoc)return i(l.finallyLoc)}else if(n){if(this.prev<l.catchLoc)return i(l.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return i(l.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=t,l.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(l)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),M(a),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var i=a.completion;if("throw"===i.type){var o=i.arg;M(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,a,i){return this.delegate={iterator:E(e),resultName:a,nextLoc:i},"next"===this.method&&(this.arg=t),g}},e}}}]);