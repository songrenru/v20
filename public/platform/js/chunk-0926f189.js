(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0926f189","chunk-5e66ac0e","chunk-6fabb856","chunk-1d6ac08e","chunk-2d702dc0","chunk-12d7c53e","chunk-33f76516","chunk-a56e8564","chunk-dc3fb3fa"],{"01c21":function(e,t,a){"use strict";a("627f")},"23b2":function(e,t,a){},"242c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:1400,footer:null,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination,loading:e.loading},on:{change:e.table_change},scopedSlots:e._u([{key:"operation",fn:function(t,i){return a("span",{},[1==i.is_paid?a("div",[a("a",{on:{click:function(t){return e.$refs.PrintModel.add(i.order_id,i.pigcms_id)}}},[e._v("打印")])]):a("div",[a("a-popconfirm",{staticClass:"ant-dropdown-link",attrs:{title:"确认催缴?","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.send_message(i.order_id)}}},[a("a",[e._v("一键催缴")])])],1)])}}])}),a("get-print-template",{ref:"PrintModel"})],1)},n=[],o=(a("ac1f"),a("841c"),a("a0e0")),r=a("ce95"),s=[{title:"订单编号",dataIndex:"order_id",key:"order_id"},{title:"收费项目",dataIndex:"project_name",key:"project_name"},{title:"收费所属类别",dataIndex:"order_type",key:"order_type"},{title:"单价（元）",dataIndex:"unit_price",key:"unit_price"},{title:"倍率",dataIndex:"rate",key:"rate"},{title:"抄表时间",dataIndex:"add_time",key:"add_time"},{title:"起度",dataIndex:"start_ammeter",key:"start_ammeter"},{title:"止度",dataIndex:"last_ammeter",key:"last_ammeter"},{title:"应收费用（元）",dataIndex:"total_money",key:"total_money"},{title:"实缴费用（元）",dataIndex:"pay_money",key:"pay_money"},{title:"住户余额支付（元）",dataIndex:"now_money",key:"now_money"},{title:"备注",dataIndex:"note",key:"note"},{title:"操作",dataIndex:"operation",width:"100px",key:"operation",scopedSlots:{customRender:"operation"}}],l=[],c={name:"orderList",filters:{},components:{GetPrintTemplate:r["default"]},data:function(){return{reply_content:"",pagination:{current:1,pageSize:10,total:10},search:{keyword:"",page:1},form:this.$form.createForm(this),visible:!1,loading:!1,data:l,columns:s,title:"",confirmLoading:!1,uid:""}},methods:{List:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.title="消费记录",this.loading=!0,t>0&&(this.$set(this.pagination,"current",1),this.uid=t,this.search["uid"]=this.uid),this.search["page"]=this.pagination.current,this.request(o["a"].storageUserOrderRecord,this.search).then((function(t){e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data=t.list,e.loading=!1,e.confirmLoading=!0,e.visible=!0}))},send_message:function(e){var t=this;this.request(o["a"].storageUserSendMessage,{order_id:e}).then((function(e){t.$message.success("发送成功")}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.id="0",e.form=e.$form.createForm(e)}),500)},cancel:function(){},table_change:function(e){var t=this;console.log("e",e),e.current&&e.current>0&&(t.pagination.current=e.current,t.List())},searchList:function(){this.table_change({current:1,pageSize:10,total:10})},resetList:function(){this.$set(this.pagination,"current",1),this.search.keyword="",this.search.page=1,this.table_change({current:1,pageSize:10,total:10})}}},d=c,p=(a("8772"),a("2877")),_=Object(p["a"])(d,i,n,!1,null,null,null);t["default"]=_.exports},"36a8":function(e,t,a){},"3b10":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-suggestions-list-box userList"},[a("div",{staticClass:"content-p1"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("a-collapse",{attrs:{accordion:""}},[a("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[a("span",{staticStyle:{"font-weight":"500"}},[e._v(" 1、展示的是当前小区手机号唯一的业主 "),a("br"),e._v(" 2、不同手机号业主对应的余额、关联房间数、关联车位数 "),a("br"),e._v(" 例如： 张三在平台注册了一个账号，手机号是 18312345678， 并且在该小区1号楼和5号楼都是户主，对于小区而言他仅仅是一个业主，只是拥有了多套房产（或车位），所以这里不会显示两条张三的信息。而且这个住户的余额就是张三在这个平台上的总余额 。 如果张三分别用两个手机号（18312345678、18387654321）注册了平台用户且分别绑定了该小区的两个不同的房间，那么这里就会显示两个张三的余额信息 ")])])],1)],1)]),a("div",{staticClass:"search-box"},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-input-group",{attrs:{compact:""}},[a("p",{staticStyle:{"margin-top":"5px"}},[e._v("姓名：")]),a("a-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入姓名"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-input-group",{attrs:{compact:""}},[a("p",{staticStyle:{"margin-top":"5px"}},[e._v("手机号：")]),a("a-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入手机号"},model:{value:e.search.phone,callback:function(t){e.$set(e.search,"phone",t)},expression:"search.phone"}})],1)],1),a("a-col",{attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(t){return e.searchList()}}},[e._v(" 查询 ")])],1),a("a-col",{attrs:{md:2,sm:24}},[a("a-button",{on:{click:function(t){return e.resetList()}}},[e._v("重置")])],1)],1),a("a-row",{staticStyle:{"margin-top":"24px"},attrs:{gutter:48}},[a("a-col",{attrs:{md:3}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.addAllUserMoney()}}},[e._v(" 批量修改住户余额 ")])],1),a("a-col",{attrs:{md:2}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.uploadMoneyModel.add()}}},[e._v("导入住户余额")])],1),1==e.is_customized_meter_reading?a("a-col",{attrs:{md:2}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.excelUserExportData()}}},[e._v("Excel导出")])],1):e._e(),1==e.is_customized_meter_reading?a("a-col",{staticStyle:{"padding-left":"10px"},attrs:{md:2}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.balanceLimitTipsSet()}}},[e._v("住户余额最低限额")])],1):e._e(),1==e.is_customized_meter_reading?a("a-col",{staticStyle:{"padding-left":"42px"},attrs:{md:2}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.balancePrestoreSet()}}},[e._v("预存设置")])],1):e._e()],1)],1),a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination,loading:e.loading,"row-selection":e.rowSelection,rowKey:"uid"},scopedSlots:e._u([{key:"action",fn:function(t,i){return a("span",{},[a("a",{staticClass:"but_1",on:{click:function(t){return e.$refs.balanceModel.add(i.uid,e.is_customized_meter_reading)}}},[e._v("增加/减少")]),a("a",{staticClass:"but_1",on:{click:function(t){return e.$refs.balanceListModel.List(i.uid,e.is_customized_meter_reading)}}},[e._v("余额记录")]),a("a",{staticClass:"but_1",on:{click:function(t){return e.$refs.orderListModel.List(i.uid,e.is_customized_meter_reading)}}},[e._v("消费记录")])])}},{key:"room_num",fn:function(t,i){return a("span",{},[a("a",{staticClass:"but_1",on:{click:function(t){return e.$refs.roomListModel.List(i.uid)}}},[e._v(e._s(i.room_num))])])}},{key:"position_num",fn:function(t,i){return a("span",{},[a("a",{staticClass:"but_1",on:{click:function(t){return e.$refs.positionListModel.List(i.uid)}}},[e._v(e._s(i.position_num))])])}}])}),a("a-modal",{attrs:{title:"导出提示",width:450,visible:e.exportUserVisible,maskClosable:!1,loading:e.loading,footer:null,closable:!1,centered:!0}},[a("div",{staticStyle:{padding:"15px",color:"black","font-size":"16px"}},[e._v(" 正在为您导出数据，你稍等 . . . ")])]),a("a-modal",{attrs:{title:"住户余额最低限额",width:700,visible:e.balanceLimitVisible,maskClosable:!1,confirmLoading:e.confirmLoading,centered:!0},on:{ok:e.handleLimitSubmit,cancel:e.handleLimitCancel}},[a("div",{staticClass:"content-p1"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("a-collapse",{attrs:{accordion:""}},[a("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[a("span",{staticStyle:{"font-weight":"500"}},[e._v(" 业主冷水、热水、电费余额账号，小于或等于设置的住户最低余额限额时，"),a("br"),e._v(" 系统自动发送短信给业主，实施短暂停水或停电，60秒后自动恢复，提示业主及时预存余额 ")])])],1)],1)]),a("div",{staticClass:"balance_limit_div"},[a("a-form",{staticClass:"balance_limit_tips",attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"冷水余额"}},[a("a-switch",{staticStyle:{"margin-right":"30px","margin-left":"30px"},attrs:{"checked-children":"开启","un-checked-children":"关闭"},on:{change:e.waterSwitchChange},model:{value:e.cold_water_balance_open,callback:function(t){e.cold_water_balance_open=t},expression:"cold_water_balance_open"}}),e._v(" "),a("a-input-number",{staticStyle:{width:"180px"},attrs:{min:0,max:9999,precision:0,step:1,disabled:!e.cold_water_balance.is_open,placeholder:"请设置最低的余额金额"},model:{value:e.cold_water_balance.balance,callback:function(t){e.$set(e.cold_water_balance,"balance",t)},expression:"cold_water_balance.balance"}}),e._v(" 元 ")],1),a("a-form-item",{attrs:{label:"热水余额"}},[a("a-switch",{staticStyle:{"margin-right":"30px","margin-left":"30px"},attrs:{"checked-children":"开启","un-checked-children":"关闭"},on:{change:e.hotWaterSwitchChange},model:{value:e.hot_water_balance_open,callback:function(t){e.hot_water_balance_open=t},expression:"hot_water_balance_open"}}),e._v(" "),a("a-input-number",{staticStyle:{width:"180px"},attrs:{min:0,max:9999,precision:0,step:1,disabled:!e.hot_water_balance.is_open,placeholder:"请设置最低的余额金额"},model:{value:e.hot_water_balance.balance,callback:function(t){e.$set(e.hot_water_balance,"balance",t)},expression:"hot_water_balance.balance"}}),e._v(" 元 ")],1),a("a-form-item",{attrs:{label:"电费余额"}},[a("a-switch",{staticStyle:{"margin-right":"30px","margin-left":"30px"},attrs:{"checked-children":"开启","un-checked-children":"关闭"},on:{change:e.onElectricSwitchChange},model:{value:e.electric_balance_open,callback:function(t){e.electric_balance_open=t},expression:"electric_balance_open"}}),e._v(" "),a("a-input-number",{staticStyle:{width:"180px"},attrs:{min:0,max:9999,precision:0,step:1,disabled:!e.electric_balance.is_open,placeholder:"请设置最低的余额金额"},model:{value:e.electric_balance.balance,callback:function(t){e.$set(e.electric_balance,"balance",t)},expression:"electric_balance.balance"}}),e._v(" 元 ")],1)],1)],1)]),a("a-modal",{attrs:{title:"预存设置",width:850,visible:e.balancePrestoreVisible,maskClosable:!1,confirmLoading:e.confirmLoading,centered:!0},on:{ok:e.handlePrestoreSubmit,cancel:e.handlePrestoreCancel}},[a("div",{staticClass:"content-p1"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("a-collapse",{attrs:{accordion:""}},[a("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[a("span",{staticStyle:{"font-weight":"500"}},[e._v(" 启用后需要勾选收费类别 ，勾选中的收费类别所生成的待缴账单，必须要先缴完，才能进行预存余额 ")])])],1)],1)]),a("div",{staticClass:"balance_limit_div balance_prestore_div"},[a("a-form",{staticClass:"balance_limit_tips",attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"冷水预存设置"}},[a("a-switch",{staticStyle:{"margin-right":"30px","margin-left":"30px"},attrs:{"checked-children":"开启","un-checked-children":"关闭"},on:{change:e.waterSwitchPrestoreChange},model:{value:e.cold_water_prestore_open,callback:function(t){e.cold_water_prestore_open=t},expression:"cold_water_prestore_open"}})],1),e.cold_water_prestore_open?a("a-form-item",[a("a-checkbox-group",{staticStyle:{"margin-left":"25px","font-size":"20px"},attrs:{"default-value":e.cold_water_prestore.prestore_set},on:{change:e.onColdWaterChangePrestore}},e._l(e.charge_type_arr,(function(t,i){return a("a-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1):e._e(),a("a-form-item",{attrs:{label:"热水预存设置"}},[a("a-switch",{staticStyle:{"margin-right":"30px","margin-left":"30px"},attrs:{"checked-children":"开启","un-checked-children":"关闭"},on:{change:e.hotWaterSwitchPrestoreChange},model:{value:e.hot_water_prestore_open,callback:function(t){e.hot_water_prestore_open=t},expression:"hot_water_prestore_open"}})],1),e.hot_water_prestore_open?a("a-form-item",[a("a-checkbox-group",{staticStyle:{"margin-left":"25px","font-size":"20px"},attrs:{"default-value":e.hot_water_prestore.prestore_set},on:{change:e.onHotWaterChangePrestore}},e._l(e.charge_type_arr,(function(t,i){return a("a-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1):e._e(),a("a-form-item",{attrs:{label:"电费预存设置"}},[a("a-switch",{staticStyle:{"margin-right":"30px","margin-left":"30px"},attrs:{"checked-children":"开启","un-checked-children":"关闭"},on:{change:e.onElectricSwitchPrestoreChange},model:{value:e.electric_prestore_open,callback:function(t){e.electric_prestore_open=t},expression:"electric_prestore_open"}})],1),e.electric_prestore_open?a("a-form-item",[a("a-checkbox-group",{staticStyle:{"margin-left":"25px","font-size":"20px"},attrs:{"default-value":e.electric_prestore.prestore_set},on:{change:e.onElectricChangePrestore}},e._l(e.charge_type_arr,(function(t,i){return a("a-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1):e._e(),a("a-form-item",{attrs:{label:"燃气费预存设置"}},[a("a-switch",{staticStyle:{"margin-right":"30px","margin-left":"30px"},attrs:{"checked-children":"开启","un-checked-children":"关闭"},on:{change:e.onGasSwitchPrestoreChange},model:{value:e.gas_prestore_open,callback:function(t){e.gas_prestore_open=t},expression:"gas_prestore_open"}})],1),e.gas_prestore_open?a("a-form-item",[a("a-checkbox-group",{staticStyle:{"margin-left":"25px","font-size":"20px"},attrs:{"default-value":e.gas_prestore.prestore_set},on:{change:e.onGasChangePrestore}},e._l(e.charge_type_arr,(function(t,i){return a("a-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1):e._e()],1)],1)]),a("balanceInfo",{ref:"balanceModel",on:{ok:e.balanceInfo}}),a("allBalanceInfo",{ref:"allBalanceModel",on:{ok:e.balanceInfo}}),a("balanceList",{ref:"balanceListModel",on:{ok:e.balanceListInfo}}),a("roomList",{ref:"roomListModel",on:{ok:e.roomListInfo}}),a("positionList",{ref:"positionListModel",on:{ok:e.positionListInfo}}),a("orderList",{ref:"orderListModel",on:{ok:e.orderInfo}}),a("uploadUserMoney",{ref:"uploadMoneyModel",on:{ok:e.orderInfo}})],1)},n=[],o=(a("7d24"),a("dfae")),r=(a("ac1f"),a("841c"),a("a0e0")),s=a("6f4b"),l=a("4cd9"),c=a("3bd8"),d=a("e617"),p=a("dd03"),_=a("242c"),u=a("c2d4"),m=[{title:"姓名",dataIndex:"name",key:"name"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"余额",dataIndex:"now_money",key:"now_money"},{title:"关联房间数",dataIndex:"room_num",key:"room_num",scopedSlots:{customRender:"room_num"}},{title:"关联车位数",dataIndex:"position_num",key:"position_num",scopedSlots:{customRender:"position_num"}},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"action"}}],h=[],f={name:"storageUserBalanceList",filters:{},components:{allBalanceInfo:l["default"],balanceInfo:s["default"],balanceList:c["default"],positionList:p["default"],roomList:d["default"],orderList:_["default"],uploadUserMoney:u["default"],"a-collapse":o["a"],"a-collapse-panel":o["a"].Panel},data:function(){var e=this;return{reply_content:"",pagination:{current:1,pageSize:10,total:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(e){return"共 ".concat(e," 条")},onShowSizeChange:function(t,a){return e.onTableChange(t,a)},onChange:function(t,a){return e.onTableChange(t,a)}},search:{name:"",phone:"",page:1},form:this.$form.createForm(this),visible:!1,loading:!1,data:h,columns:m,oldVersion:"",selectedRowKeys:[],is_customized_meter_reading:0,exportUserVisible:!1,balanceLimitVisible:!1,balancePrestoreVisible:!1,cold_water_balance:{is_open:0,balance:""},cold_water_balance_open:!1,hot_water_balance:{is_open:0,balance:""},hot_water_balance_open:!1,electric_balance:{is_open:0,balance:""},electric_balance_open:!1,confirmLoading:!1,charge_type_arr:[],cold_water_prestore:{is_open:0,prestore_set:[]},cold_water_prestore_open:!1,hot_water_prestore:{is_open:0,prestore_set:[]},hot_water_prestore_open:!1,electric_prestore:{is_open:0,prestore_set:[]},electric_prestore_open:!1,gas_prestore:{is_open:0,prestore_set:[]},gas_prestore_open:!1}},mounted:function(){this.getConfigCustomization(),this.getList()},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}}},methods:{onSelectChange:function(e,t){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",t),this.selectedRowKeys=e,console.log("villagess",this.selectedRowKeys)},onTableChange:function(e,t){this.pagination.current=e,this.pagination.pageSize=t,this.getList(),console.log("onTableChange==>",e,t)},getConfigCustomization:function(){var e=this;this.request(r["a"].getConfigCustomization).then((function(t){console.log("+++++++",t),e.is_customized_meter_reading=0,t&&t.is_customized_meter_reading&&(e.is_customized_meter_reading=t.is_customized_meter_reading),1==e.is_customized_meter_reading&&(e.columns=[{title:"姓名",dataIndex:"name",key:"name"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"冷水余额",dataIndex:"cold_water_balance",key:"cold_water_balance"},{title:"热水余额",dataIndex:"hot_water_balance",key:"hot_water_balance"},{title:"电费余额",dataIndex:"electric_balance",key:"electric_balance"},{title:"物业余额",dataIndex:"now_money",key:"now_money"},{title:"关联房间数",dataIndex:"room_num",key:"room_num",scopedSlots:{customRender:"room_num"}},{title:"关联车位数",dataIndex:"position_num",key:"position_num",scopedSlots:{customRender:"position_num"}},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"action"}}])}))},getList:function(){var e=this;this.loading=!0,this.search["page"]=this.pagination.current,this.search["limit"]=this.pagination.pageSize,this.request(r["a"].storageUserList,this.search).then((function(t){e.pagination.total=t.count?t.count:0,e.data=t.list,e.loading=!1,e.oldVersion=t.oldVersion,e.cold_water_balance_open=!1,e.hot_water_balance_open=!1,e.electric_balance_open=!1,e.cold_water_prestore_open=!1,e.hot_water_prestore_open=!1,e.electric_prestore_open=!1,e.gas_prestore_open=!1,void 0!=t.meter_extended_data&&t.meter_extended_data&&t.meter_extended_data.cold_water_balance&&(e.cold_water_balance=t.meter_extended_data.cold_water_balance,e.cold_water_balance_open=!!e.cold_water_balance.is_open),void 0!=t.meter_extended_data&&t.meter_extended_data&&t.meter_extended_data.hot_water_balance&&(e.hot_water_balance=t.meter_extended_data.hot_water_balance,e.hot_water_balance_open=!!e.hot_water_balance.is_open),void 0!=t.meter_extended_data&&t.meter_extended_data&&t.meter_extended_data.electric_balance&&(e.electric_balance=t.meter_extended_data.electric_balance,e.electric_balance_open=!!e.electric_balance.is_open),void 0!=t.meter_extended_data&&t.meter_extended_data&&t.meter_extended_data.cold_water_prestore&&(e.cold_water_prestore=t.meter_extended_data.cold_water_prestore,e.cold_water_prestore_open=!!e.cold_water_prestore.is_open),void 0!=t.meter_extended_data&&t.meter_extended_data&&t.meter_extended_data.hot_water_prestore&&(e.hot_water_prestore=t.meter_extended_data.hot_water_prestore,e.hot_water_prestore_open=!!e.hot_water_prestore.is_open),void 0!=t.meter_extended_data&&t.meter_extended_data&&t.meter_extended_data.electric_prestore&&(e.electric_prestore=t.meter_extended_data.electric_prestore,e.electric_prestore_open=!!e.electric_prestore.is_open),void 0!=t.meter_extended_data&&t.meter_extended_data&&t.meter_extended_data.gas_prestore&&(e.gas_prestore=t.meter_extended_data.gas_prestore,e.gas_prestore_open=!!e.gas_prestore.is_open),void 0!=t.charge_type_arr&&t.charge_type_arr&&(e.charge_type_arr=t.charge_type_arr)}))},balanceLimitTipsSet:function(){this.balancePrestoreVisible=!1,this.balanceLimitVisible=!0},balancePrestoreSet:function(){this.balanceLimitVisible=!1,this.balancePrestoreVisible=!0},handleLimitSubmit:function(){var e=this;this.confirmLoading=!0;var t={};t.cold_water_balance=this.cold_water_balance,t.hot_water_balance=this.hot_water_balance,t.electric_balance=this.electric_balance,console.log(t),this.request(r["a"].storageLimitBalanceTips,t).then((function(t){e.confirmLoading=!1,e.handleLimitCancel(),e.$message.success("保存成功！"),e.getList()})).catch((function(t){e.confirmLoading=!1}))},handleLimitCancel:function(){this.balanceLimitVisible=!1,this.balancePrestoreVisible=!1,this.confirmLoading=!1},handlePrestoreCancel:function(){this.balanceLimitVisible=!1,this.balancePrestoreVisible=!1,this.confirmLoading=!1},waterSwitchChange:function(e){this.cold_water_balance.is_open=e?1:0},hotWaterSwitchChange:function(e){this.hot_water_balance.is_open=e?1:0},onElectricSwitchChange:function(e){this.electric_balance.is_open=e?1:0},waterSwitchPrestoreChange:function(e){this.cold_water_prestore.is_open=e?1:0},onColdWaterChangePrestore:function(e){this.cold_water_prestore.prestore_set=e,console.log("checkedValue",e)},hotWaterSwitchPrestoreChange:function(e){this.hot_water_prestore.is_open=e?1:0},onHotWaterChangePrestore:function(e){this.hot_water_prestore.prestore_set=e,console.log("checkedValue",e)},onElectricSwitchPrestoreChange:function(e){this.electric_prestore.is_open=e?1:0},onElectricChangePrestore:function(e){this.electric_prestore.prestore_set=e,console.log("checkedValue",e)},onGasSwitchPrestoreChange:function(e){this.gas_prestore.is_open=e?1:0},onGasChangePrestore:function(e){this.gas_prestore.prestore_set=e,console.log("checkedValue",e)},handlePrestoreSubmit:function(){var e=this,t={};return t.cold_water_prestore=this.cold_water_prestore,1*this.cold_water_prestore.is_open==1&&this.cold_water_prestore.prestore_set.length<1?(this.$message.error("请至少勾选一个冷水预存设置项！"),!1):(t.hot_water_prestore=this.hot_water_prestore,1*this.hot_water_prestore.is_open==1&&this.hot_water_prestore.prestore_set.length<1?(this.$message.error("请至少勾选一个热水预存设置项！"),!1):(t.electric_prestore=this.electric_prestore,1*this.electric_prestore.is_open==1&&this.electric_prestore.prestore_set.length<1?(this.$message.error("请至少勾选一个电费预存设置项！"),!1):(t.gas_prestore=this.gas_prestore,1*this.gas_prestore.is_open==1&&this.gas_prestore.prestore_set.length<1?(this.$message.error("请至少勾选一个燃气费预存设置项！"),!1):(this.confirmLoading=!0,void this.request(r["a"].storageFeePrestoreSet,t).then((function(t){e.confirmLoading=!1,e.handlePrestoreCancel(),e.$message.success("保存成功！"),e.getList()})).catch((function(t){e.confirmLoading=!1}))))))},excelUserExportData:function(){var e=this;this.exportUserVisible=!0,this.loading=!0,this.request(r["a"].exportUserBalanceRecord,this.search).then((function(t){console.log("res",t),t&&t.url&&(window.location.href=t.url),e.loading=!1,e.exportUserVisible=!1})).catch((function(t){e.loading=!1,e.exportUserVisible=!1}))},addAllUserMoney:function(){if(console.log("uid",this.selectedRowKeys),!(this.selectedRowKeys.length>0))return this.$message.error("请先选择用户"),!1;this.$refs.allBalanceModel.add(this.selectedRowKeys,this.is_customized_meter_reading)},balanceInfo:function(e){this.getList()},balanceListInfo:function(){this.getList()},roomListInfo:function(){this.getList()},positionListInfo:function(){this.getList()},orderInfo:function(e){this.getList()},searchList:function(){console.log("search",this.search),this.pagination.current=1,this.pagination.pageSize=10,this.table_change({current:1,pageSize:10,total:10})},table_change:function(e){console.log("e",e),e.current&&e.current>0&&(this.pagination.current=e.current,this.page=e.current,this.getList())},resetList:function(){this.search={name:"",phone:"",page:1},this.pagination.current=1,this.pagination.pageSize=10,this.table_change({current:1,pageSize:10,total:10})}}},g=f,b=(a("01c21"),a("2877")),v=Object(b["a"])(g,i,n,!1,null,"36323361",null);t["default"]=v.exports},"3bd8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{title:e.title,width:1300,footer:null,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[1==e.is_customized_meter_reading?a("div",{staticClass:"search-box",staticStyle:{margin:"0px 0px 10px 20px"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("预存类型：")]),a("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择预存类型"},model:{value:e.money_type,callback:function(t){e.money_type=t},expression:"money_type"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("全部")]),a("a-select-option",{attrs:{value:"4"}},[e._v("冷水")]),a("a-select-option",{attrs:{value:"3"}},[e._v("热水")]),a("a-select-option",{attrs:{value:"2"}},[e._v("电费")]),a("a-select-option",{attrs:{value:"1"}},[e._v("物业费")])],1)],1),a("a-col",{attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(t){return e.searchList()}}},[e._v(" 查询 ")])],1),1==e.is_customized_meter_reading?a("a-col",{attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.excelExportData()}}},[e._v("Excel导出")])],1):e._e()],1)],1):e._e(),a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination,loading:e.loading,"row-key":function(e){return e.id}},on:{change:e.table_change},scopedSlots:e._u([{key:"money",fn:function(t,i){return a("span",{},[1==i.type?a("div",{staticStyle:{color:"green"}},[e._v(e._s(i.money))]):e._e(),2==i.type?a("div",{staticStyle:{color:"red"}},[e._v(e._s(i.money))]):e._e()])}}])})],1),a("a-modal",{attrs:{title:"导出提示",width:450,visible:e.exportVisible,maskClosable:!1,confirmLoading:e.confirmLoading,footer:null,closable:!1,centered:!0}},[a("div",{staticStyle:{padding:"15px",color:"black","font-size":"16px"}},[e._v(" 正在为您导出数据，你稍等 . . . ")])])],1)},n=[],o=(a("ac1f"),a("841c"),a("a0e0")),r=[{title:"订单编号",dataIndex:"order_no",key:"order_no"},{title:"预存时间",dataIndex:"add_time",key:"add_time"},{title:"金额变更前（元）",dataIndex:"current_money",key:"current_money"},{title:"缴费金额（元）",dataIndex:"money",key:"money",scopedSlots:{customRender:"money"}},{title:"金额变更后（元）",dataIndex:"after_price",key:"after_price"},{title:"备注",dataIndex:"desc",key:"desc"}],s=[],l={name:"balanceList",filters:{},components:{},data:function(){return{reply_content:"",pagination:{current:1,pageSize:10,total:10},search:{uid:"",keyword:"",page:1},form:this.$form.createForm(this),visible:!1,loading:!1,data:s,columns:r,title:"",confirmLoading:!1,is_customized_meter_reading:0,uid:"",money_type:"0",exportVisible:!1}},methods:{List:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.title="余额记录",this.uid=e||0,this.loading=!0,this.exportVisible=!1,this.is_customized_meter_reading=t||0,1==this.is_customized_meter_reading&&(this.columns=[{title:"订单编号",dataIndex:"order_no",key:"order_no"},{title:"预存类型",dataIndex:"money_type_str",key:"money_type_str"},{title:"预存时间",dataIndex:"add_time",key:"add_time"},{title:"金额变更前（元）",dataIndex:"current_money",key:"current_money"},{title:"缴费金额（元）",dataIndex:"money",key:"money",scopedSlots:{customRender:"money"}},{title:"金额变更后（元）",dataIndex:"after_price",key:"after_price"},{title:"备注",dataIndex:"desc",key:"desc"}]),this.getListData()},getListData:function(){var e=this;this.uid>0&&(this.$set(this.pagination,"current",1),this.search["uid"]=this.uid),this.search["page"]=this.pagination.current,this.search["money_type"]=this.money_type,this.request(o["a"].storageUserBalanceRecord,this.search).then((function(t){e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data=t.list,e.loading=!1,e.confirmLoading=!0,e.visible=!0}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.id="0",e.form=e.$form.createForm(e)}),500)},cancel:function(){},excelExportData:function(){var e=this;this.exportVisible=!0,this.loading=!0,this.confirmLoading=!0,this.search["uid"]=this.uid,this.search["money_type"]=this.money_type,this.request(o["a"].excelExportBalanceRecord,this.search).then((function(t){console.log("res",t),t&&t.url&&(window.location.href=t.url),e.loading=!1,e.exportVisible=!1,e.confirmLoading=!1})).catch((function(t){e.loading=!1,e.exportVisible=!1,e.confirmLoading=!1}))},table_change:function(e){var t=this;console.log("e",e),e.current&&e.current>0&&(t.pagination.current=e.current,t.getListData())},searchList:function(){console.log("search",this.search),this.table_change({current:1,pageSize:10,total:10})},resetList:function(){this.search.keyword="",this.search.page=1,this.table_change({current:1,pageSize:10,total:10})}}},c=l,d=(a("755c"),a("2877")),p=Object(d["a"])(c,i,n,!1,null,null,null);t["default"]=p.exports},"4cd9":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:1e3,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{staticClass:"balance_info",attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("用户列表")]),a("a-table",{staticClass:"components-table-demo-nested",staticStyle:{"padding-left":"100px"},attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination},on:{change:e.table_change}})],1),1==e.is_customized_meter_reading?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("label",{staticClass:"label_col ant-form-item-required"},[e._v("余额类型")]),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.opt_money_type",{initialValue:e.post.opt_money_type}],expression:"['post.opt_money_type', {initialValue:post.opt_money_type}]"}],staticStyle:{width:"180px"},attrs:{placeholder:"请选择余额类型"}},[a("a-select-option",{attrs:{value:"cold_water_balance"}},[e._v("冷水余额")]),a("a-select-option",{attrs:{value:"hot_water_balance"}},[e._v("热水余额")]),a("a-select-option",{attrs:{value:"electric_balance"}},[e._v("电费余额")]),a("a-select-option",{attrs:{value:"current_money"}},[e._v("物业余额")])],1),a("span",{staticStyle:{"margin-left":"15px"}},[e._v(" 请选择要增加或减少余额的类型")])],1),a("a-col",{attrs:{span:6}})],1):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("操作类型")]),a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.status",{initialValue:e.post.status}],expression:"['post.status', {initialValue:post.status}]"}]},[a("a-radio",{attrs:{value:1}},[e._v(" 增加 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 减少 ")])],1),a("span",{staticStyle:{"margin-left":"15px"}},[e._v("操作类型为减少时，如果用户相应余额不够将")])],1),a("a-form-item",{attrs:{label:"",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("缴费金额")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.price",{initialValue:e.post.price,rules:[{required:!0,message:e.L("请输入缴费金额！")}]}],expression:"['post.price',{ initialValue: post.price, rules: [{ required: true, message: L('请输入缴费金额！') }] }]"}],staticStyle:{width:"300px"},attrs:{placeholder:"请输入缴费金额",min:0,maxLength:10,oninput:"value=value.replace(/[^\\d.]/g, '').replace(/\\.{2,}/g, '.').replace('.', '$#$').replace(/\\./g, '').replace('$#$', '.').replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/, '$1$2.$3').replace(/^\\./g, '')",suffix:"元"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("备注")]),a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.remarks",{initialValue:e.post.remarks,rules:[{required:!0,message:e.L("请输入备注！")}]}],expression:"['post.remarks',{ initialValue: post.remarks, rules: [{ required: true, message: L('请输入备注！') }] }]"}],staticClass:"textarea",attrs:{placeholder:"请输入备注",rows:4}})],1),a("a-col",{attrs:{span:6}})],1)],1)],1)],1)},n=[],o=(a("ac1f"),a("841c"),a("a0e0")),r=[{title:"姓名",dataIndex:"name",key:"name"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"余额",dataIndex:"now_money",key:"now_money"}],s=[],l={components:{},data:function(){return{reply_content:"",pagination:{current:1,pageSize:10,total:10},search:{name:"",phone:"",page:1},data:s,columns:r,title:"新建",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),sensitive_info:[],visible:!1,uid:[],post:{pigcms_id:0,now_money:"",status:1,price:"",uid:0,remarks:"",opt_money_type:"current_money"},is_disabled:!0,is_customized_meter_reading:0}},mounted:function(){},methods:{add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this;a.title="增加/减少",a.visible=!0,a.post.status=1,a.post.price="",a.post.remarks="",a.uid=e,a.post.opt_money_type="current_money",this.is_customized_meter_reading=0,t&&(this.is_customized_meter_reading=t),1==this.is_customized_meter_reading&&(this.columns=[{title:"姓名",dataIndex:"name",key:"name"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"冷水余额",dataIndex:"cold_water_balance",key:"cold_water_balance"},{title:"热水余额",dataIndex:"hot_water_balance",key:"hot_water_balance"},{title:"电费余额",dataIndex:"electric_balance",key:"electric_balance"},{title:"物业费余额",dataIndex:"now_money",key:"now_money"}]),a.request(o["a"].storageUserBalance,{uid:e}).then((function(t){a.post.uid=e,a.post.now_money=t.current_money})),a.List()},List:function(){var e=this;this.search["uid"]=this.uid,this.search["page"]=this.pagination.current,this.request(o["a"].storageUserList,this.search).then((function(t){e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data=t.list}))},table_change:function(e){var t=this;console.log("e",e),e.current&&e.current>0&&(t.pagination.current=e.current,t.List())},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){if(t)e.confirmLoading=!1;else{a.post.uid=e.uid;var i=o["a"].addAllVillageUserMoney;console.log("param",a.post),e.request(i,a.post).then((function(t){e.$message.success("操作成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,console.log(123),e.$emit("ok")}),1500),console.log(345)})).catch((function(t){e.confirmLoading=!1}))}}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.post.id=0,e.form=e.$form.createForm(e)}),500)}}},c=l,d=(a("e24a"),a("2877")),p=Object(d["a"])(c,i,n,!1,null,"00e46a40",null);t["default"]=p.exports},"53ef":function(e,t,a){},"57ac":function(e,t,a){"use strict";a("928b")},5882:function(e,t,a){},"627f":function(e,t,a){},"6f4b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{staticClass:"balance_info",attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col "},[e._v("姓名")]),a("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:100,disabled:e.is_disabled},model:{value:e.post.nickname,callback:function(t){e.$set(e.post,"nickname",t)},expression:"post.nickname"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col "},[e._v("手机号")]),a("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:100,disabled:e.is_disabled},model:{value:e.post.phone,callback:function(t){e.$set(e.post,"phone",t)},expression:"post.phone"}})],1),a("a-col",{attrs:{span:6}})],1),1==e.is_customized_meter_reading?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col "},[e._v("冷水余额")]),a("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:30,disabled:e.is_disabled,suffix:"元"},model:{value:e.cold_water_balance,callback:function(t){e.cold_water_balance=t},expression:"cold_water_balance"}})],1),a("a-col",{attrs:{span:6}})],1):e._e(),1==e.is_customized_meter_reading?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col "},[e._v("热水余额")]),a("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:30,disabled:e.is_disabled,suffix:"元"},model:{value:e.hot_water_balance,callback:function(t){e.hot_water_balance=t},expression:"hot_water_balance"}})],1),a("a-col",{attrs:{span:6}})],1):e._e(),1==e.is_customized_meter_reading?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col "},[e._v("电费余额")]),a("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:30,disabled:e.is_disabled,suffix:"元"},model:{value:e.electric_balance,callback:function(t){e.electric_balance=t},expression:"electric_balance"}})],1),a("a-col",{attrs:{span:6}})],1):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col "},[e._v("物业余额")]),a("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:30,disabled:e.is_disabled,suffix:"元"},model:{value:e.current_money,callback:function(t){e.current_money=t},expression:"current_money"}})],1),a("a-col",{attrs:{span:6}})],1),1==e.is_customized_meter_reading?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("label",{staticClass:"label_col ant-form-item-required"},[e._v("余额类型")]),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.opt_money_type",{initialValue:e.post.opt_money_type}],expression:"['post.opt_money_type', {initialValue:post.opt_money_type}]"}],staticStyle:{width:"180px"},attrs:{placeholder:"请选择余额类型"}},[a("a-select-option",{attrs:{value:"cold_water_balance"}},[e._v("冷水余额")]),a("a-select-option",{attrs:{value:"hot_water_balance"}},[e._v("热水余额")]),a("a-select-option",{attrs:{value:"electric_balance"}},[e._v("电费余额")]),a("a-select-option",{attrs:{value:"current_money"}},[e._v("物业余额")])],1),a("span",{staticStyle:{"margin-left":"15px"}},[e._v(" 请选择要增加或减少余额的类型")])],1),a("a-col",{attrs:{span:6}})],1):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("操作类型")]),a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.status",{initialValue:e.post.status}],expression:"['post.status', {initialValue:post.status}]"}]},[a("a-radio",{attrs:{value:1}},[e._v(" 增加 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 减少 ")])],1)],1),a("a-form-item",{attrs:{label:"",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("缴费金额")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.price",{initialValue:e.post.price,rules:[{required:!0,message:e.L("请输入缴费金额！")}]}],expression:"['post.price',{ initialValue: post.price, rules: [{ required: true, message: L('请输入缴费金额！') }] }]"}],staticStyle:{width:"300px"},attrs:{placeholder:"请输入缴费金额",min:0,maxLength:10,oninput:"value=value.replace(/[^\\d.]/g, '').replace(/\\.{2,}/g, '.').replace('.', '$#$').replace(/\\./g, '').replace('$#$', '.').replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/, '$1$2.$3').replace(/^\\./g, '')",suffix:"元"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:30}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("备注")]),a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.remarks",{initialValue:e.post.remarks,rules:[{required:!0,message:e.L("请输入备注！")}]}],expression:"['post.remarks',{ initialValue: post.remarks, rules: [{ required: true, message: L('请输入备注！') }] }]"}],staticClass:"textarea",attrs:{placeholder:"请输入备注",rows:4}})],1),a("a-col",{attrs:{span:6}})],1)],1)],1)],1)},n=[],o=a("a0e0"),r={components:{},data:function(){return{title:"新建",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),sensitive_info:[],visible:!1,post:{pigcms_id:0,nickname:"",phone:"",status:1,price:"",uid:0,remarks:"",opt_money_type:"current_money"},hot_water_balance:"",cold_water_balance:"",electric_balance:"",current_money:"",is_disabled:!0,is_customized_meter_reading:0}},mounted:function(){},methods:{add:function(e,t){var a=this;a.title="增加/减少",a.visible=!0,a.post.status=1,a.post.price="",a.post.remarks="",a.post.opt_money_type="current_money",this.is_customized_meter_reading=0,t&&(this.is_customized_meter_reading=t),a.request(o["a"].storageUserBalance,{uid:e}).then((function(t){a.post.uid=e,a.current_money=t.current_money,a.post.nickname=t.nickname,a.post.phone=t.phone,a.hot_water_balance=t.hot_water_balance,a.cold_water_balance=t.cold_water_balance,a.electric_balance=t.electric_balance}))},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){if(t)e.confirmLoading=!1;else{if(a.post.uid=e.post.uid,2==a.post.status||"2"==a.post.status){var i=1*a.post.price;if("current_money"==a.post.opt_money_type&&i<e.post.current_money)return e.$message.error("物业余额不足！"),e.confirmLoading=!1,!1;if(e.is_customized_meter_reading&&"cold_water_balance"==a.post.opt_money_type&&i>e.cold_water_balance)return e.$message.error("冷水余额不足！"),e.confirmLoading=!1,!1;if(e.is_customized_meter_reading&&"hot_water_balance"==a.post.opt_money_type&&i>e.hot_water_balance)return e.$message.error("热水余额不足！"),e.confirmLoading=!1,!1;if(e.is_customized_meter_reading&&"electric_balance"==a.post.opt_money_type&&i>e.electric_balance)return e.$message.error("电费余额不足！"),e.confirmLoading=!1,!1}var n=o["a"].storageUserBalanceChange;e.request(n,a.post).then((function(t){e.$message.success("操作成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,console.log(123),e.$emit("ok")}),1500),console.log(345)})).catch((function(t){e.confirmLoading=!1}))}}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.post.id=0,e.form=e.$form.createForm(e)}),500)}}},s=r,l=(a("c56a"),a("2877")),c=Object(l["a"])(s,i,n,!1,null,"7a7016e8",null);t["default"]=c.exports},"755c":function(e,t,a){"use strict";a("53ef")},7873:function(e,t,a){},"83cd":function(e,t,a){"use strict";a("8fe1")},8772:function(e,t,a){"use strict";a("5882")},"8fe1":function(e,t,a){},"928b":function(e,t,a){},b94d:function(e,t,a){},c2d4:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:600,visible:e.visibleUpload,maskClosable:!1,confirmLoading:e.confirmLoading,footer:null},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("div",[a("span",[e._v("示例表格")]),a("a",{staticStyle:{"margin-left":"20px"},attrs:{href:"/static/file/village/villageUserMoney/villageUserMoneyModel.xlsx",target:"_blank"}},[e._v("点击下载")])]),a("div",{staticStyle:{"border-bottom":"1px solid #e9e6e6","margin-top":"20px"}},[a("span",[e._v("导入Excel")]),a("a-upload",{attrs:{name:"file","file-list":e.avatarFileList,action:e.upload,headers:e.headers,"before-upload":e.beforeUploadFile},on:{change:e.handleChangeUpload}},[a("a-button",{staticStyle:{margin:"20px   20px  10px"},attrs:{type:"primary"}},[a("a-icon",{attrs:{type:"upload"}}),e._v(" 导入 ")],1)],1)],1),e.show?a("div",{staticStyle:{"margin-top":"20px"}},[a("span",[e._v("导入失败")]),a("a",{staticStyle:{"margin-left":"20px"},attrs:{href:e.url,target:"_blank"}},[e._v("点击下载带入失败数据表格")])]):e._e(),a("div",{staticStyle:{"margin-top":"20px"}},[a("span",{staticStyle:{"font-weight":"500"}},[e._v(" 1、对应物业编号、楼栋、单元、楼层和房间号对应已经存在的名称进行导入"),a("br"),e._v(" 2、导入的住户余额信息，必须跟小区业主列表数据一致，否则导入失败 ")])])])],1)},n=[],o=a("a0e0"),r=a("ca00"),s={data:function(){return{upload:"/v20/public/index.php"+o["a"].uploadUserMoneyFiles+"?upload_dir=/house/excel/userMoneyUpload",avatarFileList:[],headers:{authorization:"authorization-text"},visibleUpload:!1,confirmLoading:!1,title:"导入",url:"",show:!1,fileloading:!1,data_arr:[],tokenName:"",sysName:"",charge_name:"",project_id:0}},activated:function(){var e=Object(r["j"])(location.hash);e?(this.tokenName=e+"_access_token",this.sysName=e):this.sysName="village"},methods:{add:function(e,t){this.title="导入",this.visibleUpload=!0,this.url=window.location.host+"/v20/runtime/demo.xlsx",this.avatarFileList=[],this.charge_name=e,this.project_id=t},beforeUploadFile:function(e){var t=e.size/1024/1024<20;return t?this.fileloading?(this.$message.warning("当前还有文件上传中，请等候上传完成!"),!1):t:(this.$message.error("上传图片最大支持20MB!"),!1)},handleChangeUpload:function(e){var t=this;if(console.log("########",e),e.file&&!e.file.status&&this.fileloading)return!1;if("uploading"===e.file.status){if(this.fileloading)return!1;this.fileloading=!0,this.avatarFileList=e.fileList}if("uploading"!==e.file.status&&(this.fileloading=!1,console.log(e.file,e.fileList)),"done"==e.file.status&&e.file&&e.file.response){var a=e.file.response;if(1e3===a.status)this.data_arr.push(a.data),console.log("data_arr",this.data_arr),this.avatarFileList=e.fileList,console.log("--------",a.data.url),this.request(o["a"].exportUserMoney,{tokenName:this.tokenName,file:a.data.url}).then((function(e){e.error?(t.$parent.getList(),t.$message.success("上传成功")):window.location.href=e.data})),this.visibleUpload=!1;else for(var i in this.$message.error(e.file.response.msg),this.avatarFileList=[],e.fileList)if(e.fileList[i]){var n=e.fileList[i];console.log("info_1",n),n&&n.response&&1e3===n.response.status&&this.avatarFileList.push(n)}}if("removed"==e.file.status&&e.file){var r=e.file.response;if(r&&1e3===r.status)for(var i in this.data_arr=[],e.fileList)if(e.fileList[i]){var s=e.fileList[i];s&&s.response&&1e3===s.response.status&&this.data_arr.push(s.response.data)}this.avatarFileList=e.fileList,console.log("data_arr1",this.data_arr)}},handleCancel:function(){this.visibleUpload=!1}}},l=s,c=(a("ea9e5"),a("2877")),d=Object(c["a"])(l,i,n,!1,null,"7009d00a",null);t["default"]=d.exports},c56a:function(e,t,a){"use strict";a("23b2")},ce95:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:500,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[e.is_set?a("div",{staticStyle:{"margin-bottom":"20px"},domProps:{innerHTML:e._s(e.set_msg)}}):e._e(),a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"选择打印模板",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择打印模板"},model:{value:e.template_id,callback:function(t){e.template_id=t},expression:"template_id"}},e._l(e.template_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.template_id}},[e._v(" "+e._s(t.title)+" ")])})),1)],1)],1)],1)],1),a("print-order",{ref:"PrintModel"})],1)},n=[],o=a("a0e0"),r=a("f7e3"),s={components:{PrintOrder:r["default"]},data:function(){return{title:"选择打印模板",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,order_id:0,template_id:void 0,template_list:[],pigcms_id:0,choice_ids:[],is_set:!1,set_msg:"",set_type:0,source_type:0,print_type:0}},mounted:function(){},methods:{add:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;this.source_type=0,this.print_type=void 0!=i&&i?i:0,0==a?(this.title="选择打印模板",this.is_set=!1,this.set_msg=""):(this.is_set=!0,this.title="设置打印模板",1==a?(this.source_type=1,this.set_msg="1、在收银台设置打印模板，收银台支持打印功能。打印功能；不设置打印模板，则不支持。<br/>2、设置打印模板后，在收银台显示已缴账单按钮，进入查看所有已缴账单数据。"):2==a&&(this.set_msg='1、设置打印模板后，联动收银台打印模板功能。<br/>2、设置打印模板后，<span style="color: #1890ff">已缴账单</span>列表点击<span style="color: #1890ff">打印</span>按钮直接打印')),1==this.print_type&&(this.title="设置待缴账单打印模板",this.set_msg='1、设置<span style="color: #1583e3">待缴</span>账单打印模板后，设置后此模板用于<span style="color: #1583e3">未交费</span>的账单打印<br />2、最多可选8个账单打印'),this.set_type=a,this.template_id=void 0,this.visible=!0,this.pigcms_id=t,this.template_list=[],this.order_id=e,this.choice_ids=[],this.getTemplate()},batchPrint:function(e){var t=this;if(e.length<1)return t.$message.error("请勾选账单"),!1;t.title="选择打印模板",t.visible=!0,t.template_id=void 0,t.template_list=[],t.order_id=0,t.pigcms_id=0,t.choice_ids=e,this.set_type=0,this.source_type=0,this.print_type=0,t.getTemplate()},getTemplate:function(){var e=this;this.request(o["a"].getTemplate,{print_type:this.print_type}).then((function(t){e.template_list=t.list,t&&t.template_id>0&&(e.template_id=t.template_id)}))},handleSubmit:function(){var e=this;if(!this.template_id)return this.$message.error("选择打印模板"),!1;this.set_type>0?(this.confirmLoading=!0,this.request(o["a"].editSetPrint,{template_id:this.template_id,print_type:this.print_type}).then((function(t){e.$message.success("编辑成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.print_type=0,e.confirmLoading=!1,e.$emit("ok",{type:e.source_type,template_id:e.template_id})}),1e3)})).catch((function(e){}))):this.$refs.PrintModel.add(this.order_id,this.template_id,this.pigcms_id,this.choice_ids)},handleCancel:function(){this.visible=!1,this.print_type=0}}},l=s,c=(a("57ac"),a("2877")),d=Object(c["a"])(l,i,n,!1,null,null,null);t["default"]=d.exports},dd03:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:1200,footer:null,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination,loading:e.loading},on:{change:e.table_change},scopedSlots:e._u([{key:"money",fn:function(t,i){return a("span",{},[1==i.type?a("div",{staticStyle:{color:"green"}},[e._v(e._s(i.money))]):e._e(),2==i.type?a("div",{staticStyle:{color:"red"}},[e._v(e._s(i.money))]):e._e()])}}])})],1)},n=[],o=(a("ac1f"),a("841c"),a("a0e0")),r=[{title:"车库",dataIndex:"garage_num",key:"garage_num"},{title:"车位号",dataIndex:"position_num",key:"position_num"}],s=[],l={name:"positionList",filters:{},components:{},data:function(){return{reply_content:"",pagination:{current:1,pageSize:10,total:10},search:{uid:"",keyword:"",page:1},form:this.$form.createForm(this),visible:!1,loading:!1,data:s,columns:r,title:"",confirmLoading:!1,uid:""}},methods:{List:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.title="关联的车位记录",this.loading=!0,t>0&&(this.$set(this.pagination,"current",1),this.uid=t,this.search["uid"]=this.uid),this.search["page"]=this.pagination.current,this.request(o["a"].getUserPositionList,this.search).then((function(t){console.log("llist",t),e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data=t.list,e.loading=!1,e.confirmLoading=!0,e.visible=!0}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.id="0",e.form=e.$form.createForm(e)}),500)},cancel:function(){},table_change:function(e){var t=this;console.log("e",e),e.current&&e.current>0&&(t.pagination.current=e.current,t.List())},searchList:function(){console.log("search",this.search),this.table_change({current:1,pageSize:10,total:10})},resetList:function(){this.search.keyword="",this.search.page=1,this.table_change({current:1,pageSize:10,total:10})}}},c=l,d=(a("83cd"),a("2877")),p=Object(d["a"])(c,i,n,!1,null,null,null);t["default"]=p.exports},e24a:function(e,t,a){"use strict";a("7873")},e617:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:1200,footer:null,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination,loading:e.loading},on:{change:e.table_change}})],1)},n=[],o=(a("ac1f"),a("841c"),a("a0e0")),r=[{title:"楼栋",dataIndex:"single_name",key:"single_name"},{title:"单元",dataIndex:"floor_name",key:"floor_name"},{title:"楼层",dataIndex:"layer_name",key:"layer_name"},{title:"房间号",dataIndex:"room",key:"room"},{title:"姓名",dataIndex:"bind_name",key:"bind_name"}],s=[],l={name:"roomList",data:function(){return{pagination:{current:1,pageSize:10,total:10},search:{uid:"",keyword:"",page:1},form:this.$form.createForm(this),visible:!1,loading:!1,data:s,columns:r,title:"",confirmLoading:!1,uid:""}},methods:{List:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.title="关联的房间列表",this.loading=!0,t>0&&(this.$set(this.pagination,"current",1),this.uid=t,this.search["uid"]=this.uid),this.search["page"]=this.pagination.current,this.request(o["a"].getUserRoomList,this.search).then((function(t){console.log("roomlist",t),e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data=t.list,e.loading=!1,e.confirmLoading=!0,e.visible=!0}))},table_change:function(e){var t=this;console.log("e",e),e.current&&e.current>0&&(t.pagination.current=e.current,t.List())},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.id="0",e.form=e.$form.createForm(e)}),500)}}},c=l,d=(a("f243"),a("2877")),p=Object(d["a"])(c,i,n,!1,null,null,null);t["default"]=p.exports},ea9e5:function(e,t,a){"use strict";a("36a8")},f243:function(e,t,a){"use strict";a("b94d")}}]);