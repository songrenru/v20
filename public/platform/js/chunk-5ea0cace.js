(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ea0cace","chunk-409f9f28","chunk-26b4298a","chunk-e1db74a4","chunk-b8394eb8"],{"07a9":function(e,t,r){var a=r("4aad"),s=r("6751"),o=r("4b17"),i=r("76dd");function n(e,t,r){e=i(e),t=o(t);var n=t?s(e):0;return t&&n<t?e+a(t-n,r):e}e.exports=n},"126d":function(e,t,r){var a=r("6da8"),s=r("aaec"),o=r("d094");function i(e){return s(e)?o(e):a(e)}e.exports=i},4031:function(e,t,r){"use strict";var a={getLists:"/mall/merchant.MerchantStoreMall/getStoreList",perfectedStore:"/mall/merchant.MerchantStoreMall/perfectedStore",getStoreConfigList:"/mall/merchant.MerchantStoreMall/getStoreConfigList",getShippingList:"/mall/merchant.MallShipping/getShippingList",updateShipping:"/mall/merchant.MallShipping/addShipping",changeState:"/mall/merchant.MallShipping/changeState",removeShipping:"/mall/merchant.MallShipping/del",getShippingInfo:"/mall/merchant.MallShipping/edit",getMerchantSort:"/mall/merchant.MallGoods/getMerchantSort",getMallGoods:"/mall/merchant.MallGoods/getMallGoodsSelect",getGiveList:"/mall/merchant.MallGive/getGiveList",giveAdd:"/mall/merchant.MallGive/addGive",giveChangeState:"/mall/merchant.MallGive/changeState",giveDel:"/mall/merchant.MallGive/del",getGiveInfo:"/mall/merchant.MallGive/edit",getPlatSort:"/mall/merchant.MallGoods/getPlatformSort",getStoreSort:"/mall/merchant.MallGoods/getMerchantSort",getPrepareList:"/mall/merchant.MallPrepare/getPrepareList",updatePrepare:"/mall/merchant.MallPrepare/addPrepare",prepareChangeState:"/mall/merchant.MallPrepare/changeState",removePrepare:"/mall/merchant.MallPrepare/del",getPrepareInfo:"/mall/merchant.MallPrepare/edit",getReachedList:"/mall/merchant.MallReached/getReachedList",updateReachedList:"/mall/merchant.MallReached/addReached",getReachedInfo:"/mall/merchant.MallReached/edit",reachedChangeState:"/mall/merchant.MallReached/changeState",reachedDel:"/mall/merchant.MallReached/del",addRobot:"/mall/merchant.MallGroup/addRobot",delRobot:"/mall/merchant.MallGroup/delRobot",getRobotList:"/mall/merchant.MallGroup/getRobotList",getRobotName:"/mall/merchant.MallGroup/getRobotName",getUploadImages:"/common/common.UploadFile/getUploadImages",getGoodsSort:"/mall/merchant.MallGoods/getMerchantSort",getGoodsStatus:"/mall/merchant.MallGoods/getNumbers",getGoodsList:"/mall/merchant.MallGoods/getGoodsList",changeGoodsStatus:"/mall/merchant.MallGoods/setStatusLot",setVirtualSales:"/mall/merchant.MallGoods/setVirtualSales",changeGoodsSort:"/mall/merchant.MallGoods/setSort",getGoodsSkuPrice:"/mall/merchant.MallGoods/getGoodsSkuInfo",changeGoodsPrice:"/mall/merchant.MallGoods/setGoodsSkuInfo",getPlatProps:"/mall/merchant.MallGoods/getPlatformProperties",getFreightList:"/mall/merchant.MallGoods/getfreightList",getServiceList:"/mall/merchant.MallGoods/dealService",removeGoods:"/mall/merchant.MallGoods/delGoods",updateGoods:"/mall/merchant.MallGoods/addOrEditGoods",exportGoods:"/mall/merchant.MallGoods/exportGoods",getGoodsInfo:"/mall/merchant.MallGoods/getEditGoods",getGroupList:"/mall/merchant.MallGroup/getGroupList",groupAdd:"/mall/merchant.MallGroup/addGroup",groupChangeState:"/mall/merchant.MallGroup/changeState",groupDel:"/mall/merchant.MallGroup/del",getGroupInfo:"/mall/merchant.MallGroup/editDetail",getPeriodicList:"/mall/merchant.MallPeriodic/getPeriodicList",updatePeriodic:"/mall/merchant.MallPeriodic/addPeriodic",periodicChangeState:"/mall/merchant.MallPeriodic/changeState",removePeriodic:"/mall/merchant.MallPeriodic/del",getPeriodicInfo:"/mall/merchant.MallPeriodic/edit",getBargainList:"/mall/merchant.MallBargain/getBargainList",bargainAdd:"/mall/merchant.MallBargain/addBargain",bargainChangeState:"/mall/merchant.MallBargain/changeState",bargainDel:"/mall/merchant.MallBargain/del",getBargainInfo:"/mall/merchant.MallBargain/editDetail",getMinusDiscountList:"/mall/merchant.MallFullMinusDiscount/getFullMinusDiscountList",updateMinusDiscount:"/mall/merchant.MallFullMinusDiscount/addFullMinusDiscount",minusDiscountChangeState:"/mall/merchant.MallFullMinusDiscount/changeState",removeMinusDiscount:"/mall/merchant.MallFullMinusDiscount/del",getMinusDiscountInfo:"/mall/merchant.MallFullMinusDiscount/edit",getLimitedList:"/mall/merchant.MallLimited/getLimitedList",updateLimited:"/mall/merchant.MallLimited/addLimited",limitedChangeState:"/mall/merchant.MallLimited/changeState",removeLimited:"/mall/merchant.MallLimited/del",getLimitedInfo:"/mall/merchant.MallLimited/edit",getGoodsSortList:"/mall/merchant.MallGoodsSort/getSortList",delGoodsSort:"/mall/merchant.MallGoodsSort/delSort",editGoodsSort:"/mall/merchant.MallGoodsSort/addOrEditSort",getEditSort:"/mall/merchant.MallGoodsSort/getEditSort",editSort:"/mall/merchant.MallGoodsSort/saveSort",saveStatus:"/mall/merchant.MallGoodsSort/saveStatus",getAllGoodsSort:"/mall/merchant.MallGoodsSort/getSort",getStoreList:"/mall/merchant.MallMerchantReply/getStores",getReplyList:"/mall/merchant.MallMerchantReply/searchReply",addComment:"/mall/merchant.MallMerchantReply/merchantReply",getReplyDetails:"/mall/merchant.MallMerchantReply/getReplyDetails",getShowHomePage:"/mall/merchant.MallMerchantReply/getShowHomePage",getQualityReviews:"/mall/merchant.MallMerchantReply/getQualityReviews",getShowHomePageCancel:"/mall/merchant.MallMerchantReply/getShowHomePageCancel",getQualityReviewsCancel:"/mall/merchant.MallMerchantReply/getQualityReviewsCancel",getOrderList:"/mall/merchant.MallOrder/searchOrders",getOrderDetails:"/mall/merchant.MallOrder/getOrderDetails",getCollect:"/mall/merchant.MallOrder/getCollect",getDiscount:"/mall/merchant.MallOrder/getDiscount",exportOrder:"/mall/merchant.MallOrder/exportOrder ",deleteJudge:"/mall/merchant.MallGoods/deleteJudge ",getTemplateList:"/mall/merchant.ExpressTemplate/index",getTemplateAreaList:"/mall/merchant.ExpressTemplate/ajax_area",getTemplateAreaNameList:"/mall/merchant.ExpressTemplate/get_area_name",addTemplate:"/mall/merchant.ExpressTemplate/save",editTemplate:"/mall/merchant.ExpressTemplate/edit",delTemplate:"/mall/merchant.ExpressTemplate/delete",goodsBatch:"/mall/merchant.MallGoods/goodsBatch",viewLogistics:"/mall/merchant.MallOrder/viewLogistics"};t["a"]=a},4106:function(e,t,r){var a=r("4aad"),s=r("6751"),o=r("4b17"),i=r("76dd");function n(e,t,r){e=i(e),t=o(t);var n=t?s(e):0;return t&&n<t?a(t-n,r)+e:e}e.exports=n},"4aad":function(e,t,r){var a=r("b0a8"),s=r("ce86"),o=r("c32f"),i=r("aaec"),n=r("6751"),l=r("126d"),d=Math.ceil;function c(e,t){t=void 0===t?" ":s(t);var r=t.length;if(r<2)return r?a(t,e):t;var c=a(t,d(e/n(t)));return i(t)?o(l(c),0,e).join(""):c.slice(0,e)}e.exports=c},"4f70":function(e,t,r){"use strict";r("6df1")},5688:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1,footer:null},on:{cancel:e.handleCancel}},[r("a-list",{staticStyle:{"max-height":"500px","overflow-y":"auto"},attrs:{bordered:"","data-source":e.periodicList.deliver_msg,"item-layout":"vertical"},scopedSlots:e._u([{key:"renderItem",fn:function(t){return r("a-list-item",{},[r("div",{staticClass:"text-center width-auto mb-20 fs-16"},[e._v(" "+e._s(e.moment(t.deliver_date).format("YYYY年MM月"))+" ")]),t.deliver_list&&t.deliver_list.length?r("div",{staticClass:"flex align-center flex-wrap width-auto"},e._l(t.deliver_list,(function(t,a){return r("div",{key:a,staticClass:"flex flex-column align-center mb-20 deliver-item"},[r("span",{staticClass:"date-num",class:4==t.deliver_status?"active":""},[e._v(" "+e._s(t.date_num)+" ")]),r("span",[e._v(e._s(e._f("deliverStatusOpt")(t.deliver_status)))])])})),0):e._e()])}}])})],1)],1)},s=[],o=(r("d3b7"),r("99af"),r("4031")),i=r("c1df"),n=r.n(i),l=[{status:0,label:"待发货"},{status:1,label:"备货中"},{status:2,label:"待收货"},{status:3,label:"已顺延"},{status:4,label:"已收货"}],d={props:{visible:Boolean,order:Object},data:function(){return{title:"配送周期",periodicList:""}},filters:{deliverStatusOpt:function(e){var t="";return l.forEach((function(r){r.status==e&&(t=r.label)})),t}},created:function(){this.getPeriodicList()},methods:{moment:n.a,getPeriodicList:function(){var e=this;this.request(o["a"].getPeriodicList,{order_id:this.order.order_id,store_id:this.order.store_id}).then((function(t){if(e.periodicList=t||"",t){var r=t.nums,a=void 0===r?0:r,s=t.complete_num,o=void 0===s?0:s;e.title="".concat(e.title,"（共").concat(a,"期，已送").concat(o,"期）")}}))},handleCancel:function(){this.$emit("handleCancel")}}},c=d,p=(r("b31f"),r("2877")),f=Object(p["a"])(c,a,s,!1,null,"271e7cbb",null);t["default"]=f.exports},"5f66":function(e,t,r){"use strict";var a={getOrderList:"/mall/storestaff.MallOrder/getOrderList",exportOrder:"/mall/storestaff.MallOrder/exportOrder",orderTaking:"/mall/storestaff.MallOrder/orderTaking",deliverGoodsByHouseman:"/mall/storestaff.MallOrder/deliverGoodsByHouseman",staffVerify:"/mall/storestaff.MallOrder/staffVerify",postponeDelivery:"/mall/storestaff.MallOrder/postponeDelivery",agreeRefund:"/mall/storestaff.MallOrder/AgreeRefund",getExpress:"/mall/storestaff.MallOrder/getExpress",deliverGoodsByExpress:"/mall/storestaff.MallOrder/deliverGoodsByExpress",viewLogistics:"/mall/storestaff.MallOrder/viewLogistics",refuseRefund:"/mall/storestaff.MallOrder/RefuseRefund",clerkDiscount:"/mall/storestaff.MallOrder/clerkDiscount",getOrderDetails:"/mall/storestaff.MallOrder/getOrderDetails",clerkNotes:"/mall/storestaff.MallOrder/clerkNotes",getPeriodicList:"/mall/storestaff.MallOrder/getPeriodicList",downExcel:"/mall/storestaff.MallOrder/downExcel",downFailExcel:"/mall/storestaff.MallOrder/downFailExcel",uploadUrl:"/common/common.UploadFile/uploadFile",uploadExcel:"/mall/storestaff.MallOrder/uploadFile",getList:"/mall/storestaff.MallOrder/shopGoodsBatchLogList",getOrderListCopy:"/mall/storestaff.MallOrder/getOrderListCopy",getOrderDetailsCopy:"/mall/storestaff.MallOrder/getOrderDetailsCopy"};t["a"]=a},6751:function(e,t,r){var a=r("c9ca"),s=r("aaec"),o=r("ab81");function i(e){return s(e)?o(e):a(e)}e.exports=i},"6da8":function(e,t){function r(e){return e.split("")}e.exports=r},"6df1":function(e,t,r){},"81b5":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1},on:{cancel:e.handleCancel}},[r("a-form-model",{attrs:{model:e.formData,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{attrs:{label:"快递"}},[r("a-select",{attrs:{placeholder:"请选择"},on:{change:e.hanleChange}},e._l(e.expressOptions,(function(t){return r("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+e._s(t.is_singface&&"1"==t.is_singface?"（电子面单）":"")+" ")])})),1)],1),r("a-form-model-item",{attrs:{label:"快递单号"}},[r("a-input",{attrs:{placeholder:"请输入快递单号"},model:{value:e.formData.express_no,callback:function(t){e.$set(e.formData,"express_no",t)},expression:"formData.express_no"}})],1)],1),r("template",{slot:"footer"},[r("div",{staticClass:"flex justify-center align-center"},[r("a-button",{key:"back",staticClass:"mr-20",on:{click:function(t){return e.btnOpt(2)}}},[e._v(" 普通发货 ")]),r("a-button",{key:"submit",attrs:{type:"primary",disabled:"2"==e.fh_type||"1"==e.fh_type&&0==e.is_singface},on:{click:function(t){return e.btnOpt(1)}}},[e._v(" 电子面单发货 ")])],1)])],2)],1)},s=[],o=(r("a9e3"),r("d3b7"),r("159b"),r("b0c0"),r("5f66")),i={props:{visible:Boolean,title:String,order:Object,fh_type:[String,Number]},data:function(){return{labelCol:{span:4},wrapperCol:{span:14},formData:{order_id:"",activity_type:"",periodic_order_id:"",current_periodic:"",express_type:"",express_no:"",express_id:"",express_name:"",fh_type:"1"},expressOptions:[],is_singface:1}},created:function(){this.getExpress()},methods:{getExpress:function(){var e=this;this.request(o["a"].getExpress,"").then((function(t){e.expressOptions=t||[]}))},hanleChange:function(e){var t=this;this.$set(this.formData,"express_id",e),this.expressOptions.forEach((function(r){r.id==e&&(t.$set(t.formData,"express_name",r.name),t.is_singface=r.is_singface)}))},btnOpt:function(e){var t=this;if(this.$set(this.formData,"express_type",e),this.formData.express_id)if(2!=e||this.formData.express_no){var r=this.order,a=r.order_id,s=r.goods_activity_type,i=r.order_type,n=r.periodic_order_id,l=r.current_periodic;this.$set(this.formData,"order_id",a),this.$set(this.formData,"activity_type",s),"periodic"==i&&(this.$set(this.formData,"periodic_order_id",n),this.$set(this.formData,"current_periodic",l)),this.$set(this.formData,"fh_type",this.fh_type),this.request(o["a"].deliverGoodsByExpress,this.formData).then((function(e){var r="1"==t.fh_type?"订单发货成功":"快递更改成功";t.$message.success(r),Object.assign(t.$data,t.$options.data()),t.handleCancel(),t.$emit("updateList")}))}else this.$message.error("请输入快递单号");else this.$message.error("请选择快递")},handleCancel:function(){this.$emit("handleCancel"),Object.assign(this.$data,this.$options.data())}}},n=i,l=r("2877"),d=Object(l["a"])(n,a,s,!1,null,"a6aba266",null);t["default"]=d.exports},9065:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1},on:{ok:e.handleOk,cancel:e.handleCancel}},[r("a-form-model",{attrs:{model:e.formData,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{attrs:{label:""}},[r("a-input",{staticStyle:{height:"200px",resize:"none"},attrs:{type:"textarea",autosize:"",placeholder:"请输入拒绝理由"},model:{value:e.formData.reason,callback:function(t){e.$set(e.formData,"reason",t)},expression:"formData.reason"}})],1)],1)],1)],1)},s=[],o=r("5f66"),i={props:{visible:Boolean,title:String,order:Object},data:function(){return{labelCol:{span:0},wrapperCol:{span:24},formData:{order_id:"",reason:"",status:""},expressOptions:[]}},created:function(){},methods:{handleOk:function(){var e=this;this.formData.reason?(this.$set(this.formData,"order_id",this.order.order_id),this.$set(this.formData,"status",this.order.status),this.request(o["a"].refuseRefund,this.formData).then((function(t){e.$message.success("操作成功"),e.$emit("handleCancel"),e.$emit("updateList")}))):this.$message.error("请输入拒绝理由")},handleCancel:function(){this.$emit("handleCancel"),Object.assign(this.$data,this.$options.data())}}},n=i,l=r("2877"),d=Object(l["a"])(n,a,s,!1,null,"6bcd1f29",null);t["default"]=d.exports},a8ba:function(e,t,r){"use strict";var a=r("41b2"),s=r.n(a),o=r("4d91"),i=r("daa3"),n=r("9cba"),l=r("07a9"),d=r.n(l),c={name:"AStatisticNumber",functional:!0,render:function(e,t){var r=t.props,a=r.value,s=r.formatter,o=r.precision,i=r.decimalSeparator,n=r.groupSeparator,l=void 0===n?"":n,c=r.prefixCls,p=void 0;if("function"===typeof s)p=s({value:a,h:e});else{var f=String(a),u=f.match(/^(-?)(\d*)(\.(\d+))?$/);if(u){var m=u[1],_=u[2]||"0",h=u[4]||"";_=_.replace(/\B(?=(\d{3})+(?!\d))/g,l),"number"===typeof o&&(h=d()(h,o,"0").slice(0,o)),h&&(h=""+i+h),p=[e("span",{key:"int",class:c+"-content-value-int"},[m,_]),h&&e("span",{key:"decimal",class:c+"-content-value-decimal"},[h])]}else p=f}return e("span",{class:c+"-content-value"},[p])}},p={prefixCls:o["a"].string,decimalSeparator:o["a"].string,groupSeparator:o["a"].string,format:o["a"].string,value:o["a"].oneOfType([o["a"].string,o["a"].number,o["a"].object]),valueStyle:o["a"].any,valueRender:o["a"].any,formatter:o["a"].any,precision:o["a"].number,prefix:o["a"].any,suffix:o["a"].any,title:o["a"].any},f={name:"AStatistic",props:Object(i["t"])(p,{decimalSeparator:".",groupSeparator:","}),inject:{configProvider:{default:function(){return n["a"]}}},render:function(){var e=arguments[0],t=this.$props,r=t.prefixCls,a=t.value,o=void 0===a?0:a,n=t.valueStyle,l=t.valueRender,d=this.configProvider.getPrefixCls,p=d("statistic",r),f=Object(i["g"])(this,"title"),u=Object(i["g"])(this,"prefix"),m=Object(i["g"])(this,"suffix"),_=Object(i["g"])(this,"formatter",{},!1),h=e(c,{props:s()({},this.$props,{prefixCls:p,value:o,formatter:_})});return l&&(h=l(h)),e("div",{class:p},[f&&e("div",{class:p+"-title"},[f]),e("div",{style:n,class:p+"-content"},[u&&e("span",{class:p+"-content-prefix"},[u]),h,m&&e("span",{class:p+"-content-suffix"},[m])])])}},u=r("92fa"),m=r.n(u),_=r("c1df"),h=r("2cf8"),g=r("b24f"),v=r.n(g),b=r("4106"),y=r.n(b),I=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function M(e,t){var r=e,a=/\[[^\]]*\]/g,s=(t.match(a)||[]).map((function(e){return e.slice(1,-1)})),o=t.replace(a,"[]"),i=I.reduce((function(e,t){var a=v()(t,2),s=a[0],o=a[1];if(-1!==e.indexOf(s)){var i=Math.floor(r/o);return r-=i*o,e.replace(new RegExp(s+"+","g"),(function(e){var t=e.length;return y()(i.toString(),t,"0")}))}return e}),o),n=0;return i.replace(a,(function(){var e=s[n];return n+=1,e}))}function x(e,t){var r=t.format,a=void 0===r?"":r,s=Object(h["a"])(_)(e).valueOf(),o=Object(h["a"])(_)().valueOf(),i=Math.max(s-o,0);return M(i,a)}var C=1e3/30;function w(e){return Object(h["a"])(_)(e).valueOf()}var S={name:"AStatisticCountdown",props:Object(i["t"])(p,{format:"HH:mm:ss"}),created:function(){this.countdownId=void 0},mounted:function(){this.syncTimer()},updated:function(){this.syncTimer()},beforeDestroy:function(){this.stopTimer()},methods:{syncTimer:function(){var e=this.$props.value,t=w(e);t>=Date.now()?this.startTimer():this.stopTimer()},startTimer:function(){var e=this;this.countdownId||(this.countdownId=window.setInterval((function(){e.$refs.statistic.$forceUpdate(),e.syncTimer()}),C))},stopTimer:function(){var e=this.$props.value;if(this.countdownId){clearInterval(this.countdownId),this.countdownId=void 0;var t=w(e);t<Date.now()&&this.$emit("finish")}},formatCountdown:function(e){var t=e.value,r=e.config,a=this.$props.format;return x(t,s()({},r,{format:a}))},valueRenderHtml:function(e){return e}},render:function(){var e=arguments[0];return e(f,m()([{ref:"statistic"},{props:s()({},this.$props,{valueRender:this.valueRenderHtml,formatter:this.formatCountdown}),on:Object(i["k"])(this)}]))}},O=r("db14");f.Countdown=S,f.install=function(e){e.use(O["a"]),e.component(f.name,f),e.component(f.Countdown.name,f.Countdown)};t["a"]=f},aaec:function(e,t){var r="\\ud800-\\udfff",a="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",i=a+s+o,n="\\ufe0e\\ufe0f",l="\\u200d",d=RegExp("["+l+r+i+n+"]");function c(e){return d.test(e)}e.exports=c},ab81:function(e,t){var r="\\ud800-\\udfff",a="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",i=a+s+o,n="\\ufe0e\\ufe0f",l="["+r+"]",d="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",p="(?:"+d+"|"+c+")",f="[^"+r+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",_="\\u200d",h=p+"?",g="["+n+"]?",v="(?:"+_+"(?:"+[f,u,m].join("|")+")"+g+h+")*",b=g+h+v,y="(?:"+[f+d+"?",d,u,m,l].join("|")+")",I=RegExp(c+"(?="+c+")|"+y+b,"g");function M(e){var t=I.lastIndex=0;while(I.test(e))++t;return t}e.exports=M},b0a8:function(e,t){var r=9007199254740991,a=Math.floor;function s(e,t){var s="";if(!e||t<1||t>r)return s;do{t%2&&(s+=e),t=a(t/2),t&&(e+=e)}while(t);return s}e.exports=s},b0fa:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1,footer:null},on:{ok:e.handleCancel,cancel:e.handleCancel}},[e.logistics.length?r("a-timeline",{attrs:{pending:e.pending,reverse:!0}},e._l(e.logistics,(function(t,a){return r("a-timeline-item",{key:a},[r("p",{staticClass:"mb-0"},[e._v(e._s(e.moment(t.time).format("YYYY-MM-DD HH:mm")))]),r("span",[e._v(e._s(t.context))])])})),1):r("a-empty",{attrs:{image:e.simpleImage}},[r("span",{attrs:{slot:"description"},slot:"description"},[e._v("暂无物流信息")])])],1)],1)},s=[],o=(r("06f4"),r("fc25")),i=(r("16c9"),r("387a")),n=r("8bbf"),l=r.n(n),d=r("4031"),c=r("c1df"),p=r.n(c);l.a.use(i["a"]),l.a.use(o["a"]);var f={props:{visible:Boolean,title:String,order:Object},data:function(){return{logistics:[],pending:!1,simpleImage:""}},beforeCreate:function(){this.simpleImage=o["a"].PRESENTED_IMAGE_SIMPLE},mounted:function(){20==this.order.status&&(this.pending="正在配送中..."),this.viewLogistics()},methods:{moment:p.a,viewLogistics:function(){var e=this,t=this.order,r=t.order_id,a=t.order_type,s=t.periodic_order_id,o=t.express_style;console.log("bbb"),this.request(d["a"].viewLogistics,{order_id:r,periodic_order_id:s&&"periodic"==a?s:"",order_type:a,express_style:o}).then((function(t){console.log("aaa",t),0===t.errCode?e.logistics=t.list||[]:1===t.errCode&&e.$message.warn(t.errMsg)}))},handleCancel:function(){this.$emit("handleCancel")}}},u=f,m=(r("fa6d"),r("2877")),_=Object(m["a"])(u,a,s,!1,null,"c8ba2bdc",null);t["default"]=_.exports},b31f:function(e,t,r){"use strict";r("bba4")},b886:function(e,t,r){},bba4:function(e,t,r){},bf5f:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.orderInfo?r("div",{staticClass:"pt-20 pl-20 pr-20 pb-20 bg-ff mt-10"},[r("a-descriptions",{attrs:{title:"",column:6}},[e.orderInfo.order_no?r("a-descriptions-item",{attrs:{label:60==e.orderInfo.order_status||70==e.orderInfo.order_status?"退款编号":"订单编号"}},[e._v(" "+e._s(e.orderInfo.order_no)+" ")]):e._e(),r("a-descriptions-item",{attrs:{label:"第三方支付号"}},[e._v(" "+e._s(e.orderInfo.pay_orderno)+" ")]),r("a-descriptions-item",{attrs:{label:60==e.orderInfo.order_status||70==e.orderInfo.order_status?"申请时间":"下单时间"}},[e._v(" "+e._s(60==e.orderInfo.order_status||70==e.orderInfo.order_status?e.orderInfo.refund_time:e.orderInfo.create_time)+" ")]),e.orderInfo.order_type_txt?r("a-descriptions-item",{attrs:{label:"订单类型"}},[e._v(" "+e._s(e.orderInfo.order_type_txt)+" ")]):e._e(),e.orderInfo.store_name?r("a-descriptions-item",{attrs:{label:"店铺名称"}},[e._v(" "+e._s(e.orderInfo.store_name)+" ")]):e._e()],1),r("a-row",{staticClass:"mt-30"},[r("a-card",{staticClass:"a-card"},[r("a-row",{attrs:{type:"flex"}},[r("a-col",{staticClass:"border-right card-item",attrs:{span:6}},[r("div",{staticClass:"order-status cr-black text-center"},[r("span",[e._v(e._s(e.orderInfo.current_periodic&&e.orderInfo.order_type&&"periodic"==e.orderInfo.order_type?"第"+e.orderInfo.current_periodic+"期":"")+" "+e._s(e.orderInfo.order_status_txt)+" ")])]),r("div",{staticClass:"text-center"},[60==e.orderInfo.order_status&&e.orderInfo.rest_time?r("span",{staticClass:"flex align-center countdown mt-10 justify-center"},[r("span",[e._v("请在")]),r("span",{staticClass:"cr-red"},[r("a-statistic-countdown",{attrs:{title:"",value:e.orderInfo.rest_time,format:"D天H时m分s秒",valueStyle:e.valueStyle},on:{finish:e.finish}})],1),r("span",[e._v("内处理完成，超时将自动同意")])]):e._e(),2==e.orderInfo.express_style&&"prepare"==e.orderInfo.goods_activity_type?r("span",{staticClass:"cr-red fs-16 mt-10"},[e._v(" 发货时间："+e._s(e.moment(e.orderInfo.send_time).format("YYYY-MM-DD HH:mm")||"---")+" ")]):e._e(),1==e.orderInfo.express_style?r("span",[e._v(" 期望送达时间："+e._s(e.orderInfo.express_send_time||"---")+" ")]):e._e(),-1!=[10,11,20,40].indexOf(Number(e.orderInfo.order_status))&&"periodic"==e.orderInfo.order_type&&e.orderInfo.current_time?r("span",{staticClass:"cr-red fs-16 mt-10"},[e._v(e._s(e.moment(e.orderInfo.current_time).format("YYYY.MM.DD"))+"送达 ")]):e._e(),e.desc?r("span",{staticClass:"fs-16 mt-10"},[e._v(e._s(e.desc))]):e._e()]),r("a-row",{staticClass:"mt-20",attrs:{type:"flex",justify:"center",align:"middle"}},e._l(e.btnList,(function(t){return r("span",{key:t.props},[1==t.show?r("a-button",{staticClass:"ml-10 mr-10",attrs:{type:t.type},on:{click:function(r){return e.btnOpt(t)}}},[e._v(" "+e._s(t.label)+" ")]):e._e()],1)})),0)],1),r("a-col",{staticClass:"card-item",attrs:{span:16}},[r("div",{staticClass:"flex align-center justify-center",staticStyle:{height:"100%"}},[r("a-steps",{attrs:{"progress-dot":60!=e.orderInfo.order_status&&70!=e.orderInfo.order_status,current:e.current}},e._l(e.step,(function(t){return r("a-step",{key:t.props,attrs:{title:t.title,description:e.orderInfo[t.props]}})})),1)],1)])],1)],1)],1),60!=e.orderInfo.order_status&&70!=e.orderInfo.order_status?r("a-row",{staticClass:"mt-20"},[r("a-card",[r("a-row",[r("a-col",{staticClass:"fs-18",attrs:{span:8}},[r("span",{staticClass:"cr-black"},[e._v("买家备注：")]),r("span",[e._v(e._s(e.orderInfo.remark||"无"))])]),r("a-col",{attrs:{span:4}}),r("a-col",{staticClass:"fs-18",attrs:{span:8}},[r("span",{staticClass:"cr-black"},[e._v("店员备注：")]),r("span",[e._v(e._s(e.orderInfo.clerk_remark||"无"))])])],1)],1)],1):e._e(),r("a-row",{staticClass:"mt-20 a-card"},[r("a-card",[r("a-row",{attrs:{type:"flex"}},[r("a-col",{attrs:{span:6}},[r("a-row",{staticClass:"card-item"},[r("a-col",{staticClass:"mb-20"},[r("h2",{staticClass:"fs-18"},[e._v(" "+e._s(60==e.orderInfo.order_status||70==e.orderInfo.order_status?"退款原因":"收货信息")+" ")])]),r("a-col",{staticClass:"pr-10"},[60==e.orderInfo.order_status||70==e.orderInfo.order_status?r("div",[e.orderInfo.refund_reason?r("span",{staticClass:"descriptions-item descriptions-item-content"},[e._v(" "+e._s(e.orderInfo.refund_reason)+" ")]):e._e(),e.orderInfo.refund_images&&e.orderInfo.refund_images.length?r("span",e._l(e.orderInfo.refund_images,(function(e,t){return r("a-card",{key:t,staticStyle:{width:"240px"}},[r("img",{attrs:{slot:"cover",alt:"image",src:e},slot:"cover"})])})),1):e._e()]):e._e(),r("a-descriptions-item",{attrs:{label:"收货人"}},[e._v(" "+e._s(e.orderInfo.username||"---")+" ")]),r("a-descriptions-item",{attrs:{label:"注册电话"}},[e._v(" "+e._s(e.orderInfo.zc_phone||"---")+" ")]),r("a-descriptions-item",{attrs:{label:"收货电话"}},[e._v(" "+e._s(e.orderInfo.sh_phone||"---")+" ")]),r("a-descriptions-item",{attrs:{label:"收货地址"}},[e._v(" "+e._s(e.orderInfo.address||"---")+" ")])],1)],1)],1),r("a-col",{staticClass:"border-dash",attrs:{span:10}},[r("a-row",{staticClass:"card-item"},[r("a-col",{staticClass:"mb-20"},[r("h2",{staticClass:"fs-18"},[e._v(" "+e._s(60==e.orderInfo.order_status||70==e.orderInfo.order_status?"退款信息":"付款信息")+" ")])]),r("a-col",{staticClass:"pr-10"},[r("a-descriptions",{attrs:{title:""}},[e.orderInfo.periodic_count&&e.orderInfo.order_type&&"periodic"==e.orderInfo.order_type?r("a-descriptions-item",{attrs:{label:"周期购期数"}},[r("span",{staticClass:"flex align-center"},[r("span",[e._v("共计")]),r("span",{staticClass:"cr-black fw-bold"},[e._v(" "+e._s(e.orderInfo.periodic_count)+" ")]),r("span",[e._v("期")])])]):e._e(),r("a-descriptions-item",{attrs:{label:"商品总金额"}},[e._v(" "+e._s(e.currency)+e._s(e.orderInfo.money_total)+" ")]),"prepare"==e.orderInfo.order_type&&e.orderInfo.bargain_price&&0!=e.orderInfo.bargain_price?r("a-descriptions-item",{attrs:{label:""}},[e._v(" 定金"+e._s(e.currency)+e._s(e.orderInfo.bargain_price)+" "),e.orderInfo.deduct_price&&0!=e.orderInfo.deduct_price?r("span",[e._v("抵"+e._s(e.currency)+e._s(e.orderInfo.deduct_price))]):e._e()]):e._e(),e.orderInfo.discount_total&&0!=e.orderInfo.discount_total?r("a-descriptions-item",{on:{click:function(t){e.discountTotalVisible=!e.discountTotalVisible}}},[r("span",{staticClass:"pointer",attrs:{slot:"label"},slot:"label"},[r("a-popover",{attrs:{title:"",trigger:"click"},model:{value:e.discountTotalVisible,callback:function(t){e.discountTotalVisible=t},expression:"discountTotalVisible"}},[r("span",{attrs:{slot:"content"},slot:"content"},[r("a-list",{attrs:{"item-layout":"horizontal","data-source":e.discountList},scopedSlots:e._u([{key:"renderItem",fn:function(t){return t.value&&0!=t.value?r("a-list-item",{staticClass:"flex"},[r("a-badge",{attrs:{color:"red",text:t.label+"："+e.currency+t.value}})],1):e._e()}}],null,!0)})],1),r("span",[e._v("总优惠金额"),r("a-icon",{attrs:{type:"exclamation-circle"}})],1)])],1),e._v(" -"+e._s(e.currency)+e._s(e.orderInfo.discount_total)+" ")]):e._e(),e.orderInfo.money_freight&&0!=e.orderInfo.money_freight?r("a-descriptions-item",{attrs:{label:"运费"}},[e._v(" +"+e._s(e.currency)+e._s(e.orderInfo.money_freight)+" ")]):e._e()],1),"prepare"==e.orderInfo.order_type&&e.orderInfo.bargain_price&&0!=e.orderInfo.bargain_price&&e.orderInfo.order_status>=0&&e.orderInfo.order_status<10?r("a-descriptions",{attrs:{title:"",column:1}},[r("a-descriptions-item",{staticClass:"fw-bold"},[r("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("已支付定金")]),r("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(e._s(e.currency)+e._s(e.orderInfo.bargain_price))])])],1):e._e(),r("a-descriptions",{attrs:{title:"",column:2}},[r("a-descriptions-item",[r("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[0==e.orderInfo.order_status?r("span",[e._v("待付款")]):e._e(),1==e.orderInfo.order_status?r("span",[e._v("尾款待付款")]):e._e(),e.orderInfo.order_status>=10?r("span",[e._v("实付款")]):e._e()]),r("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(" "+e._s(e.currency)+e._s(e.orderInfo.money_real)+" ")])]),e.orderInfo.is_refund?r("a-descriptions-item",{staticClass:"fw-bold"},[1==e.orderInfo.all_refund?r("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("全部退款金额")]):e._e(),0==e.orderInfo.all_refund?r("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("部分退款金额")]):e._e(),1==e.orderInfo.all_refund?r("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(e._s(e.currency)+e._s(e.orderInfo.refund_money))]):e._e(),0==e.orderInfo.all_refund?r("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(e._s(e.currency)+e._s(e.orderInfo.part_refund_money))]):e._e()]):e._e(),e.orderInfo.is_refund&&0!=e.orderInfo.refund_money&&0!=e.orderInfo.refund_money_periodic?r("a-descriptions-item",{staticClass:"fw-bold"},[r("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("退款金额")]),r("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(" "+e._s(e.currency)+e._s("periodic"==e.orderInfo.order_type?e.orderInfo.refund_money_periodic:e.orderInfo.refund_money)+" ")])]):e._e()],1),e.orderInfo.order_status>9&&e.payMethods.length?r("a-row",{attrs:{type:"flex",align:"middle"}},e._l(e.payMethods,(function(t){return r("span",{key:t.props,staticClass:"flex justify-between descriptions-item"},[r("span",{staticClass:"mr-20"},[e._v(" "+e._s(t.label)+"："),r("span",{staticClass:"descriptions-item-content"},[e._v(e._s(e.currency)+e._s(t.value||"---"))])])])})),0):e._e(),e.orderInfo.paid_time&&e.orderInfo.order_status>=10||e.orderInfo.paid_time&&"prepare"==e.orderInfo.goods_activity_type?r("a-descriptions",{attrs:{title:"",column:1}},[e.orderInfo.paid_time?r("a-descriptions-item",{attrs:{label:"付款时间"}},[e._v(" "+e._s(e.moment(e.orderInfo.paid_time).format("YYYY-MM-DD HH:mm")||"---")+" ")]):e._e()],1):e._e(),!e.orderInfo.refund_time||60!=e.orderInfo.order_status&&70!=e.orderInfo.order_status?e._e():r("a-descriptions",{attrs:{title:"",column:1}},[r("a-descriptions-item",{attrs:{label:"申请时间"}},[e._v(" "+e._s(e.moment(e.orderInfo.refund_time).format("YYYY-MM-DD HH:mm")||"---")+" ")])],1),e.orderInfo.clert_discount_process&&e.orderInfo.clert_discount_process.length?r("a-row",{attrs:{type:"flex",align:"middle"}},e._l(e.orderInfo.clert_discount_process,(function(t,a){return r("a-col",{key:a,staticClass:"flex justify-between descriptions-item",attrs:{span:12}},[r("span",{staticClass:"mr-10"},[e._v("修改前："),r("span",{staticClass:"descriptions-item-content"},[e._v(e._s(e.currency)+e._s(t.money_before))])]),r("span",[e._v("修改后："),r("span",{staticClass:"descriptions-item-content"},[e._v(e._s(e.currency)+e._s(t.money_after))])])])})),1):e._e(),r("br"),e.orderInfo.username?r("a-col",{staticClass:"pr-10"},[e._v(" 用户名 : "+e._s(e.orderInfo.username)+" ")]):e._e(),e.orderInfo.zc_phone?r("a-col",{staticClass:"pr-10"},[e._v(" 注册电话 : "+e._s(e.orderInfo.zc_phone)+" ")]):e._e(),e.orderInfo.address?r("a-col",{staticClass:"pr-10"},[e._v(" 收货地址 : "+e._s(e.orderInfo.address)+" ")]):e._e()],1)],1)],1),r("a-col",{attrs:{span:8}},[r("a-row",{staticClass:"card-item"},[r("a-col",{staticClass:"flex align-center mb-20"},[r("h2",{staticClass:"fs-18"},[e._v("更多信息")]),"periodic"==e.orderInfo.order_type?r("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(t){e.periodicListVisible=!0}}},[e._v(" 查看配送周期 ")]):e._e()],1),r("a-col",{staticClass:"pr-10"},[r("p",[2!=e.orderInfo.express_style||e.orderInfo.order_status<20||e.orderInfo.order_status>=50?r("span",[e._v("配送方式："+e._s(e.orderInfo.express_style_txt))]):r("span",[e._v(" 配送方式："+e._s(e.orderInfo.express_name)),r("br"),r("br"),e._v(" 快递单号："+e._s(e.orderInfo.express_num)+" ")]),60==e.orderInfo.order_status&&3!=e.orderInfo.express_style?r("a-button",{attrs:{type:"link"},on:{click:e.viewLogistics}},[e._v(" 查看物流 ")]):e._e()],1),2==e.orderInfo.express_style&&"prepare"==e.orderInfo.goods_activity_type?r("p",[e._v(" 发货时间："+e._s(e.moment(e.orderInfo.send_time).format("YYYY-MM-DD HH:mm")||"---")+" ")]):e._e(),1==e.orderInfo.express_style?r("p",[e._v(" 期望送达时间："+e._s(e.orderInfo.express_send_time||"---")+" ")]):e._e()]),e.orderInfo.forms&&e.orderInfo.forms.length?r("a-col",e._l(e.orderInfo.forms,(function(t,a){return r("div",{key:a},[r("a-descriptions",{staticClass:"forms",attrs:{title:"",column:1}},[r("a-descriptions-item",{attrs:{label:t.title}},["text"==t.type?r("span",[e._v(e._s(t.val))]):e._e(),"image"==t.type&&t.val?r("a-card",{staticStyle:{width:"240px"},attrs:{bordered:!1}},[r("img",{attrs:{slot:"cover",alt:"image",src:t.val},slot:"cover"})]):e._e()],1)],1)],1)})),0):e._e()],1)],1)],1)],1)],1),r("a-table",{staticClass:"mt-20 a-table",attrs:{columns:e.columns,"data-source":e.orderInfo.children,pagination:!1,rowKey:"index"},scopedSlots:e._u([{key:"goodsName",fn:function(t,a){return r("span",{staticClass:"flex align-center"},[r("a-avatar",{attrs:{shape:"square",size:64,src:a.image}}),r("span",{staticClass:"flex ml-10"},[r("span",[e._v(e._s(a.goods_name)),1==a.is_marketing_goods?r("a",[e._v("(分销商品)")]):e._e()]),a.sku_info.length?r("span",[r("a-divider",{attrs:{type:"vertical"}})],1):e._e(),r("span",[e._v(e._s(a.sku_info))])]),1==a.is_gift?r("span",[r("a-divider",{attrs:{type:"vertical"}}),r("a-tag",{attrs:{color:"#108ee9"}},[e._v("赠品")])],1):e._e(),a.refund_desc.length?r("span",[r("a-divider",{attrs:{type:"vertical"}}),e._l(a.refund_desc,(function(t,a){return r("a-tag",{key:a,attrs:{color:"red"}},[e._v(e._s(t))])}))],2):e._e()],1)}},{key:"price",fn:function(t){return r("span",{},[e._v(" "+e._s(e.currency)+e._s(t)+" ")])}}],null,!1,3396738386)}),"express_btn"==e.currentBtn.props?r("deliverGoods",{attrs:{visible:e.deliverGoodsVisible,title:e.currentBtn.title,order:e.orderInfo,fh_type:e.fh_type},on:{handleCancel:function(t){e.deliverGoodsVisible=!1},updateList:e.getOrderDetails}}):e._e(),"trajectory_btn"==e.currentBtn.props||"logistics_btn"==e.currentBtn.props?r("logistics",{attrs:{visible:e.logisticsVisible,title:e.currentBtn.title,order:e.orderInfo},on:{handleCancel:function(t){e.logisticsVisible=!1}}}):e._e(),"refuse_refund_btn"==e.currentBtn.props?r("refuseRefund",{attrs:{visible:e.refuseRefundVisible,title:e.currentBtn.title,order:e.orderInfo},on:{handleCancel:function(t){e.refuseRefundVisible=!1},updateList:e.getOrderDetails}}):e._e(),"periodic"==e.orderInfo.order_type?r("periodicList",{attrs:{visible:e.periodicListVisible,order:e.orderInfo},on:{handleCancel:function(t){e.periodicListVisible=!1}}}):e._e()],1):e._e()},s=[],o=(r("e7c6"),r("a8ba")),i=(r("d3b7"),r("159b"),r("a9e3"),r("d81d"),r("4de4"),r("8bbf")),n=r.n(i),l=r("4031"),d=r("81b5"),c=r("b0fa"),p=r("9065"),f=r("5688"),u=r("c1df"),m=r.n(u);n.a.use(o["a"]);var _={components:{deliverGoods:d["default"],logistics:c["default"],refuseRefund:p["default"],periodicList:f["default"]},data:function(){return{currency:"￥",order_id:this.$route.query.order_id||"",periodic_order_id:this.$route.query.periodic_order_id||"",refund_id:this.$route.query.refund_id||"",is_all:this.$route.query.is_all||"",orderInfo:"",valueStyle:"color: #f50f50;font-size: 18px;",discountTotalVisible:!1,after_money:"",moneyRealVisible:!1,refund_images:[],desc:"",fh_type:"1",discountList:[{label:"平台优惠券优惠金额",value:"",props:"discount_system_coupon"},{label:"商家优惠券优惠金额",value:"",props:"discount_merchant_coupon"},{label:"商家会员卡优惠金额",value:"",props:"discount_merchant_card"},{label:"平台会员等级优惠金额",value:"",props:"discount_system_level"},{label:"店员优惠金额",value:"",props:"discount_clerk_money"},{label:"参加活动优惠金额",value:"",props:"discount_act_money"}],step:[{title:"买家下单",props:"step_create_time",current:0,show:!0,is_refund_order:!1},{title:"买家付款",props:"step_paid_time",current:1,show:!0,is_refund_order:!1},{title:"卖家发货",props:"step_send_time",current:2,show:!0,is_refund_order:!1},{title:"订单完成",props:"step_complete_time",current:3,show:!0,is_refund_order:!1},{title:"买家申请退款",props:"refund_time",current:1,show:!1,is_refund_order:!0},{title:"商户审核",props:"",current:1,show:!1,is_refund_order:!0},{title:"退款完成",props:"",current:2,show:!1,is_refund_order:!0}],btnList:[{label:"接单",props:"take_btn",show:"0",action:"confirm",tips:"是否确定接单？",success:"接单成功",api:"orderTaking",type:"primary"},{label:"骑手配送",props:"hoseman_btn",show:"0",action:"confirm",tips:"是否确定骑手配送？",success:"订单已转至平台配送！",api:"deliverGoodsByHouseman",type:"primary"},{label:"店员核销",props:"clerk_btn",show:"0",action:"confirm",tips:"是否确定核销？",success:"该订单已核销",api:"staffVerify",type:"primary"},{label:"快递发货",props:"express_btn",show:"0",action:"modal",title:"发货",type:"primary"},{label:"查看物流",props:"logistics_btn",show:"0",action:"modal",title:"查看物流",type:"primary"},{label:"顺延配送",props:"postpone_btn",show:"0",action:"confirm",tips:"是否确定顺延配送？",success:"该订单已顺延配送",api:"postponeDelivery",type:"primary"},{label:"骑手轨迹",props:"trajectory_btn",show:"0",action:"modal",title:"骑手轨迹",type:"primary"},{label:"同意退款",props:"agree_refund_btn",show:"0",action:"confirm",tips:"是否确定同意退款？",success:"同意退款成功",api:"agreeRefund",type:"primary"},{label:"拒绝退款",props:"refuse_refund_btn",show:"0",action:"modal",title:"拒绝退款",type:"danger"}],columns:[{title:"商品",dataIndex:"goods_name",key:"goods_name",scopedSlots:{customRender:"goodsName"},align:"left"},{title:"单价",dataIndex:"price",key:"price",scopedSlots:{customRender:"price"},align:"center"},{title:"数量",dataIndex:"num",key:"num",align:"center"},{title:"商品状态",dataIndex:"goods_status_txt",key:"goods_status_txt",align:"center"}],currentBtn:"",deliverGoodsVisible:!1,logisticsVisible:!1,refuseRefundVisible:!1,periodicListVisible:!1,baseUrl:"/v20/public/platform/#",payMethods:[{label:"在线支付",labelProps:"pay_type_txt",props:"money_online_pay"},{label:"积分抵扣",props:"money_score"},{label:"平台余额支付",props:"money_system_balance"},{label:"商家会员卡余额支付",props:"money_merchant_balance"},{label:"商家会员卡赠送余额支付",props:"money_merchant_give_balance"},{label:"企业预存款余额支付",props:"money_qiye_balance"}],emptyCheckArr:["",null,void 0,"null","undefined"]}},watch:{"$route.query.periodic_order_id":function(e){e&&(this.periodic_order_id=e)},"$route.query.refund_id":function(e){e&&(this.refund_id=e)},"$route.query.order_id":function(e){e&&(this.order_id=e),this.getOrderDetails()}},mounted:function(){this.getOrderDetails()},methods:{moment:m.a,getOrderDetails:function(){var e=this;this.request(l["a"].getOrderDetails,{order_id:this.order_id,periodic_order_id:this.periodic_order_id,refund_id:this.refund_id}).then((function(t){t&&t.children&&t.children.length&&t.children.forEach((function(e,t){e["index"]=t})),60==t.order_status&&t.rest_time&&(t.rest_time=Date.now()+1e3*Number(t.rest_time)),t&&(t.status=t.order_status),e.orderInfo=t||"",e.initBtnList(),e.initStep(),e.initDiscountList(),e.initPayMethods()}))},initBtnList:function(){var e=this,t=this.orderInfo,r=t.button,a=t.order_status,s=t.express_style;this.btnList=this.btnList.map((function(t){return t.show=r[t.props],60!=a&&70!=a||"logistics_btn"!=t.props&&"trajectory_btn"!=t.props||(t.show=0),11==a&&"1"==s&&"hoseman_btn"==t.props&&(e.desc="订单转至骑手配送"),t}))},initStep:function(){var e=this;this.step=[{title:"买家下单",props:"step_create_time",current:0,show:!0,is_refund_order:!1},{title:"买家付款",props:"step_paid_time",current:1,show:!0,is_refund_order:!1},{title:"卖家发货",props:"step_send_time",current:2,show:!0,is_refund_order:!1},{title:"订单完成",props:"step_complete_time",current:3,show:!0,is_refund_order:!1},{title:"买家申请退款",props:"refund_time",current:1,show:!1,is_refund_order:!0},{title:"商户审核",props:"",current:1,show:!1,is_refund_order:!0},{title:"退款完成",props:"",current:2,show:!1,is_refund_order:!0}];var t=this.orderInfo.order_status;this.step=this.step.filter((function(r){if(t>=50&&t<60?e.current=0:(e.orderInfo[r.props]&&(e.current=r.current),60==t||70==t?(r.is_refund_order?r.show=!0:r.show=!1,(70==t||r.props&&e.orderInfo[r.props])&&(e.current=r.current)):r.is_refund_order?r.show=!1:r.show=!0),r.show)return r}))},finish:function(){this.getOrderDetails()},btnOpt:function(e){var t=this;this.currentBtn=e,console.log(this.currentBtn,"this.currentBtn");var r=this.currentBtn,a=r.api,s=void 0===a?"":a,o=r.success,i=void 0===o?"":o,n=r.tips,d=void 0===n?"":n,c=r.action,p=void 0===c?"":c,f=r.props,u=void 0===f?"":f;"confirm"==p&&this.$confirm({title:d||"提醒",content:"",okText:"确认",cancelText:"取消",onOk:function(){if(s){var e={order_id:t.order_id},r=["take_btn","hoseman_btn"];t.orderInfo.order_type=="periodic"(-1!=r.indexOf(u))&&(e.periodic_order_id=t.periodic_order_id),t.request(l["a"][s],e).then((function(e){t.$message.success(i),t.getOrderDetails()}))}},onCancel:function(){console.log("Cancel"),t.currentBtn=""},class:"test"}),"modal"==p&&("express_btn"==u?this.deliverGoodsVisible=!0:"trajectory_btn"==u||"logistics_btn"==u?this.logisticsVisible=!0:"refuse_refund_btn"==u&&(this.refuseRefundVisible=!0))},initDiscountList:function(){var e=this;this.discountList=this.discountList.map((function(t){return e.orderInfo&&(t.value=e.orderInfo[t.props]),t}))},initPayMethods:function(){var e=this;this.payMethods=this.payMethods.filter((function(t){if(e.orderInfo&&t.labelProps&&(t.label=e.orderInfo[t.labelProps]),t.value=t.props&&e.orderInfo[t.props]&&0!=e.orderInfo[t.props]?e.orderInfo[t.props]:0,t.value)return t}))},viewLogistics:function(){var e={label:"查看物流",props:"logistics_btn",show:"0",action:"modal",title:"查看物流",type:"primary"};this.btnOpt(e)},editDeliverGoodsByExpress:function(){var e={label:"快递发货",props:"express_btn",show:"0",action:"modal",title:"更改快递",type:"primary"};this.fh_type="2",this.btnOpt(e)}}},h=_,g=(r("4f70"),r("2877")),v=Object(g["a"])(h,a,s,!1,null,"c3264706",null);t["default"]=v.exports},c32f:function(e,t,r){var a=r("2b10");function s(e,t,r){var s=e.length;return r=void 0===r?s:r,!t&&r>=s?e:a(e,t,r)}e.exports=s},c9ca:function(e,t,r){var a=r("ef5d"),s=a("length");e.exports=s},d094:function(e,t){var r="\\ud800-\\udfff",a="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",i=a+s+o,n="\\ufe0e\\ufe0f",l="["+r+"]",d="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",p="(?:"+d+"|"+c+")",f="[^"+r+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",_="\\u200d",h=p+"?",g="["+n+"]?",v="(?:"+_+"(?:"+[f,u,m].join("|")+")"+g+h+")*",b=g+h+v,y="(?:"+[f+d+"?",d,u,m,l].join("|")+")",I=RegExp(c+"(?="+c+")|"+y+b,"g");function M(e){return e.match(I)||[]}e.exports=M},e214:function(e,t,r){},e7c6:function(e,t,r){"use strict";r("b2a3"),r("b886")},fa6d:function(e,t,r){"use strict";r("e214")}}]);