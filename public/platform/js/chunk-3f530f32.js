(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f530f32","chunk-2651a8c6","chunk-ccfc8c1c","chunk-290aaaf8","chunk-2d0b6a79","chunk-a55eb2e2","chunk-40d5af0a","chunk-2d702dc0","chunk-2d0b24fb","chunk-2d0c20dc","chunk-2d0b6a79","chunk-2d0b3786","chunk-2d0bacf3"],{"0765":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("a-modal",{attrs:{title:e.title,width:1150,visible:!0,footer:null,maskClosable:!1},on:{cancel:e.handleCancel}},[a("a-tabs",{attrs:{type:"card"},on:{change:e.callback}},[e.is_receivableOrderList?a("a-tab-pane",{key:"receivableOrderList",attrs:{tab:"应收账单"}}):e._e(),a("a-tab-pane",{key:"payableOrderList",attrs:{tab:"已缴账单"}})],1),a("div",{staticClass:"tab_components"},[e.visible?a(e.currentTab,{key:e.currentTab,tag:"receivableOrderList",attrs:{pigcmsId:e.bind_id,village_id:e.village_id,usernum:e.usernum}}):e._e()],1)],1):e._e()},s=[],n=a("b8f9"),l=a("8de0"),r={name:"paymentList",components:{receivableOrderList:n["default"],payableOrderList:l["default"]},data:function(){return{visible:!1,title:"缴费清单",currentTab:"receivableOrderList",bind_id:0,usernum:"",village_id:0,is_receivableOrderList:!0}},methods:{handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.form=e.$form.createForm(e)}),500)},accountsReceivable:function(e,t,a){this.currentTab="receivableOrderList",void 0!=t&&t&&(this.village_id=t),void 0!=a&&a&&(this.usernum=a),this.bind_id=e,this.visible=!0,console.log("pigcmsId",e),console.log("villageId",t),console.log("usernum",a)},callback:function(e){this.currentTab=e}}},o=r,c=(a("79162"),a("2877")),d=Object(c["a"])(o,i,s,!1,null,null,null);t["default"]=d.exports},"1a83":function(e,t,a){"use strict";var i={passwordEdit:"/community/house_meter.AdminUser/passwordEdit",adminUserList:"/community/house_meter.AdminUser/adminUserList",adminUserAdd:"/community/house_meter.AdminUser/adminUserAdd ",adminUserEdit:"/community/house_meter.AdminUser/adminUserEdit",adminUserInfo:"/community/house_meter.AdminUser/adminUserInfo",adminUserDelete:"/community/house_meter.AdminUser/adminUserDelete",areaList:"/community/house_meter.AdminUser/areaList",villageBindList:"/community/house_meter.Power/villageBindList",meterVillageAdd:"/community/house_meter.Power/meterVillageAdd",meterVillageAddll:"/community/house_meter.Power/meterVillageAddll",meterVillageDelete:"/community/house_meter.Power/meterVillageDelete",getVillageInfo:"/community/house_meter.Power/getVillageInfo",meterElectricList:"/community/house_meter.MeterElectric/meterElectricList",meterElectricInfo:"/community/house_meter.MeterElectric/meterElectricInfo",meterElectricAdd:"/community/house_meter.MeterElectric/meterElectricAdd",meterElectricEdit:"/community/house_meter.MeterElectric/meterElectricEdit",meterElectricDelete:"/community/house_meter.MeterElectric/meterElectricDelete",getMeasureList:"/community/house_meter.MeterElectric/getMeasureList",switch:"/community/house_meter.MeterElectric/switch",meterReading:"/community/house_meter.MeterElectric/now_reading_electric",meterElectricGroupList:"/community/house_meter.MeterElectricGroup/meterElectricGroupList",meterElectricGroupAdd:"/community/house_meter.MeterElectricGroup/meterElectricGroupAdd",meterElectricGroupEdit:"/community/house_meter.MeterElectricGroup/meterElectricGroupEdit",meterElectricGroupInfo:"/community/house_meter.MeterElectricGroup/meterElectricGroupInfo",meterElectricSetInfo:"/community/house_meter.MeterElectric/meterElectricSetInfo",meterElectricSetEdit:"/community/house_meter.MeterElectric/meterElectricSetEdit",MeterReadingList:"/community/house_meter.MeterElectric/getMeterReadingList",getAreaList:"/community/house_meter.MeterElectricPrice/getAreaList",getAreaPriceList:"/community/house_meter.MeterElectricPrice/getAreaPriceList",meterElectricPriceAdd:"/community/house_meter.MeterElectricPrice/meterElectricPriceAdd",meterElectricPriceEdit:"/community/house_meter.MeterElectricPrice/meterElectricPriceEdit",payorderList:"/community/house_meter.MeterUserPayorder/payorderList",payorderPrint:"/community/house_meter.MeterUserPayorder/payorderPrint",getAreasList:"/community/house_meter.MeterElectric/getAreaList",getCommunityList:"/community/house_meter.MeterElectric/getCommunityList",getVillageList:"/community/house_meter.MeterElectric/getVillageList",getSingleList:"/community/house_meter.MeterElectric/getSingleList",getFloorList:"/community/house_meter.MeterElectric/getFloorList",getLayerList:"/community/house_meter.MeterElectric/getLayerList",getVacancyList:"/community/house_meter.MeterElectric/getVacancyList",uploadFile:"/community/house_meter.MeterElectric/uploadFile",getTongjiCount:"/community/house_meter.DataStatistics/getTongjiCount",getEleWarnList:"/community/house_meter.DataStatistics/getEleWarnList",powerConsumptionAnalysis:"/community/house_meter.DataStatistics/powerConsumptionAnalysis",deviceManage:"/community/house_meter.DataStatistics/deviceManage",powerConsumptionFeeAnalysis:"/community/house_meter.DataStatistics/powerConsumptionFeeAnalysis",getTongjiCountByCity:"/community/house_meter.DataStatistics/getTongjiCountByCity"};t["a"]=i},"1da1":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("d3b7");function i(e,t,a,i,s,n,l){try{var r=e[n](l),o=r.value}catch(c){return void a(c)}r.done?t(o):Promise.resolve(o).then(i,s)}function s(e){return function(){var t=this,a=arguments;return new Promise((function(s,n){var l=e.apply(t,a);function r(e){i(l,s,n,r,o,"next",e)}function o(e){i(l,s,n,r,o,"throw",e)}r(void 0)}))}}},2425:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{title:"选择催缴对象",width:600,height:400,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{cancel:e.handleCancel,ok:e.handleSubmit}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"选择对象",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择"},on:{change:e.handleSelectChange}},[a("a-select-option",{attrs:{value:"1"}},[e._v(" 仅业主 ")]),a("a-select-option",{attrs:{value:"2"}},[e._v(" 业主和家属 ")]),a("a-select-option",{attrs:{value:"3"}},[e._v(" 仅家属 ")])],1)],1)],1)],1)],1)],1)},s=[],n=a("a0e0"),l={name:"sendType",data:function(){return{visible:!1,confirmLoading:!1,labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},form:this.$form.createForm(this),send_type:0,type:1,list:[],is_detail:0}},methods:{select:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;this.visible=!0,this.type=e,this.list=t,this.is_detail=a},handleSelectChange:function(e){this.send_type=e},handleSubmit:function(){var e=this;if(0==this.send_type)return this.$message.warn("请选择需要发送的对象"),!1;this.request(n["a"].sendMessage,{type:this.type,send_type:this.send_type,list:this.list,is_detail:this.is_detail}).then((function(t){e.$message.success("发送成功")})),this.visible=!1},handleCancel:function(){this.visible=!1}}},r=l,o=a("2877"),c=Object(o["a"])(r,i,s,!1,null,"0e25554d",null);t["default"]=c.exports},2537:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"欠费账单导入向导",width:1e3,visible:e.visible,maskClosable:!1,footer:e.isImporting||2==e.currentKey?null:void 0},on:{cancel:e.handleCancel}},[a("a-tabs",{attrs:{"default-active-key":1},on:{change:e.tabChange}},[a("a-tab-pane",{key:1,attrs:{tab:"导入操作"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.firstStep&&!e.isImporting,expression:"firstStep && !isImporting"}],staticClass:"step_one"},[a("h4",[e._v("步骤一：选择需要上传【欠费账单】所属【收费项目】")]),a("h5",[a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("注意：")]),e._v("1. 仅支持"),a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("【收费模式：一次性费用】")]),e._v("的"),a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("【收费项目】")]),e._v("。")]),a("div",[a("span",{staticClass:"label_col",staticStyle:{color:"rgba(0, 0, 0, 0.85)"}},[e._v("收费科目：")]),a("a-select",{staticStyle:{width:"282px","margin-left":"20px"},attrs:{"show-search":""},on:{change:e.handleChargeNumberChange},model:{value:e.subjectId,callback:function(t){e.subjectId=t},expression:"subjectId"}},e._l(e.chargeNumber,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),a("div",{staticStyle:{"padding-top":"10px"}},[a("span",{staticClass:"label_col",staticStyle:{color:"rgba(0, 0, 0, 0.85)"}},[e._v("收费项目：")]),a("a-select",{staticStyle:{width:"282px","margin-left":"20px"},attrs:{"show-search":""},on:{change:e.handleChargeProjectChange},model:{value:e.projectId,callback:function(t){e.projectId=t},expression:"projectId"}},e._l(e.chargeProject,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),e.projectId?a("div",[a("h4",[e._v("步骤二：上传 Excel 文件")]),a("h5",[a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("注意：")]),e._v("1. 导入的欠费会归属到所选"),a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("【收费项目】")]),e._v("下，以导入表中"),a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("[欠缴费用名称]")]),e._v("为名称的"),a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("【计费模式：固定费用】")]),e._v("的"),a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("【收费标准】")]),e._v("中。")]),a("h5",{staticStyle:{"padding-left":"35px"}},[e._v("2. 表中相同"),a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("[欠缴费用名称]")]),e._v("不同"),a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("[欠缴金额]")]),e._v("会生成不同的"),a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("【收费标准】")]),e._v("。")]),a("p",[e._v("您要从何处导入数据，请选择导入的 Excel 文件")]),a("div",{staticStyle:{display:"flex",width:"80%"}},[a("div",{staticClass:"label",staticStyle:{width:"82px","text-align":"left"}},[e._v("Excel文件")]),a("a-upload-dragger",{staticStyle:{height:"100px",width:"calc(100% - 82px)","margin-left":"10px"},attrs:{name:"file",multiple:!0,action:e.uploadUrl,beforeUpload:e.beforeUploadExcel,showUploadList:!1,headers:e.headers,data:{upload_dir:"billExcel",system_type:"village",type:"billExcel"}},on:{change:e.handleUploadChange}},[a("a-icon",{attrs:{type:e.uploadLoading?"loading":"upload"}}),e._v(" "+e._s(e.uploadFileName?e.uploadFileName:"拖拽或点击上传 Excel 文件")+" ")],1)],1),e.fileList.length>0?a("div",{staticClass:"select_list",staticStyle:{display:"flex","align-items":"center",height:"50px"}},[a("div",{staticClass:"label",staticStyle:{width:"82px","text-align":"left"}},[e._v("选择Sheet表")]),a("a-select",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{"default-value":0},on:{change:e.handleSelectChange}},e._l(e.fileList,(function(t,i){return a("a-select-option",{key:i,attrs:{value:i}},[e._v(" "+e._s(t.worksheetName)+" ")])})),1),a("div",{staticStyle:{color:"red","margin-left":"10px"}},[e._v("总数据量："+e._s(e.selectObj.totalRows?e.selectObj.totalRows-1:0)+" 条")])],1):e._e(),a("h5",[e._v("导入步骤：")]),a("h5",[a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("注意：")]),e._v(" 1. "),a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("【楼栋】")]),e._v("、 "),a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("【单元】")]),e._v("、 "),a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("【楼层】")]),e._v("、 "),a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("【房间号】")]),e._v(" 是和对应名称或编号"),a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("全匹配[就是名称或者编号需要完全一致]")]),e._v("定位对应房间的。")]),a("p",[e._v(" 第一步：上传存储有的资料 Excel 文件；【您可以直接上传 Excel 文件或者下载模板："),a("a-button",{attrs:{type:"link"},on:{click:e.downloadExcel}},[e._v(" 模板下载")]),e._v("】 ")],1),a("p",[e._v(" 第二步：设置 Excel 里的列与系统中的列的对应关系")]),a("p",[e._v(" 第三步：开始导入")])]):e._e()])]),a("a-tab-pane",{key:2,attrs:{tab:"导入日志"}},[2==e.currentKey?a("importRecord",{attrs:{type:e.uploadType}}):e._e()],1)],1),e.isImporting?e._e():a("template",{slot:"footer"},[a("div",{staticClass:"footer_con",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%"}},[e.firstStep?a("div",{staticClass:"left"}):e._e(),a("div",{staticClass:"right"},[a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.startImport}},[e._v("开始导入")]),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"default"},on:{click:e.handleCancel}},[e._v("取消")])],1)])]),e.isImporting&&2!=e.currentKey?a("div",{staticClass:"progress_content",staticStyle:{width:"100%",height:"450px",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},[a("a-progress",{attrs:{type:"circle","stroke-color":{"0%":"#108ee9","100%":"#87d068"},percent:e.percentVal}}),a("div",{staticClass:"importing",staticStyle:{"margin-top":"15px"}},[e._v(" 总行数 "),a("span",{staticStyle:{"font-size":"larger"}},[e._v(e._s(e.readRowTotal))]),e._v("，正在导入，剩余"),a("span",{staticStyle:{"font-size":"larger"}},[e._v(e._s(e.readRowTotal-(e.successInsterTotal+e.errorTotal))+" ")]),e._v(" 条记录待导入，成功"),a("span",{staticStyle:{color:"#68C472","font-size":"larger"}},[e._v(e._s(e.successInsterTotal))]),e._v("条,失败"),a("span",{staticStyle:{color:"red","font-size":"larger"}},[e._v(" "+e._s(e.errorTotal)+" ")]),e._v("条 ")]),a("div",{staticClass:"desc",staticStyle:{"margin-top":"15px",color:"#999999","font-size":"14px"}},[100!=e.percentVal?a("span",[e._v("提示：正在等待导入，如果关闭本窗口，导入不会中断")]):a("span",[e._v("导入完成")]),100==e.percentVal?a("a-button",{attrs:{type:"link"},on:{click:e.goBack}},[e._v("重新导入")]):e._e()],1)],1):e._e()],2)},s=[],n=(a("ac1f"),a("1276"),a("b0c0"),a("8bbf")),l=a.n(n),r=(a("5880"),a("ca00")),o=a("ed09"),c=(a("3990"),a("4956")),d=Object(o["c"])({props:{visible:{type:Boolean,default:!1},uploadType:{type:String,default:"billExcel"}},components:{importRecord:c["default"]},setup:function(e,t){var a=Object(o["h"])(0),i=Object(o["h"])(null),s=Object(o["h"])(!1),n=Object(o["h"])(0),c=Object(o["h"])("/v20/public/index.php/community/common.BillExcel/billUploadFile"),d=Object(o["h"])([]),u=Object(o["h"])(!1),_=Object(o["h"])(!0),p=Object(o["h"])(0),h=Object(o["h"])(""),m=Object(o["h"])([]),g=Object(o["h"])(null),v=Object(o["h"])([]),f=Object(o["h"])(null),y=function(){l.a.prototype.request("/community/common.BillExcel/getChargeSubject",{tokenName:K.value}).then((function(e){m.value=e,console.log("getChargeNumber",e)})).catch((function(e){console.log("getChargeNumber",e)}))},b=function(e){l.a.prototype.request("/community/common.BillExcel/getChargeProject",{subject_id:e,tokenName:K.value}).then((function(e){v.value=e,console.log("chargeProject",e)})).catch((function(e){console.log("chargeProject",e)}))},x=function(e){console.log("handleChargeNumberChange",e),g.value=e,f.value=null,b(e)},k=function(e){console.log("handleChargeProjectChange",e),f.value=e},C=function(e){var t=e.name.split(".").pop();if("xlsx"!=t&&"xls"!=t)return u.value=!1,l.a.prototype.$message.warn("上传文件格式非 Excel"),!1},S=function(){z(),t.emit("exit",!1)},w=function(){_.value=!0},L=function(){g.value?f.value?P.totalRows&&0==P.totalRows?l.a.prototype.$message.warn("请完善上传信息"):E.value&&R.value?l.a.prototype.request("/community/common.BillExcel/startImport",{tokenName:K.value,subjectId:g.value,projectId:f.value,inputFileName:R.value,worksheetName:E.value,selectWorkSheetIndex:p.value}).then((function(e){l.a.prototype.$message.success("提交成功，准备导入，调整画面为进度条画面！"),s.value=!0,i.value=setInterval((function(){q()}),1e3)})).catch((function(e){s.value=!1,z()})):l.a.prototype.$message.warn("请先上传Excel文件"):l.a.prototype.$message.warn("请选择收费项目"):l.a.prototype.$message.warn("请选择收费科目")},I=Object(r["k"])("/community/village_api.Building/villageUploadFile"),j=l.a.ls.get(I),O=Object(o["g"])({authorization:"authorization-text",ticket:j}),R=Object(o["h"])(""),E=Object(o["h"])(""),$=function(e){u.value=!0,"uploading"!==e.file.status&&(u.value=!0),"done"===e.file.status?(console.log("info.file.response.data.path",e.file.response.data.path),R.value=e.file.response.data.path,u.value=!1,1e3==e.file.response.status?(h.value=e.file.response.data.file_name,U(R.value)):l.a.prototype.$message.error(e.file.response.msg)):"error"===e.file.status&&(u.value=!1,l.a.prototype.$message.error("".concat(e.file.name," file upload failed.")))},P=Object(o["h"])({}),T=function(e){P.value=d.value[e],E.value=d.value[e].worksheetName,p.value=e,Object(o["d"])()},U=function(e){l.a.prototype.request("/community/common.BillExcel/importForExcel",{inputFileName:e,tokenName:K.value}).then((function(e){d.value=e.worksheet,P.value=e.worksheet[0],E.value=e.worksheet[0].worksheetName,console.log("importForExcel ------\x3e",e),Object(o["d"])()})).catch((function(e){}))},M=Object(o["h"])(0),B=Object(o["h"])(0),F=Object(o["h"])(0),D=Object(o["h"])(0),q=function(){l.a.prototype.request("/community/common.BillExcel/refreshProcess",{type:"billExcel",tokenName:K.value}).then((function(e){e.process&&(M.value=e.process,B.value=e.processInfo.readRowTotal,F.value=e.processInfo.successInsterTotal,D.value=e.processInfo.errorTotal,100==e.process&&(l.a.prototype.$message.warn("导入执行完毕！"),z()))})).catch((function(e){z()}))},z=function(){clearInterval(i.value),i.value=null,R.value="",E.value="",h.value="",d.value=[]},V=function(){l.a.prototype.request("/community/common.BillExcel/getImportTemplateUrl",{tokenName:K.value}).then((function(e){console.log("downloadExcel",e.url),window.open(e.url)})).catch((function(e){console.log("downloadExcel",e)}))},N=function(){d.value=[],_.value=!0,s.value=!1,M.value=0,B.value=0,B.value=0,F.value=0,D.value=0,h.value="",R.value="",E.value="",clearInterval(i.value),i.value=null},A=Object(o["h"])(1),G=function(e){A.value=e},Y=Object(o["h"])(null),K=Object(o["h"])(null);return Object(o["i"])((function(){return e.visible}),(function(e){Y.value=Object(r["i"])(location.hash),Y.value?K.value=Y.value+"_access_token":Y.value="village",m.value=[],v.value=[],g.value=null,f.value=null,console.log("val",e),console.log("tokenNameSys",K.value),console.log("tokenName",I),console.log("token",j),y()}),{deep:!0}),{handleCancel:S,headers:O,handleUploadChange:$,currentIndex:n,uploadUrl:c,uploadExcelFile:U,downloadExcel:V,fileList:d,uploadLoading:u,selectObj:P,handleSelectChange:T,firstStep:_,preStep:w,startImport:L,pathUrl:R,beforeUploadExcel:C,interval:i,refreshProgress:q,isImporting:s,percentVal:M,clearTimer:z,isSkip:a,readRowTotal:B,successInsterTotal:F,errorTotal:D,uploadFileName:h,goBack:N,tabChange:G,currentKey:A,getChargeNumber:y,handleChargeNumberChange:x,handleChargeProjectChange:k,chargeNumber:m,chargeProject:v,subjectId:g,projectId:f,sysName:Y}}}),u=d,_=(a("c704"),a("2877")),p=Object(_["a"])(u,i,s,!1,null,"1be75dec",null);t["default"]=p.exports},2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a("6b75");function s(e){if(Array.isArray(e))return Object(i["a"])(e)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function n(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var l=a("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){return s(e)||n(e)||Object(l["a"])(e)||r()}},3353:function(e,t,a){},3990:function(e,t,a){"use strict";var i={villageInfo:"/community/village_api.VillageConfig/getVillageInfo",baseConfig:"/community/village_api.VillageConfig/baseConfig",buildingIndex:"/community/village_api.Building/index",roomIndex:"/community/village_api.Room/index",ownerIndex:"/community/village_api.Owner/index",ownerReview:"/community/village_api.Owner/review",ownerUnbid:"/community/village_api.Owner/unbind",familyIndex:"/community/village_api.FamilyMember/index",enantIndex:"/community/village_api.Enant/index",buildingList:"/community/village_api.Building/index",deleteBuilding:"/community/village_api.Building/deleteBuilding",buildingInfo:"/community/village_api.Building/buildingInfo",updateBuildingStatus:"/community/village_api.Building/updateBuildingStatus",saveBuildingButler:"/community/village_api.Building/saveBuildingButler",getBuildingButler:"community/village_api.Building/getBuildingButler",updateBuildingInfoByID:"community/village_api.Building/updateBuildingInfoByID",buildingUnitFloor:"community/village_api.Building/unitFloor",buildingFloorLayerRooms:"community/village_api.Building/floorLayerRooms",unitRentalList:"/community/village_api.UnitRental/index",deleteUnitRental:"/community/village_api.UnitRental/deleteUnitRental",unitRentalInfo:"/community/village_api.UnitRental/unitRentalInfo",updateUnitRentalStatus:"/community/village_api.UnitRental/updateUnitRentalStatus",saveUnitRentalButler:"/community/village_api.UnitRental/saveUnitRentalButler",getUnitRentalButler:"community/village_api.UnitRental/getUnitRentalButler",updateUnitRentalInfoByID:"community/village_api.UnitRental/updateUnitRentalInfoByID",unitRentalFloorList:"community/village_api.UnitRental/unitRentalFloorList",updateUnitRentalFloorStatus:"community/village_api.UnitRental/updateUnitRentalFloorStatus",deleteUnitRentalFloor:"community/village_api.UnitRental/deleteUnitRentalFloor",unitRentalFloorInfo:"community/village_api.UnitRental/unitRentalFloorInfo",saveUnitRentalFloorInfo:"community/village_api.UnitRental/saveUnitRentalFloorInfo",unitRentalLayerList:"community/village_api.UnitRental/unitRentalLayerList",unitRentalLayerInfo:"community/village_api.UnitRental/unitRentalLayerInfo",saveUnitRentalLayerInfo:"community/village_api.UnitRental/saveUnitRentalLayerInfo",updateUnitRentalLayerStatus:"community/village_api.UnitRental/updateUnitRentalLayerStatus",deleteUnitRentalLayer:"community/village_api.UnitRental/deleteUnitRentalLayer",thirdVillageUploadFile:"community/village_api.third.Room/villageUploadFile",thirdStartRoomImport:"community/village_api.third.Room/startRoomImport",thirdStartUserImport:"community/village_api.third.Room/startUserImport",thirdStartChargeImport:"community/village_api.third.Room/startChargeImport",thirdRefreshProcess:"community/village_api.third.Room/refreshProcess",ownerList:"/community/village_api.People.Owner/index",servicesImgPreview:"/community/village_api.WorkWeiXin/servicesImgPreview"};t["a"]=i},4956:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"charging_standard"},[a("a-table",{attrs:{"row-key":function(e){return e.add_time},pagination:e.pageInfo,columns:e.chargeColumns,loading:e.tableLoading,"data-source":e.tableList},on:{change:e.tableChange},scopedSlots:e._u([{key:"file_url",fn:function(t,i){return a("span",{},[0==i.status?a("a",{on:{click:function(t){return e.goUrl(i.file_url)}}},[e._v("点击查看")]):a("span",[e._v("--")])])}},{key:"duration",fn:function(t,i){return a("span",{},[e._v(" "+e._s(i.duration)+"s ")])}},{key:"status",fn:function(t,i){return a("span",{},[a("span",{style:{color:0==i.status?"red":"green"}},[e._v(e._s(0==i.status?"存在导入失败的数据":"导入成功"))])])}}])})],1)},s=[],n=a("8bbf"),l=a.n(n),r=a("ed09"),o=Object(r["c"])({props:{type:{type:String,default:""}},setup:function(e,t){var a=Object(r["h"])([]),i=Object(r["h"])({pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40","50","60","70","80","90","100"],showSizeChanger:!0}),s=Object(r["h"])([]),n=Object(r["h"])(!1);Object(r["f"])((function(){c()}));var o=function(e){var t=e.pageSize,a=e.current;i.value.current=a,i.value.pageSize=t,c()},c=function(){n.value=!0,l.a.prototype.request("/community/common.BillExcel/getVillageImportRecord",{tokenName:"village_access_token",type:e.type,page:i.value.current,limit:i.value.pageSize}).then((function(e){s.value=e.list,i.value.total=e.count,n.value=!1})).catch((function(e){n.value=!1}))};a.value=[{title:"文件名称",dataIndex:"file_name",key:"file_name"},{title:"详情",dataIndex:"file_url",key:"file_url",scopedSlots:{customRender:"file_url"}},{title:"时长",dataIndex:"duration",key:"duration",scopedSlots:{customRender:"duration"}},{title:"结果",dataIndex:"import_msg",key:"import_msg"},{title:"状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"时间",dataIndex:"add_time",key:"add_time"}];var d=function(e){window.open(e)};return{chargeColumns:a,pageInfo:i,tableList:s,tableLoading:n,getRecordList:c,tableChange:o,goUrl:d}}}),c=o,d=a("2877"),u=Object(d["a"])(c,i,s,!1,null,"b87be6f2",null);t["default"]=u.exports},"4e55":function(e,t,a){"use strict";a("3353")},"57ac":function(e,t,a){"use strict";a("928b")},"585a1":function(e,t,a){},"5f64":function(e,t,a){"use strict";a("d6e9")},"6f6f":function(e,t,a){"use strict";a("e651")},79162:function(e,t,a){"use strict";a("585a1")},"858e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:700,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"退款模式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},["deposit_new"==e.order_type?a("a-select",{staticStyle:{width:"177px"},attrs:{placeholder:"请选择支付方式","default-value":"0",disabled:e.is_show},on:{change:e.handleChange},model:{value:e.post.refund_type,callback:function(t){e.$set(e.post,"refund_type",t)},expression:"post.refund_type"}},[a("a-select-option",{attrs:{value:0}},[e._v("请选择")]),a("a-select-option",{attrs:{value:2}},[e._v("退还押金抵扣费用")]),a("a-select-option",{attrs:{value:1}},[e._v("原路退款")])],1):a("a-select",{staticStyle:{width:"177px"},attrs:{placeholder:"请选择支付方式","default-value":"0",disabled:e.is_show},on:{change:e.handleChange},model:{value:e.post.refund_type,callback:function(t){e.$set(e.post,"refund_type",t)},expression:"post.refund_type"}},[a("a-select-option",{attrs:{value:0}},[e._v("请选择")]),a("a-select-option",{attrs:{value:2}},[e._v("退款且还原账单")]),a("a-select-option",{attrs:{value:1}},[e._v("仅退款，不还原账单")])],1)],1)],1),a("a-form-item",{attrs:{label:"退款金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入退款金额",disabled:e.is_input},model:{value:e.post.refund_money,callback:function(t){e.$set(e.post,"refund_money",t)},expression:"post.refund_money"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"退款原因",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-textarea",{ref:"textareax",staticStyle:{width:"180px"},attrs:{placeholder:"请输入退款原因"},model:{value:e.post.refund_reason,callback:function(t){e.$set(e.post,"refund_reason",t)},expression:"post.refund_reason"}})],1),a("a-col",{attrs:{span:6}})],1)],1)],1),a("div",{staticClass:"refund_type_desc"},["deposit_new"==e.order_type?a("a-descriptions",{attrs:{title:"退款模式说明",column:2,bordered:!0}},[a("a-descriptions-item",{attrs:{span:2,label:"原路退款"}},[e._v("将当前已缴账单的费用进行退款变更账单状态且将对应产生的服务时间进行退回还原；")]),a("a-descriptions-item",{attrs:{span:2,label:"退还押金抵扣费用"}},[e._v("只是将已缴的费用对应进行退款操作并变更账单状态，所收费用不退费，生成押金抵扣券,可用于在缴费时进行抵扣。")])],1):a("a-descriptions",{attrs:{title:"退款模式说明",column:2,bordered:!0}},[a("a-descriptions-item",{attrs:{span:2,label:"退款且还原账单"}},[e._v("将当前已缴账单的费用进行退款变更账单状态且将对应产生的服务时间进行退回还原，自动生成一个相同的未缴账单；")]),a("a-descriptions-item",{attrs:{span:2,label:"仅退款，不还原账单"}},[e._v("只是将已缴的费用对应进行退款并变更账单状态，关联变更信息不做任何还原操作；主要应用于线上支付，例如：价格波动导致差价，退还差价，但是服务不变；")])],1)],1),a("div",{staticClass:"rule_detail",staticStyle:{"margin-top":"10px"}},[a("a-descriptions",{attrs:{title:"基本信息",column:4}},e._l(e.retrunDetail,(function(t,i){return a("a-descriptions-item",{attrs:{span:2,label:t.title}},[e._v(" "+e._s(t.value)+" ")])})),1)],1)],1)},s=[],n=(a("b680"),a("a0e0")),l=(a("1a83"),{components:{},data:function(){return{title:"退款",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,is_show:!1,is_input:!1,form:this.$form.createForm(this),visible:!1,order_id:0,pay_money:0,pay_type_way:0,retrunDetail:[],post:{id:0,refund_money:"",refund_type:0,refund_reason:""},order_type:""}},mounted:function(){},methods:{add:function(e,t,a,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";console.log("order_type====>",s),this.order_type=s,this.$forceUpdate(),this.title="退款",this.visible=!0,this.retrunDetail=i,this.post={order_id:0,id:0,refund_money:t,refund_type:0,refund_reason:""},this.order_id=e,this.pay_money=t,void 0!=a&&(this.pay_type_way=a),this.pay_type_way,this.getRefundType()},handleChange:function(e){this.is_input=!1,2==e&&(this.post.refund_money=this.pay_money,this.is_input=!0)},getRefundType:function(){var e=this;this.request(n["a"].getRefundtype,{order_id:this.order_id}).then((function(t){""==t?e.is_show=!1:(t.refund_money>0&&(e.post.refund_money=e.pay_money-t.refund_money,e.post.refund_money<=0&&(e.post.refund_money=0),e.post.refund_money=e.post.refund_money.toFixed(2)),2==t.refund_type?e.post.refund_type=2:e.post.refund_type=1,e.is_show=!0)}))},handleSubmit:function(){if(this.post.order_id=this.order_id,this.post.refund_type<1)return this.$message.warning("请选择退款模式！"),!1;if(2==this.pay_type_way&&this.post.refund_reason.length<1)return this.$refs.textareax.focus(),this.$message.warning("线下支付的订单，退款时请写上退款原因！"),!1;var e="",t="";1==this.post.refund_type?(t="退款确认（仅退款，不还原账单）",e="只是将已缴的费用对应进行退款并变更账单状态，关联变更信息不做任何还原操作；主要应用于线上支付，例如：价格波动导致差价，退还差价，但是服务不变；"):2==this.post.refund_type&&(t="退款确认（退款且还原账单）",e="将当前已缴账单的费用进行退款变更账单状态且将对应产生的服务时间进行退回还原，自动生成一个相同的未缴账单；");var a=this;this.$confirm({title:t,content:e,onOk:function(){a.request(n["a"].addRefundInfo,a.post).then((function(e){console.log("res",e),a.$message.success("操作成功"),setTimeout((function(){a.form=a.$form.createForm(a),a.visible=!1,a.confirmLoading=!1,a.is_show=!1,a.is_input=!1,a.$emit("ok")}),1500)}))},onCancel:function(){}})},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.post.id=0,e.form=e.$form.createForm(e)}),500)}}}),r=l,o=(a("6f6f"),a("2877")),c=Object(o["a"])(r,i,s,!1,null,null,null);t["default"]=c.exports},"87c5":function(e,t,a){"use strict";a("cea3")},"8de0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-suggestions-box-1"},[a("a-collapse",{attrs:{accordion:""}},[a("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[a("p",[e._v("1、查看当前业主的所有的已缴账单明细，并且可以操作退款及打印账单，每笔已缴账单详细记录展示各个信息，并且支持导出。")]),a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v("2、"),a("strong",[e._v("退款且还原账单举例：")]),e._v("某个房间分别缴纳了1月、2月、3月的物业费，物业服务到期时间为2022年3月31号，然后退了2月的那笔物业费，退款模式选择【退款且还原账单】"),a("br"),e._v(" 退款后，物业服务到期时间变更为2022年2月28号，同时会生成一笔应交账单，账单信息与退掉的那笔账单一致，若生成的应交账单不符合当前的缴费情况，可以修改账单金额或作废账单 ")]),a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v(" 3、"),a("strong",[e._v("仅退款，不还原账单举例：")]),e._v("某个房间分别缴纳了1月、2月、3月的物业费，物业服务到期时间为2022年3月31号，然后3月开始物业费价格下调，退款模式选择【仅退款，不还原账单】，退款金额改为对应差价金额"),a("br"),e._v(" 退款后，物业服务服务时间不变，账单依旧显示在已缴账单，状态显示为部分退款 ")]),a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v(" 4、一次性收费规则账单不没有计费开始时间和计费结束时间 ")]),a("div",[e._v(" 5、点击【设置打印模板】按钮=>选择打印模板后；会联动收银台打印模板功能，已缴账单列表点击打印按钮直接打印 ")])])],1),a("div",{staticClass:"search-box"},[a("a-row",{staticClass:"suggestions_row",attrs:{gutter:48}},[e.is_vacancy_show?a("a-col",{staticClass:"suggestions_col",attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("房间：")]),a("a-cascader",{staticClass:"cascader_style margin_left_10",attrs:{options:e.options,"load-data":e.loadDataFunc,placeholder:"请选择房间","change-on-select":""},on:{change:e.setVisionsFunc},model:{value:e.search.vacancy,callback:function(t){e.$set(e.search,"vacancy",t)},expression:"search.vacancy"}})],1):e._e(),a("a-col",{staticClass:"suggestions_col",attrs:{md:8,sm:24}},[a("a-input-group",{attrs:{compact:""}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("车位号：")]),e._v(" "),a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入车位号"},model:{value:e.search.position_num,callback:function(t){e.$set(e.search,"position_num",t)},expression:"search.position_num"}})],1)],1),a("a-col",{staticClass:"suggestions_col",staticStyle:{width:"320px"},attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("所属车库：")]),a("a-select",{staticStyle:{width:"190px"},attrs:{"default-value":"0",placeholder:"请选择车库"},model:{value:e.search.garage_id,callback:function(t){e.$set(e.search,"garage_id",t)},expression:"search.garage_id"}},[a("a-select-option",{attrs:{value:"0"}},[e._v(" 全部 ")]),e._l(e.garage_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.garage_id}},[e._v(" "+e._s(t.garage_num)+" ")])}))],2)],1),a("a-col",{staticClass:"suggestions_col",staticStyle:{"padding-left":"20px","padding-right":"5px"},attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("收费项目：")]),a("a-select",{staticStyle:{width:"170px"},attrs:{"default-value":"0",placeholder:"请选择项目"},on:{change:e.projectItemChange},model:{value:e.search.project_id,callback:function(t){e.$set(e.search,"project_id",t)},expression:"search.project_id"}},[a("a-select-option",{attrs:{value:"0"}},[e._v(" 全部 ")]),e._l(e.project_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)],1),a("a-col",{staticClass:"suggestions_col",staticStyle:{"padding-left":"5px","padding-right":"10px"},attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("收费标准：")]),a("a-select",{staticStyle:{width:"180px"},attrs:{"default-value":"0",placeholder:"收费标准"},model:{value:e.search.rule_id,callback:function(t){e.$set(e.search,"rule_id",t)},expression:"search.rule_id"}},[a("a-select-option",{attrs:{value:"0"}},[e._v(" 全部 ")]),e._l(e.project_rule_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id}},[e._v(" "+e._s(t.charge_name)+" ")])}))],2)],1),e.is_vacancy_show?a("a-col",{staticClass:"suggestions_col",attrs:{md:8,sm:24}},[a("a-input-group",{attrs:{compact:""}},[a("a-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择筛选项","default-value":"name"},on:{change:e.keyChange},model:{value:e.search.key_val,callback:function(t){e.$set(e.search,"key_val",t)},expression:"search.key_val"}},[a("a-select-option",{attrs:{value:"name"}},[e._v(" 姓名 ")]),a("a-select-option",{attrs:{value:"phone"}},[e._v(" 电话 ")])],1),a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:e.key_name},model:{value:e.search.value,callback:function(t){e.$set(e.search,"value",t)},expression:"search.value"}})],1)],1):e._e(),a("a-col",{staticClass:"suggestions_col",attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("支付方式：")]),a("a-select",{staticStyle:{width:"177px"},attrs:{placeholder:"请选择支付方式"},model:{value:e.search.pay_type,callback:function(t){e.$set(e.search,"pay_type",t)},expression:"search.pay_type"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("全部")]),e._l(e.pay_type_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)],1),a("a-col",{staticClass:"suggestions_col",attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("开票状态：")]),a("a-select",{staticStyle:{width:"158px"},attrs:{placeholder:"请选择开票状态"},model:{value:e.search.invoice_type,callback:function(t){e.$set(e.search,"invoice_type",t)},expression:"search.invoice_type"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[e._v("已开票")]),a("a-select-option",{attrs:{value:"2"}},[e._v("未开票")])],1)],1),a("a-col",{staticClass:"suggestions_col",attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("账单状态：")]),a("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择账单状态"},model:{value:e.search.order_type,callback:function(t){e.$set(e.search,"order_type",t)},expression:"search.order_type"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("全部")]),a("a-select-option",{attrs:{value:"2"}},[e._v("部分退款")]),a("a-select-option",{attrs:{value:"1"}},[e._v("正常")]),a("a-select-option",{attrs:{value:"3"}},[e._v("审核中")])],1)],1),a("a-col",{staticClass:"suggestions_col",staticStyle:{width:"420px"},attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("支付时间筛选：")]),a("a-range-picker",{staticStyle:{width:"270px"},attrs:{allowClear:!0},on:{change:e.dateOnChange},model:{value:e.search.data,callback:function(t){e.$set(e.search,"data",t)},expression:"search.data"}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1),a("a-col",{staticClass:"suggestions_col",staticStyle:{width:"530px"},attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("计费时间筛选：")]),a("span",[a("a-date-picker",{attrs:{"disabled-date":e.disabledServiceStartDate,format:"YYYY-MM-DD",placeholder:"计费开始时间"},on:{change:e.serviceStartTimeChange,openChange:e.handleServiceStartOpenChange}}),e._v(" ~ "),a("a-date-picker",{attrs:{"disabled-date":e.disabledServiceEndDate,format:"YYYY-MM-DD",placeholder:"计费结束时间",open:e.endServiceOpen},on:{change:e.serviceEndTimeChange,openChange:e.handleServiceEndOpenChange}})],1)]),a("a-col",{staticClass:"suggestions_col_btn",staticStyle:{"padding-left":"5px"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(t){return e.searchList()}}},[e._v(" 查询 ")])],1),1==e.role_export?a("a-col",{staticClass:"suggestions_col_btn",staticStyle:{"padding-left":"5px","padding-right":"10px"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.printList()}}},[e._v("Excel导出")])],1):e._e(),a("a-col",{staticClass:"suggestions_col_btn",staticStyle:{width:"180px","padding-left":"5px","padding-right":"10px"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.checkSetParint(2,0,0,e.choice_ids)}}},[e._v("同一缴费人批量打印")])],1),a("a-col",{staticClass:"suggestions_col_btn",staticStyle:{"padding-left":"5px","padding-right":"10px"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.PrintModel.add(0,0,2)}}},[e._v("设置打印模板")])],1)],1)],1),a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},pagination:e.pagination,loading:e.loading},on:{change:e.table_change},scopedSlots:e._u([{key:"action",fn:function(t,i){return a("span",{},[a("a",{on:{click:function(t){return e.$refs.OrderModel.add(i.order_id,i.check_apply_id)}}},[e._v("详情")]),a("a-divider",{attrs:{type:"vertical"}}),1!=e.role_refund||i.my_check_status&&0!=i.my_check_status?e._e():a("a",{on:{click:function(t){return e.$refs.RefundModel.add(i.order_id,i.pay_money,i.pay_type_way,[{title:"房间号/车位号",value:i.numbers},{title:"缴费人",value:i.pay_bind_name},{title:"电话",value:i.pay_bind_phone},{title:"收费项目名称",value:i.project_name}],i.order_type)}}},[e._v("退款")]),3==i.my_check_status?a("a",{staticStyle:{color:"#808080"}},[e._v("已审核")]):e._e(),2==i.my_check_status?a("a",{on:{click:function(t){return e.$refs.checkRefundModel.add(i.order_id,i.order_apply_info,"order_refund")}}},[e._v("需审核")]):e._e(),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{disabled:i.is_button},on:{click:function(t){return e.checkSetParint(1,i.order_id,i.pigcms_id)}}},[e._v("打印")])],1)}}])}),a("span",{staticStyle:{"margin-left":"35px",position:"relative",top:"-65px",color:"red","font-size":"18px"}},[e._v("实际缴费总金额："+e._s(e.total_pay_money))]),a("span",{staticStyle:{"margin-left":"35px",position:"relative",top:"-65px",color:"red","font-size":"18px"}},[e._v("实际到账金额："+e._s(e.total_pay_money_real))]),a("payable-order-info",{ref:"OrderModel"}),a("add-refund-info",{ref:"RefundModel",on:{ok:e.bindOk}}),a("check-refund-info",{ref:"checkRefundModel",on:{ok:e.bindOk}}),a("get-print-template",{ref:"PrintModel",on:{ok:e.printBut}}),a("print-order",{ref:"PrintOrderModel"}),e.visible?a("a-modal",{attrs:{title:e.modalTitle,width:600,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.excelExport,cancel:e.handleCancel}},[a("label",{staticStyle:{"margin-right":"10px"}},[e._v("导出模式：")]),a("a-radio-group",{model:{value:e.exportPattern,callback:function(t){e.exportPattern=t},expression:"exportPattern"}},[a("a-radio",{attrs:{value:1}},[e._v("多行显示模式")]),a("a-radio",{attrs:{value:2}},[e._v("合并显示模式")])],1)],1):e._e()],1)},s=[],n=a("2909"),l=a("1da1"),r=(a("7d24"),a("dfae")),o=(a("96cf"),a("a9e3"),a("ac1f"),a("841c"),a("d81d"),a("b0c0"),a("d3b7"),a("7db0"),a("a0e0")),c=a("bf3f"),d=a("858e"),u=a("ce95"),_=a("a635"),p=a("f7e3"),h=[{title:"房间号/车位号",dataIndex:"numbers",key:"numbers"},{title:"缴费人",dataIndex:"pay_bind_name",key:"pay_bind_name"},{title:"电话",dataIndex:"pay_bind_phone",key:"pay_bind_phone"},{title:"收费项目名称",dataIndex:"project_name",key:"project_name"},{title:"实际缴费金额",dataIndex:"pay_money",key:"pay_money"},{title:"支付方式",dataIndex:"pay_type",key:"pay_type"},{title:"支付时间",dataIndex:"pay_time",key:"pay_time"},{title:"开票状态",dataIndex:"record_status",key:"record_status"},{title:"账单状态",dataIndex:"order_status",key:"order_status"},{title:"计费开始时间",dataIndex:"service_start_time",key:"service_start_time"},{title:"计费结束时间",dataIndex:"service_end_time",key:"service_end_time"},{title:"账单生成时间",dataIndex:"add_time",key:"add_time"},{title:"审核状态",dataIndex:"check_status_str",key:"check_status_str"},{title:"操作",key:"action",width:"170px",dataIndex:"",scopedSlots:{customRender:"action"}}],m=[],g={name:"PayableOrderList",filters:{},props:{pigcmsId:{type:Number,default:0},village_id:{type:Number,default:0},usernum:{type:String,default:""}},components:{GetPrintTemplate:u["default"],AddRefundInfo:d["default"],PayableOrderInfo:c["default"],PrintOrder:p["default"],checkRefundInfo:_["default"],"a-collapse":r["a"],"a-collapse-panel":r["a"].Panel},data:function(){var e=this;return{reply_content:"",pagination:{current:1,pageSize:10,total:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(e){return"共 ".concat(e," 条")},onShowSizeChange:function(t,a){return e.onTableChange(t,a)},onChange:function(t,a){return e.onTableChange(t,a)}},search:{keyword:"",key_val:"name",key_val1:"paytime",garage_id:"0",pay_type:"0",project_id:"0",page:1,pigcms_id:0,service_start_time:"",service_end_time:"",rule_id:"0"},form:this.$form.createForm(this),visible:!1,loading:!1,key_name:"请输入姓名",data:m,columns:h,options:[],garage_list:[],project_list:[],project_rule_list:[],pay_type_list:[],search_data:{},page:1,selectedRowKeys:[],choice_ids:[],confirmLoading:!1,exportPattern:2,modalTitle:"Excel导出",is_vacancy_show:!0,is_namephone_show:!0,role_export:0,role_refund:0,endServiceOpen:!1,total_pay_money:0,total_pay_money_real:0}},activated:function(){},mounted:function(){console.log("pigcmsId======>",this.pigcmsId),console.log("village_id======>",this.village_id),console.log("usernum======>",this.usernum),this.pigcmsId>0?(this.search.pigcms_id=this.pigcmsId,this.is_vacancy_show=!1,this.is_namephone_show=!1):(this.is_vacancy_show=!0,this.is_namephone_show=!0,this.search.pigcms_id=0),this.getList(),this.getSingleListByVillage(),this.getProjectList(),this.getGarageList(),this.payTypeList(),this.getProjectRuleList()},methods:{getList:function(){var e=this;this.loading=!0,this.search["page"]=this.page,this.search["limit"]=this.pagination.pageSize,this.request(o["a"].payableOrderList,this.search).then((function(t){e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data=t.list,void 0!=t.role_refund?(e.role_export=t.role_export,e.role_refund=t.role_refund):(e.role_export=1,e.role_refund=1),void 0!=t.total_pay_money&&(e.total_pay_money=t.total_pay_money),void 0!=t.total_pay_money_real&&(e.total_pay_money_real=t.total_pay_money_real),console.log("list",t.list),e.loading=!1}))},keyChange:function(e){"name"==e&&(this.key_name="请输入姓名"),"phone"==e&&(this.key_name="请输入电话")},bindOk:function(){this.getList()},getProjectList:function(){var e=this;this.request(o["a"].ChargeProjectList,{type:"selectdata"}).then((function(t){e.project_list=t.list})).catch((function(t){e.loading=!1}))},projectItemChange:function(e){this.getProjectRuleList()},getProjectRuleList:function(){var e=this;this.project_rule_list=[],this.search.rule_id="0";var t={charge_project_id:this.search.project_id,type:"selectdata"};this.request(o["a"].ChargeRuleList,t).then((function(t){e.project_rule_list=t.list,console.log(e.project_rule_list)})).catch((function(t){e.loading=!1}))},getGarageList:function(){var e=this;this.request(o["a"].garageList).then((function(t){console.log("garage_list",t),e.garage_list=t})).catch((function(t){e.loading=!1}))},payTypeList:function(){var e=this;this.request(o["a"].payTypeList).then((function(t){console.log("pay_type_list",t),e.pay_type_list=t})).catch((function(t){e.loading=!1}))},getSingleListByVillage:function(){var e=this;this.request(o["a"].getSingleListByVillage).then((function(t){if(console.log("+++++++Single",t),t){var a=[];t.map((function(e){a.push({label:e.name,value:e.id,isLeaf:!1})})),e.options=a}}))},getFloorList:function(e){var t=this;return new Promise((function(a){t.request(o["a"].getFloorList,{pid:e}).then((function(e){console.log("+++++++Single",e),console.log("resolve",a),a(e)}))}))},getLayerList:function(e){var t=this;return new Promise((function(a){t.request(o["a"].getLayerList,{pid:e}).then((function(e){console.log("+++++++Single",e),e&&a(e)}))}))},getVacancyList:function(e){var t=this;return new Promise((function(a){t.request(o["a"].getVacancyList,{pid:e}).then((function(e){console.log("+++++++Single",e),e&&a(e)}))}))},loadDataFunc:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e[e.length-1],a.loading=!0,setTimeout((function(){a.loading=!1}),100);case 3:case"end":return t.stop()}}),t)})))()},setVisionsFunc:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var i,s,l,r,o,c,d,u,_,p,h,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1!==e.length){a.next=12;break}return i=Object(n["a"])(t.options),a.next=4,t.getFloorList(e[0]);case 4:s=a.sent,console.log("res",s),l=[],s.map((function(e){return l.push({label:e.name,value:e.id,isLeaf:!1}),i["children"]=l,!0})),i.find((function(t){return t.value===e[0]}))["children"]=l,t.options=i,a.next=36;break;case 12:if(2!==e.length){a.next=24;break}return a.next=15,t.getLayerList(e[1]);case 15:r=a.sent,o=Object(n["a"])(t.options),c=[],r.map((function(e){return c.push({label:e.name,value:e.id,isLeaf:!1}),!0})),d=o.find((function(t){return t.value===e[0]})),d.children.find((function(t){return t.value===e[1]}))["children"]=c,t.options=o,a.next=36;break;case 24:if(3!==e.length){a.next=36;break}return a.next=27,t.getVacancyList(e[2]);case 27:u=a.sent,_=Object(n["a"])(t.options),p=[],u.map((function(e){return p.push({label:e.name,value:e.id,isLeaf:!0}),!0})),h=_.find((function(t){return t.value===e[0]})),m=h.children.find((function(t){return t.value===e[1]})),m.children.find((function(t){return t.value===e[2]}))["children"]=p,t.options=_,console.log("_this.options",t.options);case 36:case"end":return a.stop()}}),a)})))()},dateOnChange:function(e,t){this.search.date=t,console.log("search1111",this.search)},onTableChange:function(e,t){this.page=e,this.pagination.current=e,this.pagination.pageSize=t,this.getList(),console.log("onTableChange==>",e,t)},table_change:function(e){console.log("table_change",e),e.current&&e.current>0&&(this.pagination.current=e.current,this.page=e.current,this.getList(),this.selectedRowKeys=[],this.choice_ids=[])},searchList:function(){console.log("search",this.search),this.page=1;var e={current:1,pageSize:10,total:10};console.log("searchList"),this.table_change(e)},printList:function(){this.visible=!0},printBut:function(){this.table_change({current:1,pageSize:10,total:10})},onSelectChange:function(e,t){if(console.log("selectedRowKeys changed: ",e,t),t){for(var a=[],i=0;i<t.length;i++)a.push({orderid:t[i]["order_id"],pigcms_id:t[i]["pigcms_id"],room_id:t[i]["room_id"]});this.choice_ids=a,console.log("choice_ids: ",this.choice_ids),this.selectedRowKeys=e}},handleCancel:function(){this.visible=!1,this.exportType=1},excelExport:function(){var e=this;this.loading=!0,this.search["exportPattern"]=this.exportPattern,console.log(this.search),this.request(o["a"].printPayOrderList,this.search).then((function(t){console.log("list",t.list),window.location.href=t.url,e.loading=!1,e.handleCancel()})).catch((function(t){e.loading=!1,e.handleCancel()}))},disabledServiceStartDate:function(e){var t=this.search.service_end_time;return!(!e||!t)&&e.valueOf()>t.valueOf()},serviceStartTimeChange:function(e,t){console.log("serviceStartTime",t),this.search.service_start_time=t},disabledServiceEndDate:function(e){var t=this.search.service_start_time;return!(!e||!t)&&t.valueOf()>=e.valueOf()},serviceEndTimeChange:function(e,t){console.log("serviceEndTime",t),this.search.service_end_time=t},handleServiceStartOpenChange:function(e){e||(this.endServiceOpen=!0)},handleServiceEndOpenChange:function(e){this.endServiceOpen=e},arrUnique:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pigcms_id",a=[],i=0,s=e.length;i<s;i++)-1===a.indexOf(e[i][t])&&a.push(e[i][t]);return a},checkSetParint:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=this;if(2==e){if(s.length<1)return n.$message.error("请勾选账单"),!1;if(this.arrUnique(s,"pigcms_id").length>1)return n.$message.error("当前仅支持同一个缴费人进行批量打印已缴账单"),!1;if(this.arrUnique(s,"room_id").length>1)return n.$message.error("当前仅支持同一个房间进行批量打印已缴账单"),!1;if(s.length>8)return n.$message.error("最多可选择8个账单打印，您当前选中"+s.length+"个"),!1}this.request(o["a"].checkSetPrint).then((function(n){n.template_id&&n.template_id>0?t.$refs.PrintOrderModel.add(a,n.template_id,i,s):1==e?t.$refs.PrintModel.add(a,i):t.$refs.PrintModel.batchPrint(s)}))}}},v=g,f=(a("4e55"),a("2877")),y=Object(f["a"])(v,i,s,!1,null,"e0af24aa",null);t["default"]=y.exports},"928b":function(e,t,a){},a635:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:700,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"审核状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol,required:!0}},[a("a-col",{attrs:{span:20}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":1},model:{value:e.post.status,callback:function(t){e.$set(e.post,"status",t)},expression:"post.status"}},[a("a-radio",{attrs:{value:1,name:"status"}},[e._v(" 审核通过 ")]),a("a-radio",{attrs:{value:2,name:"status"}},[e._v(" 审核不通过 ")])],1)],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"审核说明",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:20}},[a("a-textarea",{ref:"textareax",staticStyle:{width:"250px",height:"120px"},attrs:{placeholder:"请输入审核说明"},model:{value:e.post.bak,callback:function(t){e.$set(e.post,"bak",t)},expression:"post.bak"}})],1),a("a-col",{attrs:{span:6}})],1)],1)],1),a("div",{staticClass:"rule_detail",staticStyle:{"margin-top":"10px"}},[a("a-descriptions",{attrs:{title:e.apply_title,column:4}},e._l(e.retrunDetail,(function(t,i){return a("a-descriptions-item",{attrs:{span:2,label:t.title}},[e._v(" "+e._s(t.value)+" ")])})),1)],1)],1)},s=[],n=a("a0e0"),l={components:{},data:function(){return{title:"退款审核",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,order_id:0,apply_title:"申请退款信息",retrunDetail:[],post:{order_id:0,xtype:"order_refund",bak:"",status:1}}},mounted:function(){},methods:{add:function(e,t,a){this.title="退款审核",this.visible=!0,this.post={order_id:e,xtype:a,bak:"",status:1},"order_discard"==a&&(this.title="作废审核",this.apply_title="申请作废信息"),this.order_id=e;var i=[];if(t&&"order_refund"==a){i.push({title:"申请时间",value:t.opt_time_str});var s="";1==t.refund_type?s="仅退款，不还原账单":2==t.refund_type&&(s="退款且还原账单"),i.push({title:"退款模式",value:s}),i.push({title:"申请退款金额",value:t.refund_money+"元"}),i.push({title:"退款原因",value:t.refund_reason})}else t&&"order_discard"==a&&(i.push({title:"申请时间",value:t.opt_time_str}),i.push({title:"作废账单金额",value:t.total_money+"元"}),i.push({title:"作废原因",value:t.discard_reason}));this.retrunDetail=i},handleSubmit:function(){this.post.order_id=this.order_id;var e="您确认审核 通过 退款申请吗？";2==this.post.status&&(e="您确认审核 不通过 退款申请吗？");var t="退款审核确认";"order_discard"==this.post.xtype&&(t="作废审核确认",e="您确认审核 通过 作废申请吗？",2==this.post.status&&(e="您确认审核 不通过 作废申请吗？"));var a=this;this.$confirm({title:t,content:e,onOk:function(){a.request(n["a"].verifyCheckauthApply,a.post).then((function(e){console.log("res",e),a.$message.success("操作成功"),setTimeout((function(){a.form=a.$form.createForm(a),a.visible=!1,a.confirmLoading=!1,a.$emit("ok")}),1500)}))},onCancel:function(){}})},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.form=e.$form.createForm(e)}),500)}}},r=l,o=(a("87c5"),a("2877")),c=Object(o["a"])(r,i,s,!1,null,null,null);t["default"]=c.exports},b8f9:function(e,t,a){"use strict";a.r(t);var i,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-suggestions-list-box"},[a("a-collapse",{attrs:{accordion:""}},[a("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[a("p",[e._v(" 在应收账单模块按照收费对象进行统计展示，并且能够查看每笔欠费的详情。物业可通过车位、收费项目等进行筛选查找。"),a("br"),e._v(" 1、在应收明细模块支持对待缴账单，多个账单批量催缴、单个账单催缴。"),a("br"),e._v(" 2、在应收明细模块展示待缴账单详情。"),a("br"),e._v(" 3、手动生成的预缴账单30分钟不缴费自动删除"),a("br"),e._v(" 4、应收明细的筛选时间是从起始时间的0点0分到结束时间的23点59分59秒"),a("br")])])],1),a("a-tabs",{attrs:{"default-active-key":"2"},on:{change:e.tabsCallback}},[e.is_vacancy_show?a("a-tab-pane",{key:"1"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"账单"}}),e._v(" 账单信息 ")],1),a("div",{staticClass:"message-suggestions-list-box"},[a("div",{staticClass:"search-box"},[a("a-row",{staticClass:"a_row_dill",attrs:{gutter:48}},[e.is_vacancy_show?a("a-col",{staticClass:"a_col_dill",attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("房间：")]),a("a-cascader",{staticClass:"cascader_style margin_left_10",attrs:{options:e.options,"load-data":e.loadDataFunc,placeholder:"请选择房间","change-on-select":""},on:{change:e.setVisionsFunc},model:{value:e.search.room_id,callback:function(t){e.$set(e.search,"room_id",t)},expression:"search.room_id"}})],1):e._e(),a("a-col",{staticClass:"a_col_dill",staticStyle:{width:"260px"},attrs:{md:8,sm:24}},[a("a-input-group",{attrs:{compact:""}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("车位号：")]),e._v(" "),a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入车位号"},model:{value:e.search.position_num,callback:function(t){e.$set(e.search,"position_num",t)},expression:"search.position_num"}})],1)],1),a("a-col",{staticClass:"a_col_dill",attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("所属车库：")]),a("a-select",{staticStyle:{width:"180px"},attrs:{"default-value":"0",placeholder:"请选择车库"},model:{value:e.search.garage_id,callback:function(t){e.$set(e.search,"garage_id",t)},expression:"search.garage_id"}},[a("a-select-option",{attrs:{value:"0"}},[e._v(" 全部 ")]),e._l(e.garage_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.garage_id}},[e._v(" "+e._s(t.garage_num)+" ")])}))],2)],1),a("a-col",{staticClass:"a_col_dill",attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("收费项目：")]),a("a-select",{staticStyle:{width:"180px"},attrs:{"default-value":"0",placeholder:"请选择项目"},on:{change:e.projectItemChange},model:{value:e.search.project_id,callback:function(t){e.$set(e.search,"project_id",t)},expression:"search.project_id"}},[a("a-select-option",{attrs:{value:"0"}},[e._v(" 全部 ")]),e._l(e.project_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)],1),a("a-col",{staticClass:"a_col_dill",attrs:{md:8,sm:20}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("收费标准：")]),a("a-select",{staticStyle:{width:"180px"},attrs:{"default-value":"0",placeholder:"收费标准"},model:{value:e.search.rule_id,callback:function(t){e.$set(e.search,"rule_id",t)},expression:"search.rule_id"}},[a("a-select-option",{attrs:{value:"0"}},[e._v(" 全部 ")]),e._l(e.project_rule_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id}},[e._v(" "+e._s(t.charge_name)+" ")])}))],2)],1),e.is_namephone_show?a("a-col",{staticClass:"a_col_dill",attrs:{md:8,sm:24}},[a("a-input-group",{attrs:{compact:""}},[a("a-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择筛选项","default-value":"name"},model:{value:e.search.key_val,callback:function(t){e.$set(e.search,"key_val",t)},expression:"search.key_val"}},[a("a-select-option",{attrs:{value:"name"}},[e._v(" 姓名 ")]),a("a-select-option",{attrs:{value:"phone"}},[e._v(" 电话 ")])],1),a("a-input",{staticStyle:{width:"150px"},model:{value:e.search.value,callback:function(t){e.$set(e.search,"value",t)},expression:"search.value"}})],1)],1):e._e(),a("br"),a("br"),a("br"),a("a-col",{staticClass:"a_col_btn",attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(t){return e.searchList()}}},[e._v(" 查询 ")])],1),1==e.role_export?a("a-col",{staticClass:"a_col_btn",attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.printList()}}},[e._v("Excel导出")])],1):e._e(),1==e.role_callpay?a("a-col",{staticClass:"a_col_btn",attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.send_message(3)}}},[e._v("全部催缴")])],1):e._e(),1==e.role_callpay?a("a-col",{staticClass:"a_col_btn",attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.send_message(2)}}},[e._v("批量催缴")])],1):e._e(),1==e.role_import_bill?a("a-col",{staticClass:"a_col_btn",attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.importBillOrder()}}},[e._v("导入欠费账单")])],1):e._e()],1)],1),e.refrathTable?a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,"row-selection":e.rowSelection,pagination:e.pagination,loading:e.loading},on:{change:e.table_change},scopedSlots:e._u([{key:"action",fn:function(t,i){return a("span",{},[a("a",{on:{click:function(t){return e.$refs.OrderModel.info(i.room_id,i.position_id,i)}}},[e._v("应收明细")]),1==e.role_callpay?a("a-divider",{attrs:{type:"vertical"}}):e._e(),1==e.role_callpay?a("a",{on:{click:function(t){return e.send_message(1,i)}}},[e._v("一键催缴")]):e._e()],1)}}],null,!1,240572673)}):e._e(),a("span",{staticStyle:{"margin-left":"20px",position:"relative",top:"-65px",color:"red","font-size":"18px"}},[e._v("合计金额："+e._s(e.total_money))])],1)]):e._e(),a("a-tab-pane",{key:"2"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"明细"}}),e._v(" 应收明细 ")],1),a("div",{staticClass:"message-suggestions-list-box"},[a("div",{staticClass:"search-box"},[a("a-row",{staticStyle:{display:"flex","flex-wrap":"wrap"},attrs:{gutter:48}},[e.is_vacancy_show?a("a-col",{staticStyle:{width:"310px",display:"flex","margin-top":"15px"},attrs:{md:8,sm:20}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("房间：")]),a("a-cascader",{staticClass:"cascader_style margin_left_10",attrs:{options:e.options,"load-data":e.loadDataFunc,placeholder:"请选择房间","change-on-select":""},on:{change:e.setVisionsFunc},model:{value:e.search__detail.room_id,callback:function(t){e.$set(e.search__detail,"room_id",t)},expression:"search__detail.room_id"}})],1):e._e(),a("a-col",{staticStyle:{width:"240px",display:"flex","margin-top":"15px"},attrs:{md:6,sm:20}},[a("a-input-group",{attrs:{compact:""}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("车位号：")]),e._v(" "),a("a-input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入车位号"},model:{value:e.search__detail.position_num,callback:function(t){e.$set(e.search__detail,"position_num",t)},expression:"search__detail.position_num"}})],1)],1),a("a-col",{staticStyle:{width:"240px",display:"flex","margin-top":"15px"},attrs:{md:6,sm:20}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("所属车库：")]),a("a-select",{staticStyle:{width:"117px"},attrs:{"default-value":"0",placeholder:"请选择车库"},model:{value:e.search__detail.garage_id,callback:function(t){e.$set(e.search__detail,"garage_id",t)},expression:"search__detail.garage_id"}},[a("a-select-option",{attrs:{value:"0"}},[e._v(" 全部 ")]),e._l(e.garage_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.garage_id}},[e._v(" "+e._s(t.garage_num)+" ")])}))],2)],1),a("a-col",{staticStyle:{width:"300px",display:"flex","margin-top":"15px"},attrs:{md:6,sm:20}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("收费项目：")]),a("a-select",{staticStyle:{width:"150px"},attrs:{"default-value":"0",placeholder:"请选择项目"},on:{change:e.projectItemChange},model:{value:e.search__detail.project_id,callback:function(t){e.$set(e.search__detail,"project_id",t)},expression:"search__detail.project_id"}},[a("a-select-option",{attrs:{value:"0"}},[e._v(" 全部 ")]),e._l(e.project_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)],1),a("a-col",{staticStyle:{width:"300px",display:"flex","margin-top":"15px"},attrs:{md:6,sm:20}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("收费标准：")]),a("a-select",{staticStyle:{width:"170px"},attrs:{"default-value":"0",placeholder:"收费标准"},model:{value:e.search__detail.rule_id,callback:function(t){e.$set(e.search__detail,"rule_id",t)},expression:"search__detail.rule_id"}},[a("a-select-option",{attrs:{value:"0"}},[e._v(" 全部 ")]),e._l(e.project_rule_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id}},[e._v(" "+e._s(t.charge_name)+" ")])}))],2)],1),e.is_namephone_show?a("a-col",{staticStyle:{width:"240px",display:"flex","margin-top":"15px"},attrs:{md:6,sm:20}},[a("a-input-group",{staticStyle:{display:"flex"},attrs:{compact:""}},[a("a-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择筛选项","default-value":"name"},model:{value:e.search__detail.key_val,callback:function(t){e.$set(e.search__detail,"key_val",t)},expression:"search__detail.key_val"}},[a("a-select-option",{attrs:{value:"name"}},[e._v(" 姓名 ")]),a("a-select-option",{attrs:{value:"phone"}},[e._v(" 电话 ")])],1),a("a-input",{staticStyle:{width:"150px"},model:{value:e.search__detail.value,callback:function(t){e.$set(e.search__detail,"value",t)},expression:"search__detail.value"}})],1)],1):e._e(),a("a-col",{staticStyle:{width:"275px","margin-top":"15px"},attrs:{md:5,sm:20}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("账单状态：")]),a("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择账单状态"},model:{value:e.search__detail.order_type,callback:function(t){e.$set(e.search__detail,"order_type",t)},expression:"search__detail.order_type"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[e._v("审核中")])],1)],1),a("a-col",{staticStyle:{width:"420px",display:"flex","margin-top":"15px"},attrs:{md:8,sm:20}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("账单生成时间筛选：")]),a("a-range-picker",{staticStyle:{width:"220px"},attrs:{allowClear:!0},on:{change:e.dateOnChange}})],1),a("a-col",{staticStyle:{width:"530px","padding-left":"20px","margin-top":"15px"},attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("计费时间筛选：")]),a("span",[a("a-date-picker",{attrs:{"disabled-date":e.disabledServiceStartDate,format:"YYYY-MM-DD",placeholder:"计费开始时间"},on:{change:e.serviceStartTimeChange,openChange:e.handleServiceStartOpenChange}}),e._v(" ~ "),a("a-date-picker",{attrs:{"disabled-date":e.disabledServiceEndDate,format:"YYYY-MM-DD",placeholder:"计费结束时间",open:e.endServiceOpen},on:{change:e.serviceEndTimeChange,openChange:e.handleServiceEndOpenChange}})],1)]),a("a-col",{staticStyle:{width:"90px","margin-top":"15px","padding-left":"1px"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(t){return e.searchList_detail()}}},[e._v(" 查询 ")])],1),a("a-col",{staticStyle:{"margin-top":"15px"},attrs:{md:2,sm:24}},[1==e.role_export?a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.printListDetail()}}},[e._v("Excel导出")]):e._e()],1),a("a-col",{staticStyle:{"margin-top":"15px"},attrs:{md:2,sm:24}},[1==e.role_callpay?a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.send_message(3,[],1)}}},[e._v("全部催缴")]):e._e()],1),a("a-col",{staticStyle:{"margin-top":"15px"},attrs:{md:2,sm:24}},[1==e.role_callpay?a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.send_message(2,[],1)}}},[e._v("批量催缴")]):e._e()],1),a("div",{staticStyle:{"margin-left":"25px"}},[a("a-col",{staticStyle:{"margin-top":"15px",width:"170px","padding-left":"5px"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.checkSetNopayPrint(2,0,0,e.choice_nopay_ids)}}},[e._v("同一房间/车位打印")])],1),a("a-col",{staticStyle:{"margin-top":"15px","padding-left":"5px",width:"160px"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.PrintModel.add(0,0,2,1)}}},[e._v("设置待缴打印模板")])],1),a("a-col",{staticStyle:{"margin-top":"15px","padding-left":"5px",width:"105px"},attrs:{md:2,sm:24}},[1==e.role_discard?a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.many_discard_order()}}},[e._v("批量作废")]):e._e()],1),1==e.role_import_bill?a("a-col",{staticStyle:{"margin-top":"15px","padding-left":"5px"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.importBillOrder()}}},[e._v("导入欠费账单")])],1):e._e()],1)],1)],1),a("br"),e.refrathTable?a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns_detail,"data-source":e.data_detail,"row-selection":e.rowSelectionDetail,pagination:e.pagination_detail,"row-key":function(e){return e.order_id},loading:e.loading_detail},on:{change:e.table_change_detail},scopedSlots:e._u([{key:"action_detail",fn:function(t,i){return a("span",{},[i.my_check_status&&0!=i.my_check_status||1!=e.role_discard?e._e():a("a",{on:{click:function(t){return e.discard_order(i.order_id)}}},[e._v("作废账单")]),3==i.my_check_status?a("a",{staticStyle:{color:"#808080"}},[e._v("已审核")]):e._e(),i.my_check_status>0?a("a-divider",{attrs:{type:"vertical"}}):e._e(),2==i.my_check_status?a("a",{on:{click:function(t){return e.$refs.checkRefundModel.add(i.order_id,i.order_apply_info,"order_discard")}}},[e._v("需审核")]):e._e(),2==i.my_check_status?a("a-divider",{attrs:{type:"vertical"}}):e._e(),i.my_check_status>0?a("a",{on:{click:function(t){return e.showpopup_detailsList(i)}}},[e._v("审核详情")]):e._e()],1)}}],null,!1,2981148641)}):e._e(),a("span",{staticStyle:{"margin-left":"20px",position:"relative",top:"-65px",color:"red","font-size":"18px"}},[e._v("合计金额："+e._s(e.total_2money))]),a("a-modal",{attrs:{width:500,title:"作废账单",visible:e.visible_invalid,maskClosable:!1,"confirm-loading":e.confirmLoading},on:{ok:e.confirm_invalid,cancel:e.handleCancel}},[a("div",{staticClass:"modal_box"},[a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[e._v("作废原因：")]),a("a-textarea",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入","auto-size":""},model:{value:e.invalidReasons,callback:function(t){e.invalidReasons=t},expression:"invalidReasons"}})],1)])])],1)])],1),a("a-modal",{staticStyle:{"z-index":"1000"},attrs:{width:1e3,title:"详情",visible:e.visible_details,maskClosable:!1,"confirm-loading":e.confirmLoading,footer:null},on:{cancel:e.handle2Cancel}},[0==e.currentIndex?a("div",[a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(t){return e.changeXTab(0)}}},[e._v("订单基本信息")]),e.show_check_detail?a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(t){return e.changeXTab(1)}}},[e._v("作废审核记录")]):e._e()],1):a("div",[a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(t){return e.changeXTab(0)}}},[e._v("订单基本信息")]),e.show_check_detail?a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(t){return e.changeXTab(1)}}},[e._v("作废审核记录")]):e._e()],1),0==e.currentIndex?a("div",{staticClass:"modal_box_1"},[a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[e._v("收费标准名称：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.charge_name))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[e._v("收费项目：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.project_name))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[e._v("应收费用：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.total_money)+"元")])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[e._v("实收费用：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.modify_money)+"元")])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[e._v("预计计费开始时间：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.service_start_time))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[e._v("预计计费结束时间：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.service_end_time))])]),e.details_data.now_ammeter-e.details_data.last_ammeter>0?a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[e._v("使用电量：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.now_ammeter-e.details_data.last_ammeter))])]):e._e(),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[e._v("滞纳天数：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.late_payment_day))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[e._v("滞纳金收取比例（每天）：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.late_fee_rate))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[e._v("滞纳金费用：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.late_payment_money))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[e._v("收费标准生效时间：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.charge_valid_time_txt))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[e._v("预缴周期：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.service_month_num?e.details_data.service_month_num:"无"))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[e._v("预缴优惠：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.diy_content?e.details_data.diy_content:"无"))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[e._v("计费模式：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.fees_type_txt?e.details_data.fees_type_txt:"无"))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[e._v("账单生成周期设置：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.bill_create_set_txt?e.details_data.bill_create_set_txt:"无"))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[e._v("账单欠费模式：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.bill_arrears_set_txt?e.details_data.bill_arrears_set_txt:"无"))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[e._v("生成账单模式：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.bill_type_txt?e.details_data.bill_type_txt:"无"))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[e._v("预缴费用：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.prepare_money?e.details_data.prepare_money:"无"))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[e._v("账单生成时间：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.add_time_txt))])]),e.details_data.parking_num_txt?a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[e._v("车位数量：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.parking_num_txt))])]):e._e(),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[e._v("合计欠费：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.all_fee)+"元")])])]):e._e(),1==e.currentIndex?a("div",{staticClass:"order_apply_list",staticStyle:{margin:"30px 0px 20px 35px"}},[a("div",[a("p",[a("strong",[e._v("申请详情")])]),a("p",[a("strong",[e._v("申请人：")]),e._v(" "+e._s(e.apply_check_info.apply_name))]),a("p",[a("strong",[e._v("申请时间：")]),e._v(" "+e._s(e.apply_check_info.add_time_str))]),a("p",[a("strong",[e._v("作废原因：")]),e._v(" "+e._s(e.apply_check_info.apply_reason))])]),a("a-timeline",e._l(e.dataCheckDetail,(function(t,i){return a("a-timeline-item",{attrs:{color:t.color_v}},[a("p",[a("strong",[e._v("审批人：")]),e._v(" "+e._s(t.pname))]),a("p",[a("strong",[e._v("审核状态：")]),e._v(" "+e._s(t.status_str))]),a("p",[a("strong",[e._v("审核时间：")]),e._v(" "+e._s(t.apply_time_str))]),a("p",[a("strong",[e._v("审核说明：")]),e._v(" "+e._s(t.bak))])])})),1)],1):e._e()]),a("check-refund-info",{ref:"checkRefundModel",on:{ok:e.bindOk}}),a("receivableModal",{ref:"OrderModel"}),a("send-type",{ref:"SendTypeModel"}),a("get-print-template",{ref:"PrintModel"}),a("print-order",{ref:"PrintOrderModel"}),a("importBill",{attrs:{visible:e.importBillVisibile},on:{exit:e.closeImportBill}})],1)},n=[],l=a("ade3"),r=a("2909"),o=a("1da1"),c=(a("7d24"),a("dfae")),d=(a("96cf"),a("a9e3"),a("ac1f"),a("841c"),a("b0c0"),a("a15b"),a("d81d"),a("d3b7"),a("7db0"),a("a0e0")),u=a("ffc8"),_=a("2425"),p=a("a635"),h=a("ce95"),m=a("f7e3"),g=a("2537"),v=[{title:"房间号/车位号",dataIndex:"number",key:"number"},{title:"业主名",dataIndex:"name",key:"name"},{title:"电话",dataIndex:"phone",key:"phone"},{title:"合计",dataIndex:"total_money",key:"total_money"},{title:"操作",key:"action",dataIndex:"",scopedSlots:{customRender:"action"}}],f=[{title:"房间号/车位号",dataIndex:"number",key:"number"},{title:"业主名",dataIndex:"name",key:"name"},{title:"电话",dataIndex:"phone",key:"phone"},{title:"收费标准",dataIndex:"charge_name",key:"charge_name"},{title:"收费项目名称",dataIndex:"project_name",key:"project_name"},{title:"收费所属科目",dataIndex:"charge_number_name",key:"charge_number_name"},{title:"应收费用",dataIndex:"total_money",key:"total_money"},{title:"计费开始时间",dataIndex:"service_start_time_txt",key:"service_start_time_txt"},{title:"计费结束时间",dataIndex:"service_end_time_txt",key:"service_end_time_txt"},{title:"账单生成时间",dataIndex:"add_time_txt",key:"add_time_txt"},{title:"上次度数",dataIndex:"last_ammeter",key:"last_ammeter"},{title:"本次度数",dataIndex:"now_ammeter",key:"now_ammeter"},{title:"审核状态",dataIndex:"check_status_str",key:"check_status_str"},{title:"操作",key:"action_detail",width:"120px",dataIndex:"",scopedSlots:{customRender:"action_detail"}}],y=[],b=[],x={name:"ReceivableOrderList",filters:{},props:{pigcmsId:{type:Number,default:0},village_id:{type:Number,default:0},usernum:{type:String,default:""}},components:{SendType:_["default"],receivableModal:u["default"],checkRefundInfo:p["default"],GetPrintTemplate:h["default"],importBill:g["default"],PrintOrder:m["default"],"a-collapse":c["a"],"a-collapse-panel":c["a"].Panel},data:function(){var e=this;return{reply_content:"",pagination:{current:1,pageSize:10,total:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(e){return"共 ".concat(e," 条")},onShowSizeChange:function(t,a){return e.onTableChange(t,a)},onChange:function(t,a){return e.onTableChange(t,a)}},search:{keyword:"",key_val:"name",page:1,project_id:"0",rule_id:"0"},form:this.$form.createForm(this),visible:!1,loading:!1,visible_details:!1,currentIndex:0,data:y,columns:v,options:[],garage_list:[],project_list:[],project_rule_list:[],dataCheckDetail:[],show_check_detail:!1,search_data:"",page:1,selectedRows:[],total_money:0,total_2money:0,details_data:[],pagination_detail:{current:1,pageSize:10,total:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(e){return"共 ".concat(e," 条")},onShowSizeChange:function(t,a){return e.onTableChange_detail(t,a)},onChange:function(t,a){return e.onTableChange_detail(t,a)}},search__detail:{keyword:"",key_val:"name",page:1,time_slot:null,order_type:"0",service_start_time:"",service_end_time:"",project_id:"0",rule_id:"0"},visible_detail:!1,loading_detail:!1,page_detail:1,data_detail:b,columns_detail:f,options_detail:[],selectedRows_detail:[],visible_invalid:!1,order_id:0,invalidReasons:"",confirmLoading:!1,apply_check_info:{},is_vacancy_show:!0,is_namephone_show:!0,refrathTable:!0,role_callpay:0,role_discard:0,role_export:0,role_import_bill:0,choice_nopay_ids:[],is_many_discard_order:0,endServiceOpen:!1,tabs_active_key:"2",importBillVisibile:!1}},activated:function(){},mounted:function(){console.log("pigcmsId======>",this.pigcmsId),console.log("village_id======>",this.village_id),console.log("usernum======>",this.usernum),this.pigcmsId>0?(this.search.pigcms_id=this.pigcmsId,this.search__detail.pigcms_id=this.pigcmsId,this.is_vacancy_show=!1,this.is_namephone_show=!1):(this.search.pigcms_id=0,this.search__detail.pigcms_id=0,this.is_vacancy_show=!0,this.is_namephone_show=!0),this.refrathTable=!0,this.getList(),this.getLists(),this.getSingleListByVillage(),this.getProjectList(),this.getGarageList(),this.getProjectRuleList()},computed:{rowSelection:function(){var e=this;return{onChange:function(t,a){console.log("selectedRowKeys: ".concat(t),"selectedRows: ",a),e.selectedRows=a},getCheckboxProps:function(e){return{props:{disabled:"Disabled User"===e.name,name:e.name}}}}},rowSelectionDetail:function(){var e=this;return{onChange:function(t,a){if(console.log("selectedRowKeys: ".concat(t),"selectedRows: ",a),e.selectedRows_detail=a,a){for(var i=[],s=0;s<a.length;s++)i.push({orderid:a[s]["order_id"],pigcms_id:a[s]["pigcms_id"],room_id:a[s]["room_id"],position_id:a[s]["position_id"]});e.choice_nopay_ids=i}},getCheckboxProps:function(e){return{props:{disabled:"Disabled User"===e.name,name:e.name}}}}}},methods:(i={closeImportBill:function(){this.importBillVisibile=!1},importBillOrder:function(){this.importBillVisibile=!0},clear:function(){console.log(1234545)},send_message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(1==e){if(""==t)return this.$message.error("无法发送"),!1;this.$refs.SendTypeModel.select(e,t,a)}else if(2==e){if(console.log("SendTypeModel",this.$refs.SendTypeModel),0==a)var i=this.selectedRows;else i=this.selectedRows_detail;if(""==i)return this.$message.warn("请选择需要发送的对象"),!1;this.$refs.SendTypeModel.select(e,i,a)}else this.$refs.SendTypeModel.select(e,[],a)},getList:function(){var e=this;this.loading=!0,this.search["page"]=this.page,this.search["limit"]=this.pagination.pageSize,this.choice_nopay_ids=[],this.request(d["a"].receivableOrderList,this.search).then((function(t){e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data=t.list,e.loading=!1,e.total_money=t.total_money,e.selectedRows=[],void 0!=t.role_callpay?(e.role_callpay=t.role_callpay,e.role_discard=t.role_discard,e.role_export=t.role_export,e.role_import_bill=t.role_import_bill):(e.role_callpay=1,e.role_discard=1,e.role_export=1,e.role_import_bill=1),e.refrathTable=!1,e.$nextTick((function(){e.refrathTable=!0}))}))},getLists:function(){var e=this;this.loading_detail=!0,this.search__detail["page"]=this.page_detail,this.search__detail["limit"]=this.pagination_detail.pageSize,this.choice_nopay_ids=[],this.request(d["a"].getNewPayOrders,this.search__detail).then((function(t){e.pagination_detail.total=t.count?t.count:0,e.pagination_detail.pageSize=t.total_limit?t.total_limit:10,e.data_detail=t.list,e.selectedRows_detail=[],void 0!=t.role_callpay?(e.role_callpay=t.role_callpay,e.role_discard=t.role_discard,e.role_export=t.role_export):(e.role_callpay=1,e.role_discard=1,e.role_export=1),void 0!=t.total_money&&(e.total_2money=t.total_money),e.refrathTable=!1,e.$nextTick((function(){e.refrathTable=!0})),e.loading_detail=!1}))},bindOk:function(){this.getLists()},discard_order:function(e){this.is_many_discard_order=0,this.visible_invalid=!0,this.order_id=e},confirm_invalid:function(){""!=this.invalidReasons?this.discardOrder(this.order_id):this.$message.warning("请填写作废原因")},discardOrder:function(e){var t=this,a={discard_reason:this.invalidReasons,order_id:e};if(1==this.is_many_discard_order){if(this.choice_nopay_ids.length<1)return this.$message.error("请至少勾选一个账单。"),!1;for(var i=[],s=0;s<this.choice_nopay_ids.length;s++)i.push(this.choice_nopay_ids[s].orderid);a.order_id=i.join(",")}this.request(d["a"].discardOrder,a).then((function(e){if(e){var a="操作成功";void 0!=e.msg&&e.msg&&(a=e.msg),t.$message.success(a),t.order_id=0,t.visible_invalid=!1,t.invalidReasons="",t.is_many_discard_order=0,t.getLists()}}))},handleCancel:function(e){this.visible_invalid=!1,this.order_id=0,this.is_many_discard_order=0,this.getLists()},handle2Cancel:function(e){this.visible_details=!1,this.order_id=0,this.currentIndex=0},many_discard_order:function(){if(this.choice_nopay_ids.length<1)return this.$message.error("请至少勾选一个账单！"),!1;this.is_many_discard_order=1,this.visible_invalid=!0,this.order_id=0},addActive:function(e){this.getList()},editActive:function(e){this.getList()},getProjectList:function(){var e=this;this.request(d["a"].ChargeProjectList,{type:"selectdata"}).then((function(t){e.project_list=t.list})).catch((function(t){e.loading=!1}))},projectItemChange:function(e){this.getProjectRuleList()},getProjectRuleList:function(){var e=this;this.project_rule_list=[],this.search__detail.rule_id="0";var t=this.search__detail.project_id;1!=this.tabs_active_key&&"1"!=this.tabs_active_key||(t=this.search.project_id,this.search.rule_id="0");var a={charge_project_id:t,type:"selectdata"};this.request(d["a"].ChargeRuleList,a).then((function(t){e.project_rule_list=t.list,console.log(e.project_rule_list)})).catch((function(t){e.loading=!1}))},tabsCallback:function(e){this.tabs_active_key=e,this.getProjectRuleList()},getGarageList:function(){var e=this;this.request(d["a"].garageList).then((function(t){console.log("garage_list",t),e.garage_list=t})).catch((function(t){e.loading=!1}))},getSingleListByVillage:function(){var e=this;this.request(d["a"].getSingleListByVillage).then((function(t){if(console.log("+++++++Single",t),t){var a=[];t.map((function(e){a.push({label:e.name,value:e.id,isLeaf:!1})})),e.options=a}}))},showpopup_detailsList:function(e){this.visible_details=!0,e.check_apply_id>0?this.show_check_detail=!0:this.show_check_detail=!1,this.getNeedPayOrderInfo(e),this.getCheckauthDetail(e)},getCheckauthDetail:function(e){var t=this;this.loading=!0,this.request(d["a"].getCheckauthDetail,{order_id:e.order_id,check_apply_id:e.check_apply_id,xtype:"order_discard",page:1}).then((function(e){t.dataCheckDetail=e.list,t.loading=!1,t.apply_check_info=e.apply_info}))},changeXTab:function(e){this.currentIndex=e,this.currentIndex},getNeedPayOrderInfo:function(e){var t=this;this.request(d["a"].getPayOrderInfo,{order_id:e.order_id}).then((function(e){e&&(t.details_data=e)}))},getFloorList:function(e){var t=this;return new Promise((function(a){t.request(d["a"].getFloorList,{pid:e}).then((function(e){console.log("+++++++Single",e),console.log("resolve",a),a(e)}))}))},getLayerList:function(e){var t=this;return new Promise((function(a){t.request(d["a"].getLayerList,{pid:e}).then((function(e){console.log("+++++++Single",e),e&&a(e)}))}))},getVacancyList:function(e){var t=this;return new Promise((function(a){t.request(d["a"].getVacancyList,{pid:e}).then((function(e){console.log("+++++++Single",e),e&&a(e)}))}))},loadDataFunc:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e[e.length-1],a.loading=!0,setTimeout((function(){a.loading=!1}),100);case 3:case"end":return t.stop()}}),t)})))()},setVisionsFunc:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,s,n,l,o,c,d,u,_,p,h,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1!==e.length){a.next=12;break}return i=Object(r["a"])(t.options),a.next=4,t.getFloorList(e[0]);case 4:s=a.sent,console.log("res",s),n=[],s.map((function(e){return n.push({label:e.name,value:e.id,isLeaf:!1}),i["children"]=n,!0})),i.find((function(t){return t.value===e[0]}))["children"]=n,t.options=i,a.next=39;break;case 12:if(2!==e.length){a.next=24;break}return a.next=15,t.getLayerList(e[1]);case 15:l=a.sent,o=Object(r["a"])(t.options),c=[],l.map((function(e){return c.push({label:e.name,value:e.id,isLeaf:!1}),!0})),d=o.find((function(t){return t.value===e[0]})),d.children.find((function(t){return t.value===e[1]}))["children"]=c,t.options=o,a.next=39;break;case 24:if(3!==e.length){a.next=38;break}return a.next=27,t.getVacancyList(e[2]);case 27:u=a.sent,_=Object(r["a"])(t.options),p=[],u.map((function(e){return p.push({label:e.name,value:e.id,isLeaf:!0}),!0})),h=_.find((function(t){return t.value===e[0]})),m=h.children.find((function(t){return t.value===e[1]})),m.children.find((function(t){return t.value===e[2]}))["children"]=p,t.options=_,console.log("_this.options",t.options),a.next=39;break;case 38:e.length;case 39:case"end":return a.stop()}}),a)})))()},dateOnChange:function(e,t){this.search.date=t,console.log("search",this.search)},table_change:function(e){console.log("e",e),e.current&&e.current>0&&(this.pagination.current=e.current,this.page=e.current,this.getList())},onTableChange:function(e,t){this.page=e,this.pagination.current=e,this.pagination.pageSize=t,this.getList(),console.log("onTableChange==>",e,t)},dateOnChangeDetail:function(e,t){this.search__detail.date=t,console.log("search",this.search)},table_change_detail:function(e){console.log("e",e),e.current&&e.current>0&&(this.pagination_detail.current=e.current,this.page_detail=e.current,this.getLists())},onTableChange_detail:function(e,t){this.page_detail=e,this.pagination_detail.current=e,this.pagination_detail.pageSize=t,this.getLists(),console.log("onTableChange==>",e,t)},searchList_detail:function(){console.log("search",this.search),this.page_detail=1;var e={current:1,pageSize:10,total:10};console.log("searchList"),this.table_change_detail(e)},searchList:function(){console.log("search",this.search),this.page=1;var e={current:1,pageSize:10,total:10};console.log("searchList"),this.table_change(e)},disabledServiceStartDate:function(e){var t=this.search__detail.service_end_time;return!(!e||!t)&&e.valueOf()>t.valueOf()},serviceStartTimeChange:function(e,t){console.log("serviceStartTime",t),this.search__detail.service_start_time=t},disabledServiceEndDate:function(e){var t=this.search__detail.service_start_time;return!(!e||!t)&&t.valueOf()>=e.valueOf()},serviceEndTimeChange:function(e,t){console.log("serviceEndTime",t),this.search__detail.service_end_time=t},handleServiceStartOpenChange:function(e){e||(this.endServiceOpen=!0)},handleServiceEndOpenChange:function(e){this.endServiceOpen=e},printList:function(){var e=this;this.loading=!0,this.request(d["a"].printReceivableOrder,this.search).then((function(t){console.log("list",t.list),window.location.href=t.url,e.loading=!1}))},printListDetail:function(){var e=this;this.loading_detail=!0,this.request(d["a"].receivableOrderImport,this.search__detail).then((function(t){console.log("list",t.list),window.location.href=t.url,e.loading_detail=!1}))}},Object(l["a"])(i,"dateOnChange",(function(e,t){this.search__detail.time_slot=t})),Object(l["a"])(i,"arrUnique",(function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"room_id",a=[],i=0,s=e.length;i<s;i++)-1===a.indexOf(e[i][t])&&a.push(e[i][t]);return a})),Object(l["a"])(i,"checkSetNopayPrint",(function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=this;if(2==e){if(s.length<1)return n.$message.error("请至少勾选一个账单"),!1;console.log("choice_nopay_ids",s);var l=this.arrUnique(s,"room_id");if(l.length>1)return n.$message.error("当前仅支持同一个房间进行打印已缴账单"),!1;var r=this.arrUnique(s,"position_id");if((0==l["0"]||"0"==l["0"])&&r.length>1)return n.$message.error("当前仅支持同一个车位进行打印已缴账单"),!1;if(s.length>8)return n.$message.error("最多可选择8个账单打印，您当前选中"+s.length+"个"),!1}this.request(d["a"].checkSetPrint,{print_type:1}).then((function(n){n.template_id&&n.template_id>0?t.$refs.PrintOrderModel.add(a,n.template_id,i,s):1==e?t.$refs.PrintModel.add(a,i):t.$refs.PrintModel.batchPrint(s)}))})),i)},k=x,C=(a("5f64"),a("2877")),S=Object(C["a"])(k,s,n,!1,null,"311b2cac",null);t["default"]=S.exports},bc10:function(e,t,a){},c704:function(e,t,a){"use strict";a("bc10")},ce95:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:500,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[e.is_set?a("div",{staticStyle:{"margin-bottom":"20px"},domProps:{innerHTML:e._s(e.set_msg)}}):e._e(),a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"选择打印模板",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择打印模板"},model:{value:e.template_id,callback:function(t){e.template_id=t},expression:"template_id"}},e._l(e.template_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.template_id}},[e._v(" "+e._s(t.title)+" ")])})),1)],1)],1)],1)],1),a("print-order",{ref:"PrintModel"})],1)},s=[],n=a("a0e0"),l=a("f7e3"),r={components:{PrintOrder:l["default"]},data:function(){return{title:"选择打印模板",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,order_id:0,template_id:void 0,template_list:[],pigcms_id:0,choice_ids:[],is_set:!1,set_msg:"",set_type:0,source_type:0,print_type:0}},mounted:function(){},methods:{add:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;this.source_type=0,this.print_type=void 0!=i&&i?i:0,0==a?(this.title="选择打印模板",this.is_set=!1,this.set_msg=""):(this.is_set=!0,this.title="设置打印模板",1==a?(this.source_type=1,this.set_msg="1、在收银台设置打印模板，收银台支持打印功能。打印功能；不设置打印模板，则不支持。<br/>2、设置打印模板后，在收银台显示已缴账单按钮，进入查看所有已缴账单数据。"):2==a&&(this.set_msg='1、设置打印模板后，联动收银台打印模板功能。<br/>2、设置打印模板后，<span style="color: #1890ff">已缴账单</span>列表点击<span style="color: #1890ff">打印</span>按钮直接打印')),1==this.print_type&&(this.title="设置待缴账单打印模板",this.set_msg='1、设置<span style="color: #1583e3">待缴</span>账单打印模板后，设置后此模板用于<span style="color: #1583e3">未交费</span>的账单打印<br />2、最多可选8个账单打印'),this.set_type=a,this.template_id=void 0,this.visible=!0,this.pigcms_id=t,this.template_list=[],this.order_id=e,this.choice_ids=[],this.getTemplate()},batchPrint:function(e){var t=this;if(e.length<1)return t.$message.error("请勾选账单"),!1;t.title="选择打印模板",t.visible=!0,t.template_id=void 0,t.template_list=[],t.order_id=0,t.pigcms_id=0,t.choice_ids=e,this.set_type=0,this.source_type=0,this.print_type=0,t.getTemplate()},getTemplate:function(){var e=this;this.request(n["a"].getTemplate,{print_type:this.print_type}).then((function(t){e.template_list=t.list,t&&t.template_id>0&&(e.template_id=t.template_id)}))},handleSubmit:function(){var e=this;if(!this.template_id)return this.$message.error("选择打印模板"),!1;this.set_type>0?(this.confirmLoading=!0,this.request(n["a"].editSetPrint,{template_id:this.template_id,print_type:this.print_type}).then((function(t){e.$message.success("编辑成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.print_type=0,e.confirmLoading=!1,e.$emit("ok",{type:e.source_type,template_id:e.template_id})}),1e3)})).catch((function(e){}))):this.$refs.PrintModel.add(this.order_id,this.template_id,this.pigcms_id,this.choice_ids)},handleCancel:function(){this.visible=!1,this.print_type=0}}},o=r,c=(a("57ac"),a("2877")),d=Object(c["a"])(o,i,s,!1,null,null,null);t["default"]=d.exports},cea3:function(e,t,a){},d6e9:function(e,t,a){},e651:function(e,t,a){}}]);