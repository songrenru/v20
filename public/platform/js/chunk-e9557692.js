(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9557692","chunk-6420cac8","chunk-2d0b3786","chunk-2d0a310a"],{"011d":function(e,t,a){"use strict";var i={getSearchHotList:"/mall/platform.MallSearchHot/getSearchHotList",getHotRecord:"/mall/platform.MallSearchHot/getHotRecord",addOrEditSearchHot:"/mall/platform.MallSearchHot/addOrEditSearchHot",getEditSearchHot:"/mall/platform.MallSearchHot/getEditSearchHot",delSearchHot:"/mall/platform.MallSearchHot/delSearchHot",saveSort:"/mall/platform.MallSearchHot/saveSort",getGoodsList:"/mall/platform.MallPlatformGoods/getGoodsList",getMerOrStoreList:"/mall/platform.MallPlatformGoods/getMerOrStoreList",goodsCategoryList:"/mall/platform.MallGoodsCategory/goodsCategoryList",goodsSetSort:"/mall/platform.MallPlatformGoods/setSort",getGoodsListByName:"/mall/platform.MallPlatformGoods/getGoodsListByName",exportGoods:"/mall/platform.MallPlatformGoods/exportGoods",goodsSetIntegral:"/mall/platform.MallPlatformGoods/setIntegral",goodsSetCommission:"/mall/platform.MallPlatformGoods/setCommission",goodsSetVirtual:"/mall/platform.MallPlatformGoods/setVirtual",goodsSetStatus:"/mall/platform.MallPlatformGoods/setStatus",goodsSetFirst:"/mall/platform.MallPlatformGoods/setFirst",merchantGoodsEdit:"/mall/platform.mallPlatformGoods/merchantGoodsEdit",getActivityRecommendList:"/mall/platform.MallActivityRecommend/getActivityRecommendList",getLimitedRecommendList:"/mall/platform.mallActivityRecommend/getLimitedRecommendList",getBargainRecommendList:"/mall/platform.mallActivityRecommend/getBargainRecommendList",getGroupRecommendList:"/mall/platform.mallActivityRecommend/getGroupRecommendList",editLimitedRecommend:"/mall/platform.mallActivityRecommend/editLimitedRecommend",editBargainRecommend:"/mall/platform.mallActivityRecommend/editBargainRecommend",editGroupRecommend:"/mall/platform.mallActivityRecommend/editGroupRecommend",setFirstLimited:"/mall/platform.mallActivityRecommend/setFirstLimited",setFirstBargain:"/mall/platform.mallActivityRecommend/setFirstBargain",setFirstGroup:"/mall/platform.mallActivityRecommend/setFirstGroup",setSortGroup:"/mall/platform.mallActivityRecommend/setSortGroup",setSortLimited:"/mall/platform.mallActivityRecommend/setSortLimited",setSortBargain:"/mall/platform.mallActivityRecommend/setSortBargain",bannerList:"/mall/platform.mallActivityRecommend/bannerList",addOrEditBanner:"/mall/platform.mallActivityRecommend/addOrEditBanner",delBanner:"/mall/platform.mallActivityRecommend/delBanner",getReplyList:"/mall/platform.MallPlatformReply/searchReply",getReplyDetails:"/mall/platform.MallPlatformReply/getReplyDetails",delReply:"/mall/platform.MallPlatformReply/delReply",getOrderList:"/mall/platform.MallOrder/searchOrders",getOrderDetails:"/mall/platform.MallOrder/getOrderDetails",getStores:"/mall/platform.MallOrder/getStores",getMers:"/mall/platform.MallOrder/getMers",loginMer:"/mall/platform.MallOrder/loginMer",loginStore:"/mall/platform.MallOrder/loginStore",getAllArea:"/mall/platform.MallOrder/getAllArea",getDiscount:"/mall/platform.MallOrder/getDiscount",getOrderLog:"/mall/platform.MallOrder/getOrderLog",exportOrder:"/mall/platform.MallOrder/exportOrder",getList:"mall/platform.MallHomeDecorate/getList",getDel:"mall/platform.MallHomeDecorate/getDel",getEdit:"mall/platform.MallHomeDecorate/getEdit",addOrEditDecorate:"mall/platform.MallHomeDecorate/addOrEdit",getSixList:"mall/platform.MallHomeDecorate/getSixList",getSixEdit:"mall/platform.MallHomeDecorate/getSixEdit",addOrEditSixAdver:"mall/platform.MallHomeDecorate/addOrEditSixAdver",delSixAdver:"mall/platform.MallHomeDecorate/delSixAdver",getRecList:"mall/platform.MallHomeDecorate/getRecList",addOrEditRec:"mall/platform.MallHomeDecorate/addOrEditRec",getRecEdit:"mall/platform.MallHomeDecorate/getRecEdit",delRecAdver:"mall/platform.MallHomeDecorate/delRecAdver",recDisplay:"mall/platform.MallHomeDecorate/recDisplay",getActGoods:"mall/platform.MallHomeDecorate/getActGoods",addRelatedGoods:"mall/platform.MallHomeDecorate/addRelatedGoods",getUrlAndRecSwitch:"mall/platform.MallHomeDecorate/getUrlAndRecSwitch",getRelatedList:"mall/platform.MallHomeDecorate/getRelatedList",saveRelatedSort:"/mall/platform.MallHomeDecorate/saveRelatedSort",delOne:"/mall/platform.MallHomeDecorate/delOne",viewLogistics:"/mall/platform.MallOrder/viewLogistics",getPeriodicList:"/mall/platform.MallOrder/getPeriodicList",setRecommend:"/mall/platform.MallPlatformGoods/setRecommend",cancelRecommend:"/mall/platform.MallPlatformGoods/cancelRecommend",isShowReply:"/mall/platform.MallPlatformReply/isShowReply",getMallBrowse:"/mall/platform.MallBrowse/getMallBrowse",MallBrowseExport:"/mall/platform.MallBrowse/export",exportBrowseTotalExport:"/mall/platform.MallBrowse/exportBrowseTotal",getAuditGoodsList:"/mall/platform.MallPlatformGoods/getAuditGoodsList",auditGoods:"/mall/platform.MallPlatformGoods/auditGoods",loginMerchant:"/mall/platform.MallPlatformGoods/loginMerchant",orderPrintTicket:"/mall/platform.MallOrder/printOrder"};t["a"]=i},1885:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[a("div",[a("a-tabs",{attrs:{activeKey:e.activeKey},on:{change:e.actChange}},[a("a-tab-pane",{key:"getLimitedRecommendList",attrs:{tab:"秒杀活动"}}),a("a-tab-pane",{key:"getGroupRecommendList",attrs:{tab:"拼团活动"}}),a("a-tab-pane",{key:"getBargainRecommendList",attrs:{tab:"砍价活动"}})],1)],1),a("a-form-model",{attrs:{layout:"inline",model:e.searchForm},on:{submit:e.getActList},nativeOn:{submit:function(e){e.preventDefault()}}},[a("a-row",{attrs:{type:"flex",justify:"space-between"}},[a("a-col",[a("a-form-model-item",{attrs:{label:"商品名称"}},[a("a-input",{staticClass:"keywords",staticStyle:{width:"200px"},attrs:{placeholder:"请输入商品名称"},model:{value:e.searchForm.keywords,callback:function(t){e.$set(e.searchForm,"keywords",t)},expression:"searchForm.keywords"}})],1)],1),a("a-col",[a("a-form-model-item",{attrs:{label:"推荐状态"}},[a("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择推荐状态"},on:{change:e.isRecommendChange},model:{value:e.searchForm.isRecommend,callback:function(t){e.$set(e.searchForm,"isRecommend",t)},expression:"searchForm.isRecommend"}},[a("a-select-option",{attrs:{value:"1"}},[e._v(" 已推荐至首页")]),a("a-select-option",{attrs:{value:"2"}},[e._v(" 未推荐至首页")])],1)],1)],1),a("a-col",[a("a-form-model-item",{attrs:{label:"选择商家"}},e._l(e.merchantOptions,(function(t){return a("a-radio",{key:t.value,attrs:{checked:t.value==e.merchantType},on:{click:function(a){return e.searchRadioOpt(t.value,"1")}}},[e._v(" "+e._s(t.label)+" ")])})),1),a("a-form-model-item",{attrs:{label:"选择店铺"}},e._l(e.storeOptions,(function(t){return a("a-radio",{key:t.value,attrs:{checked:t.value==e.storeType},on:{click:function(a){return e.searchRadioOpt(t.value,"2")}}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),a("a-col",[a("a-form-model-item",{attrs:{label:"活动时间"}},[a("a-range-picker",{attrs:{value:e.searchForm.time,format:"YYYY-MM-DD"},on:{change:e.onDateRangeChange},model:{value:e.searchForm.time,callback:function(t){e.$set(e.searchForm,"time",t)},expression:"searchForm.time"}})],1)],1),a("a-col",[a("a-form-model-item",[a("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v(" 查询")]),a("a-button",{staticClass:"ml-20",on:{click:e.resetForm}},[e._v(" 重置")]),a("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(t){return e.showModal(e.record)}}},[e._v("轮播图列表")])],1)],1)],1)],1),a("section",{staticClass:"mt-20"},[a("a-row",{attrs:{type:"flex",justify:"space-between"}},[a("a-col",{attrs:{span:24}},[a("a-table",{attrs:{columns:e.columnsList,"data-source":e.goodsList,pagination:!1,"row-selection":1==e.searchForm.isRecommend?null:{selectedRowKeys:e.goodsSelectedRowKeys,onChange:e.ongoodsSelectChange},rowKey:"act_goods_id"},scopedSlots:e._u([{key:"goods_name",fn:function(t,i){return[a("div",{staticClass:"flex align-center"},[a("img",{staticClass:"size-45",attrs:{src:i.image}}),a("div",{staticClass:"flex flex-direction justify-between"},[a("span",{staticClass:"flex-1 ml-10"},[e._v(e._s(t)+" ")])])])]}},{key:"time",fn:function(t,i){return[a("span",[e._v(e._s(i.start_time)+"-"+e._s(i.end_time))])]}},{key:"price",fn:function(t,i){return["spu"==i.goods_type?a("span",[e._v("￥"+e._s(i.price))]):a("span",[e._v("￥"+e._s(i.min_price)+" - ￥"+e._s(i.max_price))])]}},{key:"act_price",fn:function(t,i){return["spu"==i.goods_type?a("span",[e._v("￥"+e._s(i.act_price))]):a("span",[e._v("￥"+e._s(i.min_act_price)+" - ￥"+e._s(i.max_act_price))])]}},{key:"status",fn:function(t,i){return[0==i.status?a("span",[e._v("未开始")]):e._e(),1==i.status?a("span",[e._v("进行中")]):e._e(),2==i.status?a("span",[e._v("已失效")]):e._e()]}},{key:"sort",fn:function(t,i){return[a("a-input-number",{attrs:{"default-value":t||0,precision:0,min:0},on:{blur:function(a){return e.handleSortChange(a,t,i)}},model:{value:i.sort,callback:function(t){e.$set(i,"sort",t)},expression:"record.sort"}})]}},{key:"recommend_time",fn:function(t,i){return[a("span",[e._v(e._s(i.recommend_start_time)+"-"+e._s(i.recommend_end_time))])]}},{key:"real_money",fn:function(t,i){return[a("span",[e._v("￥"+e._s(i.real_money))])]}},{key:"action",fn:function(t,i){return[a("a",{on:{click:function(t){return e.$refs.createModal.edit(i,e.activeKey,1)}}},[e._v("首页推荐设置")]),1==e.searchForm.isRecommend?a("a-button",{staticClass:"link-btn",attrs:{type:"link"},on:{click:function(t){return e.btnOpt(i,"setFirst")}}},[e._v(" |"+e._s(1==i.is_first?"取消置顶":"置顶")+" ")]):e._e()]}}])}),a("a-row",{staticClass:"mt-20",attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("a-col",{staticClass:"ml-20",attrs:{span:10}},[2==e.searchForm.isRecommend?a("span",[a("a-checkbox",{attrs:{checked:!(e.goodsSelectedRowKeys.length!=e.goodsList.length||!e.goodsList.length),disabled:!e.goodsList.length},on:{change:e.allCheck}},[e._v("当页全选")]),a("span",[e._v("已选 "+e._s(e.goodsSelectedRowKeys.length))]),a("a-button",{staticClass:"ml-10",attrs:{type:"primary",disabled:!e.goodsSelectedRowKeys.length},on:{click:function(t){return e.batchRec(e.goodsSelectedRowKeys,e.activeKey)}}},[e._v("批量推荐至首页")])],1):e._e()]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("a-pagination",{attrs:{current:e.searchForm.page,pageSize:e.searchForm.pageSize,total:e.total,"show-size-changer":"","show-quick-jumper":"","show-total":function(e){return"共 "+e+" 条记录"}},on:{change:e.onPageChange,showSizeChange:e.onPageSizeChange}})],1)],1)],1)],1)],1),a("set-recommend",{ref:"createModal",on:{updateList:e.isRecommendChange,ok:e.handleOk}}),[a("div",[a("a-modal",{attrs:{title:"添加轮播图",width:700,footer:null},on:{ok:e.handleOk},model:{value:e.swipperVisible,callback:function(t){e.swipperVisible=t},expression:"swipperVisible"}},[[a("a-button",{staticStyle:{"margin-bottom":"8px"},attrs:{size:"small"},on:{click:function(t){return e.showAddModal("add")}}},[e._v("添加轮播")]),a("a-table",{staticClass:"lunbo-list",attrs:{columns:e.column,"data-source":e.bannerData,rowKey:e.bannerData.id},scopedSlots:e._u([{key:"image",fn:function(t,i){return[a("img",{staticStyle:{width:"20rem",height:"7.5rem",border:"1px solid #cccccc"},attrs:{src:i.image}}),a("div",[a("span",[e._v("链接：")]),a("span",[e._v(e._s(i.url))])])]}},{key:"sort",fn:function(t,i){return[a("a-tag",{staticStyle:{width:"3.125rem","text-align":"center"},attrs:{slot:"id"},slot:"id"},[e._v(e._s(t))])]}},{key:"editAndMore",fn:function(t,i){return[a("a-button",{staticClass:"editOrMore",on:{click:function(t){return e.showAddModal("edit",i)}}},[e._v("编辑")]),a("a-button",{staticClass:"editOrMore",staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.showSwipperConfirm(i)}}},[e._v("删除 ")])]}}])})]],2)],1)],[a("div",[a("a-modal",{attrs:{title:e.swiperTypeIsAdd?"添加轮播图":"编辑轮播图",cancelText:"关闭",okText:"添加",okType:"primary",width:800},on:{ok:e.handleYesOk},model:{value:e.bannerVisible,callback:function(t){e.bannerVisible=t},expression:"bannerVisible"}},[[a("a-form",{attrs:{form:e.form,"label-col":{span:5},"wrapper-col":{span:12}},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"轮播图片",help:"建议尺寸640 * 240"}},[a("choose-image",{ref:"chooseImage",attrs:{name:e.uploadName,max:e.max,upload_dir:e.upload_dir,type:e.uploadType},on:{callback:e.callBack}}),a("a-button",{staticStyle:{width:"200px"},on:{click:e.chooseImage}},[e._v("添加轮播图片")]),e._l(e.imageList,(function(e,t){return a("img",{key:t,staticStyle:{width:"20rem",height:"7.5rem",border:"1px solid #cccccc"},attrs:{src:e}})}))],2),a("a-form-item",{attrs:{label:"排序",help:"数字越大，排序越靠前"}},[a("a-input-number",{staticStyle:{width:"100px"},attrs:{placeholder:""},model:{value:e.img_sort,callback:function(t){e.img_sort=t},expression:"img_sort"}})],1),a("a-form-item",{attrs:{label:"链接地址"}},[a("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请填写链接地址"},model:{value:e.swipper_url,callback:function(t){e.swipper_url=t},expression:"swipper_url"}}),a("a-button",{on:{click:e.choosePower}},[e._v("功能库")])],1)],1)]],2)],1)],a("a-modal",{attrs:{title:e.modalTitle,centered:"",maskClosable:!1,width:600},on:{ok:e.handleOk,cancel:e.handleCancel},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[1==e.modalType||2==e.modalType?[a("a-form-model",{attrs:{layout:"inline",model:e.modalSearchForm,"label-col":{span:2},"wrapper-col":{span:22}}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{label:"搜索",labelAlign:"left"}},[a("a-input-search",{attrs:{"enter-button":"",placeholder:1==e.modalType?"请输入商家名称":"请输入店铺名称"},on:{search:e.getMerOrStoreList}})],1)],1),a("a-table",{staticClass:"mt-20",attrs:{"row-selection":{selectedRowKeys:e.modalSelectedRowKeys,onChange:e.onModalSelectChange},columns:e.columns,scroll:{y:400},"data-source":e.modalTableData,pagination:e.pagination,"row-key":1==e.modalType?"mer_id":"store_id"}},[a("template",{slot:"name"},[a("span",[e._v(e._s(1==e.modalType?"商家名称":"店铺名称"))])])],2)]:e._e()],2)],2)},l=[],o=(a("4de4"),a("d3b7"),a("7db0"),a("99af"),a("d81d"),a("159b"),a("4e82"),a("b0c0"),a("fb6a"),a("011d")),s=a("ca00"),r=a("d6be"),n=a("6cf3"),c=[{title:"轮播图",dataIndex:"image",key:"image",width:"20%",scopedSlots:{customRender:"image"}},{title:"排序",dataIndex:"sort",key:"sort",scopedSlots:{customRender:"sort"}},{title:"浏览量",dataIndex:"click_number",key:"click_number"},{title:"操作",key:"editAndMore",dataIndex:"editAndMore",scopedSlots:{customRender:"editAndMore"}}],m={name:"ActivityLimitedRecommend",components:{SetRecommend:r["default"],ChooseImage:n["a"]},data:function(){return{activeKey:"getLimitedRecommendList",swipperVisible:!1,column:c,bannerData:[],swiperTypeIsAdd:!1,bannerVisible:!1,form:this.$form.createForm(this,{name:"coordinated"}),uploadName:"goods_img",max:1,upload_dir:"/mall/goods/images",uploadType:"image",imageList:[],swipper_url:"",img_sort:0,searchForm:{merList:[],storeList:[],keywords:"",page:1,pageSize:10,isRecommend:"2",time:[],start_time:"",end_time:""},merchantType:1,storeType:1,merchantOptions:[{label:"全部商家",value:1},{label:"部分商家",value:2}],storeOptions:[{label:"全部店铺",value:1},{label:"部分店铺",value:2}],modalType:"",modalVisible:!1,modalSearchForm:{search:"",type:""},modalTableData:[],modalSelectedRowKeys:[],pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onModalPageChange,onShowSizeChange:this.onModalPageSizeChange,showTotal:function(e){return"共 ".concat(e," 条")}},columns:[{dataIndex:"name",slots:{title:"name"},align:"center"}],goodsList:[],sortList:[],defaultOpenSort:[],defaultSort:[],catId:"",columnsList:[],columnsGoods:[{title:"商品名称",dataIndex:"goods_name",scopedSlots:{customRender:"goods_name"},width:200},{title:"商家名称",dataIndex:"mer_name",width:120,align:"center"},{title:"店铺名称",dataIndex:"store_name",width:120,align:"center"},{title:"活动时间",dataIndex:"time",width:180,scopedSlots:{customRender:"time"}},{title:"活动状态",dataIndex:"status",width:100,scopedSlots:{customRender:"status"}},{title:"原价",dataIndex:"price",scopedSlots:{customRender:"price"},width:100},{title:"活动价",dataIndex:"act_price",scopedSlots:{customRender:"act_price"},width:100},{title:"实收金额",dataIndex:"real_money",width:100,scopedSlots:{customRender:"real_money"}},{title:"排序",dataIndex:"sort",width:150,scopedSlots:{customRender:"sort"}},{title:"推荐时间段",dataIndex:"recommend_time",scopedSlots:{customRender:"recommend_time"},width:180},{title:"操作",dataIndex:"goods_id",width:250,align:"center",scopedSlots:{customRender:"action"}}],goodsSelectedRowKeys:[],total:0,currentGoods:"",rules:{},commissionFormData:{goods_id:"",spread_rate:0,sub_spread_rate:0,third_spread_rate:0},merInfo:""}},computed:{modalTitle:function(){var e="";return 1==this.modalType?e="选择商家":2==this.modalType?e="选择店铺":3==this.modalType?e="设置积分":4==this.modalType?e="设置佣金":7==this.modalType&&(e="提示"),e}},created:function(){this.isRecommendChange(),this.getActList()},methods:{getActList:function(){var e=this;this.request(o["a"][this.activeKey],this.searchForm).then((function(t){e.goodsList=t.list||[],e.total=t.count}))},onDateRangeChange:function(e,t){console.log(e,"date"),this.$set(this.searchForm,"time",[e[0],e[1]]),this.$set(this.searchForm,"start_time",t[0]),this.$set(this.searchForm,"end_time",t[1])},actChange:function(e){this.activeKey=e,this.resetForm(),this.getActList()},searchRadioOpt:function(e,t){this.modalType=t,1==this.modalType?this.merchantType=e:2==this.modalType&&(this.storeType=e),2==e?this.modalVisible=!0:1==e&&(this.searchForm.merList=[],this.searchForm.storeList=[]),this.getMerOrStoreList()},isRecommendChange:function(){var e=this;this.columnsList=this.columnsGoods.filter((function(t){return 2!=e.searchForm.isRecommend||"sort"!=t.dataIndex&&"recommend_time"!=t.dataIndex?t:void 0})),2==this.searchForm.isRecommend&&(this.goodsSelectedRowKeys=[]),this.getActList()},getMerOrStoreList:function(e){var t=this;this.modalTableData=[],e?(this.searchForm.keywords=e,this.$set(this.pagination,"current",1)):e=this.searchForm.keywords,this.$set(this.modalSearchForm,"type",this.modalType),this.$set(this.modalSearchForm,"search",e),this.$set(this.modalSearchForm,"page",this.pagination.current),this.modalSearchForm.pageSize=this.pagination.pageSize,this.request(o["a"].getMerOrStoreList,this.modalSearchForm).then((function(e){t.modalTableData=e.list||[],t.pagination.total=e.count}))},onModalPageChange:function(e,t){this.$set(this.pagination,"current",e),this.getMerOrStoreList()},onModalPageSizeChange:function(e,t){this.$set(this.pagination,"pageSize",t),this.getMerOrStoreList()},onModalSelectChange:function(e){this.modalSelectedRowKeys=e},joinActivityOpt:function(e){var t="";return e&&(t=this.activityOptions.filter((function(t){return t.value==e}))[0]||""),t?t["label"]:""},goodsCategoryList:function(){var e=this;this.defaultSort=[],this.defaultOpenSort=[],this.request(o["a"].goodsCategoryList,this.searchForm).then((function(t){e.sortList=t.list||[]}))},onSortSelect:function(e){e.item;var t=e.key;e.selectedKeys;this.catId=t,this.defaultSort=[t],console.log("--------------catId",this.catId),this.goodsSelectedRowKeys=[],this.getActList()},onOpenChange:function(e){var t=this,a=e.find((function(e){return-1===t.defaultOpenSort.indexOf(e)}));-1===this.defaultOpenSort.indexOf(a)?this.defaultOpenSort=e:this.defaultOpenSort=a?[a]:[]},resetForm:function(){this.$set(this,"searchForm",{merList:[],storeList:[],keywords:"",page:1,pageSize:10,isRecommend:"2",time:[],start_time:"",end_time:""}),this.merchantType=1,this.storeType=1,this.getActList(),this.goodsSelectedRowKeys=[]},handleSortChange:function(e,t,a){var i=this,l={activity_id:a.id,goods_id:a.act_goods_id,sort:t},s="";"getLimitedRecommendList"==this.activeKey?s="setSortLimited":"getBargainRecommendList"==this.activeKey?s="setSortBargain":"getGroupRecommendList"==this.activeKey&&(s="setSortGroup"),this.request(o["a"][s],l).then((function(e){i.getActList()}))},btnOpt:function(e,t){this.currentGoods=e,"setFirst"!=t||this.setFirstOpt(e)},editGoods:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.modalVisible=!1,this.modalType="";var t=location.href.substring(0,location.href.indexOf("#"));e&&Object(s["n"])("merchant_access_token",this.merInfo.ticket,null),window.open("".concat(t,"#/merchant/merchant.mall/editGoods?store_id=").concat(this.currentGoods.store_id,"&goods_id=").concat(this.currentGoods.goods_id))},setFirstOpt:function(e){var t=this,a={activity_id:e.id,act_id:e.act_id,goods_id:e.act_goods_id,is_first:1==e.is_first?0:1},i="";"getLimitedRecommendList"==this.activeKey?i="setFirstLimited":"getBargainRecommendList"==this.activeKey?i="setFirstBargain":"getGroupRecommendList"==this.activeKey&&(i="setFirstGroup"),i&&this.request(o["a"][i],a).then((function(e){t.$message.success("设置成功！"),t.modalType="",t.getActList()}))},handleOk:function(){1==this.modalType?this.$set(this.searchForm,"merList",this.modalSelectedRowKeys):2==this.modalType&&this.$set(this.searchForm,"storeList",this.modalSelectedRowKeys),1!=this.modalType&&2!=this.modalType||(this.modalVisible=!1,this.modalSelectedRowKeys=[],this.modalTableData=[])},handleCancel:function(){var e="";3==this.modalType&&(e="scoreForm"),4==this.modalType&&(e="commissionForm"),e&&this.$refs[e].clearValidate(),this.currentGoods&&(this.currentGoods=""),this.merInfo&&(this.merInfo=""),this.modalType=""},onPageChange:function(e,t){this.$set(this.searchForm,"page",e),this.getActList()},onPageSizeChange:function(e,t){this.$set(this.searchForm,"pageSize",t),this.getActList()},ongoodsSelectChange:function(e){console.log(e,"selectedRowKeys==selectedRowKeys===selectedRowKeys"),this.goodsSelectedRowKeys=e},allCheck:function(e){e.target.checked?this.goodsSelectedRowKeys=this.goodsList.map((function(e){return e.id})):this.goodsSelectedRowKeys=[]},batchRec:function(e,t){var a=[];this.goodsList.forEach((function(t){e.forEach((function(e){e==t["act_goods_id"]&&a.push(t)}))})),this.$refs.createModal.edit(a,t,2)},showModal:function(e){this.swipperVisible=!0;var t="";"getLimitedRecommendList"==this.activeKey?t=1:"getBargainRecommendList"==this.activeKey?t=2:"getGroupRecommendList"==this.activeKey&&(t=3),this.refreshBannerList(e,t)},refreshBannerList:function(e,t){var a=this;this.cur_record=e,this.cur_type=t,this.request(o["a"].bannerList,{act_type:t}).then((function(e){a.bannerData=e}))},showAddModal:function(e,t){"add"==e?(this.swiperTypeIsAdd=!0,this.swipper_url="",this.img_sort=0,this.imageList=[],this.cur_swiper_record=""):(this.cur_swiper_record=t,this.swiperTypeIsAdd=!1,this.imageList=t.image.split(),this.swipper_url=t.url,this.img_sort=t.sort),console.log(this.cur_record,this.cur_swiper_record),this.bannerVisible=!0},handleYesOk:function(e){var t=this,a=this.form.validateFields;this.imageList[0]?a((function(e,a){if(!e){console.log("Received values of form: ",a,t.cur_record);var i="";"getLimitedRecommendList"==t.activeKey?i=1:"getBargainRecommendList"==t.activeKey?i=2:"getGroupRecommendList"==t.activeKey&&(i=3),t.request(o["a"].addOrEditBanner,{id:t.cur_swiper_record&&t.cur_swiper_record.id?t.cur_swiper_record.id:"",act_type:i,image:t.imageList[0],url:t.swipper_url,sort:t.img_sort}).then((function(e){console.log(e),t.bannerVisible=!1,t.refreshBannerList(t.cur_record,t.cur_type)}))}})):this.$message.error("请添加轮播图片")},showSwipperConfirm:function(e){var t=this;console.log(e);var a="";"getLimitedRecommendList"==this.activeKey?a=1:"getBargainRecommendList"==this.activeKey?a=2:"getGroupRecommendList"==this.activeKey&&(a=3),this.$confirm({title:"你确定要删除吗?",onOk:function(){t.request(o["a"].delBanner,{id:e.id,act_type:a}).then((function(e){console.log(e),t.refreshBannerList(t.cur_record,t.cur_type)}))},onCancel:function(){console.log("Cancel")},class:"test"})},handleSubmit:function(e){e.preventDefault(),this.form.validateFields((function(e,t){e||console.log("Received values of form: ",t)}))},uploadCallback:function(e){var t=this.max,a=e.name,i=this.formData.goods_img.concat(e.list);this.$set(this.formData,a,i.slice(-t))},chooseImage:function(){this.$refs.chooseImage.openDialog()},callBack:function(e){this.imageList=e.list},choosePower:function(){var e=this;this.$LinkBases({source:"platform",type:"h5",handleOkBtn:function(t){console.log("handleOk",t),e.swipper_url=t.url,e.$nextTick((function(){e.form.setFieldsValue({url:e.url})}))}})}}},d=m,h=(a("50a3"),a("0c7c")),p=Object(h["a"])(d,i,l,!1,null,"1e0e3d05",null);t["default"]=p.exports},2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a("6b75");function l(e){if(Array.isArray(e))return Object(i["a"])(e)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function o(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var s=a("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e){return l(e)||o(e)||Object(s["a"])(e)||r()}},4031:function(e,t,a){"use strict";var i={getLists:"/mall/merchant.MerchantStoreMall/getStoreList",perfectedStore:"/mall/merchant.MerchantStoreMall/perfectedStore",getStoreConfigList:"/mall/merchant.MerchantStoreMall/getStoreConfigList",getShippingList:"/mall/merchant.MallShipping/getShippingList",updateShipping:"/mall/merchant.MallShipping/addShipping",changeState:"/mall/merchant.MallShipping/changeState",removeShipping:"/mall/merchant.MallShipping/del",getShippingInfo:"/mall/merchant.MallShipping/edit",getMerchantSort:"/mall/merchant.MallGoods/getMerchantSort",getMallGoods:"/mall/merchant.MallGoods/getMallGoodsSelect",getGiveList:"/mall/merchant.MallGive/getGiveList",giveAdd:"/mall/merchant.MallGive/addGive",giveChangeState:"/mall/merchant.MallGive/changeState",giveDel:"/mall/merchant.MallGive/del",getGiveInfo:"/mall/merchant.MallGive/edit",getPlatSort:"/mall/merchant.MallGoods/getPlatformSort",getStoreSort:"/mall/merchant.MallGoods/getMerchantSort",getPrepareList:"/mall/merchant.MallPrepare/getPrepareList",updatePrepare:"/mall/merchant.MallPrepare/addPrepare",prepareChangeState:"/mall/merchant.MallPrepare/changeState",removePrepare:"/mall/merchant.MallPrepare/del",getPrepareInfo:"/mall/merchant.MallPrepare/edit",getReachedList:"/mall/merchant.MallReached/getReachedList",updateReachedList:"/mall/merchant.MallReached/addReached",getReachedInfo:"/mall/merchant.MallReached/edit",reachedChangeState:"/mall/merchant.MallReached/changeState",reachedDel:"/mall/merchant.MallReached/del",addRobot:"/mall/merchant.MallGroup/addRobot",delRobot:"/mall/merchant.MallGroup/delRobot",getRobotList:"/mall/merchant.MallGroup/getRobotList",getRobotName:"/mall/merchant.MallGroup/getRobotName",getUploadImages:"/common/common.UploadFile/getUploadImages",getGoodsSort:"/mall/merchant.MallGoods/getMerchantSort",getGoodsStatus:"/mall/merchant.MallGoods/getNumbers",getGoodsList:"/mall/merchant.MallGoods/getGoodsList",changeGoodsStatus:"/mall/merchant.MallGoods/setStatusLot",setVirtualSales:"/mall/merchant.MallGoods/setVirtualSales",changeGoodsSort:"/mall/merchant.MallGoods/setSort",getGoodsSkuPrice:"/mall/merchant.MallGoods/getGoodsSkuInfo",changeGoodsPrice:"/mall/merchant.MallGoods/setGoodsSkuInfo",getPlatProps:"/mall/merchant.MallGoods/getPlatformProperties",getFreightList:"/mall/merchant.MallGoods/getfreightList",getServiceList:"/mall/merchant.MallGoods/dealService",removeGoods:"/mall/merchant.MallGoods/delGoods",updateGoods:"/mall/merchant.MallGoods/addOrEditGoods",exportGoods:"/mall/merchant.MallGoods/exportGoods",getGoodsInfo:"/mall/merchant.MallGoods/getEditGoods",getGroupList:"/mall/merchant.MallGroup/getGroupList",groupAdd:"/mall/merchant.MallGroup/addGroup",groupChangeState:"/mall/merchant.MallGroup/changeState",groupDel:"/mall/merchant.MallGroup/del",getGroupInfo:"/mall/merchant.MallGroup/editDetail",getPeriodicList:"/mall/merchant.MallPeriodic/getPeriodicList",updatePeriodic:"/mall/merchant.MallPeriodic/addPeriodic",periodicChangeState:"/mall/merchant.MallPeriodic/changeState",removePeriodic:"/mall/merchant.MallPeriodic/del",getPeriodicInfo:"/mall/merchant.MallPeriodic/edit",getBargainList:"/mall/merchant.MallBargain/getBargainList",bargainAdd:"/mall/merchant.MallBargain/addBargain",bargainChangeState:"/mall/merchant.MallBargain/changeState",bargainDel:"/mall/merchant.MallBargain/del",getBargainInfo:"/mall/merchant.MallBargain/editDetail",getMinusDiscountList:"/mall/merchant.MallFullMinusDiscount/getFullMinusDiscountList",updateMinusDiscount:"/mall/merchant.MallFullMinusDiscount/addFullMinusDiscount",minusDiscountChangeState:"/mall/merchant.MallFullMinusDiscount/changeState",removeMinusDiscount:"/mall/merchant.MallFullMinusDiscount/del",getMinusDiscountInfo:"/mall/merchant.MallFullMinusDiscount/edit",getLimitedList:"/mall/merchant.MallLimited/getLimitedList",updateLimited:"/mall/merchant.MallLimited/addLimited",limitedChangeState:"/mall/merchant.MallLimited/changeState",removeLimited:"/mall/merchant.MallLimited/del",getLimitedInfo:"/mall/merchant.MallLimited/edit",getGoodsSortList:"/mall/merchant.MallGoodsSort/getSortList",delGoodsSort:"/mall/merchant.MallGoodsSort/delSort",editGoodsSort:"/mall/merchant.MallGoodsSort/addOrEditSort",getEditSort:"/mall/merchant.MallGoodsSort/getEditSort",editSort:"/mall/merchant.MallGoodsSort/saveSort",saveStatus:"/mall/merchant.MallGoodsSort/saveStatus",getAllGoodsSort:"/mall/merchant.MallGoodsSort/getSort",getStoreList:"/mall/merchant.MallMerchantReply/getStores",getReplyList:"/mall/merchant.MallMerchantReply/searchReply",addComment:"/mall/merchant.MallMerchantReply/merchantReply",getReplyDetails:"/mall/merchant.MallMerchantReply/getReplyDetails",getShowHomePage:"/mall/merchant.MallMerchantReply/getShowHomePage",getQualityReviews:"/mall/merchant.MallMerchantReply/getQualityReviews",getShowHomePageCancel:"/mall/merchant.MallMerchantReply/getShowHomePageCancel",getQualityReviewsCancel:"/mall/merchant.MallMerchantReply/getQualityReviewsCancel",getOrderList:"/mall/merchant.MallOrder/searchOrders",getOrderDetails:"/mall/merchant.MallOrder/getOrderDetails",getCollect:"/mall/merchant.MallOrder/getCollect",getDiscount:"/mall/merchant.MallOrder/getDiscount",exportOrder:"/mall/merchant.MallOrder/exportOrder ",deleteJudge:"/mall/merchant.MallGoods/deleteJudge ",getTemplateList:"/mall/merchant.ExpressTemplate/index",getTemplateAreaList:"/mall/merchant.ExpressTemplate/ajax_area",getTemplateAreaNameList:"/mall/merchant.ExpressTemplate/get_area_name",addTemplate:"/mall/merchant.ExpressTemplate/save",editTemplate:"/mall/merchant.ExpressTemplate/edit",delTemplate:"/mall/merchant.ExpressTemplate/delete",goodsBatch:"/mall/merchant.MallGoods/goodsBatch",viewLogistics:"/mall/merchant.MallOrder/viewLogistics",orderPrintTicket:"/mall/merchant.MallOrder/printOrder"};t["a"]=i},4639:function(e,t,a){},"50a3":function(e,t,a){"use strict";a("4639")},"6cf3":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-modal",{staticClass:"dialog",attrs:{title:"请选择素材",width:"800px",centered:"",visible:e.visible,bodyStyle:{position:"relative"},destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[this.checkedList.length>0?i("a-button",{staticClass:"delelt-item",attrs:{type:"danger"},on:{click:e.deleteItem}},[e._v("删除")]):e._e(),i("a-tabs",{attrs:{type:"card",defaultActiveKey:"1"},on:{change:e.onTabChange}},[i("a-tab-pane",{key:"1",attrs:{tab:"从素材库选择"}},[i("div",{staticClass:"content scroll_content1"},[e.imageList.length?e._l(e.imageList,(function(t,l){return i("div",{key:"img_"+l,staticClass:"img-list",style:t.selected?"border: 1px solid rgb(24,144,255)":"",on:{click:function(a){return e.chooseImage(t,l)}}},["image"==e.type?i("img",{staticClass:"goods-img",attrs:{src:t.img}}):e._e(),"video"==e.type?i("video",{staticClass:"goods-img",attrs:{src:t.img.url,poster:t.img.image}}):e._e(),i("img",{directives:[{name:"show",rawName:"v-show",value:t.selected,expression:"item.selected"}],staticClass:"selected",attrs:{src:a("c660")}})])})):[i("div",{staticClass:"no-data"},[e._v("暂无素材")])]],2)]),i("a-tab-pane",{key:"2",attrs:{tab:"上传新素材"}},[i("div",{staticClass:"content scroll_content"},[e.checkedList.length<this.max?[i("a-upload",{attrs:{action:e.action,name:e.uploadName,data:{upload_dir:e.upload_dir,store_id:e.store_id},"list-type":"picture-card","file-list":e.uploadList,multiple:e.multiple,showUploadList:e.showUploadList,accept:e.accept,"before-upload":e.beforeUpload},on:{change:e.handleUploadChange}},[e.showUpload?i("div",[i("a-icon",{staticStyle:{"font-size":"32px",color:"#999"},attrs:{type:e.loading?"loading":"plus"}})],1):e._e()])]:[i("div",{staticClass:"no-data"},[e._v("您最多可选择"+e._s(e.max)+"个"+e._s(e.typeTxt))])]],2)])],1)],1)},l=[],o=a("2909"),s=(a("a9e3"),a("d81d"),a("d3b7"),a("159b"),a("b0c0"),a("fb6a"),a("a434"),a("3ca3"),a("ddb0"),a("4031")),r={name:"ChooseImage",props:{name:{type:String,default:""},max:{type:Number,default:0},upload_dir:{type:String,default:""},store_id:{type:[String,Number],default:""},type:{type:String,default:"image"}},data:function(){return{visible:!1,uploadList:[],imageList:[],checkedList:[],typeTxt:"图片",action:"/v20/public/index.php/common/common.UploadFile/uploadPictures",deleteItemUrl:"/common/common.UploadFile/deleteMallImage",uploadName:"reply_pic",showUploadList:!0,loading:!1}},computed:{showUpload:function(){return 0==this.max||this.uploadList.length+this.checkedList.length<this.max||!this.showUploadList},multiple:function(){return 1!=this.max&&this.checkedList.length!=this.max-1},accept:function(){return"image"==this.type?"image/*":"video/*"}},watch:{type:function(){this.initData()}},mounted:function(){var e=this;this.$nextTick((function(){e.initData()}))},methods:{initData:function(){this.typeTxt="image"==this.type?"图片":"视频",this.action="image"==this.type?"/v20/public/index.php/common/common.UploadFile/uploadPictures":"/v20/public/index.php/common/common.UploadFile/uploadVideo",this.uploadName="image"==this.type?"reply_pic":"reply_mv",this.showUploadList="image"==this.type},openDialog:function(){this.visible=!0,this.init()},getImageList:function(){var e=this,t={type:this.type,dir:this.upload_dir};""!=this.store_id&&(t.store_id=this.store_id),this.request(s["a"].getUploadImages,t).then((function(t){t.length&&(e.imageList=t.map((function(t){return"image"==e.type?{img:t,selected:!1}:{img:{url:t.url,image:t.image,vtime:t.vtime,id:t.id},selected:!1}})))}))},init:function(){var e=this;this.$set(this,"uploadList",[]),this.$set(this,"checkedList",[]),this.$set(this,"imageList",[]),this.$nextTick((function(){e.getImageList()}))},handleOk:function(){var e=this;console.log(this.checkedList);var t=[],a=location.origin;this.checkedList.length&&("image"==this.type?t=Object(o["a"])(this.checkedList):(t.push(this.checkedList[0].url),t.push(this.checkedList[0].image),t.push(this.checkedList[0].vtime))),this.uploadList.length&&this.showUploadList&&this.uploadList.forEach((function(i){i.response&&i.response.data&&("image"==e.type?t.push(a+i.response.data):"video"==e.type&&(t.push(a+i.response.data.url),t.push(i.response.data.image),t.push(i.response.data.vtime)))})),console.log(111111111,t),0!=t.length?(this.$emit("callback",{list:t,name:this.name}),this.handleCancel()):this.$message.error("至少得选择一个素材")},handleCancel:function(){this.visible=!1},onTabChange:function(e){},handleUploadChange:function(e){var t=e.file,a=e.fileList;console.log("----------file",t),console.log("----------fileList",a);var i=t.status,l=t.response;if("uploading"==i&&(this.loading=!0),"done"===i){if(1e3==l.status){var s=this.max-this.checkedList.length;a=a.slice(-s),"video"==this.type&&(this.showUploadList={showPreviewIcon:!1,showRemoveIcon:!0})}else l.msg&&this.$message.error(l.msg),"video"==this.type&&(this.showUploadList=!1);this.loading=!1}"error"==i&&(this.loading=!1,this.$message.error("上传失败")),this.uploadList=Object(o["a"])(a)},chooseImage:function(e,t){if(e.selected){for(var a in e.selected=!1,this.$set(this.imageList,t,e),this.checkedList)if(this.checkedList[a]==e.img)return void this.checkedList.splice(a,1)}else this.checkedList.length==this.max-this.uploadList.length?this.$message.warning("您最多可选择（包含上传）"+this.max+"个"+this.typeTxt):(e.selected=!0,this.checkedList.push(e.img),this.$set(this.imageList,t,e))},beforeUpload:function(e){return Promise.all([this.checkType(e)])},checkType:function(e){var t=this;return new Promise((function(a,i){-1==e.type.indexOf(t.type)?(t.$message.error(t.L("image"==t.type?"您上传的图片文件格式不正确！请重新选择":"您上传的视频文件格式不正确！请重新选择")),i()):(console.log("类型正确"),a())}))},deleteItem:function(){var e=this,t=[];"image"==this.type?t=this.checkedList:this.checkedList.forEach((function(e){t.push(e.id)})),this.$confirm({title:"确定删除吗?",okText:"确定",okType:"danger",centered:!0,cancelText:"取消",onOk:function(){console.log("OK"),e.request(e.deleteItemUrl,"image"==e.type?{url_lists:t}:{ids:t}).then((function(t){e.$message.success("删除成功！"),e.init()}))}})}}};var n=r,c=(a("cacd"),a("0c7c")),m=Object(c["a"])(n,i,l,!1,null,"c303f9e6",null);t["a"]=m.exports},c194:function(e,t,a){},c660:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjkxMTg5NkE3M0VBMTExRUI4NUFDODgzODc3Q0QyMDMwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjkxMTg5NkE4M0VBMTExRUI4NUFDODgzODc3Q0QyMDMwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTExODk2QTUzRUExMTFFQjg1QUM4ODM4NzdDRDIwMzAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTExODk2QTYzRUExMTFFQjg1QUM4ODM4NzdDRDIwMzAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5BTNpWAAAEdklEQVR42uybXUgUURTH7272EIXSU4Gt4ENFBUmkD0X0Ke2mCEJpPQRFSgXRh0JFVGRRvRQqRi+ZYB9UJhRpDxqaJlJRD0Fg9VLBbg9G9JAEQkH1P+tZma6zu7PNx96Z6cDhjuPsnfv7zz33a+YGhAM2t/n3WiQheAGn2mOyGDzK6eTx6KHAoN1lC9gEXIgkAg/DN8Bn/WNW3+H98F54DwT5qKwAgM5FUs/Aq2x6YMMsSCPEGFNGAMDXIKmDLxHO2Ai8CSK0ZVUAgIcZPCyyY70sRK+jAgB8BpJL8BqhhlFN2A8hxm0XAPDz+IYbhVr2iB4IRPhkmwCAX8o3miPUtM/0YCDCa8sFADy17n3CHVYKEfqNXBg0CN/gIniyPi6z+RrAXdxV4U6rTddVBgx0cz3C3RZJ1U0GUsAvRvIMnutyAWjEuAIivDHcBvCwtt0D8IIZ2pnJcCPYCC8R3rESZkofAh6Je8PtgV4NqBPetbqUIcBdXtjDAoSZcWoIcCPx1MEpbbaMptIrE+sJ2hpQ7wN4wYx1eiGwWvjH1vwVAqj+tDgZdUnhv8A74bTuuMlEPgUIg1hQVkRxe0VlRcH3wctwXG22FiQEiLgA/jl8C8Dfas6Nm8gvohWgQnH4QfhmwH9InFjR+mMakr0m8owzB/ilxYDC8DQq3Q74r5ouOw/JLXiZybzXUQ0IKQz/AF4lwecj6bIAnixEAhQoCt9ROPMnxfx3DfxChreqyy7IUbQGXAP4ztG/h+nLudovsPA+IRVD4ArBS3OUNRwOCyy+lyUhcJtaaPhRHmebsRbA75Hgyxk+3waxLQmBbhT6Hhe2i6vpsn/I5wLyOSLBb0VyE55jU20LBS3IZHJgAoB31GrDX2SYx1kdeJq23rERfnIyFDOZxxntHwB5zyIMG/z9CfzmpAR/UDizFB+fC5idBFWgwHclEaIsQroB1mFce06CP46k2aEGN2pFDSCr0hFhlEVItiZ/ANdclODPUzg42OPErBIgmQhfecb2ULp2N/53SYJvQXLM4S7XkhBIJ8IYi3CfT+3AuVYJPv5+PwtjjqiVNSCVCOMswjYcX0+cn3/513Rc24HDXVkadMUSK0LfhPVvgToBm3TBAvecjeQGvDxL8GMoX15iHNBtww2m1AQNfIhDIlvwk8xBzZxbOCEC/l6EhEaO2V6GizMnRllPbLxRlfSxwilFJl1xZu2Lkce0QiL8YQOI//XaECAbEv6xIe1cIGGNFkxn3WAjQvOqPCgNWJp8IECT9jtjve8DqHX06hviXsBH5OnwFIW8/PT11gOENGyl2VubB+Hb9L4WS7YiRK/KX3oI/iUzTbH/n8kl+xX/oNoDT786GXxKATTtQa2L4WvTbaZIuyrM39o2uBD+tJEtNf8/lzeaI2dYJCY2JahqVLYio/AZCcAi0E6MYjGxa0Q1ozIVZ7JbJGMBWATak1Op2GCJylKZ6X6hjNqAJO2CP7fN6Qjhz42Tkgi5LEKp8NvWWR0x/Ld5Oo0ga4Wi2+f/CDAAp9WWHrao0YwAAAAASUVORK5CYII="},cacd:function(e,t,a){"use strict";a("c194")},d6be:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:640,visible:e.visible},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-form",e._b({attrs:{form:e.detail}},"a-form",{labelCol:{span:4},wrapperCol:{span:10}},!1),[a("a-form-item",{attrs:{label:"是否推荐至首页",labelCol:{span:6}}},[a("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否",checked:1==e.is_recommend},on:{change:e.isRecommendChange}})],1),1==e.is_recommend?a("a-form-model-item",{attrs:{label:"推荐时间",help:"推荐时间应在活动时间之内",prop:"recommend_time"}},[a("a-range-picker",{attrs:{"show-time":"",value:e.recommend_time,format:"YYYY-MM-DD HH:mm:ss"},on:{change:e.onRecommendDateRangeChange}})],1):e._e()],1)],1)},l=[],o=(a("99af"),a("011d")),s=a("c1df"),r=a.n(s),n={data:function(){return{title:"",visible:!1,detail:{},rec_start_time:"",rec_end_time:"",recommend_time:[],activeKey:"",is_recommend:2}},mounted:function(){console.log(this.catFid)},methods:{moment:r.a,onRecommendDateRangeChange:function(e,t){this.recommend_time=[e[0],e[1]],this.rec_start_time=t[0],this.rec_end_time=t[1]},edit:function(e,t,a){for(var i in this.title="首页推荐设置",e)this.$set(this.detail,i,e[i]);this.is_recommend=this.detail.is_recommend,this.visible=!0,this.activeKey=t,this.type=a,this.rec_start_time=this.detail.rec_start_time||this.detail.start_time,this.rec_end_time=this.detail.rec_end_time||this.detail.end_time,""!=e.recommend_start_time&&null!=e.recommend_start_time&&""!=e.recommend_end_time&&null!=e.recommend_end_time&&(this.recommend_time=this.recommend_time.concat([r()(e.recommend_start_time),r()(e.recommend_end_time)]))},handleSubmit:function(){var e=this;if(1!=this.is_recommend||""!=this.recommend_time&&null!=this.recommend_time){var t=[],a=[],i=[],l=[],s=[];if(1==this.type)t={activity_id:this.detail.id,goods_id:this.detail.act_goods_id,is_recommend:this.is_recommend,rec_start_time:this.rec_start_time,rec_end_time:this.rec_end_time};else if(2==this.type){for(var r in this.detail)a=this.detail[r].id,i=this.detail[r].act_goods_id,l.push(a),s.push(i);t={activity_id:l,goods_id:s,is_recommend:this.is_recommend,rec_start_time:this.rec_start_time,rec_end_time:this.rec_end_time}}var n="";"getLimitedRecommendList"==this.activeKey?n="editLimitedRecommend":"getBargainRecommendList"==this.activeKey?n="editBargainRecommend":"getGroupRecommendList"==this.activeKey&&(n="editGroupRecommend"),n&&this.request(o["a"][n],t).then((function(t){e.$message.success("设置成功"),e.$emit("updateList"),e.handleCancel()}))}else this.$message.error("请完善推荐时间")},handleCancel:function(){this.visible=!1,Object.assign(this.$data,this.$options.data())},isRecommendChange:function(e){this.is_recommend=e?1:2,e||(this.rec_start_time="",this.rec_end_time=""),2==this.type&&(this.recommend_time=[])}}},c=n,m=a("0c7c"),d=Object(m["a"])(c,i,l,!1,null,null,null);t["default"]=d.exports}}]);