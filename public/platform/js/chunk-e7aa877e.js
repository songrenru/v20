(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e7aa877e"],{af77:function(t,e,n){"use strict";n("f247")},c5ea:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[e("a-row",[e("a-col",[e("a-button",{staticClass:"mr-20",attrs:{type:"primary"},on:{click:function(e){return t.editItem()}}},[t._v(t._s(t.L("新建岗位")))])],1)],1),e("a-table",{staticClass:"mt-20",attrs:{rowKey:"id",columns:t.columns,"data-source":t.list,pagination:t.pagination},scopedSlots:t._u([{key:"station_name",fn:function(n){return e("span",{},[t._v(" "+t._s(n||"-")+" ")])}},{key:"menus",fn:function(n,a){return e("span",{staticClass:"cr-primary pointer",on:{click:function(e){return t.openModalAuthority(a)}}},[t._v(" "+t._s(t.L("查看"))+" ")])}},{key:"status",fn:function(n){return e("span",{},[1==n?e("font",{staticClass:"font-blue"},[t._v(t._s(t.L("正常")))]):e("font",{staticClass:"font-red"},[t._v(t._s(t.L("禁止")))])],1)}},{key:"action",fn:function(n,a){return e("span",{},[e("span",{staticClass:"cr-primary pointer mr-20",on:{click:function(e){return t.editItem(a)}}},[t._v(t._s(t.L("编辑")))]),e("span",{staticClass:"cr-primary pointer font-gray",on:{click:function(e){return t.delItem(a)}}},[t._v(t._s(t.L("删除")))])])}}])}),e("a-modal",{attrs:{visible:t.modalVisible,title:t.modalTitle,destroyOnClose:!0,width:"60%",bodyStyle:{maxHeight:"650px",overflowY:"auto"}},on:{cancel:t.handleCancel,ok:t.handleOk}},[e("a-form-model",{attrs:{model:t.modalForm,"label-col":{span:4},"wrapper-col":{span:16}}},[e("a-form-model-item",{attrs:{label:t.L("岗位名称"),required:""}},[e("a-input",{attrs:{"allow-clear":"",placeholder:t.L("请输入")},model:{value:t.modalForm.station_name,callback:function(e){t.$set(t.modalForm,"station_name",e)},expression:"modalForm.station_name"}})],1),e("a-form-model-item",{attrs:{label:t.L("岗位描述")}},[e("a-textarea",{staticStyle:{resize:"none"},attrs:{"allow-clear":"",placeholder:t.L("请输入"),autoSize:{minRows:5,maxRows:10},maxLength:-1},model:{value:t.modalForm.station_desc,callback:function(e){t.$set(t.modalForm,"station_desc",e)},expression:"modalForm.station_desc"}})],1),e("a-form-model-item",{attrs:{label:t.L("权限")}},[e("a-button",{on:{click:function(e){return t.openModalAuthority()}}},[t._v(t._s(t.L("设置权限")))])],1),e("a-form-model-item",{attrs:{label:t.L("状态")}},[e("a-switch",{attrs:{"checked-children":t.L("正常"),"un-checked-children":t.L("禁止"),checked:1==t.modalForm.status},on:{change:t.switchChange}})],1)],1)],1),e("a-modal",{attrs:{visible:t.modalAuthority,title:t.modalForm.is_view?t.L("岗位权限"):t.L("设置岗位权限"),destroyOnClose:!0,width:"60%",bodyStyle:{height:"650px",overflowY:"auto"},zIndex:1001},on:{cancel:t.handleCancelAuthority,ok:t.handleOkAuthority}},[t.authorityList.length?e("a-tree",{staticClass:"merchant-account-auth-menu-tree",attrs:{checkable:"",defaultExpandAll:!0,"tree-data":t.authorityList,replaceFields:{key:"id"},blockNode:!0,selectable:!1},on:{check:t.menuCheck},model:{value:t.modalForm.menus_select,callback:function(e){t.$set(t.modalForm,"menus_select",e)},expression:"modalForm.menus_select"}}):t._e(),t.authorityList.length?e("div",{staticClass:"title font-14 item-2",staticStyle:{"padding-left":"30px","box-sizing":"border-box",width:"calc(100% - 8px)"}},[e("a-checkbox",{attrs:{checked:t.checkedAll,disabled:!!t.modalForm.is_view},on:{change:function(e){return t.onCheckAllChange(e)}}},[e("span",{staticClass:"cr-333",staticStyle:{"margin-left":"8px"}},[t._v(t._s(t.L("全选")))])])],1):t._e()],1)],1)},i=[],s=n("5530"),o=(n("d81d"),n("498a"),n("d3b7"),n("159b"),n("99af"),n("ea1d")),r={data:function(){return{list:[],columns:[{title:this.L("岗位名称"),dataIndex:"station_name"},{title:this.L("岗位描述"),dataIndex:"station_desc",ellipsis:!0},{title:this.L("权限"),dataIndex:"menus",scopedSlots:{customRender:"menus"}},{title:this.L("状态"),dataIndex:"status",scopedSlots:{customRender:"status"}},{title:this.L("创建时间"),dataIndex:"create_time"},{title:this.L("更新时间"),dataIndex:"last_time"},{title:this.L("操作"),key:"action",scopedSlots:{customRender:"action"}}],pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(t){return"共 ".concat(t," 条记录")}},modalVisible:!1,modalTitle:"",modalForm:"",modalAuthority:!1,authorityList:[],checkedAll:!1}},mounted:function(){this.getList()},beforeRouteLeave:function(t,e,n){this.$destroy(),n()},methods:{getList:function(){var t=this,e={page:this.pagination.current,page_size:this.pagination.pageSize};this.request(o["a"].merStationsList,e).then((function(e){t.list=e.data||[],!t.list.length&&t.pagination.current>1&&(t.pageSize.current=t.pageSize.current-1,t.getList()),t.pagination.total=e.total||0}))},onPageChange:function(t,e){this.$set(this.pagination,"current",t),this.getList()},onPageSizeChange:function(t,e){this.$set(this.pagination,"pageSize",e),this.getList()},editItem:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t?(this.modalTitle=this.L("岗位编辑"),this.modalForm={id:t.id,station_name:t.station_name,station_desc:t.station_desc,menus:t.menus?t.menus.map((function(t){return t-0})):[],menus_select:t.menus_select?t.menus_select.map((function(t){return t-0})):[],status:t.status}):(this.modalTitle=this.L("新建岗位"),this.modalForm={station_name:"",station_desc:"",menus:[],menus_select:[],status:1}),this.modalVisible=!0},delItem:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$confirm({title:this.L("确定要删除吗？删除后无法恢复"),centered:!0,onOk:function(){t.request(o["a"].merStationsDel,{id:e.id}).then((function(e){t.$message.success(t.L("操作成功！")),t.getList()}))},onCancel:function(){}})},switchChange:function(t){t=t?1:0,this.modalForm.status=t},handleCancel:function(){this.modalVisible=!1,this.modalTitle="",this.modalForm={}},handleOk:function(){var t=this;if(this.modalForm.station_name.trim()){var e=Object(s["a"])(Object(s["a"])({},this.modalForm),{},{allMenus:this.modalForm.allMenus});this.request(o["a"].merStationsSave,e).then((function(e){t.$message.success(t.L("操作成功！")),t.getList(),t.handleCancel()}))}else this.$message.error(this.L("岗位名称必填"))},initAuthorityList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.length&&(e=e.map((function(e){return t.modalForm.is_view?(e.disabled=!0,e.disableCheckbox=!0):(e.disabled=!1,e.disableCheckbox=!1),e.class=n||"menu_first",e.children&&e.children.length&&(e.children=t.initAuthorityList(e.children,"menu_last")),e}))),e},getAuthorityList:function(t){var e=this;this.request(o["a"].merchantMenu,{}).then((function(n){e.authorityList=n||[],e.authorityList.length&&(e.authorityList=e.initAuthorityList(e.authorityList),e.$nextTick((function(){t&&(e.modalForm=Object(s["a"])({id:t.id,station_name:t.station_name,station_desc:t.station_desc,menus:t.menus?t.menus.map((function(t){return t-0})):[],menus_select:t.menus_select?t.menus_select.map((function(t){return t-0})):[],status:t.status},e.modalForm))})))}))},openModalAuthority:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t&&(this.modalForm={is_view:!0}),this.getAuthorityList(t),this.modalAuthority=!0},onCheckAllChange:function(t){this.checkedAll=t.target.checked;var e=this.checkedAll?this.initSelectAll(this.authorityList):[];this.$set(this.modalForm,"menus",e),this.$set(this.modalForm,"menus_select",e)},initSelectAll:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return Array.isArray(e)?(e.length&&e.forEach((function(e){n.push(e.id),e.children&&e.children.length&&Array.isArray(e.children)&&(n=n.concat(t.initSelectAll(e.children)))})),n):n},menuCheck:function(t,e){var n=this.initSelectAll(this.authorityList);t.length!=n.length?this.checkedAll=!1:this.checkedAll=!0;var a=e.halfCheckedKeys||[];this.$set(this.modalForm,"menus_select",t),this.$set(this.modalForm,"menus",t.concat(a))},handleCancelAuthority:function(){this.modalAuthority=!1,this.modalForm.is_view&&(this.modalForm={})},handleOkAuthority:function(){this.handleCancelAuthority()}}},c=r,l=(n("af77"),n("2877")),h=Object(l["a"])(c,a,i,!1,null,null,null);e["default"]=h.exports},ea1d:function(t,e,n){"use strict";var a={seeWxQrcode:"/merchant/merchant.qrcode.index/seeWxQrcode",seeH5Qrcode:"/merchant/merchant.qrcode.index/seeH5Qrcode",addressSettingConfig:"/merchant/merchant.MerchantShopManagement/addressSetting",addressSettingEdit:"/merchant/merchant.MerchantShopManagement/addressSettingEdit",merAccountList:"/merchant/merchant.system.MerchantMenu/userAccountList",merAccountDel:"/merchant/merchant.system.MerchantMenu/userAccountDelete",merAccountEdit:"/merchant/merchant.system.MerchantMenu/userAccountAddOrEdit",importMerAccount:"/merchant/merchant.system.MerchantMenu/importAccount",merchantMenu:"/merchant/merchant.system.MerchantMenu/merchantMenu",merStationsList:"/merchant/merchant.system.MerchantMenu/stations",merStationsSave:"/merchant/merchant.system.MerchantMenu/saveStation",merStationsDel:"/merchant/merchant.system.MerchantMenu/delStation"};e["a"]=a},f247:function(t,e,n){}}]);