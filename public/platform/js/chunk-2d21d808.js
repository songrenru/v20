(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21d808"],{d226:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-operator",staticStyle:{"margin-top":"25px"}},[a("a-card",{attrs:{bordered:!1}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.$refs.createModal.add()}}},[t._v("添加")]),a("a-table",{staticStyle:{"margin-top":"15px"},attrs:{columns:t.columns,"data-source":t.list,pagination:t.pagination},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[a("a",{on:{click:function(e){return t.$refs.createModal.save(n.cat_id,n.cat_name,n.sort,n.status)}}},[t._v("修改")]),a("a-popconfirm",{staticClass:"ant-dropdown-link",staticStyle:{"margin-left":"20px"},attrs:{title:"确认删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.deleteConfirm(n.cat_id)}}},[a("a",{attrs:{href:"#"}},[t._v("删除")])])],1)}},{key:"fid",fn:function(e,n){return a("span",{},[a("router-link",{staticStyle:{color:"#1890ff"},attrs:{to:{name:"GridChildEvent",params:{cat_id:n.cat_id}}}},[t._v("查看子分类")])],1)}},{key:"status",fn:function(e,n){return a("span",{},[1==n.status?a("span",{staticStyle:{color:"green"}},[t._v("开启")]):a("span",{staticStyle:{color:"red"}},[t._v("关闭")])])}}])}),a("add-grid-event",{ref:"createModal",attrs:{height:800,width:1200},on:{ok:t.handleOks}})],1)],1)},i=[],o=a("5530"),s=(a("ac1f"),a("841c"),a("567c")),r=a("a40e"),c={components:{addGridEvent:r["default"]},data:function(){return{pagination:{pageSize:10,total:10},page:1,list:[],search:{page:1}}},mounted:function(){this.fetch()},computed:{columns:function(){var t=[{title:"分类名称",dataIndex:"cat_name",key:"cat_name"},{title:"子分类",key:"fid",dataIndex:"",scopedSlots:{customRender:"fid"}},{title:"状态",key:"status",dataIndex:"",scopedSlots:{customRender:"status"}},{title:"排序值",dataIndex:"sort",key:"sort"},{title:"操作",key:"action",dataIndex:"",scopedSlots:{customRender:"action"}}];return t}},methods:{handleTableChange:function(t,e,a){console.log(t);var n=Object(o["a"])({},this.pagination);n.current=t.current,this.pagination=n,this.fetch(Object(o["a"])({results:t.pageSize,page:t.current,sortField:a.field,sortOrder:a.order},e))},fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.request(s["a"].getEventCategoryList,e).then((function(e){var a=Object(o["a"])({},t.pagination);a.total=e.count,a.pageSize=e.total_limit,t.list=e.list,t.pagination=a}))},handleOks:function(){this.fetch()},getList:function(){var t=this;this.search["page"]=this.page,this.request(s["a"].getEventCategoryList,this.search).then((function(e){console.log("res",e),t.list=e.list,t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10}))},deleteConfirm:function(t){var e=this;this.request(s["a"].editEventCategory,{cat_id:t,status:4}).then((function(t){e.fetch(),e.$message.success("删除成功"),e.reload()}))}}},l=c,d=a("2877"),u=Object(d["a"])(l,n,i,!1,null,"e1527d48",null);e["default"]=u.exports}}]);