(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06c55914"],{5786:function(e,t,i){},"8e97":function(e,t,i){"use strict";i("5786")},acea:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-drawer",{attrs:{title:"子车位列表",placement:"right",width:e.widthDrawer,closable:!0,visible:e.drawer_visible},on:{close:e.onClose}},[i("div",{staticClass:"parking_space"},[i("div",{staticClass:"table_content"},[i("a-table",{attrs:{columns:e.columns,pagination:e.pageInfo,loading:e.tableLoadding,"data-source":e.spaceList},on:{change:e.handleTableChange}})],1)])])},s=[],o=(i("d81d"),i("a0e0")),a=[{title:"车库名称",dataIndex:"garage_num",key:"garage_num"},{title:"车位号",dataIndex:"position_num",key:"position_num"},{title:"车位模式",dataIndex:"position_pattern_txt",key:"position_pattern_txt"},{title:"车位状态",dataIndex:"position_status_txt",key:"position_status_txt"},{title:"车位面积",dataIndex:"position_area",key:"position_area"},{title:"备注",dataIndex:"position_note",key:"position_note",width:120}],c={data:function(){var e=this;return{pageInfo:{current:1,pageSize:10,total:10,page:1,garage_id:"",position_num:"",children_type:"",position_status:"",showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(e){return"共 ".concat(e," 条")},onShowSizeChange:function(t,i){return e.onTableChange(t,i)},onChange:function(t,i){return e.onTableChange(t,i)}},columns:a,tableLoadding:!1,spaceVisible:!1,selectedRowKeys:[],drawer_visible:!1,widthDrawer:800,modelTitle:"",spaceList:[],garageList:[],positionStatus:[{position_status:1,label:"空置"},{position_status:2,label:"已使用"}],frequency:!1,position_id:"",children_type:0,space_type:"add",headers:{authorization:"authorization-text",village_id:0},select_names:[],select_names_str:"",exportLoadding1:!1,exportLoadding2:!1,patternList:[{name:"真实车位",position_pattern:1},{name:"虚拟车位",position_pattern:2}],childrenPositionList:[{name:"母车位",children_type:1},{name:"子车位",children_type:2}],uploadData:{village_id:0}}},components:{},methods:{onClose:function(){this.drawer_visible=!1},search_btn:function(e){this.drawer_visible=!0,void 0!=e.position_id&&e.position_id?this.pageInfo.position_id=e.position_id:this.pageInfo.position_id=0,this.getSpaceList()},queryThis:function(){var e=this;if(this.frequency)this.$message.warn("请求频繁，请稍后再试");else{this.frequency=!0;var t=setTimeout((function(){e.frequency=!1,clearTimeout(t)}),2e3);this.pageInfo.page=1,this.getSpaceList()}},clearThis:function(){this.pageInfo={page:1,current:1,garage_id:"",position_num:"",position_status:"",pageSize:20,total:0,position_pattern:1},this.getSpaceList()},handleTableChange:function(e,t,i){this.pageInfo.current=e.current,this.pageInfo.page=e.current,this.getSpaceList()},onTableChange:function(e,t){this.pageInfo.current=e,this.pageInfo.pageSize=t,this.pageInfo.page=e,this.getSpaceList(),console.log("onTableChange==>",e,t)},getGarageList:function(){var e=this;e.request(o["a"].getGarageList,{}).then((function(t){e.garageList=t.list}))},handleSelectChange:function(e){this.pageInfo.page=1,this.pageInfo.current=1,console.log("selected ".concat(e))},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},getSpaceList:function(){var e=this;e.tableLoadding=!0,e.request("community/village_api.Parking/getChildrenPositionList",e.pageInfo).then((function(t){e.spaceList=t.list,e.pageInfo.total=t.count,e.tableLoadding=!1}))},editThis:function(e){this.modelTitle="编辑车位",this.space_type="edit",this.spaceVisible=!0,this.position_id=e+""},delConfirm:function(e){var t=this;t.request(o["a"].delParkPosition,{position_id:e.position_id}).then((function(e){t.$message.success("删除成功！"),t.select_names_str="",t.selectedRowKeys=[],t.getSpaceList()}))},delCancel:function(){},closeSpace:function(e){this.position_id="",this.spaceVisible=!1,e&&this.getSpaceList()},onSelectChange:function(e){var t=this;console.log("selectedRowKeys changed: ",e),this.selectedRowKeys=e,this.select_names=[],this.select_names_str="",this.spaceList.map((function(i){e.map((function(e,n){e==i.position_id&&t.select_names.push(i)}))})),this.select_names.map((function(e,i){i+1<t.select_names.length?t.select_names_str+=e.position_num+"、":t.select_names_str+=e.position_num}))},deleteMany:function(){var e=this;0!=e.selectedRowKeys.length?e.$confirm({title:"提示",content:"确定要删除【"+e.select_names_str+"】这些数据吗",onOk:function(){e.request(o["a"].delAllParkPosition,{position_id:e.selectedRowKeys}).then((function(t){e.$message.success("删除成功！"),e.select_names_str="",e.selectedRowKeys=[],e.getSpaceList()}))},onCancel:function(){}}):e.$message.warn("请选择要删除的项")},addThis:function(){this.modelTitle="添加车位",this.space_type="add",this.spaceVisible=!0},handleUploadChange:function(e){console.log("info0513",e),"done"===e.file.status?1e3==e.file.response.status?(this.$message.success("上传成功！"),e.file.response.data.url?window.location.href=e.file.response.data.url:this.getSpaceList()):this.$message.error(e.file.response.msg):"error"===e.file.status&&this.$message.error("上传失败！")},downPosition:function(){var e=this,t=this;t.exportLoadding1=!0,t.request("/community/village_api.Parking/downPosition",t.pageInfo).then((function(i){0==i.error?(window.location.href=i.url,e.$message.success("导出成功！")):e.$message.error("导出失败！"),t.exportLoadding1=!1})).catch((function(e){t.exportLoadding1=!1}))},downModel:function(){var e=this,t=this;t.exportLoadding2=!0,t.request("/community/village_api.Parking/downPositionModel",t.pageInfo).then((function(i){0==i.error?(window.location.href=i.url,e.$message.success("导出成功！")):e.$message.error("导出失败！"),t.exportLoadding2=!1})).catch((function(e){t.exportLoadding2=!1}))}}},r=c,l=(i("8e97"),i("0c7c")),p=Object(l["a"])(r,n,s,!1,null,"f38e7bb6",null);t["default"]=p.exports}}]);