(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1053ffb9"],{7035:function(e,t,n){"use strict";var a={index:"/scan/platform.ScanSend/index",editData:"/scan/platform.ScanSend/edit",addData:"/scan/platform.ScanSend/add",setStatus:"/scan/platform.ScanSend/setStatus",recordList:"/scan/platform.ScanSend/getRecordList",setConfig:"/scan/platform.ScanSend/setConfig",exportEwm:"/scan/platform.ScanSend/exportEwm",exportRecordList:"/scan/platform.ScanSend/exportRecordList",recordAllList:"/scan/platform.ScanSend/getAllRecordList",singleDelete:"/scan/platform.ScanSend/singleDelete",multipleDelete:"/scan/platform.ScanSend/multipleDelete"};t["a"]=a},e011:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{visible:e.visible,title:e.title,width:"60%"},on:{cancel:e.handleCancel,ok:e.handleOk}},[n("div",{staticStyle:{"margin-top":"20px",padding:"20px","background-color":"#fff"}},[n("a-form-model",{attrs:{layout:"inline",model:e.searchForm}},[n("a-form-model-item",{attrs:{label:"搜索"}},[n("a-select",{staticStyle:{width:"115px"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[n("a-select-option",{attrs:{value:0}},[e._v("全部")]),n("a-select-option",{attrs:{value:1}},[e._v("用户昵称")]),n("a-select-option",{attrs:{value:2}},[e._v("用户手机号")])],1)],1),n("a-form-model-item",[n("a-input",{attrs:{placeholder:"输入用户昵称/手机号"},model:{value:e.searchForm.keyword,callback:function(t){e.$set(e.searchForm,"keyword",t)},expression:"searchForm.keyword"}})],1),n("a-form-model-item",{attrs:{label:"领取日期"}},[n("a-range-picker",{attrs:{value:e.dateRange},on:{change:e.timeChange}})],1),n("a-form-model-item",[n("a-button",{staticClass:"ml-10",attrs:{type:"primary"},on:{click:function(t){return e.submitForm(!0)}}},[e._v("搜索")]),n("a-button",{staticClass:"ml-10",on:{click:function(t){return e.resetForm()}}},[e._v("重置")]),n("a-button",{staticClass:"ml-10",on:{click:function(t){return e.exportForm()}}},[e._v("导出")])],1)],1),n("a-row",{staticClass:"mt-20 mb-20"},[n("a-col",[n("a-button",{attrs:{type:"primary",disabled:!e.selectedRowKeys.length},on:{click:function(t){return e.multipleDelete()}}},[e._v("批量删除")])],1)],1),n("a-table",{staticStyle:{"margin-top":"10px"},attrs:{rowKey:"id",columns:e.columns,"data-source":e.datalist,pagination:e.pagination,bordered:"",rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onParkingChange,getCheckboxProps:e.getCheckboxProps}},scopedSlots:e._u([{key:"action",fn:function(t,a){return n("span",{},[n("a",{on:{click:function(){return e.singleDelete(a.id)}}},[e._v(e._s(a.uid>0?"":"删除"))])])}}])})],1)])},i=[],o=n("5530"),s=n("7035"),r=[{title:"ID",dataIndex:"id",key:"id"},{title:"二维码标识",dataIndex:"ewm_no",key:"ewm_no"},{title:"是否领取",dataIndex:"get_text",key:"get_text"},{title:"昵称",dataIndex:"nickname",key:"nickname"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"当前积分",dataIndex:"score_count",key:"score_count"},{title:"当前余额",dataIndex:"now_money",key:"now_money"},{title:"领取时间",dataIndex:"get_time",key:"get_time"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],c={props:{visible:Boolean,title:String,scanId:null},data:function(){return{datalist:[],dateRange:[],columns:r,searchForm:{type:0,keyword:"",date:[]},pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(e){return"共 ".concat(e," 条记录")}},selectedRowKeys:[]}},computed:{getCheckboxProps:function(){return function(e){return{props:{disabled:e.uid>0}}}}},watch:{scanId:{handler:function(e,t){this.getRecordList(!1)},immediate:!0}},methods:{onParkingChange:function(e){this.selectedRowKeys=e},setCurrent:function(){this.getRecordList(!0)},getRecordList:function(e){var t=this,n=Object(o["a"])({},this.searchForm);!0===e?(n.page=1,this.$set(this.pagination,"current",1)):(n.page=this.pagination.current,this.$set(this.pagination,"current",this.pagination.current)),n.pageSize=this.pagination.pageSize,n.send_id=this.scanId,this.request(s["a"].recordAllList,n).then((function(e){t.datalist=e.data,t.$set(t.pagination,"total",e.total)}))},submitForm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getRecordList(e)},resetForm:function(){this.$set(this,"searchForm",{type:0,keyword:"",date:[]}),this.$set(this.pagination,"current",1),this.dateRange=[],this.getRecordList()},exportForm:function(){var e=this.searchForm;e.send_id=this.scanId,e.is_all=1,this.request(s["a"].exportRecordList,e).then((function(e){e.file_url&&window.open(e.file_url)}))},singleDelete:function(e){var t=this,n={id:e};this.$confirm({title:this.L("是否删除该条数据?"),centered:!0,onOk:function(){t.request(s["a"].singleDelete,n).then((function(e){t.$message.success("操作成功!"),t.getRecordList()}))},onCancel:function(){}})},multipleDelete:function(){var e=this,t={ids:this.selectedRowKeys};this.$confirm({title:this.L("是否删除已选数据?"),centered:!0,onOk:function(){e.request(s["a"].multipleDelete,t).then((function(t){e.$message.success("操作成功!"),e.getRecordList()}))},onCancel:function(){}})},onPageChange:function(e,t){this.$set(this.pagination,"current",e),this.submitForm()},onPageSizeChange:function(e,t){this.$set(this.pagination,"pageSize",t),this.submitForm()},timeChange:function(e,t){this.dateRange=e,this.$set(this.searchForm,"date",t)},handleOk:function(){this.$emit("handleCancel")},handleCancel:function(){this.$emit("handleCancel")}}},l=c,d=n("2877"),u=Object(d["a"])(l,a,i,!1,null,null,null);t["default"]=u.exports}}]);