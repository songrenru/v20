(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a43ad"],{"060a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"20px",padding:"20px","background-color":"#fff"}},[e("a-form-model",{attrs:{layout:"inline",model:t.searchForm}},[e("a-form-model-item",{attrs:{label:"搜索"}},[e("a-select",{staticStyle:{width:"120px"},model:{value:t.searchForm.search_type,callback:function(e){t.$set(t.searchForm,"search_type",e)},expression:"searchForm.search_type"}},[e("a-select-option",{attrs:{value:1}},[t._v("次卡名称")]),e("a-select-option",{attrs:{value:3}},[t._v("用户名称")]),e("a-select-option",{attrs:{value:5}},[t._v("用户手机号")]),e("a-select-option",{attrs:{value:4}},[t._v("店员名称")])],1)],1),e("a-form-model-item",{attrs:{label:""}},[e("a-input",{attrs:{placeholder:"关键词"},model:{value:t.searchForm.keyword,callback:function(e){t.$set(t.searchForm,"keyword",e)},expression:"searchForm.keyword"}})],1),e("a-form-model-item",{attrs:{label:"次卡类型"}},[e("a-select",{staticStyle:{width:"100px"},model:{value:t.searchForm.type,callback:function(e){t.$set(t.searchForm,"type",e)},expression:"searchForm.type"}},[e("a-select-option",{attrs:{value:"all"}},[t._v("全部")]),e("a-select-option",{attrs:{value:"sports"}},[t._v("体育次卡")]),e("a-select-option",{attrs:{value:"scenic"}},[t._v("景区次卡")])],1)],1),e("a-form-model-item",{attrs:{label:"核销时间"}},[e("a-range-picker",{attrs:{ranges:{"过去30天":[t.moment().subtract(30,"days"),t.moment()],"过去15天":[t.moment().subtract(15,"days"),t.moment()],"过去7天":[t.moment().subtract(7,"days"),t.moment()],"今日":[t.moment(),t.moment()]},value:t.searchForm.time,format:"YYYY-MM-DD"},on:{change:t.onDateRangeChange}})],1),e("a-form-model-item",[e("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(e){return t.submitForm(!0)}}},[t._v("搜索")]),e("a-button",{staticClass:"ml-20",on:{click:function(e){return t.resetForm()}}},[t._v("重置")])],1)],1),e("br"),e("a-table",{attrs:{rowKey:"pigcms_id",columns:t.columns,"data-source":t.datalist,pagination:t.pagination,bordered:""}})],1)},r=[],n=a("5530"),o=a("ade3"),s=a("4d95"),c=(a("9722"),a("c1df")),m=a.n(c),l=[{title:"次卡名称",dataIndex:"card_title",key:"card_title"},{title:"用户名称",dataIndex:"nickname",key:"nickname"},{title:"电话",dataIndex:"phone",key:"phone"},{title:"次卡类型",dataIndex:"type_txt"},{title:"店员名称",dataIndex:"staff_name",key:"staff_name"},{title:"核销时间",dataIndex:"add_time",key:"add_time"}],d={components:{},data:function(){var t;return{labelCol:{span:4},wrapperCol:{span:14},datalist:[],columns:l,order_id:0,editVisible:!1,currentBtn:{},searchForm:(t={search_type:1,keyword:"",type:"all",order_id:0,time:[],begin_time:"",end_time:""},Object(o["a"])(t,"order_id",0),Object(o["a"])(t,"time",[]),Object(o["a"])(t,"begin_time",""),Object(o["a"])(t,"end_time",""),t),pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(t){return"共 ".concat(t," 条记录")}}}},watch:{$route:function(){this.$route.query.order_id&&(this.order_id=this.$route.query.order_id,this.getDataList(!1))}},created:function(){this.$route.query.order_id&&(this.order_id=this.$route.query.order_id),this.getDataList(!1)},methods:{moment:m.a,getDataList:function(t){var e=this;this.searchForm.order_id=this.order_id;var a=Object(n["a"])({},this.searchForm);!0===t?(a.page=1,this.$set(this.pagination,"current",1)):(a.page=this.pagination.current,this.$set(this.pagination,"current",this.pagination.current)),a.pageSize=this.pagination.pageSize,this.request(s["a"].getToolsCardRecord,a).then((function(t){e.datalist=t.data,e.$set(e.pagination,"total",t.total)}))},submitForm:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getDataList(t)},resetForm:function(){var t;this.$set(this,"searchForm",(t={search_type:1,keyword:"",type:"all",time:[],begin_time:"",end_time:""},Object(o["a"])(t,"time",[]),Object(o["a"])(t,"begin_time",""),Object(o["a"])(t,"end_time",""),t)),this.$set(this.pagination,"current",1),this.getDataList()},onPageChange:function(t,e){this.$set(this.pagination,"current",t),this.submitForm()},onPageSizeChange:function(t,e){this.$set(this.pagination,"pageSize",e),this.submitForm()},onDateRangeChange:function(t,e){this.$set(this.searchForm,"time",[t[0],t[1]]),this.$set(this.searchForm,"begin_time",e[0]),this.$set(this.searchForm,"end_time",e[1])}}},h=d,u=a("2877"),p=Object(u["a"])(h,i,r,!1,null,null,null);e["default"]=p.exports}}]);