(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-309e67c4","chunk-48e8da04"],{"537f":function(t,s,e){},"6bf7":function(t,s,e){"use strict";e("537f")},7109:function(t,s,e){t.exports=e.p+"img/return_dishes.f310e4e4.png"},98500:function(t,s,e){"use strict";e("fc59")},"9e03":function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",[o("div",{staticClass:"items_content"},[o("div",{staticClass:"mainCourse_info"},[o("div",{staticClass:"foodname_count"},[o("div",{staticClass:"foode_name"},[o("div",{staticClass:"name"},[t._v(" "+t._s(t.goods.name)+" ")]),t.goods.is_package_goods&&"order"==t.pageType?o("span",{staticClass:"verific_num"},[t._v(t._s(t.goods.verific_num&&0!=t.goods.verific_num?t.L("已核销X1份",{X1:t.goods.verific_num}):t.L("待核销")))]):t._e()]),o("div",{staticClass:"count"},[t._v("x"+t._s(t.goods.num))])]),o("div",{staticClass:"food_totalprice"},[t._v(t._s(t.L("￥"))+t._s(t.goods.total_price))])]),t.goods.is_staff?o("div",{staticClass:"only_straff"},[o("span",[t._v(t._s(t.L("由店员下单")))])]):t._e(),t.goods.is_must?o("div",{staticClass:"isMust"},[o("span",[t._v(t._s(t.L("必点")))])]):t._e(),o("div",{staticClass:"spec_info"},[t._v(t._s(t.goods.spec))]),t.goods.spec_sub?o("div",{staticClass:"accessory_dish"},[o("div",{staticClass:"accessory_tips"},[o("span",[t._v(" "+t._s(t.goods.is_package_goods?t.L("菜品"):t.L("附"))+" ")])]),o("div",{staticClass:"accessory_dish_info"},[t._v(t._s(t.goods.spec_sub))])]):t._e()]),t.refund_goods?o("div",{staticClass:"return_img"},[o("img",{attrs:{src:e("7109"),alt:""}})]):t._e()])},i=[],n=(e("8bbf"),{props:{goods:{type:[String,Object],default:""},refund_goods:{type:Boolean,default:!1},pageType:{type:String,default:""}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}}),a=n,c=(e("6bf7"),e("2877")),r=Object(c["a"])(a,o,i,!1,null,"cd11dd7c",null);s["default"]=r.exports},af53:function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"clear_wrapper"},[o("div",{staticClass:"left_wrapper"},[o("div",{staticClass:"headertop_content"},[o("div",{staticClass:"pagetitle"},[t._v(t._s(t.L("点菜单")))])]),o("div",{staticClass:"headerbottom_content"},[o("div",{staticClass:"white_info_wrapper"},[o("div",{staticClass:"shopping_Cart"},[o("div",{staticClass:"cart_left_wrapper"},[o("div",{staticClass:"orderTotal_info"},[o("div",{staticClass:"info_container"},[o("div",{staticClass:"left_infoContent"},[o("div",{staticClass:"table_orderTime"},[o("div",{staticClass:"table"},[t._v(" "+t._s(t.L("下单时间"))+"："+t._s(t.ORDER_INFO.create_time_str)+" ")])]),o("div",{staticClass:"table_orderTime"},[o("div",{staticClass:"table"},[t._v(t._s(t.L("店员"))+"："+t._s(t.staffname))])])])])]),o("div",{staticClass:"slider_cart_wrapper"},[o("div",{staticClass:"slider_cart_container"},[o("div",{staticClass:"order_List"},t._l(t.PAGE_INFO.goods_list,(function(s,e){return o("div",{key:e,staticClass:"order_items",class:s.is_selected?"selected_item":"",on:{click:function(s){return t.selectFood(e)}}},[o("orderGoodsItem",{attrs:{goods:s}})],1)})),0)])]),o("div",{staticClass:"bottom_tatol_info_wrapper"},[o("div",{staticClass:"tatol_info_container"},[o("div",{staticClass:"order_food_info"},[o("div",{staticClass:"order_tatol_num"},[t._v(t._s(t.L("已加菜X1项",{X1:t.PAGE_INFO.num})))]),o("div",{staticClass:"order_tatol_price"},[o("span",[t._v("￥")]),t._v(" "+t._s(t.PAGE_INFO.total_price)+" ")])]),o("div",{staticClass:"confirmOrder_btn",class:t.canshow?"cantOrder":"",on:{click:function(s){return t.confirmOrder()}}},[t._v(" "+t._s(t.L("确定下单"))+" ")])])])]),o("div",{staticClass:"cart_right_wrapper"},[o("div",{staticClass:"food_operation"},[t.nowSelectgooods.num?o("div",{staticClass:"change_num"},[o("div",{staticClass:"reduce_icon",on:{click:function(s){return t.reduceFoodcount()}}},[o("a-icon",{attrs:{type:"minus"}})],1),o("div",{staticClass:"countnum"},[t._v(t._s(t.nowSelectgooods.num))]),o("div",{staticClass:"add_icon",on:{click:function(s){return t.addFoodcount()}}},[o("a-icon",{attrs:{type:"plus"}})],1)]):t._e(),o("div",{staticClass:"clean_up"},[o("div",{staticClass:"clean_up_btn",class:t.canshow?"cantOrder":"",on:{click:function(s){return t.clearallgoods()}}},[t._v(" "+t._s(t.L("清空"))+" ")])])])])])])])]),o("div",{staticClass:"right_wrapper"},[o("div",{staticClass:"menu_wrapper"},[o("div",{staticClass:"header_info_container"},[o("div",{staticClass:"header_left_content"},[o("div",{staticClass:"header_title"},[t._v(t._s(t.L("菜单")))])]),o("div",{staticClass:"refresh_box",class:t.animateshow?"rotatecls":"",on:{click:function(s){return t.addanimate()}}},[o("a-icon",{staticClass:"iconfont",attrs:{type:"reload"}})],1)]),o("div",{staticClass:"body_cashier_container"},[o("div",{staticClass:"tablesize_container"},[o("div",{staticClass:"switchbox",class:t.foodnavshow?"":"hiddenbox"},[o("div",{staticClass:"leftslidericon"},[o("div",{staticClass:"iconfont circlebox",on:{click:function(s){return t.slidetoright()}}},[o("img",{attrs:{src:e("cb7bc"),alt:""}})])]),o("div",{ref:"slidercontent",staticClass:"center_slider_container",attrs:{id:"slidercontent"}},[o("div",{ref:"sliderbox",staticClass:"sliderList_content",on:{mousewheel:t.changeslidernum}},t._l(t.foodMenu,(function(s,e){return o("div",{key:e,staticClass:"table_items",class:t.tableCurrent==e?"table_items_active":"",on:{click:function(s){return t.screenFoodtype(e)}}},[o("div",{staticClass:"items_content"},[o("div",{staticClass:"table_name",staticStyle:{position:"relative"}},[o("span",[t._v(t._s(s.cat_name))]),s.counts>0?o("span",{staticClass:"table_count",staticStyle:{position:"absolute"}},[t._v(t._s(s.counts))]):t._e()]),o("div",{staticClass:"bottomborder"})])])})),0)]),o("div",{staticClass:"rightslidericon"},[o("div",{staticClass:"iconfont circlebox",on:{click:function(s){return t.slidetoleft()}}},[o("img",{attrs:{src:e("c13d"),alt:""}})])])]),o("div",{staticClass:"search_content",class:t.foodnavshow?"":"searching_box"},[o("div",{staticClass:"searchiconbox",on:{click:function(s){return t.searchFood()}}},[o("img",{attrs:{src:e("bcac"),alt:""}})]),t.foodnavshow?t._e():o("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"selfinput",staticClass:"self_input",attrs:{type:"text",placeholder:t.L("请输入菜品名称")},domProps:{value:t.searchText},on:{input:[function(s){s.target.composing||(t.searchText=s.target.value)},function(s){return t.keyWordsearch()}]}}),t.foodnavshow?t._e():o("div",{staticClass:"forkiconbox",on:{click:function(s){return t.forkclk()}}},[o("img",{attrs:{src:e("8c162"),alt:""}})])])]),o("a-spin",{staticClass:"changecolor",staticStyle:{height:"75%"},attrs:{spinning:t.loadingdata,indicator:t.indicator,size:"large"}}),t.loadingdata?t._e():o("div",{staticClass:"tableList_wrapper"},[t.isSearchText?[t.goods_list&&t.goods_list.length?o("div",{staticClass:"table_list_sliderbox flex-direction"},[o("div",{staticClass:"goods_list_wrap"},[o("div",{staticClass:"goods_list_title"},[t._v(t._s(t.L("菜品")))]),o("div",{staticClass:"goods_list"},[t._l(t.goods_list,(function(s,e){return[s.is_package_goods?t._e():o("goodsItem",{key:e,attrs:{goods:s,ORDER_ID:t.ORDER_ID,otherpage:t.otherpage},on:{watchmenu:t.watchmenu}})]}))],2)]),o("div",{staticClass:"goods_list_wrap"},[o("div",{staticClass:"goods_list_title"},[t._v(t._s(t.L("套餐")))]),o("div",{staticClass:"goods_list"},[t._l(t.goods_list,(function(s){return[s.is_package_goods?o("goodsItem",{key:s.product_id,attrs:{goods:s,ORDER_ID:t.ORDER_ID,otherpage:t.otherpage},on:{watchmenu:t.watchmenu}}):t._e()]}))],2)])]):t._e()]:[t.goods_list&&t.goods_list.length?o("div",{staticClass:"table_list_sliderbox"},[t._l(t.goods_list,(function(s,e){return[o("goodsItem",{key:e,attrs:{goods:s,ORDER_ID:t.ORDER_ID,otherpage:t.otherpage},on:{watchmenu:t.watchmenu}})]}))],2):t._e()],t.goods_list?t._e():o("div",{staticClass:"emptyTips"},[o("div",[t._v(t._s(t.L("暂无菜品")))])])],2)],1)])])])},i=[],n=(e("b680"),e("ac1f"),e("5319"),e("d3b7"),e("159b"),e("d81d"),e("8bbf")),a=e.n(n),c=e("22b5"),r=e("61ce"),d=e("9e03"),l={components:{goodsItem:r["default"],orderGoodsItem:d["default"]},data:function(){var t=this.$createElement;return{ORDER_ID:"",staffname:"",animateshow:!1,loadingdata:!0,indicator:t("a-icon",{attrs:{type:"loading-3-quarters","font-size":"30px",spin:!0}}),tableCurrent:0,listenopen:!1,warningShow:!1,foodnavshow:!0,goods_list:"",foodMenu:"",canshow:!0,slideshake:!0,numTween:0,leftscroll:0,slidercontentwidth:"",sliderwidth:"",searchText:"",PAGE_INFO:{},ORDER_INFO:{},nowSelectgooods:"",nowSelectgooodsNum:"",buffer:!0,isSearchText:!1,otherpage:4}},watch:{"$store.state.storestaff.nowSelectgooodsNum":function(t,s){this.nowSelectgooodsNum=t},numTween:function(t,s){var e=this;function o(){c["a"].update()&&requestAnimationFrame(o)}new c["a"].Tween({number:s}).to({number:t},100).onUpdate((function(t){e.leftscroll=t.number.toFixed(0),document.getElementById("slidercontent").scrollLeft=e.leftscroll,e.leftscroll-document.getElementById("slidercontent").scrollLeft>150&&(e.numTween=document.getElementById("slidercontent").scrollLeft)})).start(),o()}},mounted:function(){var t=this;this.$emit("getcurrent","orderQuickly"),this.staffname=a.a.ls.get("storestaff_page_info").staff_name,this.getAllfood(),this.getOrderinfo(),this.$route.query.clean&&this.$store.commit("changenowSelectgooodsNum",""),setTimeout((function(){t.sliderwidth=window.getComputedStyle(t.$refs.sliderbox).width.replace("px",""),t.slidercontentwidth=window.getComputedStyle(t.$refs.slidercontent).width.replace("px",""),t.foodMenu&&t.screenFoodtype(0)}),200)},methods:{uplaodMenufc:function(t){var s=this;t.goods_list.length>0?this.foodMenu&&this.foodMenu.length&&this.foodMenu.forEach((function(e,o){e.counts=0,e.goods_list.forEach((function(s,o){s.counts=0,t.goods_list.forEach((function(t){s.product_id==t.goods_id&&(s.counts+=t.num)})),s.counts>0&&(e.counts+=s.counts)})),s.$set(s.foodMenu,o,e),s.$forceUpdate()})):this.foodMenu&&this.foodMenu.length&&this.foodMenu.forEach((function(t,e){t.counts=0,t.goods_list.forEach((function(t,s){t.counts=0})),s.$set(s.foodMenu,e,t),s.$forceUpdate()})),this.screenFoodtype(this.tableCurrent)},getAllfood:function(){var t=this;this.loadingdata=!0,this.request("/foodshop/storestaff.goods/goodsListTree",{is_clear_stock:1}).then((function(s){t.loadingdata=!1,t.foodMenu=s,t.screenFoodtype(t.tableCurrent)}))},getOrderinfo:function(){var t=this;this.request("/foodshop/storestaff.order/quickOrder").then((function(s){t.ORDER_ID=s.order_id,t.getShopcartInfo()}))},getShopcartInfo:function(){var t=this;this.request("/foodshop/storestaff.order/cartDetail",{order_id:this.ORDER_ID}).then((function(s){t.PAGE_INFO=s,t.ORDER_INFO=s.order.order,t.uplaodMenufc(s),t.PAGE_INFO.goods_list.length>0?t.canshow=!1:t.canshow=!0,t.initData()}))},initData:function(){var t=this;if(this.PAGE_INFO.goods_list.length>0){this.PAGE_INFO.goods_list.map((function(s){t.$store.state.storestaff.nowSelectgooodsNum==s.uniqueness_number?(s.is_selected=!0,t.nowSelectgooods=s,t.nowSelectgooodsNum=s.uniqueness_number):s.is_selected=!1}));var s=this.PAGE_INFO.goods_list.some((function(s){return s.uniqueness_number==t.nowSelectgooods.uniqueness_number}));s||(this.nowSelectgooods="",this.nowSelectgooodsNum="",this.$store.commit("changenowSelectgooodsNum",""))}else this.nowSelectgooods="",this.nowSelectgooodsNum="",this.$store.commit("changenowSelectgooodsNum","")},watchmenu:function(t){var s=this;if(this.nowSelectgooodsNum){var e=this.PAGE_INFO.goods_list.some((function(t){return t.uniqueness_number==s.nowSelectgooodsNum}));e?this.PAGE_INFO.goods_list.forEach((function(t,e){t.uniqueness_number==s.nowSelectgooodsNum?(s.nowSelectgooods=t,t.is_selected=!0,t.nowSelectgooodsNum=t.uniqueness_number,s.addFoodcount()):t.is_selected=!1,s.$set(s.PAGE_INFO.goods_list,e,t)})):this.request("/foodshop/storestaff.order/addCart",{order_id:this.ORDER_ID,product:t.length?t:[t],number:0==t.mini_num?"1":t.mini_num,operate_type:0}).then((function(t){t.msg!=s.L("商品已售罄")&&"商品已售罄"!=t.msg||s.$message.error(s.L("商品已售罄!")),s.getShopcartInfo()}))}},selectFood:function(t){var s=this;this.PAGE_INFO.goods_list.forEach((function(e,o){t==o?(e.is_selected=!0,e.is_selected&&(s.nowSelectgooods=e,s.$store.commit("changenowSelectgooodsNum",e.uniqueness_number))):e.is_selected=!1,s.$set(s.PAGE_INFO.goods_list,o,e)})),this.$forceUpdate()},reduceFoodcount:function(){var t=this;if(this.buffer){if(this.buffer=!1,this.nowSelectgooods.num>this.nowSelectgooods.mini_num)var s=1;else s=this.nowSelectgooods.mini_num||1;this.request("/foodshop/storestaff.order/addCart",{order_id:this.ORDER_ID,uniqueness_number:this.nowSelectgooods.uniqueness_number,number:s,operate_type:1,product:[]}).then((function(s){t.getShopcartInfo(),t.buffer=!0}))}},addFoodcount:function(){var t=this;if(this.buffer){if(this.buffer=!1,this.nowSelectgooods.num<this.nowSelectgooods.mini_num)var s=this.nowSelectgooods.mini_num;else s=1;this.request("/foodshop/storestaff.order/addCart",{order_id:this.ORDER_ID,uniqueness_number:this.nowSelectgooods.uniqueness_number,number:s,product:[],operate_type:0}).then((function(s){0==s.status&&t.$message.error(s.msg),t.getShopcartInfo(),t.buffer=!0}))}},addanimate:function(){var t=this;this.animateshow=!0,this.isSearchText=!1,setTimeout((function(){t.animateshow=!1,location.reload()}),500)},searchFood:function(){var t=this;this.foodnavshow=!1,this.$nextTick((function(){t.$refs.selfinput.focus()})),this.goods_list=[]},keyWordsearch:function(){var t=this;""!=this.searchText&&(this.isSearchText=!0,this.request("/foodshop/storestaff.goods/goodsListTree",{keyword:this.searchText,is_clear_stock:1}).then((function(s){t.loadingdata=!0,t.loadingdata=!1,t.goods_list=s})))},forkclk:function(){this.searchText="",this.foodnavshow=!0,this.isSearchText=!1,this.getAllfood()},screenFoodtype:function(t){var s=this;this.tableCurrent=t,this.foodMenu&&this.foodMenu.length&&this.foodMenu.forEach((function(e,o){o==t&&e.goods_list&&e.goods_list.length&&(s.goods_list=[],e.goods_list.forEach((function(t,e){s.$nextTick((function(){s.$set(s.goods_list,e,t),s.$set(s.goods_list[e],"counts",t.counts),s.$forceUpdate()}))})))}))},canlisten:function(){this.listenopen=!0},changeslidernum:function(t){this.slideshake&&(this.slideshake=!1,this.numTween>-1?t.deltaY>0?this.numTween+=150:this.numTween-=150:this.numTween=0,this.slideshake=!0)},slidetoleft:function(){this.numTween>-1?this.numTween+=150:this.numTween=0},slidetoright:function(){this.numTween>-1?this.numTween-=150:this.numTween=0},clearallgoods:function(){var t=this;this.$confirm({title:this.L("提示"),content:this.L("确定要清空购物车吗")+"？",okText:this.L("确认"),centered:!0,cancelText:this.L("取消"),onOk:function(){t.request("/foodshop/storestaff.order/clearCart",{order_id:t.ORDER_ID}).then((function(s){t.nowSelectgooods="",t.$store.commit("changenowSelectgooodsNum",""),t.getShopcartInfo()}))}})},confirmOrder:function(){this.$store.commit("changeleftState",3),this.$router.push({name:"settlement_order",query:{orderId:this.ORDER_ID,otherpage:4}})}}},u=l,_=(e("98500"),e("2877")),f=Object(_["a"])(u,o,i,!1,null,"b5e11a6e",null);s["default"]=f.exports},fc59:function(t,s,e){}}]);