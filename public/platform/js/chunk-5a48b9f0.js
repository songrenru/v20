(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a48b9f0","chunk-3958a34d"],{"0102":function(o,t,s){"use strict";s.r(t);var e=function(){var o=this,t=o.$createElement,s=o._self._c||t;return s("div",{staticClass:"shopping_Cart"},[s("div",{staticClass:"cart_left_wrapper"},[s("div",{staticClass:"orderTotal_info"},[s("div",{staticClass:"info_container"},[s("div",{staticClass:"left_infoContent"},[s("div",{staticClass:"table_orderTime"},[o.TABLE_INFO.table_name?s("div",{staticClass:"table"},[o._v(o._s(o.L("桌号"))+"："+o._s(o.TABLE_INFO.table_name))]):o._e(),o.ORDER_INFO.create_time_str?s("div",{staticClass:"underbox"},[o._v(" "+o._s(o.L("下单时间"))+"："+o._s(o.ORDER_INFO.create_time_str)+" ")]):o._e()]),s("div",{staticClass:"table_orderTime"},[o.TABLE_INFO.table_name?s("div",{staticClass:"table"},[o._v(o._s(o.L("就餐人数"))+"："+o._s(o.ORDER_INFO.book_num))]):o._e(),s("div",{staticClass:"underbox"},[o._v(o._s(o.L("店员"))+"："+o._s(o.staffname))])])])])]),s("div",{staticClass:"slider_cart_wrapper"},[s("div",{staticClass:"slider_cart_container"},[s("div",{staticClass:"order_List"},o._l(o.PAGE_INFO.goods_list,(function(t,e){return s("div",{key:e,staticClass:"order_items",class:t.is_selected?"selected_item":"",on:{click:function(t){return o.selectFood(e)}}},[s("orderGoodsItem",{attrs:{goods:t}})],1)})),0)])]),s("div",{staticClass:"bottom_tatol_info_wrapper"},[s("div",{staticClass:"tatol_info_container"},[s("div",{staticClass:"order_food_info"},[s("div",{staticClass:"order_tatol_num"},[o._v(o._s(o.L("已加菜X1项",{X1:o.PAGE_INFO.num})))]),s("div",{staticClass:"order_tatol_price"},[s("span",[o._v(o._s(o.L("￥")))]),o._v(" "+o._s(o.PAGE_INFO.total_price)+" ")])]),s("div",{staticClass:"confirmOrder_btn",class:o.canshow?"cantOrder":"",on:{click:function(t){return o.confirmOrder()}}},[o._v(" "+o._s(o.L("确定下单"))+" ")])])])]),s("div",{staticClass:"cart_right_wrapper"},[s("div",{staticClass:"food_operation"},[o.nowSelectgooods?s("div",{staticClass:"change_num"},[s("div",{staticClass:"reduce_icon",on:{click:function(t){return o.reduceFoodcount()}}},[s("a-icon",{attrs:{type:"minus"}})],1),s("div",{staticClass:"countnum"},[o._v(o._s(o.nowSelectgooods.num))]),s("div",{staticClass:"add_icon",on:{click:function(t){return o.addFoodcount()}}},[s("a-icon",{attrs:{type:"plus"}})],1)]):o._e(),s("div",{staticClass:"cancel_order"},[o.showReturnBtn?s("div",{staticClass:"cancel_order_btn",on:{click:function(t){return o.cancelOrder()}}},[o._v(o._s(o.L("撤单")))]):o._e()]),s("div",{staticClass:"clean_up"},[s("div",{staticClass:"clean_up_btn",class:o.canshow?"cantOrder":"",on:{click:function(t){return o.clearallgoods()}}},[o._v(o._s(o.L("清空")))])])])])])},n=[],i=(s("d81d"),s("d3b7"),s("159b"),s("ac1f"),s("5319"),s("8bbf")),r=s.n(i),a=s("9e03"),c={props:{showReturnBtn:Boolean,frompage:String},components:{orderGoodsItem:a["default"]},data:function(){return{ORDER_ID:"",TABLE_INFO:"",ORDER_INFO:"",PAGE_INFO:"",canshow:!0,staffname:"",currentfoodnumber:1,nowSelectgooods:"",nowSelectgooodsNum:"",buffer:!0}},destroyed:function(){this.$bus.$off("updatacart")},created:function(){this.ORDER_ID=this.$store.state.storestaff.nowOrderId,this.staffname=r.a.ls.get("storestaff_page_info").staff_name,this.getShopcartInfo()},watch:{"$store.state.storestaff.nowOrderId":function(o,t){this.getShopcartInfo()},"$store.state.storestaff.nowSelectgooodsNum":function(o,t){this.nowSelectgooodsNum=o,console.log(o)}},methods:{getShopcartInfo:function(){var o=this;this.request("/foodshop/storestaff.order/cartDetail",{order_id:this.$store.state.storestaff.nowOrderId}).then((function(t){console.log(t,"----------------------拿到购物车数据---------------------"),o.PAGE_INFO=t,o.TABLE_INFO=t.table_info,o.ORDER_INFO=t.order.order,o.$emit("uploadMenu",o.PAGE_INFO),t.goods_list.length>0?o.canshow=!1:o.canshow=!0,o.initData()}))},initData:function(){var o=this;if(console.log(this.$store.state.storestaff.nowSelectgooodsNum),this.PAGE_INFO.goods_list.length>0){console.log(this.PAGE_INFO.goods_list),this.PAGE_INFO.goods_list.map((function(t,s){o.$store.state.storestaff.nowSelectgooodsNum==t.uniqueness_number?(t.is_selected=!0,o.nowSelectgooods=t,o.nowSelectgooodsNum=t.uniqueness_number,console.log(o.nowSelectgooods)):t.is_selected=!1,o.$set(o.PAGE_INFO.goods_list,s,t)}));var t=this.PAGE_INFO.goods_list.some((function(t){return t.uniqueness_number==o.nowSelectgooods.uniqueness_number}));t||(this.nowSelectgooods="",this.nowSelectgooodsNum="",this.$store.commit("changenowSelectgooodsNum",""))}else console.log(this.nowSelectgooods),this.nowSelectgooods="",this.nowSelectgooodsNum="",this.$store.commit("changenowSelectgooodsNum","")},selectFood:function(o){var t=this;this.PAGE_INFO.goods_list.forEach((function(s,e){o==e?(s.is_selected=!0,s.is_selected&&(t.nowSelectgooods=s,t.$store.commit("changenowSelectgooodsNum",s.uniqueness_number))):s.is_selected=!1,t.$set(t.PAGE_INFO.goods_list,e,s)})),this.$forceUpdate()},watchmenu:function(o){var t=this;if(console.log(o,"foodinfo--shopcart"),console.log(this.nowSelectgooodsNum,"nowSelectgooodsNum--shopcart"),this.nowSelectgooodsNum){var s=this.PAGE_INFO.goods_list.some((function(o){return o.uniqueness_number==t.nowSelectgooodsNum}));console.log(s),s?this.PAGE_INFO.goods_list.forEach((function(o,s){console.log(o),o.uniqueness_number==t.nowSelectgooodsNum?(t.nowSelectgooods=o,o.is_selected=!0,t.addFoodcount()):o.is_selected=!1,t.$set(t.PAGE_INFO.goods_list,s,o)})):this.request("/foodshop/storestaff.order/addCart",{order_id:this.$store.state.storestaff.nowOrderId,product:o.length?o:[o],number:0==o.mini_num?"1":o.mini_num,operate_type:0}).then((function(o){console.log(o,"----------------------加减购物车---------------------"),0==o.status&&t.$message.error(o.msg),t.getShopcartInfo()}))}},reduceFoodcount:function(){var o=this;if(console.log(this.nowSelectgooods,"nowSelectgooods"),this.buffer){if(this.buffer=!1,this.nowSelectgooods.num>this.nowSelectgooods.mini_num)var t=1;else t=this.nowSelectgooods.mini_num||1;this.request("/foodshop/storestaff.order/addCart",{order_id:this.$store.state.storestaff.nowOrderId,uniqueness_number:this.nowSelectgooods.uniqueness_number,number:t,operate_type:1,product:[]}).then((function(t){console.log(t,"-----------------------减菜--------------------"),o.getShopcartInfo(),o.buffer=!0}))}},addFoodcount:function(){var o=this;if(this.buffer){if(this.buffer=!1,this.nowSelectgooods.num<this.nowSelectgooods.mini_num)var t=this.nowSelectgooods.mini_num;else t=1;this.request("/foodshop/storestaff.order/addCart",{order_id:this.$store.state.storestaff.nowOrderId,uniqueness_number:this.nowSelectgooods.uniqueness_number,number:t,product:[],operate_type:0}).then((function(t){console.log(t,"-----------------------加菜--------------------"),o.getShopcartInfo(),0==t.status&&o.$message.error(t.msg),o.buffer=!0}))}},clearallgoods:function(){var o=this;this.$confirm({title:this.L("提示"),content:this.L("确定要清空购物车吗")+"？",okText:this.L("确认"),centered:!0,cancelText:this.L("取消"),onOk:function(){o.request("/foodshop/storestaff.order/clearCart",{order_id:o.$store.state.storestaff.nowOrderId}).then((function(t){console.log(t),o.$store.commit("changenowSelectgooodsNum",""),o.nowSelectgooods="",o.getShopcartInfo()}))}})},cancelOrder:function(){var o=this;this.$confirm({title:this.L("提示"),content:this.L("是否取消订单")+"？",okText:this.L("确认"),centered:!0,cancelText:this.L("取消"),onOk:function(){o.request("/foodshop/storestaff.order/cancelOrder",{order_id:o.$store.state.storestaff.nowOrderId}).then((function(t){console.log(t),o.$router.go(-1),o.$store.commit("changeleftState",""),o.$store.commit("changenowSelectgooodsNum",""),o.nowSelectgooods=""}))}})},confirmOrder:function(){var o=this;this.request("/foodshop/storestaff.order/saveCart",{order_id:this.$store.state.storestaff.nowOrderId}).then((function(t){console.log(t),"order"==o.frompage?(o.$router.replace({name:"order"}),o.$store.commit("changeorderPageState","nomarlCode")):(o.$store.commit("changeleftState",2),o.$router.replace({name:"dining"}))}))}}},d=c,l=(s("d755"),s("0c7c")),_=Object(l["a"])(d,e,n,!1,null,"5d81bd6a",null);t["default"]=_.exports},"6bf7":function(o,t,s){"use strict";s("885a")},7109:function(o,t,s){o.exports=s.p+"img/return_dishes.f310e4e4.png"},"885a":function(o,t,s){},9062:function(o,t,s){},"9e03":function(o,t,s){"use strict";s.r(t);var e=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("div",{staticClass:"items_content"},[e("div",{staticClass:"mainCourse_info"},[e("div",{staticClass:"foodname_count"},[e("div",{staticClass:"foode_name"},[e("div",{staticClass:"name"},[o._v(" "+o._s(o.goods.name)+" ")]),o.goods.is_package_goods&&"order"==o.pageType?e("span",{staticClass:"verific_num"},[o._v(o._s(o.goods.verific_num&&0!=o.goods.verific_num?o.L("已核销X1份",{X1:o.goods.verific_num}):o.L("待核销")))]):o._e()]),e("div",{staticClass:"count"},[o._v("x"+o._s(o.goods.num))])]),e("div",{staticClass:"food_totalprice"},[o._v(o._s(o.L("￥"))+o._s(o.goods.total_price))])]),o.goods.is_staff?e("div",{staticClass:"only_straff"},[e("span",[o._v(o._s(o.L("由店员下单")))])]):o._e(),o.goods.is_must?e("div",{staticClass:"isMust"},[e("span",[o._v(o._s(o.L("必点")))])]):o._e(),e("div",{staticClass:"spec_info"},[o._v(o._s(o.goods.spec))]),o.goods.spec_sub?e("div",{staticClass:"accessory_dish"},[e("div",{staticClass:"accessory_tips"},[e("span",[o._v(" "+o._s(o.goods.is_package_goods?o.L("菜品"):o.L("附"))+" ")])]),e("div",{staticClass:"accessory_dish_info"},[o._v(o._s(o.goods.spec_sub))])]):o._e()]),o.refund_goods?e("div",{staticClass:"return_img"},[e("img",{attrs:{src:s("7109"),alt:""}})]):o._e()])},n=[],i=(s("8bbf"),{props:{goods:{type:[String,Object],default:""},refund_goods:{type:Boolean,default:!1},pageType:{type:String,default:""}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}}),r=i,a=(s("6bf7"),s("0c7c")),c=Object(a["a"])(r,e,n,!1,null,"cd11dd7c",null);t["default"]=c.exports},d755:function(o,t,s){"use strict";s("9062")}}]);