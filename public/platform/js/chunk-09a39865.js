(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09a39865"],{"53f94":function(t,n,e){},"598e":function(t,n,e){"use strict";e("53f94")},b27c:function(t,n,e){"use strict";e.r(n);e("aa48"),e("8f7e");var a=function(){var t=this,n=t._self._c;return n("a-modal",{attrs:{title:t.title,width:900,footer:null,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel}},[n("div",{staticClass:"search-box"},[n("a-row",{attrs:{gutter:48}},[n("a-col",{attrs:{md:10,sm:10}},[n("a-input-group",{attrs:{compact:""}},[n("p",{staticStyle:{"margin-top":"5px"}},[t._v("关键词：")]),n("a-input",{staticStyle:{width:"70%"},model:{value:t.search.keyword,callback:function(n){t.$set(t.search,"keyword",n)},expression:"search.keyword"}})],1)],1),n("a-col",{staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"},attrs:{md:3,sm:24}},[n("a-button",{attrs:{type:"primary"},on:{click:function(n){return t.subBut()}}},[t._v(" 提交 ")])],1),n("a-col",{staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"},attrs:{md:2,sm:24}},[n("a-button",{on:{click:function(n){return t.resetList()}}},[t._v("清空")])],1),t.markerPoint.lng>0?n("span",{staticStyle:{"line-height":"30px",color:"red"}},[t._v("当前选中地址："+t._s(t.markerPoint.address))]):t._e()],1)],1),n("div",{staticClass:"map",staticStyle:{width:"100% !important",height:"500px !important"}},[n("baidu-map",{staticClass:"BMap",staticStyle:{width:"100%",height:"100%"},attrs:{center:t.center,"scroll-wheel-zoom":!0,zoom:t.zoom},on:{ready:t.handler,click:t.getClickInfo}},[n("bm-marker",{attrs:{position:t.markerPoint,dragging:!0},on:{dragend:t.dragend}},[n("bm-label",{attrs:{content:"我在这",labelStyle:{color:"red",fontSize:"24px"},offset:{width:-26,height:26}}})],1),n("bm-local-search",{attrs:{keyword:t.search.keyword,"auto-viewport":!0,location:t.search.location}})],1)],1)])},o=[],i=(e("075f"),e("19f1"),e("2f42")),r=e.n(i),s=(e("a0e0"),{name:"activityMap",components:{},data:function(){return{title:"新建",confirmLoading:!1,visible:!1,loading:!1,center:{lng:0,lat:0},post:{id:0,lng:0,lat:0},markerPoint:{lng:0,lat:0,address:""},zoom:16,search:{location:"",keyword:""},map:"",BMap:""}},mounted:function(){},methods:{moment:r.a,handler:function(t){var n=t.BMap,e=t.map;this.map=e,this.BMap=n,console.log("handler")},dragend:function(t){this.getLocations(t,0)},getClickInfo:function(t){this.getLocations(t,0)},getLocations:function(t,n){var e=this;console.log("获取地址");var a=new e.BMap.Geocoder,o=[];o=1==n?new e.BMap.Point(t.point.lng,t.point.lat):t.point,a.getLocation(o,(function(t){var n=t.addressComponents,a=t.surroundingPois,o=n.province,i=n.city,r=n.district,s=n.street;a.length>0&&a[0].title?s+=s?"-".concat(a[0].title):"".concat(a[0].title):s+=n.streetNumber,e.markerPoint["address"]=o+i+r+s})),e.markerPoint["lng"]=t.point["lng"],e.markerPoint["lat"]=t.point["lat"]},subBut:function(){if(0==this.markerPoint.lng)return this.$message.error("请先在地图完成选点"),!1;this.$emit("change",this.markerPoint),this.resetList(),this.handleCancel()},resetList:function(){this.markerPoint={lng:0,lat:0,address:""},this.search={location:"",keyword:""}},init_:function(t,n,e){var a=this;t=Number(t),n=Number(n),e=Number(e),a.title="地图选点",a.search={location:"",keyword:""},a.post={id:t,lng:n,lat:e},a.markerPoint={lng:0,lat:0,address:""},a.post.id>0?setTimeout((function(){a.center={lng:a.post.lng,lat:a.post.lat},a.getLocations({point:{lng:a.post.lng,lat:a.post.lat}},1)}),800):setTimeout((function(){a.center={lng:a.post.lng,lat:a.post.lat}}),800),a.zoom=15,a.loading=!0,a.visible=!0,console.log("init_")},handleCancel:function(){this.visible=!1}}}),l=s,c=(e("598e"),e("0b56")),d=Object(c["a"])(l,a,o,!1,null,"6344d589",null);n["default"]=d.exports}}]);