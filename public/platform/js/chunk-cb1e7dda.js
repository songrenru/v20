(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb1e7dda"],{a72a:function(e,t,i){"use strict";i("f67e")},c101:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cloudintercom"},[i("div",{staticClass:"search-box"},[i("a-row",{attrs:{type:"flex"}},[i("a-col",{attrs:{span:4}},[i("a-input-group",{attrs:{compact:""}},[i("p",{staticStyle:{"margin-top":"5px"}},[e._v("设备ID：")]),i("a-input",{staticStyle:{width:"140px"},attrs:{placeholder:"请输入设备ID"},model:{value:e.search.keyword,callback:function(t){e.$set(e.search,"keyword",t)},expression:"search.keyword"}})],1)],1),i("a-col",{attrs:{span:4}},[i("a-input-group",{attrs:{compact:""}},[i("p",{staticStyle:{"margin-top":"5px"}},[e._v("状态：")]),i("a-select",{staticStyle:{width:"150px"},model:{value:e.search.deviceStatus,callback:function(t){e.$set(e.search,"deviceStatus",t)},expression:"search.deviceStatus"}},[i("a-select-option",{attrs:{value:0}},[e._v("请选择状态")]),i("a-select-option",{attrs:{value:1}},[e._v("在线")]),i("a-select-option",{attrs:{value:2}},[e._v("离线")])],1)],1)],1),i("a-col",{staticStyle:{"margin-right":"10px"},attrs:{span:1}},[i("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.getDeviceDataList(1)}}},[e._v("查询")])],1),i("a-col",{attrs:{span:1}},[i("a-button",{on:{click:function(t){return e.resetList()}}},[e._v("重置")])],1)],1)],1),i("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination,loading:e.loading},on:{change:e.table_change},scopedSlots:e._u([{key:"action",fn:function(t,a){return i("span",{},[i("a",{on:{click:function(t){return e.editDevice(a)}}},[e._v("编辑设备")]),i("a-divider",{attrs:{type:"vertical"}}),i("a",{on:{click:function(t){return e.$refs.OpenDoorLog.list(a.id)}}},[e._v("查看开门记录")])],1)}}])}),e.visible?i("a-modal",{attrs:{title:"编辑设备",width:900,visible:e.visible,maskClosable:!1},on:{cancel:e.handleCancel,ok:e.handleSubmit}},[i("a-form",{staticClass:"third_user_info",attrs:{form:e.checkForm}},[i("a-form-item",{attrs:{label:"设备ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[i("a-input",{attrs:{value:e.info.deviceSn,disabled:!0}})],1),i("a-form-item",{attrs:{label:"设备类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[i("a-radio-group",{model:{value:e.info.thirdDeviceTypeStr,callback:function(t){e.$set(e.info,"thirdDeviceTypeStr",t)},expression:"info.thirdDeviceTypeStr"}},[i("a-radio",{attrs:{value:1}},[e._v("人行通道")]),i("a-radio",{attrs:{value:2}},[e._v("非机动车车道")])],1)],1),i("a-form-item",{attrs:{label:"设备名",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[i("a-input",{model:{value:e.info.deviceName,callback:function(t){e.$set(e.info,"deviceName",t)},expression:"info.deviceName"}})],1),i("a-form-item",{attrs:{label:"选择位置",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[i("a-select",{staticClass:"select_position",on:{change:e.handleChangeFloor},model:{value:e.info.singleId,callback:function(t){e.$set(e.info,"singleId",t)},expression:"info.singleId"}},e._l(e.info.singleList,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t["single_id"]}},[e._v(e._s(t["single_name"]))])})),1),e.floorShow?i("a-select",{staticClass:"select_position",model:{value:e.info.floorId,callback:function(t){e.$set(e.info,"floorId",t)},expression:"info.floorId"}},e._l(e.info.floorList,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t["floor_id"]}},[e._v(e._s(t["floor_name"]))])})),1):e._e()],1),i("a-form-item",{attrs:{label:"设备进出方向",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[i("a-radio-group",{model:{value:e.info.deviceDirection,callback:function(t){e.$set(e.info,"deviceDirection",t)},expression:"info.deviceDirection"}},[i("a-radio",{attrs:{value:0}},[e._v("进")]),i("a-radio",{attrs:{value:1}},[e._v("出")])],1)],1)],1)],1):e._e()],1)},o=[],n=(i("ac1f"),i("841c"),i("1276"),i("a0e0")),l=[{title:"设备ID",dataIndex:"device_sn",key:"device_sn"},{title:"设备名",dataIndex:"device_name",key:"device_name"},{title:"对应位置",dataIndex:"device_position",key:"device_position"},{title:"设备进出方向",dataIndex:"device_direction_text",key:"device_direction_text"},{title:"添加时间",dataIndex:"add_time",key:"add_time"},{title:"状态",dataIndex:"device_status",key:"device_status"},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"action"}}],s=[],r={name:"faceDevice",data:function(){return{labelCol:{span:4},wrapperCol:{span:14},pagination:{current:1,pageSize:10,total:10},search:{keyword:"",deviceStatus:0,page:1},loading:!1,logShow:!1,columns:l,data:s,checkForm:this.$form.createForm(this),villageId:"",visible:!1,floorShow:!0,info:{deviceSn:"",thirdDeviceTypeStr:1,deviceName:"",deviceDirection:0,singleId:"请选择楼栋",floorId:"请选择单元",singleList:[],floorList:[]}}},mounted:function(){this.getDeviceDataList()},methods:{getDeviceDataList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.loading=!0,1===t&&this.$set(this.pagination,"current",1),this.search["page"]=this.pagination.current,this.request(n["a"].getDeviceDataList,this.search).then((function(t){console.log(t),e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data=t.list,e.loading=!1}))},resetList:function(){this.$set(this.pagination,"current",1),this.search={keyword:"",deviceStatus:0,page:1},this.getDeviceDataList()},table_change:function(e){var t=this;e.current&&e.current>0&&(t.$set(t.pagination,"current",e.current),t.getDeviceDataList())},editDevice:function(e){console.log(e),this.visible=!0,this.info.deviceSn=e.device_sn,this.info.thirdDeviceTypeStr=parseInt(e.thirdDeviceTypeStr),this.info.deviceName=e.device_name,this.info.deviceDirection=e.device_direction,this.info.singleId=e.public_area_id?"1-"+e.public_area_id:e.single_id?"0-"+e.single_id:"请选择楼栋",this.info.floorId=e.floor_id?parseInt(e.floor_id):"请选择单元",this.villageId=e.village_id,this.handleChangeSingle(),!e.public_area_id&&e.single_id&&this.handleChangeFloor(this.info.singleId)},handleCancel:function(){var e=this;this.visible=!1,this.getDeviceDataList(),setTimeout((function(){e.checkForm=e.$form.createForm(e)}),500)},handleChangeSingle:function(){var e=this,t={village_id:this.villageId};this.request(n["a"].getVillageSinglePublic,t).then((function(t){console.log(t),e.info.singleList=t.list,e.info.floorList=[]}))},handleChangeFloor:function(e){var t=this,i=e.split("-");if("1"===i[0])this.floorShow=!1;else{this.floorShow=!0;var a={village_id:this.villageId,single_id:i[1]};this.request("/community/manage_api.v1.user/villageFloorList",a).then((function(e){console.log(e),t.info.floorList=e.list}))}},handleSubmit:function(){var e=this,t={deviceSn:this.info.deviceSn,thirdDeviceTypeStr:this.info.thirdDeviceTypeStr,device_name:this.info.deviceName,device_direction:this.info.deviceDirection,single_id:this.info.singleId,floor_id:this.info.floorId};console.log("编辑========================",t),"请选择楼栋"===this.info.singleId&&this.$message.error("请选择位置");var i=this.info.singleId.split("-");"0"===i[0]&&"请选择单元"===this.info.floorId&&this.$message.error("请选择单元"),this.request(n["a"].editDeviceInfo,t).then((function(t){e.getDeviceDataList(),e.$message.success("操作成功"),e.visible=!1}))},openDoorLog:function(e){this.logShow=!0}}},c=r,d=(i("a72a"),i("2877")),v=Object(d["a"])(c,a,o,!1,null,null,null);t["default"]=v.exports},f67e:function(e,t,i){}}]);