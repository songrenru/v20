(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ce550a6"],{3608:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[t._m(0),i("a-divider",{staticStyle:{"margin-top":"10px"}}),i("a-row",{staticStyle:{"margin-top":"20px"}},[i("a-col",{attrs:{span:8}},[i("a-input-search",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入活动名称"},on:{search:t.onSearch},model:{value:t.queryParams.name,callback:function(e){t.$set(t.queryParams,"name",e)},expression:"queryParams.name"}}),i("a-button",{staticStyle:{margin:"10px 10px"},attrs:{type:"primary"},on:{click:t.onSearch}},[t._v(" "+t._s(t.L("搜索"))+" ")])],1),i("a-col",{attrs:{span:8,offset:8}},[i("a-button",{staticStyle:{margin:"10px 10px",float:"right"},attrs:{type:"primary"},on:{click:t.onAdd}},[t._v(" "+t._s(t.L("新建"))+" ")]),i("a-button",{staticStyle:{margin:"10px 10px",float:"right"},attrs:{type:"danger"},on:{click:t.onDelete}},[t._v(" "+t._s(t.L("删除"))+" ")])],1)],1),i("a-table",{staticStyle:{background:"#ffffff"},attrs:{bordered:"",columns:t.columns,rowKey:"id","data-source":t.dataList,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},pagination:t.pagination},on:{change:t.changePage},scopedSlots:t._u([{key:"ewm",fn:function(e,n){return i("span",{},[i("a",{on:{click:function(i){return t.onSeeImage(e,n)}}},[t._v("查看")])])}},{key:"status",fn:function(e,n){return i("span",{},[i("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关",checked:1==n.status},on:{change:function(e){return t.switchChange(n.id,e)}}})],1)}},{key:"action",fn:function(e){return i("span",{},[i("a",{staticClass:"inline-block",staticStyle:{"margin-right":"10px"},on:{click:function(i){return t.delLifeTools(e)}}},[t._v(t._s(t.L("删除")))]),i("a",{staticClass:"inline-block",on:{click:function(i){return t.addEditLifeTools(e)}}},[t._v(t._s(t.L("编辑")))])])}}])}),i("a-modal",{attrs:{visible:t.previewVisible,destroyOnClose:!0,footer:null,title:"活动页二维码"},on:{cancel:t.handleCancel}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}}),i("div",{staticClass:"copyInput"},[t.listItem&&t.listItem.url?i("a-textarea",{staticStyle:{resize:"none"},attrs:{placeholder:"","auto-size":"",disabled:""},model:{value:t.listItem.url,callback:function(e){t.$set(t.listItem,"url",e)},expression:"listItem.url"}}):t._e(),i("a-button",{attrs:{slot:"addonAfter",type:"primary"},on:{click:t.copy},slot:"addonAfter"},[t._v(" 复制 ")])],1)])],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("h3",[i("a",[t._v("活动列表")])])}],a=i("e49a"),o={components:{},data:function(){return{selectedRowKeys:[],previewVisible:!1,previewImage:"",dataList:[],pagination:{pageSize:10,total:0,current:1,page:1},queryParams:{page_size:0,page:1,name:""},columns:[{title:this.L("活动ID"),dataIndex:"id"},{title:this.L("活动名称"),dataIndex:"name"},{title:this.L("视频转发"),dataIndex:"share_count",sorter:function(t,e){return t.share_count-e.share_count}},{title:this.L("活动二维码"),dataIndex:"ewm",scopedSlots:{customRender:"ewm"}},{title:this.L("添加时间 "),dataIndex:"create_time"},{title:this.L("状态"),dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:this.L("操作"),dataIndex:"id",key:"action",width:100,scopedSlots:{customRender:"action"}}],listItem:null}},watch:{$route:function(){this.getLifeToolsList()}},mounted:function(){this.getLifeToolsList()},methods:{getLifeToolsList:function(){var t=this;this.queryParams.page_size=this.pagination.pageSize,this.queryParams.page=this.pagination.current,console.log(this.queryParams,"12313123123"),this.request(a["a"].getActivityList,this.queryParams).then((function(e){console.log(e,"--------打印表格---------------"),t.dataList=e.data,t.pagination.total=e.total}))},changePage:function(t,e){this.pagination.current=t.current,this.getLifeToolsList()},onSelectChange:function(t){console.log("selectedRowKeys changed: ",t),this.selectedRowKeys=t},onSearch:function(){console.log(this.queryParams,"------------活动名称搜索-----------"),this.getLifeToolsList()},onAdd:function(){console.log("---------新建列表--------------"),this.$router.push({path:"/douyin/merchant.Activity/ActivityAdd"})},onDelete:function(){var t=this;if(console.log(this.selectedRowKeys),!this.selectedRowKeys.length)return this.$message.error(this.L("请选择要删除的列表")),!1;this.$confirm({title:"确定要删除列表吗？",centered:!0,onOk:function(){t.request(a["a"].delActivity,{ids:t.selectedRowKeys}).then((function(e){t.$message.success(t.L("操作成功！")),t.getLifeToolsList()}))},onCancel:function(){}})},copy:function(){var t=this;this.$copyText(this.listItem.url).then((function(e){console.log("copy",e),t.$message.success("复制完毕")})).catch((function(e){console.log("copy.err",e),t.$message.error("复制失败")}))},switchChange:function(t,e){var i=this;e=e?1:0,console.log(t,e),this.request(a["a"].setActivityStatus,{id:t,status:e}).then((function(t){i.getLifeToolsList()}))},onSeeImage:function(t,e){this.listItem=JSON.parse(JSON.stringify(e)),console.log(t,e),this.previewVisible=!0,this.previewImage=t},handleCancel:function(){this.previewVisible=!1},addEditLifeTools:function(t){this.$router.push({path:"/douyin/merchant.Activity/ActivityAdd",query:{tools_id:t}})},delLifeTools:function(t){var e=this;console.log(t),this.$confirm({title:"确定删除吗？",centered:!0,onOk:function(){e.request(a["a"].delActivity,{ids:t}).then((function(t){e.$message.success(e.L("操作成功！")),e.getLifeToolsList()}))},onCancel:function(){}})}}},c=o,r=(i("a742"),i("0c7c")),l=Object(r["a"])(c,n,s,!1,null,null,null);e["default"]=l.exports},"6f18":function(t,e,i){},a742:function(t,e,i){"use strict";i("6f18")},e49a:function(t,e,i){"use strict";var n={getActivityList:"/douyin/merchant.DouyinActivity/getActivityList",setActivityStatus:"/douyin/merchant.DouyinActivity/setActivityStatus",delActivity:"/douyin/merchant.DouyinActivity/delActivity",getStoreList:"/douyin/merchant.DouyinActivity/getStoreList",getCouponList:"/douyin/merchant.DouyinActivity/getCouponList",addOrEditActivity:"/douyin/merchant.DouyinActivity/addOrEditActivity",getActivityDetail:"/douyin/merchant.DouyinActivity/getActivityDetail",getSourceMaterialLists:"/douyin/merchant.DouyinActivity/getSourceMaterialLists",saveSourceMaterial:"/douyin/merchant.DouyinActivity/saveSourceMaterial",delSourceMaterial:"/douyin/merchant.DouyinActivity/delSourceMaterial"};e["a"]=n}}]);