(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1969b2a2"],{7333:function(t,n,e){},dbbe:function(t,n,e){"use strict";e("7333")},ded8:function(t,n,e){"use strict";e.r(n);var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("a-modal",{attrs:{title:t.title,width:900,footer:null,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel}},[e("div",{staticClass:"search-box"},[e("a-row",{attrs:{gutter:48}},[e("a-col",{attrs:{md:10,sm:10}},[e("a-input-group",{attrs:{compact:""}},[e("p",{staticStyle:{"margin-top":"5px"}},[t._v("关键词：")]),e("a-input",{staticStyle:{width:"70%"},model:{value:t.search.keyword,callback:function(n){t.$set(t.search,"keyword",n)},expression:"search.keyword"}})],1)],1),e("a-col",{staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"},attrs:{md:3,sm:24}},[e("a-button",{attrs:{type:"primary"},on:{click:function(n){return t.subBut()}}},[t._v(" 提交 ")])],1),e("a-col",{staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"},attrs:{md:2,sm:24}},[e("a-button",{on:{click:function(n){return t.resetList()}}},[t._v("清空")])],1),t.markerPoint.lng>0?e("span",{staticStyle:{"line-height":"30px",color:"red"}},[t._v("当前选中地址："+t._s(t.markerPoint.address))]):t._e()],1)],1),e("div",{staticClass:"map",staticStyle:{width:"100% !important",height:"500px !important"}},[e("baidu-map",{staticClass:"BMap",staticStyle:{width:"100%",height:"100%"},attrs:{center:t.center,"scroll-wheel-zoom":!0,zoom:t.zoom},on:{ready:t.handler,click:t.getClickInfo}},[e("bm-marker",{attrs:{position:t.markerPoint,dragging:!0},on:{dragend:t.dragend}},[e("bm-label",{attrs:{content:"我在这",labelStyle:{color:"red",fontSize:"24px"},offset:{width:-26,height:26}}})],1),e("bm-local-search",{attrs:{keyword:t.search.keyword,"auto-viewport":!0,location:t.search.location}})],1)],1)])},a=[],i=(e("d81d"),e("ac1f"),e("841c"),e("a9e3"),e("c1df")),r=e.n(i),s=e("a0e0"),l={name:"activityMap",components:{},data:function(){return{title:"新建",confirmLoading:!1,visible:!1,loading:!1,center:{lng:106.35586,lat:27.759588},post:{id:0,lng:0,lat:0},markerPoint:{lng:0,lat:0,address:""},zoom:16,search:{location:"",keyword:""},map:"",BMap:""}},mounted:function(){},methods:{moment:r.a,handler:function(t){var n=t.BMap,e=t.map;this.map=e,this.BMap=n,console.log("handler")},dragend:function(t){this.getLocations(t,0)},getClickInfo:function(t){this.getLocations(t,0)},getLocations:function(t,n){var e=this;console.log("获取地址");var o=new e.BMap.Geocoder,a=[];a=1==n?new e.BMap.Point(t.point.lng,t.point.lat):t.point,o.getLocation(a,(function(t){var n=t.addressComponents,o=t.surroundingPois,a=n.province,i=n.city,r=n.district,s=n.street;o.length>0&&o[0].title?s+=s?"-".concat(o[0].title):"".concat(o[0].title):s+=n.streetNumber,e.markerPoint["address"]=a+i+r+s})),e.markerPoint["lng"]=t.point["lng"],e.markerPoint["lat"]=t.point["lat"]},subBut:function(){if(0==this.markerPoint.lng)return this.$message.error("请先在地图完成选点"),!1;this.$emit("change",this.markerPoint),this.resetList(),this.handleCancel()},resetList:function(){this.markerPoint={lng:0,lat:0,address:""},this.search={location:"",keyword:""}},init_:function(t,n,e){var o=this;t=Number(t),n=Number(n),e=Number(e),o.title="地图选点",o.search={location:"",keyword:""},o.post={id:t,lng:n,lat:e},o.markerPoint={lng:0,lat:0,address:""},0==t&&this.request(s["a"].venueActivityLocation).then((function(t){t&&(o.post.lng=Number(t.lng),o.post.lat=Number(t.lat))})),console.log(o.post),o.post.id>0?setTimeout((function(){o.center={lng:o.post.lng,lat:o.post.lat},o.getLocations({point:{lng:o.post.lng,lat:o.post.lat}},1)}),800):setTimeout((function(){o.center={lng:o.post.lng,lat:o.post.lat}}),800),o.zoom=15,o.loading=!0,o.visible=!0,console.log("init_")},handleCancel:function(){this.visible=!1}}},c=l,d=(e("dbbe"),e("2877")),p=Object(d["a"])(c,o,a,!1,null,"80acfac6",null);n["default"]=p.exports}}]);