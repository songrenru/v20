(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f77fe0a"],{"384b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-ff wrap"},[a("div",{staticClass:"page-title"},[t._v("区域代理列表")]),a("div",{staticClass:"content"},[a("a-form-model",{staticStyle:{padding:"20px auto"},attrs:{layout:"inline"}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:10}},[a("a-form-model-item",{attrs:{label:"选择区域:"}},[a("a-cascader",{staticStyle:{width:"365px"},attrs:{options:t.areaList,placeholder:"请选择省市区",value:t.formData.check_areaList},on:{change:t.changeArea}})],1)],1),a("a-col",{attrs:{span:10}},[a("a-form-model-item",{attrs:{label:"区域代理姓名:"}},[a("a-input",{staticStyle:{width:"365px"},attrs:{placeholder:"请输入区域代理人姓名"},model:{value:t.formData.put_text,callback:function(e){t.$set(t.formData,"put_text",e)},expression:"formData.put_text"}})],1)],1),a("a-col",{staticClass:"text-right",attrs:{span:4}},[a("a-button",{staticClass:"mr-20",staticStyle:{"margin-top":"4px"},attrs:{type:"primary"},on:{click:function(e){return t.getRegionalAgencyList()}}},[t._v(" 查询 ")]),a("a-button",{staticClass:"mr-20",attrs:{type:"warning"},on:{click:function(e){return t.reset()}}},[t._v(" 重置")])],1)],1)],1),a("a-form-model",{staticStyle:{padding:"20px auto"},attrs:{layout:"inline"}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:10}},[a("a-form-model-item",{attrs:{label:"添加时间:"}},[a("a-range-picker",{attrs:{ranges:{"今日":[t.moment(),t.moment()],"近7天":[t.moment(),t.moment().add(7,"days")],"近15天":[t.moment(),t.moment().add(15,"days")],"近30天":[t.moment(),t.moment().add(30,"days")]},value:t.formData.time,format:"YYYY-MM-DD"},on:{change:t.onDateRangeChange}})],1)],1)],1)],1),a("a-row",{staticStyle:{"margin-bottom":"20px"}},[a("a-button",{staticClass:"mr-20",staticStyle:{"margin-top":"4px"},attrs:{type:"primary"},on:{click:function(e){return t.$refs.addRegionalAgent.add()}}},[t._v(" 添加区域代理 ")])],1),a("div",{staticStyle:{width:"100%",border:"1px solid lightblue","background-color":"#E6F7FF",height:"40px","line-height":"40px","padding-left":"15px"}},[t._v(" 已选择"+t._s(t.total_num)+"项 团队总业绩: "+t._s(t.achievement)+" "),a("a",{staticClass:"label-sm blue",on:{click:function(e){return t.reset()}}},[t._v("清空")])]),a("a-table",{attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination,rowKey:"id","row-selection":{selectedRowKeys:t.selectedRows,onChange:t.onSelectChange}},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"team_nums",fn:function(e,n){return e?a("span",{},[a("a",{staticClass:"label-sm blue",on:{click:function(e){return t.openWin(n.id)}}},[t._v(t._s(e))])]):a("span",{attrs:{slot:"team_nums"},slot:"team_nums"},[t._v(" 0 ")])}},{key:"action",fn:function(e,n){return a("span",{},[a("a",{staticClass:"label-sm blue",on:{click:function(e){return t.$refs.editRegionalAgent.edit(n.id)}}},[t._v("编辑")]),a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return t.preventDefault()}}},[t._v(" 更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{on:{click:function(e){return t.$refs.reduceRegionalAgent.add(n.id)}}},[t._v(" 降级 ")]),a("a-menu-item",{on:{click:function(e){return t.$refs.delRegionalAgent.delData(n.id)}}},[t._v(" 移除 ")])],1)],1)],1)}}],null,!0)},[a("span",{attrs:{slot:"customName"},slot:"customName"},[[a("a-popover",{staticStyle:{"text-align":"center"},attrs:{title:"店铺业务抽成比例设置",trigger:"click"},model:{value:t.listDiscountShow,callback:function(e){t.listDiscountShow=e},expression:"listDiscountShow"}},[a("template",{slot:"content"},[a("a-row",{staticStyle:{"margin-bottom":"10px","text-align":"center"}},[a("a-input-number",{staticStyle:{width:"100px"},attrs:{precision:2,min:0,max:100,step:"1"},model:{value:t.discount_ratio,callback:function(e){t.discount_ratio=e},expression:"discount_ratio"}})],1),a("a-row",{staticStyle:{"text-align":"center"}},[a("a-button",{staticStyle:{"margin-right":"20px"},on:{click:function(e){return t.cancelHandle("store")}}},[t._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirmHandle("store")}}},[t._v("确认")])],1)],1),a("span",[t._v("店铺业务抽成比例"),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"edit",theme:"twoTone"}})],1)],2)]],2),a("span",{attrs:{slot:"customName1"},slot:"customName1"},[[a("a-popover",{staticStyle:{"text-align":"center"},attrs:{title:"社区业务抽成比例设置",trigger:"click"},model:{value:t.listDiscountShow1,callback:function(e){t.listDiscountShow1=e},expression:"listDiscountShow1"}},[a("template",{slot:"content"},[a("a-row",{staticStyle:{"margin-bottom":"10px","text-align":"center"}},[a("a-input-number",{staticStyle:{width:"100px"},attrs:{precision:2,min:0,max:100,step:"1"},model:{value:t.discount_ratio1,callback:function(e){t.discount_ratio1=e},expression:"discount_ratio1"}})],1),a("a-row",{staticStyle:{"text-align":"center"}},[a("a-button",{staticStyle:{"margin-right":"20px"},on:{click:function(e){return t.cancelHandle("village")}}},[t._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirmHandle("village")}}},[t._v("确认")])],1)],1),a("span",[t._v("社区业务抽成比例"),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"edit",theme:"twoTone"}})],1)],2)]],2)]),a("delete-regional-agent",{ref:"delRegionalAgent",on:{ok:t.handleUpdate}}),a("add-regional-agent",{ref:"addRegionalAgent",on:{ok:t.handleUpdate}}),a("edit-regional-agent",{ref:"editRegionalAgent",on:{ok:t.handleUpdate}}),a("reduce-regional-agent",{ref:"reduceRegionalAgent",on:{ok:t.handleUpdate}})],1)])},i=[],o=(a("d81d"),a("c1df")),s=a.n(o),r=a("126e"),c=a("290c"),l=a("da05"),d=a("5bd4"),u=a("a684"),m=(a("202f"),a("d5a3")),g=a("b824"),h=a("9a0f"),p=[],f=[{title:"姓名",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"团队数量",dataIndex:"team_nums",scopedSlots:{customRender:"team_nums"}},{dataIndex:"store_percent",align:"center",scopedSlots:{customRender:"store_percent"},slots:{title:"customName"}},{dataIndex:"village_percent",align:"center",scopedSlots:{customRender:"village_percent"},slots:{title:"customName1"}},{title:"总团队业绩",dataIndex:"total_performance",scopedSlots:{customRender:"total_performance"},align:"center"},{title:"总抽成",dataIndex:"total_percentage",scopedSlots:{customRender:"total_percentage"},align:"center"},{title:"区域",dataIndex:"areas",scopedSlots:{customRender:"areas"},align:"center"},{title:"添加时间",dataIndex:"add_time",scopedSlots:{customRender:"add_time"},align:"center"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],_={name:"regionalAgencyList",components:{DeleteRegionalAgent:h["default"],MarketingAreaTeamList:g["default"],ReduceRegionalAgent:m["default"],EditRegionalAgent:u["default"],AddRegionalAgent:d["default"],ACol:l["b"],ARow:c["a"]},data:function(){return{columns:f,selectedRows:p,listDiscountShow:!1,listDiscountShow1:!1,discount_ratio:10,discount_ratio1:10,total_num:0,achievement:0,data:[],areaList:[],formData:{name:"",uid:0,province_id:0,city_id:0,area_id:0,start_time:"",end_time:"",put_text:"",check_areaList:[],time:[]},queryParam:{page:1,pageSize:10,education:-1,job_age:"",status:-1,keywords:"",cates:"",mer_id:0},pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(t){return"共 ".concat(t," 条记录")}}}},watch:{$route:{handler:function(){this.getRegionalAgencyList()}}},mounted:function(){this.getRegionalAgencyList()},methods:{moment:s.a,reset:function(){this.formData={name:"",uid:0,province_id:0,city_id:0,area_id:0,start_time:"",end_time:"",put_text:"",check_areaList:[],time:[]},this.data=[],this.$set(this.pagination,"current",1),this.getRegionalAgencyList()},cancelHandle:function(t){"store"==t?this.listDiscountShow=!1:this.listDiscountShow1=!1},confirmHandle:function(t){var e=this;if("store"==t){this.listDiscountShow=!1;var a=[];if(this.selectedRows.map((function(t){return a.push({id:t,discount_ratio:e.discount_ratio}),t})),0==a.length)return this.$message.error("请选择设置项设置！"),!1;this.request(r["a"].updatePercent,{data:a,length:this.selectedRows.length,discount_ratio:this.discount_ratio}).then((function(t){e.$message.success("设置成功！"),e.getRegionalAgencyList()}))}else{this.listDiscountShow1=!1;var n=[];if(this.selectedRows.map((function(t){return n.push({id:t,discount_ratio1:e.discount_ratio1}),t})),0==n.length)return this.$message.error("请选择设置项设置！"),!1;this.request(r["a"].updatePercent,{data:n,length:this.selectedRows.length,discount_ratio1:this.discount_ratio1}).then((function(t){e.$message.success("设置成功！"),e.getRegionalAgencyList()}))}},openWin:function(t){this.$router.push({path:"/new_marketing/platform/MarketingAreaTeamList",query:{id:t}})},getRegionalAgencyList:function(){var t=this;this.selectedRows=[],this.total_num=0,this.achievement=0,this.request(r["a"].regionalAgencyList,this.formData).then((function(e){t.data=e.list,t.pagination.total=e.count,t.areaList=e.areaList}))},clikPersent:function(){alert(13123)},handleUpdate:function(){this.reset()},changeArea:function(t){this.formData.province_id=t[0]||0,this.formData.city_id=t[1]||0,this.formData.area_id=t[2]||0,this.formData.check_areaList=[t[0],t[1],t[2]]},date_moment:function(t,e){return t?s()(t,e):null},onDateRangeChange:function(t,e){this.$set(this.formData,"time",[t[0],t[1]]),this.$set(this.formData,"start_time",e[0]),this.$set(this.formData,"end_time",e[1])},onSelectChange:function(t,e){var a=this;this.selectedRows=[],this.total_num=e.length,this.achievement=0;var n=0;e.length&&e.map((function(t){a.selectedRows.push(t.id),n+=1*t.total_performance})),this.achievement=n},handleTableChange:function(t){t.current&&t.current>0&&(this.queryParam["page"]=t.current)},onPageChange:function(t,e){this.queryParam.page=t,this.$set(this.pagination,"current",t)},onPageSizeChange:function(t,e){this.$set(this.pagination,"pageSize",e)}}},v=_,y=(a("efcc"),a("0c7c")),b=Object(y["a"])(v,n,i,!1,null,"56bb7f7c",null);e["default"]=b.exports},"4362b":function(t,e,a){},"9a0f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,width:640,visible:t.visible,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel}},[a("a-form-model",{ref:"form"},[a("a-form-item",{attrs:{label:t.L("选择接手区域代理:"),labelCol:t.labelCol,wrapperCol:t.wrapperCol,help:t.L("该区代当前下级团队将归属新区域代理管理")}},[a("a-select",{attrs:{placeholder:"请选择"},on:{change:t.handleSelectChange},model:{value:t.formData.sel_id,callback:function(e){t.$set(t.formData,"sel_id",e)},expression:"formData.sel_id"}},t._l(t.manager,(function(e,n){return a("a-select-option",{key:n,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v(t._s(t.L("取消")))]),a("a-button",{key:"submit",attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(t._s(t.L("确定")))])],1)],2)},i=[],o=a("290c"),s=a("da05"),r=a("126e"),c={name:"deleteRegionalAgent",components:{ACol:s["b"],ARow:o["a"]},data:function(){return{title:"移除",visible:!1,confirmLoading:!1,manager:[],formData:{id:0,sel_id:void 0,percent:0},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}}}},methods:{delData:function(t){var e=this;this.visible=!0,this.formData={id:t,sel_id:void 0},this.title=this.L("移除"),this.request(r["a"].reduceWin,{id:t}).then((function(t){console.log(t,"res--res-res"),e.manager=t.manager})).catch((function(t){e.confirmLoading=!1}))},handleSelectChange:function(t){this.formData.sel_id=t},handleCancel:function(){this.visible=!1},handleSubmit:function(){var t=this;this.$confirm({title:"是否确定移除该区域代理?",centered:!0,onOk:function(){t.confirmLoading=!0,t.request(r["a"].delRegionalAgency,t.formData).then((function(e){e&&t.$message.success(t.L("移除成功")),t.$emit("handleUpdate",{}),setTimeout((function(){t.visible=!1,t.confirmLoading=!1,t.$emit("ok","")}),1500)})).catch((function(e){t.confirmLoading=!1}))},onCancel:function(){}})}}},l=c,d=a("0c7c"),u=Object(d["a"])(l,n,i,!1,null,"d5411724",null);e["default"]=u.exports},efcc:function(t,e,a){"use strict";a("4362b")}}]);