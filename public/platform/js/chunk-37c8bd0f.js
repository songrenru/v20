(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37c8bd0f","chunk-dd2dd86a"],{"1f05":function(e,t,a){},"78bd":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:e.handleCancel}},[e._v(" 取消 ")]),e.isShow?a("a-button",{key:"submit",attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.handleSubmit}},[e._v(" 确定 ")]):e._e()],1),a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{staticClass:"rule_info",attrs:{form:e.form}},[a("div",{staticClass:"box_container",staticStyle:{width:"100%",padding:"20px",border:"1px solid #dddddd",position:"relative","min-height":"100px"}},[a("div",{staticClass:"box_title",staticStyle:{position:"absolute",width:"90px",height:"30px","background-color":"#ffffff",top:"-15px",display:"flex","align-items":"center","justify-content":"center",left:"20px","font-size":"16px","font-weight":"bold"}},[e._v("基本信息")]),a("div",{staticClass:"box_container_content"},[e.isSpecialSelect?a("div",[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title",staticStyle:{width:"23.5%"}},[a("span",{staticClass:"label_col"},[e._v("收费科目")])]),a("div",{staticClass:"input_container"},[a("a-select",{staticStyle:{width:"182px"},attrs:{"show-search":""},on:{change:e.handleChargeNumberChange},model:{value:e.subjectName,callback:function(t){e.subjectName=t},expression:"subjectName"}},e._l(e.chargeNumber,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title",staticStyle:{width:"23.5%"}},[a("span",{staticClass:"label_col"},[e._v("收费项目")])]),a("div",{staticClass:"input_container"},[a("a-select",{staticStyle:{width:"182px"},attrs:{"show-search":""},on:{change:e.handleChargeProjectChange},model:{value:e.charge_project_name,callback:function(t){e.charge_project_name=t},expression:"charge_project_name"}},e._l(e.chargeProject,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("div",{staticClass:"label_desc",staticStyle:{width:"30%"}},[2==e.project_cycle_type?a("span",[e._v("周期性费用")]):e._e(),1==e.project_cycle_type?a("span",[e._v("一次性费用")]):e._e()])])])],1):e._e(),e.isSpecial||"park_new"==e.project_type?a("div",["park_new"==e.project_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("收费规则")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item"},[a("a-radio-group",{attrs:{disabled:e.parking.id>0},on:{change:e.chargingrulesChange},model:{value:e.parking.fees_type,callback:function(t){e.$set(e.parking,"fees_type",t)},expression:"parking.fees_type"}},[a("a-radio",{attrs:{value:3}},[e._v(" 临时车收费规则 ")]),a("a-radio",{attrs:{value:4}},[e._v(" 月租车收费规则 ")])],1)],1),a("div",{staticClass:"value_item value_item_txt"})])])]):e._e(),"park_new"!=e.project_type||1*e.parking.fees_type!=3&&1*e.parking.fees_type!=4?e._e():a("div",[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("账单生成周期设置")])]),a("div",{staticClass:"input_container_three"},[1*e.parking.fees_type==3?a("div",{staticClass:"value_item"},[a("a-select",{staticStyle:{width:"182px"},attrs:{disabled:!0,value:1},on:{change:e.billCreateSetChange}},e._l(e.cycle_array,(function(t){return a("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1):e._e(),1*e.parking.fees_type==4?a("div",{staticClass:"value_item"},[a("a-select",{staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled},on:{change:e.billCreateSetChange},model:{value:e.parking.bill_create_set,callback:function(t){e.$set(e.parking,"bill_create_set",t)},expression:"parking.bill_create_set"}},e._l(e.cycle_array,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1):e._e(),a("div",{staticClass:"value_item value_item_txt"})])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("收费标准名称")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item"},[a("a-input",{staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,maxLength:30,placeholder:"请输入"},model:{value:e.parking.charge_name,callback:function(t){e.$set(e.parking,"charge_name",t)},expression:"parking.charge_name"}})],1),a("div",{staticClass:"value_item"})])])])],1),"park_new"!=e.project_type&&"pile"!=e.project_type?a("div",[e.show.is_bill_create_set?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("账单生成周期设置")])]),a("div",{staticClass:"input_container"},[a("a-select",{staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled},on:{change:e.billCreateSetChange},model:{value:e.post.bill_create_set,callback:function(t){e.$set(e.post,"bill_create_set",t)},expression:"post.bill_create_set"}},e._l(e.cycle_array,(function(t){return a("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("div",{staticClass:"label_desc"})])]):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("收费标准名称")])]),a("div",{staticClass:"input_container"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.charge_name",{initialValue:e.post.charge_name,rules:[{required:!0,message:e.L("请输入名称！")}]}],expression:"['post.charge_name',{ initialValue: post.charge_name,rules: [{ required: true, message: L('请输入名称！') }] }]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,maxLength:30,placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"})])])],1):e._e(),"pile"==e.project_type?a("div",[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("账单生成周期设置")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item"},[a("a-select",{staticStyle:{width:"182px"},attrs:{disabled:!0,value:1},on:{change:e.billCreateSetChange}},e._l(e.cycle_array,(function(t){return a("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("div",{staticClass:"value_item value_item_txt"})])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("收费标准名称")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item"},[a("a-input",{staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,maxLength:30,placeholder:"请输入"},model:{value:e.pile.charge_name,callback:function(t){e.$set(e.pile,"charge_name",t)},expression:"pile.charge_name"}})],1),a("div",{staticClass:"value_item"})])])])],1):e._e()],1):e._e()])]),"pile"==e.project_type||!e.isSpecial&&"park_new"!=e.project_type?e._e():a("div",{staticClass:"box_container",staticStyle:{width:"100%",padding:"20px",border:"1px solid #dddddd",position:"relative","min-height":"100px","margin-top":"30px"}},[a("div",{staticClass:"box_title",staticStyle:{position:"absolute",width:"90px",height:"30px","background-color":"#ffffff",top:"-15px",display:"flex","align-items":"center","justify-content":"center",left:"20px","font-size":"16px","font-weight":"bold"}},[e._v("收费类型")]),a("div",{staticClass:"box_container_content"},["park_new"==e.project_type&&1*e.parking.fees_type==3?a("div",[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("收费类型")])]),a("div",{staticClass:"input_container_three"},["A11"!=e.park_sys_type?a("div",{staticClass:"value_item"},[a("a-select",{staticStyle:{width:"182px"},attrs:{disabled:e.parking.id>0},on:{change:e.handleSelectChange},model:{value:e.parking.charge_type,callback:function(t){e.$set(e.parking,"charge_type",t)},expression:"parking.charge_type"}},[a("a-select-option",{attrs:{value:1}},[e._v("二十四小时")])],1)],1):e._e(),"A11"==e.park_sys_type?a("div",{staticClass:"value_item"},[a("a-select",{staticStyle:{width:"182px"},attrs:{disabled:e.parking.id>0},on:{change:e.handleSelectChange},model:{value:e.parking.charge_type,callback:function(t){e.$set(e.parking,"charge_type",t)},expression:"parking.charge_type"}},[a("a-select-option",{attrs:{value:1}},[e._v("计算步长")]),a("a-select-option",{attrs:{value:4}},[e._v("二十四小时")]),a("a-select-option",{attrs:{value:5}},[e._v("按次收费")])],1)],1):e._e(),a("div",{staticClass:"value_item value_item_txt"})])])]),1==e.park_charge_type_show?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("费用设置")])]),a("div",{staticClass:"input_container_three"},[e._l(e.durationList,(function(t,i){return a("div",{key:i,staticClass:"duration_item"},[a("a-input",{staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,"addon-after":"小时",placeholder:"请输入时长"},model:{value:e.parking.duration_time[i],callback:function(t){e.$set(e.parking.duration_time,i,t)},expression:"parking.duration_time[index]"}}),a("a-input",{staticStyle:{width:"182px","margin-left":"20px"},attrs:{disabled:e.is_disabled,"addon-after":"元",placeholder:"请输入收费金额"},model:{value:e.parking.duration_money[i],callback:function(t){e.$set(e.parking.duration_money,i,t)},expression:"parking.duration_money[index]"}}),a("a-icon",0==i?{staticStyle:{"margin-left":"20px"},attrs:{type:"plus-circle"},on:{click:e.duration_add}}:{staticStyle:{"margin-left":"20px"},attrs:{type:"minus-circle"},on:{click:function(t){return e.duration_reduce(i)}}})],1)})),a("div",{staticClass:"duration_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 1、设置时长，并设置时长收费标准 ")]),a("div",{staticClass:"duration_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 2、车辆入场后超过设置时长，不超过时长收费金额，按时长收费标准收费 ")]),a("div",{staticClass:"duration_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 3、未设置免费时间，车辆入场后按设置时长收费 ")])],2)])]):e._e(),4==e.park_charge_type_show?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("费用设置")])]),a("div",{staticClass:"input_container_three"},[e._l(e.park24hour_fee,(function(t,i){return a("div",e._l(t,(function(t,s){return a("div",{key:s,staticClass:"park24hourfee"},[a("span",{staticClass:"per24hourfee"},[e._v(e._s(t.hour)+"小时")]),a("a-input-number",{staticStyle:{width:"100px"},attrs:{disabled:e.is_disabled,min:.01,step:.01,"addon-after":"元",placeholder:"请输入金额",formatter:function(e){return(""+e).replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(/^(\-)*(\d+)\.(\d\d)(.*)$/,"$1$2.$3").replace(/^\./g,"")},parser:function(e){return e.replace(/^(\-)*(\d+)\.(\d\d)(.*)$/,"$1$2.$3")}},model:{value:e.park24hour_fee[i][s].fee,callback:function(t){e.$set(e.park24hour_fee[i][s],"fee",t)},expression:"park24hour_fee[index][ikey].fee"}})],1)})),0)})),a("div",{staticClass:"duration_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 1、此收费类型下24小时必须每个小时的停车费都填上值 ")]),a("div",{staticClass:"duration_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 2、时间大的设置的停车费必须不能小于时间小的 ")])],2)])]):e._e(),1==e.park_charge_type_show?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("计算步长")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-input",{staticStyle:{width:"130px"},attrs:{disabled:!0,"addon-after":"小时"},model:{value:e.maxCount,callback:function(t){e.maxCount=t},expression:"maxCount"}}),a("a-select",{staticStyle:{width:"150px","margin-left":"20px"},attrs:{disabled:e.is_disabled},on:{change:e.chargeTimeChange},model:{value:e.parking.charge_time,callback:function(t){e.$set(e.parking,"charge_time",t)},expression:"parking.charge_time"}},e._l(e.charge_time_list,(function(t,i){return a("a-select-option",{key:i},[e._v(" "+e._s(t.title)+" ")])})),1),e._v("   分钟 "),a("a-input",{staticStyle:{width:"182px","margin-left":"20px"},attrs:{disabled:e.is_disabled,"addon-after":"元",placeholder:"请输入收费金额"},model:{value:e.parking.charge_money,callback:function(t){e.$set(e.parking,"charge_money",t)},expression:"parking.charge_money"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 1、每超过30分钟加收2元（不足30分钟按30分钟计算） 以此类推 ")])])])]):e._e(),5==e.park_charge_type_show?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[5==e.park_charge_type_show?a("span",{staticClass:"label_col"},[e._v("收费类别设置")]):e._e()]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-radio-group",{attrs:{defaultValue:e.parking.charge_type5_set},on:{change:e.onChargeTypeRadioChange},model:{value:e.parking.charge_type5_set,callback:function(t){e.$set(e.parking,"charge_type5_set",t)},expression:"parking.charge_type5_set"}},[a("a-radio",{staticClass:"a_radio",attrs:{value:3,disabled:e.is_disabled}},[e._v(" 当天只收取一次费（零点前） ")]),a("br"),a("a-radio",{staticClass:"a_radio",attrs:{value:1,disabled:e.is_disabled}},[e._v(" 连续 "),a("a-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:3e3,step:1,disabled:e.is_disabled},model:{value:e.parking.hour_once_fee,callback:function(t){e.$set(e.parking,"hour_once_fee",t)},expression:"parking.hour_once_fee"}}),e._v(" 小时只收取一次费 ")],1),a("br"),a("a-radio",{staticClass:"a_radio",attrs:{value:2,disabled:e.is_disabled}},[e._v(" 按次收费 ")])],1)],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}})])])]):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("费用标准生效时间")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-date-picker",{attrs:{mode:e.date_status,format:e.dateFormat,disabled:e.is_disabled,placeholder:"请选择时间",open:e.isOpen},on:{panelChange:e.selectYear,openChange:function(t){return e.onOpenChange(t,"isOpen")}},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 设置后，生成应收账单的费用将根据正在生效的标准计算 ")])])])]),1==e.park_charge_type_show||2==e.park_charge_type_show||5==e.park_charge_type_show?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[1==e.park_charge_type_show?a("span",{staticClass:"label_col"},[e._v("封顶收费")]):a("span",{staticClass:"label_col ant-form-item-required"},[e._v("收费金额")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-input",{staticStyle:{width:"270px"},attrs:{disabled:e.is_disabled,"addon-after":"元",placeholder:"请输入收取费用"},model:{value:e.parking.max_charge_money,callback:function(t){e.$set(e.parking,"max_charge_money",t)},expression:"parking.max_charge_money"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}})])])]):e._e()],1):e._e(),"park_new"==e.project_type&&1*e.parking.fees_type==4?a("div",[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("收费金额")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item"},[a("a-input",{staticStyle:{width:"180px"},attrs:{disabled:e.is_disabled,"addon-after":e.measure,placeholder:"请输入收费金额"},model:{value:e.parking.charge_price,callback:function(t){e.$set(e.parking,"charge_price",t)},expression:"parking.charge_price"}})],1),a("div",{staticClass:"value_item ",staticStyle:{"line-height":"20px"}})])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("收费周期")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item"},[a("a-input",{staticStyle:{width:"180px"},attrs:{disabled:e.is_disabled,placeholder:"请输入收费周期"},model:{value:e.parking.park_charge_id,callback:function(t){e.$set(e.parking,"park_charge_id",t)},expression:"parking.park_charge_id"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v("不填默认为1 ")])])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("生成账单规则")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"10px"}},[a("a-radio-group",{attrs:{disabled:e.is_disabled,disabled:""},model:{value:e.parking.bill_type,callback:function(t){e.$set(e.parking,"bill_type",t)},expression:"parking.bill_type"}},[a("a-radio",{attrs:{value:1}},[e._v(" 手动生成 ")])],1)],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 手动生成账单需手动操作给收费对象生成应交账单，一般用于停车费的收取 ")])])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("费用标准生效时间")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-date-picker",{attrs:{mode:e.date_status,format:e.dateFormat,disabled:e.is_disabled,placeholder:"请选择时间",open:e.isOpen},on:{panelChange:e.selectYear,openChange:function(t){return e.onOpenChange(t,"isOpen")}},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 设置后，生成应收账单的费用将根据正在生效的标准计算 ")])])])])],1):e._e(),"park_new"!=e.project_type&&"pile"!=e.project_type?a("div",[e.show.is_fees_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("计费模式")])]),a("div",[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.fees_type",{initialValue:e.post.fees_type}],expression:"['post.fees_type', {initialValue:post.fees_type}]"}],attrs:{disabled:e.is_disabled},on:{change:e.feesTypeChange}},[a("a-radio",{attrs:{value:1}},[e._v(" 固定费用 ")]),e.fees_type2_show&&"qrcode"!=e.project_type?a("a-radio",{attrs:{value:2}},[e._v(" 单价*计量单位 ")]):e._e(),e.fees_type2_show&&e.show.park_numbers_judge&&"qrcode"!=e.project_type?a("a-radio",{attrs:{value:5}},[e._v(" 车位数量 ")]):e._e()],1)],1)])]):e._e(),e.show.is_unit_gage?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("计量单位")])]),a("div",{staticClass:"input_container"},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.unit_gage_type",{initialValue:e.post.unit_gage_type}],expression:"['post.unit_gage_type', {initialValue:post.unit_gage_type}]"}],attrs:{disabled:e.is_disabled},on:{change:e.unitGageChange}},[a("a-radio",{attrs:{value:1}},[e._v(" 房屋面积 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 自定义 ")]),a("a-radio",{attrs:{value:3}},[e._v(" 车位面积 ")])],1),e.unit_gage_txt_status?a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.unit_gage_txt",{initialValue:e.post.unit_gage_txt}],expression:"['post.unit_gage_txt',{ initialValue: post.unit_gage_txt}]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,maxLength:8,placeholder:"输入计量单位"}}):e._e()],1),a("div",{staticClass:"label_desc"},[e._v(" 根据收费项具体计算方式选择对应的计量单位，若不满足，则可自定义，例如楼道面积、走廊面积等，自定义的计量单位在绑定费用至房间/车位时需要填写对应的数值 ")])])]):e._e(),e.show.is_unit_price?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("单价")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.unit_price",{initialValue:e.post.unit_price,rules:[{required:!0,message:e.L("请输入单价！")}]}],expression:"['post.unit_price',{ initialValue: post.unit_price,rules: [{ required: true, message: L('请输入单价！') }] }]"}],staticStyle:{width:"182px"},attrs:{formatter:function(e){return(""+e).replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(/^(\-)*(\d+)\.(\d\d\d\d)(.*)$/,"$1$2.$3").replace(/^\./g,"")},parser:function(e){return e.replace(/^(\-)*(\d+)\.(\d\d\d\d)(.*)$/,"$1$2.$3")},disabled:e.is_disabled,min:0,maxLength:10,placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 设置计费的单价,最多支持四位小数 ")])])])]):e._e(),e.show.is_unit_price?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("倍率")])]),a("div",{staticClass:"input_container"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.rate",{initialValue:e.post.rate}],expression:"['post.rate',{ initialValue: post.rate }]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,min:1,max:100,placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 不填默认1倍 ")])])]):e._e(),e.show.is_bill_arrears_set?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("账单欠费模式")])]),a("div",{staticClass:"input_container"},[a("a-select",{staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled},on:{change:e.billArrearsSetChange},model:{value:e.post.bill_arrears_set,callback:function(t){e.$set(e.post,"bill_arrears_set",t)},expression:"post.bill_arrears_set"}},e._l(e.arrears_array,(function(t){return a("a-select-option",{key:t.key},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("div",{staticClass:"label_desc"},[e._v(" 预生成即表示在账单开始时间生成应收账单，后生成即在账单结束时间生成应收账单 ")])])]):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("计算中小数位处理方式")])]),a("div",{staticClass:"input_container"},[e._v(" "+e._s(e.digit_type_txt)+" ")]),a("div",{staticClass:"label_desc"},[e._v(" 计算中小数位处理方式,跟随物业后台小数设置变化，如果物业没设置默认是 四舍五入 ")])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("账单金额计算时小数位")])]),a("div",{staticClass:"input_container"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.rule_digit",{initialValue:e.post.rule_digit}],expression:"['post.rule_digit',{ initialValue: post.rule_digit }]"}],staticStyle:{width:"190px"},attrs:{formatter:function(e){return(""+e).replace(/^(\d)(.*)$/,"$1").replace(/[^1234]/g,"")},parser:function(e){return e.replace(/^(\d)(.*)$/,"$1").replace(/[^1234]/g,"")},disabled:e.is_disabled,min:0,maxLength:1,placeholder:"请输(1到4)其中一个数字"}}),e._v(" 位 ")],1),a("div",{staticClass:"label_desc"},[e._v(" 在生成账单金额计算过程中带多少位小数位运算,最多支持四位小数（请输(1到4)其中一个数字），不设置则是跟随物业后台小数处理设置，最终订单金额是小数位最多不超过2位 ")])])]),e.show.is_bill_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("生成账单模式")])]),a("div",{staticClass:"input_container"},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.bill_type",{initialValue:e.post.bill_type}],expression:"['post.bill_type', {initialValue:post.bill_type}]"}],attrs:{disabled:e.is_disabled}},[a("a-radio",{attrs:{value:1}},[e._v(" 手动生成 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 自动生成 ")])],1)],1),a("div",{staticClass:"label_desc"},[e._v(" 手动生成账单需手动操作给收费对象生成应缴账单，一般用于停车费的收取；自动生成账单则系统根据账单开始生成时间自动生成账单 ")])])]):e._e(),e.show.is_unit_price?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("单位")])]),a("div",{staticClass:"input_container"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.measure_unit",{initialValue:e.post.measure_unit}],expression:"['post.measure_unit',{ initialValue: post.measure_unit }]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 不填默认元/度 ")])])]):e._e(),e.show.is_charge_price?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("收费金额")])]),a("div",{staticClass:"input_container"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.charge_price",{initialValue:e.post.charge_price,rules:[{required:!0,message:e.L("请输入金额！")}]}],expression:"['post.charge_price',{ initialValue: post.charge_price,rules: [{ required: true, message: L('请输入金额！') }] }]"}],staticStyle:{width:"182px"},attrs:{formatter:function(e){return(""+e).replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(/^(\-)*(\d+)\.(\d\d\d\d).*$/,"$1$2.$3").replace(/^\./g,"")},parser:function(e){return e.replace(/^(\-)*(\d+)\.(\d\d\d\d)(.*)$/,"$1$2.$3")},disabled:e.is_disabled,min:0,maxLength:10,placeholder:"请输入"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.show.is_bill_create_set,expression:"show.is_bill_create_set"}]},[e._v(e._s(e.measure))])],1),a("div",{staticClass:"label_desc"},[e._v(" 固定收费金额，每次生成应收账单固定的收款金额，最多支持4位小数 ")])])]):e._e(),"qrcode"==e.project_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("市场价")])]),a("div",{staticClass:"input_container"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.market_price",{initialValue:e.post.market_price}],expression:"['post.market_price',{ initialValue: post.market_price }]"}],staticStyle:{width:"182px"},attrs:{formatter:function(e){return(""+e).replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(/^(\-)*(\d+)\.(\d\d\d\d).*$/,"$1$2.$3").replace(/^\./g,"")},parser:function(e){return e.replace(/^(\-)*(\d+)\.(\d\d\d\d)(.*)$/,"$1$2.$3")},disabled:e.is_disabled,min:0,maxLength:10,placeholder:"请输入市场价"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.show.is_bill_create_set,expression:"show.is_bill_create_set"}]},[e._v(e._s(e.measure))])],1),a("div",{staticClass:"label_desc"})])]):e._e(),"qrcode"!=e.project_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("是否支持预缴")])]),a("div",{staticClass:"input_container"},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.is_prepaid",{initialValue:e.post.is_prepaid}],expression:"['post.is_prepaid', {initialValue:post.is_prepaid}]"}],attrs:{disabled:e.show.is_prepaid_disabled},on:{change:e.onChange_is_prepaid}},[a("a-radio",{attrs:{value:1}},[e._v(" 是 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 否 ")])],1)],1),a("div",{staticClass:"label_desc"},[e._v(" 用户可提前预缴收费项，可设置预缴的优惠方案 ")])])]):e._e(),e.show.is_prepaid_button&&"qrcode"!=e.project_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("预缴时间管理")])]),a("div",{staticClass:"input_container"},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.prepaidModel.List(e.post.id,1,e.post.bill_create_set,e.isShow,e.is_grapefruit_prepaid,e.charge_project_id)}}},[e._v(" 管理 ")])],1),a("div",{staticClass:"label_desc"},[e._v(" 可管理用户预缴费用的缴费方案 ")])])]):e._e(),e.show.is_cyclicity_type_set&&"qrcode"!=e.project_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("周期性费用设置")])]),a("div",{staticClass:"input_container"},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.is_cyclicity_type_set",{initialValue:e.post.is_cyclicity_type_set}],expression:"['post.is_cyclicity_type_set', {initialValue:post.is_cyclicity_type_set}]"}],attrs:{disabled:e.is_disabled},on:{change:e.cyclicityTypeChange}},[a("a-radio",{attrs:{value:0}},[e._v(" 无限期 ")]),a("a-radio",{attrs:{value:1}},[e._v(" 自定义 ")])],1),e.cyclicity_set_txt_status?a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.cyclicity_set",{initialValue:e.post.cyclicity_set}],expression:"['post.cyclicity_set',{ initialValue: post.cyclicity_set}]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,min:1,placeholder:"请输入收费时长"}}):e._e()],1),a("div",{staticClass:"label_desc"},[e._v(" 根据实际收费情况进行设置，若是需要业主一直缴纳则是无限期；若是仅需缴纳一段时间的费用，则自定收费时长即可"),a("br")])])]):e._e(),"qrcode"!=e.project_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col"},[e._v("未入住房屋折扣")])]),a("div",{staticClass:"input_container"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.not_house_rate",{initialValue:e.post.not_house_rate}],expression:"['post.not_house_rate',{ initialValue: post.not_house_rate }]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,min:0,max:100,formatter:function(e){return 0!=e&&"0"!=e||(e=100),e+" %"},placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 房屋无人入住的状态下及没有绑定车辆的未使用车位可设置应收费用优惠折扣（以百分比计算，请输入1-100），例如输入80，则按80%进行收取，即100元仅需缴纳80元，优惠掉20元 ")])])]):e._e(),"qrcode"!=e.project_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("费用标准生效时间")])]),a("div",{staticClass:"input_container"},[a("a-date-picker",{attrs:{mode:e.date_status,format:e.dateFormat,disabled:e.is_disabled,placeholder:"请选择时间",open:e.isOpen},on:{panelChange:e.selectYear,openChange:function(t){return e.onOpenChange(t,"isOpen")}},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 设置后，生成应收账单的费用将根据正在生效的费用标准计算 ")])])]):e._e()],1):e._e()])]),!e.isSpecial&&"park_new"!=e.project_type||"qrcode"==e.project_type?e._e():a("div",{staticClass:"box_container",staticStyle:{width:"100%",padding:"20px",border:"1px solid #dddddd",position:"relative","min-height":"100px","margin-top":"30px"}},[a("div",{staticClass:"box_title",staticStyle:{position:"absolute",width:"90px",height:"30px","background-color":"#ffffff",top:"-15px",display:"flex","align-items":"center","justify-content":"center",left:"20px","font-size":"16px","font-weight":"bold"}},["park_new"==e.project_type?a("span",[e._v("基础参数")]):e._e(),e._v(" "),"park_new"!=e.project_type&&"pile"!=e.project_type&&"qrcode"!=e.project_type?a("span",[e._v("滞纳金设置")]):e._e(),"pile"==e.project_type?a("span",[e._v("汽车充电桩")]):e._e()]),a("div",{staticClass:"box_container_content"},["park_new"==e.project_type&&1*e.parking.fees_type==3?a("div",[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("免费时间")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-input",{staticStyle:{width:"270px"},attrs:{disabled:e.is_disabled,"addon-after":"分钟",placeholder:"请输入免费停车时间"},model:{value:e.parking.free_time,callback:function(t){e.$set(e.parking,"free_time",t)},expression:"parking.free_time"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}})])])]),"A11"==e.park_sys_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("免费时间不计费用")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-checkbox",{attrs:{"default-checked":e.parking.free_time_no_count>0,disabled:e.is_disabled},on:{change:e.onFeeTimeChange}},[e._v(" 从免费时间后开始计算费用 ")])],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}})])])]):e._e(),1==e.parking.charge_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("首停时间")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-input",{staticStyle:{width:"270px"},attrs:{disabled:e.is_disabled,"addon-after":"分钟",placeholder:"请输入首停的时间"},model:{value:e.parking.first_free_time,callback:function(t){e.$set(e.parking,"first_free_time",t)},expression:"parking.first_free_time"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 1、首停时间为0时，不计算首停 ")])])])]):e._e(),1==e.parking.charge_type?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("首停费用")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-input",{staticStyle:{width:"270px"},attrs:{disabled:e.is_disabled,"addon-after":"元",placeholder:"请输入首停费用"},model:{value:e.parking.first_charge_money,callback:function(t){e.$set(e.parking,"first_charge_money",t)},expression:"parking.first_charge_money"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}})])])]):e._e()],1):e._e(),"park_new"==e.project_type&&1*e.parking.fees_type==4?a("div",[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("赠送时长")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择",disabled:e.is_disabled},on:{change:e.cycleTypeChange},model:{value:e.parking.give_cycle_type,callback:function(t){e.$set(e.parking,"give_cycle_type",t)},expression:"parking.give_cycle_type"}},e._l(e.give_cycle_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.value}},[e._v(" "+e._s(t.value)+" ")])})),1),e.custom_give_cycle?a("a-input",{staticStyle:{width:"180px","margin-left":"20px"},attrs:{"addon-after":1==e.parking.give_cycle_datetype?"年":2==e.parking.give_cycle_datetype?"月":"日",placeholder:"请输入自定义周期"},model:{value:e.parking.give_cycle_type,callback:function(t){e.$set(e.parking,"give_cycle_type",t)},expression:"parking.give_cycle_type"}}):e._e(),a("a-select",{staticStyle:{width:"120px","margin-left":"20px"},attrs:{placeholder:"请选择",disabled:e.is_disabled},on:{change:e.cycleDateChange},model:{value:e.parking.give_cycle_datetype,callback:function(t){e.$set(e.parking,"give_cycle_datetype",t)},expression:"parking.give_cycle_datetype"}},e._l(e.cycle_array,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 可不填写 ")])])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col"},[e._v("未入住房屋折扣")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"10px"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.not_house_rate",{initialValue:e.post.not_house_rate}],expression:"['post.not_house_rate',{ initialValue: post.not_house_rate }]"}],staticStyle:{width:"182px"},attrs:{disabled:e.is_disabled,min:0,max:100,formatter:function(e){return 0!=e&&"0"!=e||(e=100),e+" %"},placeholder:"请输入"}})],1),a("div",{staticClass:"label_desc"},[e._v(" 房屋无人入住的状态下及没有绑定车辆的未使用车位可设置应收费用优惠折扣（以百分比计算，请输入1-100），例如输入80，则按80%进行收取，即100元仅需缴纳80元，优惠掉20元 ")])])])])],1):e._e(),"park_new"!=e.project_type&&"pile"!=e.project_type&&"qrcode"!=e.project_type?a("div",[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_two"},[a("span",{staticClass:"label_col"},[e._v("计算时间")])]),a("div",{staticClass:"input_container_two"},[e._v(" 账单生成后 "),a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.late_fee_reckon_day",{initialValue:e.post.late_fee_reckon_day}],expression:"['post.late_fee_reckon_day',{ initialValue: post.late_fee_reckon_day }]"}],attrs:{disabled:e.is_disabled,min:1,max:100,placeholder:"请输入"}}),e._v("（天）开始计算滞纳金 ")],1)])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_two"},[a("span",{staticClass:"label_col"},[e._v("费用收取封顶天数")])]),a("div",{staticClass:"input_container_two"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.late_fee_top_day",{initialValue:e.post.late_fee_top_day}],expression:"['post.late_fee_top_day',{ initialValue: post.late_fee_top_day }]"}],attrs:{disabled:e.is_disabled,min:1,max:100,placeholder:"请输入"}}),e._v("不填为不限制，一直计算到用户缴纳费用 ")],1)])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_two"},[a("span",{staticClass:"label_col"},[e._v("滞纳金收取比例（每天）")])]),a("div",{staticClass:"input_container_two"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.late_fee_rate",{initialValue:e.post.late_fee_rate}],expression:"['post.late_fee_rate',{ initialValue: post.late_fee_rate }]"}],staticStyle:{width:"150px"},attrs:{disabled:e.is_disabled,oninput:"value=value.replace(/[^\\d.]/g, '').replace(/\\.{2,}/g, '.').replace('.', '$#$').replace(/\\./g, '').replace('$#$', '.').replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/, '$1$2.$3').replace(/^\\./g, '')",min:0,max:100,formatter:function(e){return e+" %"},placeholder:"请输入百分比"}}),e._v(" 百分比0-100，例如输入2，则每日按应收费用的2%比例收取滞纳金，即100元应收费用，每天滞纳金为2元 ")],1)])])],1):e._e(),e.isSpecial&&"pile"==e.project_type?a("div",["pile"==e.project_type?a("div",[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("价格类别")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"duration_item"},[a("a-input",{staticStyle:{width:"150px"},attrs:{disabled:!0,"addon-before":"类别名称",placeholder:"请输入时长"},model:{value:e.pile.charge1_name,callback:function(t){e.$set(e.pile,"charge1_name",t)},expression:"pile.charge1_name"}}),a("a-input",{staticStyle:{width:"182px","margin-left":"20px"},attrs:{disabled:e.is_disabled,"addon-before":"电费","addon-after":"元/度",placeholder:"请输入收费金额"},model:{value:e.pile.charge1_ele,callback:function(t){e.$set(e.pile,"charge1_ele",t)},expression:"pile.charge1_ele"}}),a("a-input",{staticStyle:{width:"190px","margin-left":"20px"},attrs:{disabled:e.is_disabled,"addon-before":"服务费","addon-after":"元/度",placeholder:"请输入收费金额"},model:{value:e.pile.charge1_serve,callback:function(t){e.$set(e.pile,"charge1_serve",t)},expression:"pile.charge1_serve"}})],1),a("div",{staticClass:"duration_item"},[a("a-input",{staticStyle:{width:"150px"},attrs:{disabled:!0,"addon-before":"类别名称",placeholder:"请输入时长",value:"峰"},model:{value:e.pile.charge2_name,callback:function(t){e.$set(e.pile,"charge2_name",t)},expression:"pile.charge2_name"}}),a("a-input",{staticStyle:{width:"182px","margin-left":"20px"},attrs:{disabled:e.is_disabled,"addon-before":"电费","addon-after":"元/度",placeholder:"请输入收费金额"},model:{value:e.pile.charge2_ele,callback:function(t){e.$set(e.pile,"charge2_ele",t)},expression:"pile.charge2_ele"}}),a("a-input",{staticStyle:{width:"190px","margin-left":"20px"},attrs:{disabled:e.is_disabled,"addon-before":"服务费","addon-after":"元/度",placeholder:"请输入收费金额"},model:{value:e.pile.charge2_serve,callback:function(t){e.$set(e.pile,"charge2_serve",t)},expression:"pile.charge2_serve"}})],1),a("div",{staticClass:"duration_item"},[a("a-input",{staticStyle:{width:"150px"},attrs:{disabled:!0,"addon-before":"类别名称",placeholder:"请输入时长",value:"平"},model:{value:e.pile.charge3_name,callback:function(t){e.$set(e.pile,"charge3_name",t)},expression:"pile.charge3_name"}}),a("a-input",{staticStyle:{width:"182px","margin-left":"20px"},attrs:{disabled:e.is_disabled,"addon-before":"电费","addon-after":"元/度",placeholder:"请输入收费金额"},model:{value:e.pile.charge3_ele,callback:function(t){e.$set(e.pile,"charge3_ele",t)},expression:"pile.charge3_ele"}}),a("a-input",{staticStyle:{width:"190px","margin-left":"20px"},attrs:{disabled:e.is_disabled,"addon-before":"服务费","addon-after":"元/度",placeholder:"请输入收费金额"},model:{value:e.pile.charge3_serve,callback:function(t){e.$set(e.pile,"charge3_serve",t)},expression:"pile.charge3_serve"}})],1),a("div",{staticClass:"duration_item"},[a("a-input",{staticStyle:{width:"150px"},attrs:{disabled:!0,"addon-before":"类别名称",placeholder:"请输入时长",value:"谷"},model:{value:e.pile.charge4_name,callback:function(t){e.$set(e.pile,"charge4_name",t)},expression:"pile.charge4_name"}}),a("a-input",{staticStyle:{width:"182px","margin-left":"20px"},attrs:{disabled:e.is_disabled,"addon-before":"电费","addon-after":"元/度",placeholder:"请输入收费金额"},model:{value:e.pile.charge4_ele,callback:function(t){e.$set(e.pile,"charge4_ele",t)},expression:"pile.charge4_ele"}}),a("a-input",{staticStyle:{width:"190px","margin-left":"20px"},attrs:{disabled:e.is_disabled,"addon-before":"服务费","addon-after":"元/度",placeholder:"请输入收费金额"},model:{value:e.pile.charge4_serve,callback:function(t){e.$set(e.pile,"charge4_serve",t)},expression:"pile.charge4_serve"}})],1)])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("价格设置")])]),a("div",{staticClass:"input_container_three"},[e._l(e.dealDurationTimeList,(function(t,i){return a("div",{key:i,staticClass:"duration_item"},[a("a-select",{staticStyle:{width:"160px"},attrs:{disabled:e.is_disabled},on:{change:function(t){return e.pileDurationTime(t,i,"start")}},model:{value:e.needSubmitArr[i].start,callback:function(t){e.$set(e.needSubmitArr[i],"start",t)},expression:"needSubmitArr[index].start"}},e._l(e.dealDurationTimeList[i].start,(function(t,i){return a("a-select-option",{key:i,attrs:{disabled:!t.status}},[e._v(" "+e._s(t.value)+" ")])})),1),a("a-select",{staticStyle:{width:"160px","margin-left":"20px"},attrs:{disabled:e.is_disabled},on:{change:function(t){return e.pileDurationTime(t,i,"end")}},model:{value:e.needSubmitArr[i].end,callback:function(t){e.$set(e.needSubmitArr[i],"end",t)},expression:"needSubmitArr[index].end"}},e._l(e.dealDurationTimeList[i].end,(function(t,i){return a("a-select-option",{key:i,attrs:{disabled:!t.status}},[e._v(" "+e._s(t.value)+" ")])})),1),a("a-select",{staticStyle:{width:"150px","margin-left":"20px"},attrs:{disabled:e.is_disabled},on:{change:function(t){return e.pileDurationMoney(t,i)}},model:{value:e.needSubmitArr[i].price,callback:function(t){e.$set(e.needSubmitArr[i],"price",t)},expression:"needSubmitArr[index].price"}},e._l(e.duration_money_list,(function(t,i){return a("a-select-option",{key:i},[e._v(" "+e._s(t.title)+" ")])})),1),0==i&&e.showUnified&&!e.is_disabled?a("a-icon",{staticStyle:{"margin-left":"20px"},attrs:{type:"plus-circle"},on:{click:e.pile_duration_add}}):e._e(),0==i||e.is_disabled?e._e():a("a-icon",{staticStyle:{"margin-left":"20px"},attrs:{type:"minus-circle"},on:{click:function(t){return e.pile_duration_reduce(i)}}})],1)})),e.showUnified?a("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"10px"}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("a-input",{staticStyle:{width:"340px"},attrs:{placeholder:"剩余时间段统一选择",disabled:!0}})],1),a("a-select",{staticStyle:{width:"150px","margin-left":"20px"},attrs:{disabled:e.is_disabled},on:{change:function(t){return e.handleSelectPileChange(t,"unified")}},model:{value:e.unifiedVal,callback:function(t){e.unifiedVal=t},expression:"unifiedVal"}},e._l(e.duration_money_list,(function(t,i){return a("a-select-option",{key:i},[e._v(" "+e._s(t.title)+" ")])})),1)],1):e._e()],2)])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("是否开启定时充")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-radio-group",{attrs:{disabled:e.is_disabled,name:"radioGroup"},model:{value:e.pile.timing_pile,callback:function(t){e.$set(e.pile,"timing_pile",t)},expression:"pile.timing_pile"}},[a("a-radio",{attrs:{value:1}},[e._v("是")]),a("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}})])])]),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form_con"},[a("div",{staticClass:"label_title_three"},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("费用标准生效时间")])]),a("div",{staticClass:"input_container_three"},[a("div",{staticClass:"value_item",staticStyle:{"margin-top":"5px"}},[a("a-date-picker",{attrs:{mode:e.date_status,format:e.dateFormat,disabled:e.is_disabled,placeholder:"请选择时间",open:e.isOpen},on:{panelChange:e.selectYear,openChange:function(t){return e.onOpenChange(t,"isOpen")}},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("div",{staticClass:"value_item value_item_txt",staticStyle:{"line-height":"20px"}},[e._v(" 设置后，生成应收账单的费用将根据正在生效的标准计算 ")])])])])],1):e._e()]):e._e()])])])],1),a("prepaidList",{ref:"prepaidModel",on:{ok:e.prepaidList}})],2)},s=[],r=a("2909"),l=a("ade3"),o=(a("d3b7"),a("25f0"),a("ac1f"),a("5319"),a("d81d"),a("b0c0"),a("a434"),a("c1df")),n=a.n(o),c=a("a0e0"),_=a("f51e"),p={components:{prepaidList:_["default"]},data:function(){var e;return e={title:"新建",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,cyclicity_set_txt_status:!1,unit_gage_txt_status:!1,measure:"/月",post:{id:0,charge_project_id:"",charge_name:"",unit_price:"",rate:"",not_house_rate:"100",fees_type:1,unit_gage_type:1,unit_gage_txt:"",charge_price:"",is_cyclicity_type_set:0,cyclicity_set:"",bill_create_set:2,bill_arrears_set:2,bill_type:2,is_prepaid:2,charge_valid_time:"",late_fee_reckon_day:"",late_fee_top_day:"",late_fee_rate:"",status:"",measure_unit:"元/度",rule_digit:"2",park_charge_id:"",market_price:""},fees_type:1,show:{is_fees_type:!1,is_charge_price:!1,is_cyclicity_type_set:!1,is_bill_create_set:!1,is_bill_arrears_set:!1,is_bill_type:!1,is_unit_price:!1,is_rate:!1,is_prepaid_disabled:!1,is_prepaid_button:!1,is_unit_gage:!1,park_numbers_judge:!1},cycle_array:[],arrears_array:[],is_disabled:!1,isOpen:!1,dateValue:null,date_status:"date",dateFormat:"YYYY-MM-DD",isSpecial:!0,isSpecialSelect:!1,chargeNumber:[],chargeProject:[],subjectId:"请选择科目",charge_project_id:"请选择项目",isShow:!0,durationList:[{id:1,name:"一"}],charge_time_list:[{title:"15分钟",value:15},{title:"30分钟",value:30},{title:"45分钟",value:45},{title:"1小时",value:60}],duration_time_list:[{value:"0:00",status:!0},{value:"0:30",status:!0},{value:"1:00",status:!0},{value:"1:30",status:!0},{value:"2:00",status:!0},{value:"2:30",status:!0},{value:"3:00",status:!0},{value:"3:30",status:!0},{value:"4:00",status:!0},{value:"4:30",status:!0},{value:"5:00",status:!0},{value:"5:30",status:!0},{value:"6:00",status:!0},{value:"6:30",status:!0},{value:"7:00",status:!0},{value:"7:30",status:!0},{value:"8:00",status:!0},{value:"8:30",status:!0},{value:"9:00",status:!0},{value:"9:30",status:!0},{value:"10:00",status:!0},{value:"10:30",status:!0},{value:"11:00",status:!0},{value:"11:30",status:!0},{value:"12:00",status:!0},{value:"12:30",status:!0},{value:"13:00",status:!0},{value:"13:30",status:!0},{value:"14:00",status:!0},{value:"14:30",status:!0},{value:"15:00",status:!0},{value:"15:30",status:!0},{value:"16:00",status:!0},{value:"16:30",status:!0},{value:"17:00",status:!0},{value:"17:30",status:!0},{value:"18:00",status:!0},{value:"18:30",status:!0},{value:"19:00",status:!0},{value:"19:30",status:!0},{value:"20:00",status:!0},{value:"20:30",status:!0},{value:"21:00",status:!0},{value:"21:30",status:!0},{value:"22:00",status:!0},{value:"22:30",status:!0},{value:"23:00",status:!0},{value:"23:30",status:!0},{value:"24:00",status:!0}],unifiedVal:null,dealDurationTimeList:[],needSubmitArr:[],duration_money_list:[{title:"尖",value:1},{title:"峰",value:2},{title:"平",value:3},{title:"谷",value:4}],give_cycle_list:[{value:"1"},{value:"3"},{value:"6"},{value:"12"},{value:"24"},{value:"自定义"}],give_cycle_date:[{id:1,name:"按年生成"},{id:2,name:"按月生成"},{id:3,name:"按日生成"}],pile:{id:"",charge_project_id:"",charge_time:"",bill_create_set:2,charge_name:"",charge_type:1,charge_money:"",charge_price:"",give_cycle_type:"",give_cycle_datetype:3,bill_type:1,charge1_name:"尖",charge2_name:"峰",charge3_name:"平",charge4_name:"谷",charge1_ele:"0.0000",charge2_ele:"0.0000",charge3_ele:"0.0000",charge4_ele:"0.0000",charge1_serve:"0.0000",charge2_serve:"0.0000",charge3_serve:"0.0000",charge4_serve:"0.0000",duration_time_start:[""],duration_time_end:[""],duration_money:[""],timing_pile:1},showUnified:!0,parking:{id:"",charge_project_id:"",fees_type:3,charge_time:"",bill_create_set:2,charge_name:"",charge_type:1,charge_money:"",free_time:"",max_charge_money:"",first_free_time:"",first_charge_money:"",charge_price:"",give_cycle_type:"",give_cycle_datetype:3,bill_type:1,is_prepaid:2,duration_time:[""],duration_money:[""],charge_set:[],free_time_no_count:0,charge_type5_set:2,hour_once_fee:24},custom_give_cycle:!1,park_charge_type_show:1,project_type:""},Object(l["a"])(e,"cycle_array",[{key:1,value:"按日生成"},{key:2,value:"按月生成"},{key:3,value:"按年生成"}]),Object(l["a"])(e,"maxCount",""),Object(l["a"])(e,"charge_project_name","请选择项目"),Object(l["a"])(e,"subjectName","请选择科目"),Object(l["a"])(e,"digit_type",1),Object(l["a"])(e,"digit_type_txt","四舍五入"),Object(l["a"])(e,"fees_type2_show",!0),Object(l["a"])(e,"copy_rule_id",0),Object(l["a"])(e,"is_grapefruit_prepaid",0),Object(l["a"])(e,"is_have_prepaid",1),Object(l["a"])(e,"project_cycle_type",0),Object(l["a"])(e,"park_sys_type",""),Object(l["a"])(e,"park24hour_fee",[[],[],[],[],[],[],[],[]]),e},mounted:function(){this.dealDurationTimeList.push({start:this.duration_time_list,end:[]}),this.needSubmitArr.push({start:null,end:null,price:0})},methods:{moment:n.a,selectYear:function(e,t){this.dateValue=e,this.isOpen=!1,console.log(e,t)},onOpenChange:function(e,t){this[t]=e,console.log(this.dateValue)},unitGageChange:function(e){var t=e.target.value;this.unit_gage_txt_status=2==t},feesTypeChange:function(e){var t=e.target.value;if(this.show.is_unit_gage=1!=t&&5!=t,this.fees_type=1*t,1==this.is_grapefruit_prepaid)switch(1*this.post.bill_create_set){case 1:this.measure="/日",2==this.fees_type&&(this.measure="1/日");break;case 2:this.measure="/月",2==this.fees_type&&(this.measure="1/月");break;case 3:this.measure="/年",2==this.fees_type&&(this.measure="12/月");break}},onChange_is_prepaid:function(e){var t=e.target.value;this.show.is_prepaid_button=1==t},onFeeTimeChange:function(e){console.log(e),e.target.checked?this.parking.free_time_no_count=1:this.parking.free_time_no_count=0},onChargeTypeRadioChange:function(e){console.log(e)},prepaidList:function(e){},handleUnitPrice:function(e){e=e.toString(),e=e.replace(/^\./g,""),e=e.replace(/[^\d.]/g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(/^(\-)*(\d+)\.(\d\d\d\d).*$/,"$1$2.$3"),this.post.unit_price=e,console.log(e)},cyclicityTypeChange:function(e){var t=e.target.value;this.cyclicity_set_txt_status=1==t},cycleTypeChange:function(e){"自定义"==e?(this.custom_give_cycle=!0,this.parking.give_cycle_type=""):this.custom_give_cycle=!1},cycleDateChange:function(e){console.log("cycleDateChange===>",e)},chargingrulesChange:function(e){this.parking={id:this.parking.id,charge_project_id:this.parking.charge_project_id,fees_type:e.target.value,charge_time:"",bill_create_set:2,charge_name:"",charge_type:1,charge_money:"",free_time:"",max_charge_money:"",first_free_time:"",first_charge_money:"",charge_price:"",give_cycle_type:"",give_cycle_datetype:3,bill_type:1,is_prepaid:2,duration_time:[""],duration_money:[""],charge_set:[],free_time_no_count:0,charge_type5_set:2,hour_once_fee:24},this.park_charge_type_show=1},billCreateSetChange:function(e){switch(this.post.bill_create_set=e,this.parking.bill_create_set=e,e){case 1:this.measure="/日",1==this.is_grapefruit_prepaid&&(2==this.fees_type&&(this.measure="1/日"),this.is_have_prepaid=0,this.show.is_prepaid_button=!1);break;case 2:this.measure="/月",this.is_have_prepaid=1,1==this.is_grapefruit_prepaid&&2==this.fees_type&&(this.measure="1/月"),1*this.post.is_prepaid==1&&(this.show.is_prepaid_button=!0);break;case 3:this.measure="/年",this.is_have_prepaid=1,1==this.is_grapefruit_prepaid&&2==this.fees_type&&(this.measure="12/月"),1*this.post.is_prepaid==1&&(this.show.is_prepaid_button=!0);break}},billArrearsSetChange:function(e){this.post.bill_arrears_set=e},add:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;console.log(t,i),this.title="添加",this.visible=!0,this.fees_type2_show=!0,this.is_have_prepaid=1,this.park_charge_type_show=1,this.getChargeOtherConfigInfo(),this.iniPark24HourFee(),0===t&&"special"===a?(this.copy_rule_id=0,this.subjectName="请选择科目",this.charge_project_name="请选择项目",this.getChargeNumber(),this.isSpecial=!1,this.isSpecialSelect=!0):(t>0&&(this.charge_project_id=t,this.parking.charge_project_id=t),i&&(this.project_type=i),"public_electric"!=this.project_type&&"public_water"!=this.project_type||(this.fees_type2_show=!1),console.log("收费项id=========",t),this.cyclicity_set_txt_status=!1,this.unit_gage_txt_status=!1,this.is_disabled=!1,this.isOpen=!1,this.dateValue=null,this.post={id:0,charge_project_id:"",charge_name:"",unit_price:"",rate:"",not_house_rate:"100",fees_type:1,unit_gage_type:1,unit_gage_txt:"",charge_price:"",is_cyclicity_type_set:0,cyclicity_set:"",bill_create_set:2,bill_arrears_set:2,bill_type:2,is_prepaid:2,charge_valid_time:"",late_fee_reckon_day:"",late_fee_top_day:"",late_fee_rate:"",status:"",measure_unit:"元/度",rule_digit:2,park_charge_id:"",market_price:""},this.measure="/月",this.confirmLoading=!0,this.request(c["a"].checkChargeRule,{charge_project_id:t}).then((function(t){t&&(e.show=t,e.charge_time_list=t.charge_time,t.titleName&&(e.title="添加 "+t.titleName+" 的标准"),void 0!=t.is_grapefruit_prepaid&&t.is_grapefruit_prepaid>0&&(e.is_grapefruit_prepaid=t.is_grapefruit_prepaid))})),this.request(c["a"].ChargeRuleBillParam).then((function(t){t&&(e.cycle_array=t.cycle_array,e.arrears_array=t.arrears_array,void 0!=t.digit_type&&t.digit_type>0&&(e.digit_type=t.digit_type,e.digit_type_txt=t.digit_type_txt),void 0!=t.is_grapefruit_prepaid&&t.is_grapefruit_prepaid>0&&(e.is_grapefruit_prepaid=t.is_grapefruit_prepaid))})),this.copy_rule_id=s,void 0!=this.copy_rule_id&&this.copy_rule_id>0&&this.getEditInfo(),this.confirmLoading=!1),console.log(this.isSpecial,this.isSpecialSelect,this.project_type)},iniPark24HourFee:function(){this.park24hour_fee=[[],[],[],[],[],[],[],[]];for(var e=0;e<24;e++){var t=e+1,a={index:e,hour:t,fee:t},i=e/3;i=i<1?0:Math.floor(i),this.park24hour_fee[i].push(a)}console.log(this.park24hour_fee)},edit:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log("id",e),this.getChargeOtherConfigInfo(),this.title="编辑",this.visible=!0,this.parking.id=e,this.copy_rule_id=0,this.confirmLoading=!0,this.is_have_prepaid=1,this.park_charge_type_show=1,this.project_type=a,this.post={id:e,charge_project_id:"",charge_name:"",unit_price:"",rate:"",not_house_rate:"100",fees_type:1,unit_gage_type:1,unit_gage_txt:"",charge_price:"",is_cyclicity_type_set:0,cyclicity_set:"",bill_create_set:2,bill_arrears_set:2,bill_type:2,is_prepaid:2,charge_valid_time:"",late_fee_reckon_day:"",late_fee_top_day:"",late_fee_rate:"",status:"",measure_unit:"元/度",rule_digit:2,park_charge_id:"",market_price:""},this.request(c["a"].ChargeRuleBillParam).then((function(e){e&&(t.cycle_array=e.cycle_array,t.arrears_array=e.arrears_array,void 0!=e.digit_type&&e.digit_type>0&&(t.digit_type=e.digit_type,t.digit_type_txt=e.digit_type_txt),void 0!=e.is_grapefruit_prepaid&&e.is_grapefruit_prepaid>0&&(t.is_grapefruit_prepaid=e.is_grapefruit_prepaid))})),this.getEditInfo()},handleSubmit:function(){var e=this,t=!1,a=new Date(this.dateValue),i=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds(),s=this.form.validateFields;if(this.confirmLoading=!0,this.post.id>0&&this.is_disabled)return this.$message.success("编辑成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.subjectName="请选择科目",e.charge_project_name="请选择项目",e.project_type="",e.id="0",e.confirmLoading=!1,e.$emit("ok")}),1500),!1;if(1*this.parking.fees_type==3&&"park_new"==this.project_type){var l=c["a"].ChargeRuleAdd;if(this.parking.id>0&&(l=c["a"].ChargeRuleSub),""==this.parking.charge_project_id)return this.confirmLoading=!1,void this.$message.warn("请选择收费项目");if(""==this.parking.charge_name)return this.confirmLoading=!1,void this.$message.warn("收费标准名称不能为空");if(""==this.parking.charge_type)return this.confirmLoading=!1,void this.$message.warn("收费类型不能为空");if(this.durationList.map((function(a,i){""!=e.parking.duration_money[i]&&""!=e.parking.duration_time[i]||(t=!0)})),1==this.park_charge_type_show){if(t)return this.confirmLoading=!1,void this.$message.warn("费用设置时长和金额都不能为空");if(this.parking.charge_set=[],this.parking.charge_set[0]=this.parking.duration_time,this.parking.charge_set[1]=this.parking.duration_money,""==this.parking.charge_time||""==this.parking.charge_money)return this.confirmLoading=!1,this.$message.warn("计算步长不能为空"),!1}else if(4==this.park_charge_type_show){var o=[],n=0,_=!1,p="";if(this.park24hour_fee.map((function(e,t){_||e.map((function(e,t){if(e.fee=1*e.fee,e.fee<=0)return _=!0,p="第"+(n+1)+"小时费用设置有误！",!1;if(o.length>0){var a=n-1;if(e.fee<1*o[a].fee)return _=!0,p="第"+(n+1)+"小时费用比第"+n+"费用小，请重新设置！",!1}o.push(e),console.log(o,n),n++}))})),_)return this.confirmLoading=!1,this.$message.warn(p),!1;this.parking.park24hour_fee=o}else if(""==this.parking.max_charge_money)return this.confirmLoading=!1,this.$message.warn("收费金额不能为空!"),!1;if(null==this.dateValue)return this.confirmLoading=!1,this.$message.warn("请选择费用标准生效时间"),!1;this.parking.charge_valid_time=i;var d=Math.max.apply(Math,Object(r["a"])(this.parking.duration_time));this.maxCount=d,this.request(l,{post:this.parking}).then((function(t){e.parking.id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.subjectName="请选择科目",e.charge_project_name="请选择项目",e.project_type="",e.id="0",e.confirmLoading=!1,e.durationList=[{id:1,name:"一"}],e.clearParkingForm(),e.$emit("ok")}),1500)})).catch((function(t){e.confirmLoading=!1}))}else if(1*this.parking.fees_type==4&&"park_new"==this.project_type){if(""==this.parking.charge_project_id)return this.confirmLoading=!1,void this.$message.warn("请选择收费项目");if(""==this.parking.charge_name)return this.confirmLoading=!1,void this.$message.warn("收费标准名称不能为空");if(""==this.parking.charge_price)return this.confirmLoading=!1,void this.$message.warn("收费金额不能为空");if(null==this.dateValue)return this.confirmLoading=!1,this.$message.warn("请选择费用标准生效时间"),!1;this.parking.charge_valid_time=i;var u=c["a"].ChargeRuleAdd;this.parking.id>0&&(u=c["a"].ChargeRuleSub),this.request(u,{post:this.parking}).then((function(t){e.parking.id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.subjectName="请选择科目",e.charge_project_name="请选择项目",e.project_type="",e.id="0",e.visible=!1,e.confirmLoading=!1,e.clearParkingForm(),e.$emit("ok")}),1500)})).catch((function(t){e.confirmLoading=!1}))}else if("pile"==this.project_type){if(""==this.charge_project_id)return this.confirmLoading=!1,void this.$message.warn("请选择收费项目");if(this.pile.charge_project_id=this.charge_project_id,""==this.pile.charge_name)return this.confirmLoading=!1,void this.$message.warn("收费标准名称不能为空");if(!this.pile.charge1_ele||!this.pile.charge1_serve||!this.pile.charge2_ele||!this.pile.charge2_serve||!this.pile.charge3_ele||!this.pile.charge3_serve||!this.pile.charge4_ele||!this.pile.charge4_serve)return this.confirmLoading=!1,void this.$message.warn("请完善加个类别");var h=!0;if(this.needSubmitArr.map((function(e){null!=e.end&&null!=e.start&&null!=e.end||(h=!1)})),!h)return this.confirmLoading=!1,void this.$message.warn("请完善价格设置内容");if(this.showUnified&&!this.unifiedVal)return this.confirmLoading=!1,void this.$message.warn("请完善价格设置内容");if(this.pile.price_set_list=this.needSubmitArr,this.showUnified?this.pile.price_set_value=this.unifiedVal:this.pile.price_set_value=-1,null==this.dateValue)return this.confirmLoading=!1,this.$message.warn("请选择费用标准生效时间"),!1;this.pile.charge_valid_time=i;var m=c["a"].ChargeRuleAdd;this.parking.id>0&&(m=c["a"].ChargeRuleSub),this.request(m,{post:this.pile}).then((function(t){e.parking.id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.subjectName="请选择科目",e.charge_project_name="请选择项目",e.project_type="",e.id="0",e.visible=!1,e.confirmLoading=!1,e.clearParkingForm(),e.$emit("ok")}),1500)})).catch((function(t){e.confirmLoading=!1}))}else this.confirmLoading=!0,s((function(t,a){if(console.log("values",a),t)e.confirmLoading=!1;else{if("qrcode"==e.project_type&&""!==a.post.market_price&&null!==a.post.market_price&&a.post.market_price<a.post.charge_price)return e.confirmLoading=!1,e.$message.warn("市场价不能小于收费金额！"),!1;if(void 0==a.post)return e.confirmLoading=!1,e.$message.warn("请设置好收费项目！"),!1;var s=c["a"].ChargeRuleAdd;if(e.post.id>0)s=c["a"].ChargeRuleSub,a.post.id=e.post.id;else{if("请选择项目"==e.charge_project_id||""==e.charge_project_id||"0"==e.charge_project_id||0==e.charge_project_id)return e.confirmLoading=!1,e.$message.warn("请选择收费项目"),!1;a.post.charge_project_id=e.charge_project_id}if(a.post.bill_create_set=e.post.bill_create_set,a.post.bill_arrears_set=e.post.bill_arrears_set,!i)return e.confirmLoading=!1,e.$message.error("请选择费用标准生效时间"),!1;a.post.charge_valid_time=i,void 0==a.post.rule_digit||null===a.post.rule_digit||"null"==a.post.rule_digit?a.post.rule_digit="":(a.post.rule_digit>0&&a.post.rule_digit<5||(a.post.rule_digit=""),a.post.rule_digit=a.post.rule_digit.toString().substr(0,1)),a.post.copy_rule_id=e.copy_rule_id,void 0!=a.post.is_prepaid&&a.post.is_prepaid||(a.post.is_prepaid=2),e.request(s,a).then((function(t){e.post.id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.subjectName="请选择科目",e.charge_project_name="请选择项目",e.project_type="",e.id="0",e.visible=!1,e.confirmLoading=!1,console.log(123),e.$emit("ok")}),1500),console.log(345)})).catch((function(t){e.confirmLoading=!1}))}}))},clearParkingForm:function(){this.parking={id:"",charge_project_id:"",fees_type:3,charge_time:"",bill_create_set:2,charge_name:"",charge_type:1,charge_money:"",free_time:"",max_charge_money:"",first_free_time:"",first_charge_money:"",charge_price:"",give_cycle_type:"",give_cycle_datetype:3,bill_type:1,duration_time:[""],duration_money:[""],charge_set:[],park_charge_id:""},this.dealDurationTimeList=[],this.needSubmitArr=[],this.dealDurationTimeList.push({start:this.duration_time_list,end:[]}),this.needSubmitArr.push({start:null,end:null,price:0}),this.chargeProject=[],this.chargeNumber=[],this.dateValue=null,this.showUnified=!0,this.pile.price_set_list=[],this.pile.price_set_value=null},handleCancel:function(){var e=this;this.visible=!1,this.subjectName="请选择科目",this.charge_project_name="请选择项目",this.project_type="",this.measure="/月",this.copy_rule_id=0,this.clearParkingForm(),setTimeout((function(){e.id="0",e.form=e.$form.createForm(e)}),500)},handleSelectChange:function(){1==this.parking.charge_type?this.park_charge_type_show=1:4==this.parking.charge_type||5==this.parking.charge_type?this.park_charge_type_show=this.parking.charge_type:this.park_charge_type_show=2,this.parking.max_charge_money="",console.log("charge_type5_set",this.parking.charge_type5_set),console.log("hour_once_fee",this.parking.hour_once_fee)},getEditInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";console.log("id_get",this.post.id);var a={id:this.post.id,type:t};this.post.id<1&&this.copy_rule_id>0&&(a.id=this.copy_rule_id),this.request(c["a"].ChargeRuleEdit,a).then((function(t){if(t.charge_time&&(e.charge_time_list=t.charge_time),e.copy_rule_id>0?e.title="从"+e.show.titleName+"标准【"+t.edit_data.charge_name+"】复制数据添加":t.show_data&&(e.show=t.show_data,void 0!=t.show_data.charge_type&&(e.project_type=t.show_data.charge_type),e.show.titleName&&(e.title="编辑 "+e.show.titleName,t.edit_data.charge_name&&(e.title=e.title+" 的标准【"+t.edit_data.charge_name+"】"))),void 0!=t.is_grapefruit_prepaid&&t.is_grapefruit_prepaid>0&&(e.is_grapefruit_prepaid=t.is_grapefruit_prepaid),t.edit_data){if(e.post.id<1&&e.copy_rule_id>0&&(t.edit_data.id=0),e.post=t.edit_data,e.fees_type=t.edit_data.fees_type,e.charge_project_id=t.edit_data.charge_project_id,e.unifiedVal=1*t.edit_data.price_set_value,t.edit_data.price_set_list?e.needSubmitArr=t.edit_data.price_set_list:e.needSubmitArr=[],e.pile=t.edit_data,e.pile.charge_name=t.edit_data.charge_name,e.dealDurationTimeList=[],e.needSubmitArr.map((function(t){e.dealDurationTimeList.push({start:e.duration_time_list,end:e.duration_time_list})})),e.parking={id:t.edit_data.id,charge_project_id:t.edit_data.charge_project_id,fees_type:t.edit_data.fees_type,charge_time:t.edit_data.charge_time,bill_create_set:t.edit_data.bill_create_set,charge_name:t.edit_data.charge_name,charge_type:t.edit_data.charge_type,charge_money:t.edit_data.charge_money,free_time:t.edit_data.free_time,max_charge_money:t.edit_data.max_charge_money,first_free_time:t.edit_data.first_free_time,first_charge_money:t.edit_data.first_charge_money,charge_price:t.edit_data.charge_price,give_cycle_type:t.edit_data.give_cycle_type,give_cycle_datetype:t.edit_data.give_cycle_datetype,bill_type:t.edit_data.bill_type,duration_money:t.edit_data.duration_money,duration_time:t.edit_data.duration_time,park_charge_id:t.edit_data.park_charge_id,free_time_no_count:0,charge_type5_set:2,hour_once_fee:24},1==t.edit_data.charge_type?e.park_charge_type_show=1:e.park_charge_type_show=2,t.edit_data.version&&1==t.edit_data.version&&(4==t.edit_data.charge_type&&(e.park24hour_fee=t.edit_data.charge_set),e.park_charge_type_show=t.edit_data.charge_type,e.parking.free_time_no_count=t.edit_data.free_time_no_count,e.parking.charge_type5_set=t.edit_data.charge_type5_set>0?t.edit_data.charge_type5_set:2,e.parking.hour_once_fee=t.edit_data.hour_once_fee>0?t.edit_data.hour_once_fee:24),console.log(e.park24hour_fee),t.edit_data.charge_set&&t.edit_data.charge_set.length>0){var a=[],i=[],s=[];t.edit_data.charge_set.map((function(e,t){a.push(e.money),i.push(e.time),s.push({id:t+1,name:"charge_set"+t})})),e.parking.duration_money=a,e.parking.duration_time=i,e.durationList=s,e.maxCount=Math.max.apply(Math,i)}else e.parking.duration_money=[""],e.parking.duration_time=[""];3!=e.parking.fees_type&&4!=e.parking.fees_type||(e.project_type="park_new"),2==t.edit_data.is_prepaid&&(e.show.is_prepaid_button=!1),e.billCreateSetChange(t.edit_data.bill_create_set),e.dateValue=n()(t.edit_data.charge_valid_time,e.dateFormat)}"public_electric"==e.project_type||"public_water"==e.project_type?e.fees_type2_show=!1:e.fees_type2_show=!0,t.edit_status&&(e.copy_rule_id>0||(e.is_disabled=t.edit_status.is_disabled,e.is_disabled&&(e.show.is_prepaid_disabled=!0),e.unit_gage_txt_status=t.edit_status.unit_gage_txt_status,e.cyclicity_set_txt_status=t.edit_status.cyclicity_set_txt_status)),e.confirmLoading=!1}))},handleChargeNumberChange:function(e){var t=this;this.charge_project_name="请选择项目",this.charge_project_id=0,this.parking.charge_project_id=0,this.chargeNumber.map((function(a){a.name==e&&(console.log(e+" 收费科目=>",a),t.project_type=a.type,t.parking.subjectId=a.id,t.subjectId=a.id,"public_electric"==t.project_type||"public_water"==t.project_type?t.fees_type2_show=!1:t.fees_type2_show=!0,t.getChargeProject(a.id))})),this.parking.fees_type=3},getChargeNumber:function(){var e=this;this.request(c["a"].getChargeSubject).then((function(t){e.chargeNumber=t}))},getChargeOtherConfigInfo:function(){var e=this;this.request(c["a"].getChargeOtherConfigInfo).then((function(t){t.park_sys_type&&(e.park_sys_type=t.park_sys_type)}))},getChargeProject:function(e){var t=this,a={subject_id:e};this.request(c["a"].getChargeProject,a).then((function(e){t.chargeProject=e}))},handleChargeProjectChange:function(e){var t=this;this.isSpecial=!0,this.chargeProject.map((function(a){a.name==e&&(t.charge_project_name=e,t.charge_project_id=a.id,void 0!=a.type&&(t.project_cycle_type=a.type),t.parking.charge_project_id=a.id,t.add(a.id,"normal",t.project_type))}))},detail:function(e){var t=this;this.title="查看",this.visible=!0,this.post.id=e,this.confirmLoading=!0,this.isShow=!1,this.request(c["a"].ChargeRuleBillParam).then((function(e){e&&(t.cycle_array=e.cycle_array,t.arrears_array=e.arrears_array)})),this.getEditInfo("del")},duration_add:function(){""!=this.parking.duration_time[this.durationList.length-1]&&""!=this.parking.duration_money[this.durationList.length-1]?(this.durationList.push({id:this.durationList.length,name:"name"+this.durationList.length}),this.parking.duration_time.push(""),this.parking.duration_money.push("")):this.$message.warn("请先填写当前行的时长和金额")},duration_reduce:function(e){this.durationList.splice(e,1),this.parking.duration_time.splice(e,1),this.parking.duration_money.splice(e,1)},chargeTimeChange:function(e){this.parking.charge_time=this.charge_time_list[e].value;var t=Math.max.apply(Math,Object(r["a"])(this.parking.duration_time));this.maxCount=t},pileDurationMoney:function(e,t){this.needSubmitArr[t].price=e},pileDurationTime:function(e,t,a){console.log(e,t,a);var i=this;if(i.currentIndex=t,"start"==a)i.needSubmitArr[t].start=e,i.needSubmitArr[t].end=null,i.dealDurationTimeList[t].end=[],i.duration_time_list.map((function(a,s){var r={};r.value=a.value,s<=e?(r.status=!1,i.dealDurationTimeList[t].end.push(r)):(r.status=!0,i.dealDurationTimeList[t].end.push(r))}));else{if(i.needSubmitArr[t].end=e,console.log("that.dealDurationTimeList==>",i.dealDurationTimeList),i.needSubmitArr.map((function(e,a){a>t&&(e.start=null,e.end=null,e.price=null)})),i.dealDurationTimeList.map((function(e,a){a>t&&(e.start=[],e.end=[])})),i.dealDurationTimeList.length>t+1){var s=[];i.duration_time_list.map((function(t,a){var i={};i.value=t.value,i.status=!(a<e),s.push(i)})),i.dealDurationTimeList[t+1].start=s}var r=[];i.needSubmitArr.map((function(e,t){r.push(e.end-e.start)}));var l=r.reduce((function(e,t){return e+t}));i.showUnified=48!=l}},handleSelectPileChange:function(e,t){console.log(e,t)},pile_duration_add:function(){var e=this;if(console.log(e.needSubmitArr[e.currentIndex],e.needSubmitArr),null!=e.needSubmitArr[e.needSubmitArr.length-1].start&&null!=e.needSubmitArr[e.needSubmitArr.length-1].end&&null!=e.needSubmitArr[e.needSubmitArr.length-1].price){e.dealDurationTimeList.push({start:[],end:[]}),e.needSubmitArr.push({start:null,end:null,price:null}),e.duration_time_list.map((function(e,t){e.status=!0}));var t=[];e.needSubmitArr.map((function(e,a){e.end&&t.push(e.end)})),console.log("arr===>",t);var a=Math.max.apply(Math,t);console.log("maxVal===>",a);var i=[];e.duration_time_list.map((function(e,t){var s={};s.value=e.value,s.status=!(t<a),i.push(s)})),e.dealDurationTimeList[e.needSubmitArr.length-1].start=i}else this.$message.warn("请先填写当前行的时长和金额")},pile_duration_reduce:function(e){var t=this;t.needSubmitArr[e].start=null,t.needSubmitArr[e].end=null,t.needSubmitArr[e].price=null,t.dealDurationTimeList[e].start=[],t.dealDurationTimeList[e].end=[],t.dealDurationTimeList.splice(e,1),t.needSubmitArr.splice(e,1);var a=[];t.needSubmitArr.map((function(e,t){a.push(e.end-e.start)}));var i=a.reduce((function(e,t){return e+t}));t.showUnified=48!=i}}},d=p,u=(a("e3d9"),a("2877")),h=Object(u["a"])(d,i,s,!1,null,"2213226a",null);t["default"]=h.exports},"8e1c":function(e,t,a){},"8eec":function(e,t,a){"use strict";a("1f05")},aa28:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{staticClass:"prepaid_info",attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,required:!0}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("预缴时间选择")]),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.cycle",{initialValue:e.post.cycle,rules:[{required:!0,message:e.L("请选择预缴时间！")}]}],expression:"['post.cycle',{ initialValue: post.cycle, rules: [{ required: true, message: L('请选择预缴时间！') }] }]"}],staticStyle:{width:"300px"},attrs:{disabled:e.is_disabled},on:{change:e.handleChangeCycle}},e._l(e.cycle_info,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1),e.cycle_txt_status?a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.cycle_param",{initialValue:e.post.cycle_param}],expression:"['post.cycle_param',{ initialValue: post.cycle_param}]"}],staticStyle:{width:"130px","margin-left":"10px"},attrs:{disabled:e.is_disabled,min:1,placeholder:"请输入时间数"}}):e._e(),e._v("   "+e._s(e.bill_date_str)+" ")],1),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("优惠模式")]),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.type",{initialValue:e.post.type,rules:[{required:!0,message:e.L("请选择优惠模式！")}]}],expression:"['post.type',{ initialValue: post.type, rules: [{ required: true, message: L('请选择优惠模式！') }] }]"}],staticStyle:{width:"300px"},on:{change:e.discountType}},e._l(e.type_info,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1),e.type_1?a("a-form-item",{attrs:{label:"",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"以百分比计算，请输入0-100。例如输入80，则按80%进行收取，即预缴2个月100元，则折扣后仅需缴纳80元，优惠掉20元"}},[a("a-col",{attrs:{span:18}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("折扣率")]),a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.rate",{initialValue:e.post.rate,rules:[{required:!0,message:e.L("请输入折扣率！")}]}],expression:"['post.rate',{ initialValue: post.rate, rules: [{ required: true, message: L('请输入折扣率！') }] }] "}],staticStyle:{width:"110px"},attrs:{min:0,max:100,formatter:function(e){return e+" %"},placeholder:"请输入折扣率"}})],1),a("a-col",{attrs:{span:6}})],1):e._e(),e.type_2?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,required:!0}},[a("span",{staticClass:"label_col ant-form-item-required"},[e._v("赠送时间")]),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.give_cycle_param",{initialValue:e.post.give_cycle_param}],expression:"['post.give_cycle_param',{ initialValue: post.give_cycle_param }]"}],staticStyle:{width:"100px"},on:{change:e.handleChange}},[e._v("> "),e._l(e.give_cycle_param_info,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])}))],2),e.give_cycle_txt_status?a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.give_cycle_txt",{initialValue:e.post.give_cycle_txt}],expression:"['post.give_cycle_txt',{ initialValue: post.give_cycle_txt}]"}],staticStyle:{width:"130px","margin-left":"10px"},attrs:{min:1,max:100,placeholder:"请输入赠送时间"}}):e._e(),e._v("   "+e._s(e.bill_date_str)+" ")],1):e._e(),e.type_3?a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"类似于线下送礼物时候的备注，比如缴费统一赠送小礼品之类的"}},[a("a-col",{attrs:{span:18}},[a("span",{staticClass:"label_col"},[e._v("自定义文本")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.custom_txt",{initialValue:e.post.custom_txt,rules:[{required:!0,message:e.L("请输入自定义文本！")}]}],expression:"['post.custom_txt',{ initialValue: post.custom_txt ,rules: [{ required: true, message: L('请输入自定义文本！') }]}]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入"}})],1),a("a-col",{attrs:{span:6}})],1):e._e(),a("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",{staticClass:"label_col"},[e._v("状态")]),a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.status",{initialValue:e.post.status}],expression:"['post.status', {initialValue:post.status}]"}]},[a("a-radio",{attrs:{value:1}},[e._v(" 开启 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 禁止 ")])],1)],1)],1)],1)],1)},s=[],r=a("a0e0"),l=(a("567c"),{components:{},data:function(){return{title:"新建",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),cycle_info:[],type_info:[],give_cycle_param_info:[],visible:!1,post:{id:0,type:"",status:"",rate:"",cycle:"",give_cycle_param:"",give_cycle_txt:"",custom_txt:"",cycle_param:""},give_cycle_txt_status:!1,cycle_txt_status:!1,is_disabled:!1,type_1:!1,type_2:!1,type_3:!1,type_4:!1,bill_date_set:2,bill_date_str:"月"}},mounted:function(){},methods:{handleChange:function(e){this.give_cycle_txt_status=11==e},discountType:function(e){switch(this.type_1=this.type_2=this.type_3=!1,e){case 1:this.type_1=!0;break;case 2:this.type_2=!0;break;case 3:this.type_3=!0;break}},handleChangeCycle:function(e){this.cycle_txt_status=11==e},add:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1?arguments[1]:void 0;this.charge_rule_id=t,this.bill_date_set=a,1==a?this.bill_date_str="日":2==a?this.bill_date_str="月":3==a&&(this.bill_date_str="年"),this.title="添加预缴时间",this.visible=!0,this.is_disabled=!1,this.type_1=!1,this.type_2=!1,this.type_3=!1,this.type_4=!1,this.post={id:0,type:"",status:1,rate:"",cycle:"",give_cycle_param:"",give_cycle_txt:"",custom_txt:"",cycle_param:""},this.give_cycle_txt_status=!1,this.cycle_txt_status=!1,this.request(r["a"].getPrepaidCycle,{charge_rule_id:this.charge_rule_id}).then((function(t){e.cycle_info=t.cycle,e.type_info=t.type,e.give_cycle_param_info=t.give_cycle}))},edit:function(e,t){var a=this;this.bill_date_set=t,1==t?this.bill_date_str="日":2==t?this.bill_date_str="月":3==t&&(this.bill_date_str="年"),this.title="编辑预缴周期",this.visible=!0,this.is_disabled=!1,this.post.id=e,this.imgUrl="",this.getEditInfo(),this.type_1=!1,this.type_2=!1,this.type_3=!1,this.type_4=!1,this.request(r["a"].getPrepaidCycle,{charge_rule_id:this.charge_rule_id}).then((function(e){a.cycle_info=e.cycle,a.type_info=e.type,a.give_cycle_param_info=e.give_cycle}))},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){if(t)e.confirmLoading=!1;else{var i=r["a"].ChargePrepaidAdd;e.post.id>0?(i=r["a"].ChargePrepaidSub,a.post.id=e.post.id):a.post.charge_rule_id=e.charge_rule_id,e.request(i,a.post).then((function(t){e.post.id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,console.log(123),e.$emit("ok")}),1500),console.log(345)})).catch((function(t){e.confirmLoading=!1}))}}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.post.id=0,e.form=e.$form.createForm(e)}),500)},getEditInfo:function(){var e=this;this.confirmLoading=!0,this.request(r["a"].ChargePrepaidEdit,{id:this.post.id}).then((function(t){switch(e.post={id:t.id,type:t.type,rate:t.rate,cycle:t.cycle,cycle_param:t.cycle_param,give_cycle_param:t.give_cycle_param,give_cycle_txt:t.give_cycle_txt,custom_txt:t.custom_txt,status:t.status},t.type){case 1:e.type_1=!0;break;case 2:e.type_2=!0;break;case 3:e.type_3=!0;break}e.is_disabled=t.is_disabled,e.give_cycle_txt_status=t.give_cycle_txt_status,e.cycle_txt_status=t.cycle_txt_status,e.confirmLoading=!1,t.charge_rule_id>0&&(e.bill_date_str=t.bill_create_set)}))}}}),o=l,n=(a("d55e"),a("2877")),c=Object(n["a"])(o,i,s,!1,null,"d2b6c064",null);t["default"]=c.exports},be34:function(e,t,a){},d55e:function(e,t,a){"use strict";a("8e1c")},e3d9:function(e,t,a){"use strict";a("be34")},f51e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:1200,footer:null,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("div",{staticClass:"message-suggestions-list-box"},[e.isShow?a("div",{staticClass:"add-box"},[a("a-row",{attrs:{gutter:48}},[1==e.is_grapefruit_prepaid?a("a-col",{staticStyle:{"margin-bottom":"20px"},attrs:{md:8,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.discountAddModel.add(e.charge_rule_id,e.bill_date_set,e.charge_project_id)}}},[e._v(" 创建 ")])],1):a("a-col",{staticStyle:{"margin-bottom":"20px"},attrs:{md:8,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.PopupAddModel.add(e.charge_rule_id,e.bill_date_set)}}},[e._v(" 添加 ")])],1)],1)],1):e._e(),e.is_grapefruit_prepaid<1?a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination,loading:e.loading},on:{change:e.table_change},scopedSlots:e._u([{key:"status",fn:function(t,i){return a("span",{},[2==i.status?a("div",{staticStyle:{color:"red"}},[e._v("禁止")]):e._e(),1==i.status?a("div",{staticStyle:{color:"#1890ff"}},[e._v("开启")]):e._e(),4==i.status?a("div",{staticStyle:{color:"red"}},[e._v("已删除")]):e._e()])}},{key:"standard",fn:function(t,i){return a("span",{},[a("a",[e._v("绑定")])])}},{key:"action",fn:function(t,i){return a("span",{},[e.isShow?a("a",{on:{click:function(t){return e.$refs.PopupEditModel.edit(i.id,e.bill_date_set,e.charge_rule_id)}}},[e._v("编辑")]):e._e(),e.isShow?e._e():a("a",{staticStyle:{color:"#CCCCCC"}},[e._v("编辑")]),e.isShow?a("a-popconfirm",{staticClass:"ant-dropdown-link",staticStyle:{"margin-left":"20px"},attrs:{title:"确认删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.deleteConfirm(i.id)},cancel:e.cancel}},[a("a",{attrs:{href:"#"}},[e._v("删除")])]):e._e()],1)}}],null,!1,2484826166)}):e._e(),1==e.is_grapefruit_prepaid?a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns2,"data-source":e.data2,pagination:e.pagination,loading:e.loading},on:{change:e.table_change},scopedSlots:e._u([{key:"action_opt",fn:function(t,i){return a("span",{},[a("a",{on:{click:function(t){return e.$refs.discountAddModel.edit(i.id,e.charge_rule_id,e.bill_date_set,e.charge_project_id)}}},[e._v("编辑")]),a("a-popconfirm",{staticClass:"ant-dropdown-link",staticStyle:{"margin-left":"20px"},attrs:{title:"确认删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.deleteConfirm(i.id)},cancel:e.cancel}},[a("a",{attrs:{href:"#"}},[e._v("删除")])])],1)}}],null,!1,489034095)}):e._e(),a("discountPrepaidInfo",{ref:"discountAddModel",on:{ok:e.addActive}}),a("discountPrepaidInfo",{ref:"discountAddModel",on:{ok:e.editActive}}),a("prepaidInfo",{ref:"PopupAddModel",on:{ok:e.addActive}}),a("prepaidInfo",{ref:"PopupEditModel",on:{ok:e.editActive}})],1)])},s=[],r=(a("ac1f"),a("841c"),a("a0e0")),l=a("aa28"),o=a("9e6a"),n=[{title:"预缴时间",dataIndex:"cycle",key:"cycle"},{title:"优惠模式",dataIndex:"type_txt",key:"type_txt"},{title:"添加时间",dataIndex:"add_time",key:"add_time"},{title:"状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"action"}}],c=[],_=[{title:"预缴类型",dataIndex:"discount_type_str",key:"discount_type_str"},{title:"预缴时长",dataIndex:"xcontent",key:"xcontent"},{title:"预缴到期时间",dataIndex:"expire_time_str",key:"expire_time_str"},{title:"最后编辑时间",dataIndex:"update_time_str",key:"update_time_str"},{title:"操作",dataIndex:"",key:"",scopedSlots:{customRender:"action_opt"}}],p=[],d={name:"prepaidList",filters:{},components:{prepaidInfo:l["default"],discountPrepaidInfo:o["default"]},data:function(){var e=this;return{reply_content:"",pagination:{current:1,pageSize:10,total:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(e){return"共 ".concat(e," 条")},onShowSizeChange:function(t,a){return e.onTableChange(t,a)},onChange:function(t,a){return e.onTableChange(t,a)}},search:{keyword:"",page:1},form:this.$form.createForm(this),visible:!1,loading:!1,data:c,data2:p,columns:n,columns2:_,title:"",confirmLoading:!1,charge_rule_id:"",bill_date_set:2,isShow:!0,is_grapefruit_prepaid:0,ids:[],charge_project_id:0}},methods:{List:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.title="预缴时间",this.charge_project_id=r,this.loading=!0,1==t&&this.$set(this.pagination,"current",1),console.log("is_grapefruit_prepaid",s),this.bill_date_set=a,this.charge_rule_id=e,void 0!=s&&s>0?(this.isShow=!1,this.is_grapefruit_prepaid=s,this.title="预缴优惠管理",this.getDiscountList()):(this.isShow=i,this.getList())},getDiscountList:function(){var e=this;this.search["bill_date_set"]=this.bill_date_set,this.search["charge_rule_id"]=this.charge_rule_id,this.search["charge_project_id"]=this.charge_project_id,this.search["page"]=this.pagination.current,this.search["limit"]=this.pagination.pageSize,this.request(r["a"].getChargePrepaidDiscountList,this.search).then((function(t){e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data2=t.list,void 0!=t.count&&t.count>0?e.isShow=!1:e.isShow=!0,e.loading=!1,e.confirmLoading=!1,e.visible=!0}))},getList:function(){var e=this;this.search["bill_date_set"]=this.bill_date_set,this.search["charge_rule_id"]=this.charge_rule_id,this.search["charge_project_id"]=this.charge_project_id,this.search["page"]=this.pagination.current,this.search["limit"]=this.pagination.pageSize,this.isShow||(this.search["type"]="del_detail"),this.request(r["a"].ChargePrepaidList,this.search).then((function(t){e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data=t.list,e.is_grapefruit_prepaid=t.is_grapefruit_prepaid?t.is_grapefruit_prepaid:0,e.loading=!1,e.confirmLoading=!1,e.visible=!0}))},onTableChange:function(e,t){this.pagination.current=e,this.pagination.pageSize=t,this.loading=!0,this.is_grapefruit_prepaid>0?this.getDiscountList():this.getList(),console.log("onTableChange==>",e,t)},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.id="0",e.form=e.$form.createForm(e)}),500)},cancel:function(){},deleteConfirm:function(e){var t=this,a=this;a.is_grapefruit_prepaid>0?this.request(r["a"].chargePrepaidDiscountDel,{id:e}).then((function(e){t.getDiscountList(),a.$message.success("删除成功")})):this.request(r["a"].ChargePrepaidDel,{id:e}).then((function(e){t.getList(),a.$message.success("删除成功")}))},addActive:function(e){this.loading=!0,e&&this.ids.push(e),this.is_grapefruit_prepaid>0?this.getDiscountList():this.getList()},editActive:function(e){this.loading=!0,this.is_grapefruit_prepaid>0?this.getDiscountList():this.getList()},table_change:function(e){console.log("e",e),e.current&&e.current>0&&(this.$set(this.pagination,"current",e.current),this.loading=!0,this.is_grapefruit_prepaid>0?this.getDiscountList():this.getList())}}},u=d,h=(a("8eec"),a("2877")),m=Object(h["a"])(u,i,s,!1,null,null,null);t["default"]=m.exports}}]);