(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a1ebeef0"],{2975:function(t,e,a){"use strict";var s={getList:"/real_estate/platform.Process/getList",payNameList:"/real_estate/platform.Process/payNameList",add:"/real_estate/platform.Process/add",edit:"/real_estate/platform.Process/edit",show:"/real_estate/platform.Process/show",delete:"/real_estate/platform.Process/delete",changeSort:"/real_estate/platform.Process/changeSort",getProjectList:"real_estate/platform.Project/getList",addProjectList:"real_estate/platform.Project/add",editProjectList:"real_estate/platform.Project/edit",showProjectList:"real_estate/platform.Project/show",deleteProjectList:"real_estate/platform.Project/delete",getPropertyTypeList:"real_estate/platform.PropertyType/getList",addPropertyTypeList:"real_estate/platform.PropertyType/add",editPropertyTypeList:"real_estate/platform.PropertyType/edit",showPropertyTypeList:"real_estate/platform.PropertyType/show",deletePropertyTypeList:"real_estate/platform.PropertyType/delete",getOtherList:"real_estate/platform.Wish/getOtherList",getWishList:"real_estate/platform.Wish/getList",changeProcess:"real_estate/platform.Wish/changeProcess",changeStatus:"real_estate/platform.Wish/changeStatus",addWish:"real_estate/platform.Wish/add",editWish:"real_estate/platform.Wish/edit",showWish:"real_estate/platform.Wish/show",exportData:"real_estate/platform.Wish/exportData",deleteWish:"real_estate/platform.Wish/delete",getUserList:"real_estate/platform.Wish/getUserList"};e["a"]=s},3059:function(t,e,a){},"563e":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"color-picker"},[a("colorPicker",{staticClass:"color-box",on:{change:t.headleChangeColor},model:{value:t.colorInfo,callback:function(e){t.colorInfo=e},expression:"colorInfo"}}),a("p",{staticClass:"color-name"},[t._v(t._s(t.colorInfo))])],1)},o=[],i={name:"CustomColorPicker",components:{},data:function(){return{colorInfo:""}},props:{color:{type:String,default:"#ffffff"},disabled:{type:Boolean,default:!1}},watch:{color:{handler:function(t){console.log(t),t&&this.$nextTick((function(){this.colorInfo=t}))},immediate:!0}},mounted:function(){this.colorInfo=this.color},methods:{headleChangeColor:function(t){this.$emit("update:color",t)}}},r=i,n=(a("7d1f0"),a("0c7c")),l=Object(n["a"])(r,s,o,!1,null,"0f1938e4",null);e["a"]=l.exports},"7d1f0":function(t,e,a){"use strict";a("bf74")},acad:function(t,e,a){"use strict";a("3059")},bf74:function(t,e,a){},f7d6:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[a("a-tabs",{attrs:{"default-active-key":"1"}},[a("a-tab-pane",{key:"1",attrs:{tab:"跟进阶段配置"}})],1),a("a-row",{staticClass:"center",attrs:{type:"flex",align:"middle"}},[a("div",{staticClass:"btn_list"},[a("a-button",{staticStyle:{margin:"10px 20px"},attrs:{type:"primary"},on:{click:t.addClick}},[t._v(t._s(t.L("新建")))])],1)]),a("a-table",{staticStyle:{background:"#ffffff"},attrs:{columns:t.columns,rowKey:"id","data-source":t.dataList,pagination:t.pagination},scopedSlots:t._u([{key:"sort",fn:function(e,s){return[a("a-input-number",{attrs:{defaultValue:s.sort,min:1},on:{blur:function(e){return t.onSortChange(e,s)}}})]}},{key:"pay_type",fn:function(e){return[a("span",{attrs:{title:e.join("、")}},[t._v(t._s(e.join("、")))])]}},{key:"action",fn:function(e,s){return a("span",{},[a("a",{staticClass:"inline-block",staticStyle:{"margin-right":"10px"},on:{click:function(e){return t.editTicket(s)}}},[t._v(t._s(t.L("编辑")))]),a("a",{staticClass:"inline-block",staticStyle:{color:"red"},on:{click:function(e){return t.delPackage(s)}}},[t._v(t._s(t.L("删除")))])])}}])}),a("a-modal",{attrs:{maskClosable:!1,centered:!0,destroyOnClose:"",width:"30%",title:t.titles},on:{ok:t.handleOk,cancel:function(){return t.is_lodingTrue=!1}},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("div",{staticClass:"newBox"},[a("a-form-model",{ref:"ruleForm",attrs:{rules:t.rules,model:t.formData,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[a("a-input",{attrs:{placeholder:"请输入名称"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("a-form-model-item",{attrs:{label:"步骤顺序",prop:"sort"}},[a("a-input-number",{attrs:{id:"inputNumber",min:1,max:10},model:{value:t.formData.sort,callback:function(e){t.$set(t.formData,"sort",e)},expression:"formData.sort"}})],1),a("a-form-model-item",{attrs:{label:"付款类型",prop:"pay_type"}},[a("a-select",{attrs:{mode:"multiple",size:"default",placeholder:"请选择付款类型"},model:{value:t.formData.pay_type,callback:function(e){t.$set(t.formData,"pay_type",e)},expression:"formData.pay_type"}},t._l(t.paymentTypeList,(function(e){return a("a-select-option",{key:e.id},[t._v(" "+t._s(e.value)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"状态颜色",prop:"font_color"}},[t.is_lodingTrue?a("color-picker",{attrs:{color:t.formData.font_color},on:{"update:color":function(e){return t.$set(t.formData,"font_color",e)}}}):t._e()],1)],1)],1)])],1)},o=[],i=a("2975"),r=a("563e"),n={data:function(){return{labelCol:{span:5},wrapperCol:{span:15},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],sort:[{required:!0,message:"请输入步骤顺序",trigger:"blur"}],pay_type:[{required:!0,message:"请选择付款类型",trigger:"blur"}],font_color:[{required:!0,message:"请点击选择状态颜色值",trigger:"blur"}]},visible:!1,paymentTypeList:[],formData:{name:"",sort:1,pay_type:[],font_color:""},titles:"新建",columns:[{title:this.L("名称"),dataIndex:"name",ellipsis:!0,width:300},{title:this.L("步骤顺序"),dataIndex:"sort",scopedSlots:{customRender:"sort"}},{title:this.L("付款类型"),dataIndex:"pay_type",ellipsis:!0,width:200,scopedSlots:{customRender:"pay_type"}},{title:this.L("更改时间"),dataIndex:"update_time",ellipsis:!0,width:300,scopedSlots:{customRender:"update_time"}},{title:this.L("操作"),scopedSlots:{customRender:"action"}}],dataList:[],pagination:{current:1,total:0,pageSize:10,onChange:this.onPageChange},dataListId:"",types:1,is_lodingTrue:!1}},created:function(){this.getDataList()},components:{ColorPicker:r["a"]},methods:{onSortChange:function(t,e){var a=this;this.request(i["a"].changeSort,{id:e.id,sort:t.target._value}).then((function(t){a.$message.success("修改顺序成功"),a.getDataList()}))},getDataList:function(){var t=this,e={page:this.pagination.current,page_size:this.pagination.pageSize,keywords:this.keywords};this.request(i["a"].getList,e).then((function(e){t.dataList=e.data,t.$set(t.pagination,"total",e.total)}))},onPageChange:function(t,e){this.$set(this.pagination,"current",t),this.getDataList()},addClick:function(){var t=this;this.titles="新建",this.visible=!0,this.is_lodingTrue=!0,this.types=1,this.formData={name:"",sort:1,pay_type:[],font_color:""},this.request(i["a"].payNameList).then((function(e){t.paymentTypeList=e.pay_name_list}))},editTicket:function(t){var e=this;this.titles="编辑",this.types=2,this.visible=!0,this.dataListId=t.id,this.request(i["a"].show,{id:t.id}).then((function(t){e.request(i["a"].payNameList).then((function(a){e.paymentTypeList=a.pay_name_list,e.formData=t,e.is_lodingTrue=!0}))}))},toSetPage:function(t){var e=Math.ceil((this.pagination.total-(1==t?1:this.dataList.length))/this.pagination.pageSize);this.pagination.current=this.pagination.current>e?e:this.pagination.current,this.pagination.current=this.pagination.current<1?1:this.pagination.current},delPackage:function(t){var e=this;this.$confirm({title:"是否删除该流程?",centered:!0,onOk:function(){e.request(i["a"].delete,{id:t.id}).then((function(t){e.toSetPage(1),e.$message.success("删除成功"),e.getDataList()}))},onCancel:function(){}})},handleOk:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;console.log(t.formData),t.addAndEdlt(t.formData)}))},addAndEdlt:function(t){var e=this,a=t;2==this.types&&(a.id=this.dataListId),this.request(1==this.types?i["a"].add:i["a"].edit,a).then((function(t){e.$message.success("操作成功"),e.visible=!1,e.is_lodingTrue=!1,e.getDataList()}))}}},l=n,c=(a("acad"),a("0c7c")),p=Object(c["a"])(l,s,o,!1,null,"49edbfe4",null);e["default"]=p.exports}}]);