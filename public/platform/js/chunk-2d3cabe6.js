(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d3cabe6"],{"19fe":function(e,t,a){"use strict";a("a8fe")},9041:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relative container bg-ff"},[a("div",{staticClass:"wrap bg-ff"},[a("div",{staticClass:"bread-crumb"},[a("a-breadcrumb",[a("a-breadcrumb-item",[a("span",{staticClass:"pointer",on:{click:function(t){return e.$router.replace({path:"/new_marketing/platform/teamManagementList"})}}},[e._v("团队管理")])]),a("a-breadcrumb-item",[a("span",{staticClass:"cr-primary"},[e._v("编辑详情")])])],1)],1),a("div",{staticClass:"mt-10"},[a("a-tabs",{on:{change:e.activeKeyChange},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-tab-pane",{key:"1",attrs:{tab:"团队基本信息"}},[a("div",{staticClass:"content pl-30 flex"},[a("a-form-model",{ref:"teamBaseInfoForm",staticClass:"base-info",attrs:{layout:"horizontal",model:e.teamDetail,labelAlign:"right",rules:e.teamDetailRules}},[a("a-form-model-item",{attrs:{label:"团队名称",prop:"name"}},[a("a-input",{attrs:{placeholder:"请输入团队名称"},model:{value:e.teamDetail.name,callback:function(t){e.$set(e.teamDetail,"name",t)},expression:"teamDetail.name"}})],1),a("a-form-model-item",{attrs:{label:"选择区域代理"}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:11}},[a("a-cascader",{attrs:{options:e.areaList,placeholder:"请选择省市区"},on:{change:function(t){return e.handleChange(t,"area")}},model:{value:e.teamDetail.area,callback:function(t){e.$set(e.teamDetail,"area",t)},expression:"teamDetail.area"}})],1),a("a-col",{attrs:{span:12,offset:1}},[a("a-select",{attrs:{placeholder:"区域代理",allowClear:""},on:{change:function(t){return e.handleChange(t,"area_uid")}},model:{value:e.teamDetail.area_uid,callback:function(t){e.$set(e.teamDetail,"area_uid",t)},expression:"teamDetail.area_uid"}},e._l(e.regionalAgentList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1)],1),a("a-form-model-item",{attrs:{label:"选择业务经理",prop:"manager_uid"}},[a("a-select",{attrs:{placeholder:"请选择业务经理"},model:{value:e.teamDetail.manager_uid,callback:function(t){e.$set(e.teamDetail,"manager_uid",t)},expression:"teamDetail.manager_uid"}},e._l(e.serviceManagerList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-row",{staticClass:"row-border",attrs:{type:"flex"}},[a("a-col",{attrs:{span:12}},[a("div",{staticClass:"fs-16 fw-bold mb-10"},[e._v("店铺业务设置")]),a("a-form-model-item",{attrs:{label:"业务经理抽成比例",prop:"manager_percent",help:"业务经理按团队总业绩进行抽取分成"}},[a("a-input-number",{attrs:{min:0,max:100,placeholder:"请输入"},model:{value:e.teamDetail.manager_percent,callback:function(t){e.$set(e.teamDetail,"manager_percent",t)},expression:"teamDetail.manager_percent"}}),a("span",{staticClass:"ml-10"},[e._v("%")])],1),a("a-form-model-item",{attrs:{label:"业务员提成比例",prop:"personnel_percent",help:"团队业务员默认提成比例"}},[a("a-input-number",{attrs:{min:0,max:100,placeholder:"请输入"},model:{value:e.teamDetail.personnel_percent,callback:function(t){e.$set(e.teamDetail,"personnel_percent",t)},expression:"teamDetail.personnel_percent"}}),a("span",{staticClass:"ml-10"},[e._v("%")])],1)],1),a("a-col",{attrs:{span:12}},[a("div",{staticClass:"fs-16 fw-bold mb-10"},[e._v("社区业务设置")]),a("a-form-model-item",{attrs:{label:"业务经理抽成比例",prop:"village_manager_percent",help:"业务经理按团队总业绩进行抽取分成"}},[a("a-input-number",{attrs:{min:0,max:100,placeholder:"请输入"},model:{value:e.teamDetail.village_manager_percent,callback:function(t){e.$set(e.teamDetail,"village_manager_percent",t)},expression:"teamDetail.village_manager_percent"}}),a("span",{staticClass:"ml-10"},[e._v("%")])],1),a("a-form-model-item",{attrs:{label:"业务员提成比例",prop:"village_personnel_percent",help:"团队业务员默认提成比例"}},[a("a-input-number",{attrs:{min:0,max:100,placeholder:"请输入"},model:{value:e.teamDetail.village_personnel_percent,callback:function(t){e.$set(e.teamDetail,"village_personnel_percent",t)},expression:"teamDetail.village_personnel_percent"}}),a("span",{staticClass:"ml-10"},[e._v("%")])],1)],1)],1),a("a-form-model-item",{attrs:{label:"技术人员",wrapperCol:{span:9}}},[a("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"请选择"},model:{value:e.teamDetail.artisan,callback:function(t){e.$set(e.teamDetail,"artisan",t)},expression:"teamDetail.artisan"}},e._l(e.artisanList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"技术人员提成比例",wrapperCol:{span:9}}},[a("a-input-number",{attrs:{min:0,max:100,placeholder:"请输入"},model:{value:e.teamDetail.technology_percent,callback:function(t){e.$set(e.teamDetail,"technology_percent",t)},expression:"teamDetail.technology_percent"}}),a("span",{staticClass:"ml-10"},[e._v("%")])],1)],1)],1),a("div",{staticClass:"box"}),a("div",{staticClass:"member-wrap"},[a("div",{staticClass:"title"},[e._v("成员管理")]),a("div",{staticClass:"pl-30 mt-20"},[a("a-table",{attrs:{columns:e.memberColumns,rowKey:"id","data-source":e.memberList,pagination:!1},scopedSlots:e._u([{key:"percent",fn:function(t){return a("span",{},[e._v(e._s(t+"%"))])}},{key:"phone_uid",fn:function(t,r){return a("span",{},[e._v(e._s(r.phone||r.uid))])}},{key:"action",fn:function(t,r){return a("span",{},[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.btnOpt(t,"editMember",r)}}},[e._v("编辑")]),a("span",{staticClass:"cr-f1 mr-10"},[e._v("|")]),a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link",on:{click:function(e){return e.preventDefault()}}},[e._v(" 更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){return e.btnOpt(t,"more",r)}},slot:"overlay"},[a("a-menu-item",{key:"switchTeam"},[e._v(" 更换团队 ")]),a("a-menu-item",{key:"upgradeMember"},[e._v(" 升级 ")]),a("a-menu-item",{key:"delMember"},[e._v(" 移除 ")])],1)],1)],1)}}])}),a("div",{staticClass:"flex align-center justify-center mt-20 mb-20 add-member cr-primary"},[a("span",{staticClass:"pointer",on:{click:function(t){return e.btnOpt(t,"addMember")}}},[e._v("+ 新增成员")])])],1)])]),a("a-tab-pane",{key:"2",attrs:{tab:"团队业绩详情"}},[a("div",{staticClass:"pl-30 search-form"},[a("a-form-model",{attrs:{model:e.searchForm,layout:"inline",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:9}},[a("a-form-model-item",{attrs:{label:"业务员"}},[a("a-select",{attrs:{placeholder:"请选择业务员",allowClear:""},model:{value:e.searchForm.person_id,callback:function(t){e.$set(e.searchForm,"person_id",t)},expression:"searchForm.person_id"}},e._l(e.teamBusinessListAll,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:9}},[a("a-form-model-item",{attrs:{label:"商家"}},[a("a-input",{attrs:{placeholder:"请输入商家名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1)],1),a("a-col",{attrs:{span:6}},[a("div",{staticClass:"flex align-center justify-center"},[a("a-button",{staticClass:"mr-10",attrs:{type:"primary"},on:{click:function(t){return e.getList(!0)}}},[e._v("查询")]),a("a-button",{on:{click:function(t){return e.resetBtn()}}},[e._v("重置")])],1)])],1),a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:9}},[a("a-form-model-item",{attrs:{label:"状态类型"}},[a("a-select",{attrs:{placeholder:"请选择",allowClear:""},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("a-select-option",{attrs:{value:"0"}},[e._v(" 新订单 ")]),a("a-select-option",{attrs:{value:"1"}},[e._v(" 续费订单 ")])],1)],1)],1),a("a-col",{attrs:{span:9}},[a("a-form-model-item",{attrs:{label:"订单业务"}},[a("a-select",{attrs:{placeholder:"请选择",allowClear:""},model:{value:e.searchForm.order_business,callback:function(t){e.$set(e.searchForm,"order_business",t)},expression:"searchForm.order_business"}},[a("a-select-option",{attrs:{value:"0"}},[e._v(" 店铺 ")]),a("a-select-option",{attrs:{value:"1"}},[e._v(" 社区 ")])],1)],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:9}},[a("a-form-model-item",{attrs:{label:"下单时间"}},[a("a-range-picker",{attrs:{ranges:{"今日":[e.moment(),e.moment()],"近7天":[e.moment(),e.moment().add(7,"days")],"近15天":[e.moment(),e.moment().add(15,"days")],"近30天":[e.moment(),e.moment().add(30,"days")]},value:e.createOrderTime,format:"YYYY-MM-DD"},on:{change:e.onDateRangeChange}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1)],1)],1)],1),a("a-table",{staticClass:"mt-20",attrs:{columns:e.teamPerformanceColumns,rowKey:"order_id","data-source":e.teamPerformanceList,pagination:e.teamPerformancePagination},scopedSlots:e._u([{key:"store_name",fn:function(t){return a("span",{},[e._v(" "+e._s(t||"-")+" ")])}},{key:"action",fn:function(t,r){return a("span",{},[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.btnOpt(t,"performanceDetail",r)}}},[e._v("查看")])],1)}}])})],1)]),a("a-tab-pane",{key:"3",attrs:{tab:"注册商家"}},[a("div",{staticClass:"pl-30 search-form"},[a("a-form-model",{attrs:{model:e.registerMerSearchForm,layout:"inline",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:9}},[a("a-form-model-item",{attrs:{label:"业务员",allowClear:""}},[a("a-select",{attrs:{placeholder:"请选择业务员"},model:{value:e.registerMerSearchForm.person_id,callback:function(t){e.$set(e.registerMerSearchForm,"person_id",t)},expression:"registerMerSearchForm.person_id"}},e._l(e.teamBusinessListAll,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:9}},[a("a-form-model-item",{attrs:{label:"商家"}},[a("a-input",{attrs:{placeholder:"请输入商家名称"},model:{value:e.registerMerSearchForm.name,callback:function(t){e.$set(e.registerMerSearchForm,"name",t)},expression:"registerMerSearchForm.name"}})],1)],1)],1),a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:9}},[a("a-form-model-item",{attrs:{label:"注册时间"}},[a("a-range-picker",{attrs:{ranges:{"今日":[e.moment(),e.moment()],"近7天":[e.moment(),e.moment().add(7,"days")],"近15天":[e.moment(),e.moment().add(15,"days")],"近30天":[e.moment(),e.moment().add(30,"days")]},value:e.registerTime,format:"YYYY-MM-DD"},on:{change:e.onDateRangeChange}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1)],1),a("a-col",{attrs:{span:9,offset:1}},[a("div",{staticClass:"flex align-center"},[a("a-button",{staticClass:"mr-10",attrs:{type:"primary"},on:{click:function(t){return e.getList(!0)}}},[e._v("查询")]),a("a-button",{on:{click:function(t){return e.resetBtn()}}},[e._v("重置")])],1)])],1)],1),a("a-table",{staticClass:"mt-20",attrs:{columns:e.merchantBusinessColumns,rowKey:"id","data-source":e.registerMerList,pagination:e.registerMerPagination},scopedSlots:e._u([{key:"action",fn:function(t,r){return a("span",{},[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.btnOpt(t,"merchantBusinessTransfer",r)}}},[e._v("业务转移")])],1)}}])})],1)]),a("a-tab-pane",{key:"4",attrs:{tab:"物业列表"}},[a("div",{staticClass:"pl-30 search-form"},[a("a-form-model",{attrs:{model:e.villageSearchForm,layout:"inline",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:9}},[a("a-form-model-item",{attrs:{label:"业务员",allowClear:""}},[a("a-select",{attrs:{placeholder:"请选择业务员"},model:{value:e.villageSearchForm.person_id,callback:function(t){e.$set(e.villageSearchForm,"person_id",t)},expression:"villageSearchForm.person_id"}},e._l(e.teamBusinessListAll,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:9}},[a("a-form-model-item",{attrs:{label:"物业"}},[a("a-input",{attrs:{placeholder:"请输入物业名称"},model:{value:e.villageSearchForm.name,callback:function(t){e.$set(e.villageSearchForm,"name",t)},expression:"villageSearchForm.name"}})],1)],1)],1),a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:9}},[a("a-form-model-item",{attrs:{label:"注册时间"}},[a("a-range-picker",{attrs:{ranges:{"今日":[e.moment(),e.moment()],"近7天":[e.moment(),e.moment().add(7,"days")],"近15天":[e.moment(),e.moment().add(15,"days")],"近30天":[e.moment(),e.moment().add(30,"days")]},value:e.villageTime,format:"YYYY-MM-DD"},on:{change:e.onDateRangeChange}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1)],1),a("a-col",{attrs:{span:9,offset:1}},[a("div",{staticClass:"flex align-center"},[a("a-button",{staticClass:"mr-10",attrs:{type:"primary"},on:{click:function(t){return e.getList(!0)}}},[e._v("查询")]),a("a-button",{on:{click:function(t){return e.resetBtn()}}},[e._v("重置")])],1)])],1)],1),a("a-table",{staticClass:"mt-20",attrs:{columns:e.villageColumns,rowKey:"id","data-source":e.villageList,pagination:e.villagePagination},scopedSlots:e._u([{key:"action",fn:function(t,r){return a("span",{},[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.btnOpt(t,"villageBusinessTransfer",r)}}},[e._v("业务转移")])],1)}}])})],1)])],1)],1)]),"1"==e.activeKey?a("div",{staticClass:"footer flex align-center bg-ff"},[a("a-button",{on:{click:function(t){return e.cancelOpt()}}},[e._v("取消")]),a("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(t){return e.btnOpt(t,"submit")}}},[e._v("提交")])],1):e._e(),a("a-modal",{attrs:{title:e.modalTitle,visible:e.modalVisible,maskClosable:!1,width:"50%"},on:{ok:e.handleOk,cancel:e.handleCancel}},["addMember"==e.modalType||"editMember"==e.modalType?a("div",[a("a-form-model",{ref:"memberForm",attrs:{model:e.memberFormData,labelCol:{span:4},wrapperCol:{span:12},rules:e.memberFormRules}},[a("a-form-model-item",{attrs:{label:"姓名",prop:"addMember"==e.modalType?"name":""}},["addMember"==e.modalType?a("a-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.memberFormData.name,callback:function(t){e.$set(e.memberFormData,"name",t)},expression:"memberFormData.name"}}):a("span",[e._v(e._s(e.memberFormData.name))])],1),a("a-form-model-item",{attrs:{label:"绑定账号",hasFeedback:"addMember"==e.modalType&&e.memberFormData.uid&&"-1"==e.memberFormData.user_id,validateStatus:e.memberFormData.uid&&"-1"==e.memberFormData.user_id?"-1"==e.memberFormData.user_id?"error":"success":"",help:("-1"==e.memberFormData.user_id&&e.memberFormData.uid,""),prop:"addMember"==e.modalType?"uid":""}},["addMember"==e.modalType?a("a-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.memberFormData.uid,callback:function(t){e.$set(e.memberFormData,"uid",t)},expression:"memberFormData.uid"}}):a("span",[e._v(e._s(e.memberFormData.phone))])],1),a("a-form-model-item",{attrs:{label:"店铺提成比例",help:"默认按照团队业务员比例，可针对个人调整比例"}},[a("a-input-number",{attrs:{placeholder:"请输入",min:0,max:100},model:{value:e.memberFormData.shop_percent,callback:function(t){e.$set(e.memberFormData,"shop_percent",t)},expression:"memberFormData.shop_percent"}}),a("span",{staticClass:"ml-10"},[e._v("%")])],1),a("a-form-model-item",{attrs:{label:"社区提成比例",help:"默认按照团队业务员比例，可针对个人调整比例"}},[a("a-input-number",{attrs:{placeholder:"请输入",min:0,max:100},model:{value:e.memberFormData.village_percent,callback:function(t){e.$set(e.memberFormData,"village_percent",t)},expression:"memberFormData.village_percent"}}),a("span",{staticClass:"ml-10"},[e._v("%")])],1),"editMember"==e.modalType?a("a-form-model-item",{attrs:{label:"成员邀请码"}},[a("span",[e._v(e._s(e.memberFormData.invitation_code))])]):e._e(),a("a-form-model-item",{attrs:{label:"备注"}},[a("a-textarea",{attrs:{placeholder:"请输入备注",autoSize:{minRows:4,maxRows:8}},model:{value:e.memberFormData.note,callback:function(t){e.$set(e.memberFormData,"note",t)},expression:"memberFormData.note"}})],1)],1)],1):e._e(),"switchTeam"==e.modalType?a("div",[a("a-form-model",{attrs:{model:e.memberFormData,labelCol:{span:4},wrapperCol:{span:12}}},[a("a-form-model-item",{attrs:{label:"选择团队",help:"当前业务员切换团队后，该团队所做业绩需从订单管理中查询"}},[a("a-select",{attrs:{placeholder:"请选择"},on:{popupScroll:e.popupScroll},model:{value:e.teamId,callback:function(t){e.teamId=t},expression:"teamId"}},e._l(e.teamList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1)],1):e._e(),"upgradeMember"==e.modalType?a("div",[a("a-form-model",{ref:"memberForm",attrs:{model:e.memberFormData,labelCol:{span:4},wrapperCol:{span:12},rules:e.memberFormRules}},[a("a-form-model-item",{attrs:{label:"选择接手成员",help:"该业务员服务的商家均归接手成员，且后续业务提成均属接手成员",prop:"business_uid"}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:e.memberFormData.business_uid,callback:function(t){e.$set(e.memberFormData,"business_uid",t)},expression:"memberFormData.business_uid"}},e._l(e.teamBusinessList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"选择区域"}},[a("a-cascader",{attrs:{options:e.areaList,placeholder:"请选择省市区"},model:{value:e.memberFormData.area,callback:function(t){e.$set(e.memberFormData,"area",t)},expression:"memberFormData.area"}})],1),a("a-form-model-item",{attrs:{label:"备注"}},[a("a-textarea",{attrs:{placeholder:"请输入备注",autoSize:{minRows:4,maxRows:8}},model:{value:e.memberFormData.note,callback:function(t){e.$set(e.memberFormData,"note",t)},expression:"memberFormData.note"}})],1)],1)],1):e._e(),"businessTransfer"==e.modalType?a("div",[a("a-form-model",{attrs:{model:e.memberFormData,labelCol:{span:4},wrapperCol:{span:12}}},[a("a-form-model-item",{attrs:{label:"选择接手成员",help:"转移后此商家后续业务归接手成员服务，且业务提成均属接手成员"}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:e.memberFormData.business_uid,callback:function(t){e.$set(e.memberFormData,"business_uid",t)},expression:"memberFormData.business_uid"}},e._l(e.teamBusinessList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1)],1):e._e(),"merchantBusinessTransfer"==e.modalType||"villageBusinessTransfer"==e.modalType?a("div",[a("a-form-model",{attrs:{model:e.transferFormData,labelCol:{span:4},wrapperCol:{span:12}}},[a("a-form-model-item",{attrs:{label:"选择接手成员",help:"转移后此商家后续业务归接手成员服务，且业务提成均属接手成员"}},[a("a-cascader",{attrs:{options:e.transferFormData.transferMemberList,fieldNames:{label:"name",value:"id",children:"lists"},placeholder:"请选择"},model:{value:e.transferFormData.transferMember,callback:function(t){e.$set(e.transferFormData,"transferMember",t)},expression:"transferFormData.transferMember"}})],1)],1)],1):e._e()]),e.drawerVisible?a("a-drawer",{attrs:{width:"60%",title:"订单详情",placement:"right",closable:!1,visible:e.drawerVisible},on:{close:function(t){e.drawerVisible=!1}}},[a("OrderDetail",{attrs:{orderId:e.orderId,orderBusiness:e.orderType}})],1):e._e()],1)},i=[],s=a("5530"),n=(a("a9e3"),a("7db0"),a("d3b7"),a("d81d"),a("99af"),a("4de4"),a("b64b"),a("b0c0"),a("ac1f"),a("5319"),a("c1df")),o=a.n(n),l=a("126e"),m=a("aa80"),c=/^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/,d=1,u={components:{OrderDetail:m["default"]},data:function(){return{activeKey:"1",areaList:[],id:"",serviceManagerList:[],regionalAgentList:[],artisanList:[],teamDetail:{},teamDetailRules:{name:[{required:!0,message:"请输入团队名称",trigger:"blur"}],manager_uid:[{required:!0,message:"请选择业务经理",trigger:"blur"}],manager_percent:[{required:!0,message:"请输入店铺业务经理抽成比例",trigger:"blur"}],personnel_percent:[{required:!0,message:"请输入店铺业务员提成比例",trigger:"blur"}],village_manager_percent:[{required:!0,message:"请输入社区业务经理抽成比例",trigger:"blur"}],village_personnel_percent:[{required:!0,message:"请输入社区业务员提成比例",trigger:"blur"}]},modalTitle:"",modalVisible:!1,modalType:"",memberColumns:[{title:"业务人员",dataIndex:"name",align:"center",width:"12%"},{title:"入团方式",dataIndex:"join_team_name",align:"center"},{title:"手机号",dataIndex:"phone_uid",align:"center",scopedSlots:{customRender:"phone_uid"}},{title:"入团时间",dataIndex:"add_time",sortDirections:["descend","ascend"],sorter:function(e,t){return o()(e.add_time).unix()-o()(t.add_time).unix()},align:"center"},{title:"累计提成",dataIndex:"total_percentage",align:"center"},{title:"累计业绩总额",dataIndex:"total_performance",sortDirections:["descend","ascend"],sorter:function(e,t){return Number(e.total_performance)-Number(t.total_performance)},align:"center"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center"}],memberList:[],memberFormData:{id:"",name:"",uid:"",phone:"",shop_percent:"",village_percent:"",note:"",user_id:""},memberFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],uid:[{required:!0,message:"请输入用户账号",trigger:"blur"},{pattern:c,message:"手机号格式错误",trigger:"blur"}],business_uid:[{required:!0,message:"请选择接手业务员",trigger:"blur"}]},searchForm:{name:"",type:void 0,begin_time:"",end_time:"",person_id:void 0,order_business:void 0},createOrderTime:[],teamPerformanceColumns:[{title:"业务人员",dataIndex:"per_name",align:"center",width:"12%"},{title:"订单编号",dataIndex:"orderid",align:"center"},{title:"商家/物业名称",dataIndex:"mer_name",align:"center",width:"12%"},{title:"订单业务",dataIndex:"order_business_status",align:"center",width:"12%"},{title:"下单店铺/套餐",dataIndex:"store_name",scopedSlots:{customRender:"store_name"},align:"center",width:"14%"},{title:"店铺数量",dataIndex:"store_num",align:"center"},{title:"订单金额",dataIndex:"total_price",align:"center"},{title:"订单类型",dataIndex:"order_type_status",align:"center"},{title:"下单时间",dataIndex:"add_time",sortDirections:["descend","ascend"],sorter:function(e,t){return o()(e.add_time).unix()-o()(t.add_time).unix()},align:"center"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center"}],teamPerformanceList:[],drawerVisible:!1,teamList:[],teamId:void 0,teamBusinessListAll:[],teamBusinessList:[],teamPerformancePagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(e){return"共 ".concat(e," 条记录")}},teamPerformanceRequest:!1,orderId:"",orderType:0,merchantBusinessColumns:[{title:"商家名称",dataIndex:"mer_name",align:"center",width:"16%"},{title:"业务员",dataIndex:"per_name",align:"center",width:"16%"},{title:"订单数量",dataIndex:"order_num",align:"center"},{title:"已购买店铺数量",dataIndex:"total_num",align:"center"},{title:"订单总金额",dataIndex:"total_price",align:"center"},{title:"注册时间",dataIndex:"add_time",sortDirections:["descend","ascend"],sorter:function(e,t){return o()(e.add_time).unix()-o()(t.add_time).unix()},align:"center"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center"}],registerMerList:[],transferFormData:{transferMember:[],transferMemberList:[]},registerTime:[],registerMerSearchForm:{name:"",begin_time:"",end_time:"",person_id:void 0},registerMerPagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(e){return"共 ".concat(e," 条记录")}},registerMerRequest:!1,teamListTotal:0,villageSearchForm:{name:"",begin_time:"",end_time:"",person_id:void 0},villageColumns:[{title:"物业名称",dataIndex:"merchant_name",align:"center",width:"16%"},{title:"业务员",dataIndex:"user_name",align:"center",width:"16%"},{title:"订单数量",dataIndex:"order_num",align:"center"},{title:"订单总金额",dataIndex:"total_money",align:"center"},{title:"注册时间",dataIndex:"reg_time",sortDirections:["descend","ascend"],sorter:function(e,t){return o()(e.reg_time).unix()-o()(t.reg_time).unix()},align:"center"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center"}],villageTime:[],villagePagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(e){return"共 ".concat(e," 条记录")}},villageList:[],villageRequest:!1}},activated:function(){this.id=this.$route.query.id||"",this.getOptionsList(),this.getDetail()},deactivated:function(){Object.assign(this.$data,this.$options.data()),this.activeKey="1",this.teamPerformanceRequest=!1,this.registerMerRequest=!1,this.villageRequest=!1},methods:{moment:o.a,activeKeyChange:function(e){this.activeKey=e,(!this.teamPerformanceRequest&&"2"==this.activeKey||!this.registerMerRequest&&"3"==this.activeKey||!this.villageRequest&&"4"==this.activeKey)&&this.resetBtn()},getOptionsList:function(){var e=this;this.getRegionalAgentList(),this.request(l["a"].artisanList,{}).then((function(t){e.artisanList=t||[]})),this.request(l["a"].findArea,{}).then((function(t){e.areaList=t||[]})),this.getTeamBusinessList(),this.getTeamList()},getServiceManagerList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.request(l["a"].serviceManagerNoList,{area_uid:t}).then((function(t){t&&Array.isArray(t)&&(e.teamDetail&&e.teamDetail.manager_uid&&(t.find((function(t){return t.id==e.teamDetail.manager_uid}))||t.push(e.teamDetail.manager_find)),e.serviceManagerList=t,t.find((function(t){return t.id==e.teamDetail.manager_uid}))||e.$set(e.teamDetail,"manager_uid",void 0))}))},getTeamBusinessList:function(){var e=this;this.request(l["a"].teamBusinessList,{id:this.id}).then((function(t){e.teamBusinessListAll=t||[]}))},getDetail:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a={id:this.id};this.request(l["a"].teamManagementBasic,a).then((function(a){var r=a.basic,i=void 0===r?"":r,s=a.person_list,n=void 0===s?[]:s;if(!t&&i){var o=i.manager_uid,l=void 0===o?"":o,m=i.artisan_list,c=void 0===m?[]:m,d=i.area_uid,u=void 0===d?"":d;e.getServiceManagerList(u),i.manager_uid=l||void 0,i.area_uid=i.area_uid>0?i.area_uid:void 0,i.artisan=c.length?c.map((function(e){return e.id})):[],e.teamDetail=i}e.memberList=n}))},handleChange:function(e,t){var a=e;"area"==t?this.getRegionalAgentList(a):"area_uid"==t&&this.getServiceManagerList(a)},getRegionalAgentList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.request(l["a"].regionalAgentList,{area:t}).then((function(t){e.regionalAgentList=t||[]}))},getTeamList:function(){var e=this,t={name:"",area:[],manager_uid:"",area_uid:"",begin_time:"",end_time:"",page:d,pageSize:10};this.request(l["a"].teamManagementList,t).then((function(t){var a=e.teamList.concat(t.list)||[];e.teamList=a.filter((function(t){return t.id!=e.id})),e.teamListTotal=t.count||0}))},popupScroll:function(){this.teamList.length<this.teamListTotal&&(d++,this.getTeamList())},btnOpt:function(e,t,a){var r=this;if("more"==t&&e&&e.key?this.modalType=e.key:this.modalType=t,"submit"==this.modalType)this.baseInfoSubmit();else if("addMember"==this.modalType)this.memberFormData=this.$options.data().memberFormData,this.$set(this.memberFormData,"shop_percent",this.teamDetail.personnel_percent),this.$set(this.memberFormData,"village_percent",this.teamDetail.village_personnel_percent),this.modalTitle="新增成员",this.modalVisible=!0;else if("editMember"==this.modalType)this.modalTitle="编辑成员",this.modalVisible=!0,this.teamMembeInfo(a.id);else if("switchTeam"==this.modalType)this.modalTitle="切换团队",this.modalVisible=!0,this.memberFormData=JSON.parse(JSON.stringify(a));else if("upgradeMember"==this.modalType){this.modalTitle="业务员升级业务经理",this.modalVisible=!0,this.teamBusinessList=this.teamBusinessListAll.filter((function(e){return e.uid!=a.uid}));var i={id:a.id,business_uid:void 0,note:"",area:[]};this.memberFormData=JSON.parse(JSON.stringify(i))}else"delMember"==this.modalType?(this.teamBusinessList=this.teamBusinessListAll.filter((function(e){return e.id!=a.id})),1!=a.is_remove?this.$confirm({title:"该成员移除前需先将成员下的商家业务转移。",icon:function(e){return e("a-icon",{props:{type:"close-circle",theme:"filled"},style:{color:"#f50f50"}})},onOk:function(){r.modalType="businessTransfer",r.modalTitle="业务转移",r.modalVisible=!0;var e={id:a.id,business_uid:void 0};r.memberFormData=JSON.parse(JSON.stringify(e))}}):this.$confirm({title:"你确定要从团队中移除该成员吗?",icon:function(e){return e("a-icon",{props:{type:"close-circle",theme:"filled"},style:{color:"#f50f50"}})},onOk:function(){var e={id:a.id};r.request(l["a"].teamManagementDel,e).then((function(e){r.$message.success("移除成功"),r.getDetail(!0),localStorage.setItem("updateTeamManageList",!0)}))}})):"performanceDetail"==this.modalType?(this.drawerVisible=!0,this.orderId=a.order_id,this.orderType=a.order_business):"merchantBusinessTransfer"!=this.modalType&&"villageBusinessTransfer"!=this.modalType||(this.modalTitle="业务转移",this.modalVisible=!0,this.$set(this.transferFormData,"merId",a.id),this.$set(this.transferFormData,"person_id",a.person_id),this.transferFormData.transferMemberList.length||this.merTransferMemberList())},handleOk:function(){"addMember"==this.modalType||"editMember"==this.modalType?this.handleMember():"switchTeam"==this.modalType?this.switchTeam():"upgradeMember"==this.modalType?this.teamManagementUpgrade():"businessTransfer"==this.modalType?this.teamManagementTransfer():"merchantBusinessTransfer"!=this.modalType&&"villageBusinessTransfer"!=this.modalType||this.businessTransfer()},handleCancel:function(){this.modalTitle="",this.modalType="",this.modalVisible=!1,this.memberFormData=this.$options.data().memberFormData,this.transferFormData=this.$options.data().transferFormData,this.teamId=void 0},baseInfoSubmit:function(){var e=this;this.$refs.teamBaseInfoForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;console.log("团队基本信息编辑");var a={id:e.id||"",name:e.teamDetail.name,area:e.teamDetail.area||[],area_uid:e.teamDetail.area_uid||"",manager_uid:e.teamDetail.manager_uid||"",personnel_percent:e.teamDetail.personnel_percent||"",manager_percent:e.teamDetail.manager_percent||"",village_personnel_percent:e.teamDetail.village_personnel_percent||"",village_manager_percent:e.teamDetail.village_manager_percent||"",artisan:e.teamDetail.artisan||[],technology_percent:e.teamDetail.technology_percent||""};e.request(l["a"].teamManagementEdit,a).then((function(t){e.$message.success("提交成功"),e.getDetail(),e.$refs.teamBaseInfoForm.clearValidate(),localStorage.setItem("updateTeamManageList",!0)}))}))},cancelOpt:function(){this.$refs.teamBaseInfoForm.clearValidate(),this.$router.replace({path:"/new_marketing/platform/teamManagementList"})},teamMembeInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t&&this.request(l["a"].teamMembeInfo,{id:t}).then((function(t){e.memberFormData=t||""}))},handleMember:function(){var e=this;this.$refs.memberForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;console.log("团队基本信息新增 || 编辑成员--校验通过"),"addMember"==e.modalType?e.request(l["a"].teamMemberCode,{uid:e.memberFormData.uid}).then((function(t){e.$set(e.memberFormData,"user_id",t.uid||-1),t.uid&&e.memberOpt(t.uid,e.memberFormData.uid)})).catch((function(t){e.$set(e.memberFormData,"user_id","-1")})):e.memberOpt(e.memberFormData.uid,e.memberFormData.phone)}))},memberOpt:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={team_id:this.id,id:this.memberFormData.id||"",name:this.memberFormData.name,uid:t,phone:a,shop_percent:this.memberFormData.shop_percent,village_percent:this.memberFormData.village_percent,note:this.memberFormData.note};this.request(l["a"].teamMemberAdd,r).then((function(t){e.$message.success("addMember"==e.modalType?"新增成功":"编辑成功"),e.getDetail(!0),e.getTeamBusinessList(),e.modalVisible&&e.handleCancel(),e.$refs.memberForm.clearValidate(),localStorage.setItem("updateTeamManageList",!0)}))},switchTeam:function(){var e=this;if(this.teamId){var t={id:this.memberFormData.id,team_id:this.teamId||""};this.request(l["a"].teamManagementReplace,t).then((function(t){e.$message.success("更换团队成功"),e.getDetail(!0),e.modalVisible&&e.handleCancel(),localStorage.setItem("updateTeamManageList",!0)}))}else this.$message.error("请选择新团队")},teamManagementUpgrade:function(){var e=this;this.$refs.memberForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;console.log("业务员升级业务经理校验通过");var a=Object(s["a"])({},e.memberFormData);e.request(l["a"].teamManagementUpgrade,a).then((function(t){e.$message.success("业务员升级成功"),e.modalVisible&&e.handleCancel(),e.getDetail(!0),e.getServiceManagerList(),localStorage.setItem("updateTeamManageList",!0)}))}))},teamManagementTransfer:function(){var e=this;if(this.memberFormData.business_uid){var t=Object(s["a"])({},this.memberFormData);this.request(l["a"].teamManagementTransfer,t).then((function(t){e.$message.success("业务转移成功"),e.modalVisible&&e.handleCancel(),e.getDetail(!0)}))}else this.$message.error("请选择接手成员")},onDateRangeChange:function(e,t){"2"==this.activeKey?this.$set(this,"createOrderTime",[e[0],e[1]]):"3"==this.activeKey?this.$set(this,"registerTime",[e[0],e[1]]):"4"==this.activeKey&&this.$set(this,"villageTime",[e[0],e[1]])},onPageChange:function(e,t){"2"==this.activeKey?this.$set(this.teamPerformancePagination,"current",e):"3"==this.activeKey?this.$set(this.registerMerPagination,"current",e):"4"==this.activeKey&&this.$set(this.villagePagination,"current",e),this.getList()},onPageSizeChange:function(e,t){"2"==this.activeKey?this.$set(this.teamPerformancePagination,"pageSize",t):"3"==this.activeKey?this.$set(this.registerMerPagination,"pageSize",t):"4"==this.activeKey&&this.$set(this.villagePagination,"pageSize",t),this.getList()},getList:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"2"==this.activeKey?this.teamPerformance(e):"3"==this.activeKey?this.registerMer(e):"4"==this.activeKey&&this.getVillageList(e)},teamPerformance:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.teamPerformanceRequest=!0,t&&(this.$set(this.teamPerformancePagination,"current",1),this.$set(this.teamPerformancePagination,"pageSize",10));var a=Object(s["a"])(Object(s["a"])({},this.searchForm),{},{team_id:this.id,begin_time:this.getSearchTime().begin_time,end_time:this.getSearchTime().end_time,page:this.teamPerformancePagination.current,pageSize:this.teamPerformancePagination.pageSize});a.person_id=a.person_id||"",a.type=void 0==a.type?"-1":a.type,a.order_business=void 0==a.order_business?"-1":a.order_business,this.request(l["a"].teamManagementSavage,a).then((function(t){e.teamPerformanceList=t.list||[],e.$set(e.teamPerformancePagination,"total",t.count||0)}))},registerMer:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.registerMerRequest=!0,t&&(this.$set(this.registerMerPagination,"current",1),this.$set(this.registerMerPagination,"pageSize",10));var a=Object(s["a"])(Object(s["a"])({},this.registerMerSearchForm),{},{team_id:this.id,begin_time:this.getSearchTime().begin_time,end_time:this.getSearchTime().end_time,page:this.registerMerPagination.current,pageSize:this.registerMerPagination.pageSize});a.person_id=a.person_id||"",this.request(l["a"].teamManagementMerchantList,a).then((function(t){e.registerMerList=t.list||[],e.$set(e.registerMerPagination,"total",t.count||0)}))},getVillageList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.villageRequest=!0,t&&(this.$set(this.villagePagination,"current",1),this.$set(this.villagePagination,"pageSize",10));var a={team_id:this.id,name:this.villageSearchForm.name,user_id:this.villageSearchForm.person_id||"",begin_time:this.getSearchTime().begin_time,end_time:this.getSearchTime().end_time,page:this.villagePagination.current,pageSize:this.villagePagination.pageSize};this.request(l["a"].getPropertyList,a).then((function(t){e.villageList=t.list||[],e.$set(e.villagePagination,"total",t.count||0)}))},getSearchTime:function(){var e=this.createOrderTime,t=void 0===e?[]:e,a=this.registerTime,r=void 0===a?[]:a,i="",s="";return"2"==this.activeKey?(i=t[0]?o()(t[0]).format("YYYY-MM-DD"):"",s=t[1]?o()(t[1]).format("YYYY-MM-DD"):""):"3"==this.activeKey&&(i=r[0]?o()(r[0]).format("YYYY-MM-DD"):"",s=r[1]?o()(r[1]).format("YYYY-MM-DD"):""),{begin_time:i,end_time:s}},resetBtn:function(){"2"==this.activeKey?(this.createOrderTime=[],this.searchForm=this.$options.data().searchForm):"3"==this.activeKey?(this.registerTime=[],this.registerMerSearchForm=this.$options.data().registerMerSearchForm):"4"==this.activeKey&&(this.villageTime=[],this.villageSearchForm=this.$options.data().villageSearchForm),this.getList(!0)},merTransferMemberList:function(){var e=this,t={team_id:this.id};this.request(l["a"].teamManagementMerchantTransferList,t).then((function(t){t&&t.length&&(t=t.map((function(t){return(!t.lists||t.lists&&!t.lists.length)&&(t.disabled=!0),t.lists&&t.lists.length&&(t.lists=t.lists.filter((function(t){var a=e.transferFormData.person_id;if(t.id!=a)return t}))),t}))),e.$set(e.transferFormData,"transferMemberList",t||[])}))},businessTransfer:function(){var e=this;if(this.transferFormData.transferMember.length){var t={id:this.transferFormData.merId,team_id:this.transferFormData.transferMember[0]},a="teamManagementMerchantTransferCreate";"villageBusinessTransfer"==this.modalType?(a="villageTransferBusiness",t.person_id=this.transferFormData.transferMember[1]):t.per_id=this.transferFormData.transferMember[1],this.request(l["a"][a],t).then((function(t){e.$message.success("业务转移成功"),e.modalVisible&&e.handleCancel(),e.getList(!0)}))}else this.$message.error("请选择接手成员")}}},p=u,h=(a("19fe"),a("0c7c")),g=Object(h["a"])(p,r,i,!1,null,"22a32b52",null);t["default"]=g.exports},a8fe:function(e,t,a){}}]);