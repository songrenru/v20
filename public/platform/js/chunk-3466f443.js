(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3466f443","chunk-b3cef5c8","chunk-b3cef5c8","chunk-748b470d"],{"4bb5d":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var r=i("ea87");function a(t){if(Array.isArray(t))return Object(r["a"])(t)}i("6073"),i("2c5c"),i("c5cb"),i("36fa"),i("02bf"),i("a617"),i("17c8");function n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var o=i("9877");function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return a(t)||n(t)||Object(o["a"])(t)||l()}},"7b3f":function(t,e,i){"use strict";var r={uploadImg:"/common/common.UploadFile/uploadImg"};e["a"]=r},adf9:function(t,e,i){},ba1b:function(t,e,i){"use strict";var r={getAtlasArticleList:"/atlas/api.AtlasArticle/getAtlasArticleList",getAtlasArticleClass:"/atlas/api.AtlasArticle/getAtlasArticleClass",getAtlasArticleOption:"/atlas/api.AtlasArticle/getAtlasArticleOption",getAtlasArticleDetail:"/atlas/api.AtlasArticle/getAtlasArticleDetail",getAtlasArticleCreate:"/atlas/api.AtlasArticle/getAtlasArticleCreate",getAtlasArticleDel:"/atlas/api.AtlasArticle/getAtlasArticleDel",getAtlasCategoryList:"/atlas/api.AtlasCategory/getAtlasCategoryList",getAtlasCategoryInfo:"/atlas/api.AtlasCategory/getAtlasCategoryInfo",getAtlasCategoryCreate:"/atlas/api.AtlasCategory/getAtlasCategoryCreate",getAtlasCategoryDel:"/atlas/api.AtlasCategory/getAtlasCategoryDel",getAtlasArticleSecond:"/atlas/api.AtlasCategory/getAtlasArticleSecond",getAtlasSpecialList:"/atlas/api.AtlasSpecial/getAtlasSpecialList",getAtlasSpecialInfo:"/atlas/api.AtlasSpecial/getAtlasSpecialInfo",getAtlasSpecialCreate:"/atlas/api.AtlasSpecial/getAtlasSpecialCreate",getAtlasSpecialDel:"/atlas/api.AtlasSpecial/getAtlasSpecialDel"};e["a"]=r},c619:function(t,e,i){"use strict";i.r(e);i("54f8"),i("6073"),i("2c5c");var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.title,width:840,visible:t.visible,maskClosable:t.maskClosable,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[e("a-spin",{attrs:{spinning:t.confirmLoading}},[e("a-form",{attrs:{form:t.form}},[e("a-form-item",{attrs:{label:"选择分类",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-cascader",{directives:[{name:"decorator",rawName:"v-decorator",value:["cat_id",{initialValue:t.detail.cat_id,rules:[{required:!0,message:"请选择图文分类"}]}],expression:"['cat_id', { initialValue: detail.cat_id, rules: [{ required: true,message:'请选择图文分类' }] }]"}],attrs:{options:t.options,placeholder:"请选择图文分类"},on:{change:t.onChange}})],1),t._l(t.specialList,(function(i){return e("div",{key:i.id,attrs:{id:i.id}},[0==i.type_id?e("div",{staticClass:"ant-col ant-col-xs-24 ant-col-sm-7 ant-form-item-label",staticStyle:{width:"266px"}},[e("label",{staticClass:"ant-form-item-no-colon"},[t._v(t._s(i.name)+"：")])]):t._e(),0==i.type_id?e("a-form-item",{attrs:{label:"",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["owner"+i.id,{initialValue:i.ownerid,rules:[{required:!1}]}],expression:"['owner' + item.id, { initialValue: item.ownerid, rules: [{ required: false }] }]"}],staticStyle:{width:"180px"},attrs:{placeholder:"请选择标签"}},t._l(i.optionList,(function(r){return e("a-select-option",{key:r.id,attrs:{id:r.id}},[t._v(t._s(r.name)+t._s(i.owner)+" ")])})),1)],1):t._e(),1==i.type_id?e("div",{staticClass:"ant-col ant-col-xs-24 ant-col-sm-7 ant-form-item-label",staticStyle:{width:"266px"}},[e("label",{staticClass:"ant-form-item-no-colon"},[t._v(t._s(i.name)+"：")])]):t._e(),1==i.type_id?e("a-form-item",{staticStyle:{width:"800px"},attrs:{label:"",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["owner"+i.id,{initialValue:i.ownerid,rules:[{required:!1}]}],expression:"['owner' + item.id, { initialValue: item.ownerid, rules: [{ required: false }] }]"}],staticStyle:{"max-width":"268px",width:"100%"},attrs:{mode:"multiple",placeholder:"请选择标签"},on:{change:t.handleChange}},t._l(i.optionList,(function(r){return e("a-select-option",{key:r.id},[t._v(t._s(r.name)+t._s(i.owner))])})),1)],1):t._e()],1)})),e("a-form-item",{attrs:{label:"文章标题",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{initialValue:t.detail.title,rules:[{required:!0,message:"请输入文章标题"}]}],expression:"['title', { initialValue: detail.title, rules: [{ required: true ,message:'请输入文章标题'}] }]"}]})],1),e("a-form-item",{attrs:{label:"封面图",colon:!1,labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("div",{staticStyle:{color:"red",position:"absolute",left:"-62px",top:"0px"}},[t._v("*")]),e("div",{key:t.ImgKey,staticClass:"clearfix"},[e("a-upload",{attrs:{name:"reply_pic",action:t.uploadImg,"list-type":"picture-card","file-list":t.imgUploadList,multiple:!0},on:{preview:t.handlePreview,change:t.handleImgChange}},[t.imgUploadList.length<1?e("div",[e("a-icon",{attrs:{type:"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v("上传图片")])],1):t._e()]),e("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleImgCancel}},[e("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)]),e("a-form-item",{attrs:{label:"摘要",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{initialValue:t.detail.description,rules:[{required:!1}]}],expression:"['description', { initialValue: detail.description, rules: [{ required: false }] }]"}],attrs:{rows:5}})],1),e("a-form-item",{attrs:{label:"",colon:!1}},[e("rich-text",{attrs:{info:t.detail.content},on:{"update:info":function(e){return t.$set(t.detail,"content",e)}}})],1)],2)],1)],1)},a=[],n=i("2396"),o=i("4bb5d"),l=i("dff4"),s=i("d34b"),c=(i("c5cb"),i("075f"),i("7b3f")),u=i("ba1b"),d=i("6ec16");function p(t){return new Promise((function(e,i){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){return e(r.result)},r.onerror=function(t){return i(t)}}))}var f={components:{RichText:d["a"]},data:function(){return{maskClosable:!1,options:[],specialList:[],previewVisible:!1,previewImage:"",imgUploadList:[],uploadImg:"/v20/public/index.php"+c["a"].uploadImg+"?upload_dir=/group",title:"添加图文信息",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),detail:{id:0,name:"",description:"",content:"",sort:"",img:[],cat_id:0},cat_id:0,id:0}},watch:{visible:function(){this.visible?(this.ImgKey="",this.previewVisible=!1,this.previewImage="",this.imgUploadList="",this.detail.content=" "):this.ImgKey=Math.random(),console.log("this.ImgKey :>> ",this.ImgKey)}},mounted:function(){},methods:{onChange:function(t){var e=this;this.cat_id=t,this.request(u["a"].getAtlasArticleOption,{value:t}).then((function(t){e.specialList=t}))},clearUeditor:function(){$EDITORUI["edui51"]._onClick()},handleImgCancel:function(){this.previewVisible=!1},handlePreview:function(t){var e=this;return Object(s["a"])(Object(l["a"])().mark((function i(){return Object(l["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.url||t.preview){i.next=4;break}return i.next=3,p(t.originFileObj);case 3:t.preview=i.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return i.stop()}}),i)})))()},handleChange:function(t){},handleImgChange:function(t){var e=this,i=Object(o["a"])(t.fileList);this.imgUploadList=i;var r=[];this.imgUploadList.map((function(i){if("done"===i.status&&"1000"==i.response.status){var a=i.response.data;r.push(a.full_url),e.$set(e.detail,"img",r)}else"error"===t.file.status&&e.$message.error("".concat(t.file.name," 上传失败！"))}))},add:function(){this.visible=!0,this.specialList=[],this.id=0,this.title="添加图文信息",this.getAtlasArticleClass(),this.detail={id:0,name:"",description:"",content:"",sort:"",img:[]}},edit:function(t){this.visible=!0,this.id=t,this.getAtlasArticleClass(),this.getEditInfo(t),this.title="编辑图文信息"},handleSubmit:function(){var t=this,e=this.form.validateFields;this.confirmLoading=!0,e((function(e,i){e?t.confirmLoading=!1:(i.cat_id=t.cat_id,i.id=t.id,i.pic=t.detail.img,i.content=t.detail.content,t.request(u["a"].getAtlasArticleCreate,i).then((function(e){t.id>0?t.$message.success("编辑成功"):t.$message.success("添加成功"),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1,t.$emit("loaddata",t.cat_id)}),1500)})).catch((function(e){t.confirmLoading=!1})))}))},handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.id="0",t.form=t.$form.createForm(t)}),500)},getAtlasArticleClass:function(){var t=this;this.request(u["a"].getAtlasArticleClass,{type:1}).then((function(e){t.options=e}))},getEditInfo:function(t){var e=this;this.request(u["a"].getAtlasArticleDetail,{id:this.id}).then((function(t){if(e.img=t.pic,e.showMethod=t.showMethod,e.detail=t,t.cat_id&&(e.specialList=t.specialList,e.request(u["a"].getAtlasArticleOption,{value:t.cat_id,id:t.id}).then((function(t){e.specialList=t}))),t.img){e.imgUploadList=[];for(var i=0;i<t.img.length;i++){var r={uid:i,name:"img_"+i,status:"done",url:t.img[i]};e.imgUploadList.push(r)}}"object"==Object(n["a"])(t.detail)&&(e.detail=t.detail)}))}}},h=f,m=(i("cbda"),i("0b56")),g=Object(m["a"])(h,r,a,!1,null,null,null);e["default"]=g.exports},cbda:function(t,e,i){"use strict";i("adf9")},d34b:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("c5cb");function r(t,e,i,r,a,n,o){try{var l=t[n](o),s=l.value}catch(c){return void i(c)}l.done?e(s):Promise.resolve(s).then(r,a)}function a(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var o=t.apply(e,i);function l(t){r(o,a,n,l,s,"next",t)}function s(t){r(o,a,n,l,s,"throw",t)}l(void 0)}))}}},dff4:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("6073"),i("2c5c"),i("c5cb"),i("36fa"),i("02bf"),i("a617"),i("70b9"),i("25b2"),i("0245"),i("2e24"),i("1485"),i("08c7"),i("54f8"),i("7177"),i("9ae4");var r=i("2396");function a(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
a=function(){return t};var t={},e=Object.prototype,i=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function c(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(O){c=function(t,e,i){return t[e]=i}}function u(t,e,i,r){var a=e&&e.prototype instanceof f?e:f,n=Object.create(a.prototype),o=new x(r||[]);return n._invoke=function(t,e,i){var r="suspendedStart";return function(a,n){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw n;return I()}for(i.method=a,i.arg=n;;){var o=i.delegate;if(o){var l=C(o,i);if(l){if(l===p)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===r)throw r="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r="executing";var s=d(t,e,i);if("normal"===s.type){if(r=i.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:i.done}}"throw"===s.type&&(r="completed",i.method="throw",i.arg=s.arg)}}}(t,i,o),n}function d(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(O){return{type:"throw",arg:O}}}t.wrap=u;var p={};function f(){}function h(){}function m(){}var g={};c(g,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(S([])));y&&y!==e&&i.call(y,o)&&(g=y);var b=m.prototype=f.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function a(n,o,l,s){var c=d(t[n],t,o);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Object(r["a"])(p)&&i.call(p,"__await")?e.resolve(p.__await).then((function(t){a("next",t,l,s)}),(function(t){a("throw",t,l,s)})):e.resolve(p).then((function(t){u.value=t,l(u)}),(function(t){return a("throw",t,l,s)}))}s(c.arg)}var n;this._invoke=function(t,i){function r(){return new e((function(e,r){a(t,i,e,r)}))}return n=n?n.then(r,r):r()}}function C(t,e){var i=t.iterator[e.method];if(void 0===i){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=d(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=m,c(b,"constructor",m),c(m,"constructor",h),h.displayName=c(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(A.prototype),c(A.prototype,l,(function(){return this})),t.AsyncIterator=A,t.async=function(e,i,r,a,n){void 0===n&&(n=Promise);var o=new A(u(e,i,r,a),n);return t.isGeneratorFunction(i)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(b),c(b,s,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var r=e.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=S,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(i,r){return o.type="throw",o.arg=t,e.next=i,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a],o=n.completion;if("root"===n.tryLoc)return r("end");if(n.tryLoc<=this.prev){var l=i.call(n,"catchLoc"),s=i.call(n,"finallyLoc");if(l&&s){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(l){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return r(n.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var n=a;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=t,o.arg=e,n?(this.method="next",this.next=n.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),_(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var a=r.arg;_(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:S(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),p}},t}}}]);