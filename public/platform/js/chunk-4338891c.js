(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4338891c"],{"26cc":function(t,e,i){"use strict";var a={getActivityList:"/common/platform.PrivateDomainFlow/activityLists",getShowPages:"/common/platform.PrivateDomainFlow/pages",getUserList:"/common/platform.Crm/users",saveActivity:"/common/platform.PrivateDomainFlow/saveActivity",delActivity:"/common/platform.PrivateDomainFlow/delActivity",getActivityInfo:"/common/platform.PrivateDomainFlow/showActivity",getAllArea:"/common/platform.area.Area/getAllArea",assignArea:"/common/platform.PrivateDomainFlow/assignArea",alertTemplates:"/common/platform.PrivateDomainFlow/alertTemplates",hoverTemplates:"/common/platform.PrivateDomainFlow/hoverTemplates",getStoreList:"/common/platform.PrivateDomainFlow/storeLists",assignStore:"/common/platform.PrivateDomainFlow/assignStore",makeupPic:"/common/platform.PrivateDomainFlow/buildAlertPic",isBind:"/common/platform.Crm/isBind",register:"/common/platform.Crm/register",getLoginUrl:"/common/platform.Crm/getLoginUrl"};e["a"]=a},7673:function(t,e,i){},"7dc6":function(t,e,i){"use strict";i("7673")},8056:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"select-store"},[i("a-drawer",{attrs:{title:"指定店铺",placement:"right",visible:t.visible,destroyOnClose:"",width:800},on:{close:t.onClose}},[i("div",{staticClass:"content"},[i("div",{staticClass:"header"},[i("div",{staticStyle:{width:"100px"}},[t._v("筛选类型：")]),i("a-select",{staticStyle:{width:"100px"},model:{value:t.is_selected,callback:function(e){t.is_selected=e},expression:"is_selected"}},[i("a-select-option",{attrs:{value:-1}},[t._v(" 全部 ")]),i("a-select-option",{attrs:{value:1}},[t._v(" 已选择 ")]),i("a-select-option",{attrs:{value:0}},[t._v(" 未选择 ")])],1),i("a-input-group",{staticStyle:{width:"300px","margin-left":"20px"},attrs:{compact:""}},[i("a-select",{staticStyle:{width:"100px"},model:{value:t.search_type,callback:function(e){t.search_type=e},expression:"search_type"}},[i("a-select-option",{attrs:{value:"merchant_name"}},[t._v(" 商家名称 ")]),i("a-select-option",{attrs:{value:"store_name"}},[t._v(" 店铺名称 ")])],1),i("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入搜索关键字"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),i("a-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1),i("a-table",{attrs:{rowKey:"store_id",pagination:t.pagination,columns:t.columns,"data-source":t.list,"row-selection":t.rowSelection,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(e,a){return i("span",{},[0==a.is_selected?i("a",{staticStyle:{"margin-right":"10px"},on:{click:function(i){return t.submit("bind",e)}}},[t._v("绑定")]):i("a",{on:{click:function(i){return t.submit("unbind",e)}}},[t._v("解除绑定")])])}}])})],1),i("div",{staticClass:"footer"},[i("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"danger",size:"large"},on:{click:function(e){return t.submit("unbind")}}},[t._v("解除绑定")]),i("a-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.submit("bind")}}},[t._v("绑定")])],1)])],1)},o=[],s=i("26cc"),n=[{dataIndex:"merchant_name",key:"merchant_name",title:"商家名称"},{dataIndex:"store_name",key:"store_name",title:"店铺名称"},{dataIndex:"store_id",key:"action",title:"操作",scopedSlots:{customRender:"action"}}],r={name:"PrivateFlowSelectStore",props:{detail:{type:Object,default:function(){return{}}}},data:function(){return{visible:!1,indeterminate:!1,checkAll:!1,list:[],pagination:{current:1,pageSize:10,total:0},selectedTypes:[{value:-1,title:"全部"},{value:1,title:"已选择"},{value:0,title:"未选择"}],is_selected:-1,search_type:"merchant_name",keyword:"",columns:n,selectedRowKeys:[],loading:!1}},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.handleRowSelectChange}}},methods:{getStoreList:function(){var t=this;this.loading=!0,this.request(s["a"].getStoreList,{activity_id:this.detail.id,is_selected:this.is_selected,search_type:this.search_type,keyword:this.keyword,page:this.pagination.current,pageSize:this.pagination.pageSize}).then((function(e){t.loading=!1,t.list=e.list,t.$set(t.pagination,"total",e.total)}))},handleTableChange:function(t){console.log(t),this.$set(this.pagination,"current",t.current),this.getStoreList()},handleRowSelectChange:function(t){console.log(t),this.selectedRowKeys=t},search:function(){this.$set(this.pagination,"current",1),this.getStoreList()},openDrawer:function(){Object.assign(this.$data,this.$options.data()),this.visible=!0,this.getStoreList()},onClose:function(){this.visible=!1},submit:function(t,e){var i=this,a={id:this.detail.id,operate:t};if(e)a.store_ids=[e];else{if(!this.selectedRowKeys.length)return void this.$message.warning("请先选择店铺哦~");a.store_ids=this.selectedRowKeys}this.request(s["a"].assignStore,a).then((function(t){i.$message.success("操作成功！"),i.getStoreList(),i.selectedRowKeys=[],i.$emit("submit")}))}}},l=r,c=(i("7dc6"),i("2877")),m=Object(c["a"])(l,a,o,!1,null,"9bc085f4",null);e["default"]=m.exports}}]);