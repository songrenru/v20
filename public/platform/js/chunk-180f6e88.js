(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-180f6e88"],{"7a66":function(t,e,a){"use strict";a.r(e);a("ac1f"),a("841c");var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"message-suggestions-list-box"},[e("a-collapse",{attrs:{accordion:""}},[e("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[t._v(" 自定义设置打印模板，可解决在电脑上打印账单，同时也支持针式三联打印机！建议使用新版打印模板 ")])],1),e("div",{staticClass:"search-box"},[e("a-row",{attrs:{type:"flex"}},[e("a-col",{attrs:{span:4}},[e("a-input-group",{attrs:{compact:""}},[e("p",{staticStyle:{"margin-top":"5px"}},[t._v("模板名称：")]),e("a-input",{staticStyle:{width:"170px"},attrs:{placeholder:"请输入模板名称"},model:{value:t.search.keyword,callback:function(e){t.$set(t.search,"keyword",e)},expression:"search.keyword"}})],1)],1),e("a-col",{staticStyle:{"margin-right":"10px"},attrs:{span:1}},[e("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.templateList(1)}}},[t._v(" 查询 ")])],1),e("a-col",{attrs:{span:1}},[e("a-button",{on:{click:function(e){return t.resetList()}}},[t._v("重置")])],1),t.oldPrintTemplateList?e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:16}},[e("router-link",{attrs:{to:{path:t.oldPrintTemplateList}}},[e("a-button",{attrs:{type:"normal"}},[t._v("老版打印模板")])],1)],1):t._e()],1)],1),e("div",{staticClass:"add-box"},[e("a-row",[1==t.role_addtemp?e("a-col",{attrs:{span:4}},[e("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.addTemplate()}}},[t._v(" 添加模板 ")])],1):t._e()],1)],1),e("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination,loading:t.loading},on:{change:t.table_change},scopedSlots:t._u([{key:"set",fn:function(a,l){return e("span",{},[1==t.role_tempset?e("a",{on:{click:function(e){return t.gotoTem(l.template_id,l.title)}}},[t._v("设置模板")]):t._e()])}},{key:"action",fn:function(a,l){return e("span",{},[1==t.role_edittemp?e("a",{on:{click:function(e){return t.addTemplate(l.template_id)}}},[t._v("编辑")]):t._e(),1==t.role_deltemp?e("a-popconfirm",{staticClass:"ant-dropdown-link",attrs:{title:"确认删除模板吗?","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(e){return t.delTemplate(l.template_id)}}},[e("a",[t._v(" | 删除")])]):t._e()],1)}}])}),t.visible?e("a-modal",{attrs:{title:t.title,width:1e3,visible:t.visible,maskClosable:!1},on:{cancel:t.handleCancel,ok:t.handleSubmit}},[e("div",{staticStyle:{display:"inline-block",width:"40%"}},[e("a-form-model",{attrs:{model:t.form,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[e("a-form-model-item",{attrs:{required:"",label:"模板标题"}},[e("a-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("a-form-model-item",{attrs:{required:"",label:"模板类型"}},[e("a-select",{attrs:{placeholder:"请选择模板类型"},on:{change:t.templateTypeChange},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[e("a-select-option",{attrs:{value:1}},[t._v("模板一")]),e("a-select-option",{attrs:{value:2}},[t._v("模板二")]),e("a-select-option",{attrs:{value:3}},[t._v("模板三")])],1)],1),3==t.form.type?e("a-form-model-item",{attrs:{label:"备注内容"}},[e("a-input",{attrs:{placeholder:"40个字以内",maxLength:40},model:{value:t.form.bak_content,callback:function(e){t.$set(t.form,"bak_content",e)},expression:"form.bak_content"}})],1):t._e(),e("a-form-model-item",{attrs:{label:"打印标题"}},[e("a-input",{model:{value:t.form.top_title,callback:function(e){t.$set(t.form,"top_title",e)},expression:"form.top_title"}})],1),e("a-form-model-item",{attrs:{required:"",label:"一行列数"}},[e("a-select",{attrs:{placeholder:"请选择模板类型"},model:{value:t.form.col_num,callback:function(e){t.$set(t.form,"col_num",e)},expression:"form.col_num"}},[e("a-select-option",{attrs:{value:3}},[t._v("3")]),e("a-select-option",{attrs:{value:4}},[t._v("4")]),e("a-select-option",{attrs:{value:5}},[t._v("5")])],1)],1),e("a-form-model-item",{attrs:{label:"说明"}},[e("a-textarea",{attrs:{placeholder:"模板说明","auto-size":{minRows:3,maxRows:5}},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1)],1)],1),e("div",{staticStyle:{display:"inline-block",width:"60%","vertical-align":"top"}},[e("h3",[1==t.form.type?e("span",[t._v("【模板一】")]):2==t.form.type?e("span",[t._v("【模板二】")]):3==t.form.type?e("span",[t._v("【模板三】")]):t._e(),t._v("效果图：")]),t._l(t.templateTypeArr,(function(a,l){return t.templateType===a.id?e("p",{key:l},[e("img",{staticStyle:{width:"100%"},attrs:{src:a.url}})]):t._e()}))],2)]):t._e(),t.showTemplate?e("printTemplate",{attrs:{templateName:t.templateName,showTemplate:t.showTemplate,tempateId:t.tempateId},on:{closeThis:t.closeDialog}}):t._e()],1)},o=[],i=a("a0e0"),n=a("da83"),s=[{title:"编号",dataIndex:"template_id",key:"template_id"},{title:"模板名称",dataIndex:"title",key:"title"},{title:"模板类型",dataIndex:"type_txt",key:"type_txt"},{title:"打印标题",dataIndex:"top_title",key:"top_title"},{title:"一行列数",dataIndex:"col_num",key:"col_num"},{title:"说明",dataIndex:"desc",key:"desc"},{title:"设置模板",dataIndex:"set",key:"set",scopedSlots:{customRender:"set"}},{title:"操作",dataIndex:"opera",key:"opera",scopedSlots:{customRender:"action"}}],r=[],p={name:"printTemplateSet",data:function(){var t=this;return{search:{keyword:""},labelCol:{span:4},wrapperCol:{span:14},pagination:{current:1,pageSize:10,total:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(t){return"共 ".concat(t," 条")},onShowSizeChange:function(e,a){return t.onTableChange(e,a)},onChange:function(e,a){return t.onTableChange(e,a)}},data:r,columns:s,title:"添加",templateType:1,templateId:0,templateTypeArr:[],loading:!1,form:{title:"",type:1,col_num:3,top_title:"",desc:"",bak_content:""},visible:!1,showTemplate:!1,tempateId:0,templateName:"",oldPrintTemplateList:"",role_addtemp:0,role_deltemp:0,role_edittemp:0,role_tempset:0}},components:{printTemplate:n["default"]},mounted:function(){this.templateList()},methods:{gotoTem:function(t,e){this.tempateId=1*t,this.templateName=e,this.showTemplate=!0},closeDialog:function(){this.showTemplate=!1},templateList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.loading=!0,1===e&&this.$set(this.pagination,"current",1),this.search["limit"]=this.pagination.pageSize,this.search["page"]=this.pagination.current,this.request(i["a"].templateList,this.search).then((function(e){t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.data=e.list,t.templateTypeArr=e.templateTypeArr,e.oldPrintTemplateList?t.oldPrintTemplateList=e.oldPrintTemplateList:t.oldPrintTemplateList="",void 0!=e.role_addtemp?(t.role_addtemp=e.role_addtemp,t.role_deltemp=e.role_deltemp,t.role_edittemp=e.role_edittemp,t.role_tempset=e.role_tempset):(t.role_addtemp=0,t.role_deltemp=0,t.role_edittemp=0,t.role_tempset=0),t.loading=!1}))},onTableChange:function(t,e){this.page=t,this.pagination.current=t,this.pagination.pageSize=e,this.templateList(),console.log("onTableChange==>",t,e)},table_change:function(t){console.log("e",t),t.current&&t.current>0&&(this.page=t.current,this.pagination.current=t.current,this.templateList())},resetList:function(){this.search={keyword:""},this.templateList()},addTemplate:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.visible=!0,this.templateId=e,this.title="添加",e>0){this.title="编辑";var a={template_id:e};this.request(i["a"].getTemplateDetail,a).then((function(e){t.form.title=e.data.title,t.form.type=e.data.type,t.templateType=e.data.type,t.form.col_num=e.data.col_num,t.form.top_title=e.data.top_title,t.form.desc=e.data.desc,void 0!=e.data.bak_content&&e.data.bak_content&&(t.form.bak_content=e.data.bak_content)}))}},handleCancel:function(){this.visible=!1,this.templateId=0,this.templateType=1,this.form={title:"",type:1,col_num:3,top_title:"",desc:""}},handleSubmit:function(){var t=this;this.form["template_id"]=this.templateId,this.request(i["a"].templateAdd,this.form).then((function(e){t.templateList(1),t.$message.success("添加成功"),t.handleCancel()}))},templateTypeChange:function(t){this.templateType=t},delTemplate:function(t){var e=this,a={template_id:t};this.request(i["a"].delTemplate,a).then((function(t){e.templateList(1),e.$message.success("删除成功")}))}}},c=p,m=(a("8852"),a("2877")),d=Object(m["a"])(c,l,o,!1,null,"0dfa171d",null);e["default"]=d.exports},8852:function(t,e,a){"use strict";a("c8af")},c8af:function(t,e,a){}}]);