(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a5d8abd","chunk-74daad79","chunk-2d0b3786"],{"1b98":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{staticClass:"dialog",attrs:{title:t.titleName,width:"800",centered:"",visible:t.dialogVisible,destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[i("div",{staticClass:"select-goods"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.keywords,expression:"!keywords"}],staticClass:"left scroll_content"},[i("a-menu",{attrs:{mode:"inline","open-keys":t.openKeys,selectedKeys:t.selectedSort},on:{openChange:t.onOpenChange,select:t.onSelect}},[t._l(t.sortList,(function(e){return[e.children&&e.children.length?i("a-sub-menu",{key:e.id},[i("span",{attrs:{slot:"title"},slot:"title"},[i("span",[t._v(t._s(e.name))])]),e.children&&e.children.length?t._l(e.children,(function(e){return i("a-menu-item",{key:e.id},[t._v(t._s(e.name))])})):t._e()],2):i("a-menu-item",{key:e.id},[t._v(t._s(e.name))])]}))],2)],1),i("div",{staticClass:"right"},[i("div",{staticClass:"top"},[t.keywords?i("a-icon",{staticClass:"fs-16 pointer",attrs:{type:"left"},on:{click:function(e){return t.backToSort()}}}):t._e(),i("a-input-search",{staticClass:"search",attrs:{placeholder:"sport"==t.source?"场馆名称":"景区名称","allow-clear":""},on:{change:t.getGoodsList,search:t.getGoodsList},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}})],1),i("div",{staticClass:"bottom"},[i("a-table",{key:"spu_table",attrs:{"row-selection":t.rowSelection,columns:t.columns,"data-source":t.tableList,rowKey:"ticket_id",scroll:{y:500},pagination:!!t.tableList.length&&t.pagination},scopedSlots:t._u([{key:"ticket_title",fn:function(e,o){return i("span",{},[i("div",{staticClass:"product-info"},[i("div",[i("img",{attrs:{src:o.image}})]),i("div",[t._v(t._s(o.title))])])])}},{key:"price",fn:function(e,o){return i("span",{},[i("span",{key:"spu_goods"},[t._v("￥"+t._s(o.price))])])}},{key:"current_stock",fn:function(e){return i("span",{},[t._v(" "+t._s(-1==e?"无限量":e)+" ")])}}])})],1)])])])},s=[],a=(i("b64b"),i("d3b7"),i("159b"),i("7db0"),i("d81d"),i("a434"),i("4d95")),r=null,l={name:"SelectShopGoods",props:{source:{type:String,default:"shipping"},targeTage:{type:Array,default:function(){return[]}},group_type:{type:Array,default:function(){return[]}},type:{type:String,default:"checkbox"},startTime:String,endTime:String,selectedList:{type:Array,default:function(){return[]}}},data:function(){return{titleName:"选择景区门票",dialogVisible:!1,start_time:0,end_time:0,rootSubmenuKeys:[],openKeys:[],columns:[{title:"门票信息",dataIndex:"ticket_title",scopedSlots:{customRender:"ticket_title"},width:"300px"},{title:"价格",dataIndex:"price",scopedSlots:{customRender:"price"},width:"200px"},{title:"当前库存",dataIndex:"stock_num",scopedSlots:{customRender:"current_stock"}}],menuId:0,hasSelected:[],selectedRowKeys:[],selectedSort:[],sortList:[],keywords:"",tableList:[],oldMenuId:"",sList:[],isSku:!1,pagination:{current:1,total:0,pageSize:10,onChange:function(t,e){return r.onPageChange(t,e)}}}},computed:{rowSelection:function(){return this.isSku?null:{selectedRowKeys:this.selectedRowKeys,type:this.type,onSelect:this.onRowSelect,onSelectAll:this.onSelectAll,getCheckboxProps:function(t){return{props:{disabled:0==t.can_be_choose}}}}}},created:function(){r=this},watch:{selectedList:function(t){this.sList=JSON.parse(JSON.stringify(t)),"sport"==this.source&&(this.titleName="选择场馆门票")}},methods:{openDialog:function(){this.dialogVisible=!0,this.sList=JSON.parse(JSON.stringify(this.selectedList)),console.log(this.selectedList,"selectedList"),this.getSortList()},init:function(){this.rootSubmenuKeys=[],this.openKeys=[],this.selectedSort=[],this.tableList=[],this.keywords="",this.start_time=new Date(this.startTime).getTime()/1e3,this.end_time=new Date(this.endTime).getTime()/1e3,this.pagination=this.$options.data().pagination},getSortList:function(){var t=this;this.request(a["a"].getMerchantSort,{source:this.source}).then((function(e){e.list&&e.list.length&&(t.sortList=e.list,t.handleDefaultSelect())}))},handleDefaultSelect:function(){var t=this;this.init(),this.sortList.forEach((function(e,i){if(t.rootSubmenuKeys.push(e.id),e.children&&e.children.length){0==i&&t.openKeys.push(e.id);var o=e.children;o.forEach((function(e,o){e.children&&e.children.length?0==o&&t.openKeys.push(e.id):0==i&&0==o&&(t.menuId=e.id)}))}else 0==i&&(t.menuId=e.id)})),this.selectedSort.push(this.menuId),this.getGoodsList()},onSelect:function(t){var e=t.key;this.selectedSort=[e],this.menuId=e,this.$set(this.pagination,"current",1),this.getGoodsList()},getGoodsList:function(){var t=this;this.tableList=[];var e={keyword:this.keywords,page:this.pagination.current,pageSize:this.pagination.pageSize,source:this.source,targeTage:this.targeTage,group_type:this.group_type};this.keywords||(e.tools_id=this.menuId),this.request(a["a"].getLifeToolsTicket,e).then((function(e){e.list&&e.list.length&&(t.tableList=JSON.parse(JSON.stringify(e.list)),t.$set(t.pagination,"total",e.count),t.handleList())}))},handleList:function(){var t=this;this.selectedRowKeys=[],this.sList.length&&("radio"==this.type?(this.sList.length>1&&(this.sList=[this.sList[0]]),this.selectedRowKeys=[this.sList[0].ticket_id]):this.sList.forEach((function(e){t.selectedRowKeys.push(e.ticket_id)}))),this.selectedRows=this.sList},handleOk:function(){var t=this.selectedRowKeys,e=this.sList;e.length?(this.$emit("submit",{ids:t,goods:e}),this.handleCancel()):this.$message.error("请选择商品")},handleCancel:function(){this.dialogVisible=!1},onOpenChange:function(t){var e=this,i=t.find((function(t){return-1===e.openKeys.indexOf(t)}));-1===this.rootSubmenuKeys.indexOf(i)?this.openKeys=t:this.openKeys.push(i)},backToSort:function(){this.keywords="",this.getGoodsList()},onRowSelect:function(t,e,i){"radio"==this.type?(this.sList=[t],this.selectedRowKeys=[t.ticket_id]):e?(this.sList.push(t),this.selectedRowKeys.push(t.ticket_id)):(this.sList.remove(t),this.selectedRowKeys.remove(t.ticket_id))},onSelectAll:function(t,e,i){var o=this;t?i.map((function(t){o.selectedRowKeys.push(t.ticket_id),o.sList.push(t)})):i.map((function(t){o.sList.remove(t),o.selectedRowKeys.remove(t.ticket_id)}))},onPageChange:function(t,e){this.$set(this.pagination,"current",t),this.getGoodsList()}}};Array.prototype.remove=function(t){var e=this.indexOf(t),i=-1;e>-1?this.splice(e,1):(this.map((function(e,o){e.goods_id==t.goods_id&&(i=o)})),i>-1&&this.splice(i,1))};var n=l,c=(i("ed37"),i("0c7c")),d=Object(c["a"])(n,o,s,!1,null,"69b1ed08",null);e["default"]=d.exports},2909:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var o=i("6b75");function s(t){if(Array.isArray(t))return Object(o["a"])(t)}i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630");function a(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var r=i("06c5");function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t){return s(t)||a(t)||Object(r["a"])(t)||l()}},"4d95":function(t,e,i){"use strict";var o={getTicketList:"life_tools/merchant.LifeToolsTicket/getList",getTicketDetail:"life_tools/merchant.LifeToolsTicket/getDetail",ticketDel:"life_tools/merchant.LifeToolsTicket/del",TicketEdit:"life_tools/merchant.LifeToolsTicket/addOrEdit",getLifeToolsList:"life_tools/merchant.LifeTools/getInformationList",setLifeToolsAttrs:"life_tools/merchant.LifeTools/setLifeToolsAttrs",getSportsOrderList:"/life_tools/merchant.SportsOrder/getOrderList",exportToolsOrder:"/life_tools/merchant.SportsOrder/exportToolsOrder",getSportsOrderDetail:"/life_tools/merchant.SportsOrder/getOrderDetail",agreeSportsOrderRefund:"/life_tools/merchant.SportsOrder/agreeRefund",refuseSportsOrderRefund:"/life_tools/merchant.SportsOrder/refuseRefund",getEditInfo:"life_tools/merchant.LifeToolsTicket/getEditInfo",getCategoryList:"life_tools/merchant.LifeToolsCategory/getCategoryList",getMapConfig:"life_tools/merchant.LifeTools/getMapConfig",getAddressList:"life_tools/merchant.LifeTools/getAddressList",addEditLifeTools:"life_tools/merchant.LifeTools/addEditLifeTools",getLifeToolsDetail:"life_tools/merchant.LifeTools/getLifeToolsDetail",delLifeTools:"life_tools/merchant.LifeTools/delLifeTools",getReplyList:"/life_tools/merchant.LifeToolsReply/searchReply",isShowReply:"/life_tools/merchant.LifeToolsReply/isShowReply",getReplyDetails:"/life_tools/merchant.LifeToolsReply/getReplyDetails",delReply:"/life_tools/merchant.LifeToolsReply/delReply",subReply:"/life_tools/merchant.LifeToolsReply/subReply",getReplyContent:"/life_tools/merchant.LifeToolsReply/getReplyContent",getCardList:"/life_tools/merchant.EmployeeCard/getCardList",editCard:"/life_tools/merchant.EmployeeCard/editCard",saveCard:"/life_tools/merchant.EmployeeCard/saveCard",delCard:"/life_tools/merchant.EmployeeCard/delCard",getSportsVerifyList:"/life_tools/merchant.SportsOrder/getVerifyList",exportVerifyRecord:"/life_tools/merchant.SportsOrder/exportVerifyRecord",getLimitedList:"/life_tools/merchant.LifeScenicLimitedAct/getLimitedList",updateLimited:"/life_tools/merchant.LifeScenicLimitedAct/addLimited",limitedChangeState:"/life_tools/merchant.LifeScenicLimitedAct/changeState",removeLimited:"/life_tools/merchant.LifeScenicLimitedAct/del",getLimitedInfo:"/life_tools/merchant.LifeScenicLimitedAct/edit",getMerchantSort:"/life_tools/merchant.LifeToolsTicket/getMerchantSort",getLifeToolsTicket:"/life_tools/merchant.LifeToolsTicket/getLifeToolsTicket",getToolsCardList:"/life_tools/merchant.LifeTools/getToolsCardList",AddOrEditToolsCard:"/life_tools/merchant.LifeTools/AddOrEditToolsCard",getToolsCardEdit:"/life_tools/merchant.LifeTools/getToolsCardEdit",delToolsCard:"/life_tools/merchant.LifeTools/delToolsCard",getAllToolsList:"/life_tools/merchant.LifeTools/getAllToolsList",getToolsCardRecord:"/life_tools/merchant.LifeTools/getToolsCardRecord",getCardOrderList:"/life_tools/merchant.LifeTools/getCardOrderList",getCardOrderDetail:"/life_tools/merchant.LifeTools/getCardOrderDetail",agreeCardOrderRefund:"/life_tools/merchant.LifeTools/agreeCardOrderRefund",refuseCardOrderRefund:"/life_tools/merchant.LifeTools/refuseCardOrderRefund",getSportsActivityList:"/life_tools/merchant.LifeToolsSportsActivity/getSportsActivityList",updateSportsActivityStatus:"/life_tools/merchant.LifeToolsSportsActivity/updateSportsActivityStatus",getSportsActivityOrderList:"/life_tools/merchant.LifeToolsSportsActivity/getSportsActivityOrderList",addSportsActivity:"/life_tools/merchant.LifeToolsSportsActivity/addSportsActivity",editSportsActivity:"/life_tools/merchant.LifeToolsSportsActivity/editSportsActivity",getTravelList:"/life_tools/merchant.LifeToolsGroupTravelAgency/getTravelList",agencyAudit:"/life_tools/merchant.LifeToolsGroupTravelAgency/audit",getStaffList:"/life_tools/merchant.LifeToolsTicket/getStaffList",getAppointList:"life_tools/merchant.LifeToolsAppoint/getList",getAppointMsg:"life_tools/merchant.LifeToolsAppoint/getToolAppointMsg",saveAppoint:"life_tools/merchant.LifeToolsAppoint/saveToolAppoint",lookAppointUser:"life_tools/merchant.LifeToolsAppoint/lookAppointUser",closeAppoint:"life_tools/merchant.LifeToolsAppoint/closeAppoint",exportAppointUserOrder:"life_tools/merchant.LifeToolsAppoint/exportUserOrder",delAppoint:"life_tools/merchant.LifeToolsAppoint/delAppoint",getSeatMap:"/life_tools/merchant.LifeToolsAppoint/getSeatMap",getAppointOrderDetail:"life_tools/merchant.LifeToolsAppoint/getAppointOrderDetail",auditRefund:"life_tools/merchant.LifeToolsAppoint/auditRefund",suspend:"life_tools/merchant.LifeToolsAppoint/suspend",getSportsSecondsKillList:"/life_tools/merchant.LifeToolsSportsSecondsKill/getSecondsKillList",saveSportsSecondsKill:"/life_tools/merchant.LifeToolsSportsSecondsKill/saveSecondsKill",ChangeSportsSecondsKill:"/life_tools/merchant.LifeToolsSportsSecondsKill/ChangeSportsSecondsKill",delSportsSecondsKill:"/life_tools/merchant.LifeToolsSportsSecondsKill/delSecondsKill",getSportsSecondsKillDetail:"/life_tools/merchant.LifeToolsSportsSecondsKill/getSecondsKillDetail",getGroupTicketList:"life_tools/merchant.group/getGroupTicketList",getGroupLifeToolsTicket:"life_tools/merchant.LifeToolsTicket/getLifeToolsTicket",addGroupTicket:"life_tools/merchant.group/addGroupTicket",delGroupTicket:"life_tools/merchant.group/delGroupTicket",editSettingData:"life_tools/merchant.group/editSettingData",editGroupTicket:"life_tools/merchant.group/editGroupTicket",getSettingDataDetail:"life_tools/merchant.group/getSettingDataDetail",getStatisticsData:"life_tools/merchant.LifeToolsGroupOrder/getStatisticsData",getOrderList:"life_tools/merchant.LifeToolsGroupOrder/getOrderList",getOrderAuditList:"/life_tools/merchant.LifeToolsGroupOrder/getAuditGroupOrderList",orderAudit:"/life_tools/merchant.LifeToolsGroupOrder/audit",groupOrderRefand:"life_tools/merchant.LifeToolsGroupOrder/groupOrderRefand",editDistributionPrice:"life_tools/merchant.LifeToolsDistribution/editDistributionPrice",getDistributionSettingDataDetail:"/life_tools/merchant.LifeToolsDistribution/getSettingDataDetail",getDistributionSettingeditSetting:"/life_tools/merchant.LifeToolsDistribution/editSetting",getAtatisticsInfo:"/life_tools/merchant.LifeToolsDistribution/getAtatisticsInfo",getDistributorList:"/life_tools/merchant.LifeToolsDistribution/getDistributorList",getLowerLevel:"/life_tools/merchant.LifeToolsDistribution/getLowerLevel",audit:"/life_tools/merchant.LifeToolsDistribution/audit",getDistributionOrderList:"/life_tools/merchant.LifeToolsDistribution/getDistributionOrderList",editDistributionOrderNote:"/life_tools/merchant.LifeToolsDistribution/editDistributionOrderNote",delDistributor:"/life_tools/merchant.LifeToolsDistribution/delDistributor",addStatement:"/life_tools/merchant.LifeToolsDistribution/addStatement",getStatementList:"/life_tools/merchant.LifeToolsDistribution/getStatement",getStatementDetail:"/life_tools/merchant.LifeToolsDistribution/getStatementDetail",lifeToolsAudit:"/life_tools/platform.LifeTools/lifeToolsAudit",auditTicket:"/life_tools/platform.LifeToolsTicket/auditTicket",getMapCity:"/g=Index&c=Map&a=suggestion",getCarParkList:"/life_tools/merchant.LifeToolsCarPark/getCarParkList",addCarPark:"/life_tools/merchant.LifeToolsCarPark/addCarPark",showCarPark:"/life_tools/merchant.LifeToolsCarPark/showCarPark",getToolsList:"/life_tools/merchant.LifeToolsCarPark/getToolsList",deleteCarPark:"/life_tools/merchant.LifeToolsCarPark/deleteCarPark",statusCarPark:"/life_tools/merchant.LifeToolsCarPark/statusCarPark",wifiList:"life_tools/merchant.LifeToolsWifi/wifiList",wifiAdd:"life_tools/merchant.LifeToolsWifi/wifiAdd",wifiShow:"life_tools/merchant.LifeToolsWifi/wifiShow",wifiStatusChange:"life_tools/merchant.LifeToolsWifi/wifiStatusChange",wifiDelete:"life_tools/merchant.LifeToolsWifi/wifiDelete",scenicMapSave:"/life_tools/merchant.LifeToolsScenicMap/saveMap",scenicMapPlaceList:"/life_tools/merchant.LifeToolsScenicMap/mapPlaceList",scenicMapPlaceSave:"/life_tools/merchant.LifeToolsScenicMap/saveMapPlace",scenicMapPlaceDel:"/life_tools/merchant.LifeToolsScenicMap/mapPlaceDel",scenicMapLineList:"/life_tools/merchant.LifeToolsScenicMap/mapLineList",scenicMapLineSave:"/life_tools/merchant.LifeToolsScenicMap/saveMapLine",scenicMapLineDel:"/life_tools/merchant.LifeToolsScenicMap/mapLineDel",scenicMapScenicList:"/life_tools/merchant.LifeToolsScenicMap/scenicList",scenicMapPlaceCatList:"/life_tools/merchant.LifeToolsScenicMap/categoryList",scenicMapPlaceCategoryDel:"/life_tools/merchant.LifeToolsScenicMap/categoryDel",scenicMapPlaceCategorySave:"/life_tools/merchant.LifeToolsScenicMap/saveCategory",scenicMapList:"/life_tools/merchant.LifeToolsScenicMap/mapList",scenicMapDel:"/life_tools/merchant.LifeToolsScenicMap/mapDel",scenicMapStatusSave:"/life_tools/merchant.LifeToolsScenicMap/saveMapStatus",changeCloseStatus:"life_tools/merchant.LifeTools/changeCloseStatus",getAddEditCardMerchantInfo:"/life_tools/merchant.LifeTools/getAddEditCardMerchantInfo"};e["a"]=o},"7a35":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:" pt-20 pl-20 pr-20 pb-20  br-10"},[i("a-spin",{attrs:{spinning:t.confirmLoading}},[i("a-tabs",{attrs:{"default-active-key":"loans"}},[i("a-tab-pane",{key:"loans",attrs:{tab:t.tabName}})],1),i("a-form-model",{ref:"ruleForm",attrs:{model:t.formData,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[i("a-card",{attrs:{bordered:!1,title:"约战基本信息"}},[i("a-form-model-item",{attrs:{label:"名称:",colon:!1,prop:"title",rules:[{required:!0,message:"名称不能为空",trigger:["blur"]}]}},[i("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:100,placeholder:"请输入名称"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),i("a-form-model-item",{attrs:{label:"约战人数:",colon:!1,help:"请填写数字",rules:[{required:!0,message:"名称不能为空",trigger:["blur"]}]}},[t._l(t.label.tags,(function(e){return[i("a-tooltip",{key:e,attrs:{title:e+"人"}},[i("a-tag",{key:e,attrs:{closable:!0},on:{close:function(){return t.handleClose(e)}}},[t._v(" "+t._s(e+"人")+" ")])],1)]})),t.label.inputVisible?i("a-input",{ref:"input",style:{width:"78px"},attrs:{type:"text",size:"small",value:t.label.inputValue},on:{change:t.handleInputChange,blur:t.handleInputConfirm,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm.apply(null,arguments)}}}):i("a-tag",{staticStyle:{background:"#fff",borderStyle:"dashed"},on:{click:t.showAddTagInput}},[i("a-icon",{attrs:{type:"plus"}}),t._v("添加 ")],1)],2),i("a-form-model-item",{attrs:{label:"选择约战方式:",colon:!1,rules:[{required:!0,message:"名称不能为空",trigger:["blur"]}]}},[i("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"请选择"},on:{change:t.handleChange},model:{value:t.formData.group_type,callback:function(e){t.$set(t.formData,"group_type",e)},expression:"formData.group_type"}},[i("a-select-option",{key:1,attrs:{value:"1"}},[t._v(" 团长请客 ")]),i("a-select-option",{key:2,attrs:{value:"2"}},[t._v(" AA ")])],1)],1),i("a-form-model-item",{attrs:{label:"约战说明:",colon:!1}},[i("a-textarea",{attrs:{placeholder:"请输入约战说明","auto-size":{minRows:3,maxRows:5}},model:{value:t.formData.desc,callback:function(e){t.$set(t.formData,"desc",e)},expression:"formData.desc"}})],1),i("a-form-model-item",{attrs:{label:"团长退款设置",prop:"join_max_num"}},[i("a-radio-group",{model:{value:t.formData.leader_back_type,callback:function(e){t.$set(t.formData,"leader_back_type",e)},expression:"formData.leader_back_type"}},[i("a-radio",{attrs:{value:0}},[t._v(" 不可以退款 ")]),i("a-radio",{attrs:{value:1}},[t._v(" 随时退款 ")]),i("a-radio",{attrs:{value:2}},[t._v(" 提前 "),i("a-input-number",{attrs:{min:0,max:999},model:{value:t.formData.leader_back_time,callback:function(e){t.$set(t.formData,"leader_back_time",e)},expression:"formData.leader_back_time"}}),t._v(" 小时退款 ")],1)],1)],1),i("a-form-model-item",{attrs:{label:"团员退款设置",prop:"join_max_num"}},[i("a-radio-group",{model:{value:t.formData.other_back_type,callback:function(e){t.$set(t.formData,"other_back_type",e)},expression:"formData.other_back_type"}},[i("a-radio",{attrs:{value:0}},[t._v(" 不可以退款 ")]),i("a-radio",{attrs:{value:1}},[t._v(" 随时退款 ")]),i("a-radio",{attrs:{value:2}},[t._v(" 提前 "),i("a-input-number",{attrs:{min:0,max:999},model:{value:t.formData.other_back_time,callback:function(e){t.$set(t.formData,"other_back_time",e)},expression:"formData.other_back_time"}}),t._v(" 小时退款 ")],1)],1)],1),i("a-form-model-item",{attrs:{label:"约战门票是否只能约战使用",prop:"join_max_num"}},[i("a-radio-group",{model:{value:t.formData.is_only_sports_activity,callback:function(e){t.$set(t.formData,"is_only_sports_activity",e)},expression:"formData.is_only_sports_activity"}},[i("a-radio",{attrs:{value:1}},[t._v(" 是 ")]),i("a-radio",{attrs:{value:0}},[t._v(" 否 ")])],1)],1)],1),i("a-card",{staticStyle:{"margin-top":"10px"},attrs:{title:"门票信息",bordered:!1}},[i("a-form-model-item",{attrs:{prop:"goods_info","wrapper-col":{span:24}}},[i("a-row",[i("a-col",{attrs:{span:3}},[i("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.addProduct()}}},[t._v(" 添加参与约战的体育馆门票 ")])],1)],1)],1),i("a-form-model-item",{attrs:{"wrapper-col":{span:24}}},[i("a-table",{directives:[{name:"show",rawName:"v-show",value:t.goodsList.length,expression:"goodsList.length"}],staticClass:"mt-20",attrs:{columns:t.columns,"data-source":t.goodsList,rowKey:"goods_id",childrenColumnName:"sku_info",defaultExpandAllRows:!0,scroll:{x:!1}},scopedSlots:t._u([{key:"action",fn:function(e,o){return i("span",{},[o.sku_info?i("span",[i("a",{staticClass:"ml-10 inline-block",on:{click:function(e){return t.removeGoods(o)}}},[t._v("删除")])]):i("span",[t._v(" ---- ")])])}}])})],1)],1)],1),i("div",{staticClass:"page-header"},[i("a-button",{staticClass:"ml-20 mt-20 mb-20",attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit()}}},[t._v(" 保存 ")])],1),i("select-goods",{ref:"selectGoods",attrs:{source:"sport",targeTage:t.label.tags,group_type:t.formData.group_type,selectedList:t.goodsList},on:{submit:t.selecrGoodsSubmit}})],1)],1)},s=[],a=i("2909"),r=(i("d81d"),i("a434"),i("4de4"),i("d3b7"),i("99af"),i("4d95")),l=i("1b98"),n=i("290c"),c=i("da05"),d={name:"SportsActivityEdit",components:{ACol:c["b"],ARow:n["a"],SelectGoods:l["default"]},data:function(){return{title:this.L("新建门票"),labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:10}},visible:!1,confirmLoading:!1,goodsList:[],tabName:"新建约战",columns:[{title:"体育馆名称",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"门票价格",dataIndex:"price",scopedSlots:{customRender:"price"}},{title:"门票",dataIndex:"tickect_name",scopedSlots:{customRender:"tickect_name"}},{title:"约战人数",dataIndex:"pin_num",scopedSlots:{customRender:"pin_num"}},{title:"团长请客价",dataIndex:"group_price",scopedSlots:{customRender:"group_price"}},{title:"团长拼团价",dataIndex:"aa_group_price",scopedSlots:{customRender:"aa_group_price"}},{title:"团员拼团价",dataIndex:"aa_price",scopedSlots:{customRender:"aa_price"}},{title:"操作",dataIndex:"goods_id",width:"100px",scopedSlots:{customRender:"action"}}],selectedRowKeys:[],form:this.$form.createForm(this),label:{tags:[],inputVisible:!1,inputValue:""},formData:{activity_id:0,title:"",desc:"",group_type:void 0,num:[],goods:[],leader_back_type:0,leader_back_time:0,other_back_type:0,other_back_time:0,is_only_sports_activity:0}}},watch:{"$route.query.activity_id":function(t){t>0?(this.formData.activity_id=t,this.tabName="编辑约战",this.getEditInfo()):(this.tabName="新增约战",this.getDetail())}},mounted:function(){this.formData.activity_id=this.$route.query.activity_id,this.form=this.$form.createForm(this),this.formData.activity_id>0?this.getEditInfo():this.getDetail()},activated:function(){this.formData.activity_id=this.$route.query.activity_id,this.form=this.$form.createForm(this),this.formData.activity_id>0?this.getEditInfo():this.getDetail()},methods:{handleChange:function(t){this.formData.group_type=t},addProduct:function(){return 0==this.label.tags.length?(this.$message.error("请添加约战人数"),!1):void 0==this.formData.group_type||""==this.formData.group_type?(this.$message.error("选择约战方式"),!1):void this.$refs.selectGoods.openDialog()},dellProduct:function(){this.goodsList=[]},selecrGoodsSubmit:function(t){this.goodsList=[],console.log(t,"e-----selecrGoodsSubmit-----选择商品回调"),t.goods=t.goods.map((function(t){return t.type="sport",t.act_price=t.price,t.act_stock_num=t.stock_num,t.title&&(t.tickect_name=t.title),t})),this.goodsList=t.goods},removeGoods:function(t){if(t.ticket_id)for(var e=0;e<this.goodsList.length;e++)this.goodsList[e].ticket_id===t.ticket_id&&this.goodsList.splice(e,1)},handleClose:function(t){var e=this.label.tags.filter((function(e){return e!==t}));this.label.tags=e},handleInputChange:function(t){this.label.inputValue=t.target.value},handleInputConfirm:function(){var t=this.label.inputValue,e=this.label.tags;t&&-1===e.indexOf(t)&&(e=[].concat(Object(a["a"])(e),[t])),this.label.tags=e,this.label.inputVisible=!1,this.label.inputValue=""},showAddTagInput:function(){this.label.inputVisible=!0,this.$nextTick((function(){this.$refs.input.focus()}))},handleSubmit:function(){var t=this;return""==this.formData.title?(this.$message.error("请输入约战名称"),!1):0==this.goodsList.length?(this.$message.error("请添加体育馆门票"),!1):0==this.label.tags.length?(this.$message.error("请添加约战人数"),!1):void 0==this.formData.group_type||""==this.formData.group_type?(this.$message.error("选择约战方式"),!1):(this.formData.goods=this.goodsList,this.formData.num=this.label.tags,void this.request(r["a"].addSportsActivity,this.formData).then((function(e){t.$message.success("保存成功！"),t.formData.activity_id=0,setTimeout((function(){t.$message.destroy(),t.confirmLoading=!1,t.$router.push({path:"/merchant/merchant.life_tools/sportsActivityList"})}),1500)})).catch((function(e){t.confirmLoading=!1})))},handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.ticket_id="0",t.form=t.$form.createForm(t)}),500)},getEditInfo:function(){var t=this;this.request(r["a"].editSportsActivity,{activity_id:this.formData.activity_id}).then((function(e){t.formData={activity_id:e.data.activity_id,title:e.data.title,desc:e.data.desc,group_type:e.data.group_type,num:e.num,goods:e.goods,leader_back_type:e.data.leader_back_type,leader_back_time:e.data.leader_back_time,other_back_type:e.data.other_back_type,other_back_time:e.data.other_back_time,is_only_sports_activity:e.data.is_only_sports_activity},t.label.tags=e.num,t.goodsList=e.goods}))},getDetail:function(){this.formData={activity_id:0,title:"",desc:"",group_type:[],num:[],goods:[],leader_back_type:0,leader_back_time:0,other_back_type:0,other_back_time:0,is_only_sports_activity:0},this.label.tags=[],this.goodsList=[]}}},f=d,p=i("0c7c"),u=Object(p["a"])(f,o,s,!1,null,null,null);e["default"]=u.exports},ed37:function(t,e,i){"use strict";i("f8a1")},f8a1:function(t,e,i){}}]);