(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d721828"],{"464b":function(t,e,i){t.exports=i.p+"img/qyhelp1.a6897814.png"},74187:function(t,e,i){"use strict";i("de563")},a463:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"set-box"},[a("a-page-header",{staticClass:"content-p",attrs:{title:"基本配置"}}),a("div",{staticClass:"content-f",staticStyle:{float:"left"}},[a("br"),a("div",{staticClass:"content-msg"},[a("div",{staticClass:"content-titles"},[t._v(" 复制以下信息并填入到 "),a("span",{staticClass:"focusTip"},[t._v("企业微信后台")]),a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},[a("img",{attrs:{width:"550",src:i("464b")}})]),a("a-icon",{staticClass:"pointer",staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1),a("div",{staticClass:"content-ip"},[a("div",{staticClass:"content-t"},[t._v("可信IP地址:"+t._s(t.trusted_ip))]),a("div",{staticStyle:{float:"left","margin-left":"5px"}},[a("a-button",{staticClass:"add-goods",staticStyle:{height:"24px",padding:"0 5px"},attrs:{type:"primary"},on:{click:function(e){return t.copyContent(1)}}},[t._v("复制")])],1)]),a("br"),a("div",{staticStyle:{float:"left",width:"100%","margin-top":"10px"}},[a("div",{staticClass:"content-t"},[t._v("信息加密公钥:私钥内容")]),a("div",{staticStyle:{float:"left","margin-left":"5px"}},[a("a-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.private_key,expression:"private_key",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"add-goods",staticStyle:{height:"24px",padding:"0 5px"},attrs:{type:"primary"}},[t._v("复制")]),a("a-textarea",{staticClass:"private_key_box key_hide",model:{value:t.private_key,callback:function(e){t.private_key=e},expression:"private_key"}})],1)]),a("div",{staticStyle:{float:"left",width:"100%","margin-top":"10px"}},[a("div",{staticClass:"content-t"},[t._v("私钥文件")]),a("div",{staticStyle:{float:"left","margin-left":"5px"}},[a("a",{attrs:{href:t.private_key_file,download:t.private_key_file_name}},[a("a-icon",{attrs:{type:"download"}})],1)])]),a("div",{staticStyle:{float:"left",width:"100%","margin-top":"10px"}},[a("div",{staticClass:"content-t"},[t._v("公钥内容")]),a("div",{staticStyle:{float:"left","margin-left":"5px"}},[a("a-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.public_key,expression:"public_key",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"add-goods",staticStyle:{height:"24px",padding:"0 5px"},attrs:{type:"primary"}},[t._v("复制")]),a("a-textarea",{staticClass:"public_key_box key_hide",model:{value:t.public_key,callback:function(e){t.public_key=e},expression:"public_key"}})],1)]),a("div",{staticStyle:{float:"left",width:"100%","margin-top":"10px"}},[a("div",{staticClass:"content-t"},[t._v("公钥文件")]),a("div",{staticStyle:{float:"left","margin-left":"5px"}},[a("a",{attrs:{href:t.public_key_file,download:t.public_key_file_name}},[a("a-icon",{attrs:{type:"download"}})],1)])])]),a("a-form",{attrs:{form:t.form,"label-col":{span:5},"wrapper-col":{span:12},confirmLoading:t.confirmLoading},on:{submit:t.handleSubmit}},[a("div",{staticClass:"content-msg",staticStyle:{height:"200px"}},[a("div",{staticClass:"content-titles"},[t._v(" 将"),a("span",{staticClass:"focusTip"},[t._v("企业微信后台会话存档")]),t._v("配置页面的Secret复制粘贴到下框中 "),a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},[a("img",{attrs:{width:"550",src:i("dbfc")}})]),a("a-icon",{staticClass:"pointer",staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1),a("div",{staticClass:"content-ip"},[a("a-form-item",{staticStyle:{"margin-left":"150px"},attrs:{label:"会话存档Secret:"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["secret",{initialValue:t.secret,rules:[{required:!0,message:"请填会话存档Secret!"}]}],expression:"['secret', { initialValue:secret,rules: [{ required: true, message: '请填会话存档Secret!' }] }]"}],staticStyle:{width:"280px"},attrs:{placeholder:"会话存档Secret"}})],1)],1),a("div",{staticClass:"content-ip",staticStyle:{"margin-top":"-20px"}},[a("a-form-item",{staticStyle:{"margin-left":"150px"},attrs:{label:"公钥版本号:"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["version_number",{initialValue:t.version_number,rules:[{required:!0,message:"请填写公钥版本号!"}]}],expression:"['version_number', { initialValue:version_number,rules: [{ required: true, message: '请填写公钥版本号!' }] }]"}],staticStyle:{width:"280px"},attrs:{placeholder:"公钥版本号"}})],1)],1)]),a("div",{staticClass:"content-msg",staticStyle:{height:"80px","padding-top":"18px"}},[a("a-form-item",{staticStyle:{"margin-left":"150px"},attrs:{label:"会话存档状态:"}},[a("a-switch",{attrs:{checked:t.is_checked},on:{change:t.onChange}})],1)],1),a("a-button",{staticStyle:{margin:"20px 50px 20px 20px",float:"right"},attrs:{type:"primary","html-type":"submit"}},[t._v(" 保存 ")])],1)],1)],1)},s=[],r=i("53ca"),o=i("a0e0"),n=i("ca00"),c={data:function(){return{form:this.$form.createForm(this,{name:"coordinated"}),confirmLoading:!1,is_checked:!0,secret:"",version_number:"",tokenName:"",sysName:"",trusted_ip:"",private_key:"",private_key_file:"",private_key_file_name:"",public_key:"",public_key_file:"",public_key_file_name:"",id:"",audit_id:""}},created:function(){var t=Object(n["i"])(location.hash);t?(this.tokenName=t+"_access_token",this.sysName=t):this.sysName="village",this.getEditInfo()},methods:{getEditInfo:function(){var t=this,e={};this.tokenName&&(e["tokenName"]=this.tokenName),this.request(o["a"].getConversationSet,e).then((function(e){console.log("rere",e),"object"==Object(r["a"])(e)&&(t.trusted_ip=e.trusted_ip,t.private_key=e.private_key,t.private_key_file=e.private_key_file,t.public_key=e.public_key,t.public_key_file=e.public_key_file,t.public_key_file_name=e.public_key_file_name,t.private_key_file_name=e.private_key_file_name,t.id=e.id,t.version_number=e.key_version,t.is_checked=e.is_checked,t.secret=e.secret,t.audit_id=e.audit_id)}))},handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,i){if(t)e.confirmLoading=!1;else{var a=e;a.tokenName&&(i["tokenName"]=a.tokenName),i.is_checked=e.is_checked,i.id=e.id,i.audit_id=e.audit_id,console.log("Received values of form: ",i),e.request(o["a"].conversationSet,i).then((function(t){t&&(e.$message.success("保存成功"),e.getEditInfo()),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",i)}),1500)}))}}))},onChange:function(t){console.log("a-switch to ".concat(t)),this.is_checked=t},copyContent:function(t){var e="";if(1===t){e=this.trusted_ip;var i=document.createElement("input");i.value=e,document.body.appendChild(i),i.select(),document.execCommand("Copy"),document.body.removeChild(i),this.$message.success("复制成功")}},onCopy:function(){this.$message.success("复制成功")},onError:function(t){console.log("copy err",t),this.$message.warning("复制失败了")}}},l=c,p=(i("74187"),i("2877")),d=Object(p["a"])(l,a,s,!1,null,null,null);e["default"]=d.exports},dbfc:function(t,e,i){t.exports=i.p+"img/qyhelp2.3de3f3cc.png"},de563:function(t,e,i){}}]);