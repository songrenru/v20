(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b662232","chunk-0244bdf2"],{2061:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-drawer",{attrs:{title:e.modalTitle,width:1300,visible:e.visible,bodyStyle:{padding:"0 25px"}},on:{close:e.onClose}},[i("a-table",{staticClass:"table_con",attrs:{rowKey:function(e){return e.id},loading:e.tableLoading,pagination:e.pageInfo,columns:e.columns,"data-source":e.alertList,bordered:""},on:{change:e.tableChange},scopedSlots:e._u([{key:"action",fn:function(t,a){return[i("a-button",{attrs:{type:"link"},on:{click:function(t){return e.addAlert(a)}}},[e._v("详情")])]}},{key:"channelId",fn:function(t,a){return[i("div",{staticStyle:{width:"170px","text-align":"center"}},[e._v(" "+e._s(a.channel_id?a.channel_id:"--")+" ")])]}},{key:"pictureUrl",fn:function(t,a){return[a.picture_url?i("viewer",{attrs:{images:[a.picture_url]}},[i("img",{staticStyle:{width:"50px",height:"50px","border-radius":"5px"},attrs:{src:a.picture_url}})]):e._e()]}}])}),i("alertAddModal",{attrs:{id:e.event_id,visible:e.alertVisible},on:{close:e.closeAdd}})],1)},n=[],l=(i("a9e3"),i("8bbf")),r=i.n(l),s=i("768c"),c=(i("0808"),i("6944")),o=i.n(c);r.a.use(o.a);var d=200,u=[{title:"事件时间",dataIndex:"date_time",key:"date_time",width:d+40},{title:"事件类型",key:"event_type",dataIndex:"event_type",width:d-80},{title:"事件描述",key:"event_description",dataIndex:"event_description",width:d-40},{title:"图片URL",key:"picture_url",dataIndex:"picture_url",width:d-100,scopedSlots:{customRender:"pictureUrl"}},{title:"备注",key:"event_remark",dataIndex:"event_remark",width:d},{title:"操作",key:"action",width:d-100,scopedSlots:{customRender:"action"}}],f={props:{visible:{type:Boolean,default:!1},camera_id:{type:[String,Number],default:0}},watch:{visible:{handler:function(e){e&&this.camera_id&&(this.pageInfo.camera_id=this.camera_id,this.getAlertList())},immediate:!0}},components:{alertAddModal:s["default"]},data:function(){return{event_id:0,modalTitle:"监控事件报警",tableLoading:!1,columns:u,alertList:[],alertVisible:!1,pageInfo:{current:1,pageSize:10,total:0,page:1},cameraInfo:{}}},methods:{onClose:function(){this.$emit("close")},addAlert:function(e){this.alertVisible=!0,this.event_id=e.id},closeAdd:function(){this.alertVisible=!1,this.event_id=0},getAlertList:function(){var e=this;this.tableLoading=!0,this.request("/community/village_api.CameraDevice/getDeviceAlarmEventList",this.pageInfo).then((function(t){e.alertList=t.alarm_list,e.cameraInfo=t.cameraInfo,e.pageInfo.total=t.count,e.tableLoading=!1,t.cameraInfo.camera_sn&&t.cameraInfo.camera_name&&(e.modalTitle="设备编号："+t.cameraInfo.camera_sn+"      设备名称："+t.cameraInfo.camera_name)})).catch((function(t){e.tableLoading=!1}))},tableChange:function(e,t,i){console.log(e,t,i),this.pageInfo.page=e.current,this.pageInfo.current=e.current,this.pageInfo.pageSize=e.pageSize,this.getAlertList()}}},h=f,m=(i("6041"),i("2877")),p=Object(m["a"])(h,a,n,!1,null,"5f081e8b",null);t["default"]=p.exports},"577f":function(e,t,i){},6041:function(e,t,i){"use strict";i("c8a0")},"768c":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-modal",{attrs:{title:"告警事件详情",width:800,visible:e.visible,footer:null},on:{ok:e.handleOk,cancel:e.handleCancel}},[i("div",{staticClass:"detail_con"},e._l(e.detailList,(function(t,a){return i("div",{key:a,staticClass:"detail_item"},[i("div",{staticClass:"left_label"},[e._v(e._s(t.label)+"：")]),"text"==t.type?i("div",{staticClass:"right_value"},[e._v(e._s(t.value))]):e._e(),t.value&&"image"==t.type?i("viewer",{attrs:{images:[t.value]}},[i("img",{staticStyle:{width:"50px",height:"50px","border-radius":"5px"},attrs:{src:t.value}})]):e._e()],1)})),0)])},n=[],l=(i("a9e3"),i("8bbf")),r=i.n(l),s=(i("0808"),i("6944")),c=i.n(s);r.a.use(c.a);var o={props:{visible:{type:Boolean,default:!1},id:{type:[String,Number],default:0}},watch:{visible:{handler:function(e){e&&this.id&&this.getDetails()},immediate:!0}},data:function(){return{detailList:[]}},methods:{handleOk:function(){this.$emit("close")},handleCancel:function(){this.$emit("close")},getDetails:function(){var e=this;this.request("/community/village_api.CameraDevice/getDeviceAlarmInfo",{id:this.id}).then((function(t){e.detailList=t.alarmShow}))}}},d=o,u=(i("c036"),i("2877")),f=Object(u["a"])(d,a,n,!1,null,"c28caa42",null);t["default"]=f.exports},c036:function(e,t,i){"use strict";i("577f")},c8a0:function(e,t,i){}}]);