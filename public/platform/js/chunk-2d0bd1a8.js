(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd1a8"],{"2b24":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"table-operator",staticStyle:{"margin-top":"25px"}},[e("a-card",{attrs:{bordered:!1}},[e("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(a){return t.$refs.createModal.add(t.cat_id)}}},[t._v("添加子分类")]),e("a-table",{staticStyle:{"margin-top":"15px"},attrs:{columns:t.columns,"data-source":t.list,pagination:t.pagination},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(a,i){return e("span",{},[e("a",{on:{click:function(a){return t.$refs.createModal.save(i.cat_id,i.cat_name,i.sort,i.status)}}},[t._v("修改")]),e("a-popconfirm",{staticClass:"ant-dropdown-link",staticStyle:{"margin-left":"20px"},attrs:{title:"确认删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(a){return t.deleteConfirm(i.cat_id)}}},[e("a",{attrs:{href:"#"}},[t._v("删除")])])],1)}},{key:"status",fn:function(a,i){return e("span",{},[1==i.status?e("span",{staticStyle:{color:"green"}},[t._v("正常")]):e("span",{staticStyle:{color:"red"}},[t._v("关闭")])])}}])}),e("add-grid-event",{ref:"createModal",attrs:{height:800,width:1200},on:{ok:t.handleOks}})],1)],1)},n=[],s=e("5530"),o=(e("ac1f"),e("841c"),e("567c")),c=e("a40e"),r={name:"GridChildEvent",components:{addGridEvent:c["default"]},data:function(){return{cat_id:0,pagination:{pageSize:10,total:10},page:1,list:[],search:{page:1,cat_id:0}}},mounted:function(){this.cat_id=this.$route.params.cat_id,this.cat_id?sessionStorage.setItem("cat_id",this.cat_id):this.cat_id=sessionStorage.getItem("cat_id"),this.fetch({cat_id:this.cat_id})},methods:{handleOks:function(){this.getList(this.cat_id)},handleTableChange:function(t,a,e){console.log(t);var i=Object(s["a"])({},this.pagination);i.current=t.current,this.pagination=i,this.fetch(Object(s["a"])({results:t.pageSize,page:t.current,sortField:e.field,sortOrder:e.order,cat_id:this.cat_id},a))},fetch:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.request(o["a"].getEventCategoryList,a).then((function(a){var e=Object(s["a"])({},t.pagination);e.total=a.count,e.pageSize=a.total_limit,t.list=a.list,t.pagination=e}))},getList:function(t){var a=this;this.search["page"]=this.page,this.search["cat_id"]=t,this.request(o["a"].getEventCategoryList,this.search).then((function(t){a.list=t.list,a.pagination.total=t.count?t.count:0,a.pagination.pageSize=t.total_limit?t.total_limit:10})),console.log(this.pagination)},deleteConfirm:function(t){var a=this;this.request(o["a"].editEventCategory,{cat_id:t,status:4}).then((function(t){a.getList(a.cat_id),a.$message.success("删除成功")}))}},computed:{columns:function(){var t=[{title:"分类名称",dataIndex:"cat_name",key:"cat_name"},{title:"状态",key:"status",dataIndex:"",scopedSlots:{customRender:"status"}},{title:"排序值",dataIndex:"sort",key:"sort"},{title:"操作",key:"action",dataIndex:"",scopedSlots:{customRender:"action"}}];return t}}},d=r,l=e("2877"),u=Object(l["a"])(d,i,n,!1,null,"612ccc22",null);a["default"]=u.exports}}]);