(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc7325d0"],{"499a":function(e,t,i){"use strict";i.r(t);i("b0c0");var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:750,title:e.title,destroyOnClose:!0,visible:e.visible,maskClosable:!1,"confirm-loading":e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-collapse",{attrs:{accordion:""}},[t("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[t("p",[e._v(" 在快捷账单模块，可为收费对象绑定收费项目并且支持快速手动生成一次性账单，若有需要修改或作废的账单，也可在收银台进行费用修改及账单作废。"),t("br"),e._v(" 1、生成的一次性账单有缴费时效，若业主没有在该时效内进行缴费，账单自动作废。"),t("br"),e._v(" 2、一次性账单在生成时，若该时间范围内已有待缴账单生成，则不支持生成一次性账单。"),t("br"),e._v(" 3、账单生成周期设置按年生成时，规则说明："),t("br"),t("font",{staticStyle:{color:"#aaa"}},[e._v(" 例，账单开始生成时间：2022-01-01，收费周期为“ 1 ”年（默认值），收费截止时间为（ 自动获取值 2022-12-30 ），可对收费截止时间进行修改，修改时间只能大于/等于2022-12-30。 大于“2022-12-30”时间，按“日”计算费用，例：收费截止时间（ 修改为 2023-01-20 ），那这个时间比 “ 2022-12-30 ”多 20 天，这个20天的物业费用按照 每日物业费* 20天计算")]),t("br"),t("font",{staticStyle:{color:"#c35151"}},[e._v(" 每日物业费 规则= 按年的收费金额 / 365天进行计算。")]),t("br"),e._v(" 4、账单生成周期设置按月生成时，规则说明："),t("br"),t("font",{staticStyle:{color:"#aaa"}},[e._v(" 例，账单开始生成时间：2022-01-01，收费周期为“ 1 ”月（默认值）， 收费截止时间为（ 自动获取值 2022-01-30 ），可对收费截止时间进行修改，修改的时间只能大于/等于2022-01-30。 大于“2022-01-30”时间，按“日”计算费用，例：收费截止时间（ 修改为 2022-03-20 ），那这个时间比 “ 2022-01-30 ”多1个月 20天，1个月按照月收费标准进行收费，这个20天的物业费用按照 每日物业费* 20天计算")]),t("br"),t("font",{staticStyle:{color:"#c35151"}},[e._v("每日物业费 规则= 按月的收费金额 / 30天进行计算")]),t("br"),e._v(" 5、账单生成周期设置按日生成时，规则说明："),t("br"),t("font",{staticStyle:{color:"#aaa"}},[e._v(" 例，账单开始生成时间：2022-01-01，收费周期为“ 1 ”日（默认值），收费截止时间为（ 自动获取值 2022-01-02 ），可对收费截止时间进行修改，修改时间只能大于/等于2022-01-02。 大于“2022-01-02”时间，按“日”计算费用，例：收费截止时间（ 修改为 2022-01-22 ），那这个时间比 “ 2022-01-02 ”多 20 天，这个20天的物业费用按照 每日物业费* 20天计算")]),t("br")],1)])],1),t("div",{staticClass:"modal_box"},[t("div",{staticClass:"flex_text_box"},[t("div",{staticClass:"text_1"},[e._v("收费项：")]),t("a-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择收费项"},on:{change:e.projectChange}},e._l(e.project_list,(function(i){return t("a-select-option",{attrs:{value:i.id}},[e._v(" "+e._s(i.name)+" ")])})),1)],1),t("div",{staticClass:"flex_text_box margin_top_10"},[t("div",{staticClass:"text_1"},[e._v("收费标准：")]),t("a-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择消费标准"},on:{change:e.ruleChange},model:{value:e.rule_id,callback:function(t){e.rule_id=t},expression:"rule_id"}},e._l(e.rule_list,(function(i){return t("a-select-option",{attrs:{value:i.id}},[e._v(" "+e._s(i.charge_name)+" ")])})),1)],1),e.is_show_area?t("div",{staticClass:"flex_text_box margin_top_10",staticStyle:{width:"500px"}},[t("div",{staticClass:"text_1"},[e._v(e._s(e.unit_gage)+"(自定义计量单位数值)：")]),t("a-input",{staticClass:"input_style margin_left_10",staticStyle:{width:"180px"},attrs:{placeholder:"请输入自定义单位数值"},on:{change:e.unitGageChange},model:{value:e.custom_value,callback:function(t){e.custom_value=t},expression:"custom_value"}})],1):e._e(),e.is_show_order_time?t("div",{staticClass:"flex_text_box margin_top_10",staticStyle:{width:"500px"}},[t("div",{staticClass:"text_1"},[e._v("账单开始生成时间：")]),t("a-date-picker",{attrs:{mode:e.date_status,format:e.dateFormat,value:e.dateValue,placeholder:"请选择时间"},on:{change:e.onChangeTime}}),t("span",{staticStyle:{"font-size":"4px"}},[e._v("不填默认下一个缴费日")])],1):e._e(),e.is_show_order_time&&e.config_customization.is_grapefruit_prepaid&&e.bill_create_set_tmp>1?t("div",{staticClass:"flex_text_box margin_top_10"},[t("div",{staticClass:"text_1"},[e._v("账单合并生成：")]),t("a-radio-group",{staticClass:"input_style margin_left_10",attrs:{name:"radioGroup","default-value":0},model:{value:e.per_one_order,callback:function(t){e.per_one_order=t},expression:"per_one_order"}},[t("a-radio",{attrs:{value:0}},[e._v("是")]),t("a-radio",{attrs:{value:1}},[e._v("否")])],1),t("span",{staticStyle:{"font-size":"4px"}},[e._v("默认为是。选择否将结合收费周期值来生成多笔按1个月计费的订单,请谨慎操作!")])],1):e._e(),e.is_show_order_time?t("div",{staticClass:"flex_text_box margin_top_10",staticStyle:{width:"500px"}},[t("div",{staticClass:"text_1"},[e._v("收费周期：")]),t("a-input",{staticClass:"input_style margin_left_10",staticStyle:{width:"200px"},attrs:{placeholder:"请输入收费周期时长"},on:{change:e.cycleChange},model:{value:e.cycle,callback:function(t){e.cycle=t},expression:"cycle"}}),t("span",{staticStyle:{"font-size":"4px"}},[e._v(e._s(e.cycle_set)+"（不填默认1）")])],1):e._e(),e.is_show_order_time?t("div",{staticClass:"flex_text_box margin_top_10",staticStyle:{width:"500px"}},[t("div",{staticClass:"text_1"},[e._v("收费截止时间：")]),t("a-date-picker",{attrs:{value:e.dateEndTime,mode:e.date_endTime,format:e.dateFormat,placeholder:"请选择收费截止时间"},on:{change:e.onChangeTime1}})],1):e._e(),t("div",{staticClass:"flex_text_box margin_top_10 margin_bottom_10",staticStyle:{width:"500px"}},[t("div",{staticClass:"text_1"},[e._v("缴费时效：")]),t("a-input",{staticClass:"input_style margin_left_10",staticStyle:{width:"200px"},attrs:{placeholder:"请输入缴费时效"},model:{value:e.expires,callback:function(t){e.expires=t},expression:"expires"}}),t("span",{staticStyle:{"font-size":"4px"}},[e._v("小时（不填默认1）")])],1)]),e.ruleDetailShow?t("div",{staticClass:"rule_detail"},[t("a-descriptions",{attrs:{title:"基本信息"}},e._l(e.ruleDetail,(function(i,a){return i.is_show?t("a-descriptions-item",{key:a,attrs:{label:i.title}},[e._v(" "+e._s(i.value)+" ")]):e._e()})),1),t("a-descriptions",{attrs:{title:"滞纳金设置"}},e._l(e.ruleLateDetail,(function(i,a){return t("a-descriptions-item",{key:a,attrs:{label:i.title,span:"2"}},[e._v(" "+e._s(i.value)+" ")])})),1)],1):e._e()],1)},s=[],l=i("ade3"),o=(i("ac1f"),i("5319"),i("a0e0")),r=i("c1df"),n=i.n(r),c={components:{},data:function(){var e;return e={moment:n.a,title:"快捷生成账单",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,key:"",project_id:"",is_cycle:0,cycle_set:"",cycle:"",custom_value:"",expires:"",rule_list:[],rule_id:"",ruleDetailShow:!1,ruleDetail:[],ruleLateDetail:[],project_list:[],unit_gage:"",valid_time:1,contract_time_end:0,date_status:"date",date_endTime:"date",dateFormat:"YYYY-MM-DD",dateEndTime:"",dateValue:"",isOpen:!1,isOpen1:!1,is_show_order_time:!1,is_show_area:!1},Object(l["a"])(e,"unit_gage",""),Object(l["a"])(e,"per_one_order",0),Object(l["a"])(e,"config_customization",{life_tools:-1,is_grapefruit_prepaid:0}),Object(l["a"])(e,"bill_create_set_tmp",0),e},mounted:function(){},methods:{add:function(e){console.log("room_id",e),this.key=e,this.visible=!0,this.rule_id="",this.expires="",this.cycle="",this.custom_value="",this.project_id="",this.rule_list=[],this.ruleDetailShow=!1,this.is_show_order_time=!1,this.is_show_area=!1,this.unit_gage="",this.per_one_order=0,this.bill_create_set_tmp=0,this.getConfigCustomization(),this.ChargeProjectLists()},getConfigCustomization:function(){var e=this;this.request(o["a"].getConfigCustomization).then((function(t){console.log("+++++++",t),t&&(e.config_customization=t)}))},handleChange:function(e){this.is_input=!1,2==e&&(this.post.refund_money=this.pay_money,this.is_input=!0)},handleSubmit:function(){var e=this,t="";if(this.dateEndTime){var i=new Date(this.dateEndTime);t=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()}var a="";if(this.dateValue){var s=new Date(this.dateValue);console.log("dateEndTime22",s),a=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate()}return"请选择消费标准"===this.rule_id||""===this.rule_id?(this.$message.error("请选择消费标准"),!1):"0"===this.expires?(this.$message.error("缴费时效不能为0"),!1):"0"===this.cycle?(this.$message.error("收费周期不能为0"),!1):(console.log("cycle111",this.cycle),console.log("expires111",this.expires),void this.request(o["a"].quickCall,{project_id:this.project_id,rule_id:this.rule_id,end_time:t,start_time:a,expires:this.expires,key:this.key,custom_value:this.custom_value,cycle:this.cycle,per_one_order:this.per_one_order}).then((function(t){e.$message.success("添加成功"),e.visible=!1,e.rule_id="",e.project_id="",e.rule_list=[],e.ruleDetail=[],e.ruleLateDetail=[],e.ruleDetailShow=!1,e.is_cycle=!1,e.cycle_set="",e.cycle="",e.custom_value="",e.$emit("ok")})))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.rule_id="",e.project_id="",e.ruleDetail=[],e.ruleLateDetail=[],e.ruleDetailShow=!1,e.is_cycle=!1,e.cycle_set="",e.cycle="",e.custom_value="",e.form=e.$form.createForm(e)}),500)},RuleInfo:function(e){var t=this,i="";if(this.dateEndTime){var a=new Date(this.dateEndTime);console.log("dateEndTime22",a),i=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}var s="";if(this.dateValue){var l=new Date(this.dateValue);console.log("dateEndTime22",l),s=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate()}console.log("dateEndTime11",this.dateEndTime),console.log("end_time11",i),this.bill_create_set_tmp=0,this.request(o["a"].getQuickRuleInfo,{rule_id:e,cycle:this.cycle,custom_value:this.custom_value,start_time:s,end_time:i,key:this.key}).then((function(e){console.log("RuleInfo=============",e),2==e.fees_type&&""!=e.unit_gage?t.is_show_area=!0:t.is_show_area=!1,1==e.charge_type||"water"==e.order_type||"electric"==e.order_type||"gas"==e.order_type?t.is_show_order_time=!1:t.is_show_order_time=!0,t.is_cycle&&(t.bill_create_set_tmp=e.bill_create_set,1==e.bill_create_set?t.cycle_set="日":2==e.bill_create_set?t.cycle_set="月":t.cycle_set="年"),t.unit_gage=e.unit_gage,t.valid_time=e.charge_valid_time1,t.contract_time_end=e.contract_time_end,t.date_status="date",t.date_endTime="date",t.dateFormat="YYYY-MM-DD",t.dateEndTime=e.end_time,t.dateValue=e.start_time,t.ruleDetailShow=!0,t.ruleDetail=e.ruleList,t.ruleLateDetail=e.ruleLateList}))},ChargeRuleLists:function(e){var t=this;this.request(o["a"].ChargeRuleLists,{charge_project_id:e}).then((function(e){console.log("ChargeRuleLists",e),t.rule_list=e}))},projectChange:function(e){var t=this;this.request(o["a"].ProjectInfo,{id:e}).then((function(e){t.cycle_set="",2==e.type?t.is_cycle=1:t.is_cycle=0})),this.project_id=e,this.rule_list=[],this.rule_id="请选择消费标准",this.ruleDetailShow=!1,this.ruleDetail=[],this.ruleLateDetail=[],this.expires="",this.cycle="",this.dateEndTime="",this.ChargeRuleLists(e)},ChargeProjectLists:function(){var e=this;this.request(o["a"].ChargeProjectLists,{}).then((function(t){console.log("ChargeProjectLists",t),e.project_list=t}))},onOpenChange:function(e,t){this[t]=e},cycleChange:function(){this.dateEndTime="",this.RuleInfo(this.rule_id)},unitGageChange:function(){this.dateEndTime="",this.RuleInfo(this.rule_id)},ruleChange:function(e){this.rule_id=e,this.dateValue="",this.dateEndTime="",this.area_measure="",this.expires="",this.cycle="",this.RuleInfo(e)},onChange:function(e){console.log("change事件",e)},onChangeTime:function(e,t){console.log(t);var i=t,a=this.valid_time,s=this.contract_time_end;return new Date(i.replace(/-/g,"/"))<new Date(a.replace(/-/g,"/"))?(this.$message.error("账单生效时间不能小于"+this.valid_time),!1):new Date(i.replace(/-/g,"/"))>new Date(s.replace(/-/g,"/"))&&0!=this.contract_time_end?(this.$message.error("账单生效时间不能大于"+this.contract_time_end),!1):(this.dateValue=e,void this.cycleChange())},onChangeTime1:function(e,t){console.log(t);var i=t,a=this.dateEndTime;if(new Date(i.replace(/-/g,"/"))<new Date(a.replace(/-/g,"/")))return this.$message.error("收费截止时间不能小于默认收费截止时间"),!1;this.dateEndTime=e,this.RuleInfo(this.rule_id)}}},_=c,d=(i("7403"),i("2877")),u=Object(d["a"])(_,a,s,!1,null,null,null);t["default"]=u.exports},7403:function(e,t,i){"use strict";i("88ec")},"88ec":function(e,t,i){}}]);