(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-515ada6e"],{"06f0":function(t,i,s){},a237:function(t,i,s){"use strict";s("06f0")},f96f:function(t,i,s){"use strict";var e={getMainBasicData:"/common/platform.Main/getMainBasicData",getMiddleStatisticsData:"/common/platform.Main/getMiddleStatisticsData",getBacklog:"/common/platform.Main/getBacklog",getHotMenu:"/common/platform.plugin/getHotMenu",editHotMenu:"/common/platform.plugin/editHotMenu",getAllMenuTree:"/common/platform.plugin/getAllMenuTree"};i["a"]=e},fb04:function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"add-menu"},[s("a-modal",{staticClass:"modal",attrs:{width:"60%",title:"自定义功能",centered:""},on:{ok:t.handleOk,cancel:t.handleClose},model:{value:t.visible,callback:function(i){t.visible=i},expression:"visible"}},[s("div",{staticClass:"header"},[s("div",{staticClass:"title"},[t._v("已选功能："),s("span",{staticClass:"desc"},[t._v("（点击拖动调整排序）")])]),s("a-input-search",{staticStyle:{width:"200px"},attrs:{placeholder:"输入功能名称",allowClear:""},on:{change:t.inputChange,search:t.onSearch},model:{value:t.keywords,callback:function(i){t.keywords=i},expression:"keywords"}})],1),s("div",{staticClass:"selected"},[t.sList.length?s("div",{staticClass:"list"},[s("draggable",t._b({model:{value:t.sList,callback:function(i){t.sList=i},expression:"sList"}},"draggable",t.dragOptions,!1),[s("transition-group",{attrs:{type:"transition",name:"flip-list"}},t._l(t.sList,(function(i,e){return s("div",{key:e,staticClass:"item move"},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:i.image}})]),s("div",{staticClass:"name no-wrap"},[t._v(t._s(i.plugin_name))]),s("a-icon",{staticClass:"delete color-red",attrs:{type:"close-circle"},on:{click:function(i){return i.stopPropagation(),t.deleteMenu(e)}}})],1)})),0)],1)],1):s("div",{staticClass:"no-data"},[t._v("暂未设置常用功能~")])]),s("div",{staticClass:"all"},[t.allList.length?s("block",t._l(t.allList,(function(i,e){return s("div",{key:e},[s("div",{staticClass:"title"},[t._v(t._s(i.cat_name))]),i.plugin_list&&i.plugin_list.length?s("div",{staticClass:"list"},t._l(i.plugin_list,(function(i,n){return s("div",{key:n,staticClass:"item"},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:i.image}})]),s("div",{staticClass:"name no-wrap"},[t._v(t._s(i.plugin_name))]),i.add?t._e():s("a-icon",{staticClass:"add",attrs:{type:"plus-circle"},on:{click:function(s){return s.stopPropagation(),t.addMenu(e,n,i)}}})],1)})),0):s("div",{staticClass:"no-data"},[t._v("此分类下暂无常用功能~")])])})),0):s("div",{staticClass:"no-data"},[t._v("暂无记录~")])],1)])],1)},n=[],a=(s("d81d"),s("d3b7"),s("159b"),s("a434"),s("f96f")),l=s("b76a"),o=s.n(l),c={name:"PlatformAddMenu",components:{draggable:o.a},props:{selectedList:{type:Array,default:function(){return[]}}},computed:{dragOptions:function(){return{animation:0,group:"description",disabled:!1,ghostClass:"ghost"}}},data:function(){return{visible:!1,keywords:"",sList:[],allList:[]}},methods:{handleOk:function(){var t=this,i=this.sList.map((function(t,i){return{plugin_id:t.plugin_id,sort:i+1}}));this.request(a["a"].editHotMenu,{menu_list:i}).then((function(i){t.$message.success("编辑成功~"),t.$emit("ok"),t.handleClose()}))},onSearch:function(t){this.getAllMenu()},inputChange:function(t){console.log(this.keywords),this.keywords||this.getAllMenu()},getAllMenu:function(){var t=this,i={};this.keywords&&(i.keyword=this.keywords),this.request(a["a"].getAllMenuTree,i).then((function(i){i&&(t.allList=i.map((function(i){return i.plugin_list&&i.plugin_list.length&&(i.plugin_list=t.handleList(i.plugin_list,t.sList)),i})))}))},handleList:function(t,i){return t.length&&t.forEach((function(t){t.add=!1,i.forEach((function(i){t.plugin_id==i.plugin_id&&(t.add=!0)}))})),t},addMenu:function(t,i,s){s.add=!0,this.sList.push(s),this.$set(this.allList[t].plugin_list,i,s),this.$set(this.allList,t,this.allList[t])},deleteMenu:function(t){var i=this;this.sList.splice(t,1),console.log(this.sList),this.allList.forEach((function(t){t.plugin_list&&t.plugin_list.length&&(t.plugin_list=i.handleList(t.plugin_list,i.sList))})),this.$set(this,"allList",this.allList)},openDialog:function(){this.sList=JSON.parse(JSON.stringify(this.selectedList)),this.getAllMenu(),this.visible=!0},handleClose:function(){this.visible=!1}}},u=c,d=(s("a237"),s("2877")),r=Object(d["a"])(u,e,n,!1,null,"149e6006",null);i["default"]=r.exports}}]);