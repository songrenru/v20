(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d578f008","chunk-2935fcd2","chunk-797c9142","chunk-145a92e4","chunk-422a583b","chunk-2d0a310a"],{"011d":function(e,t,r){"use strict";var o={getSearchHotList:"/mall/platform.MallSearchHot/getSearchHotList",getHotRecord:"/mall/platform.MallSearchHot/getHotRecord",addOrEditSearchHot:"/mall/platform.MallSearchHot/addOrEditSearchHot",getEditSearchHot:"/mall/platform.MallSearchHot/getEditSearchHot",delSearchHot:"/mall/platform.MallSearchHot/delSearchHot",saveSort:"/mall/platform.MallSearchHot/saveSort",getGoodsList:"/mall/platform.MallPlatformGoods/getGoodsList",getMerOrStoreList:"/mall/platform.MallPlatformGoods/getMerOrStoreList",goodsCategoryList:"/mall/platform.MallGoodsCategory/goodsCategoryList",goodsSetSort:"/mall/platform.MallPlatformGoods/setSort",getGoodsListByName:"/mall/platform.MallPlatformGoods/getGoodsListByName",exportGoods:"/mall/platform.MallPlatformGoods/exportGoods",goodsSetIntegral:"/mall/platform.MallPlatformGoods/setIntegral",goodsSetCommission:"/mall/platform.MallPlatformGoods/setCommission",goodsSetVirtual:"/mall/platform.MallPlatformGoods/setVirtual",goodsSetStatus:"/mall/platform.MallPlatformGoods/setStatus",goodsSetFirst:"/mall/platform.MallPlatformGoods/setFirst",merchantGoodsEdit:"/mall/platform.mallPlatformGoods/merchantGoodsEdit",getActivityRecommendList:"/mall/platform.MallActivityRecommend/getActivityRecommendList",getLimitedRecommendList:"/mall/platform.mallActivityRecommend/getLimitedRecommendList",getBargainRecommendList:"/mall/platform.mallActivityRecommend/getBargainRecommendList",getGroupRecommendList:"/mall/platform.mallActivityRecommend/getGroupRecommendList",editLimitedRecommend:"/mall/platform.mallActivityRecommend/editLimitedRecommend",editBargainRecommend:"/mall/platform.mallActivityRecommend/editBargainRecommend",editGroupRecommend:"/mall/platform.mallActivityRecommend/editGroupRecommend",setFirstLimited:"/mall/platform.mallActivityRecommend/setFirstLimited",setFirstBargain:"/mall/platform.mallActivityRecommend/setFirstBargain",setFirstGroup:"/mall/platform.mallActivityRecommend/setFirstGroup",setSortGroup:"/mall/platform.mallActivityRecommend/setSortGroup",setSortLimited:"/mall/platform.mallActivityRecommend/setSortLimited",setSortBargain:"/mall/platform.mallActivityRecommend/setSortBargain",bannerList:"/mall/platform.mallActivityRecommend/bannerList",addOrEditBanner:"/mall/platform.mallActivityRecommend/addOrEditBanner",delBanner:"/mall/platform.mallActivityRecommend/delBanner",getReplyList:"/mall/platform.MallPlatformReply/searchReply",getReplyDetails:"/mall/platform.MallPlatformReply/getReplyDetails",delReply:"/mall/platform.MallPlatformReply/delReply",getOrderList:"/mall/platform.MallOrder/searchOrders",getOrderDetails:"/mall/platform.MallOrder/getOrderDetails",getStores:"/mall/platform.MallOrder/getStores",getMers:"/mall/platform.MallOrder/getMers",loginMer:"/mall/platform.MallOrder/loginMer",loginStore:"/mall/platform.MallOrder/loginStore",getAllArea:"/mall/platform.MallOrder/getAllArea",getDiscount:"/mall/platform.MallOrder/getDiscount",getOrderLog:"/mall/platform.MallOrder/getOrderLog",exportOrder:"/mall/platform.MallOrder/exportOrder",getList:"mall/platform.MallHomeDecorate/getList",getDel:"mall/platform.MallHomeDecorate/getDel",getEdit:"mall/platform.MallHomeDecorate/getEdit",addOrEditDecorate:"mall/platform.MallHomeDecorate/addOrEdit",getSixList:"mall/platform.MallHomeDecorate/getSixList",getSixEdit:"mall/platform.MallHomeDecorate/getSixEdit",addOrEditSixAdver:"mall/platform.MallHomeDecorate/addOrEditSixAdver",delSixAdver:"mall/platform.MallHomeDecorate/delSixAdver",getRecList:"mall/platform.MallHomeDecorate/getRecList",addOrEditRec:"mall/platform.MallHomeDecorate/addOrEditRec",getRecEdit:"mall/platform.MallHomeDecorate/getRecEdit",delRecAdver:"mall/platform.MallHomeDecorate/delRecAdver",recDisplay:"mall/platform.MallHomeDecorate/recDisplay",getActGoods:"mall/platform.MallHomeDecorate/getActGoods",addRelatedGoods:"mall/platform.MallHomeDecorate/addRelatedGoods",getUrlAndRecSwitch:"mall/platform.MallHomeDecorate/getUrlAndRecSwitch",getRelatedList:"mall/platform.MallHomeDecorate/getRelatedList",saveRelatedSort:"/mall/platform.MallHomeDecorate/saveRelatedSort",delOne:"/mall/platform.MallHomeDecorate/delOne",viewLogistics:"/mall/platform.MallOrder/viewLogistics",getPeriodicList:"/mall/platform.MallOrder/getPeriodicList",setRecommend:"/mall/platform.MallPlatformGoods/setRecommend",cancelRecommend:"/mall/platform.MallPlatformGoods/cancelRecommend",isShowReply:"/mall/platform.MallPlatformReply/isShowReply",getMallBrowse:"/mall/platform.MallBrowse/getMallBrowse",MallBrowseExport:"/mall/platform.MallBrowse/export",exportBrowseTotalExport:"/mall/platform.MallBrowse/exportBrowseTotal",getAuditGoodsList:"/mall/platform.MallPlatformGoods/getAuditGoodsList",auditGoods:"/mall/platform.MallPlatformGoods/auditGoods",loginMerchant:"/mall/platform.MallPlatformGoods/loginMerchant",orderPrintTicket:"/mall/platform.MallOrder/printOrder"};t["a"]=o},"07a9":function(e,t,r){var o=r("4aad"),s=r("6751"),a=r("4b17"),i=r("76dd");function l(e,t,r){e=i(e),t=a(t);var l=t?s(e):0;return t&&l<t?e+o(t-l,r):e}e.exports=l},"126d":function(e,t,r){var o=r("6da8"),s=r("aaec"),a=r("d094");function i(e){return s(e)?a(e):o(e)}e.exports=i},"35a5":function(e,t,r){"use strict";r.r(t);r("b0c0");var o=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1},on:{cancel:e.handleCancel}},[t("a-form-model",{attrs:{model:e.formData,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[t("a-form-model-item",{attrs:{label:"快递"}},[t("a-select",{attrs:{placeholder:"请选择"},on:{change:e.hanleChange}},e._l(e.expressOptions,(function(r){return t("a-select-option",{key:r.id},[e._v(" "+e._s(r.name)+e._s(r.is_singface&&"1"==r.is_singface?"（电子面单）":"")+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"快递单号"}},[t("a-input",{attrs:{placeholder:"请输入快递单号"},model:{value:e.formData.express_no,callback:function(t){e.$set(e.formData,"express_no",t)},expression:"formData.express_no"}})],1)],1),t("template",{slot:"footer"},[t("div",{staticClass:"flex justify-center align-center"},[t("a-button",{key:"back",staticClass:"mr-20",on:{click:function(t){return e.btnOpt(2)}}},[e._v(" 普通发货 ")]),t("a-button",{key:"submit",attrs:{type:"primary",disabled:"2"==e.fh_type||"1"==e.fh_type&&0==e.is_singface},on:{click:function(t){return e.btnOpt(1)}}},[e._v(" 电子面单发货 ")])],1)])],2)],1)},s=[],a=(r("a9e3"),r("d3b7"),r("159b"),r("5f66")),i={props:{visible:Boolean,title:String,order:Object,fh_type:[String,Number]},data:function(){return{labelCol:{span:4},wrapperCol:{span:14},formData:{order_id:"",activity_type:"",periodic_order_id:"",current_periodic:"",express_type:"",express_no:"",express_id:"",express_name:"",fh_type:"1"},expressOptions:[],is_singface:1}},created:function(){this.getExpress()},methods:{getExpress:function(){var e=this;this.request(a["a"].getExpress,"").then((function(t){e.expressOptions=t||[]}))},hanleChange:function(e){var t=this;this.$set(this.formData,"express_id",e),this.expressOptions.forEach((function(r){r.id==e&&(t.$set(t.formData,"express_name",r.name),t.is_singface=r.is_singface)}))},btnOpt:function(e){var t=this;if(this.$set(this.formData,"express_type",e),this.formData.express_id)if(2!=e||this.formData.express_no){var r=this.order,o=r.order_id,s=r.goods_activity_type,i=r.order_type,l=r.periodic_order_id,n=r.current_periodic;this.$set(this.formData,"order_id",o),this.$set(this.formData,"activity_type",s),"periodic"==i&&(this.$set(this.formData,"periodic_order_id",l),this.$set(this.formData,"current_periodic",n)),this.$set(this.formData,"fh_type",this.fh_type),this.request(a["a"].deliverGoodsByExpress,this.formData).then((function(e){var r="1"==t.fh_type?"订单发货成功":"快递更改成功";t.$message.success(r),Object.assign(t.$data,t.$options.data()),t.handleCancel(),t.$emit("updateList")}))}else this.$message.error("请输入快递单号");else this.$message.error("请选择快递")},handleCancel:function(){this.$emit("handleCancel"),Object.assign(this.$data,this.$options.data())}}},l=i,n=r("2877"),d=Object(n["a"])(l,o,s,!1,null,"4d0ffef8",null);t["default"]=d.exports},"386c1":function(e,t,r){"use strict";r("820e")},4075:function(e,t,r){},4106:function(e,t,r){var o=r("4aad"),s=r("6751"),a=r("4b17"),i=r("76dd");function l(e,t,r){e=i(e),t=a(t);var l=t?s(e):0;return t&&l<t?o(t-l,r)+e:e}e.exports=l},"49f3":function(e,t,r){"use strict";r("648ae")},"4aad":function(e,t,r){var o=r("b0a8"),s=r("ce86"),a=r("c32f"),i=r("aaec"),l=r("6751"),n=r("126d"),d=Math.ceil;function c(e,t){t=void 0===t?" ":s(t);var r=t.length;if(r<2)return r?o(t,e):t;var c=o(t,d(e/l(t)));return i(t)?a(n(c),0,e).join(""):c.slice(0,e)}e.exports=c},"5f66":function(e,t,r){"use strict";var o={getOrderList:"/mall/storestaff.MallOrder/getOrderList",exportOrder:"/mall/storestaff.MallOrder/exportOrder",orderTaking:"/mall/storestaff.MallOrder/orderTaking",deliverGoodsByHouseman:"/mall/storestaff.MallOrder/deliverGoodsByHouseman",staffVerify:"/mall/storestaff.MallOrder/staffVerify",postponeDelivery:"/mall/storestaff.MallOrder/postponeDelivery",agreeRefund:"/mall/storestaff.MallOrder/AgreeRefund",getExpress:"/mall/storestaff.MallOrder/getExpress",deliverGoodsByExpress:"/mall/storestaff.MallOrder/deliverGoodsByExpress",viewLogistics:"/mall/storestaff.MallOrder/viewLogistics",refuseRefund:"/mall/storestaff.MallOrder/RefuseRefund",clerkDiscount:"/mall/storestaff.MallOrder/clerkDiscount",getOrderDetails:"/mall/storestaff.MallOrder/getOrderDetails",clerkNotes:"/mall/storestaff.MallOrder/clerkNotes",getPeriodicList:"/mall/storestaff.MallOrder/getPeriodicList",downExcel:"/mall/storestaff.MallOrder/downExcel",downFailExcel:"/mall/storestaff.MallOrder/downFailExcel",uploadUrl:"/common/common.UploadFile/uploadFile",uploadExcel:"/mall/storestaff.MallOrder/uploadFile",getList:"/mall/storestaff.MallOrder/shopGoodsBatchLogList",getOrderListCopy:"/mall/storestaff.MallOrder/getOrderListCopy",getOrderDetailsCopy:"/mall/storestaff.MallOrder/getOrderDetailsCopy",orderPrintTicket:"/mall/storestaff.MallOrder/printOrder"};t["a"]=o},"648ae":function(e,t,r){},6751:function(e,t,r){var o=r("c9ca"),s=r("aaec"),a=r("ab81");function i(e){return s(e)?a(e):o(e)}e.exports=i},"6b0c":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-form-model",{attrs:{model:e.formData,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[t("a-form-model-item",{attrs:{label:""}},[t("a-input",{staticStyle:{height:"200px",resize:"none"},attrs:{type:"textarea",autosize:"",placeholder:"请输入拒绝理由"},model:{value:e.formData.reason,callback:function(t){e.$set(e.formData,"reason",t)},expression:"formData.reason"}})],1)],1)],1)],1)},s=[],a=r("5f66"),i={props:{visible:Boolean,title:String,order:Object},data:function(){return{labelCol:{span:0},wrapperCol:{span:24},formData:{order_id:"",reason:"",status:""},expressOptions:[]}},created:function(){},methods:{handleOk:function(){var e=this;this.formData.reason?(this.$set(this.formData,"order_id",this.order.order_id),this.$set(this.formData,"status",this.order.status),this.request(a["a"].refuseRefund,this.formData).then((function(t){e.$message.success("操作成功"),e.$emit("handleCancel"),e.$emit("updateList")}))):this.$message.error("请输入拒绝理由")},handleCancel:function(){this.$emit("handleCancel"),Object.assign(this.$data,this.$options.data())}}},l=i,n=r("2877"),d=Object(n["a"])(l,o,s,!1,null,"3d933dd8",null);t["default"]=d.exports},"6da8":function(e,t){function r(e){return e.split("")}e.exports=r},7554:function(e,t,r){"use strict";r("4075")},"820e":function(e,t,r){},a8ba:function(e,t,r){"use strict";var o=r("41b2"),s=r.n(o),a=r("4d91"),i=r("daa3"),l=r("9cba"),n=r("07a9"),d=r.n(n),c={name:"AStatisticNumber",functional:!0,render:function(e,t){var r=t.props,o=r.value,s=r.formatter,a=r.precision,i=r.decimalSeparator,l=r.groupSeparator,n=void 0===l?"":l,c=r.prefixCls,f=void 0;if("function"===typeof s)f=s({value:o,h:e});else{var p=String(o),m=p.match(/^(-?)(\d*)(\.(\d+))?$/);if(m){var u=m[1],_=m[2]||"0",h=m[4]||"";_=_.replace(/\B(?=(\d{3})+(?!\d))/g,n),"number"===typeof a&&(h=d()(h,a,"0").slice(0,a)),h&&(h=""+i+h),f=[e("span",{key:"int",class:c+"-content-value-int"},[u,_]),h&&e("span",{key:"decimal",class:c+"-content-value-decimal"},[h])]}else f=p}return e("span",{class:c+"-content-value"},[f])}},f={prefixCls:a["a"].string,decimalSeparator:a["a"].string,groupSeparator:a["a"].string,format:a["a"].string,value:a["a"].oneOfType([a["a"].string,a["a"].number,a["a"].object]),valueStyle:a["a"].any,valueRender:a["a"].any,formatter:a["a"].any,precision:a["a"].number,prefix:a["a"].any,suffix:a["a"].any,title:a["a"].any},p={name:"AStatistic",props:Object(i["t"])(f,{decimalSeparator:".",groupSeparator:","}),inject:{configProvider:{default:function(){return l["a"]}}},render:function(){var e=arguments[0],t=this.$props,r=t.prefixCls,o=t.value,a=void 0===o?0:o,l=t.valueStyle,n=t.valueRender,d=this.configProvider.getPrefixCls,f=d("statistic",r),p=Object(i["g"])(this,"title"),m=Object(i["g"])(this,"prefix"),u=Object(i["g"])(this,"suffix"),_=Object(i["g"])(this,"formatter",{},!1),h=e(c,{props:s()({},this.$props,{prefixCls:f,value:a,formatter:_})});return n&&(h=n(h)),e("div",{class:f},[p&&e("div",{class:f+"-title"},[p]),e("div",{style:l,class:f+"-content"},[m&&e("span",{class:f+"-content-prefix"},[m]),h,u&&e("span",{class:f+"-content-suffix"},[u])])])}},m=r("92fa"),u=r.n(m),_=r("5f70"),h=r("2cf8"),v=r("b24f"),b=r.n(v),g=r("4106"),y=r.n(g),I=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function x(e,t){var r=e,o=/\[[^\]]*\]/g,s=(t.match(o)||[]).map((function(e){return e.slice(1,-1)})),a=t.replace(o,"[]"),i=I.reduce((function(e,t){var o=b()(t,2),s=o[0],a=o[1];if(-1!==e.indexOf(s)){var i=Math.floor(r/a);return r-=i*a,e.replace(new RegExp(s+"+","g"),(function(e){var t=e.length;return y()(i.toString(),t,"0")}))}return e}),a),l=0;return i.replace(o,(function(){var e=s[l];return l+=1,e}))}function w(e,t){var r=t.format,o=void 0===r?"":r,s=Object(h["a"])(_)(e).valueOf(),a=Object(h["a"])(_)().valueOf(),i=Math.max(s-a,0);return x(i,o)}var C=1e3/30;function M(e){return Object(h["a"])(_)(e).valueOf()}var O={name:"AStatisticCountdown",props:Object(i["t"])(f,{format:"HH:mm:ss"}),created:function(){this.countdownId=void 0},mounted:function(){this.syncTimer()},updated:function(){this.syncTimer()},beforeDestroy:function(){this.stopTimer()},methods:{syncTimer:function(){var e=this.$props.value,t=M(e);t>=Date.now()?this.startTimer():this.stopTimer()},startTimer:function(){var e=this;this.countdownId||(this.countdownId=window.setInterval((function(){e.$refs.statistic.$forceUpdate(),e.syncTimer()}),C))},stopTimer:function(){var e=this.$props.value;if(this.countdownId){clearInterval(this.countdownId),this.countdownId=void 0;var t=M(e);t<Date.now()&&this.$emit("finish")}},formatCountdown:function(e){var t=e.value,r=e.config,o=this.$props.format;return w(t,s()({},r,{format:o}))},valueRenderHtml:function(e){return e}},render:function(){var e=arguments[0];return e(p,u()([{ref:"statistic"},{props:s()({},this.$props,{valueRender:this.valueRenderHtml,formatter:this.formatCountdown}),on:Object(i["k"])(this)}]))}},L=r("db14");p.Countdown=O,p.install=function(e){e.use(L["a"]),e.component(p.name,p),e.component(p.Countdown.name,p.Countdown)};t["a"]=p},aaec:function(e,t){var r="\\ud800-\\udfff",o="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=o+s+a,l="\\ufe0e\\ufe0f",n="\\u200d",d=RegExp("["+n+r+i+l+"]");function c(e){return d.test(e)}e.exports=c},ab81:function(e,t){var r="\\ud800-\\udfff",o="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=o+s+a,l="\\ufe0e\\ufe0f",n="["+r+"]",d="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",f="(?:"+d+"|"+c+")",p="[^"+r+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",_="\\u200d",h=f+"?",v="["+l+"]?",b="(?:"+_+"(?:"+[p,m,u].join("|")+")"+v+h+")*",g=v+h+b,y="(?:"+[p+d+"?",d,m,u,n].join("|")+")",I=RegExp(c+"(?="+c+")|"+y+g,"g");function x(e){var t=I.lastIndex=0;while(I.test(e))++t;return t}e.exports=x},b0a8:function(e,t){var r=9007199254740991,o=Math.floor;function s(e,t){var s="";if(!e||t<1||t>r)return s;do{t%2&&(s+=e),t=o(t/2),t&&(e+=e)}while(t);return s}e.exports=s},b168:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1,footer:null},on:{ok:e.handleCancel,cancel:e.handleCancel}},[e.rider_name?t("span",[t("span",[e._v("骑手："+e._s(e.rider_name))]),t("a-divider",{attrs:{type:"virticle"}}),t("span",[e._v("骑手号码："+e._s(e.rider_phone))]),t("a-divider")],1):e._e(),e.logistics.length?t("a-timeline",{attrs:{pending:e.pending,reverse:!0}},e._l(e.logistics,(function(r,o){return t("a-timeline-item",{key:o},[t("p",{staticClass:"mb-0"},[e._v(e._s(e.moment(r.time).format("YYYY-MM-DD HH:mm")))]),t("span",[e._v(e._s(r.context))])])})),1):t("a-empty",{attrs:{image:e.simpleImage}},[t("span",{attrs:{slot:"description"},slot:"description"},[e._v("暂无物流信息")])])],1)],1)},s=[],a=(r("06f4"),r("fc25")),i=(r("16c9"),r("387a")),l=r("8bbf"),n=r.n(l),d=r("011d"),c=r("c1df"),f=r.n(c);n.a.use(i["a"]),n.a.use(a["a"]);var p={props:{visible:Boolean,title:String,order:Object},data:function(){return{logistics:[],pending:!1,simpleImage:"",rider_name:"",rider_phone:""}},beforeCreate:function(){this.simpleImage=a["a"].PRESENTED_IMAGE_SIMPLE},mounted:function(){20==this.order.status&&(this.pending="正在配送中..."),this.viewLogistics()},methods:{moment:f.a,viewLogistics:function(){var e=this,t=this.order,r=t.order_id,o=t.order_type,s=t.periodic_order_id,a=t.express_style;console.log("luaminagwe"),this.request(d["a"].viewLogistics,{order_id:r,periodic_order_id:s&&"periodic"==o?s:"",order_type:o,express_style:a}).then((function(t){t?(e.logistics=t.list||[],e.rider_name=t.rider_name,e.rider_phone=t.rider_phone):1===t.errCode&&e.$message.warn(t.errMsg)}))},handleCancel:function(){this.$emit("handleCancel")}}},m=p,u=(r("386c1"),r("2877")),_=Object(u["a"])(m,o,s,!1,null,"57b9b484",null);t["default"]=_.exports},b886:function(e,t,r){},c32f:function(e,t,r){var o=r("2b10");function s(e,t,r){var s=e.length;return r=void 0===r?s:r,!t&&r>=s?e:o(e,t,r)}e.exports=s},c71e:function(e,t,r){"use strict";r.r(t);r("a9e3"),r("99af");var o=function(){var e=this,t=e._self._c;return t("div",[[e.orderInfo?t("div",{staticClass:"pt-20 pl-20 pr-20 pb-20 bg-ff"},[t("a-descriptions",{attrs:{title:"",column:6}},[60==e.orderInfo.order_status||70==e.orderInfo.order_status?t("a-descriptions-item",{attrs:{label:"订单编号"}},[e._v(" "+e._s(e.orderInfo.real_order_no)+" ")]):e._e(),e.orderInfo.order_no?t("a-descriptions-item",{attrs:{label:60==e.orderInfo.order_status||70==e.orderInfo.order_status?"退款编号":"订单编号"}},[e._v(" "+e._s(e.orderInfo.order_no)+" ")]):e._e(),t("a-descriptions-item",{attrs:{label:"第三方支付号"}},[e._v(" "+e._s(e.orderInfo.paid_extra)+" ")]),t("a-descriptions-item",{attrs:{label:60==e.orderInfo.order_status||70==e.orderInfo.order_status?"申请时间":"下单时间"}},[e._v(" "+e._s(60==e.orderInfo.order_status||70==e.orderInfo.order_status?e.orderInfo.refund_time:e.orderInfo.create_time)+" ")]),e.orderInfo.order_type_txt?t("a-descriptions-item",{attrs:{label:"订单类型"}},[e._v(" "+e._s(e.orderInfo.order_type_txt)+" ")]):e._e(),e.orderInfo.store_name?t("a-descriptions-item",{attrs:{label:"店铺名称"}},[e._v(" "+e._s(e.orderInfo.store_name)+" ")]):e._e()],1),t("a-row",{staticClass:"mt-30"},[t("a-card",{staticClass:"a-card"},[t("a-row",{attrs:{type:"flex"}},[t("a-col",{staticClass:"border-right card-item",attrs:{span:6}},[t("div",{staticClass:"order-status cr-black text-center"},[t("span",[e._v(e._s(e.orderInfo.current_periodic&&e.orderInfo.order_type&&"periodic"==e.orderInfo.order_type?"第"+e.orderInfo.current_periodic+"期":"")+" "+e._s(e.orderInfo.order_status_txt)+" ")])]),t("div",{staticClass:"text-center"},[60==e.orderInfo.order_status&&e.orderInfo.rest_time?t("span",{staticClass:"flex align-center countdown mt-10 justify-center"},[t("span",[e._v("请在")]),t("span",{staticClass:"cr-red"},[t("a-statistic-countdown",{attrs:{title:"",value:e.orderInfo.rest_time,format:"D天H时m分s秒",valueStyle:e.valueStyle},on:{finish:e.finish}})],1),t("span",[e._v("内处理完成，超时将自动同意")])]):e._e(),2==e.orderInfo.express_style&&"prepare"==e.orderInfo.goods_activity_type?t("span",{staticClass:"cr-red fs-16 mt-10"},[e._v(" 发货时间："+e._s(e.moment(e.orderInfo.send_time).format("YYYY-MM-DD HH:mm")||"---")+" ")]):e._e(),1==e.orderInfo.express_style?t("span",[e._v(" 期望送达时间："+e._s(e.orderInfo.express_send_time||"---")+" ")]):e._e(),-1!=[10,11,20,40].indexOf(Number(e.orderInfo.order_status))&&"periodic"==e.orderInfo.order_type&&e.orderInfo.current_time?t("span",{staticClass:"cr-red fs-16 mt-10"},[e._v(e._s(e.moment(e.orderInfo.current_time).format("YYYY.MM.DD"))+"送达 ")]):e._e(),e.desc?t("span",{staticClass:"fs-16 mt-10"},[e._v(e._s(e.desc))]):e._e()]),t("a-row",{staticClass:"mt-20",attrs:{type:"flex",justify:"center",align:"middle"}},e._l(e.btnList,(function(r){return t("span",{key:r.props},[1==r.show?t("a-button",{staticClass:"ml-10 mr-10",attrs:{type:r.type},on:{click:function(t){return e.btnOpt(r)}}},[e._v(" "+e._s(r.label)+" ")]):e._e()],1)})),0)],1),t("a-col",{staticClass:"card-item",attrs:{span:16}},[t("div",{staticClass:"flex align-center justify-center",staticStyle:{height:"100%"}},[t("a-steps",{attrs:{"progress-dot":60!=e.orderInfo.order_status&&70!=e.orderInfo.order_status,current:e.current}},e._l(e.step,(function(r){return t("a-step",{key:r.props,attrs:{title:r.title,description:e.orderInfo[r.props]}})})),1)],1)])],1)],1)],1),60!=e.orderInfo.order_status&&70!=e.orderInfo.order_status?t("a-row",{staticClass:"mt-20"},[t("a-card",[t("a-row",[t("a-col",{staticClass:"fs-18",attrs:{span:8}},[t("span",{staticClass:"cr-black"},[e._v("买家备注：")]),t("span",[e._v(e._s(e.orderInfo.remark||"无"))])]),t("a-col",{attrs:{span:4}}),t("a-col",{staticClass:"fs-18",attrs:{span:8}},[t("span",{staticClass:"cr-black"},[e._v("店员备注：")]),t("span",[e._v(e._s(e.orderInfo.clerk_remark||"无"))])])],1)],1)],1):e._e(),t("a-row",{staticClass:"mt-20 a-card"},[t("a-card",[t("a-row",{attrs:{type:"flex"}},[t("a-col",{attrs:{span:6}},[t("a-row",{staticClass:"card-item"},[t("a-col",{staticClass:"mb-20"},[t("h2",{staticClass:"fs-18"},[e._v(" "+e._s(60==e.orderInfo.order_status||70==e.orderInfo.order_status?"退款原因":"收货信息")+" ")])]),t("a-col",{staticClass:"pr-10"},[60==e.orderInfo.order_status||70==e.orderInfo.order_status?t("div",[e.orderInfo.refund_reason?t("span",{staticClass:"descriptions-item descriptions-item-content"},[e._v(" "+e._s(e.orderInfo.refund_reason)+" ")]):e._e(),e.orderInfo.refund_images&&e.orderInfo.refund_images.length?t("span",e._l(e.orderInfo.refund_images,(function(e,r){return t("a-card",{key:r,staticStyle:{width:"240px"}},[t("img",{attrs:{slot:"cover",alt:"image",src:e},slot:"cover"})])})),1):e._e()]):t("a-descriptions",{attrs:{title:"",column:1}},[t("a-descriptions-item",{attrs:{label:"收货人"}},[e._v(" "+e._s(e.orderInfo.username||"---")+" ")]),t("a-descriptions-item",{attrs:{label:"注册电话"}},[e._v(" "+e._s(e.orderInfo.zc_phone||"---")+" ")]),t("a-descriptions-item",{attrs:{label:"收货电话"}},[e._v(" "+e._s(e.orderInfo.sh_phone||"---")+" ")]),t("a-descriptions-item",{attrs:{label:"收货地址"}},[e._v(" "+e._s(e.orderInfo.address||"---")+" "),t("a",{on:{click:e.showMapModel}},[e._v("地图查看")])]),e.orderInfo.freight_distance>0?t("a-descriptions-item",{attrs:{label:"配送距离"}},[e._v(" "+e._s(e.orderInfo.freight_distance||"---")+"米 ")]):e._e()],1)],1)],1)],1),t("a-col",{staticClass:"border-dash",attrs:{span:10}},[t("a-row",{staticClass:"card-item"},[t("a-col",{staticClass:"mb-20"},[t("h2",{staticClass:"fs-18"},[e._v(" "+e._s(60==e.orderInfo.order_status||70==e.orderInfo.order_status?"退款信息":"付款信息")+" ")])]),t("a-col",{staticClass:"pr-10"},[t("a-descriptions",{attrs:{title:""}},[e.orderInfo.periodic_count&&e.orderInfo.order_type&&"periodic"==e.orderInfo.order_type?t("a-descriptions-item",{attrs:{label:"周期购期数"}},[t("span",{staticClass:"flex align-center"},[t("span",[e._v("共计")]),t("span",{staticClass:"cr-black fw-bold"},[e._v(" "+e._s(e.orderInfo.periodic_count)+" ")]),t("span",[e._v("期")])])]):e._e(),t("a-descriptions-item",{attrs:{label:"商品总金额"}},[e._v(" "+e._s(e.currency)+e._s(e.orderInfo.money_total)+" ")]),"prepare"==e.orderInfo.order_type&&e.orderInfo.bargain_price&&0!=e.orderInfo.bargain_price?t("a-descriptions-item",{attrs:{label:""}},[e._v(" 定金"+e._s(e.currency)+e._s(e.orderInfo.bargain_price)+" "),e.orderInfo.deduct_price&&0!=e.orderInfo.deduct_price?t("span",[e._v("抵"+e._s(e.currency)+e._s(e.orderInfo.deduct_price))]):e._e()]):e._e(),e.orderInfo.discount_total&&0!=e.orderInfo.discount_total?t("a-descriptions-item",{on:{click:function(t){e.discountTotalVisible=!e.discountTotalVisible}}},[t("span",{staticClass:"pointer",attrs:{slot:"label"},slot:"label"},[t("a-popover",{attrs:{title:"",trigger:"click"},model:{value:e.discountTotalVisible,callback:function(t){e.discountTotalVisible=t},expression:"discountTotalVisible"}},[t("span",{attrs:{slot:"content"},slot:"content"},[t("a-list",{attrs:{"item-layout":"horizontal","data-source":e.discountList},scopedSlots:e._u([{key:"renderItem",fn:function(r){return r.value&&0!=r.value?t("a-list-item",{staticClass:"flex"},[t("a-badge",{attrs:{color:"red",text:"".concat(r.label,"：").concat(e.currency).concat(r.value)}})],1):e._e()}}],null,!0)})],1),t("span",[e._v("总优惠金额"),t("a-icon",{attrs:{type:"exclamation-circle"}})],1)])],1),e._v(" -"+e._s(e.currency)+e._s(e.orderInfo.discount_total)+" ")]):e._e(),e.orderInfo.money_freight&&0!=e.orderInfo.money_freight?t("a-descriptions-item",{attrs:{label:"运费"}},[e._v(" +"+e._s(e.currency)+e._s(e.orderInfo.money_freight)+" ")]):e._e()],1),"prepare"==e.orderInfo.order_type&&e.orderInfo.bargain_price&&0!=e.orderInfo.bargain_price&&e.orderInfo.order_status>=0&&e.orderInfo.order_status<10?t("a-descriptions",{attrs:{title:"",column:1}},[t("a-descriptions-item",{staticClass:"fw-bold"},[t("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("已支付定金")]),t("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(e._s(e.currency)+e._s(e.orderInfo.bargain_price))])])],1):e._e(),t("a-descriptions",{attrs:{title:"",column:2}},[t("a-descriptions-item",[t("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[0==e.orderInfo.order_status?t("span",[e._v("待付款")]):e._e(),1==e.orderInfo.order_status?t("span",[e._v("尾款待付款")]):e._e(),e.orderInfo.order_status>=10?t("span",[e._v("实付款")]):e._e()]),t("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(" "+e._s(e.currency)+e._s(e.orderInfo.money_real)+" ")])]),e.orderInfo.is_refund?t("a-descriptions-item",{staticClass:"fw-bold"},[1==e.orderInfo.all_refund?t("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("全部退款金额")]):e._e(),0==e.orderInfo.all_refund?t("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("部分退款金额")]):e._e(),1==e.orderInfo.all_refund?t("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(e._s(e.currency)+e._s(e.orderInfo.refund_money))]):e._e(),0==e.orderInfo.all_refund?t("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(e._s(e.currency)+e._s(e.orderInfo.part_refund_money))]):e._e()]):e._e(),e.orderInfo.is_refund&&0!=e.orderInfo.refund_money&&0!=e.orderInfo.refund_money_periodic?t("a-descriptions-item",{staticClass:"fw-bold"},[t("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("退款金额")]),t("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(" "+e._s(e.currency)+e._s("periodic"==e.orderInfo.order_type?e.orderInfo.refund_money_periodic:e.orderInfo.refund_money)+" ")])]):e._e()],1),e.orderInfo.order_status>9&&e.payMethods.length?t("a-row",{attrs:{type:"flex",align:"middle"}},e._l(e.payMethods,(function(r){return t("span",{key:r.props,staticClass:"flex justify-between descriptions-item"},[t("span",{staticClass:"mr-20"},[e._v(" "+e._s(r.label)+"："),t("span",{staticClass:"descriptions-item-content"},[e._v(e._s(e.currency)+e._s(r.value||"---"))])])])})),0):e._e(),e.orderInfo.paid_time&&e.orderInfo.order_status>=10||e.orderInfo.paid_time&&"prepare"==e.orderInfo.goods_activity_type?t("a-descriptions",{attrs:{title:"",column:1}},[e.orderInfo.paid_time?t("a-descriptions-item",{attrs:{label:"付款时间"}},[e._v(" "+e._s(e.moment(e.orderInfo.paid_time).format("YYYY-MM-DD HH:mm")||"---")+" ")]):e._e()],1):e._e(),!e.orderInfo.refund_time||60!=e.orderInfo.order_status&&70!=e.orderInfo.order_status?e._e():t("a-descriptions",{attrs:{title:"",column:1}},[t("a-descriptions-item",{attrs:{label:"申请时间"}},[e._v(" "+e._s(e.moment(e.orderInfo.refund_time).format("YYYY-MM-DD HH:mm")||"---")+" ")])],1),e.orderInfo.order_status>=10?t("a-descriptions",{attrs:{title:"",column:1}},[t("a-descriptions-item",{attrs:{label:"付款方式"}},[e._v(" "+e._s(e.orderInfo.pay_type_txt)+" ")])],1):e._e(),e.orderInfo.clert_discount_process&&e.orderInfo.clert_discount_process.length?t("a-row",{attrs:{type:"flex",align:"middle"}},e._l(e.orderInfo.clert_discount_process,(function(r,o){return t("a-col",{key:o,staticClass:"flex justify-between descriptions-item",attrs:{span:12}},[t("span",{staticClass:"mr-10"},[e._v("修改前："),t("span",{staticClass:"descriptions-item-content"},[e._v(e._s(e.currency)+e._s(r.money_before))])]),t("span",[e._v("修改后："),t("span",{staticClass:"descriptions-item-content"},[e._v(e._s(e.currency)+e._s(r.money_after))])])])})),1):e._e(),t("br"),e.orderInfo.username?t("a-col",{staticClass:"pr-10"},[e._v(" 用户名 : "+e._s(e.orderInfo.username)+" ")]):e._e(),e.orderInfo.zc_phone?t("a-col",{staticClass:"pr-10"},[e._v(" 注册电话 : "+e._s(e.orderInfo.zc_phone)+" ")]):e._e(),e.orderInfo.address?t("a-col",{staticClass:"pr-10"},[e._v(" 收货地址 : "+e._s(e.orderInfo.address)+" ")]):e._e()],1)],1)],1),t("a-col",{attrs:{span:8}},[t("a-row",{staticClass:"card-item"},[t("a-col",{staticClass:"flex align-center mb-20"},[t("h2",{staticClass:"fs-18"},[e._v("更多信息")]),"periodic"==e.orderInfo.order_type?t("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(t){e.periodicListVisible=!0}}},[e._v(" 查看配送周期 ")]):e._e()],1),t("a-col",{staticClass:"pr-10"},[t("p",[2!=e.orderInfo.express_style||e.orderInfo.order_status<20||e.orderInfo.order_status>=50?t("span",[e._v("配送方式："+e._s(e.orderInfo.express_style_txt))]):t("span",[e._v(" 配送方式："+e._s(e.orderInfo.express_name)),t("br"),t("br"),e._v(" 快递单号："+e._s(e.orderInfo.express_num)+" ")]),e.orderInfo.order_status>=30&&e.orderInfo.order_status<=40?t("span",[t("br"),e._v("核销人姓名："+e._s(e.orderInfo.staff_name)+" ")]):e._e(),60==e.orderInfo.order_status&&3!=e.orderInfo.express_style?t("a-button",{attrs:{type:"link"},on:{click:e.viewLogistics}},[e._v(" 查看物流 ")]):e._e()],1),2==e.orderInfo.express_style&&"prepare"==e.orderInfo.goods_activity_type?t("p",[e._v(" 发货时间："+e._s(e.moment(e.orderInfo.send_time).format("YYYY-MM-DD HH:mm")||"---")+" ")]):e._e(),1==e.orderInfo.express_style?t("p",[e._v(" 期望送达时间："+e._s(e.orderInfo.express_send_time||"---")+" ")]):e._e()]),e.orderInfo.forms&&e.orderInfo.forms.length?t("a-col",e._l(e.orderInfo.forms,(function(r,o){return t("div",{key:o},[t("a-descriptions",{staticClass:"forms",attrs:{title:"",column:1}},[t("a-descriptions-item",{attrs:{label:r.title}},["text"==r.type?t("span",[e._v(e._s(r.val))]):e._e(),"image"==r.type&&r.val?t("a-card",{staticStyle:{width:"240px"},attrs:{bordered:!1}},[t("img",{attrs:{slot:"cover",alt:"image",src:r.val},slot:"cover"})]):e._e()],1)],1)],1)})),0):e._e()],1)],1)],1)],1)],1),e.zhuo_log?t("a-row",{staticClass:"mt-20 a-card"},[t("a-card",[t("a-row",{attrs:{type:"flex"}},[t("a-col",{attrs:{span:10}},[t("a-row",{staticClass:"card-item"},[t("a-col",{staticClass:"mb-20"},[t("h2",{staticClass:"fs-18"},[e._v(" 啄木鸟服务费用 ")])]),t("a-col",{staticClass:"pr-10"},[t("div",e._l(e.columns2,(function(r,o){return t("p",[e._v(" 尾款支付：￥"+e._s(r.pay_money)+" "),t("br"),e._v(" 支付时间："+e._s(r.pay_time)+" "),t("br"),e._v(" 第三方支付流水号："+e._s(r.paid_extra)+" ")])})),0)])],1)],1)],1)],1)],1):e._e(),t("a-table",{staticClass:"mt-20 a-table",attrs:{columns:e.columns,"data-source":e.orderInfo.children,pagination:!1,rowKey:"index"},scopedSlots:e._u([{key:"goodsName",fn:function(r,o){return t("span",{staticClass:"flex align-center"},[t("a-avatar",{attrs:{shape:"square",size:64,src:o.image}}),t("span",{staticClass:"flex ml-10"},[t("span",[e._v(e._s(o.goods_name))]),o.sku_info.length?t("span",[t("a-divider",{attrs:{type:"vertical"}})],1):e._e(),t("span",[e._v(e._s(o.sku_info))])]),1==o.is_gift?t("span",[t("a-divider",{attrs:{type:"vertical"}}),t("a-tag",{attrs:{color:"#108ee9"}},[e._v("赠品")])],1):e._e(),o.refund_desc.length?t("span",[t("a-divider",{attrs:{type:"vertical"}}),e._l(o.refund_desc,(function(r,o){return t("a-tag",{key:o,attrs:{color:"red"}},[e._v(e._s(r))])}))],2):e._e()],1)}},{key:"price",fn:function(r){return t("span",{},[e._v(" "+e._s(e.currency)+e._s(r)+" ")])}}],null,!1,44241507)}),t("a-row",{staticClass:"mt-20"},[t("a-row",[t("a-col",{staticClass:"fs-18",attrs:{span:12}}),t("a-col",{staticClass:"fs-18",attrs:{span:4}},[t("a-button",{attrs:{type:"primary"},on:{click:e.loginMer}},[e._v(" 登录商家后台 ")])],1),t("a-col",{staticClass:"fs-18",attrs:{span:4}},[t("a-button",{attrs:{type:"primary"},on:{click:e.loginStore}},[e._v(" 登录店员后台 ")])],1),t("a-col",{staticClass:"fs-18",attrs:{span:4}},[t("a-button",{attrs:{type:"default"},on:{click:e.showDrawer}},[e._v(" 查看订单日志 ")]),t("a-drawer",{attrs:{title:"订单日志",placement:"right",width:"350px",closable:!1,visible:e.visible,"after-visible-change":e.afterVisibleChange},on:{close:e.onClose}},[t("a-list",{attrs:{"item-layout":"horizontal","data-source":e.columns1},scopedSlots:e._u([{key:"renderItem",fn:function(r,o){return t("a-list-item",{},[t("a-list-item-meta",{attrs:{description:r.addtime}},[t("p",{staticStyle:{"font-weight":"bold","margin-bottom":"-2px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(r.note))])])],1)}}],null,!1,2067425237)})],1)],1)],1)],1),"express_btn"==e.currentBtn.props?t("deliverGoods",{attrs:{visible:e.deliverGoodsVisible,title:e.currentBtn.title,order:e.orderInfo,fh_type:e.fh_type},on:{handleCancel:function(t){e.deliverGoodsVisible=!1},updateList:e.getOrderDetails}}):e._e(),"trajectory_btn"==e.currentBtn.props||"logistics_btn"==e.currentBtn.props?t("logistics",{attrs:{visible:e.logisticsVisible,title:e.currentBtn.title,order:e.orderInfo},on:{handleCancel:function(t){e.logisticsVisible=!1}}}):e._e(),"refuse_refund_btn"==e.currentBtn.props?t("refuseRefund",{attrs:{visible:e.refuseRefundVisible,title:e.currentBtn.title,order:e.orderInfo},on:{handleCancel:function(t){e.refuseRefundVisible=!1},updateList:e.getOrderDetails}}):e._e(),"periodic"==e.orderInfo.order_type?t("periodicList",{attrs:{visible:e.periodicListVisible,order:e.orderInfo},on:{handleCancel:function(t){e.periodicListVisible=!1}}}):e._e()],1):e._e(),t("a-modal",{attrs:{width:"900px",title:"地图查看",destroyOnClose:!0,footer:null},model:{value:e.visible_map,callback:function(t){e.visible_map=t},expression:"visible_map"}},[t("baidu-map",{staticClass:"bm-view",attrs:{zoom:e.zoom,center:e.postionMap,"scroll-wheel-zoom":!0}},[t("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_LEFT"}}),t("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_SATELLITE_MAP"],anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),t("bm-marker",{attrs:{position:{lng:e.postionMap.lng,lat:e.postionMap.lat},dragging:!0,animation:"BMAP_ANIMATION_BOUNCE"}})],1)],1)]],2)},s=[],a=(r("e7c6"),r("a8ba")),i=(r("d3b7"),r("159b"),r("d81d"),r("4de4"),r("8bbf")),l=r.n(i),n=r("011d"),d=r("35a5"),c=r("b168"),f=r("6b0c"),p=r("fc8f"),m=r("c1df"),u=r.n(m),_=r("e37c"),h=r("ca00");l.a.use(a["a"]);var v=[],b=[],g={components:{deliverGoods:d["default"],logistics:c["default"],refuseRefund:f["default"],periodicList:p["default"]},data:function(){return{currency:"￥",order_id:this.$route.query.order_id||"",periodic_order_id:this.$route.query.periodic_order_id||"",refund_id:this.$route.query.refund_id||"",is_all:this.$route.query.is_all||"",orderInfo:"",valueStyle:"color: #f50f50;font-size: 18px;",discountTotalVisible:!1,after_money:"",moneyRealVisible:!1,refund_images:[],desc:"",fh_type:"1",visible:!1,visibleZhuo:!1,visible_map:!1,zoom:15,postionMap:{lng:0,lat:0},columns1:v,columns2:b,discountList:[{label:"平台优惠券优惠金额",value:"",props:"discount_system_coupon"},{label:"商家优惠券优惠金额",value:"",props:"discount_merchant_coupon"},{label:"商家会员卡优惠金额",value:"",props:"discount_merchant_card"},{label:"平台会员等级优惠金额",value:"",props:"discount_system_level"},{label:"店员优惠金额",value:"",props:"discount_clerk_money"},{label:"参加活动优惠金额",value:"",props:"discount_act_money"}],btnList:[{label:"接单",props:"take_btn",show:"0",action:"confirm",tips:"是否确定接单？",success:"接单成功",api:"orderTaking",type:"primary"},{label:"骑手配送",props:"hoseman_btn",show:"0",action:"confirm",tips:"是否确定骑手配送？",success:"订单已转至平台配送！",api:"deliverGoodsByHouseman",type:"primary"},{label:"店员核销",props:"clerk_btn",show:"0",action:"confirm",tips:"是否确定核销？",success:"该订单已核销",api:"staffVerify",type:"primary"},{label:"快递发货",props:"express_btn",show:"0",action:"modal",title:"发货",type:"primary"},{label:"查看物流",props:"logistics_btn",show:"0",action:"modal",title:"查看物流",type:"primary"},{label:"顺延配送",props:"postpone_btn",show:"0",action:"confirm",tips:"是否确定顺延配送？",success:"该订单已顺延配送",api:"postponeDelivery",type:"primary"},{label:"骑手轨迹",props:"trajectory_btn",show:"0",action:"modal",title:"骑手轨迹",type:"primary"},{label:"同意退款",props:"agree_refund_btn",show:"0",action:"confirm",tips:"是否确定同意退款？",success:"同意退款成功",api:"agreeRefund",type:"primary"},{label:"拒绝退款",props:"refuse_refund_btn",show:"0",action:"modal",title:"拒绝退款",type:"danger"}],columns:[{title:"商品",dataIndex:"goods_name",key:"goods_name",scopedSlots:{customRender:"goodsName"},align:"left"},{title:"单价",dataIndex:"price",key:"price",scopedSlots:{customRender:"price"},align:"center"},{title:"数量",dataIndex:"num",key:"num",align:"center"},{title:"商品状态",dataIndex:"goods_status_txt",key:"goods_status_txt",align:"center"}],currentBtn:"",deliverGoodsVisible:!1,logisticsVisible:!1,refuseRefundVisible:!1,periodicListVisible:!1,baseUrl:"/v20/public/platform/#",payMethods:[{label:"在线支付",labelProps:"pay_type_txt",props:"money_online_pay"},{label:"积分抵扣",props:"money_score"},{label:"平台余额支付",props:"money_system_balance"},{label:"商家会员卡余额支付",props:"money_merchant_balance"},{label:"商家会员卡赠送余额支付",props:"money_merchant_give_balance"},{label:"企业预存款余额支付",props:"money_qiye_balance"},{label:"员工卡积分支付",props:"employee_score_pay"},{label:"员工卡余额支付",props:"employee_balance_pay"}],step:[{title:"买家下单",props:"step_create_time",current:0,show:!0,is_refund_order:!1},{title:"买家付款",props:"step_paid_time",current:1,show:!0,is_refund_order:!1},{title:"卖家发货",props:"step_send_time",current:2,show:!0,is_refund_order:!1},{title:"订单完成",props:"step_complete_time",current:3,show:!0,is_refund_order:!1},{title:"买家申请退款",props:"refund_time",current:1,show:!1,is_refund_order:!0},{title:"商户审核",props:"",current:1,show:!1,is_refund_order:!0},{title:"退款完成",props:"",current:2,show:!1,is_refund_order:!0}],emptyCheckArr:["",null,void 0,"null","undefined"],zhuo_log:0}},watch:{"$route.query.periodic_order_id":function(e){e&&(this.periodic_order_id=e)},"$route.query.refund_id":function(e){this.refund_id=e||""},"$route.query.order_id":function(e){e&&(this.order_id=e),this.getOrderDetails(),this.getOrderLog()}},mounted:function(){this.getOrderDetails(),this.getOrderLog()},methods:{moment:u.a,showMapModel:function(){this.visible_map=!0},getOrderDetails:function(){var e=this;this.request(n["a"].getOrderDetails,{order_id:this.order_id,periodic_order_id:this.periodic_order_id,refund_id:this.refund_id}).then((function(t){t&&t.children&&t.children.length&&t.children.forEach((function(e,t){e["index"]=t})),60==t.order_status&&t.rest_time&&(t.rest_time=Date.now()+1e3*Number(t.rest_time)),t&&(t.status=t.order_status),e.zhuo_log=t.button.zhuo_log,e.columns2=t.order_zhuo,e.orderInfo=t||"",e.orderInfo&&(e.postionMap.lng=e.orderInfo.address_lng,e.postionMap.lat=e.orderInfo.address_lat),e.initBtnList(),e.initStep(),e.initDiscountList(),e.initPayMethods()}))},initBtnList:function(){var e=this,t=this.orderInfo,r=t.button,o=t.order_status,s=t.express_style;this.btnList=this.btnList.map((function(t){return t.show=r[t.props],60!=o&&70!=o||"logistics_btn"!=t.props&&"trajectory_btn"!=t.props||(t.show=0),11==o&&"1"==s&&"hoseman_btn"==t.props&&(e.desc="订单转至骑手配送"),t}))},initStep:function(){var e=this;this.step=[{title:"买家下单",props:"step_create_time",current:0,show:!0,is_refund_order:!1},{title:"买家付款",props:"step_paid_time",current:1,show:!0,is_refund_order:!1},{title:"卖家发货",props:"step_send_time",current:2,show:!0,is_refund_order:!1},{title:"订单完成",props:"step_complete_time",current:3,show:!0,is_refund_order:!1},{title:"买家申请退款",props:"refund_time",current:1,show:!1,is_refund_order:!0},{title:"商户审核",props:"",current:1,show:!1,is_refund_order:!0},{title:"退款完成",props:"",current:2,show:!1,is_refund_order:!0}];var t=this.orderInfo.order_status;console.log(this.orderInfo,"this.orderInfo==this.orderInfo=this.orderInfo"),this.step=this.step.filter((function(r){if(t>=50&&t<60?e.current=0:(e.orderInfo[r.props]&&(e.current=r.current),60==t||70==t?(r.is_refund_order?r.show=!0:r.show=!1,(70==t||r.props&&e.orderInfo[r.props])&&(e.current=r.current)):r.is_refund_order?r.show=!1:r.show=!0),51==t&&e.orderInfo.paid_money&&e.orderInfo.pay_orderno&&(e.current=1),r.show)return r}))},finish:function(){this.getOrderDetails()},btnOpt:function(e){var t=this;this.currentBtn=e,console.log(this.currentBtn,"this.currentBtn");var r=this.currentBtn,o=r.api,s=void 0===o?"":o,a=r.success,i=void 0===a?"":a,l=r.tips,d=void 0===l?"":l,c=r.action,f=void 0===c?"":c,p=r.props,m=void 0===p?"":p;"confirm"==f&&this.$confirm({title:d||"提醒",content:"",okText:"确认",cancelText:"取消",onOk:function(){if(s){var e={order_id:t.order_id},r=["take_btn","hoseman_btn"];t.orderInfo.order_type=="periodic"(-1!=r.indexOf(m))&&(e.periodic_order_id=t.periodic_order_id),t.request(n["a"][s],e).then((function(e){t.$message.success(i),t.getOrderDetails()}))}},onCancel:function(){console.log("Cancel"),t.currentBtn=""},class:"test"}),"modal"==f&&("express_btn"==m?this.deliverGoodsVisible=!0:"trajectory_btn"==m||"logistics_btn"==m?this.logisticsVisible=!0:"refuse_refund_btn"==m&&(this.refuseRefundVisible=!0))},initDiscountList:function(){var e=this;this.discountList=this.discountList.map((function(t){return e.orderInfo&&(t.value=e.orderInfo[t.props]),t}))},initPayMethods:function(){var e=this;this.payMethods=this.payMethods.filter((function(t){if(e.orderInfo&&t.labelProps&&(t.label=e.orderInfo[t.labelProps]),t.value=t.props&&e.orderInfo[t.props]&&0!=e.orderInfo[t.props]?e.orderInfo[t.props]:0,t.value)return t}))},viewLogistics:function(){var e={label:"查看物流",props:"logistics_btn",show:"0",action:"modal",title:"查看物流",type:"primary"};this.btnOpt(e)},editDeliverGoodsByExpress:function(){var e={label:"快递发货",props:"express_btn",show:"0",action:"modal",title:"更改快递",type:"primary"};this.fh_type="2",this.btnOpt(e)},loginMer:function(){var e=this;this.request(n["a"].loginMer,{mer_id:this.orderInfo.mer_id}).then((function(t){var r=Object(h["k"])(_["a"].merchantStoreList);l.a.ls.set(r,t.ticket,null),Object(h["n"])(r,t.ticket,null),window.open(e.baseUrl+_["a"].merchantStoreList,"_blank")}))},loginStore:function(){var e=this;this.request(n["a"].loginStore,{store_id:this.orderInfo.store_id}).then((function(t){var r=Object(h["k"])(_["a"].storestaffIndex);console.log(_["a"].storestaffIndex),l.a.ls.set(r,t.ticket,null),Object(h["n"])(r,t.ticket,null),window.open(e.baseUrl+_["a"].storestaffIndex,"_blank")}))},getOrderLog:function(){var e=this;this.request(n["a"].getOrderLog,{order_id:this.order_id}).then((function(t){console.log(t),e.columns1=t}))},afterVisibleChange:function(e){console.log("visible",e)},showDrawer:function(){this.visible=!0},onClose:function(){this.visible=!1},showDrawerZhuo:function(){this.visibleZhuo=!0},onCloseZhuo:function(){this.visibleZhuo=!1}}},y=g,I=(r("7554"),r("2877")),x=Object(I["a"])(y,o,s,!1,null,"41ddfab2",null);t["default"]=x.exports},c9ca:function(e,t,r){var o=r("ef5d"),s=o("length");e.exports=s},d094:function(e,t){var r="\\ud800-\\udfff",o="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=o+s+a,l="\\ufe0e\\ufe0f",n="["+r+"]",d="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",f="(?:"+d+"|"+c+")",p="[^"+r+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",_="\\u200d",h=f+"?",v="["+l+"]?",b="(?:"+_+"(?:"+[p,m,u].join("|")+")"+v+h+")*",g=v+h+b,y="(?:"+[p+d+"?",d,m,u,n].join("|")+")",I=RegExp(c+"(?="+c+")|"+y+g,"g");function x(e){return e.match(I)||[]}e.exports=x},e7c6:function(e,t,r){"use strict";r("b2a3"),r("b886")},fc8f:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1,footer:null},on:{cancel:e.handleCancel}},[t("a-list",{staticStyle:{"max-height":"500px","overflow-y":"auto"},attrs:{bordered:"","data-source":e.periodicList.deliver_msg,"item-layout":"vertical"},scopedSlots:e._u([{key:"renderItem",fn:function(r){return t("a-list-item",{},[t("div",{staticClass:"text-center width-auto mb-20 fs-16"},[e._v(" "+e._s(e.moment(r.deliver_date).format("YYYY年MM月"))+" ")]),r.deliver_list&&r.deliver_list.length?t("div",{staticClass:"flex align-center flex-wrap width-auto"},e._l(r.deliver_list,(function(r,o){return t("div",{key:o,staticClass:"flex flex-column align-center mb-20 deliver-item"},[t("span",{staticClass:"date-num",class:4==r.deliver_status?"active":""},[e._v(" "+e._s(r.date_num)+" ")]),t("span",[e._v(e._s(e._f("deliverStatusOpt")(r.deliver_status)))])])})),0):e._e()])}}])})],1)],1)},s=[],a=(r("d3b7"),r("99af"),r("011d")),i=r("c1df"),l=r.n(i),n=[{status:0,label:"待发货"},{status:1,label:"备货中"},{status:2,label:"待收货"},{status:3,label:"已顺延"},{status:4,label:"已收货"}],d={props:{visible:Boolean,order:Object},data:function(){return{title:"配送周期",periodicList:""}},filters:{deliverStatusOpt:function(e){var t="";return n.forEach((function(r){r.status==e&&(t=r.label)})),t}},created:function(){this.getPeriodicList()},methods:{moment:l.a,getPeriodicList:function(){var e=this;this.request(a["a"].getPeriodicList,{order_id:this.order.order_id}).then((function(t){if(e.periodicList=t||"",t){var r=t.nums,o=void 0===r?0:r,s=t.complete_num,a=void 0===s?0:s;e.title="".concat(e.title,"（共").concat(o,"期，已送").concat(a,"期）")}}))},handleCancel:function(){this.$emit("handleCancel")}}},c=d,f=(r("49f3"),r("2877")),p=Object(f["a"])(c,o,s,!1,null,"6f51ed59",null);t["default"]=p.exports}}]);