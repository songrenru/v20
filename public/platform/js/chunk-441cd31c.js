(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-441cd31c"],{2658:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-modal",{attrs:{title:"添加设备",visible:e.visible,"confirm-loading":e.confirmLoading,width:900},on:{ok:e.handleOk,cancel:e.handleCancel}},[r("a-form-model",{ref:"ruleForm",attrs:{model:e.deviceForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("div",{staticClass:"form_con"},[r("a-form-model-item",{staticClass:"form_item",attrs:{label:"设备品牌",prop:"device_brand"}},[r("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择","filter-option":e.filterOption,value:e.deviceForm.device_brand},on:{change:function(t){return e.handleSelectChange(t,"device_brand")}}},e._l(e.brandList,(function(t,i){return r("a-select-option",{attrs:{value:t.id}},[e._v(" "+e._s(t.title)+" ")])})),1)],1),r("a-form-model-item",{staticClass:"form_item",attrs:{label:"品牌类型",prop:"type"}},[r("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择","filter-option":e.filterOption,value:e.deviceForm.brand_type},on:{change:function(t){return e.handleSelectChange(t,"brand_type")}}},e._l(e.brandTypeList,(function(t,i){return r("a-select-option",{attrs:{value:t.id}},[e._v(" "+e._s(t.title)+" ")])})),1)],1),r("a-form-model-item",{staticClass:"form_item",attrs:{label:"电桩类型",prop:"pile_type"}},[r("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择","filter-option":e.filterOption,value:e.deviceForm.pile_type},on:{change:function(t){return e.handleSelectChange(t,"pile_type")}}},e._l(e.pileTypeList,(function(t,i){return r("a-select-option",{attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),r("a-form-model-item",{staticClass:"form_item",attrs:{label:"设备名称",prop:"equipment_name"}},[r("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.deviceForm.equipment_name,callback:function(t){e.$set(e.deviceForm,"equipment_name",t)},expression:"deviceForm.equipment_name"}})],1),r("a-form-model-item",{staticClass:"form_item",attrs:{label:"设备唯一编码",prop:"equipment_num"}},[r("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.deviceForm.equipment_num,callback:function(t){e.$set(e.deviceForm,"equipment_num",t)},expression:"deviceForm.equipment_num"}})],1),r("a-form-model-item",{staticClass:"form_item",attrs:{label:"设备功率",prop:"power"}},[r("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.deviceForm.power,callback:function(t){e.$set(e.deviceForm,"power",t)},expression:"deviceForm.power"}})],1),r("a-form-model-item",{staticClass:"form_item",attrs:{label:"最大电压",prop:"max_voltage"}},[r("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.deviceForm.max_voltage,callback:function(t){e.$set(e.deviceForm,"max_voltage",t)},expression:"deviceForm.max_voltage"}})],1),r("a-form-model-item",{staticClass:"form_item",attrs:{label:"最小电压",prop:"min_voltage"}},[r("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.deviceForm.min_voltage,callback:function(t){e.$set(e.deviceForm,"min_voltage",t)},expression:"deviceForm.min_voltage"}})],1),r("a-form-model-item",{staticClass:"form_item",attrs:{label:"最大电流",prop:"max_electric_current"}},[r("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.deviceForm.max_electric_current,callback:function(t){e.$set(e.deviceForm,"max_electric_current",t)},expression:"deviceForm.max_electric_current"}})],1),r("a-form-model-item",{staticClass:"form_item",attrs:{label:"最小电流",prop:"min_electric_current"}},[r("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.deviceForm.min_electric_current,callback:function(t){e.$set(e.deviceForm,"min_electric_current",t)},expression:"deviceForm.min_electric_current"}})],1),r("a-form-model-item",{staticClass:"form_item",attrs:{label:"最高温度",prop:"max_temperature"}},[r("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.deviceForm.max_temperature,callback:function(t){e.$set(e.deviceForm,"max_temperature",t)},expression:"deviceForm.max_temperature"}})],1),r("a-form-model-item",{staticClass:"form_item",attrs:{label:"最低温度",prop:"min_temperature"}},[r("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.deviceForm.min_temperature,callback:function(t){e.$set(e.deviceForm,"min_temperature",t)},expression:"deviceForm.min_temperature"}})],1),r("a-form-model-item",{staticClass:"form_item",attrs:{label:"枪头数量",prop:"socket_num"}},[r("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.deviceForm.socket_num,callback:function(t){e.$set(e.deviceForm,"socket_num",t)},expression:"deviceForm.socket_num"}})],1),r("a-form-model-item",{staticClass:"form_item",attrs:{label:"备注",prop:"remark"}},[r("a-textarea",{staticStyle:{padding:"5px width:100%",height:"100px",resize:"none"},attrs:{placeholder:"请输入"},model:{value:e.deviceForm.remark,callback:function(t){e.$set(e.deviceForm,"remark",t)},expression:"deviceForm.remark"}})],1)],1)])],1)},a=[],l=(r("a9e3"),{props:{visible:{type:Boolean,default:!1},device_id:{type:Number,default:0}},data:function(){return{confirmLoading:!1,ModalText:"1234567890-",labelCol:{span:6},wrapperCol:{span:14},deviceForm:{device_brand:"",device_type:"",brand:"",brand_type:"",equipment_name:"",equipment_num:"",power:"",min_voltage:"",max_voltage:"",min_electric_current:"",max_electric_current:"",min_temperature:"",max_temperature:"",socket_num:"",remark:"",pile_type:""},rules:{device_brand:[{required:!0,message:"请选择",trigger:"blur"}],device_type:[{required:!0,message:"请选择",trigger:"blur"}],brand:[{required:!0,message:"请输入",trigger:"blur"}],brand_type:[{required:!0,message:"请输入",trigger:"blur"}],equipment_name:[{required:!0,message:"请输入",trigger:"blur"}],equipment_num:[{required:!0,message:"请输入",trigger:"blur"}],power:[{required:!0,message:"请输入",trigger:"blur"}],min_voltage:[{required:!0,message:"请输入",trigger:"blur"}],max_voltage:[{required:!0,message:"请输入",trigger:"blur"}],min_electric_current:[{required:!0,message:"请输入",trigger:"blur"}],max_electric_current:[{required:!0,message:"请输入",trigger:"blur"}],min_temperature:[{required:!0,message:"请输入",trigger:"blur"}],max_temperature:[{required:!0,message:"请输入",trigger:"blur"}],socket_num:[{required:!0,message:"请输入",trigger:"blur"}],remark:[{required:!1,message:"请输入",trigger:"blur"}],pile_type:[{required:!0,message:"请输入",trigger:"blur"}]},feetypeList:[],brandList:[],brandTypeList:[],pileTypeList:[{label:"直流",value:1},{label:"交流",value:2}]}},watch:{visible:{handler:function(e){e&&(this.getBrandlist(),this.device_id&&this.getDetail(this.device_id))},immediate:!0}},methods:{handleOk:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(t){var r="/community/village_api.Pile/addEquipment";e.device_id&&(r="/community/village_api.Pile/editEquipment",e.deviceForm.id=e.device_id),e.request(r,e.deviceForm).then((function(t){e.device_id?e.$message.success("编辑成功！"):e.$message.success("添加成功！"),e.closeThis("refrash")}))}}))},handleCancel:function(){this.closeThis()},closeThis:function(e){this.deviceForm={device_brand:"",device_type:"",brand:"",brand_type:"",equipment_name:"",equipment_num:"",power:"",min_voltage:"",max_voltage:"",min_electric_current:"",max_electric_current:"",min_temperature:"",max_temperature:"",socket_num:"",remark:""},this.$refs.ruleForm.resetFields(),this.$emit("closeDevice",e)},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleSelectChange:function(e,t){console.log(e,t),this.deviceForm[t]=e,"device_brand"==t&&(this.brandTypeList=[],this.deviceForm.device_type="",this.getBrandTypeList(e)),this.$forceUpdate()},getBrandlist:function(){var e=this;e.request("/community/village_api.Pile/getBrandlist").then((function(t){e.brandList=t}))},getBrandTypeList:function(e){var t=this;t.request("/community/village_api.Pile/getBrandTypeList",{brand_id:e}).then((function(e){t.brandTypeList=e}))},getDetail:function(e){var t=this;t.request("/community/village_api.Pile/getEquipmentDetail",{id:e}).then((function(e){t.deviceForm=e.info,t.deviceForm.pile_type=e.info.type,t.getBrandTypeList(e.info.device_brand)}))}}}),n=l,o=(r("5f0b"),r("2877")),m=Object(o["a"])(n,i,a,!1,null,"01a3b0bc",null);t["default"]=m.exports},"4e57":function(e,t,r){},"5f0b":function(e,t,r){"use strict";r("4e57")}}]);