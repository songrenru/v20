(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30cc3a02","chunk-60d42e45","chunk-4cd10507","chunk-57c8c772","chunk-1b82d72b"],{"07a9":function(e,t,r){var s=r("4aad"),o=r("6751"),i=r("4b17"),a=r("76dd");function n(e,t,r){e=a(e),t=i(t);var n=t?o(e):0;return t&&n<t?e+s(t-n,r):e}e.exports=n},"126d":function(e,t,r){var s=r("6da8"),o=r("aaec"),i=r("d094");function a(e){return o(e)?i(e):s(e)}e.exports=a},4106:function(e,t,r){var s=r("4aad"),o=r("6751"),i=r("4b17"),a=r("76dd");function n(e,t,r){e=a(e),t=i(t);var n=t?o(e):0;return t&&n<t?s(t-n,r)+e:e}e.exports=n},"4aad":function(e,t,r){var s=r("b0a8"),o=r("ce86"),i=r("c32f"),a=r("aaec"),n=r("6751"),l=r("126d"),d=Math.ceil;function c(e,t){t=void 0===t?" ":o(t);var r=t.length;if(r<2)return r?s(t,e):t;var c=s(t,d(e/n(t)));return a(t)?i(l(c),0,e).join(""):c.slice(0,e)}e.exports=c},"5f66":function(e,t,r){"use strict";var s={getOrderList:"/mall/storestaff.MallOrder/getOrderList",exportOrder:"/mall/storestaff.MallOrder/exportOrder",orderTaking:"/mall/storestaff.MallOrder/orderTaking",deliverGoodsByHouseman:"/mall/storestaff.MallOrder/deliverGoodsByHouseman",staffVerify:"/mall/storestaff.MallOrder/staffVerify",postponeDelivery:"/mall/storestaff.MallOrder/postponeDelivery",agreeRefund:"/mall/storestaff.MallOrder/AgreeRefund",getExpress:"/mall/storestaff.MallOrder/getExpress",deliverGoodsByExpress:"/mall/storestaff.MallOrder/deliverGoodsByExpress",viewLogistics:"/mall/storestaff.MallOrder/viewLogistics",refuseRefund:"/mall/storestaff.MallOrder/RefuseRefund",clerkDiscount:"/mall/storestaff.MallOrder/clerkDiscount",getOrderDetails:"/mall/storestaff.MallOrder/getOrderDetails",clerkNotes:"/mall/storestaff.MallOrder/clerkNotes",getPeriodicList:"/mall/storestaff.MallOrder/getPeriodicList",downExcel:"/mall/storestaff.MallOrder/downExcel",downFailExcel:"/mall/storestaff.MallOrder/downFailExcel",uploadUrl:"/common/common.UploadFile/uploadFile",uploadExcel:"/mall/storestaff.MallOrder/uploadFile",getList:"/mall/storestaff.MallOrder/shopGoodsBatchLogList",getOrderListCopy:"/mall/storestaff.MallOrder/getOrderListCopy",getOrderDetailsCopy:"/mall/storestaff.MallOrder/getOrderDetailsCopy"};t["a"]=s},6751:function(e,t,r){var s=r("c9ca"),o=r("aaec"),i=r("ab81");function a(e){return o(e)?i(e):s(e)}e.exports=a},"67b4":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1,destroyOnClose:!0},on:{cancel:e.handleCancel}},[r("a-form-model",{attrs:{model:e.formData,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{attrs:{label:"快递"}},[r("a-select",{attrs:{placeholder:"请选择"},on:{change:e.hanleChange},model:{value:e.formData.express_id,callback:function(t){e.$set(e.formData,"express_id",t)},expression:"formData.express_id"}},e._l(e.expressOptions,(function(t){return r("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+e._s(t.is_singface&&"1"==t.is_singface?"（电子面单）":"")+" ")])})),1)],1),r("a-form-model-item",{attrs:{label:"快递单号"}},[r("a-input",{attrs:{placeholder:"请输入快递单号"},model:{value:e.formData.express_no,callback:function(t){e.$set(e.formData,"express_no",t)},expression:"formData.express_no"}})],1)],1),r("template",{slot:"footer"},[r("div",{staticClass:"flex justify-center align-center"},[r("a-button",{key:"back",staticClass:"mr-20",on:{click:function(t){return e.btnOpt(2)}}},[e._v(" 普通发货 ")]),r("a-button",{key:"submit",attrs:{type:"primary",disabled:"2"==e.fh_type||"1"==e.fh_type&&0==e.is_singface},on:{click:function(t){return e.btnOpt(1)}}},[e._v(" 电子面单发货 ")])],1)])],2)],1)},o=[],i=(r("a9e3"),r("d3b7"),r("159b"),r("b0c0"),r("ac1f"),r("5f66")),a={props:{visible:Boolean,title:String,order:Object,nowPeriodicItem:Object,fh_type:[String,Number]},data:function(){return{labelCol:{span:4},wrapperCol:{span:14},formData:{order_id:"",activity_type:"",periodic_order_id:"",current_periodic:"",periodic_count:"",express_type:"",express_no:"",express_id:"",express_name:"",fh_type:"1"},expressOptions:[],is_singface:1}},created:function(){this.getExpress()},methods:{getExpress:function(){var e=this;this.request(i["a"].getExpress,{}).then((function(t){e.expressOptions=t||[],e.order&&e.order.express_id&&e.$set(e.formData,"express_id",e.order.express_id)}))},hanleChange:function(e){var t=this;this.$set(this.formData,"express_id",e),this.expressOptions.forEach((function(r){r.id==e&&(t.$set(t.formData,"express_name",r.name),t.is_singface=r.is_singface)}))},btnOpt:function(e){var t=this;if(this.$set(this.formData,"express_type",e),this.formData.express_id){if(2==e){if(!this.formData.express_no)return void this.$message.error("请输入快递单号");var r=/[\u4e00-\u9fa5]/;if(r.test(this.formData.express_no))return void this.$message.error("不能输入中文")}var s=this.order,o=s.order_id,a=s.goods_activity_type,n=s.order_type,l=s.current_periodic,d=s.periodic_count,c=this.nowPeriodicItem.purchase_order_id;this.$set(this.formData,"order_id",o),this.$set(this.formData,"activity_type",a),"periodic"==n&&(this.$set(this.formData,"periodic_order_id",c),this.$set(this.formData,"current_periodic",l),this.$set(this.formData,"periodic_count",d)),this.$set(this.formData,"fh_type",this.fh_type),this.request(i["a"].deliverGoodsByExpress,this.formData).then((function(e){var r="1"==t.fh_type?"订单发货成功":"快递更改成功";t.$message.success(r),Object.assign(t.$data,t.$options.data()),t.handleCancel(),t.$emit("updateList")}))}else this.$message.error("请选择快递")},handleCancel:function(){this.$emit("handleCancel"),Object.assign(this.$data,this.$options.data())}}},n=a,l=r("0c7c"),d=Object(l["a"])(n,s,o,!1,null,"46b05dd1",null);t["default"]=d.exports},"6da8":function(e,t){function r(e){return e.split("")}e.exports=r},"96db":function(e,t,r){"use strict";r("a59e")},98610:function(e,t,r){},a59e:function(e,t,r){},a8ba:function(e,t,r){"use strict";var s=r("41b2"),o=r.n(s),i=r("4d91"),a=r("daa3"),n=r("9cba"),l=r("07a9"),d=r.n(l),c={name:"AStatisticNumber",functional:!0,render:function(e,t){var r=t.props,s=r.value,o=r.formatter,i=r.precision,a=r.decimalSeparator,n=r.groupSeparator,l=void 0===n?"":n,c=r.prefixCls,f=void 0;if("function"===typeof o)f=o({value:s,h:e});else{var p=String(s),u=p.match(/^(-?)(\d*)(\.(\d+))?$/);if(u){var _=u[1],m=u[2]||"0",h=u[4]||"";m=m.replace(/\B(?=(\d{3})+(?!\d))/g,l),"number"===typeof i&&(h=d()(h,i,"0").slice(0,i)),h&&(h=""+a+h),f=[e("span",{key:"int",class:c+"-content-value-int"},[_,m]),h&&e("span",{key:"decimal",class:c+"-content-value-decimal"},[h])]}else f=p}return e("span",{class:c+"-content-value"},[f])}},f={prefixCls:i["a"].string,decimalSeparator:i["a"].string,groupSeparator:i["a"].string,format:i["a"].string,value:i["a"].oneOfType([i["a"].string,i["a"].number,i["a"].object]),valueStyle:i["a"].any,valueRender:i["a"].any,formatter:i["a"].any,precision:i["a"].number,prefix:i["a"].any,suffix:i["a"].any,title:i["a"].any},p={name:"AStatistic",props:Object(a["t"])(f,{decimalSeparator:".",groupSeparator:","}),inject:{configProvider:{default:function(){return n["a"]}}},render:function(){var e=arguments[0],t=this.$props,r=t.prefixCls,s=t.value,i=void 0===s?0:s,n=t.valueStyle,l=t.valueRender,d=this.configProvider.getPrefixCls,f=d("statistic",r),p=Object(a["g"])(this,"title"),u=Object(a["g"])(this,"prefix"),_=Object(a["g"])(this,"suffix"),m=Object(a["g"])(this,"formatter",{},!1),h=e(c,{props:o()({},this.$props,{prefixCls:f,value:i,formatter:m})});return l&&(h=l(h)),e("div",{class:f},[p&&e("div",{class:f+"-title"},[p]),e("div",{style:n,class:f+"-content"},[u&&e("span",{class:f+"-content-prefix"},[u]),h,_&&e("span",{class:f+"-content-suffix"},[_])])])}},u=r("92fa"),_=r.n(u),m=r("c1df"),h=r("2cf8"),v=r("b24f"),b=r.n(v),y=r("4106"),g=r.n(y),I=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function x(e,t){var r=e,s=/\[[^\]]*\]/g,o=(t.match(s)||[]).map((function(e){return e.slice(1,-1)})),i=t.replace(s,"[]"),a=I.reduce((function(e,t){var s=b()(t,2),o=s[0],i=s[1];if(-1!==e.indexOf(o)){var a=Math.floor(r/i);return r-=a*i,e.replace(new RegExp(o+"+","g"),(function(e){var t=e.length;return g()(a.toString(),t,"0")}))}return e}),i),n=0;return a.replace(s,(function(){var e=o[n];return n+=1,e}))}function C(e,t){var r=t.format,s=void 0===r?"":r,o=Object(h["a"])(m)(e).valueOf(),i=Object(h["a"])(m)().valueOf(),a=Math.max(o-i,0);return x(a,s)}var w=1e3/30;function k(e){return Object(h["a"])(m)(e).valueOf()}var O={name:"AStatisticCountdown",props:Object(a["t"])(f,{format:"HH:mm:ss"}),created:function(){this.countdownId=void 0},mounted:function(){this.syncTimer()},updated:function(){this.syncTimer()},beforeDestroy:function(){this.stopTimer()},methods:{syncTimer:function(){var e=this.$props.value,t=k(e);t>=Date.now()?this.startTimer():this.stopTimer()},startTimer:function(){var e=this;this.countdownId||(this.countdownId=window.setInterval((function(){e.$refs.statistic.$forceUpdate(),e.syncTimer()}),w))},stopTimer:function(){var e=this.$props.value;if(this.countdownId){clearInterval(this.countdownId),this.countdownId=void 0;var t=k(e);t<Date.now()&&this.$emit("finish")}},formatCountdown:function(e){var t=e.value,r=e.config,s=this.$props.format;return C(t,o()({},r,{format:s}))},valueRenderHtml:function(e){return e}},render:function(){var e=arguments[0];return e(p,_()([{ref:"statistic"},{props:o()({},this.$props,{valueRender:this.valueRenderHtml,formatter:this.formatCountdown}),on:Object(a["k"])(this)}]))}},D=r("db14");p.Countdown=O,p.install=function(e){e.use(D["a"]),e.component(p.name,p),e.component(p.Countdown.name,p.Countdown)};t["a"]=p},a99c:function(e,t,r){"use strict";r("e274")},aaec:function(e,t){var r="\\ud800-\\udfff",s="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=s+o+i,n="\\ufe0e\\ufe0f",l="\\u200d",d=RegExp("["+l+r+a+n+"]");function c(e){return d.test(e)}e.exports=c},ab81:function(e,t){var r="\\ud800-\\udfff",s="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=s+o+i,n="\\ufe0e\\ufe0f",l="["+r+"]",d="["+a+"]",c="\\ud83c[\\udffb-\\udfff]",f="(?:"+d+"|"+c+")",p="[^"+r+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",_="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",h=f+"?",v="["+n+"]?",b="(?:"+m+"(?:"+[p,u,_].join("|")+")"+v+h+")*",y=v+h+b,g="(?:"+[p+d+"?",d,u,_,l].join("|")+")",I=RegExp(c+"(?="+c+")|"+g+y,"g");function x(e){var t=I.lastIndex=0;while(I.test(e))++t;return t}e.exports=x},b0a8:function(e,t){var r=9007199254740991,s=Math.floor;function o(e,t){var o="";if(!e||t<1||t>r)return o;do{t%2&&(o+=e),t=s(t/2),t&&(e+=e)}while(t);return o}e.exports=o},b38b4:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1,footer:null},on:{ok:e.handleCancel,cancel:e.handleCancel}},[e.rider_name?r("span",[r("span",[e._v("骑手："+e._s(e.rider_name))]),r("a-divider",{attrs:{type:"virticle"}}),r("span",[e._v("骑手号码："+e._s(e.rider_phone))]),r("a-divider")],1):e._e(),e.logistics.length?r("a-timeline",{attrs:{pending:e.pending,reverse:!1}},e._l(e.logistics,(function(t,s){return r("a-timeline-item",{key:s},[r("p",{staticClass:"mb-0"},[e._v(e._s(t.time))]),r("span",[e._v(e._s(t.context))])])})),1):r("a-empty",{attrs:{image:e.simpleImage}},[r("span",{attrs:{slot:"description"},slot:"description"},[e._v("暂无物流信息")])])],1)],1)},o=[],i=(r("06f4"),r("fc25")),a=(r("16c9"),r("387a")),n=r("8bbf"),l=r.n(n),d=r("5f66"),c=r("c1df"),f=r.n(c);l.a.use(a["a"]),l.a.use(i["a"]);var p={props:{visible:Boolean,title:String,nowPeriodicItem:Object,order:Object},data:function(){return{logistics:[],pending:!1,simpleImage:"",rider_name:"",rider_phone:""}},watch:{visible:{deep:!0,handler:function(e){e&&this.viewLogistics()}}},beforeCreate:function(){this.simpleImage=i["a"].PRESENTED_IMAGE_SIMPLE},mounted:function(){20!=this.order.status&&20!=this.nowPeriodicItem.is_complete||(this.pending="正在配送中..."),this.viewLogistics()},methods:{moment:f.a,viewLogistics:function(){var e=this,t=this.order,r=t.order_id,s=t.order_type,o=t.express_style,i=this.nowPeriodicItem.purchase_order_id;this.request(d["a"].viewLogistics,{order_id:r,periodic_order_id:i&&"periodic"==s?i:"",order_type:s,express_style:o}).then((function(t){t?(e.logistics=t.list||[],e.rider_name=t.rider_name,e.rider_phone=t.rider_phone):1===t.errCode&&e.$message.warn(t.errMsg)}))},handleCancel:function(){this.$emit("handleCancel")}}},u=p,_=(r("96db"),r("0c7c")),m=Object(_["a"])(u,s,o,!1,null,"d096130e",null);t["default"]=m.exports},b886:function(e,t,r){},ba8f:function(e,t,r){"use strict";r("98610")},c226:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1,footer:null},on:{cancel:e.handleCancel}},[r("a-list",{staticStyle:{"max-height":"500px","overflow-y":"auto"},attrs:{bordered:"","data-source":e.periodicList.deliver_msg,"item-layout":"vertical"},scopedSlots:e._u([{key:"renderItem",fn:function(t){return r("a-list-item",{},[r("div",{staticClass:"text-center width-auto mb-20 fs-16"},[e._v(" "+e._s(e.moment(t.deliver_date).format("YYYY年MM月"))+" ")]),t.deliver_list&&t.deliver_list.length?r("div",{staticClass:"flex align-center flex-wrap width-auto"},e._l(t.deliver_list,(function(t,s){return r("div",{key:s,staticClass:"flex flex-column align-center mb-20 deliver-item"},[r("span",{staticClass:"date-num",class:4==t.deliver_status?"active":""},[e._v(" "+e._s(t.date_num)+" ")]),r("span",[e._v(e._s(e._f("deliverStatusOpt")(t.deliver_status)))])])})),0):e._e()])}}])})],1)],1)},o=[],i=(r("d3b7"),r("99af"),r("5f66")),a=r("c1df"),n=r.n(a),l=[{status:0,label:"待发货"},{status:1,label:"备货中"},{status:2,label:"已顺延"},{status:3,label:"已发货"},{status:4,label:"已收货"},{status:5,label:"待支付"},{status:6,label:"已退款"}],d={props:{visible:Boolean,nowPeriodicItem:Object,order:Object},data:function(){return{title:"配送周期",periodicList:""}},filters:{deliverStatusOpt:function(e){var t="";return l.forEach((function(r){r.status==e&&(t=r.label)})),t}},created:function(){this.getPeriodicList()},methods:{moment:n.a,getPeriodicList:function(){var e=this;this.request(i["a"].getPeriodicList,{order_id:this.order.order_id}).then((function(t){if(e.periodicList=t||"",t){var r=t.nums,s=void 0===r?0:r,o=t.complete_num,i=void 0===o?0:o;e.title="".concat(e.title,"（共").concat(s,"期，已送").concat(i,"期）")}}))},handleCancel:function(){this.$emit("handleCancel")}}},c=d,f=(r("ba8f"),r("0c7c")),p=Object(f["a"])(c,s,o,!1,null,"78fe0e99",null);t["default"]=p.exports},c32f:function(e,t,r){var s=r("2b10");function o(e,t,r){var o=e.length;return r=void 0===r?o:r,!t&&r>=o?e:s(e,t,r)}e.exports=o},c9ca:function(e,t,r){var s=r("ef5d"),o=s("length");e.exports=o},d094:function(e,t){var r="\\ud800-\\udfff",s="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=s+o+i,n="\\ufe0e\\ufe0f",l="["+r+"]",d="["+a+"]",c="\\ud83c[\\udffb-\\udfff]",f="(?:"+d+"|"+c+")",p="[^"+r+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",_="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",h=f+"?",v="["+n+"]?",b="(?:"+m+"(?:"+[p,u,_].join("|")+")"+v+h+")*",y=v+h+b,g="(?:"+[p+d+"?",d,u,_,l].join("|")+")",I=RegExp(c+"(?="+c+")|"+g+y,"g");function x(e){return e.match(I)||[]}e.exports=x},e274:function(e,t,r){},e7c6:function(e,t,r){"use strict";r("b2a3"),r("b886")},ec449:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1},on:{ok:e.handleOk,cancel:e.handleCancel}},[r("a-form-model",{attrs:{model:e.formData,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{attrs:{label:""}},[r("a-input",{staticStyle:{height:"200px",resize:"none"},attrs:{type:"textarea",autosize:"",placeholder:"请输入拒绝理由"},model:{value:e.formData.reason,callback:function(t){e.$set(e.formData,"reason",t)},expression:"formData.reason"}})],1)],1)],1)],1)},o=[],i=r("5f66"),a={props:{visible:Boolean,title:String,nowPeriodicItem:Object,order:Object},data:function(){return{labelCol:{span:0},wrapperCol:{span:24},formData:{order_id:"",reason:"",status:""},expressOptions:[]}},created:function(){},methods:{handleOk:function(){var e=this;this.formData.reason?(this.$set(this.formData,"order_id",this.order.order_id),this.$set(this.formData,"status",this.order.status),this.$set(this.formData,"refund_id",this.order.refund_id),this.request(i["a"].refuseRefund,this.formData).then((function(t){e.$message.success("操作成功"),e.$emit("handleCancel"),e.$emit("updateList")}))):this.$message.error("请输入拒绝理由")},handleCancel:function(){this.$emit("handleCancel"),Object.assign(this.$data,this.$options.data())}}},n=a,l=r("0c7c"),d=Object(l["a"])(n,s,o,!1,null,"4be55bde",null);t["default"]=d.exports},f430:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[[e.orderInfo?r("div",{staticClass:"pt-20 pl-20 pr-20 pb-20 bg-ff wrap"},[r("a-descriptions",{attrs:{title:"",column:6}},[e.orderInfo.order_no?r("a-descriptions-item",{attrs:{label:60==e.orderInfo.order_status||70==e.orderInfo.order_status?"退款编号":"订单编号"}},[e._v(" "+e._s(e.orderInfo.order_no)+" ")]):e._e(),60!=e.orderInfo.order_status&&70!=e.orderInfo.order_status&&e.orderInfo.paid_extra?r("a-descriptions-item",{attrs:{label:"第三方支付号"}},[e._v(" "+e._s(e.orderInfo.paid_extra)+" ")]):e._e(),r("a-descriptions-item",{attrs:{label:60==e.orderInfo.order_status||70==e.orderInfo.order_status?"申请时间":"下单时间"}},[e._v(" "+e._s(60==e.orderInfo.order_status||70==e.orderInfo.order_status?e.orderInfo.refund_time:e.orderInfo.create_time)+" ")]),e.orderInfo.order_type_txt?r("a-descriptions-item",{attrs:{label:"订单类型"}},[e._v(" "+e._s(e.orderInfo.order_type_txt)+" ")]):e._e(),e.orderInfo.store_name?r("a-descriptions-item",{attrs:{label:"店铺名称"}},[e._v(" "+e._s(e.orderInfo.store_name)+" ")]):e._e()],1),r("a-row",{staticClass:"mt-30"},[r("a-card",{staticClass:"a-card"},[r("a-row",{attrs:{type:"flex"}},[r("a-col",{staticClass:"border-right card-item",attrs:{span:8}},[r("div",{staticClass:"order-status cr-black text-center"},[r("span",[e._v(e._s(e.orderInfo.order_status_txt))])]),r("div",{staticClass:"text-center"},[60==e.orderInfo.order_status&&e.orderInfo.rest_time?r("span",{staticClass:"flex align-center countdown mt-10 justify-center"},[r("span",[e._v("请在")]),r("span",{staticClass:"cr-red"},[r("a-statistic-countdown",{attrs:{title:"",value:e.orderInfo.rest_time,format:"D天H时m分s秒",valueStyle:e.valueStyle},on:{finish:e.finish}})],1),r("span",[e._v("内处理完成，超时将自动同意")])]):e._e(),2==e.orderInfo.express_style&&"prepare"==e.orderInfo.goods_activity_type?r("span",{staticClass:"cr-red fs-16 mt-10"},[e._v(" 发货时间："+e._s(e.moment(e.orderInfo.send_time).format("YYYY-MM-DD HH:mm")||"---")+" ")]):e._e(),1==e.orderInfo.express_style&&"periodic"!=e.orderInfo.goods_activity_type?r("span",[e._v(" 期望送达时间："+e._s(e.orderInfo.express_send_time||"---")+" ")]):e._e(),e.desc?r("span",{staticClass:"fs-16 mt-10"},[e._v(" "+e._s(e.desc)+" ")]):e._e()]),"periodic"==e.orderInfo.goods_activity_type&&e.orderInfo.status<60?e._e():r("a-row",{staticClass:"mt-20",attrs:{type:"flex",justify:"center",align:"middle"}},e._l(e.btnList,(function(t){return r("span",{key:t.props},[1==t.show?r("a-button",{staticClass:"ml-10 mr-10",attrs:{type:t.type},on:{click:function(r){return e.btnOpt(t)}}},[e._v(" "+e._s(t.label)+" ")]):e._e()],1)})),0)],1),r("a-col",{staticClass:"card-item",attrs:{span:16}},[r("div",{staticClass:"flex align-center justify-center",staticStyle:{height:"100%"}},[r("a-steps",{attrs:{"progress-dot":60!=e.orderInfo.order_status&&70!=e.orderInfo.order_status,current:e.current}},e._l(e.step,(function(t){return r("a-step",{key:t.props,attrs:{title:t.title,description:e.orderInfo[t.props]}})})),1)],1)])],1)],1)],1),60!=e.orderInfo.order_status&&70!=e.orderInfo.order_status?r("a-row",{staticClass:"mt-20"},[r("a-card",[r("a-row",[r("a-col",{staticClass:"fs-18",attrs:{span:8}},[r("span",{staticClass:"cr-black"},[e._v("买家备注：")]),r("span",[e._v(" "+e._s(e.orderInfo.remark||"无")+" ")])]),r("a-col",{attrs:{span:4}}),r("a-col",{staticClass:"flex align-center",attrs:{span:12}},[r("a-row",{staticStyle:{width:"100%"},attrs:{type:"flex",align:"middle"}},[r("a-col",{attrs:{span:24}},[r("div",{staticClass:"flex align-center flex-nowrap"},[r("span",{staticClass:"cr-black fs-18"},[e._v("店员备注：")]),r("a-input",{staticClass:"flex-1",attrs:{placeholder:"请输入备注内容",maxLength:50,"auto-size":""},model:{value:e.orderInfo.clerk_remark,callback:function(t){e.$set(e.orderInfo,"clerk_remark",t)},expression:"orderInfo.clerk_remark"}},[r("span",{staticClass:"bg-ff",attrs:{slot:"suffix"},slot:"suffix"},[e._v(" "+e._s(e.orderInfo.clerk_remark.length)+"/50 ")])]),50!=e.orderInfo.order_status&&51!=e.orderInfo.order_status?r("a-button",{staticClass:"ml-10",attrs:{type:"primary"},on:{click:e.clerkNotes}},[e._v("提交 ")]):e._e()],1)])],1)],1)],1)],1)],1):e._e(),r("a-row",{staticClass:"mt-20 a-card"},[r("a-card",[r("a-row",{attrs:{type:"flex"}},[r("a-col",{attrs:{span:8}},[r("a-row",{staticClass:"card-item"},[r("a-col",{staticClass:"mb-10"},[r("h2",{staticClass:"fs-18"},[e._v(" "+e._s(60==e.orderInfo.order_status||70==e.orderInfo.order_status?"退款原因":"收货信息")+" ")])]),r("a-col",{staticClass:"pr-10"},[60==e.orderInfo.order_status||70==e.orderInfo.order_status?r("div",[e.orderInfo.refund_reason?r("span",{staticClass:"descriptions-item descriptions-item-content"},[e._v(" "+e._s(e.orderInfo.refund_reason)+" ")]):e._e(),e.orderInfo.refund_images&&e.orderInfo.refund_images.length?r("span",e._l(e.orderInfo.refund_images,(function(t,s){return r("a-card",{key:s,staticStyle:{width:"240px"}},[r("viewer",{attrs:{images:t}},[t?r("img",{staticStyle:{width:"240px",border:"1px solid #ddd"},attrs:{src:t,title:"点击放大查看"}}):e._e()])],1)})),1):e._e()]):r("a-descriptions",{attrs:{title:"",column:1}},[r("a-descriptions-item",{attrs:{label:"收货人"}},[e._v(" "+e._s(e.orderInfo.username||"---")+" ")]),r("a-descriptions-item",{attrs:{label:"注册电话"}},[e._v(" "+e._s(e.orderInfo.zc_phone||"---")+" ")]),r("a-descriptions-item",{attrs:{label:"收货电话"}},[e._v(" "+e._s(e.orderInfo.sh_phone||"---")+" ")]),r("a-descriptions-item",{attrs:{label:"收货地址"}},[e._v(" "+e._s(e.orderInfo.address||"---")+" ")])],1)],1)],1)],1),r("a-col",{staticClass:"border-dash",attrs:{span:8}},[r("a-row",{staticClass:"card-item"},[r("a-col",{staticClass:"mb-10"},[r("h2",{staticClass:"fs-18"},[e._v(" "+e._s(60==e.orderInfo.order_status||70==e.orderInfo.order_status?"退款信息":"付款信息")+" ")])]),r("a-col",{staticClass:"pr-10"},[r("a-descriptions",{attrs:{title:""}},[e.orderInfo.periodic_count&&e.orderInfo.order_type&&"periodic"==e.orderInfo.order_type?r("a-descriptions-item",{attrs:{label:"周期购期数"}},[r("span",{staticClass:"flex align-center"},[r("span",[e._v("共计")]),r("span",{staticClass:"cr-black fw-bold"},[e._v(" "+e._s(e.orderInfo.periodic_count)+" ")]),r("span",[e._v("期")])])]):e._e(),r("a-descriptions-item",{attrs:{label:"商品总金额"}},[e._v(" "+e._s(e.currency)+e._s(e.orderInfo.money_total)+" ")]),"prepare"==e.orderInfo.order_type&&e.orderInfo.bargain_price&&0!=e.orderInfo.bargain_price?r("a-descriptions-item",[e._v(" 定金"+e._s(e.currency)+e._s(e.orderInfo.bargain_price)+" "),e.orderInfo.deduct_price&&0!=e.orderInfo.deduct_price?r("span",[e._v(" 抵"+e._s(e.currency)+e._s(e.orderInfo.deduct_price)+" ")]):e._e()]):e._e(),e.orderInfo.discount_total&&0!=e.orderInfo.discount_total?r("a-descriptions-item",{on:{click:function(t){e.discountTotalVisible=!e.discountTotalVisible}}},[r("span",{staticClass:"pointer popover",attrs:{slot:"label"},slot:"label"},[r("a-popover",{attrs:{title:"",trigger:"click",getPopupContainer:function(e){return e.parentNode}},model:{value:e.discountTotalVisible,callback:function(t){e.discountTotalVisible=t},expression:"discountTotalVisible"}},[r("span",{attrs:{slot:"content"},slot:"content"},[r("a-list",{attrs:{"item-layout":"horizontal","data-source":e.discountList},scopedSlots:e._u([{key:"renderItem",fn:function(t){return t.value&&0!=t.value?r("a-list-item",{staticClass:"flex"},[r("a-badge",{attrs:{color:"red",text:t.label+"："+e.currency+t.value}})],1):e._e()}}],null,!0)})],1),r("span",[e._v(" 总优惠金额 "),r("a-icon",{attrs:{type:"exclamation-circle"}})],1)])],1),e._v(" -"+e._s(e.currency)+e._s(e.orderInfo.discount_total)+" ")]):e._e(),e.orderInfo.money_freight&&0!=e.orderInfo.money_freight?r("a-descriptions-item",{attrs:{label:"运费"}},[e._v(" +"+e._s(e.currency)+e._s(e.orderInfo.money_freight)+" ")]):e._e()],1),"prepare"==e.orderInfo.order_type&&e.orderInfo.bargain_price&&0!=e.orderInfo.bargain_price&&e.orderInfo.order_status>=0&&e.orderInfo.order_status<10?r("a-descriptions",{attrs:{title:"",column:1}},[r("a-descriptions-item",{staticClass:"fw-bold"},[r("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("已支付定金")]),r("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(e._s(e.currency)+e._s(e.orderInfo.bargain_price))])])],1):e._e(),r("a-descriptions",{attrs:{title:"",column:2}},[r("a-descriptions-item",[r("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[0==e.orderInfo.order_status?r("span",[e._v("待付款：")]):e._e(),1==e.orderInfo.order_status?r("span",[e._v("尾款待付款：")]):e._e(),e.orderInfo.order_status>=10?r("span",[e._v("实付款：")]):e._e()]),r("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(" "+e._s(e.currency)+e._s(e.orderInfo.money_real)+" ")]),e.orderInfo.order_status>=0&&e.orderInfo.order_status<10?r("span",{staticClass:"popconfirm"},[r("a-popconfirm",{attrs:{"ok-text":"确认","cancel-text":"取消",visible:e.moneyRealVisible,getPopupContainer:function(e){return e.parentNode}},on:{confirm:e.moneyRealEdit,cancel:function(t){e.after_money="",e.moneyRealVisible=!1}}},[r("template",{slot:"title"},[r("p",[e._v("确认修改待付款金额？")]),r("p",[r("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",min:0},model:{value:e.after_money,callback:function(t){e.after_money=t},expression:"after_money"}})],1)]),1==e.orderInfo.clerk_modify?r("a-button",{attrs:{type:"link"},on:{click:function(t){e.moneyRealVisible=!e.moneyRealVisible}}},[e._v("修改 ")]):r("a-button",{attrs:{type:"link"}},[e._v(" 当前订单已参与活动，不可修改实付款金额 ")])],2)],1):e._e()]),e.orderInfo.is_refund?r("a-descriptions-item",{staticClass:"fw-bold"},[1==e.orderInfo.all_refund?r("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("全部退款金额")]):e._e(),0==e.orderInfo.all_refund?r("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("部分退款金额")]):e._e(),1==e.orderInfo.all_refund?r("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(e._s(e.currency)+e._s(e.orderInfo.refund_money))]):e._e(),0==e.orderInfo.all_refund?r("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(e._s(e.currency)+e._s(e.orderInfo.part_refund_money))]):e._e()]):e._e(),e.orderInfo.is_refund&&0!=e.orderInfo.refund_money&&0!=e.orderInfo.refund_money_periodic?r("a-descriptions-item",{staticClass:"fw-bold"},[r("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("退款金额")]),r("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(" "+e._s(e.currency)+e._s("periodic"==e.orderInfo.order_type?e.orderInfo.refund_money_periodic:e.orderInfo.refund_money)+" ")])]):e._e()],1),e.orderInfo.order_status>9&&e.payMethods.length?r("a-row",{attrs:{type:"flex",align:"middle"}},e._l(e.payMethods,(function(t){return r("span",{key:t.props,staticClass:"flex justify-between descriptions-item"},[r("span",{staticClass:"mr-20"},[e._v(" "+e._s(t.label)+"："),r("span",{staticClass:"descriptions-item-content"},[e._v(e._s(e.currency)+e._s(t.value||"---"))])])])})),0):e._e(),e.orderInfo.paid_time&&e.orderInfo.order_status>=10||e.orderInfo.paid_time&&"prepare"==e.orderInfo.goods_activity_type?r("a-descriptions",{attrs:{title:"",column:1}},[r("a-descriptions-item",{attrs:{label:"付款时间"}},[e._v(" "+e._s(e.moment(e.orderInfo.paid_time).format("YYYY-MM-DD HH:mm")||"---")+" ")])],1):e._e(),!e.orderInfo.refund_time||60!=e.orderInfo.order_status&&70!=e.orderInfo.order_status?e._e():r("a-descriptions",{attrs:{title:"",column:1}},[r("a-descriptions-item",{attrs:{label:"申请时间"}},[e._v(" "+e._s(e.moment(e.orderInfo.refund_time).format("YYYY-MM-DD HH:mm")||"---")+" ")])],1),e.orderInfo.clert_discount_process&&e.orderInfo.clert_discount_process.length?r("a-row",{attrs:{type:"flex",align:"middle"}},e._l(e.orderInfo.clert_discount_process,(function(t,s){return r("a-col",{key:s,staticClass:"flex justify-between descriptions-item mr-10"},[r("span",{staticClass:"mr-10"},[e._v("修改前："),r("span",{staticClass:"descriptions-item-content"},[e._v(e._s(e.currency)+e._s(t.money_before||"---"))])]),r("span",[e._v("修改后："),r("span",{staticClass:"descriptions-item-content"},[e._v(e._s(e.currency)+e._s(t.money_after||"---"))])])])})),1):e._e()],1)],1)],1),r("a-col",{attrs:{span:8}},[r("a-row",{staticClass:"card-item"},[r("a-col",{staticClass:"flex align-center mb-10"},[r("h2",{staticClass:"fs-18"},[e._v("更多信息")]),"periodic"==e.orderInfo.order_type?r("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(t){e.periodicListVisible=!0}}},[e._v(" 查看配送周期 ")]):e._e()],1),r("a-col",{staticClass:"pr-10"},[r("p",[2!=e.orderInfo.express_style||e.orderInfo.order_status<20||e.orderInfo.order_status>=50?r("span",[e._v("配送方式："+e._s(e.orderInfo.express_style_txt))]):r("span",[e._v(" 配送方式："+e._s(e.orderInfo.express_name)),r("br"),r("br"),e._v(" 快递单号："+e._s(e.orderInfo.express_num)+" ")]),20==e.orderInfo.order_status&&2==e.orderInfo.express_style?r("a-button",{attrs:{type:"link"},on:{click:e.editDeliverGoodsByExpress}},[e._v(" 修改 ")]):e._e(),e.orderInfo.order_status>=60&&e.orderInfo.order_status<70&&3!=e.orderInfo.express_style&&1==e.orderInfo.button.logistics_btn?r("a-button",{attrs:{type:"link"},on:{click:e.viewLogistics}},[e._v(" 查看物流 ")]):e.orderInfo.order_status>=60&&e.orderInfo.order_status<70&&3!=e.orderInfo.express_style&&1==e.orderInfo.button.trajectory_btn?r("a-button",{attrs:{type:"link"},on:{click:e.viewLogistics}},[e._v(" 骑手轨迹 ")]):e.orderInfo.order_status>=60&&e.orderInfo.order_status<70?r("a-button",{attrs:{type:"link"}},[e._v("暂无 ")]):e._e()],1),2==e.orderInfo.express_style&&"prepare"==e.orderInfo.goods_activity_type?r("p",[e._v(" 发货时间："+e._s(e.moment(e.orderInfo.send_time).format("YYYY-MM-DD HH:mm")||"---")+" ")]):e._e(),1==e.orderInfo.express_style&&"periodic"!=e.orderInfo.goods_activity_type?r("p",[e._v(" 期望送达时间："+e._s(e.orderInfo.express_send_time||"---")+" ")]):e._e()]),e.orderInfo.forms&&e.orderInfo.forms.length?r("a-col",e._l(e.orderInfo.forms,(function(t,s){return r("div",{key:s},[r("a-descriptions",{staticClass:"forms",attrs:{title:"",column:1}},[r("a-descriptions-item",{attrs:{label:t.title}},["text"==t.type?r("span",[e._v(e._s(t.val))]):e._e(),"image"==t.type&&t.val?r("a-card",{staticStyle:{width:"240px"},attrs:{bordered:!1}},[r("img",{attrs:{slot:"cover",alt:"image",src:t.val},slot:"cover"})]):e._e()],1)],1)],1)})),0):e._e()],1)],1)],1)],1)],1),r("a-table",{staticClass:"mt-20 a-table",attrs:{columns:e.goodsColumn,"data-source":e.goodsDataSource,scroll:{y:280},pagination:!1,rowKey:"index"},scopedSlots:e._u([{key:"goodsName",fn:function(t,s){return"periodic"==e.orderInfo.goods_activity_type&&e.orderInfo.order_status<60?r("span",{staticClass:"flex align-center"},[r("a-avatar",{attrs:{shape:"square",size:64,src:s.image}}),r("span",{staticClass:"flex ml-10"},[r("span",[e._v(e._s(s.goods_name))]),s.sku_info.length?r("span",[r("a-divider",{attrs:{type:"vertical"}})],1):e._e(),r("span",[e._v(e._s(s.sku_info))])]),e.orderInfo.periodic_info&&e.orderInfo.periodic_info.length?r("span",{staticClass:"flex ml-10"},[r("a-tag",{attrs:{color:"#f50"}},[e._v("第"+e._s(s.current_periodic)+"期")])],1):e._e()],1):r("span",{staticClass:"flex align-center"},[r("a-avatar",{attrs:{shape:"square",size:64,src:s.image}}),r("span",{staticClass:"flex ml-10"},[r("span",[e._v(e._s(s.goods_name))]),s.sku_info.length?r("span",[r("a-divider",{attrs:{type:"vertical"}})],1):e._e(),r("span",[e._v(e._s(s.sku_info))])]),1==s.is_gift?r("span",[r("a-divider",{attrs:{type:"vertical"}}),r("a-tag",{attrs:{color:"#108ee9"}},[e._v("赠品")])],1):e._e(),s.refund_desc.length?r("span",[r("a-divider",{attrs:{type:"vertical"}}),e._l(s.refund_desc,(function(t,s){return r("a-tag",{key:s,attrs:{color:"red"}},[e._v(" "+e._s(t)+" ")])}))],2):e._e()],1)}},{key:"price",fn:function(t){return r("span",{},[e._v(" "+e._s(e.currency)+e._s(t)+" ")])}},{key:"goods_status_txt",fn:function(t,s){return r("span",{},["periodic"==e.orderInfo.goods_activity_type&&e.orderInfo.order_status<60?r("span",[e._v(" 暂未到下期发货时间 ")]):r("span",[e._v(" "+e._s(t)+" ")])])}},{key:"is_complete_txt",fn:function(t,s){return"periodic"==e.orderInfo.goods_activity_type&&e.orderInfo.order_status<60?r("span",{},[r("span",[e._v(" "+e._s(t)+" ")]),r("a-divider",{attrs:{type:"vriticle"}}),r("span",[e._v(" 期望送达时间："+e._s(s.periodic_date)+" ")])],1):e._e()}},{key:"operation",fn:function(t,s){return r("span",{},e._l(e.periodicBtnListArr[s.index],(function(t,o){return r("span",{key:o},[1==t.show?r("a-button",{style:{color:t.color},attrs:{type:"link"},on:{click:function(r){return e.btnOpt(t,s)}}},[e._v(" "+e._s(t.label)+" ")]):e._e()],1)})),0)}}],null,!0)}),"express_btn"==e.currentBtn.props?r("deliverGoodsCopy",{attrs:{visible:e.deliverGoodsVisible,title:e.currentBtn.title,order:e.orderInfo,nowPeriodicItem:e.nowPeriodicItem,fh_type:e.fh_type},on:{handleCancel:function(t){e.deliverGoodsVisible=!1,e.currentBtn=""},updateList:e.getOrderDetails}}):e._e(),"trajectory_btn"==e.currentBtn.props||"logistics_btn"==e.currentBtn.props?r("logisticsCopy",{attrs:{visible:e.logisticsVisible,title:e.currentBtn.title,order:e.orderInfo,nowPeriodicItem:e.nowPeriodicItem},on:{handleCancel:function(t){e.logisticsVisible=!1,e.currentBtn=""}}}):e._e(),"refuse_refund_btn"==e.currentBtn.props?r("refuseRefundCopy",{attrs:{visible:e.refuseRefundVisible,title:e.currentBtn.title,order:e.orderInfo,nowPeriodicItem:e.nowPeriodicItem},on:{handleCancel:function(t){e.refuseRefundVisible=!1,e.currentBtn=""},updateList:e.getOrderDetails}}):e._e(),"periodic"==e.orderInfo.order_type?r("periodicListCopy",{attrs:{visible:e.periodicListVisible,order:e.orderInfo,nowPeriodicItem:e.nowPeriodicItem},on:{handleCancel:function(t){e.periodicListVisible=!1,e.currentBtn=""}}}):e._e()],1):e._e()]],2)},o=[],i=(r("e7c6"),r("a8ba")),a=(r("d3b7"),r("159b"),r("a9e3"),r("d81d"),r("4de4"),r("498a"),r("8bbf")),n=r.n(a),l=(r("0808"),r("6944")),d=r.n(l),c=r("5f66"),f=r("67b4"),p=r("b38b4"),u=r("ec449"),_=r("c226"),m=r("c1df"),h=r.n(m);n.a.use(d.a),n.a.use(i["a"]);var v={components:{deliverGoodsCopy:f["default"],logisticsCopy:p["default"],refuseRefundCopy:u["default"],periodicListCopy:_["default"]},data:function(){return{currency:"￥",order_id:this.$route.query.order_id||"",periodic_order_id:this.$route.query.periodic_order_id||"",refund_id:this.$route.query.refund_id||"",is_all:this.$route.query.is_all||"",tabStatus:this.$route.query.tabStatus||1,orderInfo:"",valueStyle:"color: #f50f50;font-size: 18px;",discountTotalVisible:!1,after_money:"",moneyRealVisible:!1,refund_images:[],desc:"",fh_type:"1",discountList:[{label:"平台优惠券优惠金额",value:"",props:"discount_system_coupon"},{label:"商家优惠券优惠金额",value:"",props:"discount_merchant_coupon"},{label:"商家会员卡优惠金额",value:"",props:"discount_merchant_card"},{label:"平台会员等级优惠金额",value:"",props:"discount_system_level"},{label:"店员优惠金额",value:"",props:"discount_clerk_money"},{label:"参加活动优惠金额",value:"",props:"discount_act_money"}],step:[{title:"买家下单",props:"step_create_time",current:0,show:!0,is_refund_order:!1},{title:"买家付款",props:"step_paid_time",current:1,show:!0,is_refund_order:!1},{title:"卖家发货",props:"step_send_time",current:2,show:!0,is_refund_order:!1},{title:"订单完成",props:"step_complete_time",current:3,show:!0,is_refund_order:!1},{title:"买家申请退款",props:"refund_time",current:1,show:!1,is_refund_order:!0},{title:"商户审核",props:"",current:1,show:!1,is_refund_order:!0},{title:"退款完成",props:"",current:2,show:!1,is_refund_order:!0}],btnList:[{label:"接单",props:"take_btn",show:"0",action:"",tips:"是否确定接单？",success:"接单成功",api:"orderTaking",type:"primary"},{label:"骑手配送",props:"hoseman_btn",show:"0",action:"",tips:"是否确定骑手配送？",success:"订单已转至平台配送！",api:"deliverGoodsByHouseman",type:"primary"},{label:"店员核销",props:"clerk_btn",show:"0",action:"confirm",tips:"是否确定核销？",success:"该订单已核销",api:"staffVerify",type:"primary"},{label:"快递发货",props:"express_btn",show:"0",action:"modal",title:"发货",type:"primary"},{label:"查看物流",props:"logistics_btn",show:"0",action:"modal",title:"查看物流",type:"primary"},{label:"顺延配送",props:"postpone_btn",show:"0",action:"confirm",tips:"是否确定顺延配送？",success:"该订单已顺延配送",api:"postponeDelivery",type:"primary"},{label:"骑手轨迹",props:"trajectory_btn",show:"0",action:"modal",title:"骑手轨迹",type:"primary"},{label:"同意退款",props:"agree_refund_btn",show:"0",action:"confirm",tips:"是否确定同意退款？",success:"同意退款成功",api:"agreeRefund",type:"primary"},{label:"拒绝退款",props:"refuse_refund_btn",show:"0",action:"modal",title:"拒绝退款",type:"danger"}],columns:[{title:"商品",dataIndex:"goods_name",key:"goods_name",scopedSlots:{customRender:"goodsName"},align:"left"},{title:"单价",dataIndex:"price",key:"price",scopedSlots:{customRender:"price"},align:"center"},{title:"数量",dataIndex:"num",key:"num",align:"center"},{title:"商品状态",dataIndex:"goods_status_txt",key:"goods_status_txt",scopedSlots:{customRender:"goods_status_txt"},align:"center"}],columnsPeriodic:[{title:"商品",dataIndex:"goods_name",key:"goods_name",scopedSlots:{customRender:"goodsName"},align:"left"},{title:"单价",dataIndex:"price",key:"price",scopedSlots:{customRender:"price"},align:"center"},{title:"数量",dataIndex:"num",key:"num",align:"center"},{title:"商品状态",dataIndex:"is_complete_txt",key:"is_complete_txt",scopedSlots:{customRender:"is_complete_txt"},align:"center"},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"operation"},align:"center"}],periodicBtnListArr:[],goodsColumn:[],goodsDataSource:[],currentBtn:"",deliverGoodsVisible:!1,logisticsVisible:!1,refuseRefundVisible:!1,periodicListVisible:!1,payMethods:[{label:"在线支付",labelProps:"pay_type_txt",props:"money_online_pay"},{label:"积分抵扣",props:"money_score"},{label:"平台余额支付",props:"money_system_balance"},{label:"商家会员卡余额支付",props:"money_merchant_balance"},{label:"商家会员卡赠送余额支付",props:"money_merchant_give_balance"},{label:"企业预存款余额支付",props:"money_qiye_balance"}],emptyCheckArr:["",null,void 0,"null","undefined"],nowPeriodicItem:[]}},mounted:function(){this.getOrderDetails()},beforeRouteLeave:function(e,t,r){e.meta.keepAlive=!0,r()},methods:{moment:h.a,getOrderDetails:function(){var e=this;this.request(c["a"].getOrderDetailsCopy,{order_id:this.order_id,periodic_order_id:this.periodic_order_id,refund_id:this.refund_id,now_status:this.tabStatus}).then((function(t){t&&t.children&&t.children.length&&t.children.forEach((function(e,t){e["index"]=t})),t&&t.periodic_info&&t.periodic_info.length&&t.periodic_info.forEach((function(e,t){e["index"]=t})),60==t.order_status&&t.rest_time&&(t.rest_time=Date.now()+1e3*Number(t.rest_time)),t&&(t.status=t.order_status),e.orderInfo=t||"",t.periodic_info&&t.periodic_info.length&&t.order_status<60&&"periodic"==t.goods_activity_type?(e.goodsDataSource=t.periodic_info,e.goodsColumn=e.columnsPeriodic):(e.goodsDataSource=t.children,e.goodsColumn=e.columns),e.initBtnList(),e.initPeriodicBtnList(),e.initStep(),e.initDiscountList(),e.initPayMethods(),console.log(e.orderInfo.refund_images)}))},initBtnList:function(){var e=this,t=this.orderInfo,r=t.button,s=t.order_status,o=t.express_style;this.btnList=this.btnList.map((function(t){return t.show=r[t.props],60!=s&&70!=s||"logistics_btn"!=t.props&&"trajectory_btn"!=t.props||(t.show=0),11==s&&"1"==o&&"hoseman_btn"==t.props&&(e.desc="订单转至骑手配送"),t}))},initPeriodicBtnList:function(){var e=this;if(this.orderInfo.periodic_info)for(var t=function(t){var r=[{label:"接单",props:"take_btn",show:"0",action:"",tips:"是否确定接单？",success:"接单成功",api:"orderTaking",color:"#1890ff"},{label:"骑手配送",props:"hoseman_btn",show:"0",action:"",tips:"是否确定骑手配送？",success:"订单已转至骑手配送！",api:"deliverGoodsByHouseman",color:"#1890ff"},{label:"店员核销",props:"clerk_btn",show:"0",action:"confirm",tips:"是否确定核销？",success:"该订单已核销",api:"staffVerify",color:"#1890ff"},{label:"快递发货",props:"express_btn",show:"0",action:"modal",title:"发货",color:"#1890ff"},{label:"查看物流",props:"logistics_btn",show:"0",action:"modal",title:"查看物流",color:"#1890ff"},{label:"顺延配送",props:"postpone_btn",show:"0",action:"confirm",tips:"是否确定顺延配送？",success:"该订单已顺延配送",api:"postponeDelivery",color:"rgb(250, 173, 20)"},{label:"骑手轨迹",props:"trajectory_btn",show:"0",action:"modal",title:"骑手轨迹",color:"#1890ff"},{label:"同意退款",props:"agree_refund_btn",show:"0",action:"confirm",tips:"是否确定同意退款？",success:"同意退款成功",api:"agreeRefund",color:"#1890ff"},{label:"拒绝退款",props:"refuse_refund_btn",show:"0",action:"modal",title:"拒绝退款",color:"rgb(250, 173, 20)"}];e.periodicBtnListArr[t]=r.map((function(r){return r.show=e.orderInfo.periodic_info[t].button[r.props],r}))},r=0;r<this.orderInfo.periodic_info.length;r++)t(r);console.log(this.periodicBtnListArr)},initStep:function(){var e=this,t=this.orderInfo.order_status;this.step=this.step.filter((function(r){if(e.orderInfo[r.props]&&(e.current=r.current),60==t||70==t?(r.is_refund_order?r.show=!0:r.show=!1,(70==t||r.props&&e.orderInfo[r.props])&&(e.current=r.current)):r.is_refund_order?r.show=!1:r.show=!0,r.show)return r}))},finish:function(){this.getOrderDetails()},btnOpt:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.currentBtn=e,console.log(this.currentBtn,"this.currentBtn");var s=this.currentBtn,o=(s.api,s.success,s.tips),i=void 0===o?"":o,a=s.action,n=void 0===a?"":a,l=s.props,d=void 0===l?"":l;n||this.btnRequest(this.currentBtn,r),"confirm"==n&&this.$confirm({title:i||"提醒",content:"",okText:"确认",cancelText:"取消",onOk:function(){t.btnRequest(t.currentBtn,r)},onCancel:function(){console.log("Cancel"),t.currentBtn=""},class:"test"}),"modal"==n&&("express_btn"==d?this.deliverGoodsVisible=!0:"trajectory_btn"==d||"logistics_btn"==d?this.logisticsVisible=!0:"refuse_refund_btn"==d&&(this.refuseRefundVisible=!0),this.nowPeriodicItem=r)},btnRequest:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=this.currentBtn,o=s.api,i=void 0===o?"":o,a=s.success,n=void 0===a?"":a,l=(s.tips,s.action,s.props),d=void 0===l?"":l;if(i){var f={order_id:this.order_id},p=["postpone_btn","take_btn","agree_refund_btn","hoseman_btn"];"periodic"==this.orderInfo.order_type&&-1!=p.indexOf(d)&&(f.periodic_order_id=r.purchase_order_id,f.current_periodic=r.current_periodic,f.periodic_count=r.periodic_count),this.orderInfo.order_status>=60&&this.orderInfo.order_status<70&&-1!=p.indexOf(d)&&(f.refund_id=this.refund_id,f.is_all=this.is_all),this.request(c["a"][i],f).then((function(e){t.$message.success(n),t.getOrderDetails()}))}},clerkNotes:function(){var e=this;this.orderInfo.clerk_remark=this.orderInfo.clerk_remark.trim(),-1==this.emptyCheckArr.indexOf(this.orderInfo.clerk_remark)?this.request(c["a"].clerkNotes,{order_id:this.order_id,notes:this.orderInfo.clerk_remark,status:this.orderInfo.order_status}).then((function(t){e.$message.success("提交成功")})):this.$message.error("请输入备注内容")},initDiscountList:function(){var e=this;this.discountList=this.discountList.map((function(t){return e.orderInfo&&(t.value=e.orderInfo[t.props]),t}))},moneyRealEdit:function(){var e=this;if(-1==this.emptyCheckArr.indexOf(this.after_money)){var t={order_id:this.order_id,before_money:this.orderInfo.money_real,after_money:this.after_money};this.request(c["a"].clerkDiscount,t).then((function(t){e.$message.success("修改成功"),e.after_money="",e.moneyRealVisible=!1,e.getOrderDetails()}))}else this.$message.error("请输入修改后的金额")},initPayMethods:function(){var e=this;this.payMethods=this.payMethods.filter((function(t){if(e.orderInfo&&t.labelProps&&(t.label=e.orderInfo[t.labelProps]),t.value=t.props&&e.orderInfo[t.props]&&0!=e.orderInfo[t.props]?e.orderInfo[t.props]:0,t.value)return t}))},viewLogistics:function(){var e={label:"查看物流",props:"logistics_btn",show:"0",action:"modal",title:"查看物流",type:"primary"};this.btnOpt(e)},editDeliverGoodsByExpress:function(){var e={label:"快递发货",props:"express_btn",show:"0",action:"modal",title:"更改快递",type:"primary"};this.fh_type="2",this.btnOpt(e)}}},b=v,y=(r("a99c"),r("0c7c")),g=Object(y["a"])(b,s,o,!1,null,"6a8f5c9e",null);t["default"]=g.exports}}]);