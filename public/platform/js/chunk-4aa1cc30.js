(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4aa1cc30","chunk-112c6452","chunk-112c6452","chunk-2d0b3786"],{"0bcd":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[a("a-form-model",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"地图标注"}},[a("a-row",[a("a-button",{staticClass:"mr-20",attrs:{type:"primary"},on:{click:function(e){return t.mapPlaceHandleEdit()}}},[t._v("添加")]),t.mapPlaceList.length&&t.selectedRowKeys.length?a("a-button",{staticClass:"mr-20",attrs:{type:"danger"},on:{click:function(e){return t.mapPlaceHandleDel(-1)}}},[t._v("删除")]):t._e()],1),a("a-table",{staticClass:"mt-20",attrs:{rowKey:"id","row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},columns:t.mapPlaceColumns,"data-source":t.mapPlaceList},scopedSlots:t._u([{key:"lng_lat",fn:function(e,n){return a("span",{},[a("span",{staticClass:"mr-10"},[t._v(t._s(n.longitude))]),a("span",[t._v(t._s(n.latitude))])])}},{key:"action",fn:function(e,n){return a("span",{},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.mapPlaceHandleDel(n.id)}}},[t._v("删除")]),a("a",{staticClass:"ml-20",attrs:{href:"javascript:;"},on:{click:function(e){return t.mapPlaceHandleEdit(n)}}},[t._v("编辑")])])}}])})],1),a("a-form-model-item",{attrs:{label:"推荐路线"}},[a("a-row",[a("a-button",{staticClass:"mr-20",attrs:{type:"primary"},on:{click:function(e){return t.recomRouteHandleAdd()}}},[t._v("添加")])],1)],1),t.mapLineList.length?a("a-form-model-item",{attrs:{label:"  ",colon:!1}},t._l(t.mapLineList,(function(e,n){return a("div",{key:n,staticClass:"pt-20 pb-20 inner-form",class:0!=n?"mt-20":null},[a("a-form-model-item",{staticClass:"flex-input",attrs:{label:"路线名称",required:!0}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:"20"}},[a("a-input",{attrs:{placeholder:"请输入路线名称"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}})],1),a("a-col",{attrs:{span:"2",offset:"1"}},[a("a",{staticClass:"btn cr-red",attrs:{href:"javascript:;"},on:{click:function(e){return t.delMapLine(n)}}},[t._v("删除")])])],1)],1),a("a-form-model-item",{attrs:{label:"路线排序"}},[a("a-row",[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.routeSortHandleAdd(n)}}},[t._v("添加")])],1)],1),t._l(e.location_ids,(function(e,i){return a("a-form-model-item",{key:n+"_"+i,attrs:{label:"游览顺序"+(i+1),"label-col":Object.assign({},t.labelCol,{offset:2})}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:"17"}},[a("a-select",{attrs:{placeholder:"请选择",options:t.getRouteSortOptions(n,e.id)},model:{value:e.id,callback:function(a){t.$set(e,"id",a)},expression:"routeSortItem.id"}})],1),a("a-col",{attrs:{span:"2",offset:"1"}},[a("a",{staticClass:"btn cr-red",attrs:{href:"javascript:;"},on:{click:function(e){return t.delRouteSortItem(n,i)}}},[t._v("删除")])])],1)],1)})),a("a-form-model-item",{attrs:{label:"上传路线周边图片"}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:"24"}},[a("a-upload",{attrs:{action:"/v20/public/index.php/common/common.UploadFile/uploadPictures",accept:"image/*","list-type":"picture-card","file-list":e.fileList,name:"reply_pic",data:{upload_dir:"merchant/life_tools/tools"}},on:{preview:t.handlePreviewImg,change:function(e){return t.handleRecomRouteUpload(e,n,"scenic_location_img")}}},[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("上传")])],1)],1)],1)],1),a("a-form-model-item",{attrs:{label:"路线绘制",required:!0}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.setPolyline(n)}}},[t._v("绘制路线")])],1)],2)})),0):t._e(),t.mapLineList.length?a("a-form-model-item",{attrs:{label:" ",colon:!1}},[a("a-button",{staticClass:"mt-20",attrs:{type:"primary"},on:{click:function(e){return t.handleSave()}}},[t._v("保存")])],1):t._e()],1),a("a-modal",{attrs:{title:t.modalTitle,visible:t.modalVisible,maskClosable:!1,width:"60%",destroyOnClose:!0,bodyStyle:{maxHeight:"70vh",overflowY:"auto"}},on:{ok:t.modalHandleOk,cancel:t.modalHandleCancel}},[a("a-form-model",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,model:t.mapPlaceFormData}},[a("a-form-model-item",{attrs:{label:"名称",required:!0}},[a("a-input",{attrs:{placeholder:"请输入名称"},model:{value:t.mapPlaceFormData.name,callback:function(e){t.$set(t.mapPlaceFormData,"name",e)},expression:"mapPlaceFormData.name"}})],1),a("a-form-model-item",{attrs:{label:"店铺链接"}},[a("a-input-search",{attrs:{placeholder:"请输入","enter-button":"功能库"},on:{search:function(e){return t.addLinkUrl()}},model:{value:t.mapPlaceFormData.merchant_url,callback:function(e){t.$set(t.mapPlaceFormData,"merchant_url",e)},expression:"mapPlaceFormData.merchant_url"}})],1),a("a-form-model-item",{attrs:{label:"店铺前往按钮名称"}},[a("a-input",{attrs:{placeholder:"请输入店铺前往按钮名称"},model:{value:t.mapPlaceFormData.btn_text,callback:function(e){t.$set(t.mapPlaceFormData,"btn_text",e)},expression:"mapPlaceFormData.btn_text"}})],1),a("a-form-model-item",{attrs:{label:"选择分类",required:!0}},[a("a-select",{attrs:{placeholder:"请选择分类",options:t.catOptions,showSearch:!0},model:{value:t.mapPlaceFormData.category_id,callback:function(e){t.$set(t.mapPlaceFormData,"category_id",e)},expression:"mapPlaceFormData.category_id"}})],1),a("a-form-model-item",{attrs:{label:"经纬度",required:!0}},[a("a-input",{staticStyle:{width:"200px"},attrs:{readOnly:"",value:t.mapPlaceFormData.lnglat,placeholder:"请选择位置"}}),a("a",{staticClass:"ml-10",on:{click:function(e){return t.$refs.mapPointModel.selectPoint()}}},[t._v("地图选点")])],1),a("a-form-model-item",{attrs:{label:"上传标记点图标",help:""}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:"20"}},[a("a-upload",{attrs:{action:"/v20/public/index.php/common/common.UploadFile/uploadPictures",accept:"image/*","list-type":"picture",name:"reply_pic",data:{upload_dir:"merchant/life_tools/tools"},showUploadList:!1},on:{change:function(e){return t.handleMapPlaceUpload(e,"mark_icon")}}},[a("a-button",{staticClass:"mb-20"},[a("a-icon",{attrs:{type:"upload"}}),t._v(" 上传文件 ")],1),a("div",{staticClass:"ant-form-explain"},[t._v("推荐尺寸70 * 70")])],1)],1)],1),t.mapPlaceFormData.mark_icon?a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:"16"}},[a("div",{staticClass:"upload-img-list"},[a("img",{staticClass:"img",attrs:{src:t.mapPlaceFormData.mark_icon,alt:""}}),a("a-icon",{staticClass:"pointer",attrs:{type:"delete"},on:{click:function(e){return t.handleMapMarkersUploadDel("mark_icon")}}})],1)])],1):t._e()],1),a("a-form-model-item",{attrs:{label:"周边监控"}},[a("a-button",{attrs:{type:"primary"},on:{click:t.addMonitor}},[t._v("添加")])],1),t.mapPlaceFormData.monitor&&t.mapPlaceFormData.monitor.length?a("a-form-model-item",{attrs:{label:"  ",colon:!1}},t._l(t.mapPlaceFormData.monitor,(function(e,n){return a("div",{key:n,staticClass:"pt-20 pb-20 inner-form",class:0!=n?"mt-20":null},[a("a-form-model-item",{staticClass:"flex-input",attrs:{label:"监控名称"}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:"20"}},[a("a-input",{attrs:{placeholder:"请输入监控名称"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}})],1),a("a-col",{attrs:{span:"2",offset:"1"}},[a("a",{staticClass:"btn cr-red",attrs:{href:"javascript:;"},on:{click:function(e){return t.delMonitorItem(n)}}},[t._v("删除")])])],1)],1),a("a-form-model-item",{attrs:{label:"监控链接"}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:"20"}},[a("a-input",{attrs:{placeholder:"请输入监控链接"},model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"item.url"}})],1)],1)],1)],1)})),0):t._e(),a("a-form-model-item",{attrs:{label:"上传语音介绍",help:"上传MP3格式文件，推荐小于10M"}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{staticClass:"mb-20",attrs:{span:"20"}},[a("a-upload",{attrs:{action:"/v20/public/index.php/common/common.UploadFile/uploadFile",accept:".mp3,.MP3","list-type":"picture",name:"file",data:{upload_dir:"merchant/life_tools/tools"},showUploadList:!1},on:{change:function(e){return t.handleMapPlaceUpload(e,"order_introduce")}}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 上传文件 ")],1)],1)],1)],1),t.mapPlaceFormData.order_introduce?a("a-row",{attrs:{type:"flex"}},[a("div",{staticClass:"upload-img-list mb-20"},[a("a",{staticClass:"pointer",attrs:{href:t.mapPlaceFormData.order_introduce,target:"blank"}},[a("a-icon",{staticClass:"mr-10",attrs:{type:"link"}}),t._v("语音文件")],1),a("a-icon",{staticClass:"pointer",attrs:{type:"delete"},on:{click:function(e){return t.handleMapMarkersUploadDel("order_introduce")}}})],1)]):t._e()],1),a("a-form-model-item",{attrs:{label:"上传周边图片",help:"推荐上传3张-10张，图片格式建议上传png/jpg，尺寸1:1"}},[a("a-upload",{attrs:{action:"/v20/public/index.php/common/common.UploadFile/uploadPictures",accept:"image/*","list-type":"picture-card","file-list":t.mapPlaceFileList,name:"reply_pic",data:{upload_dir:"merchant/life_tools/tools"}},on:{preview:t.handlePreviewImg,change:function(e){return t.handleMapPlaceUpload(e,"location_img",!0)}}},[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("上传")])],1)],1),a("a-form-model-item",{attrs:{label:"单位名称"}},[a("a-input",{attrs:{placeholder:"请输入单位名称"},model:{value:t.mapPlaceFormData.place_name,callback:function(e){t.$set(t.mapPlaceFormData,"place_name",e)},expression:"mapPlaceFormData.place_name"}})],1),a("a-form-model-item",{attrs:{label:"标注点简介",required:!0}},[a("a-input",{attrs:{type:"textarea",maxLength:-1,placeholder:"请输入标注点简介"},model:{value:t.mapPlaceFormData.introduction,callback:function(e){t.$set(t.mapPlaceFormData,"introduction",e)},expression:"mapPlaceFormData.introduction"}})],1),a("a-form-model-item",{attrs:{label:"详细描述"}},[a("rich-text",{attrs:{info:t.mapPlaceFormData.desc},on:{"update:info":function(e){return t.$set(t.mapPlaceFormData,"desc",e)}}})],1)],1)],1),a("map-point",{ref:"mapPointModel",on:{loadRefresh:t.setLongLat}}),a("mapPolyline",{ref:"mapPolyline",on:{conform:t.getPolyLine}}),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:function(e){t.previewVisible=!1,t.previewImage=""}}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)},i=[],o=a("c7eb"),r=a("1da1"),l=a("2909"),s=a("5530"),c=(a("d3b7"),a("d81d"),a("b0c0"),a("159b"),a("c740"),a("99af"),a("fb6a"),a("4de4"),a("b64b"),a("70e4")),u=a("884f"),p=a("aadf"),m=a("4d95");function d(t){return new Promise((function(e,a){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=function(t){return a(t)}}))}var h={name:"ScenicMapAdd",components:{mapPoint:c["default"],RichText:u["a"],mapPolyline:p["default"]},data:function(){return{previewVisible:!1,previewImage:"",labelCol:{span:5},wrapperCol:{span:16},modalVisible:!1,modalTitle:"",catOptions:[],mapPlaceColumns:[{title:"名称",dataIndex:"name"},{title:"经纬度",dataIndex:"lng_lat",scopedSlots:{customRender:"lng_lat"}},{title:"分类",dataIndex:"category_name"},{title:"地址",dataIndex:"address"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],selectedRowKeys:[],mapPlaceList:[],mapPlaceFormData:"",mapPlaceFileList:[],setPolylineIndex:-1,mapLineList:[],map_id:""}},mounted:function(){this.map_id=this.$route.query.id||"",this.map_id&&(this.getMapPlaceList(),this.getMapLineList())},beforeRouteLeave:function(t,e,a){this.$destroy(),a()},methods:{getOptions:function(){var t=this;this.request(m["a"].scenicMapPlaceCatList,{}).then((function(e){t.catOptions=e&&e.length?e.map((function(t){return{value:t.id,label:t.name}})):[]}))},getMapPlaceList:function(){var t=this,e={map_id:this.map_id};this.request(m["a"].scenicMapPlaceList,e).then((function(e){t.mapPlaceList=e||[]}))},getMapLineList:function(){var t=this,e={map_id:this.map_id};this.request(m["a"].scenicMapLineList,e).then((function(e){t.mapLineList=e&&e.length?t.initMapLineList(e):[],console.log("this.mapLineList",t.mapLineList)}))},onSelectChange:function(t){this.selectedRowKeys=t},initMapLineList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.length&&t.forEach((function(t){t.scenic_location_img&&t.scenic_location_img.length&&(t.fileList=t.scenic_location_img.map((function(t,e){return{uid:e,name:"image",status:"done",url:t}}))),t.location_ids&&t.location_ids.length&&(t.location_ids=t.location_ids.map((function(t){return{id:t-0}})))})),t},modalHandleOk:function(){var t=this;if(this.mapPlaceFormData.name)if(this.mapPlaceFormData.category_id)if(this.mapPlaceFormData.lnglat)if(this.mapPlaceFormData.introduction){var e=Object(s["a"])(Object(s["a"])({},this.mapPlaceFormData),{},{category_id:this.mapPlaceFormData.category_id||""});this.$delete(e,"lnglat"),this.$delete(e,"category_name"),this.request(m["a"].scenicMapPlaceSave,e).then((function(e){t.$message.success("操作成功",1,(function(){t.modalHandleCancel(),t.getMapPlaceList()}))}))}else this.$message.error("请输入标记点简介");else this.$message.error("请添加经纬度");else this.$message.error("请选择分类");else this.$message.error("请输入地图标注名称")},modalHandleCancel:function(){this.modalVisible=!1,this.modalTitle="",this.mapPlaceFileList=[]},mapPlaceHandleDel:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.$confirm({title:"是否确定删除地图标注?",centered:!0,onOk:function(){var a={map_id:t.map_id,place_ids:-1!=e?[e]:t.selectedRowKeys};t.request(m["a"].scenicMapPlaceDel,a).then((function(e){t.$message.success("操作成功",1,(function(){t.updateRecomRoute(a.place_id),t.getMapPlaceList(),t.selectedRowKeys=[]}))}))},onCancel:function(){}})},updateRecomRoute:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.mapLineList||[];e.length&&t.length&&(e.forEach((function(e){e.location_ids&&e.location_ids.length&&e.location_ids.forEach((function(e){-1!=t.findIndex((function(t){return t==e.id}))&&(e.id=void 0)}))})),this.mapLineList=e)},mapPlaceHandleEdit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t){this.mapPlaceFormData=Object(s["a"])(Object(s["a"])({lnglat:"".concat(t.longitude,",").concat(t.latitude)},t),{},{map_id:this.map_id}),this.modalTitle="编辑地图标注";var e=t.location_img||[];this.mapPlaceFileList=e.map((function(t,e){return{uid:e,name:"image",status:"done",url:t}}))}else this.mapPlaceFormData={id:"",map_id:this.map_id,name:"",merchant_url:"",btn_text:"",category_id:void 0,longitude:"",latitude:"",address:"",mark_icon:"",monitor:[],order_introduce:"",location_img:[],place_name:"",desc:"",lnglat:"",introduction:""},this.modalTitle="添加地图标注";this.getOptions(),this.modalVisible=!0},addLinkUrl:function(){var t=this;this.$LinkBases({source:"merchant",type:"h5",handleOkBtn:function(e){t.$set(t.mapPlaceFormData,"merchant_url",e.url)}})},setLongLat:function(t,e){this.mapPlaceFormData.lnglat=t,this.mapPlaceFormData.longitude=e.lng,this.mapPlaceFormData.latitude=e.lat,this.mapPlaceFormData.address=e.address},addMonitor:function(){var t=this.mapPlaceFormData.monitor||[];t.push({name:"",url:""}),this.$set(this.mapPlaceFormData,"monitor",t)},handleMapPlaceUpload:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(l["a"])(t.fileList);if(i.length)if(n){var o=[];this.mapPlaceFileList=i.map((function(t){if(t.response){var e=t.response.data;o.push(e)}else"done"==t.status&&t.url&&o.push(t.url);return t})),this.$set(this.mapPlaceFormData,e,o)}else i=i.slice(-1),i=i.map((function(t){if(t.response){var n=t.response.data;a.$set(a.mapPlaceFormData,e,n)}else"done"==t.status&&t.url&&a.$set(a.mapPlaceFormData,e,t.url);return t}));else this.mapPlaceFileList=[],n?this.$set(this.mapPlaceFormData,e,[]):this.$set(this.mapPlaceFormData,e,"")},handleMapMarkersUploadDel:function(t){this.$set(this.mapPlaceFormData,t,"")},delMonitorItem:function(t){this.$delete(this.mapPlaceFormData["monitor"],t)},handlePreviewImg:function(t){var e=this;return Object(r["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,d(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},recomRouteHandleAdd:function(){this.mapLineList.push({id:"",map_id:this.map_id,name:"",location_ids:[],scenic_location_img:[],scenic_location_line:[]})},delMapLine:function(t){var e=this,a=this.mapLineList[t];this.$confirm({title:"是否确定删除推荐路线?",centered:!0,onOk:function(){if(a.id){var n={map_id:e.map_id,line_id:a.id};e.request(m["a"].scenicMapLineDel,n).then((function(a){e.$message.success("操作成功",1,(function(){e.$delete(e.mapLineList,t)}))}))}else e.$delete(e.mapLineList,t)},onCancel:function(){}})},routeSortHandleAdd:function(t){var e=this.mapLineList[t]["location_ids"]||[];e.push({id:void 0}),this.$set(this.mapLineList[t],"location_ids",e)},delRouteSortItem:function(t,e){var a=this.mapLineList[t]["location_ids"];this.$delete(a,e),this.$set(this.mapLineList[t],"location_ids",a)},getRouteSortOptions:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.mapPlaceList||[];if(n.length){var i=n.map((function(t){return{value:t.id-0,label:t.name}})),o=this.mapLineList[t]["location_ids"]||[];return a&&o.length&&(o=o.filter((function(t){return t.id!=a}))),o.length&&o.forEach((function(t){var a=i.findIndex((function(e){return e.value==t.id}));-1!=a&&e.$set(i[a],"disabled",!0)})),i}return n},handleRecomRouteUpload:function(t,e,a){var n=Object(l["a"])(t.fileList);if(n.length){var i=[];n=n.map((function(t){if("image"==t.name&&t.url){var e=t.url;i.push(e)}if(t.response&&"done"==t.status&&1e3==t.response.status){var a=t.response.data;i.push(a)}return t})),this.$set(this.mapLineList[e],a,i),this.$set(this.mapLineList[e],"fileList",n)}else this.$set(this.mapLineList[e],a,[]),this.$set(this.mapLineList[e],"fileList",[])},setPolyline:function(t){this.setPolylineIndex=t;var e=this.mapLineList[t],a=e["scenic_location_line"]||[];a.length&&(a=a.map((function(t){return{lng:t.longitude,lat:t.latitude}})));var n=this.mapPlaceList||[],i=[],o=[];e.location_ids&&e.location_ids.length&&n.length&&e.location_ids.forEach((function(t){n.forEach((function(e){t.id==e.id&&(a.length||o.push({lng:e.longitude,lat:e.latitude}),i.push(Object(s["a"])(Object(s["a"])({},e),{},{lng:e.longitude,lat:e.latitude})))}))})),a.length||(a=o),this.$refs.mapPolyline.setPolyline(a,i)},getPolyLine:function(t){console.log("polylinePath",t),t.length&&(t=t.map((function(t){return{longitude:t.lng,latitude:t.lat}}))),this.$set(this.mapLineList[this.setPolylineIndex],"scenic_location_line",t),this.setPolylineIndex=-1},handleSave:function(){var t=this,e=!0,a=JSON.parse(JSON.stringify(this.mapLineList))||[];if(a.length){a=a.map((function(e){return e.fileList&&t.$delete(e,"fileList"),e.location_ids&&e.location_ids.length&&(e.location_ids=e.location_ids.filter((function(t){return t&&t.id&&void 0!=t.id})).map((function(t){return t.id}))),e}));try{a.forEach((function(a){if(!a.name)throw t.$message.error("请输入推荐路线名称"),e=!1,Error();if(!a.scenic_location_line||a.scenic_location_line&&!a.scenic_location_line.length)throw t.$message.error("请绘制推荐路线"),e=!1,Error()}))}catch(n){}}e&&this.request(m["a"].scenicMapLineSave,{map_lines:a}).then((function(e){t.$message.success("操作成功",1,(function(){t.$router.push({path:"/merchant/merchant.life_tools/ScenicMapList"})}))}))}}},f=h,g=(a("35a0"),a("0c7c")),v=Object(g["a"])(f,n,i,!1,null,"4a914fb4",null);e["default"]=v.exports},"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("d3b7");function n(t,e,a,n,i,o,r){try{var l=t[o](r),s=l.value}catch(c){return void a(c)}l.done?e(s):Promise.resolve(s).then(n,i)}function i(t){return function(){var e=this,a=arguments;return new Promise((function(i,o){var r=t.apply(e,a);function l(t){n(r,i,o,l,s,"next",t)}function s(t){n(r,i,o,l,s,"throw",t)}l(void 0)}))}}},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a("6b75");function i(t){if(Array.isArray(t))return Object(n["a"])(t)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function o(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var r=a("06c5");function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return i(t)||o(t)||Object(r["a"])(t)||l()}},"29f9":function(t,e,a){},"35a0":function(t,e,a){"use strict";a("cb4c16")},aadf:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,width:"80%",height:"80vh",visible:t.visible,footer:null,destroyOnClose:!0},on:{cancel:t.closeWindow}},[a("a-row",[a("a-col",{attrs:{span:24}},[a("baidu-map",{staticClass:"bm-view",attrs:{center:t.mapConfig.center,"scroll-wheel-zoom":!0,zoom:t.mapConfig.zoom,ak:t.AK,id:""},on:{click:t.clickMap,ready:t.mapReady}},[a("bm-geolocation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",showAddressBar:!0,autoLocation:!0}}),a("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP"],anchor:"BMAP_ANCHOR_TOP_LEFT"}}),a("bm-overview-map",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",isOpen:!0}}),t.isShowMapSign?t._l(t.mapMakers,(function(e){return a("bm-marker",{key:e.id,attrs:{position:{lng:e.lng,lat:e.lat},dragging:!1},on:{click:function(a){return t.markerClick(e)}}},[e.name?a("bm-label",{attrs:{content:e.name,labelStyle:{color:"#333",fontSize:"14px",borderColor:"#ffffff",backgroundColor:"#fff",padding:"4px",borderRadius:"4px"},offset:{width:0,height:-30}}}):t._e()],1)})):t._e(),a("bm-polyline",{attrs:{path:t.polylinePath,"stroke-color":"blue","stroke-opacity":.6,"stroke-weight":4,editing:!0},on:{lineupdate:t.updatePolylinePath}})],2)],1)],1),a("div",{staticStyle:{"text-align":"right"}},[a("row",{staticClass:"mt-20 mr-20"},[a("span",[t._v("是否开启删除线路点：")]),a("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关"},on:{change:t.switchChange},model:{value:t.mapPointFlag,callback:function(e){t.mapPointFlag=e},expression:"mapPointFlag"}})],1),a("a-button",{staticClass:"mt-20 mr-20",on:{click:function(e){t.polylinePath=[]}}},[t._v("重新绘制")]),a("a-button",{staticClass:"mt-20",attrs:{type:"primary"},on:{click:t.confirmPoint}},[t._v("确认绘制")])],1)],1)},i=[],o=(a("d3b7"),a("159b"),a("b0c0"),a("4de4"),a("df2b")),r=a("4d95"),l={components:{BaiduMap:o["a"]},props:{deletePoint:{type:Boolean,default:function(){return!1}}},data:function(){return{title:"地图绘制",visible:!1,mapConfig:{center:"北京",zoom:15},isShowMapSign:!1,clickMapShow:{position:{lng:116.404,lat:39.915}},AK:"",longlat:"",BMap:"",polylinePath:[],mapMakers:[],mapPointFlag:!1}},methods:{switchChange:function(t){var e=this;if(this.mapPointFlag=t,this.mapPointFlag)this.polylinePath.forEach((function(t,a){e.mapMakers.push({id:"id"+a,lng:t.lng,lat:t.lat})}));else{var a=[];this.mapMakers.forEach((function(t){t.name&&a.push(t)})),this.mapMakers=[],this.mapMakers=a}},markerClick:function(t){if(!t.name&&this.mapPointFlag){var e=this.polylinePath.filter((function(e){return e.lat==t.lat&&e.lng==t.lng}));e[0]&&(this.polylinePath=this.polylinePath.filter((function(t){return t.lat!=e[0].lat&&t.lng!=e[0].lng})),this.mapMakers=this.mapMakers.filter((function(t){return t.lat!=e[0].lat&&t.lng!=e[0].lng})))}},closeWindow:function(){this.visible=!1,this.polylinePath=[],this.mapPointFlag=!1},setPolyline:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];console.log("polylinePath",t),this.visible=!0,this.polylinePath=t,this.polylinePath.length&&this.$set(this.mapConfig,"center",{lat:this.polylinePath[0]["lat"],lng:this.polylinePath[0]["lng"]}),this.mapConfig.zoom=15,this.mapMakers=e,this.mapMakers&&this.mapMakers.length&&(this.isShowMapSign=!0)},mapReady:function(t){var e=this;this.request(r["a"].getMapConfig).then((function(t){e.AK=t.ak,e.polylinePath.length?e.$set(e.mapConfig,"center",{lat:e.polylinePath[0]["lat"],lng:e.polylinePath[0]["lng"]}):e.$set(e.mapConfig,"center",t.detault_city?t.detault_city:"北京"),e.mapConfig.zoom=15})),this.BMap=t.BMap},confirmPoint:function(){this.$emit("conform",this.polylinePath),this.closeWindow()},updatePolylinePath:function(t){this.polylinePath=t.target.getPath()},clickMap:function(t){t.type,t.target;var e=t.point;t.pixel,t.overlay;if(!this.mapPointFlag){var a=this.polylinePath||[];a.push({lng:e.lng,lat:e.lat}),this.polylinePath=a}}}},s=l,c=(a("bb25"),a("0c7c")),u=Object(c["a"])(s,n,i,!1,null,"6acaeda4",null);e["default"]=u.exports},bb25:function(t,e,a){"use strict";a("29f9")},c7eb:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("b636"),a("944a"),a("0c47"),a("23dc"),a("3410"),a("159b"),a("b0c0"),a("131a"),a("fb6a");var n=a("53ca");function i(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
i=function(){return e};var t,e={},a=Object.prototype,o=a.hasOwnProperty,r=Object.defineProperty||function(t,e,a){t[e]=a.value},l="function"==typeof Symbol?Symbol:{},s=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",u=l.toStringTag||"@@toStringTag";function p(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(t){p=function(t,e,a){return t[e]=a}}function m(t,e,a,n){var i=e&&e.prototype instanceof b?e:b,o=Object.create(i.prototype),l=new S(n||[]);return r(o,"_invoke",{value:M(t,a,l)}),o}function d(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(t){return{type:"throw",arg:t}}}e.wrap=m;var h="suspendedStart",f="suspendedYield",g="executing",v="completed",y={};function b(){}function _(){}function P(){}var L={};p(L,s,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(E([])));k&&k!==a&&o.call(k,s)&&(L=k);var x=P.prototype=b.prototype=Object.create(L);function F(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function a(i,r,l,s){var c=d(t[i],t,r);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Object(n["a"])(p)&&o.call(p,"__await")?e.resolve(p.__await).then((function(t){a("next",t,l,s)}),(function(t){a("throw",t,l,s)})):e.resolve(p).then((function(t){u.value=t,l(u)}),(function(t){return a("throw",t,l,s)}))}s(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,i){a(t,n,e,i)}))}return i=i?i.then(o,o):o()}})}function M(e,a,n){var i=h;return function(o,r){if(i===g)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw r;return{value:t,done:!0}}for(n.method=o,n.arg=r;;){var l=n.delegate;if(l){var s=D(l,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=g;var c=d(e,a,n);if("normal"===c.type){if(i=n.done?v:f,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=v,n.method="throw",n.arg=c.arg)}}}function D(e,a){var n=a.method,i=e.iterator[n];if(i===t)return a.delegate=null,"throw"===n&&e.iterator["return"]&&(a.method="return",a.arg=t,D(e,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=d(i,e.iterator,a.arg);if("throw"===o.type)return a.method="throw",a.arg=o.arg,a.delegate=null,y;var r=o.arg;return r?r.done?(a[e.resultName]=r.value,a.next=e.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,y):r:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,y)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function E(e){if(e||""===e){var a=e[s];if(a)return a.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function a(){for(;++i<e.length;)if(o.call(e,i))return a.value=e[i],a.done=!1,a;return a.value=t,a.done=!0,a};return r.next=r}}throw new TypeError(Object(n["a"])(e)+" is not iterable")}return _.prototype=P,r(x,"constructor",{value:P,configurable:!0}),r(P,"constructor",{value:_,configurable:!0}),_.displayName=p(P,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,P):(t.__proto__=P,p(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},F(C.prototype),p(C.prototype,c,(function(){return this})),e.AsyncIterator=C,e.async=function(t,a,n,i,o){void 0===o&&(o=Promise);var r=new C(m(t,a,n,i),o);return e.isGeneratorFunction(a)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},F(x),p(x,u,"Generator"),p(x,s,(function(){return this})),p(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),a=[];for(var n in e)a.push(n);return a.reverse(),function t(){for(;a.length;){var n=a.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=E,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach($),!e)for(var a in this)"t"===a.charAt(0)&&o.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function n(n,i){return l.type="throw",l.arg=e,a.next=n,i&&(a.method="next",a.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],l=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var s=o.call(r,"catchLoc"),c=o.call(r,"finallyLoc");if(s&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var r=i?i.completion:{};return r.type=t,r.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),$(a),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var n=a.completion;if("throw"===n.type){var i=n.arg;$(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,a,n){return this.delegate={iterator:E(e),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}},cb4c16:function(t,e,a){}}]);