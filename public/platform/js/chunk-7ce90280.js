(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ce90280"],{"2b69":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("a-modal",{attrs:{visible:e.dialogVisible,title:"选择店铺",centered:"",maskClosable:!1,width:600},on:{ok:e.chooseStoreOk,cancel:e.chooseStoreCancel}},[[o("a-form-model",{attrs:{layout:"inline",model:e.modalSearchForm,"label-col":{span:2},"wrapper-col":{span:22}}},[o("a-row",[o("a-col",{staticClass:"mr-10",attrs:{span:10}},[o("a-cascader",{attrs:{"field-names":{label:"area_name",value:"area_id",children:"children"},options:e.areaList,placeholder:"请选择省市区"},on:{change:e.onAreaChange},model:{value:e.searchForm.areaList,callback:function(t){e.$set(e.searchForm,"areaList",t)},expression:"searchForm.areaList"}})],1),o("a-col",{staticClass:"mr-20",attrs:{span:10}},[o("a-input",{attrs:{placeholder:"输入店铺名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.selectStoreList()}},model:{value:e.modalSearchForm.keyword,callback:function(t){e.$set(e.modalSearchForm,"keyword",t)},expression:"modalSearchForm.keyword"}})],1),o("a-col",{attrs:{span:2}},[o("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.selectStoreList()}}},[e._v(" 查询 ")])],1)],1)],1),e.modalTableData?[o("a-checkbox",{staticStyle:{"padding-left":"7px",margin:"10px 0 5px"},attrs:{indeterminate:e.indeterminate,checked:e.checkAll},on:{change:function(t){return e.onCheckAllChange(t)}}},[e._v("全选")]),o("a-row",[o("a-col",{staticStyle:{"font-size":"20px","padding-left":"7px"},attrs:{span:24}},e._l(e.modalTableData,(function(t,a){return o("a-col",{key:t.store_id,staticStyle:{"line-height":"40px"},attrs:{span:24}},[t.showRow?o("div",[o("a-checkbox",{key:a,attrs:{value:t.store_id,checked:-1!=e.grouplList1.indexOf(t.store_id)},on:{change:function(o){return e.getStoreId(o,t)}}},[e._v(" "+e._s(t.name)+" ")]),t.package_list&&t.package_list.length?[o("a-col",{attrs:{span:24}},[o("a-radio-group",{attrs:{name:"radioGroup"},on:{change:function(o){return e.onExpandedRowChange(o,t)}},model:{value:e.radio_check,callback:function(t){e.radio_check=t},expression:"radio_check"}},e._l(t.package_list,(function(t){return o("a-radio",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)]:e._e()],2):e._e()])})),1)],1),o("a-row",{staticClass:"text-right"},[[o("a-pagination",{attrs:{total:e.total,"show-less-items":"",hideOnSinglePage:""},on:{change:e.pageChange},model:{value:e.modalSearchForm.page,callback:function(t){e.$set(e.modalSearchForm,"page",t)},expression:"modalSearchForm.page"}})]],2)]:e._e()]],2)],1)},r=[],s=(o("d3b7"),o("159b"),o("b0c0"),o("a434"),o("a9e3"),o("4de4"),o("d81d"),o("c740"),o("a15b"),o("4b77")),i=o("da05"),n=o("290c"),c={components:{ARow:n["a"],ACol:i["b"]},props:{visible:{type:Boolean,default:!1},storeIdArr:{type:[Array,Object],default:function(){}}},watch:{visible:function(e,t){this.checkAll=!1,this.indeterminate=!1,this.grouplList1=[],this.storeIds=[],this.dialogVisible=e,this.getAllArea(),this.selectStoreList()}},mounted:function(){this.dialogVisible=this.visible,this.getAllArea(),this.selectStoreList()},data:function(){return{checkAll:!0,indeterminate:!0,radio_check:[],total:0,grouplList1:[],showHeader:!1,dialogVisible:!1,areaList:[],searchForm:{storeIdArray:[],areaList:[]},storeIds:[],modalSearchForm:{province_id:"",city_id:"",area_id:"",keyword:"",page:1},columns:[{dataIndex:"name",slots:{title:"name"},align:"center"}],modalTableData:[],curStoreList:[],modalSelectedRowKeys:[],expandedRowKeys:[]}},methods:{onCheckAllChange:function(e){var t=this;e.target.checked?(this.checkAll=!0,this.indeterminate=!0,this.modalTableData.forEach((function(e){e.show=!0,-1==t.grouplList1.indexOf(e.store_id)&&(t.grouplList1.push(e.store_id),t.storeIds.push({store_id:e.store_id,package_id:"",name:e.name}))}))):(this.modalTableData.forEach((function(e){e.show=!1;var o=t.grouplList1.indexOf(e.store_id);o>-1&&(t.grouplList1.splice(o,1),t.storeIds.splice(o,1))})),this.checkAll=!1,this.indeterminate=!1)},pageChange:function(e,t){this.modalSearchForm.page=e,this.modalTableData=this.modalTableDataGet(this.modalTableData,this.modalSearchForm.page)},getStoreId:function(e,t){if(e.target.checked)this.grouplList1.push(e.target.value),this.storeIds.push({store_id:t.store_id,package_id:"",name:t.name}),t.show=!0;else{var o=this.grouplList1.indexOf(e.target.value);o>-1&&(this.grouplList1.splice(o,1),this.storeIds.splice(o,1)),t.show=!1}this.grouplList1.length==this.modalTableData.length?(this.indeterminate=!0,this.checkAll=!0):(this.indeterminate=!1,this.checkAll=!1)},modalTableDataGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=[];if(e&&e.length){var r=(Number(t)-1)*o,s=Number(t)*o-1>this.total?this.total:Number(t)*o-1;a=e.filter((function(e,t){return e.showRow=!1,t>=r&&t<=s&&(e.showRow=!0),e}))}return a},selectStoreList:function(){var e=this,t={province_id:this.modalSearchForm.province_id,city_id:this.modalSearchForm.city_id,area_id:this.modalSearchForm.area_id,keyword:this.modalSearchForm.keyword,page:0};this.request(s["a"].getMerchantStoreList,t).then((function(t){if(t.list&&t.list.length?e.modalTableData=e.modalTableDataGet(t.list,e.modalSearchForm.page):e.modalTableData=[],e.total=t.total,0==e.storeIdArr.length)e.modalTableData.forEach((function(t){var o=e.grouplList1.indexOf(t.store_id);-1==o&&(e.grouplList1.push(t.store_id),e.storeIds.push({store_id:t.store_id,package_id:"",name:t.name}))})),e.checkAll=!0,e.indeterminate=!0;else{var o=0;e.storeIdArr.forEach((function(t){var a=e.grouplList1.indexOf(t.store_id);-1==a&&(e.grouplList1.push(t.store_id),e.storeIds.push({store_id:t.store_id,package_id:t.package_id,name:t.name})),e.modalTableData=e.modalTableData.map((function(e){return t.store_id==e.store_id&&(e.show=!0,o+=1),e}))})),o!=e.modalTableData.length?(e.checkAll=!1,e.indeterminate=!1):(e.checkAll=!0,e.indeterminate=!0)}}))},getAllArea:function(){var e=this;this.request(s["a"].getAllArea).then((function(t){e.areaList=t}))},onAreaChange:function(e){this.modalSearchForm.province_id=e[0],this.modalSearchForm.city_id=e[1],this.modalSearchForm.area_id=e[2],this.selectStoreList()},onExpandedRowChange:function(e,t){var o=t.store_id,a=e.target.value,r=this.storeIds.findIndex((function(e){return e.store_id==o}));r>-1?this.storeIds[r].package_id=a:(this.storeIds.push({store_id:o,package_id:a||"",name:t.name}),this.radio_check.push(a))},chooseStoreOk:function(){this.$set(this.searchForm,"storeIdArray",this.grouplList1);var e=[],t="";this.modalTableData&&this.modalTableData.length?this.storeIds.forEach((function(o){e.push(o.name),t=e.filter((function(e){return e})).join(",")})):this.storeIds=[],this.$emit("submit",{storeName:t,storeIds:this.storeIds}),this.chooseStoreCancel()},chooseStoreCancel:function(){this.modalTableData=[],this.dialogVisible=!1,this.$emit("update:visible",this.dialogVisible),this.$set(this.modalSearchForm,"keyword",""),this.$set(this.modalSearchForm,"page",1),this.$set(this.modalSearchForm,"province_id",""),this.$set(this.modalSearchForm,"city_id",""),this.$set(this.modalSearchForm,"area_id",""),this.$set(this.searchForm,"areaList",[])},onModalSelectChange:function(e){var t=this;this.expandedRowKeys=e,this.storeIds=[],this.modalSelectedRowKeys=e,this.modalSelectedRowKeys.forEach((function(e){t.storeIds.push({store_id:e,package_id:""})}))}}},d=c,l=(o("9469"),o("2877")),h=Object(l["a"])(d,a,r,!1,null,"6e2d32d5",null);t["default"]=h.exports},4964:function(e,t,o){},"4b77":function(e,t,o){"use strict";var a,r=o("ade3"),s=(a={addLabel:"/group/merchant.goods/addLabel",getLabelList:"/group/merchant.goods/getLabelList",getMerchantStoreList:"/group/merchant.goods/getMerchantStoreList",getAllArea:"/common/common.area/getAllArea",getGoodsCashingDetail:"/group/merchant.goods/getGoodsCashingDetail",getGroupEditInfo:"/group/merchant.goods/getGroupEditInfo"},Object(r["a"])(a,"getGoodsCashingDetail","/group/merchant.goods/getGoodsCashingDetail"),Object(r["a"])(a,"saveCashingGoods","/group/merchant.goods/submitCashing"),Object(r["a"])(a,"saveNomalGoods","/group/merchant.goods/saveNomalGoods"),Object(r["a"])(a,"getGoodsNormalDetail","/group/merchant.goods/getGoodsNormalDetail"),Object(r["a"])(a,"getGoodsList","/group/merchant.goods/getGoodsList"),Object(r["a"])(a,"courseAppoint","/group/merchant.Goods/courseAppoint"),Object(r["a"])(a,"getCourseAppointDetail","/group/merchant.Goods/getCourseAppointDetail"),Object(r["a"])(a,"setStoreRecommend","/group/merchant.goods/setStoreRecommend"),Object(r["a"])(a,"getStoreRecommend","/group/merchant.goods/getStoreRecommend"),Object(r["a"])(a,"getGoodsOrderList","/group/merchant.goods/getGoodsOrderList"),Object(r["a"])(a,"saveBookingAppoint","/group/merchant.Goods/saveBookingAppoint"),Object(r["a"])(a,"showBookingAppoint","/group/merchant.Goods/showBookingAppoint"),Object(r["a"])(a,"getStoreList","/group/merchant.AppointManage/getStoreList"),Object(r["a"])(a,"getGiftMsg","/group/merchant.AppointManage/getGiftMsg"),Object(r["a"])(a,"updateAppointGift","/group/merchant.AppointManage/updateAppointGift"),Object(r["a"])(a,"getAppointArriveList","/group/merchant.AppointManage/getAppointArriveList"),Object(r["a"])(a,"updateAppointArriveStatus","/group/merchant.AppointManage/updateAppointArriveStatus"),Object(r["a"])(a,"getGoodsOrderDetail","/group/merchant.goods/getGoodsOrderDetail"),Object(r["a"])(a,"orderExportUrl","/group/merchant.goods/exportOrder"),Object(r["a"])(a,"noteInfo","/group/merchant.goods/noteInfo"),Object(r["a"])(a,"orderDetail","/group/merchant.goods/orderDetail"),Object(r["a"])(a,"updateOrderNote","/group/merchant.goods/updateOrderNote"),Object(r["a"])(a,"getRatioList","/group/merchant.goods/getRatioList"),Object(r["a"])(a,"getGoodsCouponList","/group/merchant.goods/getGoodsCouponList"),Object(r["a"])(a,"couponDetail","/group/merchant.goods/couponDetail"),Object(r["a"])(a,"couponVerify","/group/merchant.goods/couponVerify"),Object(r["a"])(a,"exportGoodsCouponList","/group/merchant.goods/exportGoodsCouponList"),Object(r["a"])(a,"groupPackageLists","/group/merchant.goods/groupPackageLists"),Object(r["a"])(a,"showGroupPackage","/group/merchant.goods/showGroupPackage"),Object(r["a"])(a,"saveGroupPackage","/group/merchant.goods/saveGroupPackage"),Object(r["a"])(a,"delGroupPackage","/group/merchant.goods/delGroupPackage"),Object(r["a"])(a,"delPackageBindGroup","/group/merchant.goods/delPackageBindGroup"),a);t["a"]=s},9469:function(e,t,o){"use strict";o("4964")}}]);