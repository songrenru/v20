(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8de04922","chunk-09a39865"],{"15dd":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.title,width:900,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[e("a-spin",{attrs:{spinning:t.confirmLoading}},[e("a-form",{attrs:{form:t.form}},[e("a-form-item",{attrs:{label:"",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-col",{attrs:{span:30}},[e("span",{staticClass:"box_width label_col ant-form-item-required"},[t._v("标题")]),e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{initialValue:t.post.title,rules:[{required:!0,message:t.L("请输入标题！")}]}],expression:"['title',{ initialValue: post.title,rules: [{ required: true, message: L('请输入标题！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:100,placeholder:"请输入标题"}})],1),e("a-col",{attrs:{span:6}})],1),e("a-form-item",{attrs:{label:"",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-col",{attrs:{span:30}},[e("span",{staticClass:"box_width label_col ant-form-item-required"},[t._v("联系人")]),e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["user_name",{initialValue:t.post.user_name,rules:[{required:!0,message:t.L("请输入联系人！")}]}],expression:"['user_name',{ initialValue: post.user_name,rules: [{ required: true, message: L('请输入联系人！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入联系人"}})],1),e("a-col",{attrs:{span:6}})],1),e("a-form-item",{attrs:{label:"",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-col",{attrs:{span:30}},[e("span",{staticClass:"box_width label_col ant-form-item-required"},[t._v("联系方式")]),e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["user_phone",{initialValue:t.post.user_phone,rules:[{required:!0,message:t.L("请输入联系方式！")}]}],expression:"['user_phone',{ initialValue: post.user_phone,rules: [{ required: true, message: L('请输入联系方式！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入联系方式"}})],1),e("a-col",{attrs:{span:6}})],1),e("a-form-item",{attrs:{label:"",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-col",{attrs:{span:30}},[e("span",{staticClass:"box_width label_col"},[t._v("验房地址")]),e("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:100},model:{value:t.post.adress,callback:function(e){t.$set(t.post,"adress",e)},expression:"post.adress"}}),e("span",{staticClass:"adress_box",on:{click:function(e){return t.$refs.maPModel.init_(1,t.post.long,t.post.lat)}}},[t._v("点击选取验房地址")])],1),e("a-col",{attrs:{span:6}})],1),e("a-form-item",{attrs:{label:"",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-col",{attrs:{span:30}},[e("span",{staticClass:"box_width label_col ant-form-item-required"},[t._v("排号时间")]),e("a-range-picker",{staticStyle:{width:"300px"},attrs:{ranges:{"今日":[t.moment(),t.moment()],"昨日":[t.moment().subtract(1,"days"),t.moment().subtract(1,"days")],"近七天":[t.moment().subtract(7,"days"),t.moment()],"近30天":[t.moment().subtract(30,"days"),t.moment()]}},on:{change:t.queuingChange},model:{value:t.post.queuing_time,callback:function(e){t.$set(t.post,"queuing_time",e)},expression:"post.queuing_time"}})],1),e("a-col",{attrs:{span:6}})],1),e("a-form-item",{attrs:{label:"",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-col",{attrs:{span:30}},[e("span",{staticClass:"box_width label_col"},[t._v("办公时间")]),e("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["work_start_time",{initialValue:""==t.post.work_start_time?null:t.moment(t.post.work_start_time,"HH:mm"),rules:[{required:!0,message:t.L("请选择办公时间~")}]}],expression:"[\n              'work_start_time',\n              {\n                initialValue: post.work_start_time == '' ? null : moment(post.work_start_time, 'HH:mm'),\n                rules: [{ required: true, message: L('请选择办公时间~') }],\n              },\n            ]"}],attrs:{format:"HH:mm",placeholder:t.L("开始时间")}}),e("span",{staticClass:"ml-10 mr-10"},[t._v(t._s(t.L("至")))]),e("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["work_end_time",{initialValue:""==t.post.work_end_time?null:t.moment(t.post.work_end_time,"HH:mm")}],expression:"[\n              'work_end_time',\n              { initialValue: post.work_end_time == '' ? null : moment(post.work_end_time, 'HH:mm') },\n            ]"}],attrs:{format:"HH:mm",placeholder:t.L("结束时间")}})],1),e("a-col",{attrs:{span:6}})],1),e("a-form-item",{attrs:{label:"",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-col",{attrs:{span:30}},[e("span",{staticClass:"box_width label_col ant-form-item-required"},[t._v("预约数")]),e("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["max_queue_number",{initialValue:t.post.max_queue_number,rules:[{required:!0,message:t.L("请输入每日最大预约数！")}]}],expression:"['max_queue_number',{ initialValue: post.max_queue_number ,rules: [{ required: true, message: L('请输入每日最大预约数！') }]}]"}],attrs:{min:1,max:9999,placeholder:"请输入预约数"}}),t._v(" 设置每日最大预约数（最多可设置9999） ")],1),e("a-col",{attrs:{span:6}})],1),e("a-form-item",{attrs:{label:"",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("span",{staticClass:"box_width label_col float_l"},[t._v("内容")]),e("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{initialValue:t.post.content}],expression:"['content', { initialValue: post.content}]"}],staticStyle:{width:"300px"},attrs:{maxLength:100,placeholder:"请输入内容",rows:4}})],1),e("a-form-item",{attrs:{label:"",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("span",{staticClass:"label_col"},[t._v("开启自动审核")]),e("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["examine_type",{initialValue:t.post.examine_type}],expression:"['examine_type', {initialValue:post.examine_type}]"}]},[e("a-radio",{attrs:{value:1}},[t._v(" 开启 ")]),e("a-radio",{attrs:{value:0}},[t._v(" 关闭 ")])],1)],1),""!=t.voucher_img?e("a-form-item",{attrs:{label:"",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("span",{staticClass:"label_col"},[t._v("扫码进排号预约")]),e("div",{staticClass:"voucher_img_box"},[e("viewer",{attrs:{images:t.voucher_img}},t._l(t.voucher_img,(function(t,a){return e("img",{attrs:{src:t}})})),0)],1)]):t._e(),e("mapInfo",{ref:"maPModel",on:{change:t.choiceMap}})],1)],1)],1)},i=[],r=(a("c5cb"),a("a532"),a("2f42")),s=a.n(r),n=a("a0e0"),l=a("b27c"),c=(a("0a71"),a("eece")),m=a.n(c),p=a("8bbf"),u=a.n(p);u.a.use(m.a);var d={name:"arrangingSet",components:{mapInfo:l["default"]},data:function(){return{title:"新建",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,loading:!1,post:{id:0,title:"",user_name:"",user_phone:"",long:"",lat:"",adress:"",queuing_time:[void 0,void 0],work_start_time:"",work_end_time:"",max_queue_number:"",examine_type:0},startTime:[],endTime:[],content:"",voucher_img:[],source_type:1}},watch:{},mounted:function(){},methods:{moment:s.a,info:function(t){this.title="排号规则设置",this.visible=!0,this.loading=!0,this.startTime=[],this.endTime=[],this.content="",this.voucher_img=[],this.source_type=t,this.getEditInfo()},queuingChange:function(t,e){this.post.queuing_time=[e[0],e[1]]},choiceMap:function(t){this.post.long=t.lng.toString(),this.post.lat=t.lat.toString(),t.address.length>0&&(this.post.adress=t.address),console.log(22222,t,this.post)},handleSubmit:function(){var t=this,e=this.form.validateFields;this.confirmLoading=!0,e((function(e,a){e?t.confirmLoading=!1:(a.id=t.post.id,a.queuing_time=t.post.queuing_time,a.long=t.post.long,a.lat=t.post.lat,a.adress=t.post.adress,a.source_type=t.source_type,a.work_start_time=s()(a.work_start_time).format("HH:mm"),a.work_end_time=s()(a.work_end_time).format("HH:mm"),"Invalid date"==a.work_end_time&&(a.work_end_time=""),t.request(n["a"].publicRentalSubArrangingSet,a).then((function(e){t.$message.success("编辑成功"),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.confirmLoading=!1,t.$emit("ok")}),1500)})).catch((function(e){t.confirmLoading=!1})))}))},handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.id="0",t.form=t.$form.createForm(t)}),500)},getEditInfo:function(){var t=this;this.request(n["a"].publicRentalGetArrangingSet,{source_type:this.source_type}).then((function(e){t.post=e.data,t.voucher_img=e.voucher_img}))}}},_=d,h=(a("dc8c"),a("0b56")),g=Object(h["a"])(_,o,i,!1,null,"128ef277",null);e["default"]=g.exports},"53f94":function(t,e,a){},"598e":function(t,e,a){"use strict";a("53f94")},b27c:function(t,e,a){"use strict";a.r(e);a("aa48"),a("8f7e");var o=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.title,width:900,footer:null,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel}},[e("div",{staticClass:"search-box"},[e("a-row",{attrs:{gutter:48}},[e("a-col",{attrs:{md:10,sm:10}},[e("a-input-group",{attrs:{compact:""}},[e("p",{staticStyle:{"margin-top":"5px"}},[t._v("关键词：")]),e("a-input",{staticStyle:{width:"70%"},model:{value:t.search.keyword,callback:function(e){t.$set(t.search,"keyword",e)},expression:"search.keyword"}})],1)],1),e("a-col",{staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"},attrs:{md:3,sm:24}},[e("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.subBut()}}},[t._v(" 提交 ")])],1),e("a-col",{staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"},attrs:{md:2,sm:24}},[e("a-button",{on:{click:function(e){return t.resetList()}}},[t._v("清空")])],1),t.markerPoint.lng>0?e("span",{staticStyle:{"line-height":"30px",color:"red"}},[t._v("当前选中地址："+t._s(t.markerPoint.address))]):t._e()],1)],1),e("div",{staticClass:"map",staticStyle:{width:"100% !important",height:"500px !important"}},[e("baidu-map",{staticClass:"BMap",staticStyle:{width:"100%",height:"100%"},attrs:{center:t.center,"scroll-wheel-zoom":!0,zoom:t.zoom},on:{ready:t.handler,click:t.getClickInfo}},[e("bm-marker",{attrs:{position:t.markerPoint,dragging:!0},on:{dragend:t.dragend}},[e("bm-label",{attrs:{content:"我在这",labelStyle:{color:"red",fontSize:"24px"},offset:{width:-26,height:26}}})],1),e("bm-local-search",{attrs:{keyword:t.search.keyword,"auto-viewport":!0,location:t.search.location}})],1)],1)])},i=[],r=(a("075f"),a("19f1"),a("2f42")),s=a.n(r),n=(a("a0e0"),{name:"activityMap",components:{},data:function(){return{title:"新建",confirmLoading:!1,visible:!1,loading:!1,center:{lng:0,lat:0},post:{id:0,lng:0,lat:0},markerPoint:{lng:0,lat:0,address:""},zoom:16,search:{location:"",keyword:""},map:"",BMap:""}},mounted:function(){},methods:{moment:s.a,handler:function(t){var e=t.BMap,a=t.map;this.map=a,this.BMap=e,console.log("handler")},dragend:function(t){this.getLocations(t,0)},getClickInfo:function(t){this.getLocations(t,0)},getLocations:function(t,e){var a=this;console.log("获取地址");var o=new a.BMap.Geocoder,i=[];i=1==e?new a.BMap.Point(t.point.lng,t.point.lat):t.point,o.getLocation(i,(function(t){var e=t.addressComponents,o=t.surroundingPois,i=e.province,r=e.city,s=e.district,n=e.street;o.length>0&&o[0].title?n+=n?"-".concat(o[0].title):"".concat(o[0].title):n+=e.streetNumber,a.markerPoint["address"]=i+r+s+n})),a.markerPoint["lng"]=t.point["lng"],a.markerPoint["lat"]=t.point["lat"]},subBut:function(){if(0==this.markerPoint.lng)return this.$message.error("请先在地图完成选点"),!1;this.$emit("change",this.markerPoint),this.resetList(),this.handleCancel()},resetList:function(){this.markerPoint={lng:0,lat:0,address:""},this.search={location:"",keyword:""}},init_:function(t,e,a){var o=this;t=Number(t),e=Number(e),a=Number(a),o.title="地图选点",o.search={location:"",keyword:""},o.post={id:t,lng:e,lat:a},o.markerPoint={lng:0,lat:0,address:""},o.post.id>0?setTimeout((function(){o.center={lng:o.post.lng,lat:o.post.lat},o.getLocations({point:{lng:o.post.lng,lat:o.post.lat}},1)}),800):setTimeout((function(){o.center={lng:o.post.lng,lat:o.post.lat}}),800),o.zoom=15,o.loading=!0,o.visible=!0,console.log("init_")},handleCancel:function(){this.visible=!1}}}),l=n,c=(a("598e"),a("0b56")),m=Object(c["a"])(l,o,i,!1,null,"6344d589",null);e["default"]=m.exports},dc8c:function(t,e,a){"use strict";a("e050")},e050:function(t,e,a){}}]);