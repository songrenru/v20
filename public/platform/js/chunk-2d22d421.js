(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22d421"],{f771:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:"绑定设备",visible:e.visible,width:1e3,footer:null},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-table",{attrs:{columns:e.columns,"data-source":e.tableList,loading:e.tableLoading,pagination:e.pageInfo,rowKey:function(e){return e.id}},on:{change:e.tabChange},scopedSlots:e._u([{key:"action",fn:function(t,i){return n("span",{},[0==i.bind?n("a",{on:{click:function(t){return e.bindDevice(i)}}},[e._v("绑定")]):e._e()])}}])})],1)},a=[],l=(n("a9e3"),[{title:"设备名称",key:"equipment_name",dataIndex:"equipment_name",width:130},{title:"设备编号",dataIndex:"equipment_num",key:"equipment_num",width:130},{title:"设备品牌",dataIndex:"device_brand",key:"device_brand",width:130},{title:"设备类型",dataIndex:"type_txt",key:"type_txt",width:130},{title:"绑定状态",dataIndex:"bind_status",key:"bind_status",width:130},{title:"设备状态",dataIndex:"status_txt",key:"status_txt",width:130},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}]),u={props:{visible:{type:Boolean,default:!1},ruleId:{type:Number,default:0}},watch:{visible:{handler:function(e){e&&(this.pageInfo.rule_id=this.ruleId,this.getRuleEquipmentList())},immediate:!0}},data:function(){return{columns:l,tableLoading:!1,pageInfo:{page:1,limit:10,current:1,pageSize:10,total:0,rule_id:0},tableList:[],selectedRowKeys:[],bindParams:{}}},methods:{getRuleEquipmentList:function(){var e=this;e.tableLoading=!0,e.request("/community/village_api.Pile/getRuleEquipmentList",this.pageInfo).then((function(t){e.pageInfo.total=t.count,e.tableList=t.list,e.tableLoading=!1}))},tabChange:function(e){var t=e.current;this.pageInfo.page=t,this.pageInfo.current=t,this.getRuleEquipmentList()},handleCancel:function(){this.$emit("close")},handleOk:function(){},bindDevice:function(e){var t=this;t.request("/community/village_api.Pile/bind",{rule_id:this.ruleId,id:e.id}).then((function(e){t.getRuleEquipmentList(),t.$message.success("绑定成功！")}))},onSelectChange:function(e){console.log("selectedRowKeys changed: ",e),this.selectedRowKeys=e},batchBind:function(e){}}},o=u,s=n("2877"),d=Object(s["a"])(o,i,a,!1,null,"9adea7c2",null);t["default"]=d.exports}}]);