(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46b3db32"],{"67fd":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[i("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[i("a-form",{attrs:{form:e.form}},[i("a-form-item",{attrs:{label:"选择分组",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[i("a-col",{attrs:{span:18}},[i("a-tree-select",{staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.treeData,placeholder:"请选择分组","tree-default-expand-all":""},scopedSlots:e._u([{key:"title",fn:function(t){var n=t.key,a=t.value;return 1==n?i("span",{staticStyle:{color:"#08c"}},[e._v(" Child Node1 "+e._s(a)+" ")]):e._e()}}],null,!0),model:{value:e.gid,callback:function(t){e.gid=t},expression:"gid"}})],1),i("a-col",{attrs:{span:6}})],1),i("a-form-item",{attrs:{label:"文本标题",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[i("a-col",{attrs:{span:18}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{initialValue:e.detail.title,rules:[{required:!0,message:"请输入文本标题！"}]}],expression:"['title', {initialValue:detail.title,rules: [{required: true, message: '请输入文本标题！'}]}]"}],attrs:{placeholder:"请输入文本标题",maxLength:e.max_len},on:{input:function(t){return e.importText(t)}}})],1),i("a-col",{attrs:{span:6}},[i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.yet_len)+"/"+e._s(e.max_len))])])],1),i("a-form-item",{attrs:{label:"文本内容",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[i("a-col",{attrs:{span:18}},[i("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{initialValue:e.detail.content}],expression:"['content', {initialValue:detail.content}]"}],attrs:{placeholder:"请输入文本内容",maxLength:e.text_len},on:{input:function(t){return e.importTexts(t)}}})],1),i("a-col",{attrs:{span:20}},[i("span"),i("span",{staticStyle:{"margin-left":"80%"}},[e._v(e._s(e.text_yet_len)+"/"+e._s(e.text_len))])])],1)],1)],1)],1)},a=[],s=i("53ca"),l=i("a0e0"),o=i("ca00"),r={data:function(){return{title:"添加文本",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),detail:{id:0,title:"",content:""},treeData:[],id:0,pid:0,gid:"",select_key:"",max_len:50,yet_len:0,surplus_len:50,text_len:1e3,text_yet_len:0,text_surplus_len:0,tokenName:"",sysName:""}},watch:{gid:function(e){console.log("555555555555555555",e),this.gid=e}},mounted:function(){},methods:{add:function(e,t){var i=Object(o["i"])(location.hash);i?(this.tokenName=i+"_access_token",this.sysName=i):this.sysName="village",this.title="添加文本",this.visible=!0,this.id="0",this.detail={id:0,title:"",content:""},this.checkedKeys=[],console.log("gid_add-----",e),e&&(this.gid=e),this.select_key=t,this.getMenuList()},edit:function(e,t,i){var n=Object(o["i"])(location.hash);n?(this.tokenName=n+"_access_token",this.sysName=n):this.sysName="village",console.log("erererererer",e),this.visible=!0,this.id=e,this.getEditInfo(),this.getMenuList(),this.id>0?this.title="编辑文本":this.title="添加文本",t&&(this.gid=t),this.select_key=i,console.log(this.title)},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,i){t?e.confirmLoading=!1:(i.id=e.id,i.gid=e.gid,i.type=1,i.select_key=e.select_key,e.tokenName&&(i["tokenName"]=e.tokenName),e.request(l["a"].subContent,i).then((function(t){e.detail.id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",i)}),1500)})).catch((function(t){e.confirmLoading=!1})),console.log("values",i))}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.id="0",e.form=e.$form.createForm(e)}),500)},getEditInfo:function(){var e=this,t={id:this.id};this.tokenName&&(t["tokenName"]=this.tokenName),this.request(l["a"].getContentInfo,t).then((function(t){console.log(t),e.detail={id:0,title:"",content:""},"object"==Object(s["a"])(t.info)&&(e.detail=t.info,e.gid=t.info.gid,e.yet_len=t.info.title.length,e.surplus_len=e.max_len-e.yet_len,e.text_yet_len=t.info.content.length,e.text_surplus_len=e.text_len-e.text_yet_len)}))},getMenuList:function(){var e=this,t={};this.tokenName&&(t["tokenName"]=this.tokenName),this.request(l["a"].getMenuSelect,t).then((function(t){console.log(t),e.treeData=t.menu_list}))},importText:function(e){this.yet_len=e.target.value.length,this.surplus_len=this.max_len-this.yet_len,this.surplus_len<=0&&this.$message.error("最多可写50个字")},importTexts:function(e){this.text_yet_len=e.target.value.length,this.text_surplus_len=this.text_len-this.text_yet_len,this.surplus_len<=0&&this.$message.error("最多可写1000个字")}}},c=r,u=(i("e5316"),i("0c7c")),d=Object(u["a"])(c,n,a,!1,null,null,null);t["default"]=d.exports},c95f:function(e,t,i){},e5316:function(e,t,i){"use strict";i("c95f")}}]);