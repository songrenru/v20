(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f375c1fa","chunk-74057961","chunk-e01c2c44","chunk-191afb5a","chunk-74057961","chunk-e07f9bf8","chunk-77b37d1c","chunk-1c90fa5c","chunk-0ae8d48a","chunk-e6ef8fde","chunk-ec36d21a","chunk-0c343c66","chunk-0dacd75a","chunk-e37c932c","chunk-a28b3880","chunk-2d0b24fb","chunk-2d0db2a2","chunk-2d0b3786","chunk-7477f697","chunk-7477f697"],{"0732":function(t,e,a){},"0765":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.visible?a("a-modal",{attrs:{title:t.title,width:1150,visible:!0,footer:null,maskClosable:!1},on:{cancel:t.handleCancel}},[a("a-tabs",{attrs:{type:"card"},on:{change:t.callback}},[t.is_receivableOrderList?a("a-tab-pane",{key:"receivableOrderList",attrs:{tab:"应收账单"}}):t._e(),a("a-tab-pane",{key:"payableOrderList",attrs:{tab:"已缴账单"}})],1),a("div",{staticClass:"tab_components"},[t.visible?a(t.currentTab,{key:t.currentTab,tag:"receivableOrderList",attrs:{pigcmsId:t.bind_id,village_id:t.village_id,usernum:t.usernum}}):t._e()],1)],1):t._e()},s=[],n=a("b8f9"),r=a("8de0"),o={name:"paymentList",components:{receivableOrderList:n["default"],payableOrderList:r["default"]},data:function(){return{visible:!1,title:"缴费清单",currentTab:"receivableOrderList",bind_id:0,usernum:"",village_id:0,is_receivableOrderList:!0}},methods:{handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.form=t.$form.createForm(t)}),500)},accountsReceivable:function(t,e,a){this.currentTab="receivableOrderList",void 0!=e&&e&&(this.village_id=e),void 0!=a&&a&&(this.usernum=a),this.bind_id=t,this.visible=!0,console.log("pigcmsId",t),console.log("villageId",e),console.log("usernum",a)},callback:function(t){this.currentTab=t}}},l=o,c=(a("79162"),a("0c7c")),d=Object(c["a"])(l,i,s,!1,null,null,null);e["default"]=d.exports},"141e":function(t,e,a){"use strict";a("e28e")},"15b3":function(t,e,a){"use strict";a("95b5")},"1a83":function(t,e,a){"use strict";var i={passwordEdit:"/community/house_meter.AdminUser/passwordEdit",adminUserList:"/community/house_meter.AdminUser/adminUserList",adminUserAdd:"/community/house_meter.AdminUser/adminUserAdd ",adminUserEdit:"/community/house_meter.AdminUser/adminUserEdit",adminUserInfo:"/community/house_meter.AdminUser/adminUserInfo",adminUserDelete:"/community/house_meter.AdminUser/adminUserDelete",areaList:"/community/house_meter.AdminUser/areaList",villageBindList:"/community/house_meter.Power/villageBindList",meterVillageAdd:"/community/house_meter.Power/meterVillageAdd",meterVillageAddll:"/community/house_meter.Power/meterVillageAddll",meterVillageDelete:"/community/house_meter.Power/meterVillageDelete",getVillageInfo:"/community/house_meter.Power/getVillageInfo",meterElectricList:"/community/house_meter.MeterElectric/meterElectricList",meterElectricInfo:"/community/house_meter.MeterElectric/meterElectricInfo",meterElectricAdd:"/community/house_meter.MeterElectric/meterElectricAdd",meterElectricEdit:"/community/house_meter.MeterElectric/meterElectricEdit",meterElectricDelete:"/community/house_meter.MeterElectric/meterElectricDelete",getMeasureList:"/community/house_meter.MeterElectric/getMeasureList",switch:"/community/house_meter.MeterElectric/switch",meterReading:"/community/house_meter.MeterElectric/now_reading_electric",meterElectricGroupList:"/community/house_meter.MeterElectricGroup/meterElectricGroupList",meterElectricGroupAdd:"/community/house_meter.MeterElectricGroup/meterElectricGroupAdd",meterElectricGroupEdit:"/community/house_meter.MeterElectricGroup/meterElectricGroupEdit",meterElectricGroupInfo:"/community/house_meter.MeterElectricGroup/meterElectricGroupInfo",meterElectricSetInfo:"/community/house_meter.MeterElectric/meterElectricSetInfo",meterElectricSetEdit:"/community/house_meter.MeterElectric/meterElectricSetEdit",MeterReadingList:"/community/house_meter.MeterElectric/getMeterReadingList",getAreaList:"/community/house_meter.MeterElectricPrice/getAreaList",getAreaPriceList:"/community/house_meter.MeterElectricPrice/getAreaPriceList",meterElectricPriceAdd:"/community/house_meter.MeterElectricPrice/meterElectricPriceAdd",meterElectricPriceEdit:"/community/house_meter.MeterElectricPrice/meterElectricPriceEdit",payorderList:"/community/house_meter.MeterUserPayorder/payorderList",payorderPrint:"/community/house_meter.MeterUserPayorder/payorderPrint",getAreasList:"/community/house_meter.MeterElectric/getAreaList",getCommunityList:"/community/house_meter.MeterElectric/getCommunityList",getVillageList:"/community/house_meter.MeterElectric/getVillageList",getSingleList:"/community/house_meter.MeterElectric/getSingleList",getFloorList:"/community/house_meter.MeterElectric/getFloorList",getLayerList:"/community/house_meter.MeterElectric/getLayerList",getVacancyList:"/community/house_meter.MeterElectric/getVacancyList",uploadFile:"/community/house_meter.MeterElectric/uploadFile",getTongjiCount:"/community/house_meter.DataStatistics/getTongjiCount",getEleWarnList:"/community/house_meter.DataStatistics/getEleWarnList",powerConsumptionAnalysis:"/community/house_meter.DataStatistics/powerConsumptionAnalysis",deviceManage:"/community/house_meter.DataStatistics/deviceManage",powerConsumptionFeeAnalysis:"/community/house_meter.DataStatistics/powerConsumptionFeeAnalysis",getTongjiCountByCity:"/community/house_meter.DataStatistics/getTongjiCountByCity"};e["a"]=i},"1d1a":function(t,e,a){"use strict";a("98ac")},"1fa2":function(t,e,a){},2097:function(t,e,a){},2425:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{title:"选择催缴对象",width:600,height:400,visible:t.visible,confirmLoading:t.confirmLoading,maskClosable:!1},on:{cancel:t.handleCancel,ok:t.handleSubmit}},[a("a-spin",{attrs:{spinning:t.confirmLoading,height:800}},[a("a-form",{attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"选择对象",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择"},on:{change:t.handleSelectChange}},[a("a-select-option",{attrs:{value:"1"}},[t._v(" 仅业主 ")]),a("a-select-option",{attrs:{value:"2"}},[t._v(" 业主和家属 ")]),a("a-select-option",{attrs:{value:"3"}},[t._v(" 仅家属 ")])],1)],1)],1)],1)],1)],1)},s=[],n=a("a0e0"),r={name:"sendType",data:function(){return{visible:!1,confirmLoading:!1,labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},form:this.$form.createForm(this),send_type:0,type:1,list:[],is_detail:0}},methods:{select:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;this.visible=!0,this.type=t,this.list=e,this.is_detail=a},handleSelectChange:function(t){this.send_type=t},handleSubmit:function(){var t=this;if(0==this.send_type)return this.$message.warn("请选择需要发送的对象"),!1;this.request(n["a"].sendMessage,{type:this.type,send_type:this.send_type,list:this.list,is_detail:this.is_detail}).then((function(e){t.$message.success("发送成功")})),this.visible=!1},handleCancel:function(){this.visible=!1}}},o=r,l=a("0c7c"),c=Object(l["a"])(o,i,s,!1,null,"0e25554d",null);e["default"]=c.exports},"276d":function(t,e,a){"use strict";a("f164")},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var i=a("6b75");function s(t){if(Array.isArray(t))return Object(i["a"])(t)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var r=a("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return s(t)||n(t)||Object(r["a"])(t)||o()}},"2ef9":function(t,e,a){"use strict";a("9172")},3615:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user_info"},[a("div",[a("a-row",[a("a-col",{attrs:{span:19,push:5}},[a("p",[a("span",{staticClass:"community_name"},[t._v(t._s(t.name))]),t.is_wx?a("span",{staticClass:"is_wx"},[t._v("@微信")]):t._e(),"男"===t.sex?a("span",[a("a-icon",{style:{color:"#3399cc"},attrs:{type:"man"}})],1):"女"===t.sex?a("span",[a("a-icon",{style:{color:"hotpink"},attrs:{type:"woman"}})],1):a("span",[t._v("未知")])]),a("a-row",t._l(t.user_info,(function(e,i){return a("a-col",{key:i,attrs:{span:10,value:e.id}},[a("span",{staticClass:"label_col"},[t._v(t._s(e.name)+":")]),a("span",[t._v(" "+t._s(e.value))])])})),1)],1),a("a-col",{attrs:{span:5,pull:19}},[a("img",{attrs:{src:t.imageUrl}})])],1),a("a-row",{attrs:{type:"flex",justify:"start"}},t._l(t.statistical_data,(function(e,i){return a("a-col",{key:i,staticClass:"statistical_data",attrs:{span:4,value:e.id}},[a("p",{staticClass:"statistical_fir_p"},[t._v(t._s(e.value))]),a("p",{staticClass:"statistical_sec_p"},[t._v(t._s(e.title))])])})),1),a("a-tabs",{attrs:{type:"card"},on:{change:t.callback}},t._l(t.tab_list,(function(t,e){return a("a-tab-pane",{key:e,attrs:{tab:t,value:t.id}})})),1)],1),a("div",{staticClass:"tab_components"},[t.visible?a(t.currentTab,{key:t.currentTab,tag:"paymentRecord",attrs:{usernum:t.usernum,pigcmsId:t.bind_id,name:t.name,villageId:t.village_id,uid:t.uid}}):t._e()],1)])},s=[],n=(a("b0c0"),a("767c")),r=a("a389"),o=a("39cc"),l=a("61d3"),c=a("6a26"),d=a("de8f"),_=a("de3f"),u=a("b8f9"),p=a("a0e0"),m={name:"userInfo",components:{paymentRecord:n["default"],trackInformation:r["default"],ownerInformation:o["default"],workOrder:l["default"],chatRecord:c["default"],decorationOrder:d["default"],expressManagement:_["default"],depositManagement:u["default"]},data:function(){return{visible:!1,imageUrl:"",name:"",sex:"",user_info:[],statistical_data:[],chat_data:[],tab_list:[],bind_id:0,usernum:"",village_id:0,uid:0,is_wx:!1,currentTab:"paymentRecord"}},beforeCreate:function(){var t=this,e={pingcms_id:this.$route.query["pigcms_id"]};this.request(p["a"].getCommunityUserInfo,e).then((function(e){t.title="业主详情",t.imageUrl=e.userInfo.avatar,t.name=e.userInfo.name,t.sex=e.userInfo.sex,t.is_wx=e.userInfo.is_wx,t.user_info=e.userData,t.statistical_data={total_money:e.total_money,order_count:e.order_count,chat_name:e.chat_name},t.tab_list=e.tab_list,t.bind_id=e.userInfo.pigcms_id,t.village_id=e.userInfo.village_id,t.uid=e.userInfo.uid,t.visible=!0}))},mounted:function(){this.usernum=this.$route.query["usernum"],console.log(this.usernum)},methods:{handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.id="0",t.form=t.$form.createForm(t)}),500)},changeLabel:function(){alert("修改标签")},callback:function(t){console.log(this.usernum),this.currentTab=t}}},h=m,f=(a("6cd64"),a("0c7c")),v=Object(f["a"])(h,i,s,!1,null,null,null);e["default"]=v.exports},"397d":function(t,e,a){"use strict";a("a37c")},"39cc":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",{staticClass:"project_info",attrs:{form:t.form}},[a("a-tabs",{attrs:{"default-active-key":"1"}},[a("a-tab-pane",{key:"1",attrs:{tab:"基本信息"}},[a("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"用户编号"}},[a("span",[t._v(t._s(t.bind_number))])]),a("a-form-item",{attrs:{label:"业主名称",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input",{attrs:{id:"user_name"},model:{value:t.post.name,callback:function(e){t.$set(t.post,"name",e)},expression:"post.name"}})],1),a("a-form-item",{attrs:{label:"手机号",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input",{attrs:{id:"phone"},model:{value:t.post.phone,callback:function(e){t.$set(t.post,"phone",e)},expression:"post.phone"}})],1),a("a-form-item",{attrs:{label:"身份证号",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input",{attrs:{id:"id_card"},model:{value:t.post.id_card,callback:function(e){t.$set(t.post,"id_card",e)},expression:"post.id_card"}})],1),a("a-form-item",{attrs:{label:"IC卡号",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input",{attrs:{id:"ic_card"},model:{value:t.post.ic_card,callback:function(e){t.$set(t.post,"ic_card",e)},expression:"post.ic_card"}})],1),a("a-form-item",{attrs:{label:"住址",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("span",[t._v(t._s(t.room_diy_name))])]),a("a-form-item",{attrs:{label:"房子平方",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("span",[t._v(t._s(t.housesize)+" ㎡")])]),a("a-form-item",{attrs:{label:"备注",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input",{attrs:{id:"memo"},model:{value:t.post.memo,callback:function(e){t.$set(t.post,"memo",e)},expression:"post.memo"}})],1),a("a-form-item",{attrs:{label:"房屋类型",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("span",[t._v(t._s(t.house_type_name))])]),a("a-form-item",{attrs:{label:"车位信息",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[0!==t.positionList.length?a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.positionColumns,"data-source":t.positionList,rowKey:"id"}}):a("span",[t._v("无")])],1),a("a-form-item",{attrs:{label:"车辆信息",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[0!==t.carList.length?a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.carColumns,"data-source":t.carList,rowKey:"id"}}):a("span",[t._v("无")])],1)],1),a("a-tab-pane",{key:"2",attrs:{tab:"业主资料","force-render":""}},t._l(t.dataList,(function(e,i){return a("a-form-item",{key:i,attrs:{label:e.title,value:i,labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:1*e.is_must==1}},[1===e.type?a("a-input",{attrs:{id:e.key},model:{value:t.authentication_field[e.key]["value"],callback:function(a){t.$set(t.authentication_field[e.key],"value",a)},expression:"authentication_field[item.key]['value']"}}):2===e.type?a("a-select",{staticStyle:{width:"120px"},attrs:{"show-search":""},model:{value:t.authentication_field[e.key]["value"],callback:function(a){t.$set(t.authentication_field[e.key],"value",a)},expression:"authentication_field[item.key]['value']"}},t._l(e.use_field,(function(e,i){return a("a-select-option",{key:i,attrs:{value:e}},[t._v(t._s(e))])})),1):3===e.type?a("div",[a("a-select",{staticStyle:{width:"120px"},attrs:{"default-value":t.authentication_field[e.key]["province_name"]},on:{change:t.handleChangeProvince}},t._l(t.province_list,(function(e,i){return a("a-select-option",{key:i,attrs:{value:e["id"]}},[t._v(t._s(e["name"]))])})),1),0!==t.city_list.length?a("a-select",{staticStyle:{width:"120px","margin-left":"20px"},on:{change:t.handleChange},model:{value:t.secondCity,callback:function(e){t.secondCity=e},expression:"secondCity"}},t._l(t.city_list,(function(e,i){return a("a-select-option",{key:i,attrs:{value:e["id"]}},[t._v(t._s(e["name"]))])})),1):t._e()],1):4===e.type?a("a-date-picker",{attrs:{name:e.key,"default-value":t.moment(t.getDate(e.key),t.dateFormat)},on:{change:function(a,i){return t.onDateChange(a,i,e.key)}}}):t._e()],1)})),1),a("a-tab-pane",{key:"3",staticClass:"owner_msg",attrs:{tab:"信息标注"}},t._l(t.mark_list,(function(e,i){return a("div",{key:i,staticClass:"label_con"},[a("div",{staticClass:"title"},[t._v(t._s(e.label)+"：")]),1==e.type?a("div",{staticClass:"choose_con",staticStyle:{display:"flex","align-items":"center"}},[a("a-radio-group",{model:{value:t.mark_list[i].data.value,callback:function(e){t.$set(t.mark_list[i].data,"value",e)},expression:"mark_list[index].data.value"}},t._l(e.value,(function(e,i){return a("a-radio",{attrs:{value:e.label}},[t._v(t._s(e.value))])})),1),1==t.mark_list[i].data.value?a("a-select",{staticStyle:{width:"200px","margin-left":"5px"},attrs:{placeholder:"请选择党支部"},on:{change:t.selectOwnerChange},model:{value:t.partyId,callback:function(e){t.partyId=e},expression:"partyId"}},t._l(e.data.street_party_branch,(function(e,i){return a("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.name))])})),1):t._e()],1):t._e(),0==e.type?a("div",{staticClass:"choose_con"},[a("a-checkbox-group",{model:{value:t.mark_list[i].data.value,callback:function(e){t.$set(t.mark_list[i].data,"value",e)},expression:"mark_list[index].data.value"}},t._l(e.value,(function(e,i){return a("a-checkbox",{attrs:{value:e.label+""}},[t._v(t._s(e.value))])})),1)],1):t._e()])})),0),a("a-tab-pane",{key:"4",staticClass:"user_label",attrs:{tab:"用户标签"}},t._l(t.label_list.list,(function(e,i){return a("div",{key:i,staticClass:"label_con"},[a("div",{staticClass:"title"},[t._v(t._s(e.name)+"：")]),a("div",{staticClass:"radio_con"},[a("a-checkbox-group",{on:{change:t.radioUserLabelChange},model:{value:t.label_list.list[i].value,callback:function(e){t.$set(t.label_list.list[i],"value",e)},expression:"label_list.list[index].value"}},t._l(e.children,(function(e,i){return a("a-checkbox",{key:e.id,attrs:{value:1*e.id}},[t._v(t._s(e.name))])})),1)],1)])})),0)],1),a("a-form-item",{staticStyle:{"margin-top":"35px"},attrs:{"wrapper-col":{span:12,offset:12}}},[a("a-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" 保存 ")])],1)],1)],1)},s=[],n=a("2909"),r=(a("a9e3"),a("d81d"),a("99af"),a("b0c0"),a("a0e0")),o=a("c1df"),l=a.n(o),c=[{title:"ID",dataIndex:"id",key:"id"},{title:"车位",dataIndex:"position_num",key:"position_num"},{title:"车牌号",dataIndex:"province",key:"province"},{title:"停车卡号",dataIndex:"car_stop_num",key:"car_stop_num"},{title:"车主姓名",dataIndex:"car_user_name",key:"car_user_name"},{title:"车主手机号",dataIndex:"car_user_phone",key:"car_user_phone"}],d=[],_=[{title:"ID",dataIndex:"bind_id",key:"bind_id"},{title:"车库",dataIndex:"garage_num",key:"garage_num"},{title:"车位编号",dataIndex:"position_num",key:"position_num"},{title:"车位面积",dataIndex:"position_area",key:"position_area"},{title:"备注",dataIndex:"position_note",key:"position_note"}],u=[],p={name:"ownerInformation",data:function(){return{title:"",dateFormat:"YYYY-MM-DD",form:this.$form.createForm(this),labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},bind_number:"",room_diy_name:"",housesize:"",disabled:!0,dataList:"",authentication_field:{key:{value:""}},house_type_name:"",secondCity:"",is_secondCity:!1,user_label_data:{care_object:[{id:0,name:""}]},province_list:[{id:0,name:""}],city_list:[{id:0,name:""}],political_outlook:0,special_population:[],key_population:[],care_object:[],positionList:u,carList:d,positionColumns:_,carColumns:c,result:!1,mark_list:[],label_list:[],partyId:"",post:{name:0,phone:"",id_card:"",ic_card:"",memo:""}}},props:{pigcmsId:{type:Number,default:0},usernum:{type:String,default:""}},created:function(){var t={pigcms_id:this.pigcmsId,usernum:this.usernum};this.getUserInfo(t)},methods:{getDate:function(t){return this.authentication_field[t]["value"]},moment:l.a,handleSubmit:function(){var t=this,e=[];this.label_list.list.map((function(t){e=[].concat(Object(n["a"])(e),Object(n["a"])(t.value))}));var a={};this.mark_list.map((function(t,e){a[t.field]=t.data.value})),1==a.user_political_affiliation?a["user_party_id"]=this.partyId:a["user_party_id"]=0;var i={pigcms_id:this.pigcmsId,post:this.post,authentication_field:this.authentication_field,user_label_arr:e,mark_list_arr:a},s=!1;for(var o in this.authentication_field){var l=this.authentication_field[o];if(console.log("item",l),(1==l.is_must||"1"==l.is_must)&&(!l.value||""==l.value||"0"==l.value||0==l.value)){this.$message.error("【"+l.title+"】为必填项，请填写或选择！"),s=!0;break}}if(s)return!1;this.request(r["a"].editUserInfo,i).then((function(e){console.log(e),t.$notification.open({message:"修改成功",description:"业主信息修改成功."})}))},onDateChange:function(t,e,a){console.log("date",t),console.log("dateSting",e),this.authentication_field[a]["value"]=e},getUserInfo:function(t){var e=this;this.request(r["a"].getUserInfo,t).then((function(t){e.title="业主信息",e.bind_number=t.info.bind_number?t.info.bind_number:e.usernum,e.post={name:t.info.name,phone:t.info.phone,id_card:t.info.id_card,ic_card:t.info.ic_card,memo:t.info.memo},e.room_diy_name=t.info.address,e.housesize=t.info.housesize,e.house_type_name=t.info.house_type_name,e.dataList=t.dataList,e.authentication_field=t.info.authentication_field,e.user_label_data=t.user_label_data,e.positionList=t.position_list,e.carList=t.car_list,e.visible=!0,void 0!==e.authentication_field["native_place"]&&(e.getProvinceCity("province",0),e.getProvinceCity("city",e.authentication_field["native_place"]["province_idss"]),e.secondCity=e.authentication_field["native_place"]["city_name"]),e.mark_list=e.user_label_data.mark_list,e.label_list=e.user_label_data.label_list}))},selectOwnerChange:function(t){console.log("value===>",t)},radioUserLabelChange:function(t){console.log("value===>",t)},handleChangeProvince:function(t){this.is_secondCity=!0,this.authentication_field["native_place"]["province_idss"]=t,this.getProvinceCity("city",t)},getProvinceCity:function(t,e){var a=this,i={type:t,id:e};this.request(r["a"].getProvinceCity,i).then((function(e){"province"===t?a.province_list=e:(a.city_list=e,0!==a.city_list.length&&a.is_secondCity&&(a.secondCity=a.city_list[0]["name"]))}))},getCheckedVlaue:function(t){var e=[];return t.map((function(t){t.is_checked&&e.push(t.id)})),e},handleChange:function(t,e){this.authentication_field["native_place"]["city_idss"]=t}}},m=p,h=(a("1d1a"),a("49d7"),a("0c7c")),f=Object(h["a"])(m,i,s,!1,null,"18908095",null);e["default"]=f.exports},4786:function(t,e,a){},49420:function(t,e){var a={getrem:function(){var t=1/window.devicePixelRatio;document.write('<meta name="viewport" content="width=device-width,initial-scale='+t+",minimum-scale="+t+",maximum-scale="+t+'" />');var e=document.getElementsByTagName("html")[0],a=e.getBoundingClientRect().width;e.style.fontSize=a/10+"px"}};t.exports=a},"49d7":function(t,e,a){"use strict";a("f179")},5089:function(t,e,a){"use strict";a("be12")},"57ac":function(t,e,a){"use strict";a("2097")},"5e0a":function(t,e,a){"use strict";a("b669")},"61d3":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-suggestions-list-box"},[a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination,rowKey:"id",loading:t.loading},on:{change:t.table_change},scopedSlots:t._u([{key:"status_txt",fn:function(e,i){return a("span",{},[a("span",{style:"color:"+i.color},[t._v(t._s(i.status_txt))])])}},{key:"action",fn:function(e,i){return a("span",{},[a("a",{on:{click:function(e){return t.$refs.PopupEditModel.info(i.order_id)}}},[t._v("详情")])])}}])}),a("workOrderInfo",{ref:"PopupEditModel"})],1)},s=[],n=(a("a9e3"),a("ac1f"),a("841c"),a("a0e0")),r=a("6f62"),o=[{title:"序号",dataIndex:"order_id"},{title:"工单详情",dataIndex:"order_content"},{title:"工单类目",dataIndex:"subject_name"},{title:"上报分类",dataIndex:"cate_name"},{title:"上报位置",dataIndex:"address_txt"},{title:"上报人员",dataIndex:"name"},{title:"手机号码",dataIndex:"phone"},{title:"上报时间",dataIndex:"add_time_txt"},{title:"状态  ",dataIndex:"status_txt",scopedSlots:{customRender:"status_txt"}},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"action"}}],l=[],c={name:"workOrder",components:{workOrderInfo:r["default"]},data:function(){return{pagination:{current:1,pageSize:10,total:10},search:{page:1},loading:!1,data:l,columns:o}},props:{pigcmsId:{type:Number,default:0},usernum:{type:String,default:""}},created:function(){this.getList(1)},methods:{getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.loading=!0,1===e&&this.$set(this.pagination,"current",1),this.search["page"]=this.pagination.current,this.search["pigcms_id"]=this.pigcmsId,this.request(n["a"].getWorkOrderList,this.search).then((function(e){console.log(e),t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.data=e.list,t.loading=!1}))},table_change:function(t){var e=this;t.current&&t.current>0&&(e.$set(e.pagination,"current",t.current),e.getList())}}},d=c,_=(a("5e0a"),a("0c7c")),u=Object(_["a"])(d,i,s,!1,null,null,null);e["default"]=u.exports},"6a26":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[!1===t.empty?a("div",{ref:"chatRecord",staticClass:"chatRecord",attrs:{id:"chatRecord"}},[a("a-tabs",{attrs:{type:"card"},on:{change:t.callback}},[a("a-tab-pane",{key:1,attrs:{tab:t.tabTitle}},[1===t.tabKey?a("chatRecordDetail",{ref:"chatRecordDetail",attrs:{chatType:t.type,uid:t.uid}}):t._e()],1),a("a-tab-pane",{key:2,attrs:{tab:t.tabGroupTitle}},[2===t.tabKey?a("chatRecordDetail",{ref:"chatRecordDetail",attrs:{chatType:t.type,uid:t.uid}}):t._e()],1)],1)],1):t._e(),t.empty?a("a-empty",{staticClass:"empty",attrs:{image:t.simpleImage}},[a("span",{attrs:{slot:"description"},slot:"description"},[t._v("暂无数据")])]):t._e()],1)},s=[],n=(a("06f4"),a("fc25")),r=(a("a9e3"),a("b0c0"),a("b8b2")),o={name:"chatRecord",components:{chatRecordDetail:r["default"]},props:{villageId:{type:Number,default:0},uid:{type:Number,default:0},pigcmsId:{type:Number,default:0},name:{type:String,default:""}},data:function(){return{simpleImage:"",tabTitle:"",tabGroupTitle:"",type:"single",tabKey:1,empty:!1}},created:function(){this.simpleImage=n["a"].PRESENTED_IMAGE_SIMPLE,this.tabTitle="与"+this.name+"聊天记录",this.tabGroupTitle="与"+this.name+"所在群聊天记录"},methods:{callback:function(t){this.tabKey=t,this.type=2===t?"group":"single"}}},l=o,c=(a("cb82"),a("0c7c")),d=Object(c["a"])(l,i,s,!1,null,null,null);e["default"]=d.exports},"6cd64":function(t,e,a){"use strict";a("0732")},"6f62":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,width:900,footer:null,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel}},[a("a-descriptions",{attrs:{title:""}},t._l(t.workOrderInfo,(function(e,i){return a("a-descriptions-item",{key:i,attrs:{label:e.title}},["text"===e.type?a("span",[t._v(t._s(e.value))]):"img"===e.type&&e.value?a("img",{attrs:{src:e.value}}):t._e()])})),1)],1)},s=[],n=a("a0e0"),r={components:{},data:function(){return{title:"工单详情",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,workOrderInfo:[],visible:!1}},methods:{info:function(t){var e=this;this.title="工单详情",this.visible=!0;var a={order_id:t};this.request(n["a"].getWorkOrderInfo,a).then((function(t){console.log(t),e.workOrderInfo=t}))},handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.post.id=0,t.form=t.$form.createForm(t)}),500)}}},o=r,l=a("0c7c"),c=Object(l["a"])(o,i,s,!1,null,null,null);e["default"]=c.exports},"6f6f":function(t,e,a){"use strict";a("be8d")},"767c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[!1===t.empty?a("div",{ref:"paymentRecord",staticClass:"payment-record",attrs:{id:"paymentRecord"}},[a("div",{staticClass:"payment-list",on:{click:function(e){return t.$refs.PopupEditModel.accountsReceivable(t.pigcmsId,t.villageId,t.usernum)}}},[t._v("缴费清单")]),a("keep-alive",[a("a-steps",{attrs:{"progress-dot":"",size:"small",current:0,direction:"vertical"}},t._l(t.log_list,(function(e,i){return a("a-step",{key:i,attrs:{status:"finish",title:e.pay_time}},[a("span",{attrs:{slot:"description"},slot:"description"},[t._v(" 支付"+t._s(e.order_name+e.pay_money)+"元 ")])])})),1)],1)],1):t._e(),t.empty?a("a-empty",{staticClass:"empty",attrs:{image:t.simpleImage}},[a("span",{attrs:{slot:"description"},slot:"description"},[t._v("暂无数据")])]):t._e(),t.visible?a("paymentList",{ref:"PopupEditModel",on:{ok:t.addActive}}):t._e()],1)},s=[],n=(a("06f4"),a("fc25")),r=(a("a9e3"),a("99af"),a("a0e0")),o=a("0765"),l=a("8bbf"),c=a.n(l);c.a.use(n["a"]);var d={name:"paymentRecord",props:{villageId:{type:Number,default:0},usernum:{type:String,default:""},pigcmsId:{type:Number,default:0},uid:{type:Number,default:0}},components:{paymentList:o["default"]},data:function(){return{flag:!0,inner:"",search_most:"search_most",log_list:[],simpleImage:"",visible:!0,empty:!1,page:0}},created:function(){this.simpleImage=n["a"].PRESENTED_IMAGE_SIMPLE,this.searchMostLog()},methods:{searchMostLog:function(){var t=this;if("un_search_most"===this.search_most)return!1;this.page++;var e={village_id:this.villageId,uid:this.uid,page:this.page};this.request(r["a"].getLivingPaymentLog,e).then((function(e){0!==e.list.lenght&&(t.log_list=t.log_list.concat(e.list),0===t.log_list.length&&(t.empty=!0),!0===e.next_page&&(t.flag=!0))}))},onScroll:function(t){t.bubbles||(this.inner=this.$refs.paymentRecord,this.inner.clientHeight+this.inner.scrollTop>=this.inner.scrollHeight&&this.flag&&(this.flag=!1,this.height=this.inner.offsetHeight,this.searchMostLog()))},addActive:function(){this.visible=!1}},mounted:function(){this.inner=this.$refs.paymentRecord,this.inner.addEventListener("scroll",this.onScroll,!0)},destroyed:function(){this.inner.removeEventListener("scroll",this.onScroll,!0)}},_=d,u=(a("2ef9"),a("0c7c")),p=Object(u["a"])(_,i,s,!1,null,null,null);e["default"]=p.exports},79162:function(t,e,a){"use strict";a("bd95")},"858e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,width:700,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading,height:800}},[a("a-form",{attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"退款模式",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-col",{attrs:{span:18}},["deposit_new"==t.order_type?a("a-select",{staticStyle:{width:"177px"},attrs:{placeholder:"请选择支付方式","default-value":"0",disabled:t.is_show},on:{change:t.handleChange},model:{value:t.post.refund_type,callback:function(e){t.$set(t.post,"refund_type",e)},expression:"post.refund_type"}},[a("a-select-option",{attrs:{value:0}},[t._v("请选择")]),a("a-select-option",{attrs:{value:2}},[t._v("退还押金抵扣费用")]),a("a-select-option",{attrs:{value:1}},[t._v("原路退款")])],1):a("a-select",{staticStyle:{width:"177px"},attrs:{placeholder:"请选择支付方式","default-value":"0",disabled:t.is_show},on:{change:t.handleChange},model:{value:t.post.refund_type,callback:function(e){t.$set(t.post,"refund_type",e)},expression:"post.refund_type"}},[a("a-select-option",{attrs:{value:0}},[t._v("请选择")]),a("a-select-option",{attrs:{value:2}},[t._v("退款且还原账单")]),a("a-select-option",{attrs:{value:1}},[t._v("仅退款，不还原账单")])],1)],1)],1),a("a-form-item",{attrs:{label:"退款金额",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入退款金额",disabled:t.is_input},model:{value:t.post.refund_money,callback:function(e){t.$set(t.post,"refund_money",e)},expression:"post.refund_money"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"退款原因",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-textarea",{ref:"textareax",staticStyle:{width:"180px"},attrs:{placeholder:"请输入退款原因"},model:{value:t.post.refund_reason,callback:function(e){t.$set(t.post,"refund_reason",e)},expression:"post.refund_reason"}})],1),a("a-col",{attrs:{span:6}})],1)],1)],1),a("div",{staticClass:"refund_type_desc"},["deposit_new"==t.order_type?a("a-descriptions",{attrs:{title:"退款模式说明",column:2,bordered:!0}},[a("a-descriptions-item",{attrs:{span:2,label:"原路退款"}},[t._v("将当前已缴账单的费用进行退款变更账单状态且将对应产生的服务时间进行退回还原；")]),a("a-descriptions-item",{attrs:{span:2,label:"退还押金抵扣费用"}},[t._v("只是将已缴的费用对应进行退款操作并变更账单状态，所收费用不退费，生成押金抵扣券,可用于在缴费时进行抵扣。")])],1):a("a-descriptions",{attrs:{title:"退款模式说明",column:2,bordered:!0}},[a("a-descriptions-item",{attrs:{span:2,label:"退款且还原账单"}},[t._v("将当前已缴账单的费用进行退款变更账单状态且将对应产生的服务时间进行退回还原，自动生成一个相同的未缴账单；")]),a("a-descriptions-item",{attrs:{span:2,label:"仅退款，不还原账单"}},[t._v("只是将已缴的费用对应进行退款并变更账单状态，关联变更信息不做任何还原操作；主要应用于线上支付，例如：价格波动导致差价，退还差价，但是服务不变；")])],1)],1),a("div",{staticClass:"rule_detail",staticStyle:{"margin-top":"10px"}},[a("a-descriptions",{attrs:{title:"基本信息",column:4}},t._l(t.retrunDetail,(function(e,i){return a("a-descriptions-item",{attrs:{span:2,label:e.title}},[t._v(" "+t._s(e.value)+" ")])})),1)],1)],1)},s=[],n=(a("b680"),a("a0e0")),r=(a("1a83"),{components:{},data:function(){return{title:"退款",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,is_show:!1,is_input:!1,form:this.$form.createForm(this),visible:!1,order_id:0,pay_money:0,pay_type_way:0,retrunDetail:[],post:{id:0,refund_money:"",refund_type:0,refund_reason:""},order_type:""}},mounted:function(){},methods:{add:function(t,e,a,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";console.log("order_type====>",s),this.order_type=s,this.$forceUpdate(),this.title="退款",this.visible=!0,this.retrunDetail=i,this.post={order_id:0,id:0,refund_money:e,refund_type:0,refund_reason:""},this.order_id=t,this.pay_money=e,void 0!=a&&(this.pay_type_way=a),this.pay_type_way,this.getRefundType()},handleChange:function(t){this.is_input=!1,2==t&&(this.post.refund_money=this.pay_money,this.is_input=!0)},getRefundType:function(){var t=this;this.request(n["a"].getRefundtype,{order_id:this.order_id}).then((function(e){""==e?t.is_show=!1:(e.refund_money>0&&(t.post.refund_money=t.pay_money-e.refund_money,t.post.refund_money<=0&&(t.post.refund_money=0),t.post.refund_money=t.post.refund_money.toFixed(2)),2==e.refund_type?t.post.refund_type=2:t.post.refund_type=1,t.is_show=!0)}))},handleSubmit:function(){if(this.post.order_id=this.order_id,this.post.refund_type<1)return this.$message.warning("请选择退款模式！"),!1;if(2==this.pay_type_way&&this.post.refund_reason.length<1)return this.$refs.textareax.focus(),this.$message.warning("线下支付的订单，退款时请写上退款原因！"),!1;var t="",e="";1==this.post.refund_type?(e="退款确认（仅退款，不还原账单）",t="只是将已缴的费用对应进行退款并变更账单状态，关联变更信息不做任何还原操作；主要应用于线上支付，例如：价格波动导致差价，退还差价，但是服务不变；"):2==this.post.refund_type&&(e="退款确认（退款且还原账单）",t="将当前已缴账单的费用进行退款变更账单状态且将对应产生的服务时间进行退回还原，自动生成一个相同的未缴账单；");var a=this;this.$confirm({title:e,content:t,onOk:function(){a.request(n["a"].addRefundInfo,a.post).then((function(t){console.log("res",t),a.$message.success("操作成功"),setTimeout((function(){a.form=a.$form.createForm(a),a.visible=!1,a.confirmLoading=!1,a.is_show=!1,a.is_input=!1,a.$emit("ok")}),1500)}))},onCancel:function(){}})},handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.post.id=0,t.form=t.$form.createForm(t)}),500)}}}),o=r,l=(a("6f6f"),a("0c7c")),c=Object(l["a"])(o,i,s,!1,null,null,null);e["default"]=c.exports},"87c5":function(t,e,a){"use strict";a("d9fc0")},"8de0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-suggestions-box-1"},[a("a-collapse",{attrs:{accordion:""}},[a("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[a("p",[t._v("1、查看当前业主的所有的已缴账单明细，并且可以操作退款及打印账单，每笔已缴账单详细记录展示各个信息，并且支持导出。")]),a("div",{staticStyle:{"margin-bottom":"15px"}},[t._v("2、"),a("strong",[t._v("退款且还原账单举例：")]),t._v("某个房间分别缴纳了1月、2月、3月的物业费，物业服务到期时间为2022年3月31号，然后退了2月的那笔物业费，退款模式选择【退款且还原账单】"),a("br"),t._v(" 退款后，物业服务到期时间变更为2022年2月28号，同时会生成一笔应交账单，账单信息与退掉的那笔账单一致，若生成的应交账单不符合当前的缴费情况，可以修改账单金额或作废账单 ")]),a("div",{staticStyle:{"margin-bottom":"15px"}},[t._v(" 3、"),a("strong",[t._v("仅退款，不还原账单举例：")]),t._v("某个房间分别缴纳了1月、2月、3月的物业费，物业服务到期时间为2022年3月31号，然后3月开始物业费价格下调，退款模式选择【仅退款，不还原账单】，退款金额改为对应差价金额"),a("br"),t._v(" 退款后，物业服务服务时间不变，账单依旧显示在已缴账单，状态显示为部分退款 ")]),a("div",{staticStyle:{"margin-bottom":"15px"}},[t._v(" 4、一次性收费规则账单不没有计费开始时间和计费结束时间 ")]),a("div",[t._v(" 5、点击【设置打印模板】按钮=>选择打印模板后；会联动收银台打印模板功能，已缴账单列表点击打印按钮直接打印 ")])])],1),a("div",{staticClass:"search-box"},[a("a-row",{staticClass:"suggestions_row",attrs:{gutter:48}},[t.is_vacancy_show?a("a-col",{staticClass:"suggestions_col",attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("房间：")]),a("a-cascader",{staticClass:"cascader_style margin_left_10",attrs:{options:t.options,"load-data":t.loadDataFunc,placeholder:"请选择房间","change-on-select":""},on:{change:t.setVisionsFunc},model:{value:t.search.vacancy,callback:function(e){t.$set(t.search,"vacancy",e)},expression:"search.vacancy"}})],1):t._e(),a("a-col",{staticClass:"suggestions_col",attrs:{md:8,sm:24}},[a("a-input-group",{attrs:{compact:""}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("车位号：")]),t._v(" "),a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入车位号"},model:{value:t.search.position_num,callback:function(e){t.$set(t.search,"position_num",e)},expression:"search.position_num"}})],1)],1),a("a-col",{staticClass:"suggestions_col",staticStyle:{width:"320px"},attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("所属车库：")]),a("a-select",{staticStyle:{width:"190px"},attrs:{"default-value":"0",placeholder:"请选择车库"},model:{value:t.search.garage_id,callback:function(e){t.$set(t.search,"garage_id",e)},expression:"search.garage_id"}},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 全部 ")]),t._l(t.garage_list,(function(e,i){return a("a-select-option",{key:i,attrs:{value:e.garage_id}},[t._v(" "+t._s(e.garage_num)+" ")])}))],2)],1),a("a-col",{staticClass:"suggestions_col",attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("收费项目：")]),a("a-select",{staticStyle:{width:"170px"},attrs:{"default-value":"0",placeholder:"请选择项目"},model:{value:t.search.project_id,callback:function(e){t.$set(t.search,"project_id",e)},expression:"search.project_id"}},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 全部 ")]),t._l(t.project_list,(function(e,i){return a("a-select-option",{key:i,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1),t.is_vacancy_show?a("a-col",{staticClass:"suggestions_col",attrs:{md:8,sm:24}},[a("a-input-group",{attrs:{compact:""}},[a("a-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择筛选项","default-value":"name"},on:{change:t.keyChange},model:{value:t.search.key_val,callback:function(e){t.$set(t.search,"key_val",e)},expression:"search.key_val"}},[a("a-select-option",{attrs:{value:"name"}},[t._v(" 姓名 ")]),a("a-select-option",{attrs:{value:"phone"}},[t._v(" 电话 ")])],1),a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:t.key_name},model:{value:t.search.value,callback:function(e){t.$set(t.search,"value",e)},expression:"search.value"}})],1)],1):t._e(),a("a-col",{staticClass:"suggestions_col",attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("支付方式：")]),a("a-select",{staticStyle:{width:"177px"},attrs:{placeholder:"请选择支付方式"},model:{value:t.search.pay_type,callback:function(e){t.$set(t.search,"pay_type",e)},expression:"search.pay_type"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("全部")]),t._l(t.pay_type_list,(function(e,i){return a("a-select-option",{key:i,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1),a("a-col",{staticClass:"suggestions_col",attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("开票状态：")]),a("a-select",{staticStyle:{width:"158px"},attrs:{placeholder:"请选择开票状态"},model:{value:t.search.invoice_type,callback:function(e){t.$set(t.search,"invoice_type",e)},expression:"search.invoice_type"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[t._v("已开票")]),a("a-select-option",{attrs:{value:"2"}},[t._v("未开票")])],1)],1),a("a-col",{staticClass:"suggestions_col",attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("账单状态：")]),a("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择账单状态"},model:{value:t.search.order_type,callback:function(e){t.$set(t.search,"order_type",e)},expression:"search.order_type"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("全部")]),a("a-select-option",{attrs:{value:"2"}},[t._v("部分退款")]),a("a-select-option",{attrs:{value:"1"}},[t._v("正常")]),a("a-select-option",{attrs:{value:"3"}},[t._v("审核中")])],1)],1),a("a-col",{staticClass:"suggestions_col",staticStyle:{width:"420px"},attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("支付时间筛选：")]),a("a-range-picker",{staticStyle:{width:"270px"},attrs:{allowClear:!0},on:{change:t.dateOnChange},model:{value:t.search.data,callback:function(e){t.$set(t.search,"data",e)},expression:"search.data"}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1),a("a-col",{staticClass:"suggestions_col",staticStyle:{width:"530px","padding-left":"20px"},attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("计费时间筛选：")]),a("span",[a("a-date-picker",{attrs:{"disabled-date":t.disabledServiceStartDate,format:"YYYY-MM-DD",placeholder:"计费开始时间"},on:{change:t.serviceStartTimeChange,openChange:t.handleServiceStartOpenChange}}),t._v(" ~ "),a("a-date-picker",{attrs:{"disabled-date":t.disabledServiceEndDate,format:"YYYY-MM-DD",placeholder:"计费结束时间",open:t.endServiceOpen},on:{change:t.serviceEndTimeChange,openChange:t.handleServiceEndOpenChange}})],1)]),a("a-col",{staticClass:"suggestions_col_btn",attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.searchList()}}},[t._v(" 查询 ")])],1),1==t.role_export?a("a-col",{staticClass:"suggestions_col_btn",attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.printList()}}},[t._v("Excel导出")])],1):t._e(),a("a-col",{staticClass:"suggestions_col_btn",staticStyle:{width:"190px"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.checkSetParint(2,0,0,t.choice_ids)}}},[t._v("同一缴费人批量打印")])],1),a("a-col",{staticClass:"suggestions_col_btn",attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.PrintModel.add(0,0,2)}}},[t._v("设置打印模板")])],1)],1)],1),a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columns,"data-source":t.data,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},pagination:t.pagination,loading:t.loading},on:{change:t.table_change},scopedSlots:t._u([{key:"action",fn:function(e,i){return a("span",{},[a("a",{on:{click:function(e){return t.$refs.OrderModel.add(i.order_id,i.check_apply_id)}}},[t._v("详情")]),a("a-divider",{attrs:{type:"vertical"}}),1!=t.role_refund||i.my_check_status&&0!=i.my_check_status?t._e():a("a",{on:{click:function(e){return t.$refs.RefundModel.add(i.order_id,i.pay_money,i.pay_type_way,[{title:"房间号/车位号",value:i.numbers},{title:"缴费人",value:i.pay_bind_name},{title:"电话",value:i.pay_bind_phone},{title:"收费项目名称",value:i.project_name}],i.order_type)}}},[t._v("退款")]),3==i.my_check_status?a("a",{staticStyle:{color:"#808080"}},[t._v("已审核")]):t._e(),2==i.my_check_status?a("a",{on:{click:function(e){return t.$refs.checkRefundModel.add(i.order_id,i.order_apply_info,"order_refund")}}},[t._v("需审核")]):t._e(),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{disabled:i.is_button},on:{click:function(e){return t.checkSetParint(1,i.order_id,i.pigcms_id)}}},[t._v("打印")])],1)}}])}),a("payable-order-info",{ref:"OrderModel"}),a("add-refund-info",{ref:"RefundModel",on:{ok:t.bindOk}}),a("check-refund-info",{ref:"checkRefundModel",on:{ok:t.bindOk}}),a("get-print-template",{ref:"PrintModel",on:{ok:t.printBut}}),a("print-order",{ref:"PrintOrderModel"}),t.visible?a("a-modal",{attrs:{title:t.modalTitle,width:600,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{ok:t.excelExport,cancel:t.handleCancel}},[a("label",{staticStyle:{"margin-right":"10px"}},[t._v("导出模式：")]),a("a-radio-group",{model:{value:t.exportPattern,callback:function(e){t.exportPattern=e},expression:"exportPattern"}},[a("a-radio",{attrs:{value:1}},[t._v("多行显示模式")]),a("a-radio",{attrs:{value:2}},[t._v("合并显示模式")])],1)],1):t._e()],1)},s=[],n=a("2909"),r=a("1da1"),o=(a("7d24"),a("dfae")),l=(a("96cf"),a("a9e3"),a("ac1f"),a("841c"),a("d81d"),a("b0c0"),a("d3b7"),a("7db0"),a("a0e0")),c=a("bf3f"),d=a("858e"),_=a("ce95"),u=a("a635"),p=a("f7e3"),m=[{title:"房间号/车位号",dataIndex:"numbers",key:"numbers"},{title:"缴费人",dataIndex:"pay_bind_name",key:"pay_bind_name"},{title:"电话",dataIndex:"pay_bind_phone",key:"pay_bind_phone"},{title:"收费项目名称",dataIndex:"project_name",key:"project_name"},{title:"实际缴费金额",dataIndex:"pay_money",key:"pay_money"},{title:"支付方式",dataIndex:"pay_type",key:"pay_type"},{title:"支付时间",dataIndex:"pay_time",key:"pay_time"},{title:"开票状态",dataIndex:"record_status",key:"record_status"},{title:"账单状态",dataIndex:"order_status",key:"order_status"},{title:"计费开始时间",dataIndex:"service_start_time",key:"service_start_time"},{title:"计费结束时间",dataIndex:"service_end_time",key:"service_end_time"},{title:"账单生成时间",dataIndex:"add_time",key:"add_time"},{title:"审核状态",dataIndex:"check_status_str",key:"check_status_str"},{title:"操作",key:"action",width:"170px",dataIndex:"",scopedSlots:{customRender:"action"}}],h=[],f={name:"PayableOrderList",filters:{},props:{pigcmsId:{type:Number,default:0},village_id:{type:Number,default:0},usernum:{type:String,default:""}},components:{GetPrintTemplate:_["default"],AddRefundInfo:d["default"],PayableOrderInfo:c["default"],PrintOrder:p["default"],checkRefundInfo:u["default"],"a-collapse":o["a"],"a-collapse-panel":o["a"].Panel},data:function(){var t=this;return{reply_content:"",pagination:{current:1,pageSize:10,total:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(t){return"共 ".concat(t," 条")},onShowSizeChange:function(e,a){return t.onTableChange(e,a)},onChange:function(e,a){return t.onTableChange(e,a)}},search:{keyword:"",key_val:"name",key_val1:"paytime",garage_id:"0",pay_type:"0",project_id:"0",page:1,pigcms_id:0,service_start_time:"",service_end_time:""},form:this.$form.createForm(this),visible:!1,loading:!1,key_name:"请输入姓名",data:h,columns:m,options:[],garage_list:[],project_list:[],pay_type_list:[],search_data:{},page:1,selectedRowKeys:[],choice_ids:[],confirmLoading:!1,exportPattern:2,modalTitle:"Excel导出",is_vacancy_show:!0,is_namephone_show:!0,role_export:0,role_refund:0,endServiceOpen:!1}},activated:function(){},mounted:function(){console.log("pigcmsId======>",this.pigcmsId),console.log("village_id======>",this.village_id),console.log("usernum======>",this.usernum),this.pigcmsId>0?(this.search.pigcms_id=this.pigcmsId,this.is_vacancy_show=!1,this.is_namephone_show=!1):(this.is_vacancy_show=!0,this.is_namephone_show=!0,this.search.pigcms_id=0),this.getList(),this.getSingleListByVillage(),this.getProjectList(),this.getGarageList(),this.payTypeList()},methods:{getList:function(){var t=this;this.loading=!0,this.search["page"]=this.page,this.search["limit"]=this.pagination.pageSize,this.request(l["a"].payableOrderList,this.search).then((function(e){t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.data=e.list,void 0!=e.role_refund?(t.role_export=e.role_export,t.role_refund=e.role_refund):(t.role_export=1,t.role_refund=1),console.log("list",e.list),t.loading=!1}))},keyChange:function(t){"name"==t&&(this.key_name="请输入姓名"),"phone"==t&&(this.key_name="请输入电话")},bindOk:function(){this.getList()},getProjectList:function(){var t=this;this.request(l["a"].ChargeProjectList).then((function(e){t.project_list=e.list})).catch((function(e){t.loading=!1}))},getGarageList:function(){var t=this;this.request(l["a"].garageList).then((function(e){console.log("garage_list",e),t.garage_list=e})).catch((function(e){t.loading=!1}))},payTypeList:function(){var t=this;this.request(l["a"].payTypeList).then((function(e){console.log("pay_type_list",e),t.pay_type_list=e})).catch((function(e){t.loading=!1}))},getSingleListByVillage:function(){var t=this;this.request(l["a"].getSingleListByVillage).then((function(e){if(console.log("+++++++Single",e),e){var a=[];e.map((function(t){a.push({label:t.name,value:t.id,isLeaf:!1})})),t.options=a}}))},getFloorList:function(t){var e=this;return new Promise((function(a){e.request(l["a"].getFloorList,{pid:t}).then((function(t){console.log("+++++++Single",t),console.log("resolve",a),a(t)}))}))},getLayerList:function(t){var e=this;return new Promise((function(a){e.request(l["a"].getLayerList,{pid:t}).then((function(t){console.log("+++++++Single",t),t&&a(t)}))}))},getVacancyList:function(t){var e=this;return new Promise((function(a){e.request(l["a"].getVacancyList,{pid:t}).then((function(t){console.log("+++++++Single",t),t&&a(t)}))}))},loadDataFunc:function(t){return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t[t.length-1],a.loading=!0,setTimeout((function(){a.loading=!1}),100);case 3:case"end":return e.stop()}}),e)})))()},setVisionsFunc:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,s,r,o,l,c,d,_,u,p,m,h;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1!==t.length){a.next=12;break}return i=Object(n["a"])(e.options),a.next=4,e.getFloorList(t[0]);case 4:s=a.sent,console.log("res",s),r=[],s.map((function(t){return r.push({label:t.name,value:t.id,isLeaf:!1}),i["children"]=r,!0})),i.find((function(e){return e.value===t[0]}))["children"]=r,e.options=i,a.next=36;break;case 12:if(2!==t.length){a.next=24;break}return a.next=15,e.getLayerList(t[1]);case 15:o=a.sent,l=Object(n["a"])(e.options),c=[],o.map((function(t){return c.push({label:t.name,value:t.id,isLeaf:!1}),!0})),d=l.find((function(e){return e.value===t[0]})),d.children.find((function(e){return e.value===t[1]}))["children"]=c,e.options=l,a.next=36;break;case 24:if(3!==t.length){a.next=36;break}return a.next=27,e.getVacancyList(t[2]);case 27:_=a.sent,u=Object(n["a"])(e.options),p=[],_.map((function(t){return p.push({label:t.name,value:t.id,isLeaf:!0}),!0})),m=u.find((function(e){return e.value===t[0]})),h=m.children.find((function(e){return e.value===t[1]})),h.children.find((function(e){return e.value===t[2]}))["children"]=p,e.options=u,console.log("_this.options",e.options);case 36:case"end":return a.stop()}}),a)})))()},dateOnChange:function(t,e){this.search.date=e,console.log("search1111",this.search)},onTableChange:function(t,e){this.page=t,this.pagination.current=t,this.pagination.pageSize=e,this.getList(),console.log("onTableChange==>",t,e)},table_change:function(t){console.log("table_change",t),t.current&&t.current>0&&(this.pagination.current=t.current,this.page=t.current,this.getList(),this.selectedRowKeys=[],this.choice_ids=[])},searchList:function(){console.log("search",this.search),this.page=1;var t={current:1,pageSize:10,total:10};console.log("searchList"),this.table_change(t)},printList:function(){this.visible=!0},printBut:function(){this.table_change({current:1,pageSize:10,total:10})},onSelectChange:function(t,e){if(console.log("selectedRowKeys changed: ",t,e),e){for(var a=[],i=0;i<e.length;i++)a.push({orderid:e[i]["order_id"],pigcms_id:e[i]["pigcms_id"],room_id:e[i]["room_id"]});this.choice_ids=a,console.log("choice_ids: ",this.choice_ids),this.selectedRowKeys=t}},handleCancel:function(){this.visible=!1,this.exportType=1},excelExport:function(){var t=this;this.loading=!0,this.search["exportPattern"]=this.exportPattern,console.log(this.search),this.request(l["a"].printPayOrderList,this.search).then((function(e){console.log("list",e.list),window.location.href=e.url,t.loading=!1,t.handleCancel()})).catch((function(e){t.loading=!1,t.handleCancel()}))},disabledServiceStartDate:function(t){var e=this.search.service_end_time;return!(!t||!e)&&t.valueOf()>e.valueOf()},serviceStartTimeChange:function(t,e){console.log("serviceStartTime",e),this.search.service_start_time=e},disabledServiceEndDate:function(t){var e=this.search.service_start_time;return!(!t||!e)&&e.valueOf()>=t.valueOf()},serviceEndTimeChange:function(t,e){console.log("serviceEndTime",e),this.search.service_end_time=e},handleServiceStartOpenChange:function(t){t||(this.endServiceOpen=!0)},handleServiceEndOpenChange:function(t){this.endServiceOpen=t},arrUnique:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pigcms_id",a=[],i=0,s=t.length;i<s;i++)-1===a.indexOf(t[i][e])&&a.push(t[i][e]);return a},checkSetParint:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=this;if(2==t){if(s.length<1)return n.$message.error("请勾选账单"),!1;if(this.arrUnique(s,"pigcms_id").length>1)return n.$message.error("当前仅支持同一个缴费人进行批量打印已缴账单"),!1;if(this.arrUnique(s,"room_id").length>1)return n.$message.error("当前仅支持同一个房间进行批量打印已缴账单"),!1;if(s.length>8)return n.$message.error("最多可选择8个账单打印，您当前选中"+s.length+"个"),!1}this.request(l["a"].checkSetPrint).then((function(n){n.template_id&&n.template_id>0?e.$refs.PrintOrderModel.add(a,n.template_id,i,s):1==t?e.$refs.PrintModel.add(a,i):e.$refs.PrintModel.batchPrint(s)}))}}},v=f,g=(a("141e"),a("0c7c")),y=Object(g["a"])(v,i,s,!1,null,"1fe0c4aa",null);e["default"]=y.exports},9172:function(t,e,a){},"95b5":function(t,e,a){},"98ac":function(t,e,a){},a37c:function(t,e,a){},a389:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[!1===t.empty?a("div",{ref:"trackInformation",staticClass:"track-information",attrs:{id:"trackInformation"}},[a("keep-alive",[a("a-steps",{attrs:{"progress-dot":"",size:"small",current:0,direction:"vertical"}},t._l(t.log_list,(function(e,i){return a("a-step",{key:i,attrs:{status:"finish",title:e.create_day+" "+e.create_time}},[a("span",{attrs:{slot:"description"},slot:"description"},[t._v(" "+t._s(e.content)+" ")])])})),1)],1)],1):t._e(),t.empty?a("a-empty",{staticClass:"empty",attrs:{image:t.simpleImage}},[a("span",{attrs:{slot:"description"},slot:"description"},[t._v("暂无数据")])]):t._e()],1)},s=[],n=(a("06f4"),a("fc25")),r=(a("a9e3"),a("99af"),a("a0e0")),o=a("8bbf"),l=a.n(o);l.a.use(n["a"]);var c={name:"trackInformation",props:{villageId:{type:Number,default:0},uid:{type:Number,default:0},pigcmsId:{type:Number,default:0}},data:function(){return{visible:!1,confirmLoading:!1,flag:!0,inner:"",search_most:"search_most",log_list:[],simpleImage:"",empty:!1,page:0}},created:function(){this.simpleImage=n["a"].PRESENTED_IMAGE_SIMPLE,this.searchMostLog()},methods:{searchMostLog:function(){var t=this;if("un_search_most"===this.search_most)return!1;this.page++;var e={village_id:this.villageId,pigcms_id:this.pigcmsId,uid:this.uid,page:this.page};this.request(r["a"].getActionTrail,e).then((function(e){0!==e.list.lenght&&(t.log_list=t.log_list.concat(e.list),0===t.log_list.length&&(t.empty=!0),!0===e.next_page&&(t.flag=!0))}))},onScroll:function(t){t.bubbles||(this.inner=this.$refs.trackInformation,this.inner.clientHeight+this.inner.scrollTop>=this.inner.scrollHeight&&this.flag&&(this.flag=!1,this.searchMostLog()))}},mounted:function(){this.inner=this.$refs.trackInformation,this.inner.addEventListener("scroll",this.onScroll,!0)},destroyed:function(){this.inner.removeEventListener("scroll",this.onScroll,!0)}},d=c,_=(a("276d"),a("0c7c")),u=Object(_["a"])(d,i,s,!1,null,null,null);e["default"]=u.exports},a609:function(t,e,a){"use strict";a("e0d6")},a635:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,width:700,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading,height:800}},[a("a-form",{attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"审核状态",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-col",{attrs:{span:20}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":1},model:{value:t.post.status,callback:function(e){t.$set(t.post,"status",e)},expression:"post.status"}},[a("a-radio",{attrs:{value:1,name:"status"}},[t._v(" 审核通过 ")]),a("a-radio",{attrs:{value:2,name:"status"}},[t._v(" 审核不通过 ")])],1)],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"审核说明",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-col",{attrs:{span:20}},[a("a-textarea",{ref:"textareax",staticStyle:{width:"250px",height:"120px"},attrs:{placeholder:"请输入审核说明"},model:{value:t.post.bak,callback:function(e){t.$set(t.post,"bak",e)},expression:"post.bak"}})],1),a("a-col",{attrs:{span:6}})],1)],1)],1),a("div",{staticClass:"rule_detail",staticStyle:{"margin-top":"10px"}},[a("a-descriptions",{attrs:{title:t.apply_title,column:4}},t._l(t.retrunDetail,(function(e,i){return a("a-descriptions-item",{attrs:{span:2,label:e.title}},[t._v(" "+t._s(e.value)+" ")])})),1)],1)],1)},s=[],n=a("a0e0"),r={components:{},data:function(){return{title:"退款审核",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,order_id:0,apply_title:"申请退款信息",retrunDetail:[],post:{order_id:0,xtype:"order_refund",bak:"",status:1}}},mounted:function(){},methods:{add:function(t,e,a){this.title="退款审核",this.visible=!0,this.post={order_id:t,xtype:a,bak:"",status:1},"order_discard"==a&&(this.title="作废审核",this.apply_title="申请作废信息"),this.order_id=t;var i=[];if(e&&"order_refund"==a){i.push({title:"申请时间",value:e.opt_time_str});var s="";1==e.refund_type?s="仅退款，不还原账单":2==e.refund_type&&(s="退款且还原账单"),i.push({title:"退款模式",value:s}),i.push({title:"申请退款金额",value:e.refund_money+"元"}),i.push({title:"退款原因",value:e.refund_reason})}else e&&"order_discard"==a&&(i.push({title:"申请时间",value:e.opt_time_str}),i.push({title:"作废账单金额",value:e.total_money+"元"}),i.push({title:"作废原因",value:e.discard_reason}));this.retrunDetail=i},handleSubmit:function(){this.post.order_id=this.order_id;var t="您确认审核 通过 退款申请吗？";2==this.post.status&&(t="您确认审核 不通过 退款申请吗？");var e="退款审核确认";"order_discard"==this.post.xtype&&(e="作废审核确认",t="您确认审核 通过 作废申请吗？",2==this.post.status&&(t="您确认审核 不通过 作废申请吗？"));var a=this;this.$confirm({title:e,content:t,onOk:function(){a.request(n["a"].verifyCheckauthApply,a.post).then((function(t){console.log("res",t),a.$message.success("操作成功"),setTimeout((function(){a.form=a.$form.createForm(a),a.visible=!1,a.confirmLoading=!1,a.$emit("ok")}),1500)}))},onCancel:function(){}})},handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.form=t.$form.createForm(t)}),500)}}},o=r,l=(a("87c5"),a("0c7c")),c=Object(l["a"])(o,i,s,!1,null,null,null);e["default"]=c.exports},aa035:function(t,e,a){},b669:function(t,e,a){},b8f9:function(t,e,a){"use strict";a.r(e);var i,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-suggestions-list-box"},[a("a-collapse",{attrs:{accordion:""}},[a("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[a("p",[t._v(" 在应收账单模块按照收费对象进行统计展示，并且能够查看每笔欠费的详情。物业可通过车位、收费项目等进行筛选查找。"),a("br"),t._v(" 1、在应收明细模块支持对待缴账单，多个账单批量催缴、单个账单催缴。"),a("br"),t._v(" 2、在应收明细模块展示待缴账单详情。"),a("br"),t._v(" 3、手动生成的预缴账单30分钟不缴费自动删除"),a("br"),t._v(" 4、应收明细的筛选时间是从起始时间的0点0分到结束时间的23点59分59秒"),a("br")])])],1),a("a-tabs",{attrs:{"default-active-key":"2"}},[t.is_vacancy_show?a("a-tab-pane",{key:"1"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"账单"}}),t._v(" 账单信息 ")],1),a("div",{staticClass:"message-suggestions-list-box"},[a("div",{staticClass:"search-box"},[a("a-row",{staticClass:"a_row_dill",attrs:{gutter:48}},[t.is_vacancy_show?a("a-col",{staticClass:"a_col_dill",attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("房间：")]),a("a-cascader",{staticClass:"cascader_style margin_left_10",attrs:{options:t.options,"load-data":t.loadDataFunc,placeholder:"请选择房间","change-on-select":""},on:{change:t.setVisionsFunc},model:{value:t.search.room_id,callback:function(e){t.$set(t.search,"room_id",e)},expression:"search.room_id"}})],1):t._e(),a("a-col",{staticClass:"a_col_dill",attrs:{md:8,sm:24}},[a("a-input-group",{attrs:{compact:""}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("车位号：")]),t._v(" "),a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入车位号"},model:{value:t.search.position_num,callback:function(e){t.$set(t.search,"position_num",e)},expression:"search.position_num"}})],1)],1),a("a-col",{staticClass:"a_col_dill",attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("所属车库：")]),a("a-select",{staticStyle:{width:"200px"},attrs:{"default-value":"0",placeholder:"请选择车库"},model:{value:t.search.garage_id,callback:function(e){t.$set(t.search,"garage_id",e)},expression:"search.garage_id"}},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 全部 ")]),t._l(t.garage_list,(function(e,i){return a("a-select-option",{key:i,attrs:{value:e.garage_id}},[t._v(" "+t._s(e.garage_num)+" ")])}))],2)],1),a("a-col",{staticClass:"a_col_dill",attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("收费项目：")]),a("a-select",{staticStyle:{width:"200px"},attrs:{"default-value":"0",placeholder:"请选择项目"},model:{value:t.search.project_id,callback:function(e){t.$set(t.search,"project_id",e)},expression:"search.project_id"}},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 全部 ")]),t._l(t.project_list,(function(e,i){return a("a-select-option",{key:i,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1),t.is_namephone_show?a("a-col",{staticClass:"a_col_dill",attrs:{md:8,sm:24}},[a("a-input-group",{attrs:{compact:""}},[a("a-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择筛选项","default-value":"name"},model:{value:t.search.key_val,callback:function(e){t.$set(t.search,"key_val",e)},expression:"search.key_val"}},[a("a-select-option",{attrs:{value:"name"}},[t._v(" 姓名 ")]),a("a-select-option",{attrs:{value:"phone"}},[t._v(" 电话 ")])],1),a("a-input",{staticStyle:{width:"150px"},model:{value:t.search.value,callback:function(e){t.$set(t.search,"value",e)},expression:"search.value"}})],1)],1):t._e(),a("br"),a("br"),a("br"),a("a-col",{staticClass:"a_col_btn",attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.searchList()}}},[t._v(" 查询 ")])],1),1==t.role_export?a("a-col",{staticClass:"a_col_btn",attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.printList()}}},[t._v("Excel导出")])],1):t._e(),1==t.role_callpay?a("a-col",{staticClass:"a_col_btn",attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.send_message(3)}}},[t._v("全部催缴")])],1):t._e(),1==t.role_callpay?a("a-col",{staticClass:"a_col_btn",attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.send_message(2)}}},[t._v("批量催缴")])],1):t._e()],1)],1),a("br"),a("span",{staticStyle:{"margin-left":"20px"}},[t._v("应收总费用："+t._s(t.total_money))]),t.refrathTable?a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columns,"data-source":t.data,"row-selection":t.rowSelection,pagination:t.pagination,loading:t.loading},on:{change:t.table_change},scopedSlots:t._u([{key:"action",fn:function(e,i){return a("span",{},[a("a",{on:{click:function(e){return t.$refs.OrderModel.info(i.room_id,i.position_id,i)}}},[t._v("应收明细")]),1==t.role_callpay?a("a-divider",{attrs:{type:"vertical"}}):t._e(),1==t.role_callpay?a("a",{on:{click:function(e){return t.send_message(1,i)}}},[t._v("一键催缴")]):t._e()],1)}}],null,!1,240572673)}):t._e()],1)]):t._e(),a("a-tab-pane",{key:"2"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"明细"}}),t._v(" 应收明细 ")],1),a("div",{staticClass:"message-suggestions-list-box"},[a("div",{staticClass:"search-box"},[a("a-row",{staticStyle:{display:"flex","flex-wrap":"wrap"},attrs:{gutter:48}},[t.is_vacancy_show?a("a-col",{staticStyle:{width:"310px",display:"flex","margin-top":"15px"},attrs:{md:8,sm:20}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("房间：")]),a("a-cascader",{staticClass:"cascader_style margin_left_10",attrs:{options:t.options,"load-data":t.loadDataFunc,placeholder:"请选择房间","change-on-select":""},on:{change:t.setVisionsFunc},model:{value:t.search__detail.room_id,callback:function(e){t.$set(t.search__detail,"room_id",e)},expression:"search__detail.room_id"}})],1):t._e(),a("a-col",{staticStyle:{width:"240px",display:"flex","margin-top":"15px"},attrs:{md:6,sm:20}},[a("a-input-group",{attrs:{compact:""}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("车位号：")]),t._v(" "),a("a-input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入车位号"},model:{value:t.search__detail.position_num,callback:function(e){t.$set(t.search__detail,"position_num",e)},expression:"search__detail.position_num"}})],1)],1),a("a-col",{staticStyle:{width:"240px",display:"flex","margin-top":"15px"},attrs:{md:6,sm:20}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("所属车库：")]),a("a-select",{staticStyle:{width:"117px"},attrs:{"default-value":"0",placeholder:"请选择车库"},model:{value:t.search__detail.garage_id,callback:function(e){t.$set(t.search__detail,"garage_id",e)},expression:"search__detail.garage_id"}},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 全部 ")]),t._l(t.garage_list,(function(e,i){return a("a-select-option",{key:i,attrs:{value:e.garage_id}},[t._v(" "+t._s(e.garage_num)+" ")])}))],2)],1),a("a-col",{staticStyle:{width:"240px",display:"flex","margin-top":"15px"},attrs:{md:6,sm:20}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("收费项目：")]),a("a-select",{staticStyle:{width:"117px"},attrs:{"default-value":"0",placeholder:"请选择项目"},model:{value:t.search__detail.project_id,callback:function(e){t.$set(t.search__detail,"project_id",e)},expression:"search__detail.project_id"}},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 全部 ")]),t._l(t.project_list,(function(e,i){return a("a-select-option",{key:i,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1),t.is_namephone_show?a("a-col",{staticStyle:{width:"240px",display:"flex","margin-top":"15px"},attrs:{md:6,sm:20}},[a("a-input-group",{staticStyle:{display:"flex"},attrs:{compact:""}},[a("a-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择筛选项","default-value":"name"},model:{value:t.search__detail.key_val,callback:function(e){t.$set(t.search__detail,"key_val",e)},expression:"search__detail.key_val"}},[a("a-select-option",{attrs:{value:"name"}},[t._v(" 姓名 ")]),a("a-select-option",{attrs:{value:"phone"}},[t._v(" 电话 ")])],1),a("a-input",{staticStyle:{width:"150px"},model:{value:t.search__detail.value,callback:function(e){t.$set(t.search__detail,"value",e)},expression:"search__detail.value"}})],1)],1):t._e(),a("a-col",{staticStyle:{width:"275px","margin-top":"15px"},attrs:{md:5,sm:20}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("账单状态：")]),a("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择账单状态"},model:{value:t.search__detail.order_type,callback:function(e){t.$set(t.search__detail,"order_type",e)},expression:"search__detail.order_type"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[t._v("审核中")])],1)],1),a("a-col",{staticStyle:{width:"420px",display:"flex","margin-top":"15px"},attrs:{md:8,sm:20}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("账单生成时间筛选：")]),a("a-range-picker",{staticStyle:{width:"220px"},attrs:{allowClear:!0},on:{change:t.dateOnChange}})],1),a("a-col",{staticStyle:{width:"530px","padding-left":"20px","margin-top":"15px"},attrs:{md:8,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[t._v("计费时间筛选：")]),a("span",[a("a-date-picker",{attrs:{"disabled-date":t.disabledServiceStartDate,format:"YYYY-MM-DD",placeholder:"计费开始时间"},on:{change:t.serviceStartTimeChange,openChange:t.handleServiceStartOpenChange}}),t._v(" ~ "),a("a-date-picker",{attrs:{"disabled-date":t.disabledServiceEndDate,format:"YYYY-MM-DD",placeholder:"计费结束时间",open:t.endServiceOpen},on:{change:t.serviceEndTimeChange,openChange:t.handleServiceEndOpenChange}})],1)]),a("a-col",{staticStyle:{width:"90px","margin-top":"15px","padding-left":"1px"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.searchList_detail()}}},[t._v(" 查询 ")])],1),a("a-col",{staticStyle:{"margin-top":"15px"},attrs:{md:2,sm:24}},[1==t.role_export?a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.printListDetail()}}},[t._v("Excel导出")]):t._e()],1),a("a-col",{staticStyle:{"margin-top":"15px"},attrs:{md:2,sm:24}},[1==t.role_callpay?a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.send_message(3,[],1)}}},[t._v("全部催缴")]):t._e()],1),a("a-col",{staticStyle:{"margin-top":"15px"},attrs:{md:2,sm:24}},[1==t.role_callpay?a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.send_message(2,[],1)}}},[t._v("批量催缴")]):t._e()],1),a("div",{staticStyle:{"margin-left":"25px"}},[a("a-col",{staticStyle:{"margin-top":"15px",width:"170px","padding-left":"5px"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.checkSetNopayPrint(2,0,0,t.choice_nopay_ids)}}},[t._v("同一房间/车位打印")])],1),a("a-col",{staticStyle:{"margin-top":"15px","padding-left":"5px",width:"160px"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.PrintModel.add(0,0,2,1)}}},[t._v("设置待缴打印模板")])],1),a("a-col",{staticStyle:{"margin-top":"15px","padding-left":"5px"},attrs:{md:2,sm:24}},[1==t.role_discard?a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.many_discard_order()}}},[t._v("批量作废")]):t._e()],1)],1)],1)],1),a("br"),t.refrathTable?a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columns_detail,"data-source":t.data_detail,"row-selection":t.rowSelectionDetail,pagination:t.pagination_detail,"row-key":function(t){return t.order_id},loading:t.loading_detail},on:{change:t.table_change_detail},scopedSlots:t._u([{key:"action_detail",fn:function(e,i){return a("span",{},[i.my_check_status&&0!=i.my_check_status||1!=t.role_discard?t._e():a("a",{on:{click:function(e){return t.discard_order(i.order_id)}}},[t._v("作废账单")]),3==i.my_check_status?a("a",{staticStyle:{color:"#808080"}},[t._v("已审核")]):t._e(),i.my_check_status>0?a("a-divider",{attrs:{type:"vertical"}}):t._e(),2==i.my_check_status?a("a",{on:{click:function(e){return t.$refs.checkRefundModel.add(i.order_id,i.order_apply_info,"order_discard")}}},[t._v("需审核")]):t._e(),2==i.my_check_status?a("a-divider",{attrs:{type:"vertical"}}):t._e(),i.my_check_status>0?a("a",{on:{click:function(e){return t.showpopup_detailsList(i)}}},[t._v("审核详情")]):t._e()],1)}}],null,!1,2981148641)}):t._e(),a("a-modal",{attrs:{width:500,title:"作废账单",visible:t.visible_invalid,maskClosable:!1,"confirm-loading":t.confirmLoading},on:{ok:t.confirm_invalid,cancel:t.handleCancel}},[a("div",{staticClass:"modal_box"},[a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("作废原因：")]),a("a-textarea",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入","auto-size":""},model:{value:t.invalidReasons,callback:function(e){t.invalidReasons=e},expression:"invalidReasons"}})],1)])])],1)])],1),a("a-modal",{staticStyle:{"z-index":"1000"},attrs:{width:1e3,title:"详情",visible:t.visible_details,maskClosable:!1,"confirm-loading":t.confirmLoading,footer:null},on:{cancel:t.handle2Cancel}},[0==t.currentIndex?a("div",[a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(e){return t.changeXTab(0)}}},[t._v("订单基本信息")]),t.show_check_detail?a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(e){return t.changeXTab(1)}}},[t._v("作废审核记录")]):t._e()],1):a("div",[a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(e){return t.changeXTab(0)}}},[t._v("订单基本信息")]),t.show_check_detail?a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(e){return t.changeXTab(1)}}},[t._v("作废审核记录")]):t._e()],1),0==t.currentIndex?a("div",{staticClass:"modal_box_1"},[a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("收费标准名称：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.charge_name))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("收费项目：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.project_name))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("应收费用：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.total_money)+"元")])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("实收费用：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.modify_money)+"元")])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("预计计费开始时间：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.service_start_time))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("预计计费结束时间：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.service_end_time))])]),t.details_data.now_ammeter-t.details_data.last_ammeter>0?a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("使用电量：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.now_ammeter-t.details_data.last_ammeter))])]):t._e(),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("滞纳天数：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.late_payment_day))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("滞纳金收取比例（每天）：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.late_fee_rate))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("滞纳金费用：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.late_payment_money))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("收费标准生效时间：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.charge_valid_time_txt))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("预缴周期：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.service_month_num?t.details_data.service_month_num:"无"))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("预缴优惠：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.diy_content?t.details_data.diy_content:"无"))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("计费模式：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.fees_type_txt?t.details_data.fees_type_txt:"无"))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("账单生成周期设置：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.bill_create_set_txt?t.details_data.bill_create_set_txt:"无"))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("账单欠费模式：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.bill_arrears_set_txt?t.details_data.bill_arrears_set_txt:"无"))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("生成账单模式：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.bill_type_txt?t.details_data.bill_type_txt:"无"))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("预缴费用：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.prepare_money?t.details_data.prepare_money:"无"))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("账单生成时间：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.add_time_txt))])]),t.details_data.parking_num_txt?a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("车位数量：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.parking_num_txt))])]):t._e(),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("合计欠费：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.all_fee)+"元")])])]):t._e(),1==t.currentIndex?a("div",{staticClass:"order_apply_list",staticStyle:{margin:"30px 0px 20px 35px"}},[a("div",[a("p",[a("strong",[t._v("申请详情")])]),a("p",[a("strong",[t._v("申请人：")]),t._v(" "+t._s(t.apply_check_info.apply_name))]),a("p",[a("strong",[t._v("申请时间：")]),t._v(" "+t._s(t.apply_check_info.add_time_str))]),a("p",[a("strong",[t._v("作废原因：")]),t._v(" "+t._s(t.apply_check_info.apply_reason))])]),a("a-timeline",t._l(t.dataCheckDetail,(function(e,i){return a("a-timeline-item",{attrs:{color:e.color_v}},[a("p",[a("strong",[t._v("审批人：")]),t._v(" "+t._s(e.pname))]),a("p",[a("strong",[t._v("审核状态：")]),t._v(" "+t._s(e.status_str))]),a("p",[a("strong",[t._v("审核时间：")]),t._v(" "+t._s(e.apply_time_str))]),a("p",[a("strong",[t._v("审核说明：")]),t._v(" "+t._s(e.bak))])])})),1)],1):t._e()]),a("check-refund-info",{ref:"checkRefundModel",on:{ok:t.bindOk}}),a("receivableModal",{ref:"OrderModel"}),a("send-type",{ref:"SendTypeModel"}),a("get-print-template",{ref:"PrintModel"}),a("print-order",{ref:"PrintOrderModel"})],1)},n=[],r=a("ade3"),o=a("2909"),l=a("1da1"),c=(a("7d24"),a("dfae")),d=(a("96cf"),a("a9e3"),a("ac1f"),a("841c"),a("b0c0"),a("a15b"),a("d81d"),a("d3b7"),a("7db0"),a("a0e0")),_=a("ffc8"),u=a("2425"),p=a("a635"),m=a("ce95"),h=a("f7e3"),f=[{title:"房间号/车位号",dataIndex:"number",key:"number"},{title:"业主名",dataIndex:"name",key:"name"},{title:"电话",dataIndex:"phone",key:"phone"},{title:"合计",dataIndex:"total_money",key:"total_money"},{title:"操作",key:"action",dataIndex:"",scopedSlots:{customRender:"action"}}],v=[{title:"房间号/车位号",dataIndex:"number",key:"number"},{title:"业主名",dataIndex:"name",key:"name"},{title:"电话",dataIndex:"phone",key:"phone"},{title:"收费标准",dataIndex:"charge_name",key:"charge_name"},{title:"收费项目名称",dataIndex:"project_name",key:"project_name"},{title:"收费所属科目",dataIndex:"charge_number_name",key:"charge_number_name"},{title:"应收费用",dataIndex:"total_money",key:"total_money"},{title:"计费开始时间",dataIndex:"service_start_time_txt",key:"service_start_time_txt"},{title:"计费结束时间",dataIndex:"service_end_time_txt",key:"service_end_time_txt"},{title:"账单生成时间",dataIndex:"add_time_txt",key:"add_time_txt"},{title:"上次度数",dataIndex:"last_ammeter",key:"last_ammeter"},{title:"本次度数",dataIndex:"now_ammeter",key:"now_ammeter"},{title:"审核状态",dataIndex:"check_status_str",key:"check_status_str"},{title:"操作",key:"action_detail",width:"120px",dataIndex:"",scopedSlots:{customRender:"action_detail"}}],g=[],y=[],b={name:"ReceivableOrderList",filters:{},props:{pigcmsId:{type:Number,default:0},village_id:{type:Number,default:0},usernum:{type:String,default:""}},components:{SendType:u["default"],receivableModal:_["default"],checkRefundInfo:p["default"],GetPrintTemplate:m["default"],PrintOrder:h["default"],"a-collapse":c["a"],"a-collapse-panel":c["a"].Panel},data:function(){var t=this;return{reply_content:"",pagination:{current:1,pageSize:10,total:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(t){return"共 ".concat(t," 条")},onShowSizeChange:function(e,a){return t.onTableChange(e,a)},onChange:function(e,a){return t.onTableChange(e,a)}},search:{keyword:"",key_val:"name",page:1},form:this.$form.createForm(this),visible:!1,loading:!1,visible_details:!1,currentIndex:0,data:g,columns:f,options:[],garage_list:[],project_list:[],dataCheckDetail:[],show_check_detail:!1,search_data:"",page:1,selectedRows:[],total_money:0,details_data:[],pagination_detail:{current:1,pageSize:10,total:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(t){return"共 ".concat(t," 条")},onShowSizeChange:function(e,a){return t.onTableChange_detail(e,a)},onChange:function(e,a){return t.onTableChange_detail(e,a)}},search__detail:{keyword:"",key_val:"name",page:1,time_slot:null,order_type:"0",service_start_time:"",service_end_time:""},visible_detail:!1,loading_detail:!1,page_detail:1,data_detail:y,columns_detail:v,options_detail:[],selectedRows_detail:[],visible_invalid:!1,order_id:0,invalidReasons:"",confirmLoading:!1,apply_check_info:{},is_vacancy_show:!0,is_namephone_show:!0,refrathTable:!0,role_callpay:0,role_discard:0,role_export:0,choice_nopay_ids:[],is_many_discard_order:0,endServiceOpen:!1}},activated:function(){},mounted:function(){console.log("pigcmsId======>",this.pigcmsId),console.log("village_id======>",this.village_id),console.log("usernum======>",this.usernum),this.pigcmsId>0?(this.search.pigcms_id=this.pigcmsId,this.search__detail.pigcms_id=this.pigcmsId,this.is_vacancy_show=!1,this.is_namephone_show=!1):(this.search.pigcms_id=0,this.search__detail.pigcms_id=0,this.is_vacancy_show=!0,this.is_namephone_show=!0),this.refrathTable=!0,this.getList(),this.getLists(),this.getSingleListByVillage(),this.getProjectList(),this.getGarageList()},computed:{rowSelection:function(){var t=this;return{onChange:function(e,a){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",a),t.selectedRows=a},getCheckboxProps:function(t){return{props:{disabled:"Disabled User"===t.name,name:t.name}}}}},rowSelectionDetail:function(){var t=this;return{onChange:function(e,a){if(console.log("selectedRowKeys: ".concat(e),"selectedRows: ",a),t.selectedRows_detail=a,a){for(var i=[],s=0;s<a.length;s++)i.push({orderid:a[s]["order_id"],pigcms_id:a[s]["pigcms_id"],room_id:a[s]["room_id"],position_id:a[s]["position_id"]});t.choice_nopay_ids=i}},getCheckboxProps:function(t){return{props:{disabled:"Disabled User"===t.name,name:t.name}}}}}},methods:(i={clear:function(){console.log(1234545)},send_message:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(1==t){if(""==e)return this.$message.error("无法发送"),!1;this.$refs.SendTypeModel.select(t,e,a)}else if(2==t){if(console.log("SendTypeModel",this.$refs.SendTypeModel),0==a)var i=this.selectedRows;else i=this.selectedRows_detail;if(""==i)return this.$message.warn("请选择需要发送的对象"),!1;this.$refs.SendTypeModel.select(t,i,a)}else this.$refs.SendTypeModel.select(t,[],a)},getList:function(){var t=this;this.loading=!0,this.search["page"]=this.page,this.search["limit"]=this.pagination.pageSize,this.choice_nopay_ids=[],this.request(d["a"].receivableOrderList,this.search).then((function(e){t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.data=e.list,t.loading=!1,t.total_money=e.total_money,t.selectedRows=[],void 0!=e.role_callpay?(t.role_callpay=e.role_callpay,t.role_discard=e.role_discard,t.role_export=e.role_export):(t.role_callpay=1,t.role_discard=1,t.role_export=1),t.refrathTable=!1,t.$nextTick((function(){t.refrathTable=!0}))}))},getLists:function(){var t=this;this.loading_detail=!0,this.search__detail["page"]=this.page_detail,this.search__detail["limit"]=this.pagination_detail.pageSize,this.choice_nopay_ids=[],this.request(d["a"].getNewPayOrders,this.search__detail).then((function(e){t.pagination_detail.total=e.count?e.count:0,t.pagination_detail.pageSize=e.total_limit?e.total_limit:10,t.data_detail=e.list,t.selectedRows_detail=[],void 0!=e.role_callpay?(t.role_callpay=e.role_callpay,t.role_discard=e.role_discard,t.role_export=e.role_export):(t.role_callpay=1,t.role_discard=1,t.role_export=1),t.refrathTable=!1,t.$nextTick((function(){t.refrathTable=!0})),t.loading_detail=!1}))},bindOk:function(){this.getLists()},discard_order:function(t){this.is_many_discard_order=0,this.visible_invalid=!0,this.order_id=t},confirm_invalid:function(){""!=this.invalidReasons?this.discardOrder(this.order_id):this.$message.warning("请填写作废原因")},discardOrder:function(t){var e=this,a={discard_reason:this.invalidReasons,order_id:t};if(1==this.is_many_discard_order){if(this.choice_nopay_ids.length<1)return this.$message.error("请至少勾选一个账单。"),!1;for(var i=[],s=0;s<this.choice_nopay_ids.length;s++)i.push(this.choice_nopay_ids[s].orderid);a.order_id=i.join(",")}this.request(d["a"].discardOrder,a).then((function(t){if(t){var a="操作成功";void 0!=t.msg&&t.msg&&(a=t.msg),e.$message.success(a),e.order_id=0,e.visible_invalid=!1,e.invalidReasons="",e.is_many_discard_order=0,e.getLists()}}))},handleCancel:function(t){this.visible_invalid=!1,this.order_id=0,this.is_many_discard_order=0,this.getLists()},handle2Cancel:function(t){this.visible_details=!1,this.order_id=0,this.currentIndex=0},many_discard_order:function(){if(this.choice_nopay_ids.length<1)return this.$message.error("请至少勾选一个账单！"),!1;this.is_many_discard_order=1,this.visible_invalid=!0,this.order_id=0},addActive:function(t){this.getList()},editActive:function(t){this.getList()},getProjectList:function(){var t=this;this.request(d["a"].ChargeProjectList).then((function(e){t.project_list=e.list})).catch((function(e){t.loading=!1}))},getGarageList:function(){var t=this;this.request(d["a"].garageList).then((function(e){console.log("garage_list",e),t.garage_list=e})).catch((function(e){t.loading=!1}))},getSingleListByVillage:function(){var t=this;this.request(d["a"].getSingleListByVillage).then((function(e){if(console.log("+++++++Single",e),e){var a=[];e.map((function(t){a.push({label:t.name,value:t.id,isLeaf:!1})})),t.options=a}}))},showpopup_detailsList:function(t){this.visible_details=!0,t.check_apply_id>0?this.show_check_detail=!0:this.show_check_detail=!1,this.getNeedPayOrderInfo(t),this.getCheckauthDetail(t)},getCheckauthDetail:function(t){var e=this;this.loading=!0,this.request(d["a"].getCheckauthDetail,{order_id:t.order_id,check_apply_id:t.check_apply_id,xtype:"order_discard",page:1}).then((function(t){e.dataCheckDetail=t.list,e.loading=!1,e.apply_check_info=t.apply_info}))},changeXTab:function(t){this.currentIndex=t,this.currentIndex},getNeedPayOrderInfo:function(t){var e=this;this.request(d["a"].getPayOrderInfo,{order_id:t.order_id}).then((function(t){t&&(e.details_data=t)}))},getFloorList:function(t){var e=this;return new Promise((function(a){e.request(d["a"].getFloorList,{pid:t}).then((function(t){console.log("+++++++Single",t),console.log("resolve",a),a(t)}))}))},getLayerList:function(t){var e=this;return new Promise((function(a){e.request(d["a"].getLayerList,{pid:t}).then((function(t){console.log("+++++++Single",t),t&&a(t)}))}))},getVacancyList:function(t){var e=this;return new Promise((function(a){e.request(d["a"].getVacancyList,{pid:t}).then((function(t){console.log("+++++++Single",t),t&&a(t)}))}))},loadDataFunc:function(t){return Object(l["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t[t.length-1],a.loading=!0,setTimeout((function(){a.loading=!1}),100);case 3:case"end":return e.stop()}}),e)})))()},setVisionsFunc:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var i,s,n,r,l,c,d,_,u,p,m,h;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1!==t.length){a.next=12;break}return i=Object(o["a"])(e.options),a.next=4,e.getFloorList(t[0]);case 4:s=a.sent,console.log("res",s),n=[],s.map((function(t){return n.push({label:t.name,value:t.id,isLeaf:!1}),i["children"]=n,!0})),i.find((function(e){return e.value===t[0]}))["children"]=n,e.options=i,a.next=39;break;case 12:if(2!==t.length){a.next=24;break}return a.next=15,e.getLayerList(t[1]);case 15:r=a.sent,l=Object(o["a"])(e.options),c=[],r.map((function(t){return c.push({label:t.name,value:t.id,isLeaf:!1}),!0})),d=l.find((function(e){return e.value===t[0]})),d.children.find((function(e){return e.value===t[1]}))["children"]=c,e.options=l,a.next=39;break;case 24:if(3!==t.length){a.next=38;break}return a.next=27,e.getVacancyList(t[2]);case 27:_=a.sent,u=Object(o["a"])(e.options),p=[],_.map((function(t){return p.push({label:t.name,value:t.id,isLeaf:!0}),!0})),m=u.find((function(e){return e.value===t[0]})),h=m.children.find((function(e){return e.value===t[1]})),h.children.find((function(e){return e.value===t[2]}))["children"]=p,e.options=u,console.log("_this.options",e.options),a.next=39;break;case 38:t.length;case 39:case"end":return a.stop()}}),a)})))()},dateOnChange:function(t,e){this.search.date=e,console.log("search",this.search)},table_change:function(t){console.log("e",t),t.current&&t.current>0&&(this.pagination.current=t.current,this.page=t.current,this.getList())},onTableChange:function(t,e){this.page=t,this.pagination.current=t,this.pagination.pageSize=e,this.getList(),console.log("onTableChange==>",t,e)},dateOnChangeDetail:function(t,e){this.search__detail.date=e,console.log("search",this.search)},table_change_detail:function(t){console.log("e",t),t.current&&t.current>0&&(this.pagination_detail.current=t.current,this.page_detail=t.current,this.getLists())},onTableChange_detail:function(t,e){this.page_detail=t,this.pagination_detail.current=t,this.pagination_detail.pageSize=e,this.getLists(),console.log("onTableChange==>",t,e)},searchList_detail:function(){console.log("search",this.search),this.page_detail=1;var t={current:1,pageSize:10,total:10};console.log("searchList"),this.table_change_detail(t)},searchList:function(){console.log("search",this.search),this.page=1;var t={current:1,pageSize:10,total:10};console.log("searchList"),this.table_change(t)},disabledServiceStartDate:function(t){var e=this.search__detail.service_end_time;return!(!t||!e)&&t.valueOf()>e.valueOf()},serviceStartTimeChange:function(t,e){console.log("serviceStartTime",e),this.search__detail.service_start_time=e},disabledServiceEndDate:function(t){var e=this.search__detail.service_start_time;return!(!t||!e)&&e.valueOf()>=t.valueOf()},serviceEndTimeChange:function(t,e){console.log("serviceEndTime",e),this.search__detail.service_end_time=e},handleServiceStartOpenChange:function(t){t||(this.endServiceOpen=!0)},handleServiceEndOpenChange:function(t){this.endServiceOpen=t},printList:function(){var t=this;this.loading=!0,this.request(d["a"].printReceivableOrder,this.search).then((function(e){console.log("list",e.list),window.location.href=e.url,t.loading=!1}))},printListDetail:function(){var t=this;this.loading_detail=!0,this.request(d["a"].receivableOrderImport,this.search__detail).then((function(e){console.log("list",e.list),window.location.href=e.url,t.loading_detail=!1}))}},Object(r["a"])(i,"dateOnChange",(function(t,e){this.search__detail.time_slot=e})),Object(r["a"])(i,"arrUnique",(function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"room_id",a=[],i=0,s=t.length;i<s;i++)-1===a.indexOf(t[i][e])&&a.push(t[i][e]);return a})),Object(r["a"])(i,"checkSetNopayPrint",(function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=this;if(2==t){if(s.length<1)return n.$message.error("请至少勾选一个账单"),!1;console.log("choice_nopay_ids",s);var r=this.arrUnique(s,"room_id");if(r.length>1)return n.$message.error("当前仅支持同一个房间进行打印已缴账单"),!1;var o=this.arrUnique(s,"position_id");if((0==r["0"]||"0"==r["0"])&&o.length>1)return n.$message.error("当前仅支持同一个车位进行打印已缴账单"),!1;if(s.length>8)return n.$message.error("最多可选择8个账单打印，您当前选中"+s.length+"个"),!1}this.request(d["a"].checkSetPrint,{print_type:1}).then((function(n){n.template_id&&n.template_id>0?e.$refs.PrintOrderModel.add(a,n.template_id,i,s):1==t?e.$refs.PrintModel.add(a,i):e.$refs.PrintModel.batchPrint(s)}))})),i)},x=b,k=(a("a609"),a("0c7c")),C=Object(k["a"])(x,s,n,!1,null,"8054484c",null);e["default"]=C.exports},bd95:function(t,e,a){},be12:function(t,e,a){},be8d:function(t,e,a){},bf3f:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,width:1e3,visible:t.visible,maskClosable:!1,footer:null,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading,height:800}},[a("a-card",[0==t.currentIndex?a("div",[a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(e){return t.changeXTab(0)}}},[t._v("订单基本信息")]),a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(e){return t.changeXTab(1)}}},[t._v("订单退款记录")]),t.show_check_detail?a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(e){return t.changeXTab(2)}}},[t._v("退款审核记录")]):t._e()],1):1==t.currentIndex?a("div",[a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(e){return t.changeXTab(0)}}},[t._v("订单基本信息")]),a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(e){return t.changeXTab(1)}}},[t._v("订单退款记录")]),t.show_check_detail?a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(e){return t.changeXTab(2)}}},[t._v("退款审核记录")]):t._e()],1):a("div",[a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(e){return t.changeXTab(0)}}},[t._v("订单基本信息")]),a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(e){return t.changeXTab(1)}}},[t._v("订单退款记录")]),t.show_check_detail?a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(e){return t.changeXTab(2)}}},[t._v("退款审核记录")]):t._e()],1)]),0==t.currentIndex?a("div",{staticClass:"order_list_box"},[a("a-card",[a("span",{staticClass:"ant-card-head-title",staticStyle:{"margin-bottom":"15px","font-size":"16px","font-weight":"600"}},[t._v("订单基本信息")]),a("div",[a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("订单编号:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.order_no,callback:function(e){t.$set(t.post,"order_no",e)},expression:"post.order_no"}})],1),a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("支付单号:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.order_serial,callback:function(e){t.$set(t.post,"order_serial",e)},expression:"post.order_serial"}})],1),a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("房间号:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.numbers,callback:function(e){t.$set(t.post,"numbers",e)},expression:"post.numbers"}})],1),a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("车位号:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.park_number,callback:function(e){t.$set(t.post,"park_number",e)},expression:"post.park_number"}})],1),a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("缴费人:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.pay_bind_name,callback:function(e){t.$set(t.post,"pay_bind_name",e)},expression:"post.pay_bind_name"}})],1),a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("电话:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.pay_bind_phone,callback:function(e){t.$set(t.post,"pay_bind_phone",e)},expression:"post.pay_bind_phone"}})],1),a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("收费项目名称:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.project_name,callback:function(e){t.$set(t.post,"project_name",e)},expression:"post.project_name"}})],1),a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("所属收费科目:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.subject_name,callback:function(e){t.$set(t.post,"subject_name",e)},expression:"post.subject_name"}})],1),a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("应收费用:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.total_money,callback:function(e){t.$set(t.post,"total_money",e)},expression:"post.total_money"}})],1),a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("修改后费用:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.modify_money,callback:function(e){t.$set(t.post,"modify_money",e)},expression:"post.modify_money"}})],1),a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("修改原因:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.modify_reason,callback:function(e){t.$set(t.post,"modify_reason",e)},expression:"post.modify_reason"}})],1),a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("实际缴费金额:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.pay_money,callback:function(e){t.$set(t.post,"pay_money",e)},expression:"post.pay_money"}})],1),a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("线上缴费金额:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.pay_amount_points,callback:function(e){t.$set(t.post,"pay_amount_points",e)},expression:"post.pay_amount_points"}})],1),a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("余额支付金额:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.system_balance,callback:function(e){t.$set(t.post,"system_balance",e)},expression:"post.system_balance"}})],1),a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("积分抵扣费金额:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.score_deducte,callback:function(e){t.$set(t.post,"score_deducte",e)},expression:"post.score_deducte"}})],1),a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("积分抵扣数量:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.score_used_count,callback:function(e){t.$set(t.post,"score_used_count",e)},expression:"post.score_used_count"}})],1),a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("优惠方式:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.diy_type,callback:function(e){t.$set(t.post,"diy_type",e)},expression:"post.diy_type"}})],1),a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("支付方式:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.pay_type,callback:function(e){t.$set(t.post,"pay_type",e)},expression:"post.pay_type"}})],1),a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("支付时间:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.pay_time,callback:function(e){t.$set(t.post,"pay_time",e)},expression:"post.pay_time"}})],1),a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("计费开始时间:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.service_start_time,callback:function(e){t.$set(t.post,"service_start_time",e)},expression:"post.service_start_time"}})],1),a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("计费结束时间:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.service_end_time,callback:function(e){t.$set(t.post,"service_end_time",e)},expression:"post.service_end_time"}})],1),a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("收款人:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.role_name,callback:function(e){t.$set(t.post,"role_name",e)},expression:"post.role_name"}})],1),a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("用量:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.ammeter,callback:function(e){t.$set(t.post,"ammeter",e)},expression:"post.ammeter"}})],1),t.is_show?a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("起度:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.last_ammeter,callback:function(e){t.$set(t.post,"last_ammeter",e)},expression:"post.last_ammeter"}})],1):t._e(),t.is_show?a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("止度:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.now_ammeter,callback:function(e){t.$set(t.post,"now_ammeter",e)},expression:"post.now_ammeter"}})],1):t._e(),a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("账单状态:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.refund_status,callback:function(e){t.$set(t.post,"refund_status",e)},expression:"post.refund_status"}})],1),a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("开票状态:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.record_status,callback:function(e){t.$set(t.post,"record_status",e)},expression:"post.record_status"}})],1),a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("账单模式:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.refund_type,callback:function(e){t.$set(t.post,"refund_type",e)},expression:"post.refund_type"}})],1),a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("备注:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.remark,callback:function(e){t.$set(t.post,"remark",e)},expression:"post.remark"}})],1),t.post.service_month_num&&1!=t.post.is_prepare?a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("收费周期:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.service_month_num,callback:function(e){t.$set(t.post,"service_month_num",e)},expression:"post.service_month_num"}})],1):a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("收费周期:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0,value:"无"}})],1),a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("押金抵扣:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.deposit_money,callback:function(e){t.$set(t.post,"deposit_money",e)},expression:"post.deposit_money"}})],1),t.post.parking_num_txt?a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("车位数:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.parking_num_txt,callback:function(e){t.$set(t.post,"parking_num_txt",e)},expression:"post.parking_num_txt"}})],1):t._e(),t.is_show?a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("抄表时间:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.opt_meter_time,callback:function(e){t.$set(t.post,"opt_meter_time",e)},expression:"post.opt_meter_time"}})],1):t._e(),t.post.children_arr_info?a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("子车位:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.children_arr_info,callback:function(e){t.$set(t.post,"children_arr_info",e)},expression:"post.children_arr_info"}})],1):t._e()]),a("div",[a("label",[t._v("打印编号：")]),a("span",[t._v(t._s(t.post.print_no))])])]),a("a-card",[a("span",{staticClass:"ant-card-head-title",staticStyle:{"margin-bottom":"15px","font-size":"16px","font-weight":"600"}},[t._v("滞纳金信息")]),a("span",{staticClass:"ant-card-span1",staticStyle:{"margin-left":"-80px"}},[a("label",[t._v("滞纳总天数:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.late_payment_day,callback:function(e){t.$set(t.post,"late_payment_day",e)},expression:"post.late_payment_day"}})],1),a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("滞纳金总费用:")]),a("a-input",{staticClass:"ant-card-input",staticStyle:{width:"25%"},attrs:{disabled:!0},model:{value:t.post.late_payment_money,callback:function(e){t.$set(t.post,"late_payment_money",e)},expression:"post.late_payment_money"}})],1)]),a("a-card",[a("span",{staticClass:"ant-card-head-title",staticStyle:{"margin-bottom":"15px","font-size":"16px","font-weight":"600"}},[t._v("预缴信息")]),a("span",{staticClass:"ant-card-span1",staticStyle:{"margin-left":"-64px"}},[a("label",[t._v("预缴周期:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.prepare_month_num,callback:function(e){t.$set(t.post,"prepare_month_num",e)},expression:"post.prepare_month_num"}})],1),a("span",{staticClass:"ant-card-span2"},[a("label",[t._v("预缴优惠:")]),a("a-input",{staticClass:"ant-card-input",staticStyle:{width:"33%"},attrs:{disabled:!0},model:{value:t.post.diy_content,callback:function(e){t.$set(t.post,"diy_content",e)},expression:"post.diy_content"}})],1),a("span",{staticClass:"ant-card-span1"},[a("label",[t._v("预缴费用:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.prepare_pay_money,callback:function(e){t.$set(t.post,"prepare_pay_money",e)},expression:"post.prepare_pay_money"}})],1)]),a("a-card",{staticStyle:{"padding-bottom":"24px"}},[a("span",{staticClass:"ant-card-head-title",staticStyle:{"margin-bottom":"15px","font-size":"16px","font-weight":"600"}},[t._v("退款信息")]),a("span",{staticClass:"ant-card-span1",staticStyle:{"margin-left":"-64px"}},[a("label",[t._v("退款总金额:")]),a("a-input",{staticClass:"ant-card-input",attrs:{disabled:!0},model:{value:t.post.refund_money,callback:function(e){t.$set(t.post,"refund_money",e)},expression:"post.refund_money"}})],1)]),t.post.showArr&&t.post.showArr[0]?a("a-card",{staticStyle:{"padding-bottom":"24px"}},[a("span",{staticClass:"ant-card-head-title",staticStyle:{"margin-bottom":"15px","font-size":"16px","font-weight":"600"}},[t._v("导入相关信息")]),a("span",{staticClass:"ant-card-span1",staticStyle:{"margin-left":"-95px"}},[a("label",[t._v(t._s(t.post.showArr[0].title)+":")]),t._v(" "+t._s(t.post.showArr[0].value)+" ")]),t.post.showArr[1]?a("span",{staticStyle:{"padding-left":"258px"}},[a("label",[t._v(t._s(t.post.showArr[1].title)+":")]),t._v(" "+t._s(t.post.showArr[1].value)+" ")]):t._e(),a("p",[t.post.showArr[2]?a("span",{staticClass:"ant-card-span1"},[a("label",[t._v(t._s(t.post.showArr[2].title)+":")]),t._v(" "+t._s(t.post.showArr[2].value)+" ")]):t._e(),t.post.showArr[3]?a("span",{staticStyle:{"padding-left":"238px"}},[a("label",[t._v(t._s(t.post.showArr[3].title)+":")]),t._v(" "+t._s(t.post.showArr[3].value)+" ")]):t._e()]),t.post.showArr[4]?a("span",{staticClass:"ant-card-span1"},[a("label",[t._v(t._s(t.post.showArr[4].title)+":")]),t._v(" "+t._s(t.post.showArr[4].value)+" ")]):t._e()]):t._e()],1):t._e(),1==t.currentIndex?a("div",{staticClass:"message-suggestions-list-box",staticStyle:{"margin-top":"10px"}},[a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columnsRefund,"data-source":t.dataRefund,pagination:t.pagination,loading:t.loading},on:{change:t.tableRefundChange}})],1):t._e(),2==t.currentIndex?a("div",{staticClass:"order_apply_list",staticStyle:{margin:"30px 0px 20px 35px"}},[a("div",[a("p",[a("strong",[t._v("申请详情")])]),a("p",[a("strong",[t._v("申请人：")]),t._v(" "+t._s(t.apply_check_info.apply_name))]),a("p",[a("strong",[t._v("申请时间：")]),t._v(" "+t._s(t.apply_check_info.add_time_str))]),a("p",[a("strong",[t._v("退款金额：")]),t._v(" "+t._s(t.apply_check_info.apply_money)+" 元")]),a("p",[a("strong",[t._v("退款原因：")]),t._v(" "+t._s(t.apply_check_info.apply_reason))])]),a("a-timeline",t._l(t.dataCheckDetail,(function(e,i){return a("a-timeline-item",{attrs:{color:e.color_v}},[a("p",[a("strong",[t._v("审批人：")]),t._v(" "+t._s(e.pname))]),a("p",[a("strong",[t._v("审核状态：")]),t._v(" "+t._s(e.status_str))]),a("p",[a("strong",[t._v("审核时间：")]),t._v(" "+t._s(e.apply_time_str))]),a("p",[a("strong",[t._v("审核说明：")]),t._v(" "+t._s(e.bak))])])})),1)],1):t._e()],1),a("refund-list",{ref:"RefundModel"})],1)},s=[],n=a("a0e0"),r=a("bf57"),o=[{title:"退款金额",dataIndex:"refund_money",key:"refund_money"},{title:"线上退款金额",dataIndex:"refund_online_money",key:"refund_online_money"},{title:"余额退款金额",dataIndex:"refund_balance_money",key:"refund_balance_money"},{title:"积分抵扣退款金额",dataIndex:"refund_score_money",key:"refund_score_money"},{title:"积分抵扣退款积分数量",dataIndex:"refund_score_count",key:"refund_score_count"},{title:"退款时间",dataIndex:"add_time",key:"add_time"},{title:"退款原因",dataIndex:"refund_reason",key:"refund_reason"},{title:"操作人",dataIndex:"role_name",key:"role_name"}],l=[],c={name:"payableOrderInfo",components:{RefundList:r["default"]},data:function(){var t=this;return{title:"新建",setWidth:700,labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,id:0,is_show:!1,check_apply_id:0,show_check_detail:!1,currentIndex:0,columnsRefund:o,dataRefund:l,dataCheckDetail:[],pagination:{current:1,pageSize:10,total:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(t){return"共 ".concat(t," 条")},onShowSizeChange:function(e,a){return t.onTableChange(e,a)},onChange:function(e,a){return t.onTableChange(e,a)}},page:1,post:{deposit_money:"",order_id:"",order_no:"",order_serial:"",numbers:"",pay_bind_name:"",pay_bind_phone:"",project_name:"",subject_name:"",total_money:"",modify_money:"",modify_reason:"",pay_money:"",role_name:"",diy_type:"",score_used_count:"",pay_time:"",pay_type:"",service_start_time:"",service_end_time:"",ammeter:"",now_ammeter:"",last_ammeter:"",opt_meter_time:"",children_arr_info:"",record_status:"",refund_status:"",remark:"",late_payment_day:"",late_payment_money:"",service_month_num:"",service_give_month_num:"",prepare_pay_money:"",refund_money:"",refund_type:"",prepare_month_num:"",is_prepare:1,print_no:"",showArr:[]},apply_check_info:{}}},mounted:function(){},methods:{add:function(t,e){this.title="订单详情",this.visible=!0,this.is_show=!1,this.id=t,this.check_apply_id=e,this.currentIndex=0,this.post={deposit_money:"",order_id:"",order_no:"",order_serial:"",numbers:"",pay_bind_name:"",pay_bind_phone:"",project_name:"",subject_name:"",total_money:"",modify_money:"",modify_reason:"",role_name:"",pay_money:"",diy_type:"",score_used_count:"",pay_time:"",pay_type:"",service_start_time:"",service_end_time:"",ammeter:"",now_ammeter:"",last_ammeter:"",opt_meter_time:"",record_status:"",refund_status:"",remark:"",late_payment_day:"",late_payment_money:"",service_month_num:"",service_give_month_num:"",prepare_pay_money:"",refund_money:"",refund_type:"",is_prepare:1,showArr:[]},this.getOrderInfo(),this.check_apply_id>0?this.show_check_detail=!0:this.show_check_detail=!1},getOrderInfo:function(){var t=this;this.loading=!0,this.request(n["a"].payOrderInfo,{id:this.id}).then((function(e){t.post=e,"water"!=e.order_type&&"electric"!=e.order_type&&"gas"!=e.order_type||(t.is_show=!0),e.check_apply_id<1&&(t.check_apply_id=e.check_apply_id,t.show_check_detail=!1),t.loading=!1}))},changeXTab:function(t){this.currentIndex=t,0==this.currentIndex?this.getOrderInfo():1==this.currentIndex?this.getRefundList():this.getCheckauthDetail()},getRefundList:function(){var t=this;this.loading=!0,this.request(n["a"].refundList,{order_id:this.id,page:this.page,limit:this.pagination.pageSize}).then((function(e){t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.dataRefund=e.list,t.loading=!1}))},getCheckauthDetail:function(){var t=this;this.loading=!0,this.request(n["a"].getCheckauthDetail,{order_id:this.id,check_apply_id:this.check_apply_id,xtype:"order_refund",page:this.page}).then((function(e){t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.dataCheckDetail=e.list,t.apply_check_info=e.apply_info,t.loading=!1}))},onTableChange:function(t,e){this.page=t,this.pagination.current=t,this.pagination.pageSize=e,this.getRefundList(),console.log("onTableChange==>",t,e)},tableRefundChange:function(t){console.log("e",t),t.current&&t.current>0&&(this.page=t.current,this.getRefundList())},handleCancel:function(){var t=this;this.visible=!1,this.currentIndex=0,setTimeout((function(){t.post={},t.form=t.$form.createForm(t)}),500)}}},d=c,_=(a("15b3"),a("0c7c")),u=Object(_["a"])(d,i,s,!1,null,null,null);e["default"]=u.exports},bf57:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,width:700,visible:t.visible,maskClosable:!1,footer:null,confirmLoading:t.loading},on:{cancel:t.handleCancel}},[a("div",{staticClass:"message-suggestions-list-box"},[a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination,loading:t.loading},on:{change:t.table_change}})],1)])},s=[],n=a("a0e0"),r=[{title:"退款金额",dataIndex:"refund_money",key:"refund_money"},{title:"线上退款金额",dataIndex:"refund_online_money",key:"refund_online_money"},{title:"余额退款金额",dataIndex:"refund_balance_money",key:"refund_balance_money"},{title:"积分抵扣退款金额",dataIndex:"refund_score_money",key:"refund_score_money"},{title:"积分抵扣退款积分数量",dataIndex:"refund_score_count",key:"refund_score_count"},{title:"退款时间",dataIndex:"add_time",key:"add_time"},{title:"退款原因",dataIndex:"refund_reason",key:"refund_reason"},{title:"操作人",dataIndex:"role_name",key:"role_name"}],o=[],l={name:"refundList",filters:{},data:function(){var t=this;return{title:"退款纪录",reply_content:"",pagination:{current:1,pageSize:10,total:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(t){return"共 ".concat(t," 条")},onShowSizeChange:function(e,a){return t.onTableChange(e,a)},onChange:function(e,a){return t.onTableChange(e,a)}},form:this.$form.createForm(this),visible:!1,loading:!1,data:o,columns:r,page:1}},methods:{add:function(t){this.title="退款纪录",this.visible=!0,this.id=t,console.log("id",t),this.getList()},getList:function(){var t=this;this.loading=!0,this.request(n["a"].refundList,{order_id:this.id,page:this.page,limit:this.pagination.pageSize}).then((function(e){t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.data=e.list,t.loading=!1}))},handleCancel:function(){var t=this;this.visible=!1,setTimeout((function(){t.post={},t.form=t.$form.createForm(t)}),500)},onTableChange:function(t,e){this.page=t,this.pagination.current=t,this.pagination.pageSize=e,this.getList(),console.log("onTableChange==>",t,e)},table_change:function(t){console.log("e",t),t.current&&t.current>0&&(this.page=t.current,this.getList())}}},c=l,d=(a("d229"),a("0c7c")),_=Object(d["a"])(c,i,s,!1,null,"091b0bc0",null);e["default"]=_.exports},cb82:function(t,e,a){"use strict";a("1fa2")},cd55:function(t,e,a){"use strict";a("4786")},ce95:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,width:500,visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[t.is_set?a("div",{staticStyle:{"margin-bottom":"20px"},domProps:{innerHTML:t._s(t.set_msg)}}):t._e(),a("a-spin",{attrs:{spinning:t.confirmLoading,height:800}},[a("a-form",{attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"选择打印模板",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择打印模板"},model:{value:t.template_id,callback:function(e){t.template_id=e},expression:"template_id"}},t._l(t.template_list,(function(e,i){return a("a-select-option",{key:i,attrs:{value:e.template_id}},[t._v(" "+t._s(e.title)+" ")])})),1)],1)],1)],1)],1),a("print-order",{ref:"PrintModel"})],1)},s=[],n=a("a0e0"),r=a("f7e3"),o={components:{PrintOrder:r["default"]},data:function(){return{title:"选择打印模板",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,order_id:0,template_id:void 0,template_list:[],pigcms_id:0,choice_ids:[],is_set:!1,set_msg:"",set_type:0,source_type:0,print_type:0}},mounted:function(){},methods:{add:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;this.source_type=0,this.print_type=void 0!=i&&i?i:0,0==a?(this.title="选择打印模板",this.is_set=!1,this.set_msg=""):(this.is_set=!0,this.title="设置打印模板",1==a?(this.source_type=1,this.set_msg="1、在收银台设置打印模板，收银台支持打印功能。打印功能；不设置打印模板，则不支持。<br/>2、设置打印模板后，在收银台显示已缴账单按钮，进入查看所有已缴账单数据。"):2==a&&(this.set_msg='1、设置打印模板后，联动收银台打印模板功能。<br/>2、设置打印模板后，<span style="color: #1890ff">已缴账单</span>列表点击<span style="color: #1890ff">打印</span>按钮直接打印')),1==this.print_type&&(this.title="设置待缴账单打印模板",this.set_msg='1、设置<span style="color: #1583e3">待缴</span>账单打印模板后，设置后此模板用于<span style="color: #1583e3">未交费</span>的账单打印<br />2、最多可选8个账单打印'),this.set_type=a,this.template_id=void 0,this.visible=!0,this.pigcms_id=e,this.template_list=[],this.order_id=t,this.choice_ids=[],this.getTemplate()},batchPrint:function(t){var e=this;if(t.length<1)return e.$message.error("请勾选账单"),!1;e.title="选择打印模板",e.visible=!0,e.template_id=void 0,e.template_list=[],e.order_id=0,e.pigcms_id=0,e.choice_ids=t,this.set_type=0,this.source_type=0,this.print_type=0,e.getTemplate()},getTemplate:function(){var t=this;this.request(n["a"].getTemplate,{print_type:this.print_type}).then((function(e){t.template_list=e.list,e&&e.template_id>0&&(t.template_id=e.template_id)}))},handleSubmit:function(){var t=this;if(!this.template_id)return this.$message.error("选择打印模板"),!1;this.set_type>0?(this.confirmLoading=!0,this.request(n["a"].editSetPrint,{template_id:this.template_id,print_type:this.print_type}).then((function(e){t.$message.success("编辑成功"),setTimeout((function(){t.form=t.$form.createForm(t),t.visible=!1,t.print_type=0,t.confirmLoading=!1,t.$emit("ok",{type:t.source_type,template_id:t.template_id})}),1e3)})).catch((function(t){}))):this.$refs.PrintModel.add(this.order_id,this.template_id,this.pigcms_id,this.choice_ids)},handleCancel:function(){this.visible=!1,this.print_type=0}}},l=o,c=(a("57ac"),a("0c7c")),d=Object(c["a"])(l,i,s,!1,null,null,null);e["default"]=d.exports},d229:function(t,e,a){"use strict";a("aa035")},d9fc0:function(t,e,a){},de3f:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-tabs",{attrs:{"default-active-key":"1"},on:{change:t.callback}},[a("a-tab-pane",{key:"1",attrs:{tab:"快递代收"}},[a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.expressCollection,"data-source":t.expressCollectionList,pagination:t.paginationCollection,rowKey:"id",loading:t.loadingCollection},on:{change:t.table_change_collection},scopedSlots:t._u([{key:"collect_info",fn:function(e,i){return a("span",{},[a("span",[t._v(t._s(i.express_name))]),a("br"),a("span",[t._v(t._s(i.express_no))])])}},{key:"action",fn:function(e,i){return a("span",{},[a("a",{on:{click:function(e){return t.expressInfoFun(i.id)}}},[t._v("详情")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.delExpress(i.id)}}},[t._v("删除")])],1)}}])})],1),a("a-tab-pane",{key:"2",attrs:{tab:"快递代发","force-render":""}},[a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.expressDelivery,"data-source":t.expressDeliveryList,pagination:t.paginationDelivery,rowKey:"id",loading:t.loadingDelivery},on:{change:t.table_change_delivery},scopedSlots:t._u([{key:"sendInfo",fn:function(e,i){return a("span",{},[a("span",[t._v("姓名："+t._s(i.send_uname))]),a("br"),a("span",[t._v("联系方式："+t._s(i.send_phone))]),a("br"),a("span",[t._v("详细地址："+t._s(i.send_adress))])])}},{key:"collectInfo",fn:function(e,i){return a("span",{},[a("span",[t._v("姓名："+t._s(i.collect_uname))]),a("br"),a("span",[t._v("联系方式："+t._s(i.collect_phone))]),a("br"),a("span",[t._v("详细地址："+t._s(i.collect_adress))])])}}])})],1)],1),t.visible?a("a-modal",{attrs:{title:"快递详情",width:900,footer:null,visible:t.visible,maskClosable:!1,confirmLoading:!1},on:{cancel:t.handleCancel}},[a("a-descriptions",{attrs:{title:""}},t._l(t.expressInfo,(function(e,i){return a("a-descriptions-item",{key:i,attrs:{label:e.title}},[a("span",[t._v(t._s(e.value))])])})),1)],1):t._e()],1)},s=[],n=(a("a9e3"),a("a0e0")),r=[{title:"快递信息",dataIndex:"collect_info",key:"collect_info",scopedSlots:{customRender:"collect_info"}},{title:"收件人手机号",dataIndex:"phone",key:"phone"},{title:"收件人地址",dataIndex:"collect_address",key:"collect_address"},{title:"取件码",dataIndex:"fetch_code",key:"fetch_code"},{title:"送件费用",dataIndex:"money",key:"money"},{title:"状态",dataIndex:"express_msg",key:"express_msg"},{title:"预约代送时间",dataIndex:"send_time",key:"send_time"},{title:"添加时间",dataIndex:"add_time",key:"add_time"},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"action"}}],o=[],l=[{title:"ID",dataIndex:"send_id",key:"send_id"},{title:"寄件人信息",dataIndex:"send_phone",key:"send_phone",width:200,scopedSlots:{customRender:"sendInfo"}},{title:"收件人信息",dataIndex:"collect_phone",key:"collect_phone",width:200,scopedSlots:{customRender:"collectInfo"}},{title:"物品重量",dataIndex:"weightDesc",key:"weightDesc"},{title:"文件类型",dataIndex:"goods_type_text",key:"goods_type_text"},{title:"快递公司",dataIndex:"expressDesc",key:"expressDesc"},{title:"代发费用",dataIndex:"send_price",key:"send_price"},{title:"备注",dataIndex:"remarks",key:"remarks"},{title:"提交时间",dataIndex:"add_time",key:"add_time"},{title:"最后导出时间",dataIndex:"export_time",key:"export_time"}],c=[],d={name:"expressManagement",data:function(){return{title:"",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},expressCollection:r,expressCollectionList:o,expressDelivery:l,expressDeliveryList:c,paginationCollection:{current:1,pageSize:10,total:10},paginationDelivery:{current:1,pageSize:10,total:10},loadingCollection:!1,loadingDelivery:!1,visible:!1,expressInfo:[],type:"collect"}},props:{pigcmsId:{type:Number,default:0},uid:{type:Number,default:0}},created:function(){this.getExpressList(1)},methods:{table_change_collection:function(t){var e=this;t.current&&t.current>0&&(e.$set(e.paginationCollection,"current",t.current),e.getList())},table_change_delivery:function(t){var e=this;t.current&&t.current>0&&(e.$set(e.paginationDelivery,"current",t.current),e.getList())},getExpressList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;"collect"===this.type?this.loadingCollection=!0:this.loadingDelivery=!0;var a={};1===e&&("collect"===this.type?(this.$set(this.paginationCollection,"current",1),a["page"]=this.paginationCollection.current):(this.$set(this.paginationDelivery,"current",1),a["page"]=this.paginationDelivery.current)),a["pigcms_id"]=this.pigcmsId,a["uid"]=this.uid,a["type"]=this.type,console.log(a),this.request(n["a"].getExpressList,a).then((function(e){console.log(e),"collect"===t.type?(t.paginationCollection.total=e.count?e.count:0,t.paginationCollection.pageSize=e.total_limit?e.total_limit:10,t.expressCollectionList=e.list,t.loadingCollection=!1):(t.paginationDelivery.total=e.count?e.count:0,t.paginationDelivery.pageSize=e.total_limit?e.total_limit:10,t.expressDeliveryList=e.list,t.loadingDelivery=!1)}))},callback:function(t){this.type=1===t?"collect":"send",this.getExpressList(1)},expressInfoFun:function(t){var e=this,a={id:t};this.request(n["a"].getExpressInfo,a).then((function(t){e.expressInfo=t,e.visible=!0}))},handleCancel:function(t){this.visible=!1},delExpress:function(t){var e=this,a={id:t};this.request(n["a"].delExpress,a).then((function(t){1===t.status?(e.$message.success(t.msg),e.getExpressList(1)):e.$message.error(t.msg)}))}}},_=d,u=(a("397d"),a("0c7c")),p=Object(u["a"])(_,i,s,!1,null,null,null);e["default"]=p.exports},de8f:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-suggestions-list-box"},[a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination,rowKey:"id",loading:t.loading},on:{change:t.table_change},scopedSlots:t._u([{key:"enclosure",fn:function(e,i){return a("span",{},[a("a",{on:{click:function(e){return t.enclosureList(i.id)}}},[t._v("附件")])])}},{key:"remark",fn:function(e,i){return a("span",{},[a("a",{on:{click:function(e){return t.remarkList(i.id)}}},[t._v("备注")])])}},{key:"action",fn:function(e,i){return a("span",{},[a("a",{on:{click:function(e){return t.editDecorationOrder(i.edit_url)}}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.delDecorationOrder(i.id)}}},[t._v("删除")])],1)}}])}),t.visible?a("a-modal",{attrs:{title:"模板编辑",width:1300,footer:null,visible:t.visible,maskClosable:!1,confirmLoading:!1},on:{cancel:t.handleCancel}},[a("iframe",{ref:"editDecorationOrderIframe",staticStyle:{width:"100% !important",height:"550px !important"},attrs:{id:"myframe",frameborder:"0",src:t.editUrl}})]):t._e(),a("a-modal",{attrs:{title:"附件",width:600,footer:null,visible:t.enclosureVisible,maskClosable:!1,confirmLoading:!1},on:{cancel:t.enclosureHandleCancel}},[a("a-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",round:"",size:"small"},on:{click:function(e){return t.uploadFileSingle()}}},[t._v("上传附件")]),a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.enclosureColumns,"data-source":t.enclosureData,pagination:t.enclosurePagination,rowKey:"id",loading:t.enclosureLoading},on:{change:t.table_change_enclosure},scopedSlots:t._u([{key:"enclosureAction",fn:function(e,i){return a("span",{},[a("a",{attrs:{href:i.file_url_path,target:"_blank"}},[t._v("查看图片")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.delEnclosure(i.file_id)}}},[t._v("删除")])],1)}}])}),t.uploadFileDialog?a("a-modal",{attrs:{title:"上传附件",center:!0,footer:null,visible:t.uploadFileDialog,width:"450px"},on:{cancel:t.enclosureFileHandleCancel}},[a("a-row",[a("a-col",{staticStyle:{"text-align":"-webkit-center"},attrs:{span:24}},[a("a-upload",{attrs:{name:"file",multiple:!0,data:t.uploadFileData,action:"/v20/public/index.php/community/village_api.ChatSidebar/uploadFile",headers:t.headers},on:{change:t.handleChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 点击上传文件 ")],1)],1)],1),a("a-col",{staticStyle:{"text-align":"-webkit-center",padding:"25px"},attrs:{span:24}},[t._v(" 类型支持：EXCEL、PDF、WORD、图片 ")])],1)],1):t._e()],1),a("a-modal",{attrs:{title:"备注",width:600,footer:null,visible:t.remarkVisible,maskClosable:!1,confirmLoading:!1},on:{cancel:t.remarkHandleCancel}},[a("a-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",round:"",size:"small"},on:{click:function(e){return t.addRemarkSingle()}}},[t._v("添加备注")]),a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:t.remarkColumns,"data-source":t.remarkData,pagination:t.remarkPagination,rowKey:"id",loading:t.remarkLoading},on:{change:t.table_change_remark},scopedSlots:t._u([{key:"remarkAction",fn:function(e,i){return a("span",{},[a("a",{on:{click:function(e){return t.editRemark(i.remark_id,i.remark)}}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.delRemark(i.remark_id)}}},[t._v("删除")])],1)}}])}),t.addRemarkListShow?a("a-modal",{attrs:{title:t.remarkTitle,center:!0,footer:null,visible:t.addRemarkListShow,width:"450px"},on:{cancel:t.remarkAddHandleCancel}},[a("a-row",[a("a-col",{staticStyle:{"text-align":"-webkit-center"},attrs:{span:24}},[a("a-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入内容"},model:{value:t.remarkVal,callback:function(e){t.remarkVal=e},expression:"remarkVal"}}),a("a-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:function(e){return t.trueAddRemark()}}},[t._v("确 定")])],1)],1)],1):t._e()],1)],1)},s=[],n=(a("a9e3"),a("ac1f"),a("841c"),a("b0c0"),a("a0e0")),r=[{title:"ID",dataIndex:"id",key:"id"},{title:"模板标题",dataIndex:"title",key:"title"},{title:"申请填写时间",dataIndex:"add_time",key:"add_time"},{title:"附件",scopedSlots:{customRender:"enclosure"}},{title:"备注",scopedSlots:{customRender:"remark"}},{title:"状态",dataIndex:"diy_tatus_txt",key:"diy_tatus_txt"},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"action"}}],o=[],l=[{title:"文件名称",dataIndex:"title",key:"title"},{title:"上传人",dataIndex:"account",key:"account"},{title:"上传时间",dataIndex:"add_time_txt",key:"add_time_txt"},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"enclosureAction"}}],c=[],d=[{title:"备注内容",dataIndex:"remark",key:"remark"},{title:"添加人",dataIndex:"account",key:"account"},{title:"最新记录时间",dataIndex:"add_time_text",key:"add_time_text"},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"remarkAction"}}],_=[],u={name:"decorationOrder",components:{},data:function(){return{pagination:{current:1,pageSize:10,total:10},enclosurePagination:{current:1,pageSize:10,total:10},remarkPagination:{current:1,pageSize:10,total:10},search:{page:1},enclosureSearch:{page:1},remarkSearch:{page:1},headers:{authorization:"authorization-text"},uploadFileData:{path:"writeFile"},loading:!1,enclosureLoading:!1,uploadFileDialog:!1,remarkLoading:!1,addRemarkListShow:!1,visible:!1,enclosureVisible:!1,remarkTitle:"",remarkVisible:!1,data:o,columns:r,enclosureData:c,enclosureColumns:l,diyId:0,remarkData:_,remarkColumns:d,remarkVal:"",type:"add",remarkId:0,editUrl:"",iframe:""}},props:{pigcmsId:{type:Number,default:0},uid:{type:Number,default:0}},created:function(){this.getList(1)},methods:{getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.loading=!0,1===e&&this.$set(this.pagination,"current",1),this.search["page"]=this.pagination.current,this.search["uid"]=this.uid,this.request(n["a"].getDecorationOrderList,this.search).then((function(e){console.log(e),t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.data=e.list,t.loading=!1}))},table_change:function(t){var e=this;console.log("e",t),t.current&&t.current>0&&(e.$set(e.pagination,"current",t.current),e.getList())},handleCancel:function(t){this.visible=!1},editDecorationOrder:function(t){var e=this;this.editUrl=t,this.visible=!0,this.$nextTick((function(){var t=document.querySelector("#myframe");t.contentWindow.addEventListener("click",(function(t){console.log("返回触发此事件的元素（事件的目标节点）",t.target),console.log("返回触发此事件的元素（事件的目标节点）文本====innerText",t.target.innerText),-1!==t.target.innerText.indexOf("保存")&&(e.visible=!1,e.$message.success("修改成功"),e.getList(1)),-1!==t.target.innerText.indexOf("返回")&&(e.visible=!1,e.getList(1))}))}))},enclosureList:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.enclosureLoading=!0,this.diyId=t,1===a&&this.$set(this.enclosurePagination,"current",1),this.enclosureSearch["page"]=this.enclosurePagination.current,this.enclosureSearch["diy_id"]=t,this.request(n["a"].getWriteFileList,this.enclosureSearch).then((function(t){console.log(t),e.enclosurePagination.total=t.count?t.count:0,e.enclosurePagination.pageSize=t.total_limit?t.total_limit:10,e.enclosureData=t.list,e.enclosureLoading=!1,e.enclosureVisible=!0}))},enclosureHandleCancel:function(){this.enclosureVisible=!1},table_change_enclosure:function(t){var e=this;t.current&&t.current>0&&(e.$set(e.enclosurePagination,"current",t.current),e.enclosureList(this.diyId))},uploadFileSingle:function(){this.uploadFileDialog=!0},handleChange:function(t){var e=this;if("done"===t.file.status)if(console.log(t),1e3===t.file.response.status){var a={diy_id:this.diyId,file_remark:t.file.name,file_type:t.file.type,file_url:t.file.response.data.url};this.request(n["a"].addWriteFile,a).then((function(t){e.enclosureList(e.diyId,1)})),this.$message.success("".concat(t.file.name," 图片上传成功"))}else this.$message.error("".concat(t.file.name," 图片上传失败."));else"error"===t.file.status&&this.$message.error("".concat(t.file.name," 图片上传失败."))},enclosureFileHandleCancel:function(){this.uploadFileDialog=!1},delEnclosure:function(t){var e=this,a={file_id:t};this.request(n["a"].delWriteFileList,a).then((function(t){e.$message.success("删除成功"),e.enclosureList(e.diyId,1)}))},remarkHandleCancel:function(){this.remarkVisible=!1},table_change_remark:function(t){var e=this;t.current&&t.current>0&&(e.$set(e.remarkPagination,"current",t.current),e.remarkList(this.diyId))},remarkList:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.remarkLoading=!0,this.diyId=t,1===a&&this.$set(this.remarkPagination,"current",1),this.remarkSearch["page"]=this.remarkPagination.current,this.remarkSearch["diy_id"]=t,this.request(n["a"].getRemarkList,this.remarkSearch).then((function(t){console.log(t),e.remarkPagination.total=t.count?t.count:0,e.remarkPagination.pageSize=t.total_limit?t.total_limit:10,e.remarkData=t.list,e.remarkLoading=!1,e.remarkVisible=!0}))},addRemarkSingle:function(){this.remarkTitle="添加备注",this.type="add",this.remarkVal="",this.remarkId=0,this.addRemarkListShow=!0},remarkAddHandleCancel:function(){this.addRemarkListShow=!1},trueAddRemark:function(){var t=this,e={diy_id:this.diyId,remark_value:this.remarkVal,remark_id:this.remarkId,type:this.type};this.request(n["a"].addRemark,e).then((function(e){t.remarkList(t.diyId,1),t.addRemarkListShow=!1}))},editRemark:function(t,e){this.remarkTitle="编辑备注",this.type="update",this.remarkId=t,this.remarkVal=e,this.addRemarkListShow=!0},delRemark:function(t){var e=this,a={remark_id:t};this.request(n["a"].delRemark,a).then((function(t){e.$message.success("删除成功"),e.remarkList(e.diyId,1)}))}}},p=u,m=(a("cd55"),a("0c7c")),h=Object(m["a"])(p,i,s,!1,null,null,null);e["default"]=h.exports},e0d6:function(t,e,a){},e28e:function(t,e,a){},f164:function(t,e,a){},f179:function(t,e,a){},ffc8:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-drawer",{attrs:{title:t.title,placement:"right",width:t.widthDrawer,closable:!0,visible:t.visible},on:{close:t.onClose}},[a("div",{staticClass:"flex_row_center"},[a("div",{staticClass:"top_title fix_top_title"},[t._v("房间号/车位号："),a("span",{staticClass:"top_title_color"},[t._v(t._s(t.lastinfo.number))])]),a("div",{staticClass:"top_title"},[t._v("业主名："),a("span",{staticClass:"top_title_color"},[t._v(t._s(t.lastinfo.name))])]),a("div",{staticClass:"top_title"},[t._v("电话："),a("span",{staticClass:"top_title_color"},[t._v(t._s(t.lastinfo.phone))])]),a("div",{staticClass:"top_title"},[t._v("合计："),a("span",{staticClass:"top_title_color"},[t._v(t._s(t.lastinfo.total_money))])])]),t._l(t.OrderData,(function(e,i){return a("div",{key:i,staticClass:"father_box"},[a("div",{staticClass:"top_box flex_row_center flex_row_center_color",on:{click:function(e){return e.stopPropagation(),t.changeyear(i)}}},[a("div",{staticClass:"right_icon"},[t._v(t._s(e.active?"-":"+"))]),a("div",{staticClass:"title"},[t._v(t._s(e.title))]),a("div",{staticClass:"text_1"},[t._v("本年应收金额合计: ￥"+t._s(e.money))])]),t._l(e.childerList,(function(s,n){return e.active?a("div",{key:n,staticClass:"father_box childer_box"},[a("div",{staticClass:"top_box flex_row_center flex_row_center_color",on:{click:function(e){return e.stopPropagation(),t.changemonth(i,n)}}},[a("div",{staticClass:"right_icon"},[t._v(t._s(s.active?"-":"+"))]),a("div",{staticClass:"title_1"},[t._v(t._s(s.title))]),a("div",{staticClass:"text_1"},[t._v("本月应收金额合计: ￥"+t._s(s.money))])]),s.active?a("a-table",{attrs:{columns:t.columns,"data-source":s.childerList,pagination:t.pagination,loading:t.loading},on:{change:t.table_change},scopedSlots:t._u([{key:"action",fn:function(e,i){return a("span",{},[i.my_check_status&&0!=i.my_check_status||1!=t.role_discard?t._e():a("a",{on:{click:function(e){return t.invalidShow(i.order_id)}}},[t._v("作废账单")]),3==i.my_check_status?a("a",{staticStyle:{color:"#808080"}},[t._v("已审核")]):t._e(),2==i.my_check_status?a("a",{on:{click:function(e){return t.needCheckOrder(i)}}},[t._v("需审核")]):t._e(),i.my_check_status>0?a("a-divider",{attrs:{type:"vertical"}}):t._e(),i.my_check_status>0?a("a",{on:{click:function(e){return t.showpopup_detailsList(i)}}},[t._v("审核详情")]):t._e()],1)}}],null,!0)}):t._e()],1):t._e()}))],2)})),a("a-modal",{attrs:{width:500,title:"作废账单",visible:t.visible_invalid,"confirm-loading":t.confirmLoading,maskClosable:!1},on:{ok:t.confirm_invalid,cancel:t.handleCancel1}},[a("div",{staticClass:"modal_box"},[a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("作废原因：")]),a("a-textarea",{staticStyle:{width:"200px",height:"100px"},attrs:{placeholder:"请输入作废原因","auto-size":""},model:{value:t.invalidReasons,callback:function(e){t.invalidReasons=e},expression:"invalidReasons"}})],1),a("br"),a("br"),a("br")])]),a("a-modal",{staticStyle:{"z-index":"1000"},attrs:{width:1e3,title:"详情",visible:t.visible_details,maskClosable:!1,"confirm-loading":t.confirmLoading,footer:null},on:{cancel:t.handle2Cancel}},[0==t.currentIndex?a("div",[a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(e){return t.changeXTab(0)}}},[t._v("订单基本信息")]),t.show_check_detail?a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(e){return t.changeXTab(1)}}},[t._v("作废审核记录")]):t._e()],1):a("div",[a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(e){return t.changeXTab(0)}}},[t._v("订单基本信息")]),t.show_check_detail?a("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(e){return t.changeXTab(1)}}},[t._v("作废审核记录")]):t._e()],1),0==t.currentIndex?a("div",{staticClass:"modal_box_1"},[a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("收费标准名称：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.charge_name))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("收费项目：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.project_name))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("应收费用：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.total_money)+"元")])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("实收费用：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.modify_money)+"元")])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("预计计费开始时间：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.service_start_time))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("预计计费结束时间：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.service_end_time))])]),t.details_data.now_ammeter-t.details_data.last_ammeter>0?a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("使用电量：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.now_ammeter-t.details_data.last_ammeter))])]):t._e(),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("滞纳天数：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.late_payment_day))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("滞纳金收取比例（每天）：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.late_fee_rate))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("滞纳金费用：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.late_payment_money))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("收费标准生效时间：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.charge_valid_time_txt))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("预缴周期：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.service_month_num?t.details_data.service_month_num:"无"))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("预缴优惠：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.diy_content?t.details_data.diy_content:"无"))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("计费模式：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.fees_type_txt?t.details_data.fees_type_txt:"无"))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("账单生成周期设置：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.bill_create_set_txt?t.details_data.bill_create_set_txt:"无"))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("账单欠费模式：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.bill_arrears_set_txt?t.details_data.bill_arrears_set_txt:"无"))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("生成账单模式：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.bill_type_txt?t.details_data.bill_type_txt:"无"))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[t._v("预缴费用：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.prepare_money?t.details_data.prepare_money:"无"))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("账单生成时间：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.add_time_txt))])]),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[t._v("合计欠费：")]),a("div",{staticClass:"text_2"},[t._v(t._s(t.details_data.all_fee)+"元")])])]):t._e(),1==t.currentIndex?a("div",{staticClass:"order_apply_list",staticStyle:{margin:"30px 0px 20px 35px"}},[a("div",[a("p",[a("strong",[t._v("申请详情")])]),a("p",[a("strong",[t._v("申请人：")]),t._v(" "+t._s(t.apply_check_info.apply_name))]),a("p",[a("strong",[t._v("申请时间：")]),t._v(" "+t._s(t.apply_check_info.add_time_str))]),a("p",[a("strong",[t._v("作废原因：")]),t._v(" "+t._s(t.apply_check_info.apply_reason))])]),a("a-timeline",t._l(t.dataCheckDetail,(function(e,i){return a("a-timeline-item",{attrs:{color:e.color_v}},[a("p",[a("strong",[t._v("审批人：")]),t._v(" "+t._s(e.pname))]),a("p",[a("strong",[t._v("审核状态：")]),t._v(" "+t._s(e.status_str))]),a("p",[a("strong",[t._v("审核时间：")]),t._v(" "+t._s(e.apply_time_str))]),a("p",[a("strong",[t._v("审核说明：")]),t._v(" "+t._s(e.bak))])])})),1)],1):t._e()]),a("a-modal",{attrs:{title:"作废审核",width:700,visible:t.checkVisible,maskClosable:!1,confirmLoading:t.confirmLoading},on:{ok:t.checkHandleSubmit,cancel:t.checkHandleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading,height:800}},[a("a-form",[a("a-form-item",{attrs:{label:"审核状态",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-col",{attrs:{span:20}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":1},model:{value:t.check_post.status,callback:function(e){t.$set(t.check_post,"status",e)},expression:"check_post.status"}},[a("a-radio",{attrs:{value:1,name:"status"}},[t._v(" 审核通过 ")]),a("a-radio",{attrs:{value:2,name:"status"}},[t._v(" 审核不通过 ")])],1)],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"审核说明",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-col",{attrs:{span:20}},[a("a-textarea",{ref:"textareax",staticStyle:{width:"250px",height:"120px"},attrs:{placeholder:"请输入审核说明"},model:{value:t.check_post.bak,callback:function(e){t.$set(t.check_post,"bak",e)},expression:"check_post.bak"}})],1),a("a-col",{attrs:{span:6}})],1)],1)],1),a("div",{staticClass:"rule_detail",staticStyle:{"margin-top":"10px"}},[a("a-descriptions",{attrs:{title:"申请作废信息",column:4}},t._l(t.retrunDetail,(function(e,i){return a("a-descriptions-item",{attrs:{span:2,label:e.title}},[t._v(" "+t._s(e.value)+" ")])})),1)],1)],1)],2)},s=[],n=a("1da1"),r=(a("d3b7"),a("96cf"),a("a0e0")),o=a("49420"),l=a.n(o);a("8bbf");l.a.getrem();var c=[{title:"标准名称",dataIndex:"charge_name",key:"charge_name"},{title:"标准生效时间",dataIndex:"charge_valid_time_txt",key:"charge_valid_time_txt"},{title:"项目名称",dataIndex:"name",key:"name"},{title:"所属收费科目",dataIndex:"charge_number_name",key:"charge_number_name"},{title:"应收费用",dataIndex:"total_money",key:"total_money"},{title:"预计计费开始时间",dataIndex:"service_start_time_txt",key:"service_start_time_txt"},{title:"预计计费结束时间",dataIndex:"service_end_time_txt",key:"service_end_time_txt"},{title:"上次度数",dataIndex:"last_ammeter",key:"last_ammeter"},{title:"本次度数",dataIndex:"now_ammeter",key:"now_ammeter"},{title:"审核状态",dataIndex:"check_status_str",key:"check_status_str"},{title:"操作",key:"action",dataIndex:"",scopedSlots:{customRender:"action"}}],d={name:"receivableModal",props:{},data:function(){var t=this;return{title:"应收帐单",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,text:"A dog is a type of domesticated animal.Known for its loyalty and faithfulness,it can be found as a welcome guest in many households across the world.",activeKey:["0"],activeKeys:["0"],expandIconPosition:"left",loading:!1,columns:c,year:"",room_id:"",position_id:"",key_id:"",type:"",OrderData:[],yearindex:"",monthindex:"",month:"",spinning:!1,firstLoad:!1,visible_invalid:!1,invalidReasons:"",order_id:0,confirmLoading:!1,lastIndex:1,lastChildIndex:1,pagination:{current:1,pageSize:10,total:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(t){return"共 ".concat(t," 条")},onShowSizeChange:function(e,a){return t.onTableChange(e,a)},onChange:function(e,a){return t.onTableChange(e,a)}},search:{keyword:"",key_val:"name",key_val1:"paytime",garage_id:"0",pay_type:"0",project_id:"0",page:1},page:1,widthDrawer:1300,lastinfo:{},visible_details:!1,currentIndex:0,apply_check_info:{},dataCheckDetail:[],show_check_detail:!1,details_data:[],checkVisible:!1,retrunDetail:[],check_order_record:{},check_post:{order_id:0,xtype:"order_discard",bak:"",status:1},role_discard:0}},created:function(){window.screen.width<1400?this.widthDrawer=900:window.screen.width<1600&&(this.widthDrawer=1250)},methods:{onClose:function(){var t=this;this.visible=!1,setTimeout((function(){t.form=t.$form.createForm(t)}),500),this.OrderData=[],this.yearindex="",this.monthindex="",this.year="",this.month="",console.log("OrderData-----3",this.OrderData)},changeyear:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("key",t),e.yearindex=t,e.OrderData[e.yearindex].active=!e.OrderData[e.yearindex].active,e.year=e.OrderData[e.yearindex].number,a.next=6,e.getOrderStatisticsByYears();case 6:for(s in i=a.sent,e.OrderData[e.yearindex].childerList=i.list,i.list)e.OrderData[e.yearindex].childerList[s].active=!1;console.log("OrderData-----1",e.OrderData),e.$forceUpdate();case 11:case"end":return a.stop()}}),a)})))()},changemonth:function(t,e){console.log("key--1",t,e),this.yearindex=t,this.monthindex=e,console.log("OrderData----2",this.OrderData),this.OrderData[this.yearindex].childerList[this.monthindex].active=!this.OrderData[this.yearindex].childerList[this.monthindex].active,this.month=this.OrderData[this.yearindex].childerList[this.monthindex].month,console.log("month",this.month),this.receivableOrderInfo(),this.$forceUpdate()},getOrderStatisticsByYears:function(){var t=this;return new Promise((function(e){t.spinning=!0,t.request(r["a"].getOrderStatisticsByYears,{key_id:t.key_id,year:t.year,type:t.type}).then((function(a){e(a),t.spinning=!1}))}))},showpopup_detailsList:function(t){this.visible_details=!0,t.check_apply_id>0?this.show_check_detail=!0:this.show_check_detail=!1,this.getNeedPayOrderInfo(t),this.getCheckauthDetail(t)},getCheckauthDetail:function(t){var e=this;this.loading=!0,this.request(r["a"].getCheckauthDetail,{order_id:t.order_id,check_apply_id:t.check_apply_id,xtype:"order_discard",page:1}).then((function(t){e.dataCheckDetail=t.list,e.loading=!1,e.apply_check_info=t.apply_info}))},changeXTab:function(t){this.currentIndex=t,this.currentIndex},handle2Cancel:function(t){this.visible_details=!1,this.order_id=0,this.currentIndex=0},getNeedPayOrderInfo:function(t){var e=this;this.request(r["a"].getPayOrderInfo,{order_id:t.order_id}).then((function(t){t&&(e.details_data=t)}))},needCheckOrder:function(t){this.checkVisible=!0,this.check_order_record=t;var e=[];e.push({title:"申请时间",value:t.order_apply_info.opt_time_str}),e.push({title:"作废账单金额",value:t.order_apply_info.total_money+"元"}),e.push({title:"作废原因",value:t.order_apply_info.discard_reason}),this.retrunDetail=e},checkHandleCancel:function(){this.checkVisible=!1,this.currentIndex=0,this.check_order_record={},this.retrunDetail=[]},checkHandleSubmit:function(){this.check_post.order_id=this.check_order_record.order_id;var t="作废审核确认",e="您确认审核 通过 作废申请吗？";2==this.check_post.status&&(e="您确认审核 不通过 作废申请吗？");var a=this;this.$confirm({title:t,content:e,onOk:function(){a.request(r["a"].verifyCheckauthApply,a.check_post).then((function(t){console.log("res",t),a.$message.success("操作成功"),a.checkVisible=!1,a.confirmLoading=!1,a.receivableOrderInfo()}))},onCancel:function(){}})},onTableChange:function(t,e){this.pagination.current=t,this.page=t,this.pagination.pageSize=e,this.receivableOrderInfo(),console.log("onTableChange==>",t,e)},table_change:function(t){console.log("e",t),t.current&&t.current>0&&(this.pagination.current=t.current,this.page=t.current,this.receivableOrderInfo())},receivableOrderInfo:function(){var t=this;this.loading=!0,this.request(r["a"].receivableOrderInfo,{source:1,page:this.page,limit:this.pagination.pageSize,key_id:this.key_id,month:this.month,type:this.type}).then((function(e){t.pagination.total=e.count?e.count:0,t.pagination.pageSize=e.total_limit?e.total_limit:10,t.OrderData[t.yearindex].childerList[t.monthindex].childerList=e.list,t.role_discard=void 0!=e.role_discard?e.role_discard:1,console.log("this.OrderData",t.OrderData,e.list),t.loading=!1}))},info:function(t,e,a){var i=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var n,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return console.log("测试传递的id",t,e),i.room_id=t,i.position_id=e,i.order_id=0,i.lastinfo=a,e>0?(i.type="position",i.key_id=e):(i.type="room",i.key_id=t),s.next=8,i.getOrderStatisticsByYears();case 8:for(r in n=s.sent,console.log("OrderData-----5",i.OrderData,n),i.OrderData=n.list,n.list)i.OrderData[r].childerList=new Array,i.OrderData[r].active=!1;console.log("OrderData-----4",i.OrderData),i.visible=!0;case 14:case"end":return s.stop()}}),s)})))()},invalidShow:function(t){this.visible_invalid=!0,this.order_id=t},confirm_invalid:function(){""!=this.invalidReasons?this.discardOrder(this.order_id):this.$message.warning("请填写作废原因")},discardOrder:function(t){var e=this;this.request(r["a"].discardOrder,{discard_reason:this.invalidReasons,order_id:this.order_id}).then((function(t){console.log("+++++++Single",t),t&&(e.$message.success("操作成功"),e.invalidReasons="",e.order_id=0,e.visible_invalid=!1,e.receivableOrderInfo())}))},handleCancel1:function(){this.visible_invalid=!1},handleClick:function(t){t.stopPropagation()}}},_=d,u=(a("5089"),a("0c7c")),p=Object(u["a"])(_,i,s,!1,null,"23037ae8",null);e["default"]=p.exports}}]);