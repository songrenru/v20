(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-912b4914","chunk-91448962","chunk-8043935a","chunk-1053ffb9","chunk-75672a72","chunk-2d0c06af"],{"22c8":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{visible:t.visible,title:t.title,width:"60%"},on:{cancel:t.handleCancel,ok:t.handleOk}},[a("a-form-model",{attrs:{model:t.formData,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"活动名称",required:""}},[a("a-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("a-form-model-item",{attrs:{label:"赠送余额数量"}},[a("a-input",{attrs:{type:"number"},model:{value:t.formData.balance_deno,callback:function(e){t.$set(t.formData,"balance_deno",e)},expression:"formData.balance_deno"}})],1),a("a-form-model-item",{attrs:{label:"赠送积分数量"}},[a("a-input",{attrs:{type:"number"},model:{value:t.formData.score_deno,callback:function(e){t.$set(t.formData,"score_deno",e)},expression:"formData.score_deno"}})],1),a("a-form-model-item",{attrs:{label:"广告地址"}},[a("a-input",{model:{value:t.formData.ad_url,callback:function(e){t.$set(t.formData,"ad_url",e)},expression:"formData.ad_url"}}),a("a-button",{on:{click:t.choosePower}},[t._v("功能库")])],1),a("a-form-model-item",{attrs:{label:"可领取数",required:""}},[a("a-input",{attrs:{type:"number"},model:{value:t.formData.send_num,callback:function(e){t.$set(t.formData,"send_num",e)},expression:"formData.send_num"}})],1),a("a-form-model-item",{attrs:{label:"开始时间",required:""}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{"show-time":"",type:"date",placeholder:"活动开始时间"},on:{change:t.startTimeChange}})],1),a("a-form-model-item",{attrs:{label:"结束时间",required:""}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{"show-time":"",type:"date",placeholder:"活动结束时间"},on:{change:t.endTimeChange}})],1),a("a-form-model-item",{attrs:{label:"状态"}},[a("a-radio-group",{model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[a("a-radio",{attrs:{value:"1"}},[t._v(" 开启 ")]),a("a-radio",{attrs:{value:"0"}},[t._v(" 关闭 ")])],1)],1)],1)],1)],1)},i=[],o=(a("498a"),a("b0c0"),a("7035"));function s(t,e){var a=new FileReader;a.addEventListener("load",(function(){return e(a.result)})),a.readAsDataURL(t)}var r={props:{visible:Boolean,title:String},data:function(){return{labelCol:{span:6},wrapperCol:{span:10},formData:{name:"",balance_deno:0,score_deno:0,ad_url:"",send_num:0,start_time:void 0,end_time:void 0,status:"1"},loading:!1}},methods:{handleOk:function(){var t=this;return""===this.formData.name.trim()?(this.$message.error("活动名称必填！"),!1):this.formData.balance_deno<0?(this.$message.error("赠送余额数量必须大于等于0！"),!1):this.formData.score_deno<0?(this.$message.error("赠送积分数量必须大于等于0！"),!1):this.formData.score_deno<=0&&this.formData.balance_deno<=0?(this.$message.error("赠送积分/余额数量至少有一个大于0！"),!1):this.formData.send_num<=0?(this.$message.error("可领取数必须大于0！"),!1):void 0===this.formData.start_time?(this.$message.error("活动开始时间必填！"),!1):void 0===this.formData.end_time?(this.$message.error("活动结束时间必填！"),!1):void this.request(o["a"].addData,this.formData).then((function(e){t.$message.success("添加成功!",1),setTimeout((function(){t.formData={},t.$emit("handleCancel"),t.$emit("getDataList",!1)}),1e3)}))},handleCancel:function(){this.$emit("handleCancel")},handleUploadChange:function(t){var e=this;if("uploading"!==t.file.status){if("done"===t.file.status&&1e3===t.file.response.status){var a=t.file.response.data;this.$set(this.formData,"image",a),s(t.file.originFileObj,(function(t){e.image=t,e.loading=!1}))}}else this.loading=!0},startTimeChange:function(t,e){this.$set(this.formData,"start_time",e)},endTimeChange:function(t,e){this.$set(this.formData,"end_time",e)},choosePower:function(){var t=this;this.$LinkBases({source:"platform",type:this.bannerLinkType,handleOkBtn:function(e){t.$set(t.formData,"ad_url",e.url)}})}}},l=r,c=a("2877"),d=Object(c["a"])(l,n,i,!1,null,null,null);e["default"]=d.exports},"301f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{visible:t.visible,title:t.title,width:"60%"},on:{cancel:t.handleCancel,ok:t.handleOk}},[a("div",{staticStyle:{"margin-top":"20px",padding:"20px","background-color":"#fff"}},[a("a-form-model",{attrs:{layout:"inline",model:t.searchForm}},[a("a-form-model-item",{attrs:{label:"搜索"}},[a("a-select",{staticStyle:{width:"115px"},model:{value:t.searchForm.type,callback:function(e){t.$set(t.searchForm,"type",e)},expression:"searchForm.type"}},[a("a-select-option",{attrs:{value:0}},[t._v("全部")]),a("a-select-option",{attrs:{value:1}},[t._v("用户昵称")]),a("a-select-option",{attrs:{value:2}},[t._v("用户手机号")])],1)],1),a("a-form-model-item",[a("a-input",{attrs:{placeholder:"输入用户昵称/手机号"},model:{value:t.searchForm.keyword,callback:function(e){t.$set(t.searchForm,"keyword",e)},expression:"searchForm.keyword"}})],1),a("a-form-model-item",{attrs:{label:"领取日期"}},[a("a-range-picker",{attrs:{value:t.dateRange},on:{change:t.timeChange}})],1),a("a-form-model-item",[a("a-button",{staticClass:"ml-10",attrs:{type:"primary"},on:{click:function(e){return t.submitForm(!0)}}},[t._v("搜索")]),a("a-button",{staticClass:"ml-10",on:{click:function(e){return t.resetForm()}}},[t._v("重置")]),a("a-button",{staticClass:"ml-10",on:{click:function(e){return t.exportForm()}}},[t._v("导出")])],1)],1),a("a-table",{staticStyle:{"margin-top":"10px"},attrs:{rowKey:"id",columns:t.columns,"data-source":t.datalist,pagination:t.pagination,bordered:""}})],1)])},i=[],o=a("5530"),s=a("7035"),r=[{title:"ID",dataIndex:"id",key:"id"},{title:"二维码标识",dataIndex:"ewm_no",key:"ewm_no"},{title:"昵称",dataIndex:"nickname",key:"nickname"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"当前积分",dataIndex:"score_count",key:"score_count"},{title:"当前余额",dataIndex:"now_money",key:"now_money"},{title:"领取时间",dataIndex:"get_time",key:"get_time"}],l={props:{visible:Boolean,title:String,scanId:null},data:function(){return{datalist:[],dateRange:[],columns:r,searchForm:{type:0,keyword:"",date:[]},pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(t){return"共 ".concat(t," 条记录")}}}},watch:{scanId:{handler:function(t,e){this.getRecordList(!1)},immediate:!0}},methods:{getRecordList:function(t){var e=this,a=Object(o["a"])({},this.searchForm);!0===t?(a.page=1,this.$set(this.pagination,"current",1)):(a.page=this.pagination.current,this.$set(this.pagination,"current",this.pagination.current)),a.pageSize=this.pagination.pageSize,a.send_id=this.scanId,this.request(s["a"].recordList,a).then((function(t){e.datalist=t.data,e.$set(e.pagination,"total",t.total)}))},submitForm:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getRecordList(t)},resetForm:function(){this.$set(this,"searchForm",{type:0,keyword:"",date:[]}),this.$set(this.pagination,"current",1),this.dateRange=[],this.getRecordList()},exportForm:function(){var t=this.searchForm;t.send_id=this.scanId,this.request(s["a"].exportRecordList,t).then((function(t){t.file_url&&window.open(t.file_url)}))},onPageChange:function(t,e){this.$set(this.pagination,"current",t),this.submitForm()},onPageSizeChange:function(t,e){this.$set(this.pagination,"pageSize",e),this.submitForm()},timeChange:function(t,e){this.dateRange=t,this.$set(this.searchForm,"date",e)},handleOk:function(){this.$emit("handleCancel")},handleCancel:function(){this.$emit("handleCancel")}}},c=l,d=a("2877"),m=Object(d["a"])(c,n,i,!1,null,null,null);e["default"]=m.exports},4261:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"primary"}},[t._v(" Open the message box ")])},i=[],o={downloadExportFile:"/common/common.export/downloadExportFile"},s=o,r="updatable",l={props:{exportUrl:"",queryParam:{}},data:function(){return{file_date:"",file_url:""}},mounted:function(){},methods:{exports:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"加载中,请耐心等待,数量越多时间越长。";this.request(this.exportUrl,this.queryParam).then((function(a){t.$message.loading({content:e,key:r,duration:0}),console.log("添加导出计划任务成功"),t.file_url=s.downloadExportFile+"?id="+a.export_id,t.file_date=a,t.CheckStatus()}))},CheckStatus:function(){var t=this;this.request(this.file_url,{id:this.file_date.export_id}).then((function(e){0==e.error?(t.$message.success({content:"下载成功!",key:r,duration:2}),location.href=e.url):setTimeout((function(){t.CheckStatus(),console.log("重复请求")}),1e3)}))}}},c=l,d=a("2877"),m=Object(d["a"])(c,n,i,!1,null,"dd2f8128",null);e["default"]=m.exports},7035:function(t,e,a){"use strict";var n={index:"/scan/platform.ScanSend/index",editData:"/scan/platform.ScanSend/edit",addData:"/scan/platform.ScanSend/add",setStatus:"/scan/platform.ScanSend/setStatus",recordList:"/scan/platform.ScanSend/getRecordList",setConfig:"/scan/platform.ScanSend/setConfig",exportEwm:"/scan/platform.ScanSend/exportEwm",exportRecordList:"/scan/platform.ScanSend/exportRecordList",recordAllList:"/scan/platform.ScanSend/getAllRecordList",singleDelete:"/scan/platform.ScanSend/singleDelete",multipleDelete:"/scan/platform.ScanSend/multipleDelete"};e["a"]=n},d852:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"20px",padding:"20px","background-color":"#fff"}},[a("a-form-model",{attrs:{layout:"inline",model:t.searchForm}},[a("a-form-model-item",{attrs:{label:"活动名称"}},[a("a-input",{attrs:{placeholder:"活动名称"},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}})],1),a("a-form-model-item",{attrs:{label:"状态"}},[a("a-select",{staticStyle:{width:"115px"},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[a("a-select-option",{attrs:{value:-1}},[t._v("全部")]),a("a-select-option",{attrs:{value:1}},[t._v("开启")]),a("a-select-option",{attrs:{value:0}},[t._v("关闭")])],1)],1),a("a-form-model-item",[a("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(e){return t.submitForm(!0)}}},[t._v("搜索")]),a("a-button",{staticClass:"ml-20",on:{click:function(e){return t.resetForm()}}},[t._v("重置")]),a("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("添加")])],1),a("a-form-model-item",{staticStyle:{float:"right"}},[a("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:t.setConfig}},[t._v("配置提示语")])],1)],1),a("a-table",{attrs:{rowKey:"id",columns:t.columns,"data-source":t.datalist,pagination:t.pagination,bordered:""},scopedSlots:t._u([{key:"send_num",fn:function(e,n){return a("span",{},[a("span",0===e?[t._v("不限制")]:[t._v(t._s(e))])])}},{key:"status",fn:function(e,n){return a("span",{},[a("a-popconfirm",{attrs:{title:"确定更改该活动状态吗","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.confirm(n.id,n.status)}}},[a("a-switch",{attrs:{"checked-children":"开启","un-checked-children":"关闭",checked:1===e}})],1)],1)}},{key:"action",fn:function(e,n){return a("span",{},[a("a",{on:{click:function(){return t.handleEdit(n.id)}}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(){return t.exportEwm(n.id)}}},[t._v("导出二维码")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(){return t.handleRecord(n.id)}}},[t._v("领取记录")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(){return t.handleRecordList(n.id)}}},[t._v("卡密列表")])],1)}}])}),"addScan"===t.currentBtn.props?a("addScan",{attrs:{visible:t.addVisible,title:t.currentBtn.title},on:{getDataList:t.getDataList,handleCancel:function(e){t.addVisible=!1}}}):"editScan"===t.currentBtn.props?a("editScan",{attrs:{visible:t.editVisible,title:t.currentBtn.title,formData:t.currentBtn.data},on:{getDataList:t.getDataList,handleCancel:function(e){t.editVisible=!1}}}):"recordScan"===t.currentBtn.props?a("recordScan",{attrs:{visible:t.recordVisible,title:t.currentBtn.title,scanId:t.currentBtn.id},on:{getDataList:t.getDataList,handleCancel:function(e){t.recordVisible=!1}}}):"recordListScan"===t.currentBtn.props?a("recordListScan",{ref:"recordListScan",attrs:{visible:t.recordListVisible,title:t.currentBtn.title,scanId:t.currentBtn.id},on:{getDataList:t.getDataList,handleCancel:function(e){t.recordListVisible=!1}}}):t._e(),a("a-modal",{attrs:{title:"下载二维码",visible:t.ewmVisible,width:"350px"},on:{cancel:t.ewmCancel}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.ewmCancel}},[t._v(" 返回 ")]),a("a-button",{key:"submit",attrs:{type:"primary"}},[a("a",{attrs:{href:t.ewm,download:t.ewmName}},[t._v("下载")])])],1),a("img",{staticStyle:{width:"120px",height:"120px"},attrs:{src:t.ewm,alt:"image"}})],2),a("a-modal",{attrs:{title:"配置提示语",visible:t.setVisible,width:"700px"},on:{cancel:t.setCancel}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.setCancel}},[t._v(" 取消 ")]),a("a-button",{key:"submit",attrs:{type:"primary"},on:{click:t.setOk}},[t._v(" 确定 ")])],1),a("a-form-model",{attrs:{layout:"horizontal",model:t.configForm,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"扫码领金额描述"}},[a("a-input",{attrs:{placeholder:"扫码领金额描述"},model:{value:t.configForm.scan_money_desc,callback:function(e){t.$set(t.configForm,"scan_money_desc",e)},expression:"configForm.scan_money_desc"}}),a("span",[t._v("备注：实际金额以“{金额}”代替")])],1),a("a-form-model-item",{attrs:{label:"扫码领积分描述"}},[a("a-input",{attrs:{placeholder:"扫码领积分描述"},model:{value:t.configForm.scan_score_desc,callback:function(e){t.$set(t.configForm,"scan_score_desc",e)},expression:"configForm.scan_score_desc"}}),a("span",[t._v("备注：实际积分以“{积分}”代替")])],1),a("a-form-model-item",{attrs:{label:"弹窗倒计时/秒"}},[a("a-input",{attrs:{placeholder:"弹窗倒计时/秒",type:"number"},model:{value:t.configForm.scan_timeout,callback:function(e){t.$set(t.configForm,"scan_timeout",e)},expression:"configForm.scan_timeout"}}),a("span",[t._v("弹窗倒计时/秒")])],1)],1)],2),a("export-add",{ref:"ExportAddModal",attrs:{exportUrl:t.exportUrl,queryParam:t.exportId}})],1)},i=[],o=a("5530"),s=(a("d3b7"),a("25f0"),a("7035")),r=a("22c8"),l=a("f6cd"),c=a("301f"),d=a("e011"),m=a("c1df"),u=a.n(m),h=a("4261"),f=[{title:"ID",dataIndex:"id",key:"id"},{title:"名称",dataIndex:"name",key:"name"},{title:"赠送余额数量",dataIndex:"balance_deno",key:"balance_deno"},{title:"赠送积分数量",dataIndex:"score_deno",key:"score_deno"},{title:"可领取数",dataIndex:"send_num",scopedSlots:{customRender:"send_num"},key:"send_num"},{title:"已领取数",dataIndex:"get_num",key:"get_num"},{title:"开始时间",dataIndex:"start_time",key:"start_time"},{title:"结束时间",dataIndex:"end_time",key:"end_time"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"},key:"status"},{title:"创建时间",dataIndex:"create_time",key:"create_time"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],p={components:{addScan:r["default"],editScan:l["default"],recordScan:c["default"],ExportAdd:h["default"],recordListScan:d["default"]},data:function(){return{labelCol:{span:4},wrapperCol:{span:14},datalist:[],columns:f,addVisible:!1,editVisible:!1,recordVisible:!1,recordListVisible:!1,currentBtn:"",ewmVisible:!1,setVisible:!1,ewm:"",ewmName:"",configForm:{scan_money_desc:"",scan_score_desc:"",scan_timeout:"3"},searchForm:{name:"",status:-1},pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(t){return"共 ".concat(t," 条记录")}},exportUrl:s["a"].exportEwm,exportId:{id:0}}},created:function(){this.getDataList(!1)},methods:{moment:u.a,getDataList:function(t){var e=this,a=Object(o["a"])({},this.searchForm);!0===t?(a.page=1,this.$set(this.pagination,"current",1)):(a.page=this.pagination.current,this.$set(this.pagination,"current",this.pagination.current)),a.pageSize=this.pagination.pageSize,this.request(s["a"].index,a).then((function(t){e.datalist=t.data,e.$set(e.pagination,"total",t.total)}))},submitForm:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getDataList(t)},resetForm:function(){this.$set(this,"searchForm",{name:"",status:-1}),this.$set(this.pagination,"current",1),this.getDataList()},onPageChange:function(t,e){this.$set(this.pagination,"current",t),this.submitForm()},onPageSizeChange:function(t,e){this.$set(this.pagination,"pageSize",e),this.submitForm()},onChange:function(t,e){var a=this,n={id:t,status:0};0===e&&(n.status=1),this.request(s["a"].setStatus,n).then((function(t){a.$message.success("操作成功!"),a.getDataList()}))},handleAdd:function(){this.currentBtn={props:"addScan",title:"添加活动"},this.addVisible=!0},handleEdit:function(t){var e=this;this.request(s["a"].editData,{id:t},"GET").then((function(t){t.status=t.status.toString(),e.currentBtn={props:"editScan",title:"编辑活动",data:t},e.editVisible=!0}))},handleRecord:function(t){this.currentBtn={props:"recordScan",title:"领取记录",id:t},this.recordVisible=!0},handleRecordList:function(t){var e=this;this.currentBtn={props:"recordListScan",title:"卡密列表",id:t},this.recordListVisible=!0,this.$nextTick((function(){e.$refs.recordListScan.setCurrent()}))},confirm:function(t,e){this.onChange(t,e)},showEwm:function(t,e){this.ewm=t,this.ewmName=e,this.ewmVisible=!0},ewmCancel:function(){this.ewmVisible=!1},setConfig:function(){var t=this;this.request(s["a"].setConfig,{},"GET").then((function(e){t.$set(t.configForm,"scan_money_desc",e.scan_money_desc),t.$set(t.configForm,"scan_score_desc",e.scan_score_desc),t.$set(t.configForm,"scan_timeout",e.scan_timeout)})),this.setVisible=!0},setCancel:function(){this.setVisible=!1},setOk:function(){this.submitConfig()},submitConfig:function(){var t=this;if(this.configForm.scan_timeout<0)return this.$message.error("弹窗倒计时不能小于0！"),!1;this.request(s["a"].setConfig,this.configForm,"POST").then((function(e){t.$message.success("设置成功!",1),setTimeout((function(){t.configForm={},t.setVisible=!1,t.getDataList()}),1e3)}))},exportEwm:function(t){this.$set(this.exportId,"id",t),this.$refs.ExportAddModal.exports()}}},g=p,_=a("2877"),b=Object(_["a"])(g,n,i,!1,null,null,null);e["default"]=b.exports},e011:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{visible:t.visible,title:t.title,width:"60%"},on:{cancel:t.handleCancel,ok:t.handleOk}},[a("div",{staticStyle:{"margin-top":"20px",padding:"20px","background-color":"#fff"}},[a("a-form-model",{attrs:{layout:"inline",model:t.searchForm}},[a("a-form-model-item",{attrs:{label:"搜索"}},[a("a-select",{staticStyle:{width:"115px"},model:{value:t.searchForm.type,callback:function(e){t.$set(t.searchForm,"type",e)},expression:"searchForm.type"}},[a("a-select-option",{attrs:{value:0}},[t._v("全部")]),a("a-select-option",{attrs:{value:1}},[t._v("用户昵称")]),a("a-select-option",{attrs:{value:2}},[t._v("用户手机号")])],1)],1),a("a-form-model-item",[a("a-input",{attrs:{placeholder:"输入用户昵称/手机号"},model:{value:t.searchForm.keyword,callback:function(e){t.$set(t.searchForm,"keyword",e)},expression:"searchForm.keyword"}})],1),a("a-form-model-item",{attrs:{label:"领取日期"}},[a("a-range-picker",{attrs:{value:t.dateRange},on:{change:t.timeChange}})],1),a("a-form-model-item",[a("a-button",{staticClass:"ml-10",attrs:{type:"primary"},on:{click:function(e){return t.submitForm(!0)}}},[t._v("搜索")]),a("a-button",{staticClass:"ml-10",on:{click:function(e){return t.resetForm()}}},[t._v("重置")]),a("a-button",{staticClass:"ml-10",on:{click:function(e){return t.exportForm()}}},[t._v("导出")])],1)],1),a("a-row",{staticClass:"mt-20 mb-20"},[a("a-col",[a("a-button",{attrs:{type:"primary",disabled:!t.selectedRowKeys.length},on:{click:function(e){return t.multipleDelete()}}},[t._v("批量删除")])],1)],1),a("a-table",{staticStyle:{"margin-top":"10px"},attrs:{rowKey:"id",columns:t.columns,"data-source":t.datalist,pagination:t.pagination,bordered:"",rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onParkingChange,getCheckboxProps:t.getCheckboxProps}},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[a("a",{on:{click:function(){return t.singleDelete(n.id)}}},[t._v(t._s(n.uid>0?"":"删除"))])])}}])})],1)])},i=[],o=a("5530"),s=a("7035"),r=[{title:"ID",dataIndex:"id",key:"id"},{title:"二维码标识",dataIndex:"ewm_no",key:"ewm_no"},{title:"是否领取",dataIndex:"get_text",key:"get_text"},{title:"昵称",dataIndex:"nickname",key:"nickname"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"当前积分",dataIndex:"score_count",key:"score_count"},{title:"当前余额",dataIndex:"now_money",key:"now_money"},{title:"领取时间",dataIndex:"get_time",key:"get_time"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],l={props:{visible:Boolean,title:String,scanId:null},data:function(){return{datalist:[],dateRange:[],columns:r,searchForm:{type:0,keyword:"",date:[]},pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(t){return"共 ".concat(t," 条记录")}},selectedRowKeys:[]}},computed:{getCheckboxProps:function(){return function(t){return{props:{disabled:t.uid>0}}}}},watch:{scanId:{handler:function(t,e){this.getRecordList(!1)},immediate:!0}},methods:{onParkingChange:function(t){this.selectedRowKeys=t},setCurrent:function(){this.getRecordList(!0)},getRecordList:function(t){var e=this,a=Object(o["a"])({},this.searchForm);!0===t?(a.page=1,this.$set(this.pagination,"current",1)):(a.page=this.pagination.current,this.$set(this.pagination,"current",this.pagination.current)),a.pageSize=this.pagination.pageSize,a.send_id=this.scanId,this.request(s["a"].recordAllList,a).then((function(t){e.datalist=t.data,e.$set(e.pagination,"total",t.total)}))},submitForm:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getRecordList(t)},resetForm:function(){this.$set(this,"searchForm",{type:0,keyword:"",date:[]}),this.$set(this.pagination,"current",1),this.dateRange=[],this.getRecordList()},exportForm:function(){var t=this.searchForm;t.send_id=this.scanId,t.is_all=1,this.request(s["a"].exportRecordList,t).then((function(t){t.file_url&&window.open(t.file_url)}))},singleDelete:function(t){var e=this,a={id:t};this.$confirm({title:this.L("是否删除该条数据?"),centered:!0,onOk:function(){e.request(s["a"].singleDelete,a).then((function(t){e.$message.success("操作成功!"),e.getRecordList()}))},onCancel:function(){}})},multipleDelete:function(){var t=this,e={ids:this.selectedRowKeys};this.$confirm({title:this.L("是否删除已选数据?"),centered:!0,onOk:function(){t.request(s["a"].multipleDelete,e).then((function(e){t.$message.success("操作成功!"),t.getRecordList()}))},onCancel:function(){}})},onPageChange:function(t,e){this.$set(this.pagination,"current",t),this.submitForm()},onPageSizeChange:function(t,e){this.$set(this.pagination,"pageSize",e),this.submitForm()},timeChange:function(t,e){this.dateRange=t,this.$set(this.searchForm,"date",e)},handleOk:function(){this.$emit("handleCancel")},handleCancel:function(){this.$emit("handleCancel")}}},c=l,d=a("2877"),m=Object(d["a"])(c,n,i,!1,null,null,null);e["default"]=m.exports},f6cd:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{visible:t.visible,title:t.title,width:"60%"},on:{cancel:t.handleCancel,ok:t.handleOk}},[a("a-form-model",{attrs:{model:t.formData,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"活动名称",required:""}},[a("a-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("a-form-model-item",{attrs:{label:"赠送余额数量"}},[a("a-input",{attrs:{type:"number"},model:{value:t.formData.balance_deno,callback:function(e){t.$set(t.formData,"balance_deno",e)},expression:"formData.balance_deno"}})],1),a("a-form-model-item",{attrs:{label:"赠送积分数量"}},[a("a-input",{attrs:{type:"number"},model:{value:t.formData.score_deno,callback:function(e){t.$set(t.formData,"score_deno",e)},expression:"formData.score_deno"}})],1),a("a-form-model-item",{attrs:{label:"广告地址"}},[a("a-input",{model:{value:t.formData.ad_url,callback:function(e){t.$set(t.formData,"ad_url",e)},expression:"formData.ad_url"}}),a("a-button",{on:{click:t.choosePower}},[t._v("功能库")])],1),a("a-form-model-item",{attrs:{label:"可领取数"}},[a("a-radio-group",{model:{value:t.formData.num_type,callback:function(e){t.$set(t.formData,"num_type",e)},expression:"formData.num_type"}},[a("a-radio",{attrs:{value:"1"}},[t._v(" 增加 ")]),a("a-radio",{attrs:{value:"2"}},[t._v(" 减少 ")])],1),a("a-input",{staticStyle:{width:"150px","margin-left":"50px"},attrs:{type:"number"},model:{value:t.formData.num,callback:function(e){t.$set(t.formData,"num",e)},expression:"formData.num"}}),a("br"),a("span",[t._v("备注：剩余可领取数"+t._s(t.formData.send_num-t.formData.get_num))])],1),a("a-form-model-item",{attrs:{label:"开始时间",required:""}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{"default-value":t.moment(t.formData.start_time),"show-time":"",type:"date",placeholder:"活动开始时间"},on:{change:t.startTimeChange}})],1),a("a-form-model-item",{attrs:{label:"结束时间",required:""}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{"default-value":t.moment(t.formData.end_time),"show-time":"",type:"date",placeholder:"活动结束时间"},on:{change:t.endTimeChange}})],1),a("a-form-model-item",{attrs:{label:"状态"}},[a("a-radio-group",{model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[a("a-radio",{attrs:{value:"1"}},[t._v(" 开启 ")]),a("a-radio",{attrs:{value:"0"}},[t._v(" 关闭 ")])],1)],1)],1)],1)],1)},i=[],o=(a("d3b7"),a("25f0"),a("498a"),a("b0c0"),a("7035")),s=a("c1df"),r=a.n(s);function l(t,e){var a=new FileReader;a.addEventListener("load",(function(){return e(a.result)})),a.readAsDataURL(t)}var c={props:{visible:Boolean,title:String,formData:Object},data:function(){return{labelCol:{span:6},wrapperCol:{span:10},loading:!1}},created:function(){this.$set(this.formData,"num",0),this.$set(this.formData,"num_type","1"),this.formData.status=this.formData.status.toString()},methods:{moment:r.a,handleOk:function(){var t=this;if(console.log(this.formData),""===this.formData.name.trim())return this.$message.error("活动名称必填！"),!1;if(this.formData.balance_deno<0)return this.$message.error("赠送余额数量必须大于等于0！"),!1;if(this.formData.score_deno<0)return this.$message.error("赠送积分数量必须大于等于0！"),!1;if(this.formData.score_deno<=0&&this.formData.balance_deno<=0)return this.$message.error("赠送积分/余额数量至少有一个大于0！"),!1;if(void 0===this.formData.start_time)return this.$message.error("活动开始时间必填！"),!1;if(void 0===this.formData.end_time)return this.$message.error("活动结束时间必填！"),!1;if(0!==this.formData.num){if(this.formData.num<0)return this.$message.error("设置可领取数不可小于0！"),!1;if(2===this.formData.num_type&&this.formData.send_num-this.formData.get_num<this.formData.num)return this.$message.error("剩余可领取数不足！"),!1}this.request(o["a"].editData,this.formData).then((function(e){t.$message.success("编辑成功!",1),setTimeout((function(){t.formData={},t.$emit("handleCancel"),t.$emit("getDataList",!1)}),1e3)}))},handleCancel:function(){this.$emit("handleCancel")},handleUploadChange:function(t){var e=this;if("uploading"!==t.file.status){if("done"===t.file.status&&1e3===t.file.response.status){var a=t.file.response.data;this.$set(this.formData,"image",a),l(t.file.originFileObj,(function(t){e.image=t,e.loading=!1}))}}else this.loading=!0},startTimeChange:function(t,e){this.$set(this.formData,"start_time",e)},endTimeChange:function(t,e){this.$set(this.formData,"end_time",e)},choosePower:function(){var t=this;this.$LinkBases({source:"platform",type:this.bannerLinkType,handleOkBtn:function(e){t.$set(t.formData,"ad_url",e.url)}})}}},d=c,m=a("2877"),u=Object(m["a"])(d,n,i,!1,null,null,null);e["default"]=u.exports}}]);