(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39882d9a"],{"1a2a":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Nzg0RTdBMTdFMUZGMTFFQTk5NzhEMjBEMTg4NTNFNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Nzg0RTdBMThFMUZGMTFFQTk5NzhEMjBEMTg4NTNFNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3ODRFN0ExNUUxRkYxMUVBOTk3OEQyMEQxODg1M0U0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3ODRFN0ExNkUxRkYxMUVBOTk3OEQyMEQxODg1M0U0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pj7NP+UAAADYSURBVHja7NqxCYNAGMXxTxFsjpDOCUJWcICQmQL2kmkyQHCAjCDERicImtIi79A6RYjCyf/BO2yE7+d53UVN05hyUK/qSd1ZGOnVSr2oz0iQox4e6t7CzEvNYy1lwAibZy/j+XcKPec4oDPxLS62jQQIECBAgAABAgQIECBAgACZkvz6YpZl5pz7+0DjOFrbtuvtSJqmy3zZJFl3R7qu44wAAQIECBAgQIAAAQIECBAgy0L6DTjeHlJtAHL3kMKmq0Khxs9eeEit5upNHQICDPPMfvb6I8AAhGEh4Rh6+BMAAAAASUVORK5CYII="},"3a0b":function(o,e,t){"use strict";t("7cb2")},"465a":function(o,e,t){"use strict";t.r(e);var i=function(){var o=this,e=o._self._c;return e("div",{staticClass:"packages-room-buy-box"},[e("div",{staticClass:"header-box"},[e("a-table",{attrs:{columns:o.package_columns,"data-source":o.roomList,pagination:!1},scopedSlots:o._u([{key:"pay_period",fn:function(i,r){return e("span",{},[e("a-row",{attrs:{type:"flex"}},[e("a-col",{attrs:{span:10}},[e("a-row",{attrs:{type:"flex"}},[e("a-col",{attrs:{span:5}},[e("div",{staticStyle:{width:"100%","text-align":"center"}},[e("img",i&&i>1?{attrs:{src:t("eaa0")},on:{click:function(e){return o.munus_period(r)}}}:{attrs:{src:t("1a2a")}})])]),e("a-col",{attrs:{span:2}}),e("a-col",{attrs:{span:10}},[e("a-input",{staticStyle:{width:"100%","text-align":"center"},attrs:{size:"small",value:i}})],1),e("a-col",{attrs:{span:2}}),e("a-col",{attrs:{span:5}},[e("div",{staticStyle:{width:"100%","text-align":"center"}},[e("img",{attrs:{src:t("f1cd")},on:{click:function(e){return o.plus_period(r)}}})])])],1)],1)],1)],1)}}])})],1),e("div",{staticClass:"pay-info-box-order"},[e("div",{staticClass:"packages-end-time"},[o._v(" 您的功能套餐将于"+o._s(o.room_info.room_end_time)+"到期，所以您购买的房间套餐时间为"+o._s(o.room_info.room_end_day)+"天 ")]),e("div",{staticClass:"total-money-info"},[o._v(" 订单总额："),e("span",{staticClass:"money-tip"},[o._v("￥"+o._s(o.room_info.total_money))])]),e("div",{staticClass:"pay-btn"},[e("a-button",{attrs:{type:"primary"},on:{click:function(e){return o.goPay()}}},[o._v("去付款")])],1)]),e("a-modal",{attrs:{title:"请进行扫码支付",visible:o.visible,maskClosable:!1},on:{ok:o.handleOk,cancel:o.handleCancel,onCancel:o.handleCancel}},[e("div",{staticStyle:{width:"100%","text-align":"center"}},[e("img",{attrs:{src:o.pay_qrcode}})])])],1)},r=[],a=t("4f2c"),n=[{title:"套餐标题",dataIndex:"room_title",key:"room_title"},{title:"所含房间",dataIndex:"room_count",key:"room_count"},{title:"价格（元/年）",dataIndex:"room_price",key:"room_price"},{title:"购买数量",dataIndex:"pay_period",key:"pay_period",scopedSlots:{customRender:"pay_period"}},{title:"总价（元）",dataIndex:"pay_money",key:"pay_money"}],m={name:"PackagesRoomBuy",data:function(){return{package_data:[{package_title:"套餐一",room_num:"100",package_price:"100",num:"1",total_money:"100"}],roomList:[],package_info:{},package_columns:n,title:"套餐续费",confirmLoading:!1,buy_periods:1,type:1,form:this.$form.createForm(this),isDrag:!1,isClick:!1,package_id:0,order_id:0,choose_room:[],isClickChoose:!0,pay_type:"",compute_type:1,order_info:{},pay_type_info:[],room_info:"",pay_qrcode:"",visible:!1,is_loop:!1,loadPost:!1}},activated:function(){var o=this.$route.query;this.room=JSON.parse(o.room),console.log("query",o),console.log("room",this.room),this.getBuyRoom()},mounted:function(){var o=this.$route.query;this.room=JSON.parse(o.room),console.log("query",o),console.log("room",this.room),this.getBuyRoom()},methods:{getBuyRoom:function(){var o=this;if(this.loadPost)return!1;this.loadPost=!0;var e={};e["room"]=this.room,this.request(a["a"].propertyGetBuyRoom,e).then((function(e){o.loadPost=!1,console.log("res",e),o.room_info=e,e.roomList&&(o.roomList=e.roomList)}))},getBuyRoomTotal:function(){var o=this,e={},t={},i=[],r=JSON.parse(JSON.stringify(this.roomList));for(var n in r)r[n]&&r[n]["pay_period"]>0&&(t={},t["room_id"]=r[n]["room_id"],t["room_num"]=r[n]["pay_period"],i.push(t));e["room"]=i,this.request(a["a"].propertyGetBuyRoom,e).then((function(e){console.log("res",e),o.room_info=e,e.roomList&&(o.roomList=e.roomList)}))},handleSubmit:function(){var o=this;this.confirmLoading=!0;var e={},t=[],i=JSON.parse(JSON.stringify(this.roomList));console.log("roomList",i);var r={};for(var n in i)i[n]&&i[n]["pay_period"]>0&&(r={},r["room_id"]=i[n]["room_id"],r["room_num"]=i[n]["pay_period"],t.push(r));e["room"]=t;var m=t.length;console.log("propertyCreateOrder-len",m),console.log("propertyCreateOrder-param",e),m>0?this.request(a["a"].propertyCreateRoomOrder,e).then((function(e){console.log("propertyCreateOrder",e),o.order_info=e,o.confirmLoading=!1,e.order_id>0&&o.getCreateQrCode(e.order_id)})):(this.confirmLoading=!1,this.order_info.total_money=this.package_info.total_money)},handlemouse:function(o){var e,t,i=this,r=document.getElementsByClassName("buy-parent")[0],a=document.getElementsByClassName("buy-divs")[0],n=document.getElementsByClassName("buy-box")[0],m=a.offsetWidth-r.offsetWidth;if(m>0)this.isClick=!0;else if(console.log(a),console.log("buy-child",r.offsetWidth),console.log("buy-parent",a.offsetWidth),console.log("buy-box",n.offsetWidth),!(n.offsetWidth>r.offsetWidth)){e=(new Date).getTime();var p=o.clientX-r.offsetLeft;this.isDrag=!0,a.onmousemove=function(o){if(i.isDrag){var e=o.clientX,t=e-p;r.style.left=t+"px"}},a.onmouseup=function(o){t=(new Date).getTime();var r=t-e;i.isDrag=!1,i.isClick=r<150}}},leave:function(){this.isDrag=!1},clickDoSome:function(o){this.isClick&&console.log("是否在单击",1)},getCreateQrCode:function(o){var e=this,t={};t["order_id"]=o,this.request(a["a"].propertyRoomCreateQrCode,t).then((function(t){console.log("getCreateQrCode",t),t.qrcode&&(e.pay_qrcode=t.qrcode,e.visible=!0,e.is_loop=!0,e.setTimeoutPayInfo(o))}))},setTimeoutPayInfo:function(o){var e=this;setTimeout((function(){e.getQueryOrderPayStatus(o)}),5e3)},getQueryOrderPayStatus:function(o){var e=this,t={};t["order_id"]=o,this.request(a["a"].propertyRoomQueryOrderPayStatus,t).then((function(t){console.log("getQueryOrderPayStatus",t),t.status>0?(e.$notification.success({message:"支付成功！"}),setTimeout((function(){e.visible=!1}),1e3)):e.is_loop&&e.setTimeoutPayInfo(o)}))},handleOk:function(o){this.visible=!1,this.is_loop=!1},handleCancel:function(o){console.log("Clicked cancel button"),this.visible=!1,this.is_loop=!1},goPay:function(){this.handleSubmit()},munus_period:function(o){var e=this;this.isClickChoose=!1;var t=JSON.parse(JSON.stringify(this.roomList));for(var i in console.log("munus_period+",o),t)t[i]&&o["room_id"]==t[i]["room_id"]&&t[i]["pay_period"]>1&&(t[i]["pay_period"]=t[i]["pay_period"]-1);this.roomList=t,console.log("munus_period-roomList",t),this.$forceUpdate,this.getBuyRoomTotal(),setTimeout((function(){e.isClickChoose=!0}),500)},plus_period:function(o){var e=this;this.isClickChoose=!1;var t=JSON.parse(JSON.stringify(this.roomList));for(var i in console.log("plus_period-",o),t)t[i]&&o["room_id"]==t[i]["room_id"]&&(t[i]["pay_period"]=t[i]["pay_period"]+1);this.roomList=t,console.log("plus_period-roomList",t),this.$forceUpdate,this.getBuyRoomTotal(),setTimeout((function(){e.isClickChoose=!0}),500)}}},p=m,c=(t("3a0b"),t("0b56")),s=Object(c["a"])(p,i,r,!1,null,null,null);e["default"]=s.exports},"4f2c":function(o,e,t){"use strict";var i={propertyGetOrderPackage:"/community/property_api.PrivilagePackage/getOrderPackage",propertyGetPackageRoom:"/community/property_api.PrivilagePackage/getPackageRoom",propertyGetPackageRoomList:"/community/property_api.PrivilagePackage/getPackageRoomList",propertyCreateOrder:"/community/property_api.PrivilagePackage/createOrder",propertygetRoomOrderPrice:"/community/property_api.PrivilagePackage/getRoomOrderPrice",propertyCreateRoomOrderNew:"/community/property_api.PrivilagePackage/createRoomOrderNew",propertyGetPayType:"/community/property_api.PrivilagePackage/getPayType",propertyCreateQrCode:"/community/property_api.PrivilagePackage/createQrCode",propertyCreateRoomQrCode:"/community/property_api.PrivilagePackage/createRoomQrCode",propertyQueryOrderPayStatus:"/community/property_api.PrivilagePackage/queryOrderPayStatus",propertyGetRoomList:"/community/property_api.RoomPackage/getRoomList",propertyGetBuyRoom:"/community/property_api.RoomPackage/getBuyRoom",propertyCreateRoomOrder:"/community/property_api.RoomPackage/createRoomOrder",propertyRoomCreateQrCode:"/community/property_api.RoomPackage/createQrCode",propertyRoomQueryOrderPayStatus:"/community/property_api.RoomPackage/queryOrderPayStatus",propertyGetPrivilagePackage:"/community/property_api.BuyPackage/getPrivilagePackage",propertyGetRoomPackage:"/community/property_api.BuyPackage/getRoomPackage",chargeTimeInfo:"/community/property_api.ChargeTime/takeEffectTimeInfo",setChargeTime:"/community/property_api.ChargeTime/takeEffectTimeSet",chargeNumberList:"/community/property_api.ChargeTime/chargeNumberList",chargeNumberInfo:"/community/property_api.ChargeTime/chargeNumberInfo",addChargeNumber:"/community/property_api.ChargeTime/addChargeNumber",editChargeNumber:"/community/property_api.ChargeTime/editChargeNumber",getChargeType:"/community/property_api.ChargeTime/getChargeType",chargeWaterType:"/community/property_api.ChargeTime/chargeWaterType",offlinePayList:"/community/property_api.ChargeTime/offlinePayList",offlinePayInfo:"/community/property_api.ChargeTime/offlinePayInfo",addOfflinePay:"/community/property_api.ChargeTime/addOfflinePay",editOfflinePay:"/community/property_api.ChargeTime/editOfflinePay",delOfflinePay:"/community/property_api.ChargeTime/delOfflinePay",getCountFeeList:"/community/property_api.ChargeTime/countVillageFee",villageLogin:"/community/property_api.ChargeTime/village_login",frameworkTissueNav:"/community/common.Framework/getTissueNav",frameworkTissueUser:"/community/common.Framework/getTissueUser",frameworkGroupParam:"/community/common.Framework/getGroupParam",frameworkPropertyVillage:"/community/common.Framework/getPropertyVillage",frameworkOrganizationAdd:"/community/common.Framework/organizationAdd",frameworkOrganizationQuery:"/community/common.Framework/organizationQuery",frameworkOrganizationSub:"/community/common.Framework/organizationSub",frameworkOrganizationDel:"/community/common.Framework/organizationDel",frameworkWorkerAdd:"/community/common.Framework/workerAdd",frameworkWorkerSub:"/community/common.Framework/workerSub",powerRoleList:"/community/property_api.Power/getRoleList",powerRoleDel:"/community/property_api.Power/roleDel",propertyConfigSetApi:"/community/property_api.Property/config",passwordChangeApi:"/community/property_api.Property/passwordChange",digitApi:"/community/property_api.Property/digit",saveDigitApi:"/community/property_api.Property/saveDigit",ajaxProvince:"/community/property_api.Property/ajaxProvince",ajaxCity:"/community/property_api.Property/ajaxCity",ajaxArea:"/community/property_api.Property/ajaxArea",saveConfig:"/community/property_api.Property/saveConfig",loginLogList:"/community/property_api.Security/loginLog",loginLogDetail:"/community/property_api.Security/loginLogDetail",commonLog:"/community/property_api.Security/commonLog",commonLogDetail:"/community/property_api.Security/commonLogDetail"};e["a"]=i},"7cb2":function(o,e,t){},eaa0:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzA5NTkzNzdFMUZGMTFFQTk4REY4MEI2QjgxRjdEQ0QiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzA5NTkzNzhFMUZGMTFFQTk4REY4MEI2QjgxRjdEQ0QiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozMDk1OTM3NUUxRkYxMUVBOThERjgwQjZCODFGN0RDRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozMDk1OTM3NkUxRkYxMUVBOThERjgwQjZCODFGN0RDRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmF/kyUAAADOSURBVHja7NpBCsIwFIThUYTuxEuI3qD1Gt6zPYC41xu0d+jG2my6iu9hT1BUTPgHpmQTeF+yC1WMUda9tbYOMZ0M88w+u1b2OUi6W3dKMw9r5ZDaFmelncYhgy22iUOCQ6IyyFqZBAgQIECAAAECBAgQIECAAHlns3Rj27bq+/7jAxVFobIsf3cjIYSvnOw0TYv28YoCBAgQIECAAAECBAgQIECA/C/kmYEjOOSaAeTiryhHW9yU9m9OJ7+RzlpZG+uYEGCcZ/bZu5cAAwChK/OFNzH8AQAAAABJRU5ErkJggg=="},f1cd:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAGFBMVEVHcEz////////39/f////a2trOzs7BwcHqTP0xAAAABHRSTlMAJq38IPEgWwAAAGRJREFUeAFjYFR2wQaMBBiEXbADQwYVHDJODCY4ZJwZXHCBYS0TZoJDxrk8ZVjJuGCVMQaB8mQQiSrjWo4AJSgy7jhlnNNAoLwMRIZgdduICeuQEZB/MAHu0gV3iYS7FMNd8gEA0jtWBbgpX8MAAAAASUVORK5CYII="}}]);