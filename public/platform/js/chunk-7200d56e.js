(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7200d56e","chunk-0045a2b2"],{"1b6d":function(t,e,s){t.exports=s.p+"img/pinkcheck.b2667539.png"},"1ea8":function(t,e,s){},3576:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"change_seats_wrapper"},[t.showTitle?s("div",{staticClass:"title_container"},[t._v(t._s(t.L("更换桌台")))]):t._e(),s("div",{staticClass:"content_subject"},[s("div",{staticClass:"leftcolumns_wrapper"},[s("div",{staticClass:"abs_container"},[s("div",{staticClass:"listcontent"},t._l(t.table_type_list,(function(e,i){return s("div",{key:i,staticClass:"table_type_items",class:t.leftcurrent==i?"table_type_items_active":"",on:{click:function(s){return t.gettableList(e.id,i)}}},[s("div",{staticClass:"typename"},[t._v(t._s(e.name))])])})),0)])]),s("div",{staticClass:"rightcolumns_wrapper"},[s("div",{staticClass:"slide_tableList_wrapper"},[t.table_list?s("div",{staticClass:"tableList_abs_container"},[s("div",{staticClass:"table_list"},t._l(t.table_list,(function(e,i){return e.id!=t.nowtableId?s("div",{key:i,staticClass:"table_card_items"},[2==e.status?s("div",{staticClass:"card_container card_container_dinging",on:{click:function(s){return t.selecttable(e)}}},[s("div",{staticClass:"topcontent"},[s("div",{staticClass:"tableinfo"},[s("div",{staticClass:"tablenumber"},[t._v(t._s(e.name))]),s("div",{staticClass:"people_info"},[t._v(t._s(e.dining_count)+"/"+t._s(e.max_people))])]),s("div",{staticClass:"order_count"},[t._v(t._s(t.L("X1个订单",{X1:e.order_count})))])]),s("div",{staticClass:"status_text"},[t._v(t._s(e.status_str))])]):t._e(),3==e.status?s("div",{staticClass:"card_container card_container_order",on:{click:function(s){return t.selecttable(e)}}},[s("div",{staticClass:"topcontent"},[s("div",{staticClass:"tableinfo"},[s("div",{staticClass:"tablenumber"},[t._v(t._s(e.name))]),s("div",{staticClass:"people_info"},[t._v(t._s(e.dining_count)+"/"+t._s(e.max_people))])]),s("div",{staticClass:"order_count"},[t._v(t._s(t.L("X1个订单",{X1:e.order_count})))])]),s("div",{staticClass:"status_text"},[t._v(t._s(e.status_str))])]):t._e(),1==e.status?s("div",{staticClass:"card_container card_container_empty",on:{click:function(s){return t.selecttable(e)}}},[s("div",{staticClass:"topcontent"},[s("div",{staticClass:"tableinfo"},[s("div",{staticClass:"tablenumber"},[t._v(t._s(e.name))]),s("div",{staticClass:"people_info"},[t._v(t._s(e.dining_count)+"/"+t._s(e.max_people))])]),t._m(0,!0)])]):t._e(),4==e.status?s("div",{staticClass:"card_container card_container_clean",on:{click:function(s){return t.selecttable(e)}}},[s("div",{staticClass:"topcontent"},[s("div",{staticClass:"tableinfo"},[s("div",{staticClass:"tablenumber"},[t._v(t._s(e.name))]),s("div",{staticClass:"people_info"},[t._v(t._s(e.dining_count)+"/"+t._s(e.max_people))])]),s("div",{staticClass:"order_count"},[t._v(t._s(t.L("X1个订单",{X1:e.order_count})))])]),s("div",{staticClass:"status_text"},[t._v(t._s(e.status_str))])]):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:t.rightcurrent==e.id,expression:"rightcurrent == items.id"}],staticClass:"selectedborder_box"},[t._m(1,!0)])]):t._e()})),0)]):s("div",{staticClass:"notableTips"},[s("div",[t._v(t._s(t.L("暂无对应桌台")))])])]),t.showTitle?s("div",{staticClass:"bottombtn_container"},[s("div",{staticClass:"ccl_btn",on:{click:function(e){return t.closemodel()}}},[t._v(t._s(t.L("取消")))]),s("div",{staticClass:"cfm_btn",on:{click:function(e){return t.changeSeat()}}},[t._v(t._s(t.L("确定")))])]):t._e()])])])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"addicon"},[i("img",{attrs:{src:s("e101"),alt:""}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"border_content"},[i("div",{staticClass:"pink_check"},[i("img",{attrs:{src:s("1b6d"),alt:""}})])])}],r=(s("a9e3"),s("8bbf")),n=s.n(r),o={props:{showTitle:{type:Boolean,default:!0},orderId:Number,nowtableId:Number},data:function(){return{leftcurrent:"",rightcurrent:"",share_table_type:"",table_type_list:[],table_list:[]}},created:function(){this.share_table_type=n.a.ls.get("storestaff_page_info").share_table_type,this.gettableTypeList()},methods:{gettableTypeList:function(){var t=this;this.request("/foodshop/storestaff.foodshopStore/tableTypeList").then((function(e){console.log(e,"--------------------我是桌台状态数量和桌台类型数据列表--------------------");e.tab_count;t.table_type_list=e.table_type_list,t.table_type_list&&t.gettableList(t.table_type_list[0].id)}))},gettableList:function(t,e){var s=this;this.leftcurrent=e||0,this.request("/foodshop/storestaff.foodshopStore/tableList",{order_status:2==this.share_table_type?0:1,table_id:t}).then((function(t){console.log(t,"-----------------------桌台列表数据出现了--------------------"),s.table_list=t.table_list}))},selecttable:function(t){this.rightcurrent=t.id,this.showTitle||this.$emit("changeSeat",{tableId:t.id})},closemodel:function(){this.$emit("closemodel")},changeSeat:function(){var t=this;""!=this.rightcurrent?(console.log(this.orderId),this.request("/foodshop/storestaff.order/chanegeTable",{order_id:this.orderId,table_id:this.rightcurrent}).then((function(e){console.log(e,"-----------------------换桌--------------------"),t.$bus.$emit("changeSeats",t.rightcurrent),t.$emit("uploadfnc"),t.closemodel()}))):this.$message.error(this.L("您还未选中桌台！"))}}},c=o,l=(s("7bf9"),s("2877")),d=Object(l["a"])(c,i,a,!1,null,"3e1b8996",null);e["default"]=d.exports},"7bf9":function(t,e,s){"use strict";s("1ea8")},b56d1:function(t,e,s){"use strict";s("da97")},da97:function(t,e,s){},e101:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY1MjhGMUYzRTc3QjExRUFCMzQ0QjM3MTFGMzE2RTlCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY1MjhGMUY0RTc3QjExRUFCMzQ0QjM3MTFGMzE2RTlCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjUyOEYxRjFFNzdCMTFFQUIzNDRCMzcxMUYzMTZFOUIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjUyOEYxRjJFNzdCMTFFQUIzNDRCMzcxMUYzMTZFOUIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4y4OKZAAAA7UlEQVR42uyZMQrCQBBFJx7AwsrKa1ip94gYcgq9jhbxHmIhXsPCWFl4ANc/OAuiTSAj7MIfeGEzxexj2SVMVkII4kwFrkblXb/Qh2PMwAEU9q7FF+DoNcFAfKP8kBUbl54TeAsPO+aSEf57UJjCFKYwhSlMYQpTOOWIHYd2Cksw6llvCiZfuQs496x7B412Liq8wmCbwWo/Qa3CLQbjTHbELctDt7bllgy2xCYeurl1tykfuh04ef9EacJvNJ5z8MNBYQpTmMIUpjCFKUzhhIUfHXPJCO/lfZkYI1guWWG98axBa9TieAuq8RJgAPx4PFeq95qcAAAAAElFTkSuQmCC"},ea21:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.order?s("div",{staticClass:"order-item"},[s("div",{staticClass:"order-card b-f1",class:0==t.index?"":"mt-20"},[s("div",{staticClass:"order-header flex justify-between align-center bg-f4 pt-10 pl-10 pr-10 pb-10",staticStyle:{background:"#2db7f510"}},[s("div",{staticClass:"flex-1"},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.order.fetch_number&&"4"==t.order.order_from,expression:"order.fetch_number && order.order_from == '4'"}],staticClass:"cr-primary fw-bold fs-18 mr-10"},[t._v(t._s(t.order.fetch_number))]),t.order.book_time_txt?s("span",[t._v(t._s(t.order.book_time_txt))]):t._e()]),s("div",["3"==t.order.order_status||"4"==t.order.order_status||"6"==t.order.order_status?s("a-tag",{attrs:{color:"red"}},[t._v(t._s(t.order.order_status_txt))]):s("a-tag",{attrs:{color:"blue"}},[t._v(t._s(t.order.order_status_txt))]),s("a-tag",{attrs:{color:"blue"}},[t._v(t._s(t.order.order_from_txt))])],1)]),s("div",{staticClass:"mt-10 ml-20 mr-20 mb-10"},[s("div",{staticClass:"bb-f1 flex align-start pt-20 pb-20 lh-30"},[s("div",{staticClass:"w-60"},[s("a-icon",{staticStyle:{"font-size":"16px",color:"#999","line-height":"30px","vertical-align":"middle"},attrs:{type:"user"}})],1),s("div",{staticClass:"flex-1"},[s("span",{staticClass:"cr-black fw-bold mr-10 fs-16"},[t._v(t._s(t.order.name||"--"))]),"0"==t.order.order_from?[1==t.order.sex?s("a-icon",{key:"man",staticClass:"mr-10",staticStyle:{"font-size":"14px",color:"#2db7f5"},attrs:{type:"man"}}):t._e(),2==t.order.sex?s("a-icon",{key:"woman",staticClass:"mr-10",staticStyle:{"font-size":"14px",color:"#f50f50"},attrs:{type:"woman"}}):t._e()]:t._e(),2!=t.order.order_from?["1"==t.order.hasMerchantCard?s("span",{key:"is-vip",staticClass:"cr-99"},[t._v(t._s(t.L("已领会员卡")))]):s("span",{key:"no-vip",staticClass:"cr-99"},[t._v(t._s(t.L("未领会员卡")))]),t.order.order_count?[s("span",{staticClass:"ml-10 mr-10 cr-99"},[t._v("·")]),s("span",{staticClass:"cr-99"},[t._v(t._s(t.order.order_count))])]:t._e()]:t._e()],2)]),s("div",{staticClass:"bb-f1 flex align-start pt-20 pb-20 lh-30"},[s("div",{staticClass:"w-60"},[s("a-icon",{staticStyle:{"font-size":"16px",color:"#999","line-height":"30px","vertical-align":"middle"},attrs:{type:"file-done"}})],1),s("div",{staticClass:"flex-1"},[s("div",[s("span",{staticClass:"mr-10"},[t._v(t._s(t.L("就餐人数"))+"：")]),t.order.book_num?s("span",[t._v(t._s(t.L("X1人",{X1:t.order.book_num}))+" ")]):s("span",[t._v("--")])]),t.tableInfo?s("div",[s("span",{staticClass:"mr-10"},[t._v(t._s(t.L("就餐桌台"))+"：")]),t.order.table_info.table_type_name?s("span",[t._v(t._s(t.order.table_info.table_type_name))]):t._e(),t.order.table_info.table_name?s("span",[t._v("-"+t._s(t.order.table_info.table_name))]):t._e(),t.order.table_info.table_type_name||t.order.table_info.table_name?t._e():s("span",[t._v("--")])]):t._e(),t.order.phone?s("div",[s("span",{staticClass:"mr-10"},[t._v(t._s(t.L("预约手机号"))+"：")]),s("span",[t._v(t._s(t.order.phone))])]):t._e(),t.order.user_phone?s("div",[s("span",{staticClass:"mr-10"},[t._v(t._s(t.L("注册手机号"))+"：")]),s("span",[t._v(t._s(t.order.user_phone))])]):t._e(),t.order.note?s("div",[s("span",{staticClass:"mr-10"},[t._v(t._s(t.L("订单备注"))+"：")]),s("span",[t._v(t._s(t.order.note))])]):t._e()])]),s("div",{staticClass:"bb-f1 flex align-start pt-20 pb-20 lh-30"},[s("div",{staticClass:"w-60"},[s("a-icon",{staticStyle:{"font-size":"16px",color:"#999","line-height":"30px","vertical-align":"middle"},attrs:{type:"appstore"}})],1),s("div",{staticClass:"flex-1"},[s("div",{staticClass:"flex justify-between"},[s("div",{staticClass:"fw-bold"},[s("span",{staticClass:"mr-10"},[t._v(t._s(t.order.goods_num))]),s("span",[t._v(t._s(t.L("件商品")))])]),s("div",{staticClass:"pointer cr-blue"},[t.fold?s("div",{key:"unfold",on:{click:t.foldMenu}},[t._v(" "+t._s(t.L("展开"))+" "),s("a-icon",{attrs:{type:"down"}})],1):s("div",{key:"fold",on:{click:t.foldMenu}},[t._v(" "+t._s(t.L("收起"))+" "),s("a-icon",{attrs:{type:"up"}})],1)])]),t.order.goods_detail&&t.order.goods_detail.length&&!t.fold?s("div",{staticClass:"mt-10"},t._l(t.order.goods_detail,(function(e,i){return s("div",{key:"goods_detail_"+i,staticClass:"b-f1 pl-20 pr-20 pt-20 pb-20 mt-10 br-10"},[e.goods_combine&&e.goods_combine.length?s("div",t._l(e.goods_combine,(function(e,i){return s("div",{key:"goods_combine_"+i},[1==t.order.show_order_num?s("div",[s("a-tag",{attrs:{color:"green"}},[t._v(t._s(e.number_str))])],1):t._e(),e.goods&&e.goods.length?s("div",t._l(e.goods,(function(e,i){return s("div",{key:"goods_"+i,staticClass:"lh-30"},[s("div",{staticClass:"flex"},[s("div",{staticClass:"flex-1 fw-bold"},["1"==t.order.is_staff?s("a-tag",{attrs:{color:"purple"}},[t._v(t._s(t.L("由服务员加菜")))]):t._e(),"1"==t.order.is_must?s("a-tag",{attrs:{color:"orange"}},[t._v(t._s(t.L("必点菜")))]):t._e(),t._v(" "+t._s(e.name)+" ")],1),s("div",{staticClass:"w-100 text-right"},[t._v("x"+t._s(e.num))]),s("div",{staticClass:"w-100 text-right"},[t._v(t._s(t.L("￥"))+t._s(e.total_price))])]),e.spec?s("div",{staticClass:"ml-10 cr-66 fw-light"},[t._v(t._s(t.L("规格"))+"："+t._s(e.spec))]):t._e(),e.sub_list&&e.sub_list.length?s("div",{staticClass:"ml-10 cr-66 fw-light flex flex-start"},[s("div",[t._v(t._s(e.is_package_goods?t.L("菜品"):t.L("辅菜"))+"：")]),s("div",{staticClass:"flex-1"},t._l(e.sub_list,(function(e,i){return s("div",{key:"sub_goods_"+i,staticClass:"flex align-center justify-around"},[s("span",{staticClass:"flex-1"},[s("span",[t._v(t._s(e.name))]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.spec,expression:"sub.spec"}]},[t._v("（"+t._s(e.spec)+"）")])]),s("span",{staticClass:"w-100 text-right"},[t._v("x"+t._s(e.num))]),s("span",{staticClass:"w-100 text-right"},[t._v(t._s(t.L("￥"))+t._s(e.price))])])})),0)]):t._e()])})),0):t._e(),e.refund_goods&&e.refund_goods.length?s("div",t._l(e.refund_goods,(function(e,i){return s("div",{key:"refund_goods_"+i,staticClass:"lh-30"},[s("div",{staticClass:"flex"},[s("div",{staticClass:"flex-1 fw-bold"},[s("a-tag",{attrs:{color:"red"}},[t._v(t._s(t.L("退")))]),t._v(" "+t._s(e.name)+" ")],1),s("div",{staticClass:"w-100 text-right"},[t._v("x"+t._s(e.num))]),s("div",{staticClass:"w-100 text-right"},[t._v(t._s(t.L("￥"))+t._s(e.total_price))])]),e.spec?s("div",{staticClass:"ml-10 cr-66 fw-light"},[t._v(t._s(e.spec))]):t._e(),e.spec_sub?s("div",{staticClass:"ml-10 cr-66 fw-light"},[t._v(t._s(e.spec_sub))]):t._e()])})),0):t._e(),e.goods_note?s("div",[t._v(t._s(t.L("备注"))+"："+t._s(e.goods_note))]):t._e()])})),0):t._e(),e.pay_price&&1==t.order.show_order_num?s("div",{staticClass:"bt-f1 mt-10 pt-10"},[e.discount_detail&&e.discount_detail.length?s("div",t._l(e.discount_detail,(function(e,i){return s("div",{key:"discount_1_"+i,staticClass:"flex justify-between align-center"},[s("div",[t._v(t._s(e.value))]),s("div",{staticClass:"cr-red fs-16"},[t._v("-"+t._s(t.L("￥"))+t._s(e.minus))])])})),0):t._e(),e.coupon_list&&e.coupon_list.length?s("div",t._l(e.coupon_list,(function(e,i){return s("div",{key:"discount_2_"+i,staticClass:"flex justify-between align-center"},[s("div",[t._v(t._s(e.value))]),s("div",{staticClass:"cr-redfs-16"},[t._v("-"+t._s(t.L("￥"))+t._s(e.minus))])])})),0):t._e(),0!=e.merchant_discount&&10!=e.merchant_discount?s("div",[s("div",{staticClass:"flex justify-between align-center"},[s("div",[t._v(t._s(t.L("会员卡折扣")))]),s("div",{staticClass:"cr-red fs-16"},[t._v("-"+t._s(t.L("￥"))+t._s(e.merchant_discount_money))])])]):t._e(),0!=e.system_score_money&&0!=e.system_score_money?s("div",[s("div",{staticClass:"flex justify-between align-center"},[s("div",[t._v(t._s(t.L("积分抵扣金额")))]),s("div",{staticClass:"cr-red fs-16"},[t._v("-"+t._s(t.L("￥"))+t._s(e.system_score_money))])])]):t._e(),e.book_money&&0!=e.book_money&&0!=e.book_money?s("div",[s("div",{staticClass:"flex justify-between align-center"},[s("div",[t._v(t._s(t.L("订金抵扣金额")))]),s("div",{staticClass:"cr-red fs-16"},[t._v("-"+t._s(t.L("￥"))+t._s(e.book_money))])])]):t._e(),s("div",[s("div",{staticClass:"flex justify-between align-center"},[s("div",[t._v(t._s(t.L("支付总额")))]),s("div",{staticClass:"cr-blue fs-16"},[t._v(t._s(t.L("￥"))+t._s(e.pay_price))])])])]):s("div",{staticClass:"bt-f1 mt-10 pt-10"},[s("div",{staticClass:"text-right"},[t._v(" "+t._s(t.L("合计X1份",{X1:e.count}))+"， "),s("span",{staticClass:"cr-red"},[t._v(t._s(t.L("￥"))+t._s(e.total_price))])])])])})),0):t._e()])]),s("div",{staticClass:"flex align-start pt-20 pb-20 lh-30"},[s("div",{staticClass:"w-60"},[s("a-icon",{staticStyle:{"font-size":"16px",color:"#999","line-height":"30px","vertical-align":"middle"},attrs:{type:"pay-circle"}})],1),s("div",{staticClass:"flex-1 fw-bold"},[s("div",{staticClass:"flex justify-between align-center"},[s("span",[t._v(t._s(t.L("商品总额")))]),s("span",{staticClass:"cr-blue fs-18"},[t._v(t._s(t.L("￥"))+t._s(t.order.goods_total_price))])]),0!=t.order.book_price&&0!=t.order.book_price?s("div",{staticClass:"flex justify-between align-center"},[s("span",[t._v(t._s(t.L("订金金额")))]),s("span",{staticClass:"cr-99"},[t._v(" "+t._s(t.L("已支付"))+" "),s("span",{staticClass:"cr-blue fs-18"},[t._v(t._s(t.L("￥"))+t._s(t.order.book_price))])])]):t._e(),0!=t.order.pay_price&&0!=t.order.pay_price?s("div",{staticClass:"flex justify-between align-center"},[s("span",[t._v(t._s(t.L("支付总额")))]),s("span",{staticClass:"cr-blue fs-18"},[t._v(t._s(t.L("￥"))+t._s(t.order.pay_price))])]):t._e()])])]),s("div",{staticClass:"pl-10 pr-10 pt-10 pb-10 bt-f1"},[s("div",{staticClass:"flex justify-between aligin-center"},[s("div",{staticClass:"mr-10"},[s("div",[t._v(t._s(t.L("下单时间"))+"："+t._s(t.order.create_time||"--"))]),s("div",[t._v(t._s(t.L("订单编号"))+"："+t._s(t.order.real_orderid||"--"))])]),t.buttons?t._e():s("div",{staticClass:"flex align-center flex-wrap"},["1"==t.order.button.cancel_btn?s("a-button",{staticClass:"mr-10 mt-10",attrs:{icon:"close-circle"},on:{click:function(e){return t.btnClick(t.CANCEL)}}},[t._v(t._s(t.CANCEL.text))]):t._e(),s("a-button",{staticClass:"mr-10 mt-10",attrs:{icon:"align-center"},on:{click:function(e){return t.btnClick(t.REMARK)}}},[t._v(t._s(t.REMARK.text))]),"1"==t.order.button.print_btn?s("a-button",{staticClass:"mr-10 mt-10",attrs:{icon:"printer"},on:{click:function(e){return t.btnClick(t.PRINT)}}},[t._v(t._s(t.PRINT.text))]):t._e(),"1"==t.order.button.change_goods_btn?s("a-button",{staticClass:"mr-10 mt-10",attrs:{icon:"schedule",type:"primary"},on:{click:function(e){return t.btnClick(t.MENU)}}},[t._v(t._s(t.MENU.text))]):t._e(),"1"==t.order.button.take_btn?s("a-button",{staticClass:"mr-10 mt-10",attrs:{icon:"check-circle",type:"primary"},on:{click:function(e){return t.btnClick(t.ACCEPT)}}},[t._v(t._s(t.ACCEPT.text))]):t._e(),"1"==t.order.button.take_seat_btn?s("a-button",{staticClass:"mr-10 mt-10",attrs:{icon:"shop",type:"primary"},on:{click:function(e){return t.btnClick(t.CONFIRM)}}},[t._v(t._s(t.CONFIRM.text))]):t._e(),"1"==t.order.button.cash_btn?s("a-button",{staticClass:"mr-10 mt-10",attrs:{icon:"wallet",type:"primary"},on:{click:function(e){return t.btnClick(t.SETTLEMENT)}}},[t._v(t._s(t.SETTLEMENT.text))]):t._e(),"1"==t.order.button.clear_btn?s("a-button",{staticClass:"mr-10 mt-10",attrs:{type:"primary",icon:"highlight"},on:{click:function(e){return t.btnClick(t.CLEAR)}}},[t._v(" "+t._s(t.CLEAR.text))]):t._e()],1)])])]),s("a-modal",{attrs:{title:t.modalTitle,centered:"",width:t.modalWidth,destroyOnClose:""},on:{ok:t.handleOk,cancel:t.handleCancel},model:{value:t.modalVisiable,callback:function(e){t.modalVisiable=e},expression:"modalVisiable"}},[s("div",[t.modalType==t.REMARK.type?s("div",[s("a-textarea",{attrs:{placeholder:t.L("请输入备注信息，字数限制5-50个字"),rows:5,maxLength:50},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1):t._e(),t.modalType==t.CANCEL.type?s("div",[s("a-radio-group",{on:{change:t.onReasonChange},model:{value:t.cancelReason,callback:function(e){t.cancelReason=e},expression:"cancelReason"}},t._l(t.cancelReasonList,(function(e){return s("a-radio",{key:e.key,staticClass:"cancel-reason",attrs:{value:e.key}},[t._v(t._s(e.value))])})),1)],1):t._e(),t.modalType==t.PRINT.type?s("div",{staticClass:"print"},[s("a-checkbox-group",{attrs:{options:t.plainOptions},on:{change:t.onPrintTypeChange},model:{value:t.checkedList,callback:function(e){t.checkedList=e},expression:"checkedList"}}),s("br"),s("div",{staticClass:"mt-20 pt-10 bt-f1"},[s("a-checkbox",{attrs:{indeterminate:t.indeterminate,checked:t.checkAll},on:{change:t.onPrintCheckAllChange}},[t._v(t._s(t.L("全选")))])],1)],1):t._e(),t.modalType==t.CONFIRM.type?s("div",[s("change-seats",{attrs:{showTitle:!1},on:{changeSeat:t.changeSeatSuccess}})],1):t._e(),"change_num"==t.modalType?s("div",[s("span",{staticClass:"mr-20"},[t._v(t._s(t.L("请输入就餐人数"))+"：")]),s("a-input-number",{staticStyle:{width:"200px"},attrs:{min:1},model:{value:t.dinnerNum,callback:function(e){t.dinnerNum=e},expression:"dinnerNum"}})],1):t._e()])])],1):t._e()},a=[],r=(s("a9e3"),s("ca00")),n=s("3576"),o=[],c=["customer_account","menu","pre_account","bill_account"],l={props:{order:Object,index:Number},components:{ChangeSeats:n["default"]},data:function(){return{REMARK:d,MENU:_,CANCEL:u,ACCEPT:h,CONFIRM:b,PRINT:f,SETTLEMENT:v,CLEAR:p,showPhone:!1,fold:!0,modalVisiable:!1,modalTitle:"",modalType:"",remark:"",canRefund:0,cancelReasonList:[{key:0,value:this.L("菜品质量不满意")},{key:1,value:this.L("餐厅服务不好")},{key:2,value:this.L("和客人协商后撤单")},{key:3,value:this.L("餐厅无法满足要求")},{key:4,value:this.L("其他")}],cancelReason:"",cancelReasonTxt:"",indeterminate:!1,checkAll:!0,checkedList:c,plainOptions:o,modalWidth:500,showFooter:!0,tableId:"",dinnerNum:1}},computed:{tableInfo:function(){return!!this.order&&Object(r["l"])(this.order.tableInfo)},buttons:function(){return!!this.order&&Object(r["l"])(this.order.button)}},watch:{order:function(){this.orderChange()}},created:function(){this.plainOptions=[{label:this.L("打印客看单"),value:"customer_account"},{label:this.L("打印后厨单"),value:"menu"},{label:this.L("打印预结单"),value:"pre_account"},{label:this.L("打印结账单"),value:"bill_account"}],console.log(this.SETTLEMENT,"this.SETTLEMENT")},mounted:function(){this.orderChange()},methods:{orderChange:function(){var t=this.order;this.plainOptions;this.remark=t.note,t.book_num&&(this.dinnerNum=t.book_num)},checkPhoneNumber:function(){this.showPhone=!0},foldMenu:function(){this.fold=!this.fold},btnClick:function(t){console.log(t),"route"==t.action&&(this.$store.commit("changeOrder",this.order.order_id),this.order.table_id&&this.$store.commit("changeTable",this.order.table_id),console.log(this.order),t==_&&3==this.order.order_status?4==this.order.order_from?this.$router.push({path:t.path,query:{orderId:this.order.order_id,formState:"addfood",otherpage:0}}):this.$router.push({path:t.path,query:{orderId:this.order.order_id,formState:"addfood"}}):4==this.order.order_from?this.$router.push({path:t.path,query:{orderId:this.order.order_id,otherpage:0}}):this.$router.push({path:t.path,query:{orderId:this.order.order_id}})),"modal"==t.action&&(this.modalVisiable=!0,this.modalType=t.type,this.modalTitle=t.title,t==b?(this.modalWidth="60%",this.showFooter=!1):(this.modalWidth=500,this.showFooter=!0,t==f&&(this.order.is_self_take?(o=[{label:this.L("打印结账单"),value:"bill_account"}],c=["bill_account"]):"5"==this.order.order_from?(o=[{label:this.L("打印后厨单"),value:"menu"},{label:this.L("打印结账单"),value:"bill_account"}],c=["menu","bill_account"]):(o=[{label:this.L("打印客看单"),value:"customer_account"},{label:this.L("打印后厨单"),value:"menu"},{label:this.L("打印预结单"),value:"pre_account"},{label:this.L("打印结账单"),value:"bill_account"}],c=["customer_account","menu","pre_account","bill_account"]),this.checkedList=c,this.plainOptions=o))),"confirm"==t.action&&(t==u&&this.getCancelInfo(),t==h&&this.changeOrderStatus(t),t==p&&this.clearTable())},handleOk:function(){switch(this.modalType){case d.type:this.addNotes();break;case u.type:this.changeCancelReason();break;case b.type:this.changeDinnerNum();break;case"change_num":this.dinnerNum?this.changeOrderStatus(b):this.$message.warning(this.L("请输入就餐人数"));break;case f.type:this.printOrder();break;default:this.handleCancel();break}},handleCancel:function(){this.modalType==u.type&&this.refreshList(),this.modalVisiable=!1,this.modalType="",this.modalTitle="",this.tableId=0,this.checkAll=!0,this.indeterminate=!1,this.checkedList=c},refreshList:function(){this.$emit("change",{type:"refresh"})},addNotes:function(){var t=this,e={order_id:this.order.order_id,type:1,note:this.remark};this.request("/foodshop/storestaff.order/editNote",e).then((function(e){t.$message.success(e.msg||t.L("添加备注成功")),t.handleCancel(),t.refreshList()}))},getCancelInfo:function(){var t=this;this.request("/foodshop/storestaff.order/checkBookMoneyRefund",{order_id:this.order.order_id}).then((function(e){t.canRefund=e.can_refund;var s=t.$confirm({title:t.L("确认取消订单")+"？",content:u.tips,centered:!0,onOk:function(){t.request("/foodshop/storestaff.order/cancelOrder",{order_id:t.order.order_id,can_refund:e.can_refund}).then((function(e){t.$message.success(e.msg||t.L("订单取消成功")),s.destroy(),t.modalVisiable=!0,t.modalType=u.type,t.modalTitle=u.title}))}})}))},onReasonChange:function(t){this.cancelReasonTxt=this.cancelReasonList[this.cancelReason].value},changeCancelReason:function(){var t=this;this.cancelReasonTxt?this.request("/foodshop/storestaff.order/editCancelReason",{order_id:this.order.order_id,cancel_reason:this.cancelReasonTxt}).then((function(e){t.handleCancel(),t.$message.success(e.msg||t.L("修改取消订单原因成功")),t.refreshList()})):(this.handleCancel(),this.refreshList())},clearTable:function(){var t=this,e=this.$confirm({title:p.tips,centered:!0,onOk:function(){t.request("/foodshop/storestaff.order/completeOrder",{order_id:t.order.order_id}).then((function(s){t.$message.success(s.msg||t.L("清台成功")),e.destroy(),t.handleCancel(),t.refreshList()}))}})},changeOrderStatus:function(t){var e=this,s={order_id:this.order.order_id};t==h?(s.status=4,this.request("/foodshop/storestaff.order/editOrderStatus",s).then((function(t){e.$message.success(t.msg||e.L("操作成功")),e.refreshList()}))):t==b&&this.request("/foodshop/storestaff.order/changePeopleNum",{order_id:this.order.order_id,number:this.dinnerNum}).then((function(t){s.status=21,s.table_id=e.tableId,e.request("/foodshop/storestaff.order/editOrderStatus",s).then((function(t){e.tableId=0,e.$message.success(t.msg||e.L("操作成功")),e.refreshList()}))}))},changeSeatSuccess:function(t){this.tableId=t.tableId},changeDinnerNum:function(){this.tableId?(this.modalWidth=500,this.modalType="change_num",this.modalTitle=this.L("就餐人数")):this.$message.warning(this.L("请先选择桌台！"))},onPrintTypeChange:function(t){this.indeterminate=!!t.length&&t.length<this.plainOptions.length,this.checkAll=t.length===this.plainOptions.length},onPrintCheckAllChange:function(t){Object.assign(this,{checkedList:t.target.checked?c:[],indeterminate:!1,checkAll:t.target.checked})},printOrder:function(){var t=this;this.checkedList.length?this.request("/foodshop/storestaff.print/printOrder",{order_id:this.order.order_id,type:this.checkedList}).then((function(e){t.handleCancel(),t.$message.success(e.msg||t.L("打印成功"))})):this.$message.warning(this.L("请选择打印类型"))}}},d={type:"remark",title:Object(r["n"])("添加备注信息"),text:Object(r["n"])("备注"),action:"modal"},_={type:"menu",title:Object(r["n"])("点菜"),action:"route",text:Object(r["n"])("点菜"),path:"/storestaff/storestaff.cashier/cashier/diningTable/menu"},u={type:"cancel_order",title:Object(r["n"])("请选择取消订单原因"),text:Object(r["n"])("取消订单"),action:"confirm",tips:Object(r["n"])("确定取消订单之前，请及时联系顾客哦")+"！"},h={type:"accept_order",title:Object(r["n"])("接单"),text:Object(r["n"])("接单"),action:"confirm",tips:""},p={type:"clear_table",title:Object(r["n"])("清台"),text:Object(r["n"])("清台"),action:"confirm",tips:Object(r["n"])("是否确定清台")+"？"},b={type:"confirm_order",title:Object(r["n"])("选择桌台"),text:Object(r["n"])("确认到店"),action:"modal",tips:""},f=(Object(r["n"])("订单详情"),Object(r["n"])("订单详情"),{type:"print_order",title:Object(r["n"])("请选择打印类型"),text:Object(r["n"])("打印"),action:"modal"}),v={type:"settlement",title:Object(r["n"])("结算"),action:"route",text:Object(r["n"])("结算"),path:"/storestaff/storestaff.cashier/cashier/diningTable/settlement_order"},m=l,C=(s("b56d1"),s("2877")),g=Object(C["a"])(m,i,a,!1,null,"d9d21fe8",null);e["default"]=g.exports}}]);