(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48210773","chunk-cf9e0b22","chunk-2433ae1e","chunk-1a64239a","chunk-b8394eb8","chunk-2d0a310a"],{"011d":function(e,t,r){"use strict";var a={getSearchHotList:"/mall/platform.MallSearchHot/getSearchHotList",getHotRecord:"/mall/platform.MallSearchHot/getHotRecord",addOrEditSearchHot:"/mall/platform.MallSearchHot/addOrEditSearchHot",getEditSearchHot:"/mall/platform.MallSearchHot/getEditSearchHot",delSearchHot:"/mall/platform.MallSearchHot/delSearchHot",saveSort:"/mall/platform.MallSearchHot/saveSort",getGoodsList:"/mall/platform.MallPlatformGoods/getGoodsList",getMerOrStoreList:"/mall/platform.MallPlatformGoods/getMerOrStoreList",goodsCategoryList:"/mall/platform.MallGoodsCategory/goodsCategoryList",goodsSetSort:"/mall/platform.MallPlatformGoods/setSort",getGoodsListByName:"/mall/platform.MallPlatformGoods/getGoodsListByName",exportGoods:"/mall/platform.MallPlatformGoods/exportGoods",goodsSetIntegral:"/mall/platform.MallPlatformGoods/setIntegral",goodsSetCommission:"/mall/platform.MallPlatformGoods/setCommission",goodsSetVirtual:"/mall/platform.MallPlatformGoods/setVirtual",goodsSetStatus:"/mall/platform.MallPlatformGoods/setStatus",goodsSetFirst:"/mall/platform.MallPlatformGoods/setFirst",merchantGoodsEdit:"/mall/platform.mallPlatformGoods/merchantGoodsEdit",getActivityRecommendList:"/mall/platform.MallActivityRecommend/getActivityRecommendList",getLimitedRecommendList:"/mall/platform.mallActivityRecommend/getLimitedRecommendList",getBargainRecommendList:"/mall/platform.mallActivityRecommend/getBargainRecommendList",getGroupRecommendList:"/mall/platform.mallActivityRecommend/getGroupRecommendList",editLimitedRecommend:"/mall/platform.mallActivityRecommend/editLimitedRecommend",editBargainRecommend:"/mall/platform.mallActivityRecommend/editBargainRecommend",editGroupRecommend:"/mall/platform.mallActivityRecommend/editGroupRecommend",setFirstLimited:"/mall/platform.mallActivityRecommend/setFirstLimited",setFirstBargain:"/mall/platform.mallActivityRecommend/setFirstBargain",setFirstGroup:"/mall/platform.mallActivityRecommend/setFirstGroup",setSortGroup:"/mall/platform.mallActivityRecommend/setSortGroup",setSortLimited:"/mall/platform.mallActivityRecommend/setSortLimited",setSortBargain:"/mall/platform.mallActivityRecommend/setSortBargain",bannerList:"/mall/platform.mallActivityRecommend/bannerList",addOrEditBanner:"/mall/platform.mallActivityRecommend/addOrEditBanner",delBanner:"/mall/platform.mallActivityRecommend/delBanner",getReplyList:"/mall/platform.MallPlatformReply/searchReply",getReplyDetails:"/mall/platform.MallPlatformReply/getReplyDetails",delReply:"/mall/platform.MallPlatformReply/delReply",getOrderList:"/mall/platform.MallOrder/searchOrders",getOrderDetails:"/mall/platform.MallOrder/getOrderDetails",getStores:"/mall/platform.MallOrder/getStores",getMers:"/mall/platform.MallOrder/getMers",loginMer:"/mall/platform.MallOrder/loginMer",loginStore:"/mall/platform.MallOrder/loginStore",getAllArea:"/mall/platform.MallOrder/getAllArea",getDiscount:"/mall/platform.MallOrder/getDiscount",getOrderLog:"/mall/platform.MallOrder/getOrderLog",exportOrder:"/mall/platform.MallOrder/exportOrder",getList:"mall/platform.MallHomeDecorate/getList",getDel:"mall/platform.MallHomeDecorate/getDel",getEdit:"mall/platform.MallHomeDecorate/getEdit",addOrEditDecorate:"mall/platform.MallHomeDecorate/addOrEdit",getSixList:"mall/platform.MallHomeDecorate/getSixList",getSixEdit:"mall/platform.MallHomeDecorate/getSixEdit",addOrEditSixAdver:"mall/platform.MallHomeDecorate/addOrEditSixAdver",delSixAdver:"mall/platform.MallHomeDecorate/delSixAdver",getRecList:"mall/platform.MallHomeDecorate/getRecList",addOrEditRec:"mall/platform.MallHomeDecorate/addOrEditRec",getRecEdit:"mall/platform.MallHomeDecorate/getRecEdit",delRecAdver:"mall/platform.MallHomeDecorate/delRecAdver",recDisplay:"mall/platform.MallHomeDecorate/recDisplay",getActGoods:"mall/platform.MallHomeDecorate/getActGoods",addRelatedGoods:"mall/platform.MallHomeDecorate/addRelatedGoods",getUrlAndRecSwitch:"mall/platform.MallHomeDecorate/getUrlAndRecSwitch",getRelatedList:"mall/platform.MallHomeDecorate/getRelatedList",saveRelatedSort:"/mall/platform.MallHomeDecorate/saveRelatedSort",delOne:"/mall/platform.MallHomeDecorate/delOne",viewLogistics:"/mall/platform.MallOrder/viewLogistics",getPeriodicList:"/mall/platform.MallOrder/getPeriodicList",setRecommend:"/mall/platform.MallPlatformGoods/setRecommend",cancelRecommend:"/mall/platform.MallPlatformGoods/cancelRecommend",isShowReply:"/mall/platform.MallPlatformReply/isShowReply",getMallBrowse:"/mall/platform.MallBrowse/getMallBrowse",MallBrowseExport:"/mall/platform.MallBrowse/export",exportBrowseTotalExport:"/mall/platform.MallBrowse/exportBrowseTotal",getAuditGoodsList:"/mall/platform.MallPlatformGoods/getAuditGoodsList",auditGoods:"/mall/platform.MallPlatformGoods/auditGoods",loginMerchant:"/mall/platform.MallPlatformGoods/loginMerchant",orderPrintTicket:"/mall/platform.MallOrder/printOrder"};t["a"]=a},"01a7":function(e,t,r){"use strict";r("9c6e")},"07a9":function(e,t,r){var a=r("4aad"),s=r("6751"),o=r("4b17"),i=r("76dd");function l(e,t,r){e=i(e),t=o(t);var l=t?s(e):0;return t&&l<t?e+a(t-l,r):e}e.exports=l},"126d":function(e,t,r){var a=r("6da8"),s=r("aaec"),o=r("d094");function i(e){return s(e)?o(e):a(e)}e.exports=i},"2c40":function(e,t,r){"use strict";r("99de")},4031:function(e,t,r){"use strict";var a={getLists:"/mall/merchant.MerchantStoreMall/getStoreList",perfectedStore:"/mall/merchant.MerchantStoreMall/perfectedStore",getStoreConfigList:"/mall/merchant.MerchantStoreMall/getStoreConfigList",getShippingList:"/mall/merchant.MallShipping/getShippingList",updateShipping:"/mall/merchant.MallShipping/addShipping",changeState:"/mall/merchant.MallShipping/changeState",removeShipping:"/mall/merchant.MallShipping/del",getShippingInfo:"/mall/merchant.MallShipping/edit",getMerchantSort:"/mall/merchant.MallGoods/getMerchantSort",getMallGoods:"/mall/merchant.MallGoods/getMallGoodsSelect",getGiveList:"/mall/merchant.MallGive/getGiveList",giveAdd:"/mall/merchant.MallGive/addGive",giveChangeState:"/mall/merchant.MallGive/changeState",giveDel:"/mall/merchant.MallGive/del",getGiveInfo:"/mall/merchant.MallGive/edit",getPlatSort:"/mall/merchant.MallGoods/getPlatformSort",getStoreSort:"/mall/merchant.MallGoods/getMerchantSort",getPrepareList:"/mall/merchant.MallPrepare/getPrepareList",updatePrepare:"/mall/merchant.MallPrepare/addPrepare",prepareChangeState:"/mall/merchant.MallPrepare/changeState",removePrepare:"/mall/merchant.MallPrepare/del",getPrepareInfo:"/mall/merchant.MallPrepare/edit",getReachedList:"/mall/merchant.MallReached/getReachedList",updateReachedList:"/mall/merchant.MallReached/addReached",getReachedInfo:"/mall/merchant.MallReached/edit",reachedChangeState:"/mall/merchant.MallReached/changeState",reachedDel:"/mall/merchant.MallReached/del",addRobot:"/mall/merchant.MallGroup/addRobot",delRobot:"/mall/merchant.MallGroup/delRobot",getRobotList:"/mall/merchant.MallGroup/getRobotList",getRobotName:"/mall/merchant.MallGroup/getRobotName",getUploadImages:"/common/common.UploadFile/getUploadImages",getGoodsSort:"/mall/merchant.MallGoods/getMerchantSort",getGoodsStatus:"/mall/merchant.MallGoods/getNumbers",getGoodsList:"/mall/merchant.MallGoods/getGoodsList",changeGoodsStatus:"/mall/merchant.MallGoods/setStatusLot",setVirtualSales:"/mall/merchant.MallGoods/setVirtualSales",changeGoodsSort:"/mall/merchant.MallGoods/setSort",getGoodsSkuPrice:"/mall/merchant.MallGoods/getGoodsSkuInfo",changeGoodsPrice:"/mall/merchant.MallGoods/setGoodsSkuInfo",getPlatProps:"/mall/merchant.MallGoods/getPlatformProperties",getFreightList:"/mall/merchant.MallGoods/getfreightList",getServiceList:"/mall/merchant.MallGoods/dealService",removeGoods:"/mall/merchant.MallGoods/delGoods",updateGoods:"/mall/merchant.MallGoods/addOrEditGoods",exportGoods:"/mall/merchant.MallGoods/exportGoods",getGoodsInfo:"/mall/merchant.MallGoods/getEditGoods",getGroupList:"/mall/merchant.MallGroup/getGroupList",groupAdd:"/mall/merchant.MallGroup/addGroup",groupChangeState:"/mall/merchant.MallGroup/changeState",groupDel:"/mall/merchant.MallGroup/del",getGroupInfo:"/mall/merchant.MallGroup/editDetail",getPeriodicList:"/mall/merchant.MallPeriodic/getPeriodicList",updatePeriodic:"/mall/merchant.MallPeriodic/addPeriodic",periodicChangeState:"/mall/merchant.MallPeriodic/changeState",removePeriodic:"/mall/merchant.MallPeriodic/del",getPeriodicInfo:"/mall/merchant.MallPeriodic/edit",getBargainList:"/mall/merchant.MallBargain/getBargainList",bargainAdd:"/mall/merchant.MallBargain/addBargain",bargainChangeState:"/mall/merchant.MallBargain/changeState",bargainDel:"/mall/merchant.MallBargain/del",getBargainInfo:"/mall/merchant.MallBargain/editDetail",getMinusDiscountList:"/mall/merchant.MallFullMinusDiscount/getFullMinusDiscountList",updateMinusDiscount:"/mall/merchant.MallFullMinusDiscount/addFullMinusDiscount",minusDiscountChangeState:"/mall/merchant.MallFullMinusDiscount/changeState",removeMinusDiscount:"/mall/merchant.MallFullMinusDiscount/del",getMinusDiscountInfo:"/mall/merchant.MallFullMinusDiscount/edit",getLimitedList:"/mall/merchant.MallLimited/getLimitedList",updateLimited:"/mall/merchant.MallLimited/addLimited",limitedChangeState:"/mall/merchant.MallLimited/changeState",removeLimited:"/mall/merchant.MallLimited/del",getLimitedInfo:"/mall/merchant.MallLimited/edit",getGoodsSortList:"/mall/merchant.MallGoodsSort/getSortList",delGoodsSort:"/mall/merchant.MallGoodsSort/delSort",editGoodsSort:"/mall/merchant.MallGoodsSort/addOrEditSort",getEditSort:"/mall/merchant.MallGoodsSort/getEditSort",editSort:"/mall/merchant.MallGoodsSort/saveSort",saveStatus:"/mall/merchant.MallGoodsSort/saveStatus",getAllGoodsSort:"/mall/merchant.MallGoodsSort/getSort",getStoreList:"/mall/merchant.MallMerchantReply/getStores",getReplyList:"/mall/merchant.MallMerchantReply/searchReply",addComment:"/mall/merchant.MallMerchantReply/merchantReply",getReplyDetails:"/mall/merchant.MallMerchantReply/getReplyDetails",getShowHomePage:"/mall/merchant.MallMerchantReply/getShowHomePage",getQualityReviews:"/mall/merchant.MallMerchantReply/getQualityReviews",getShowHomePageCancel:"/mall/merchant.MallMerchantReply/getShowHomePageCancel",getQualityReviewsCancel:"/mall/merchant.MallMerchantReply/getQualityReviewsCancel",getOrderList:"/mall/merchant.MallOrder/searchOrders",getOrderDetails:"/mall/merchant.MallOrder/getOrderDetails",getCollect:"/mall/merchant.MallOrder/getCollect",getDiscount:"/mall/merchant.MallOrder/getDiscount",exportOrder:"/mall/merchant.MallOrder/exportOrder ",deleteJudge:"/mall/merchant.MallGoods/deleteJudge ",getTemplateList:"/mall/merchant.ExpressTemplate/index",getTemplateAreaList:"/mall/merchant.ExpressTemplate/ajax_area",getTemplateAreaNameList:"/mall/merchant.ExpressTemplate/get_area_name",addTemplate:"/mall/merchant.ExpressTemplate/save",editTemplate:"/mall/merchant.ExpressTemplate/edit",delTemplate:"/mall/merchant.ExpressTemplate/delete",goodsBatch:"/mall/merchant.MallGoods/goodsBatch",viewLogistics:"/mall/merchant.MallOrder/viewLogistics",orderPrintTicket:"/mall/merchant.MallOrder/printOrder",getExpress:"/mall/merchant.MallOrder/getExpress",deliverGoodsByExpress:"/mall/merchant.MallOrder/deliverGoodsByExpress"};t["a"]=a},4106:function(e,t,r){var a=r("4aad"),s=r("6751"),o=r("4b17"),i=r("76dd");function l(e,t,r){e=i(e),t=o(t);var l=t?s(e):0;return t&&l<t?a(t-l,r)+e:e}e.exports=l},"4aad":function(e,t,r){var a=r("b0a8"),s=r("ce86"),o=r("c32f"),i=r("aaec"),l=r("6751"),n=r("126d"),d=Math.ceil;function c(e,t){t=void 0===t?" ":s(t);var r=t.length;if(r<2)return r?a(t,e):t;var c=a(t,d(e/l(t)));return i(t)?o(n(c),0,e).join(""):c.slice(0,e)}e.exports=c},"4e5c":function(e,t,r){},5688:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1,footer:null},on:{cancel:e.handleCancel}},[r("a-list",{staticStyle:{"max-height":"500px","overflow-y":"auto"},attrs:{bordered:"","data-source":e.periodicList.deliver_msg,"item-layout":"vertical"},scopedSlots:e._u([{key:"renderItem",fn:function(t){return r("a-list-item",{},[r("div",{staticClass:"text-center width-auto mb-20 fs-16"},[e._v(" "+e._s(e.moment(t.deliver_date).format("YYYY年MM月"))+" ")]),t.deliver_list&&t.deliver_list.length?r("div",{staticClass:"flex align-center flex-wrap width-auto"},e._l(t.deliver_list,(function(t,a){return r("div",{key:a,staticClass:"flex flex-column align-center mb-20 deliver-item"},[r("span",{staticClass:"date-num",class:4==t.deliver_status?"active":""},[e._v(" "+e._s(t.date_num)+" ")]),r("span",[e._v(e._s(e._f("deliverStatusOpt")(t.deliver_status)))])])})),0):e._e()])}}])})],1)],1)},s=[],o=(r("d3b7"),r("99af"),r("4031")),i=r("c1df"),l=r.n(i),n=[{status:0,label:"待发货"},{status:1,label:"备货中"},{status:2,label:"待收货"},{status:3,label:"已顺延"},{status:4,label:"已收货"}],d={props:{visible:Boolean,order:Object},data:function(){return{title:"配送周期",periodicList:""}},filters:{deliverStatusOpt:function(e){var t="";return n.forEach((function(r){r.status==e&&(t=r.label)})),t}},created:function(){this.getPeriodicList()},methods:{moment:l.a,getPeriodicList:function(){var e=this;this.request(o["a"].getPeriodicList,{order_id:this.order.order_id,store_id:this.order.store_id}).then((function(t){if(e.periodicList=t||"",t){var r=t.nums,a=void 0===r?0:r,s=t.complete_num,o=void 0===s?0:s;e.title="".concat(e.title,"（共").concat(a,"期，已送").concat(o,"期）")}}))},handleCancel:function(){this.$emit("handleCancel")}}},c=d,m=(r("01a7"),r("2877")),p=Object(m["a"])(c,a,s,!1,null,"0cdf5fda",null);t["default"]=p.exports},"5f66":function(e,t,r){"use strict";var a={getOrderList:"/mall/storestaff.MallOrder/getOrderList",exportOrder:"/mall/storestaff.MallOrder/exportOrder",orderTaking:"/mall/storestaff.MallOrder/orderTaking",deliverGoodsByHouseman:"/mall/storestaff.MallOrder/deliverGoodsByHouseman",staffVerify:"/mall/storestaff.MallOrder/staffVerify",postponeDelivery:"/mall/storestaff.MallOrder/postponeDelivery",agreeRefund:"/mall/storestaff.MallOrder/AgreeRefund",getExpress:"/mall/storestaff.MallOrder/getExpress",deliverGoodsByExpress:"/mall/storestaff.MallOrder/deliverGoodsByExpress",viewLogistics:"/mall/storestaff.MallOrder/viewLogistics",refuseRefund:"/mall/storestaff.MallOrder/RefuseRefund",clerkDiscount:"/mall/storestaff.MallOrder/clerkDiscount",getOrderDetails:"/mall/storestaff.MallOrder/getOrderDetails",clerkNotes:"/mall/storestaff.MallOrder/clerkNotes",getPeriodicList:"/mall/storestaff.MallOrder/getPeriodicList",downExcel:"/mall/storestaff.MallOrder/downExcel",downFailExcel:"/mall/storestaff.MallOrder/downFailExcel",uploadUrl:"/common/common.UploadFile/uploadFile",uploadExcel:"/mall/storestaff.MallOrder/uploadFile",getList:"/mall/storestaff.MallOrder/shopGoodsBatchLogList",getOrderListCopy:"/mall/storestaff.MallOrder/getOrderListCopy",getOrderDetailsCopy:"/mall/storestaff.MallOrder/getOrderDetailsCopy",orderPrintTicket:"/mall/storestaff.MallOrder/printOrder"};t["a"]=a},6751:function(e,t,r){var a=r("c9ca"),s=r("aaec"),o=r("ab81");function i(e){return s(e)?o(e):a(e)}e.exports=i},"6da8":function(e,t){function r(e){return e.split("")}e.exports=r},9065:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1},on:{ok:e.handleOk,cancel:e.handleCancel}},[r("a-form-model",{attrs:{model:e.formData,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{attrs:{label:""}},[r("a-input",{staticStyle:{height:"200px",resize:"none"},attrs:{type:"textarea",autosize:"",placeholder:"请输入拒绝理由"},model:{value:e.formData.reason,callback:function(t){e.$set(e.formData,"reason",t)},expression:"formData.reason"}})],1)],1)],1)],1)},s=[],o=r("5f66"),i={props:{visible:Boolean,title:String,order:Object},data:function(){return{labelCol:{span:0},wrapperCol:{span:24},formData:{order_id:"",reason:"",status:""},expressOptions:[]}},created:function(){},methods:{handleOk:function(){var e=this;this.formData.reason?(this.$set(this.formData,"order_id",this.order.order_id),this.$set(this.formData,"status",this.order.status),this.request(o["a"].refuseRefund,this.formData).then((function(t){e.$message.success("操作成功"),e.$emit("handleCancel"),e.$emit("updateList")}))):this.$message.error("请输入拒绝理由")},handleCancel:function(){this.$emit("handleCancel"),Object.assign(this.$data,this.$options.data())}}},l=i,n=r("2877"),d=Object(n["a"])(l,a,s,!1,null,"6bcd1f29",null);t["default"]=d.exports},"93f2":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1,destroyOnClose:!0,width:"60%",bodyStyle:{maxHeight:"70vh",overflowY:"auto"}},on:{cancel:e.handleCancel}},[r("a-form-model",{attrs:{model:e.formData,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},e._l(e.formData.extra_delivery,(function(t,a){return r("div",{key:t.key},[r("a-form-model-item",{attrs:{label:"快递"}},[r("div",{staticClass:"flex"},[r("a-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择"},on:{change:function(t){return e.hanleChange(t,a)}},model:{value:t.express_id,callback:function(r){e.$set(t,"express_id",r)},expression:"item.express_id"}},e._l(e.expressOptions,(function(t){return r("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+e._s("1"==t.is_singface?"（电子面单）":"")+" ")])})),1),0!=a?r("a-button",{staticClass:"ml-10",attrs:{type:"danger"},on:{click:function(t){return e.handleExpress("del",a)}}},[e._v("删除")]):e._e()],1)]),r("a-form-model-item",{attrs:{label:"快递单号"}},[r("a-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入快递单号"},model:{value:t.express_no,callback:function(r){e.$set(t,"express_no",r)},expression:"item.express_no"}})],1),r("a-form-model-item",{attrs:{label:"发货商品",help:"不选择，为空表示发货所有商品。"}},[r("a-select",{staticStyle:{width:"80%"},attrs:{mode:"multiple",placeholder:"请选择"},model:{value:t.order_detail_ids,callback:function(r){e.$set(t,"order_detail_ids",r)},expression:"item.order_detail_ids"}},e._l(e.goodsList,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.show_name)+" ")])})),1)],1)],1)})),0),r("template",{slot:"footer"},[r("div",{staticClass:"flex justify-center align-center"},[r("a-button",{key:"add",staticClass:"mr-20",on:{click:function(t){return e.handleExpress("add")}}},[e._v(" 添加快递 ")]),r("a-button",{key:"back",staticClass:"mr-20",on:{click:function(t){return e.btnOpt(2)}}},[e._v(" 普通发货 ")]),r("a-button",{key:"submit",attrs:{type:"primary",disabled:e.isCanSingface},on:{click:function(t){return e.btnOpt(1)}}},[e._v(" 电子面单发货 ")])],1)])],2)},s=[],o=r("5530"),i=(r("a9e3"),r("d81d"),r("ac1f"),r("1276"),r("d3b7"),r("159b"),r("b0c0"),r("a15b"),r("5f66")),l=r("4031"),n={props:{visible:Boolean,title:String,order:Object,nowPeriodicItem:{type:Object,default:{}},fh_type:[String,Number],pageType:{type:String,default:"storestaff"}},data:function(){return{labelCol:{span:4},wrapperCol:{span:16},formData:{order_id:"",activity_type:"",periodic_order_id:"",current_periodic:"",periodic_count:"",express_type:"",express_no:"",express_id:"",express_name:"",fh_type:"1",extra_delivery:[{express_id:void 0,express_name:"",express_no:"",order_detail_ids:[],is_singface:0,key:0}]},expressOptions:[]}},computed:{goodsList:function(){var e=this.order.children||[];return e.length&&(e=e.map((function(e){return e.show_name=e.goods_name,e.sku_info&&(e.show_name=e.show_name+"(".concat(e.sku_info,")")),e}))),e},isCanSingface:function(){var e=!1;return(2==this.fh_type||this.formData.extra_delivery.length>1||1!=this.formData.extra_delivery[0]["is_singface"])&&(e=!0),e}},created:function(){this.getExpress()},methods:{getExpress:function(){var e=this,t={merchant:l["a"].getExpress,storestaff:i["a"].getExpress};this.request(t[this.pageType],{}).then((function(t){e.expressOptions=t||[],e.handleExtraDelivery()}))},handleExtraDelivery:function(){if(2==this.fh_type){this.$set(this.formData,"express_id",this.order.express_id||""),this.$set(this.formData,"express_no",this.order.express_num||""),this.$set(this.formData,"express_name",this.order.express_name||"");var e=[];if(e="periodic"==this.order.goods_activity_type&&this.nowPeriodicItem?this.nowPeriodicItem.delivery||[]:this.order.delivery||[],Array.isArray(e)&&e.length){var t=e.map((function(e,t){var r=e.order_detail_ids?e.order_detail_ids.split(","):[];return r.length&&(r=r.map((function(e){return e-0}))),{express_id:e.express_id,express_name:e.express_name,express_no:e.express_num,order_detail_ids:r,key:t}}));this.$set(this.formData,"extra_delivery",t)}else if("periodic"!=this.order.goods_activity_type&&this.order.express_id){var r=[{express_id:this.order.express_id,express_name:this.order.express_name,express_no:this.order.express_num,order_detail_ids:[],key:0}];this.$set(this.formData,"extra_delivery",r)}}console.log("this.formData",this.formData)},hanleChange:function(e,t){var r=this.formData.extra_delivery[t];r.express_id=e,this.expressOptions.forEach((function(t){t.id==e&&(r.express_name=t.name,r.is_singface=t.is_singface)})),this.$set(this.formData.extra_delivery,t,r)},btnOpt:function(e){var t=this;this.$set(this.formData,"express_type",e);var r=this.formData.extra_delivery.some((function(e){return!e.express_id}));if(r)this.$message.error("请选择快递");else{if(2==e){if(this.formData.extra_delivery.some((function(e){return!e.express_no})))return void this.$message.error("请输入快递单号");var a=/[\u4e00-\u9fa5]/;if(this.formData.extra_delivery.some((function(e){return a.test(e.express_no)})))return void this.$message.error("不能输入中文")}var s=this.formData.extra_delivery.map((function(e){return{express_id:e.express_id,express_no:e.express_no,order_detail_ids:e.order_detail_ids.length?e.order_detail_ids.join(","):"",express_name:e.express_name}})),n=this.order,d=n.order_id,c=n.goods_activity_type,m=n.order_type,p=n.current_periodic,f=n.periodic_count,u=this.nowPeriodicItem&&this.nowPeriodicItem.purchase_order_id?this.nowPeriodicItem.purchase_order_id:"";this.$set(this.formData,"order_id",d),this.$set(this.formData,"activity_type",c),"periodic"==m&&(this.$set(this.formData,"periodic_order_id",u),this.$set(this.formData,"current_periodic",p),this.$set(this.formData,"periodic_count",f)),this.$set(this.formData,"fh_type",this.fh_type);var _=Object(o["a"])(Object(o["a"])({},this.formData),{},{express_id:s[0].express_id,express_no:s[0].express_no,express_name:s[0].express_name,extra_delivery:2==e?s:[],store_id:this.order.store_id||""}),h={merchant:l["a"].deliverGoodsByExpress,storestaff:i["a"].deliverGoodsByExpress};this.request(h[this.pageType],_).then((function(e){var r="1"==t.fh_type?"订单发货成功":"快递更改成功";t.$message.success(r),t.handleCancel(),t.$emit("updateList")}))}},handleCancel:function(){this.$emit("handleCancel"),this.formData={order_id:"",activity_type:"",periodic_order_id:"",current_periodic:"",periodic_count:"",express_type:"",express_no:"",express_id:"",express_name:"",fh_type:"1",extra_delivery:[{express_id:void 0,express_name:"",express_no:"",order_detail_ids:[],is_singface:0,key:0}]}},handleExpress:function(e,t){if("add"==e){var r=this.formData.extra_delivery;r.push({express_id:void 0,express_name:"",express_no:"",order_detail_ids:[],is_singface:0,key:r.length}),this.$set(this.formData,"extra_delivery",r)}"del"==e&&this.$delete(this.formData.extra_delivery,t)}}},d=n,c=r("2877"),m=Object(c["a"])(d,a,s,!1,null,"3648c2eb",null);t["default"]=m.exports},"99de":function(e,t,r){},"9c6e":function(e,t,r){},a8ba:function(e,t,r){"use strict";var a=r("41b2"),s=r.n(a),o=r("4d91"),i=r("daa3"),l=r("9cba"),n=r("07a9"),d=r.n(n),c={name:"AStatisticNumber",functional:!0,render:function(e,t){var r=t.props,a=r.value,s=r.formatter,o=r.precision,i=r.decimalSeparator,l=r.groupSeparator,n=void 0===l?"":l,c=r.prefixCls,m=void 0;if("function"===typeof s)m=s({value:a,h:e});else{var p=String(a),f=p.match(/^(-?)(\d*)(\.(\d+))?$/);if(f){var u=f[1],_=f[2]||"0",h=f[4]||"";_=_.replace(/\B(?=(\d{3})+(?!\d))/g,n),"number"===typeof o&&(h=d()(h,o,"0").slice(0,o)),h&&(h=""+i+h),m=[e("span",{key:"int",class:c+"-content-value-int"},[u,_]),h&&e("span",{key:"decimal",class:c+"-content-value-decimal"},[h])]}else m=p}return e("span",{class:c+"-content-value"},[m])}},m={prefixCls:o["a"].string,decimalSeparator:o["a"].string,groupSeparator:o["a"].string,format:o["a"].string,value:o["a"].oneOfType([o["a"].string,o["a"].number,o["a"].object]),valueStyle:o["a"].any,valueRender:o["a"].any,formatter:o["a"].any,precision:o["a"].number,prefix:o["a"].any,suffix:o["a"].any,title:o["a"].any},p={name:"AStatistic",props:Object(i["t"])(m,{decimalSeparator:".",groupSeparator:","}),inject:{configProvider:{default:function(){return l["a"]}}},render:function(){var e=arguments[0],t=this.$props,r=t.prefixCls,a=t.value,o=void 0===a?0:a,l=t.valueStyle,n=t.valueRender,d=this.configProvider.getPrefixCls,m=d("statistic",r),p=Object(i["g"])(this,"title"),f=Object(i["g"])(this,"prefix"),u=Object(i["g"])(this,"suffix"),_=Object(i["g"])(this,"formatter",{},!1),h=e(c,{props:s()({},this.$props,{prefixCls:m,value:o,formatter:_})});return n&&(h=n(h)),e("div",{class:m},[p&&e("div",{class:m+"-title"},[p]),e("div",{style:l,class:m+"-content"},[f&&e("span",{class:m+"-content-prefix"},[f]),h,u&&e("span",{class:m+"-content-suffix"},[u])])])}},f=r("92fa"),u=r.n(f),_=r("c1df"),h=r("2cf8"),g=r("b24f"),v=r.n(g),y=r("4106"),b=r.n(y),x=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function M(e,t){var r=e,a=/\[[^\]]*\]/g,s=(t.match(a)||[]).map((function(e){return e.slice(1,-1)})),o=t.replace(a,"[]"),i=x.reduce((function(e,t){var a=v()(t,2),s=a[0],o=a[1];if(-1!==e.indexOf(s)){var i=Math.floor(r/o);return r-=i*o,e.replace(new RegExp(s+"+","g"),(function(e){var t=e.length;return b()(i.toString(),t,"0")}))}return e}),o),l=0;return i.replace(a,(function(){var e=s[l];return l+=1,e}))}function I(e,t){var r=t.format,a=void 0===r?"":r,s=Object(h["a"])(_)(e).valueOf(),o=Object(h["a"])(_)().valueOf(),i=Math.max(s-o,0);return M(i,a)}var S=1e3/30;function w(e){return Object(h["a"])(_)(e).valueOf()}var C={name:"AStatisticCountdown",props:Object(i["t"])(m,{format:"HH:mm:ss"}),created:function(){this.countdownId=void 0},mounted:function(){this.syncTimer()},updated:function(){this.syncTimer()},beforeDestroy:function(){this.stopTimer()},methods:{syncTimer:function(){var e=this.$props.value,t=w(e);t>=Date.now()?this.startTimer():this.stopTimer()},startTimer:function(){var e=this;this.countdownId||(this.countdownId=window.setInterval((function(){e.$refs.statistic.$forceUpdate(),e.syncTimer()}),S))},stopTimer:function(){var e=this.$props.value;if(this.countdownId){clearInterval(this.countdownId),this.countdownId=void 0;var t=w(e);t<Date.now()&&this.$emit("finish")}},formatCountdown:function(e){var t=e.value,r=e.config,a=this.$props.format;return I(t,s()({},r,{format:a}))},valueRenderHtml:function(e){return e}},render:function(){var e=arguments[0];return e(p,u()([{ref:"statistic"},{props:s()({},this.$props,{valueRender:this.valueRenderHtml,formatter:this.formatCountdown}),on:Object(i["k"])(this)}]))}},D=r("db14");p.Countdown=C,p.install=function(e){e.use(D["a"]),e.component(p.name,p),e.component(p.Countdown.name,p.Countdown)};t["a"]=p},aaec:function(e,t){var r="\\ud800-\\udfff",a="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",i=a+s+o,l="\\ufe0e\\ufe0f",n="\\u200d",d=RegExp("["+n+r+i+l+"]");function c(e){return d.test(e)}e.exports=c},ab81:function(e,t){var r="\\ud800-\\udfff",a="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",i=a+s+o,l="\\ufe0e\\ufe0f",n="["+r+"]",d="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",m="(?:"+d+"|"+c+")",p="[^"+r+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",_="\\u200d",h=m+"?",g="["+l+"]?",v="(?:"+_+"(?:"+[p,f,u].join("|")+")"+g+h+")*",y=g+h+v,b="(?:"+[p+d+"?",d,f,u,n].join("|")+")",x=RegExp(c+"(?="+c+")|"+b+y,"g");function M(e){var t=x.lastIndex=0;while(x.test(e))++t;return t}e.exports=M},b0a8:function(e,t){var r=9007199254740991,a=Math.floor;function s(e,t){var s="";if(!e||t<1||t>r)return s;do{t%2&&(s+=e),t=a(t/2),t&&(e+=e)}while(t);return s}e.exports=s},b886:function(e,t,r){},bf5f:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.orderInfo?r("div",{staticClass:"pt-20 pl-20 pr-20 pb-20 bg-ff mt-10"},[r("a-descriptions",{attrs:{title:"",column:4}},[60==e.orderInfo.order_status||70==e.orderInfo.order_status?r("a-descriptions-item",{attrs:{label:"订单编号"}},[e._v(" "+e._s(e.orderInfo.real_order_no)+" ")]):e._e(),e.orderInfo.order_no?r("a-descriptions-item",{attrs:{label:60==e.orderInfo.order_status||70==e.orderInfo.order_status?"退款编号":"订单编号"}},[e._v(" "+e._s(e.orderInfo.order_no)+" ")]):e._e(),e.orderInfo.pay_orderno?r("a-descriptions-item",{attrs:{label:"第三方支付号"}},[e._v(" "+e._s(e.orderInfo.pay_orderno)+" ")]):e._e(),r("a-descriptions-item",{attrs:{label:60==e.orderInfo.order_status||70==e.orderInfo.order_status?"申请时间":"下单时间"}},[e._v(" "+e._s(60==e.orderInfo.order_status||70==e.orderInfo.order_status?e.orderInfo.refund_time:e.orderInfo.create_time)+" ")]),e.orderInfo.order_type_txt?r("a-descriptions-item",{attrs:{label:"订单类型"}},[e._v(" "+e._s(e.orderInfo.order_type_txt)+" ")]):e._e(),e.orderInfo.store_name?r("a-descriptions-item",{attrs:{label:"店铺名称"}},[e._v(" "+e._s(e.orderInfo.store_name)+" ")]):e._e()],1),r("a-row",{staticClass:"mt-30"},[r("a-card",{staticClass:"a-card"},[r("a-row",{attrs:{type:"flex"}},[r("a-col",{staticClass:"border-right card-item",attrs:{span:6}},[r("div",{staticClass:"order-status cr-black text-center"},[r("span",[e._v(e._s(e.orderInfo.current_periodic&&"periodic"==e.orderInfo.order_type?"第"+e.orderInfo.current_periodic+"期":"")+" "+e._s(e.orderInfo.order_status_txt)+" ")])]),r("div",{staticClass:"text-center"},[60==e.orderInfo.order_status&&e.orderInfo.rest_time?r("span",{staticClass:"flex align-center countdown mt-10 justify-center"},[r("span",[e._v("请在")]),r("span",{staticClass:"cr-red"},[r("a-statistic-countdown",{attrs:{title:"",value:e.orderInfo.rest_time,format:"D天H时m分s秒",valueStyle:e.valueStyle},on:{finish:e.finish}})],1),r("span",[e._v("内处理完成，超时将自动同意")])]):e._e(),2==e.orderInfo.express_style&&"prepare"==e.orderInfo.goods_activity_type?r("span",{staticClass:"cr-red fs-16 mt-10"},[e._v(" 发货时间："+e._s(e.moment(e.orderInfo.send_time).format("YYYY-MM-DD HH:mm")||"---")+" ")]):e._e(),1==e.orderInfo.express_style?r("span",[e._v(" 期望送达时间："+e._s(e.orderInfo.express_send_time||"---")+" ")]):e._e(),-1!=[10,11,20,40].indexOf(Number(e.orderInfo.order_status))&&"periodic"==e.orderInfo.order_type&&e.orderInfo.current_time?r("span",{staticClass:"cr-red fs-16 mt-10"},[e._v(e._s(e.moment(e.orderInfo.current_time).format("YYYY.MM.DD"))+"送达 ")]):e._e(),e.desc?r("span",{staticClass:"fs-16 mt-10"},[e._v(e._s(e.desc))]):e._e()]),r("a-row",{staticClass:"mt-20",attrs:{type:"flex",justify:"center",align:"middle"}},e._l(e.btnList,(function(t){return r("span",{key:t.props},[1==t.show?r("a-button",{staticClass:"ml-10 mr-10",attrs:{type:t.type},on:{click:function(r){return e.btnOpt(t)}}},[e._v(" "+e._s(t.label)+" ")]):e._e()],1)})),0),r("a-row",{staticClass:"mt-20",attrs:{type:"flex",justify:"center",align:"middle"}},[20==e.orderInfo.order_status&&2==e.orderInfo.express_style&&"periodic"!=e.orderInfo.order_type?r("a-button",{attrs:{type:"link"},on:{click:e.editDeliverGoodsByExpress}},[e._v(" 修改物流单号 ")]):e._e()],1)],1),r("a-col",{staticClass:"card-item",attrs:{span:16}},[r("div",{staticClass:"flex align-center justify-center",staticStyle:{height:"100%"}},[r("a-steps",{attrs:{"progress-dot":60!=e.orderInfo.order_status&&70!=e.orderInfo.order_status,current:e.current}},e._l(e.step,(function(t){return r("a-step",{key:t.props,attrs:{title:t.title,description:e.orderInfo[t.props]}})})),1)],1)])],1)],1)],1),60!=e.orderInfo.order_status&&70!=e.orderInfo.order_status?r("a-row",{staticClass:"mt-20"},[r("a-card",[r("a-row",[r("a-col",{staticClass:"fs-18",attrs:{span:8}},[r("span",{staticClass:"cr-black"},[e._v("买家备注：")]),r("span",[e._v(e._s(e.orderInfo.remark||"无"))])]),r("a-col",{attrs:{span:4}}),r("a-col",{staticClass:"fs-18",attrs:{span:8}},[r("span",{staticClass:"cr-black"},[e._v("店员备注：")]),r("span",[e._v(e._s(e.orderInfo.clerk_remark||"无"))])])],1)],1)],1):e._e(),r("a-row",{staticClass:"mt-20 a-card"},[r("a-card",[r("a-row",{attrs:{type:"flex"}},[r("a-col",{attrs:{span:6}},[r("a-row",{staticClass:"card-item"},[r("a-col",{staticClass:"mb-20"},[r("h2",{staticClass:"fs-18"},[e._v(" "+e._s(60==e.orderInfo.order_status||70==e.orderInfo.order_status?"退款原因":"收货信息")+" ")])]),r("a-col",{staticClass:"pr-10"},[60==e.orderInfo.order_status||70==e.orderInfo.order_status?r("div",[e.orderInfo.refund_reason?r("span",{staticClass:"descriptions-item descriptions-item-content"},[e._v(" "+e._s(e.orderInfo.refund_reason)+" ")]):e._e(),e.orderInfo.refund_images&&e.orderInfo.refund_images.length?r("span",e._l(e.orderInfo.refund_images,(function(e,t){return r("a-card",{key:t,staticStyle:{width:"240px"}},[r("img",{attrs:{slot:"cover",alt:"image",src:e},slot:"cover"})])})),1):e._e()]):r("a-descriptions",{attrs:{title:"",column:1}},[r("a-descriptions-item",{attrs:{label:"收货人"}},[e._v(" "+e._s(e.orderInfo.username||"---")+" ")]),r("a-descriptions-item",{attrs:{label:"注册电话"}},[e._v(" "+e._s(e.orderInfo.zc_phone||"---")+" ")]),r("a-descriptions-item",{attrs:{label:"收货电话"}},[e._v(" "+e._s(e.orderInfo.sh_phone||"---")+" ")]),3!=e.orderInfo.express_style?r("a-descriptions-item",{attrs:{label:"收货地址"}},[e._v(" "+e._s(e.orderInfo.address||"---")+" ")]):e._e(),3==e.orderInfo.express_style?r("a-descriptions-item",{attrs:{label:"自提地址"}},[e._v(" "+e._s(e.orderInfo.take_address||"---")+" ")]):e._e()],1)],1)],1)],1),r("a-col",{staticClass:"border-dash",attrs:{span:10}},[r("a-row",{staticClass:"card-item"},[r("a-col",{staticClass:"mb-20"},[r("h2",{staticClass:"fs-18"},[e._v(" "+e._s(60==e.orderInfo.order_status||70==e.orderInfo.order_status?"退款信息":"付款信息")+" ")])]),r("a-col",{staticClass:"pr-10"},[r("a-descriptions",{attrs:{title:""}},[e.orderInfo.periodic_count&&e.orderInfo.order_type&&"periodic"==e.orderInfo.order_type?r("a-descriptions-item",{attrs:{label:"周期购期数"}},[r("span",{staticClass:"flex align-center"},[r("span",[e._v("共计")]),r("span",{staticClass:"cr-black fw-bold"},[e._v(" "+e._s(e.orderInfo.periodic_count)+" ")]),r("span",[e._v("期")])])]):e._e(),r("a-descriptions-item",{attrs:{label:"商品总金额"}},[e._v(" "+e._s(e.currency)+e._s(e.orderInfo.money_total)+" ")]),"prepare"==e.orderInfo.order_type&&e.orderInfo.bargain_price&&0!=e.orderInfo.bargain_price?r("a-descriptions-item",{attrs:{label:""}},[e._v(" 定金"+e._s(e.currency)+e._s(e.orderInfo.bargain_price)+" "),e.orderInfo.deduct_price&&0!=e.orderInfo.deduct_price?r("span",[e._v("抵"+e._s(e.currency)+e._s(e.orderInfo.deduct_price))]):e._e()]):e._e(),e.orderInfo.discount_total&&0!=e.orderInfo.discount_total?r("a-descriptions-item",{on:{click:function(t){e.discountTotalVisible=!e.discountTotalVisible}}},[r("span",{staticClass:"pointer",attrs:{slot:"label"},slot:"label"},[r("a-popover",{attrs:{title:"",trigger:"click"},model:{value:e.discountTotalVisible,callback:function(t){e.discountTotalVisible=t},expression:"discountTotalVisible"}},[r("span",{attrs:{slot:"content"},slot:"content"},[r("a-list",{attrs:{"item-layout":"horizontal","data-source":e.discountList},scopedSlots:e._u([{key:"renderItem",fn:function(t){return t.value&&0!=t.value?r("a-list-item",{staticClass:"flex"},[r("a-badge",{attrs:{color:"red",text:t.label+"："+e.currency+t.value}})],1):e._e()}}],null,!0)})],1),r("span",[e._v("总优惠金额"),r("a-icon",{attrs:{type:"exclamation-circle"}})],1)])],1),e._v(" -"+e._s(e.currency)+e._s(e.orderInfo.discount_total)+" ")]):e._e(),e.orderInfo.money_freight&&0!=e.orderInfo.money_freight?r("a-descriptions-item",{attrs:{label:"运费"}},[e._v(" +"+e._s(e.currency)+e._s(e.orderInfo.money_freight)+" ")]):e._e()],1),"prepare"==e.orderInfo.order_type&&e.orderInfo.bargain_price&&0!=e.orderInfo.bargain_price&&e.orderInfo.order_status>=0&&e.orderInfo.order_status<10?r("a-descriptions",{attrs:{title:"",column:1}},[r("a-descriptions-item",{staticClass:"fw-bold"},[r("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("已支付定金")]),r("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(e._s(e.currency)+e._s(e.orderInfo.bargain_price))])])],1):e._e(),r("a-descriptions",{attrs:{title:"",column:2}},[r("a-descriptions-item",[r("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[0==e.orderInfo.order_status?r("span",[e._v("待付款")]):e._e(),1==e.orderInfo.order_status?r("span",[e._v("尾款待付款")]):e._e(),e.orderInfo.order_status>=10?r("span",[e._v("实付款")]):e._e()]),r("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(" "+e._s(e.currency)+e._s(e.orderInfo.money_real)+" ")])]),e.orderInfo.is_refund?r("a-descriptions-item",{staticClass:"fw-bold"},[1==e.orderInfo.all_refund?r("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("全部退款金额")]):e._e(),0==e.orderInfo.all_refund?r("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("部分退款金额")]):e._e(),1==e.orderInfo.all_refund?r("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(e._s(e.currency)+e._s(e.orderInfo.refund_money))]):e._e(),0==e.orderInfo.all_refund?r("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(e._s(e.currency)+e._s(e.orderInfo.part_refund_money))]):e._e()]):e._e(),e.orderInfo.is_refund&&0!=e.orderInfo.refund_money&&0!=e.orderInfo.refund_money_periodic?r("a-descriptions-item",{staticClass:"fw-bold"},[r("span",{staticClass:"fw-bold fs-18",attrs:{slot:"label"},slot:"label"},[e._v("退款金额")]),r("span",{staticClass:"cr-red fw-bold fs-18"},[e._v(" "+e._s(e.currency)+e._s("periodic"==e.orderInfo.order_type?e.orderInfo.refund_money_periodic:e.orderInfo.refund_money)+" ")])]):e._e()],1),e.orderInfo.order_status>9&&e.payMethods.length?r("a-row",{attrs:{type:"flex",align:"middle"}},e._l(e.payMethods,(function(t){return r("span",{key:t.props,staticClass:"flex justify-between descriptions-item"},[r("span",{staticClass:"mr-20"},[e._v(" "+e._s(t.label)+"："),r("span",{staticClass:"descriptions-item-content"},[e._v(e._s(e.currency)+e._s(t.value||"---"))])])])})),0):e._e(),e.orderInfo.paid_time&&e.orderInfo.order_status>=10||e.orderInfo.paid_time&&"prepare"==e.orderInfo.goods_activity_type?r("a-descriptions",{attrs:{title:"",column:1}},[e.orderInfo.paid_time?r("a-descriptions-item",{attrs:{label:"付款时间"}},[e._v(" "+e._s(e.moment(e.orderInfo.paid_time).format("YYYY-MM-DD HH:mm")||"---")+" ")]):e._e()],1):e._e(),!e.orderInfo.refund_time||60!=e.orderInfo.order_status&&70!=e.orderInfo.order_status?e._e():r("a-descriptions",{attrs:{title:"",column:1}},[r("a-descriptions-item",{attrs:{label:"申请时间"}},[e._v(" "+e._s(e.moment(e.orderInfo.refund_time).format("YYYY-MM-DD HH:mm")||"---")+" ")])],1),e.orderInfo.order_status>=10?r("a-descriptions",{attrs:{title:"",column:1}},[r("a-descriptions-item",{attrs:{label:"付款方式"}},[e._v(" "+e._s(e.orderInfo.pay_type_txt)+" ")])],1):e._e(),e.orderInfo.clert_discount_process&&e.orderInfo.clert_discount_process.length?r("a-row",{attrs:{type:"flex",align:"middle"}},e._l(e.orderInfo.clert_discount_process,(function(t,a){return r("a-col",{key:a,staticClass:"flex justify-between descriptions-item",attrs:{span:12}},[r("span",{staticClass:"mr-10"},[e._v("修改前："),r("span",{staticClass:"descriptions-item-content"},[e._v(e._s(e.currency)+e._s(t.money_before))])]),r("span",[e._v("修改后："),r("span",{staticClass:"descriptions-item-content"},[e._v(e._s(e.currency)+e._s(t.money_after))])])])})),1):e._e(),r("br"),60==e.orderInfo.order_status||70==e.orderInfo.order_status?r("div",[e.orderInfo.username?r("a-col",{staticClass:"pr-10"},[e._v(" 用户名 : "+e._s(e.orderInfo.username)+" ")]):e._e(),e.orderInfo.zc_phone?r("a-col",{staticClass:"pr-10"},[e._v(" 注册电话 : "+e._s(e.orderInfo.zc_phone)+" ")]):e._e(),e.orderInfo.address&&3!=e.orderInfo.express_style?r("a-col",{staticClass:"pr-10"},[e._v(" 收货地址 : "+e._s(e.orderInfo.address)+" ")]):e._e(),e.orderInfo.take_address&&3==e.orderInfo.express_style?r("a-col",{staticClass:"pr-10"},[e._v(" 自提地址 : "+e._s(e.orderInfo.take_address)+" ")]):e._e()],1):e._e()],1)],1)],1),r("a-col",{attrs:{span:8}},[r("a-row",{staticClass:"card-item"},[r("a-col",{staticClass:"flex align-center mb-20"},[r("h2",{staticClass:"fs-18"},[e._v("更多信息")]),"periodic"==e.orderInfo.order_type?r("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(t){e.periodicListVisible=!0}}},[e._v(" 查看配送周期 ")]):e._e()],1),r("a-col",{staticClass:"pr-10"},[r("div",[r("div",[r("span",[e._v("配送方式："+e._s(e.orderInfo.express_style_txt))]),2==e.orderInfo.express_style&&e.orderInfo.delivery&&e.orderInfo.delivery.length?r("a-button",{attrs:{type:"link"},on:{click:function(t){return e.viewLogistics()}}},[e._v(" 查看物流 ")]):e._e()],1),2==e.orderInfo.express_style?r("span",e._l(e.orderInfo.delivery,(function(t,a){return r("p",{key:a},[e._v(" 快递名称："+e._s(t.express_name)),r("br"),e._v(" 快递单号："+e._s(t.express_num)+" ")])})),0):e._e()]),2==e.orderInfo.express_style&&"prepare"==e.orderInfo.goods_activity_type?r("p",[e._v(" 发货时间："+e._s(e.moment(e.orderInfo.send_time).format("YYYY-MM-DD HH:mm")||"---")+" ")]):e._e(),1==e.orderInfo.express_style?r("p",[e._v(" 期望送达时间："+e._s(e.orderInfo.express_send_time||"---")+" ")]):e._e(),e.orderInfo.order_status>=30&&e.orderInfo.order_status<=40&&e.orderInfo.staff_name?r("p",[e._v(" 核销人姓名："+e._s(e.orderInfo.staff_name)+" ")]):e._e()]),e.orderInfo.forms&&e.orderInfo.forms.length?r("a-col",e._l(e.orderInfo.forms,(function(t,a){return r("div",{key:a},[r("a-descriptions",{staticClass:"forms",attrs:{title:"",column:1}},[r("a-descriptions-item",{attrs:{label:t.title}},["text"==t.type?r("span",[e._v(e._s(t.val))]):e._e(),"image"==t.type&&t.val?r("a-card",{staticStyle:{width:"240px"},attrs:{bordered:!1}},[r("img",{attrs:{slot:"cover",alt:"image",src:t.val},slot:"cover"})]):e._e()],1)],1)],1)})),0):e._e()],1)],1)],1)],1)],1),r("a-table",{staticClass:"mt-20 a-table",attrs:{columns:e.goodsColumn,"data-source":e.goodsDataSource,scroll:{y:280},pagination:!1,rowKey:"index"},scopedSlots:e._u([{key:"goodsName",fn:function(t,a){return"periodic"==e.orderInfo.goods_activity_type&&e.orderInfo.order_status<60?r("span",{staticClass:"flex align-center"},[r("a-avatar",{attrs:{shape:"square",size:64,src:a.image}}),r("span",{staticClass:"flex ml-10"},[r("span",[e._v(e._s(a.goods_name))]),a.sku_info.length?r("span",[r("a-divider",{attrs:{type:"vertical"}})],1):e._e(),r("span",[e._v(e._s(a.sku_info))])]),e.orderInfo.periodic_info&&e.orderInfo.periodic_info.length?r("span",{staticClass:"flex ml-10"},[r("a-tag",{attrs:{color:"#f50"}},[e._v("第"+e._s(a.current_periodic)+"期")])],1):e._e()],1):r("span",{staticClass:"flex align-center"},[r("a-avatar",{attrs:{shape:"square",size:64,src:a.image}}),r("span",{staticClass:"flex ml-10"},[r("span",[e._v(e._s(a.goods_name))]),a.sku_info.length?r("span",[r("a-divider",{attrs:{type:"vertical"}})],1):e._e(),r("span",[e._v(e._s(a.sku_info))])]),1==a.is_gift?r("span",[r("a-divider",{attrs:{type:"vertical"}}),r("a-tag",{attrs:{color:"#108ee9"}},[e._v("赠品")])],1):e._e(),a.refund_desc.length?r("span",[r("a-divider",{attrs:{type:"vertical"}}),e._l(a.refund_desc,(function(t,a){return r("a-tag",{key:a,attrs:{color:"red"}},[e._v(" "+e._s(t)+" ")])}))],2):e._e()],1)}},{key:"price",fn:function(t){return r("span",{},[e._v(" "+e._s(e.currency)+e._s(t)+" ")])}},{key:"goods_status_txt",fn:function(t,a){return r("span",{},["periodic"==e.orderInfo.goods_activity_type&&e.orderInfo.order_status<60?r("span",[e._v(" 暂未到下期发货时间 ")]):r("span",[e._v(" "+e._s(t)+" ")])])}},{key:"is_complete_txt",fn:function(t,a){return"periodic"==e.orderInfo.goods_activity_type&&e.orderInfo.order_status<60?r("span",{},[r("span",[e._v(" "+e._s(t)+" ")]),r("a-divider",{attrs:{type:"vertical"}}),r("span",[e._v(" 期望送达时间："+e._s(a.periodic_date)+" ")])],1):e._e()}},{key:"operation",fn:function(t,a){return r("span",{},[a.delivery&&a.delivery.length?r("a-button",{attrs:{type:"link"},on:{click:function(t){return e.viewLogistics(a)}}},[e._v(" 查看物流 ")]):e._e(),20==a.is_complete&&"periodic"==e.orderInfo.order_type?r("a-button",{attrs:{type:"link"},on:{click:function(t){return e.editDeliverGoodsByExpress(a)}}},[e._v(" 修改快递 ")]):e._e()],1)}}],null,!0)}),"express_btn"==e.currentBtn.props?r("deliverGoods",{attrs:{visible:e.deliverGoodsVisible,title:e.currentBtn.title,order:e.orderInfo,fh_type:e.fh_type,nowPeriodicItem:e.nowPeriodicItem,pageType:"merchant"},on:{handleCancel:function(t){e.deliverGoodsVisible=!1,e.currentBtn=""},updateList:e.getOrderDetails}}):e._e(),"trajectory_btn"==e.currentBtn.props||"logistics_btn"==e.currentBtn.props?r("logistics",{attrs:{visible:e.logisticsVisible,title:e.currentBtn.title,order:e.orderInfo,pageType:"merchant",nowPeriodicItem:e.nowPeriodicItem},on:{handleCancel:function(t){e.logisticsVisible=!1,e.currentBtn=""}}}):e._e(),"refuse_refund_btn"==e.currentBtn.props?r("refuseRefund",{attrs:{visible:e.refuseRefundVisible,title:e.currentBtn.title,order:e.orderInfo},on:{handleCancel:function(t){e.refuseRefundVisible=!1,e.currentBtn=""},updateList:e.getOrderDetails}}):e._e(),"periodic"==e.orderInfo.order_type?r("periodicList",{attrs:{visible:e.periodicListVisible,order:e.orderInfo},on:{handleCancel:function(t){e.periodicListVisible=!1,e.currentBtn=""}}}):e._e()],1):e._e()},s=[],o=(r("e7c6"),r("a8ba")),i=(r("d3b7"),r("159b"),r("a9e3"),r("d81d"),r("4de4"),r("8bbf")),l=r.n(i),n=r("4031"),d=r("93f2"),c=r("d0d3"),m=r("9065"),p=r("5688"),f=r("c1df"),u=r.n(f);l.a.use(o["a"]);var _={components:{deliverGoods:d["default"],logistics:c["default"],refuseRefund:m["default"],periodicList:p["default"]},data:function(){return{currency:"￥",order_id:this.$route.query.order_id||"",periodic_order_id:this.$route.query.periodic_order_id||"",refund_id:this.$route.query.refund_id||"",is_all:this.$route.query.is_all||"",orderInfo:"",valueStyle:"color: #f50f50;font-size: 18px;",discountTotalVisible:!1,after_money:"",moneyRealVisible:!1,refund_images:[],desc:"",fh_type:"1",discountList:[{label:"平台优惠券优惠金额",value:"",props:"discount_system_coupon"},{label:"商家优惠券优惠金额",value:"",props:"discount_merchant_coupon"},{label:"商家会员卡优惠金额",value:"",props:"discount_merchant_card"},{label:"平台会员等级优惠金额",value:"",props:"discount_system_level"},{label:"店员优惠金额",value:"",props:"discount_clerk_money"},{label:"参加活动优惠金额",value:"",props:"discount_act_money"}],step:[{title:"买家下单",props:"step_create_time",current:0,show:!0,is_refund_order:!1},{title:"买家付款",props:"step_paid_time",current:1,show:!0,is_refund_order:!1},{title:"卖家发货",props:"step_send_time",current:2,show:!0,is_refund_order:!1},{title:"订单完成",props:"step_complete_time",current:3,show:!0,is_refund_order:!1},{title:"买家申请退款",props:"refund_time",current:1,show:!1,is_refund_order:!0},{title:"商户审核",props:"",current:1,show:!1,is_refund_order:!0},{title:"退款完成",props:"",current:2,show:!1,is_refund_order:!0}],btnList:[{label:"接单",props:"take_btn",show:"0",action:"confirm",tips:"是否确定接单？",success:"接单成功",api:"orderTaking",type:"primary"},{label:"骑手配送",props:"hoseman_btn",show:"0",action:"confirm",tips:"是否确定骑手配送？",success:"订单已转至平台配送！",api:"deliverGoodsByHouseman",type:"primary"},{label:"店员核销",props:"clerk_btn",show:"0",action:"confirm",tips:"是否确定核销？",success:"该订单已核销",api:"staffVerify",type:"primary"},{label:"快递发货",props:"express_btn",show:"0",action:"modal",title:"发货",type:"primary"},{label:"查看物流",props:"logistics_btn",show:"0",action:"modal",title:"查看物流",type:"primary"},{label:"顺延配送",props:"postpone_btn",show:"0",action:"confirm",tips:"是否确定顺延配送？",success:"该订单已顺延配送",api:"postponeDelivery",type:"primary"},{label:"骑手轨迹",props:"trajectory_btn",show:"0",action:"modal",title:"骑手轨迹",type:"primary"},{label:"同意退款",props:"agree_refund_btn",show:"0",action:"confirm",tips:"是否确定同意退款？",success:"同意退款成功",api:"agreeRefund",type:"primary"},{label:"拒绝退款",props:"refuse_refund_btn",show:"0",action:"modal",title:"拒绝退款",type:"danger"}],columns:[{title:"商品",dataIndex:"goods_name",key:"goods_name",scopedSlots:{customRender:"goodsName"},align:"left"},{title:"单价",dataIndex:"price",key:"price",scopedSlots:{customRender:"price"},align:"center"},{title:"数量",dataIndex:"num",key:"num",align:"center"},{title:"商品状态",dataIndex:"goods_status_txt",key:"goods_status_txt",align:"center"}],currentBtn:"",deliverGoodsVisible:!1,logisticsVisible:!1,refuseRefundVisible:!1,periodicListVisible:!1,baseUrl:"/v20/public/platform/#",payMethods:[{label:"在线支付",labelProps:"pay_type_txt",props:"money_online_pay"},{label:"积分抵扣",props:"money_score"},{label:"平台余额支付",props:"money_system_balance"},{label:"商家会员卡余额支付",props:"money_merchant_balance"},{label:"商家会员卡赠送余额支付",props:"money_merchant_give_balance"},{label:"企业预存款余额支付",props:"money_qiye_balance"},{label:"员工卡积分支付",props:"employee_score_pay"},{label:"员工卡余额支付",props:"employee_balance_pay"}],emptyCheckArr:["",null,void 0,"null","undefined"],columnsPeriodic:[{title:"商品",dataIndex:"goods_name",key:"goods_name",scopedSlots:{customRender:"goodsName"},align:"left"},{title:"单价",dataIndex:"price",key:"price",scopedSlots:{customRender:"price"},align:"center"},{title:"数量",dataIndex:"num",key:"num",align:"center"},{title:"商品状态",dataIndex:"is_complete_txt",key:"is_complete_txt",scopedSlots:{customRender:"is_complete_txt"},align:"center"},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"operation"},align:"center"}],nowPeriodicItem:{},goodsColumn:[],goodsDataSource:[]}},watch:{"$route.query.periodic_order_id":function(e){e&&(this.periodic_order_id=e)},"$route.query.refund_id":function(e){e&&(this.refund_id=e)},"$route.query.order_id":function(e){e&&(this.order_id=e),this.getOrderDetails()}},mounted:function(){this.getOrderDetails()},methods:{moment:u.a,getOrderDetails:function(){var e=this;this.request(n["a"].getOrderDetails,{order_id:this.order_id,periodic_order_id:this.periodic_order_id,refund_id:this.refund_id}).then((function(t){t&&t.children&&t.children.length&&t.children.forEach((function(e,t){e["index"]=t})),60==t.order_status&&t.rest_time&&(t.rest_time=Date.now()+1e3*Number(t.rest_time)),t&&(t.status=t.order_status),e.orderInfo=t||"",t.periodic_info&&t.periodic_info.length&&t.order_status<60&&"periodic"==t.order_type?(e.goodsDataSource=t.periodic_info,e.goodsColumn=e.columnsPeriodic):(e.goodsDataSource=t.children,e.goodsColumn=e.columns),e.initBtnList(),e.initStep(),e.initDiscountList(),e.initPayMethods()}))},initBtnList:function(){var e=this,t=this.orderInfo,r=t.button,a=t.order_status,s=t.express_style;this.btnList=this.btnList.map((function(t){return t.show=r[t.props],60!=a&&70!=a||"logistics_btn"!=t.props&&"trajectory_btn"!=t.props||(t.show=0),11==a&&"1"==s&&"hoseman_btn"==t.props&&(e.desc="订单转至骑手配送"),"periodic"==e.orderInfo.order_type&&"logistics_btn"==t.props&&1==t.show&&(t.show=0),t}))},initStep:function(){var e=this;this.step=[{title:"买家下单",props:"step_create_time",current:0,show:!0,is_refund_order:!1},{title:"买家付款",props:"step_paid_time",current:1,show:!0,is_refund_order:!1},{title:"卖家发货",props:"step_send_time",current:2,show:!0,is_refund_order:!1},{title:"订单完成",props:"step_complete_time",current:3,show:!0,is_refund_order:!1},{title:"买家申请退款",props:"refund_time",current:1,show:!1,is_refund_order:!0},{title:"商户审核",props:"",current:1,show:!1,is_refund_order:!0},{title:"退款完成",props:"",current:2,show:!1,is_refund_order:!0}];var t=this.orderInfo.order_status;this.step=this.step.filter((function(r){if(t>=50&&t<60?e.current=0:(e.orderInfo[r.props]&&(e.current=r.current),60==t||70==t?(r.is_refund_order?r.show=!0:r.show=!1,(70==t||r.props&&e.orderInfo[r.props])&&(e.current=r.current)):r.is_refund_order?r.show=!1:r.show=!0),r.show)return r}))},finish:function(){this.getOrderDetails()},btnOpt:function(e){var t=this;this.currentBtn=e,console.log(this.currentBtn,"this.currentBtn");var r=this.currentBtn,a=r.api,s=void 0===a?"":a,o=r.success,i=void 0===o?"":o,l=r.tips,d=void 0===l?"":l,c=r.action,m=void 0===c?"":c,p=r.props,f=void 0===p?"":p;"confirm"==m&&this.$confirm({title:d||"提醒",content:"",okText:"确认",cancelText:"取消",onOk:function(){if(s){var e={order_id:t.order_id},r=["take_btn","hoseman_btn"];t.orderInfo.order_type=="periodic"(-1!=r.indexOf(f))&&(e.periodic_order_id=t.periodic_order_id),t.request(n["a"][s],e).then((function(e){t.$message.success(i),t.getOrderDetails()}))}},onCancel:function(){console.log("Cancel"),t.currentBtn=""},class:"test"}),"modal"==m&&("express_btn"==f?this.deliverGoodsVisible=!0:"trajectory_btn"==f||"logistics_btn"==f?this.logisticsVisible=!0:"refuse_refund_btn"==f&&(this.refuseRefundVisible=!0))},initDiscountList:function(){var e=this;this.discountList=this.discountList.map((function(t){return e.orderInfo&&(t.value=e.orderInfo[t.props]),t}))},initPayMethods:function(){var e=this;this.payMethods=this.payMethods.filter((function(t){if(e.orderInfo&&t.labelProps&&(t.label=e.orderInfo[t.labelProps]),t.value=t.props&&e.orderInfo[t.props]&&0!=e.orderInfo[t.props]?e.orderInfo[t.props]:0,t.value)return t}))},viewLogistics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={label:"查看物流",props:"logistics_btn",show:"0",action:"modal",title:"查看物流",type:"primary"};e&&(this.nowPeriodicItem=e),this.btnOpt(t)},editDeliverGoodsByExpress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={label:"快递发货",props:"express_btn",show:"0",action:"modal",title:"更改快递",type:"primary"};this.fh_type="2",e&&(this.nowPeriodicItem=e),this.btnOpt(t)}}},h=_,g=(r("2c40"),r("2877")),v=Object(g["a"])(h,a,s,!1,null,"7f7fa352",null);t["default"]=v.exports},c32f:function(e,t,r){var a=r("2b10");function s(e,t,r){var s=e.length;return r=void 0===r?s:r,!t&&r>=s?e:a(e,t,r)}e.exports=s},c9ca:function(e,t,r){var a=r("ef5d"),s=a("length");e.exports=s},d094:function(e,t){var r="\\ud800-\\udfff",a="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",i=a+s+o,l="\\ufe0e\\ufe0f",n="["+r+"]",d="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",m="(?:"+d+"|"+c+")",p="[^"+r+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",_="\\u200d",h=m+"?",g="["+l+"]?",v="(?:"+_+"(?:"+[p,f,u].join("|")+")"+g+h+")*",y=g+h+v,b="(?:"+[p+d+"?",d,f,u,n].join("|")+")",x=RegExp(c+"(?="+c+")|"+b+y,"g");function M(e){return e.match(x)||[]}e.exports=M},d0d3:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!1,footer:null,width:"60%",bodyStyle:{maxHeight:"80vh",overflowY:"auto",paddingTop:e.extraDelivery.length>1?"10px":"24px"}},on:{ok:e.handleCancel,cancel:e.handleCancel}},[e.rider_name?r("span",[r("span",[e._v("骑手："+e._s(e.rider_name))]),r("a-divider",{attrs:{type:"virticle"}}),r("span",[e._v("骑手号码："+e._s(e.rider_phone))]),r("a-divider")],1):e._e(),e.order&&1==e.order.express_style?[e.noData?r("a-empty",{attrs:{image:e.simpleImage}},[r("span",{attrs:{slot:"description"},slot:"description"},[e._v("暂无骑手轨迹")])]):r("a-timeline",{attrs:{pending:e.pending,reverse:!0}},e._l(e.logistics,(function(t,a){return r("a-timeline-item",{key:a},[r("p",{staticClass:"mb-0"},[e._v(e._s(e.moment(t.time).format("YYYY-MM-DD HH:mm")))]),r("span",[e._v(e._s(t.context))])])})),1)]:e._e(),e.order&&2==e.order.express_style?[e.noData?r("a-empty",{attrs:{image:e.simpleImage}},[r("span",{attrs:{slot:"description"},slot:"description"},[e._v("暂无物流信息")])]):[e.periodicInfo.length?r("div",{staticClass:"flex align-center",class:[{"mb-20":1==e.extraDelivery.length}]},[r("span",{staticClass:"ant-form-item-label"},[e._v("配送周期：")]),r("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:function(t){return e.handleChange(t)}},model:{value:e.currentPeriodic,callback:function(t){e.currentPeriodic=t},expression:"currentPeriodic"}},e._l(e.periodicInfo,(function(t){return r("a-select-option",{key:t.current_periodic},[e._v(" 第"+e._s(t.current_periodic)+"期 ")])})),1)],1):e._e(),1==e.extraDelivery.length?[r("div",{staticClass:"text-wrap mb-20"},[r("span",{staticClass:"mr-20"},[e._v("物流名称："+e._s(e.extraDelivery[0]["express_name"]||"---"))]),r("span",[e._v("物流单号："+e._s(e.extraDelivery[0]["express_num"]||"---"))])]),e.extraDelivery[0]["goods_detail"]?r("div",{staticClass:"text-wrap mb-20 flex"},[r("span",[e._v("包含商品：")]),r("div",{staticClass:"flex flex-1",staticStyle:{"flex-wrap":"wrap"}},e._l(e.extraDelivery[0]["goods_detail"],(function(t,a){return r("div",{key:a,staticClass:"ml-10 mb-10 flex flex-column"},[r("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.image,alt:""}}),r("span",{staticClass:"no-wrap",staticStyle:{"max-width":"50px"},attrs:{title:t.name}},[e._v(e._s(t.name))])])})),0)]):e._e(),r("div",{staticStyle:{"max-height":"52vh","overflow-y":"auto","padding-top":"10px"}},[e.extraDelivery[0].logistics&&e.extraDelivery[0].logistics.data&&e.extraDelivery[0].logistics.data.length?r("a-timeline",{attrs:{pending:e.pending,reverse:!0}},e._l(e.extraDelivery[0].logistics.data,(function(t,a){return r("a-timeline-item",{key:a},[r("p",{staticClass:"mb-0"},[e._v(e._s(e.moment(t.time).format("YYYY-MM-DD HH:mm")))]),r("span",[e._v(e._s(t.context))])])})),1):r("p",[e._v(e._s(e.extraDelivery[0].logistics.stateMessage||"暂无物流信息"))])],1)]:e._e(),e.extraDelivery.length>1?[r("a-tabs",{on:{change:e.tabsChange},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},e._l(e.extraDelivery,(function(t,a){return r("a-tab-pane",{key:a,attrs:{tab:"包裹"+(a+1)}},[r("div",{staticClass:"text-wrap mb-20"},[r("span",{staticClass:"mr-20"},[e._v("物流名称："+e._s(t.express_name||"---"))]),r("span",[e._v("物流单号："+e._s(t.express_num||"---"))])]),t.goods_detail?r("div",{staticClass:"text-wrap mb-20 flex"},[r("span",[e._v("包含商品：")]),r("div",{staticClass:"flex flex-1",staticStyle:{"flex-wrap":"wrap"}},e._l(t.goods_detail,(function(t,a){return r("div",{key:a,staticClass:"ml-10 mb-10 flex flex-column"},[r("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.image,alt:""}}),r("span",{staticClass:"no-wrap",staticStyle:{"max-width":"50px"},attrs:{title:t.name}},[e._v(e._s(t.name))])])})),0)]):e._e(),r("div",{staticStyle:{"max-height":"52vh","overflow-y":"auto","padding-top":"10px"}},[t.logistics&&t.logistics.data&&t.logistics.data.length?r("a-timeline",{attrs:{pending:e.pending,reverse:!0}},e._l(t.logistics.data,(function(t,a){return r("a-timeline-item",{key:a},[r("p",{staticClass:"mb-0"},[e._v(e._s(e.moment(t.time).format("YYYY-MM-DD HH:mm")))]),r("span",[e._v(e._s(t.context))])])})),1):r("p",[e._v(e._s(t.logistics.stateMessage||"暂无物流信息"))])],1)])})),1)]:e._e()]]:e._e()],2)},s=[],o=(r("06f4"),r("fc25")),i=(r("16c9"),r("387a")),l=(r("b64b"),r("7db0"),r("d3b7"),r("8bbf")),n=r.n(l),d=r("011d"),c=r("5f66"),m=r("4031"),p=r("c1df"),f=r.n(p);n.a.use(i["a"]),n.a.use(o["a"]);var u={props:{visible:Boolean,title:String,order:Object,pageType:{type:String,default:"platform"},nowPeriodicItem:[Object]},data:function(){return{logistics:[],pending:!1,simpleImage:"",rider_name:"",rider_phone:"",noData:!1,extraDelivery:[],activeKey:0,periodicInfo:[],currentPeriodic:void 0}},beforeCreate:function(){this.simpleImage=o["a"].PRESENTED_IMAGE_SIMPLE},mounted:function(){(20==this.order.status||this.nowPeriodicItem&&20==this.nowPeriodicItem.is_complete)&&(this.pending="正在配送中..."),"periodic"!=this.order.order_type||this.nowPeriodicItem&&(!this.nowPeriodicItem||Object.keys(this.nowPeriodicItem).length)?this.viewLogistics():this.getOrderDetail(this.order.order_id)},methods:{moment:f.a,viewLogistics:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=this.order,a=r.order_id,s=r.order_type,o=r.express_style,i={platform:d["a"].viewLogistics,merchant:m["a"].viewLogistics,storestaff:c["a"].viewLogistics};"periodic"!=s||t||(t=this.nowPeriodicItem?this.nowPeriodicItem.purchase_order_id||"":this.order.periodic_order_id||""),this.request(i[this.pageType],{order_id:a,periodic_order_id:t,order_type:s,express_style:o}).then((function(t){t?(1==o&&(e.logistics=t.list||[],e.rider_name=t.rider_name,e.rider_phone=t.rider_phone,e.noData=!e.logistics.length),2==o&&(e.extraDelivery=t||[],e.noData=!e.extraDelivery.length)):1===t.errCode&&e.$message.warn(t.errMsg)}))},handleCancel:function(){this.activeKey=0,this.$emit("handleCancel")},tabsChange:function(e){this.activeKey=e},getOrderDetail:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t){var r={platform:d["a"].getOrderDetails,merchant:m["a"].getOrderDetails,storestaff:c["a"].getOrderDetailsCopy};this.request(r[this.pageType],{order_id:t,periodic_order_id:this.order.periodic_order_id,refund_id:this.order.refund_id,noTip:!0}).then((function(t){e.periodicInfo=t.periodic_info||[],e.periodicInfo.length&&(e.currentPeriodic=e.periodicInfo[0]["current_periodic"],e.viewLogistics(e.periodicInfo[0]["purchase_order_id"]))}))}},handleChange:function(e){var t=this;this.currentPeriodic=e;var r=this.periodicInfo.find((function(e){return e.current_periodic==t.currentPeriodic}));this.viewLogistics(r.purchase_order_id)}}},_=u,h=(r("f5c6"),r("2877")),g=Object(h["a"])(_,a,s,!1,null,"11505fa1",null);t["default"]=g.exports},e7c6:function(e,t,r){"use strict";r("b2a3"),r("b886")},f5c6:function(e,t,r){"use strict";r("4e5c")}}]);