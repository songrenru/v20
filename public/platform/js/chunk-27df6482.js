(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27df6482","chunk-63cce94a","chunk-601a35b1","chunk-405ec13b","chunk-3c3f6f36","chunk-1f2b9232","chunk-5f8a6476","chunk-2d0f0f38","chunk-2d22db1e","chunk-2d0c0303","chunk-2d22c16e","chunk-2d212fb1","chunk-2d0e4d18","chunk-2d0c9ae7","chunk-2d230c77"],{"0e6f":function(e,t,a){},"0f3d":function(e,t,a){},"0f64":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"小区单元编辑",visible:e.visible,width:500,loading:e.confirmLoading},on:{cancel:function(t){return e.resetForm(!1)},ok:e.onSubmit}},[a("a-form-model",{ref:"ruleForm",attrs:{model:e.unitForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-model-item",{attrs:{label:"单元名称",prop:"floor_name"}},[a("a-input",{staticClass:"input_style_240",model:{value:e.unitForm.floor_name,callback:function(t){e.$set(e.unitForm,"floor_name",t)},expression:"unitForm.floor_name"}})],1),a("a-form-model-item",{attrs:{label:"单元编号",prop:"floor_number"}},[a("a-input",{staticClass:"input_style_240",model:{value:e.unitForm.floor_number,callback:function(t){e.$set(e.unitForm,"floor_number",t)},expression:"unitForm.floor_number"}})],1)],1)],1)},n=[],i=(a("a9e3"),a("8bbf")),o=a.n(i),r=a("ed09"),s=(a("3990"),Object(r["c"])({props:{visible:{type:Boolean,default:!1},floor_id:{type:[String,Number],default:0}},setup:function(e,t){var a=Object(r["h"])(!1),l=Object(r["h"])({}),n=Object(r["h"])({floor_name:[{required:!0,message:"请输入单元名称",trigger:"blur"}],floor_number:[{required:!0,message:"请输入单元编号",trigger:"blur"}]}),i=Object(r["h"])(),s=Object(r["h"])({span:6}),c=Object(r["h"])({span:16}),u=function(){i.value.validate((function(e){e&&(a.value=!0,p())}))},d=function(e){t.emit("exit",e),l.value={},i.value.resetFields()},p=function(){var e={floor_id:l.value.floor_id,floor_name:l.value.floor_name,floor_number:l.value.floor_number};o.a.prototype.request("/community/village_api.Building/updateFloorInfoByID",e).then((function(e){a.value=!1,o.a.prototype.$message.success("编辑成功！"),d("unit")})).catch((function(e){a.value=!1}))},m=function(e){o.a.prototype.request("/community/village_api.Building/floorInfo",{floor_id:e}).then((function(e){l.value=e}))};return Object(r["i"])((function(){return e.visible}),(function(t){t&&m(e.floor_id)}),{deep:!0}),{confirmLoading:a,onSubmit:u,resetForm:d,unitForm:l,labelCol:s,wrapperCol:c,rules:n,saveForm:p,ruleForm:i}}})),c=s,u=(a("a41a"),a("2877")),d=Object(u["a"])(c,l,n,!1,null,"dae6004e",null);t["default"]=d.exports},"16d1":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[e.pageLoading?a("div",{staticClass:"loading",staticStyle:{width:"100%",height:"500px",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},[a("a-icon",{staticStyle:{"font-size":"26px"},attrs:{type:"loading"}}),a("div",{staticStyle:{color:"#666666","font-size":"20px","margin-top":"10px"}},[e._v("加载中...")])],1):a("a-form-model",{ref:"ruleForm",attrs:{rules:e.rules,model:e.roomForm,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("div",{staticClass:"form_title",staticStyle:{"font-weight":"600"}},[e._v("基本信息")]),a("div",{staticClass:"form_con",staticStyle:{"margin-top":"10px"}},[a("a-form-model-item",{staticClass:"form_item",attrs:{label:"物业编号"}},[a("a-input",{attrs:{disabled:!0},model:{value:e.roomForm.usernum,callback:function(t){e.$set(e.roomForm,"usernum",t)},expression:"roomForm.usernum"}})],1),a("a-form-model-item",{staticClass:"form_item",attrs:{label:"房间物业编号",extra:"由楼栋编号、单元编号、楼层编号和房屋编号依次拼接而成"}},[a("a-input",{attrs:{placeholder:"请输入物业编号"},model:{value:e.roomForm.property_number,callback:function(t){e.$set(e.roomForm,"property_number",t)},expression:"roomForm.property_number"}})],1),a("a-form-model-item",{staticClass:"form_item",attrs:{label:"楼栋/单元/楼层"}},[a("a-input",{attrs:{placeholder:"请输入楼栋/单元/楼层",disabled:!0},model:{value:e.roomForm.address,callback:function(t){e.$set(e.roomForm,"address",t)},expression:"roomForm.address"}})],1),a("a-form-model-item",{staticClass:"form_item",attrs:{label:"房间号"}},[a("a-input",{attrs:{placeholder:"请输入房间号"},model:{value:e.roomForm.room,callback:function(t){e.$set(e.roomForm,"room",t)},expression:"roomForm.room"}})],1),a("a-form-model-item",{staticClass:"form_item",attrs:{extra:"设置房间时间范围，设置后物业只能收取合同时间内收费项目，未到合同开始时间或结束时间不能收费；未设置物业服务小区时间范围，则不影响。"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("a-tooltip",{attrs:{title:"设置房间时间范围，设置后物业只能收取合同时间内收费项目，未到合同开始时间或结束时间不能收费；未设置物业服务小区时间范围，则不影响。"}},[a("a-icon",{attrs:{type:"question-circle-o"}}),e._v(" 合同时间 ")],1)],1),e.roomForm.contract_time_start&&e.roomForm.contract_time_end?a("a-range-picker",{attrs:{"disabled-date":e.disabledDate,value:[e.moment(e.roomForm.contract_time_start,e.dateFormat),e.moment(e.roomForm.contract_time_end,e.dateFormat)]},on:{change:e.onDateChange}}):a("a-range-picker",{attrs:{"disabled-date":e.disabledDate},on:{change:e.onDateChange}})],1),a("a-form-model-item",{staticClass:"form_item",attrs:{label:"房间别名编号",extra:"为房间取一个数字别名,必须具有唯一性"}},[a("a-input",{attrs:{placeholder:"请输入房间别名编号"},model:{value:e.roomForm.room_alias_id,callback:function(t){e.$set(e.roomForm,"room_alias_id",t)},expression:"roomForm.room_alias_id"}})],1),a("a-form-model-item",{staticClass:"form_item",attrs:{label:"房屋类型"}},[a("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"请选择","filter-option":e.filterOption,value:e.roomForm.house_type},on:{change:function(t){return e.handleSelectChange(t,"house_type")}}},e._l(e.roomParams.room_type_list,(function(t,l){return a("a-select-option",{attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("a-form-model-item",{staticClass:"form_item",attrs:{label:"使用状态",extra:"仅供标记使用，不会自动变化的，需要自行编辑维护"}},[a("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"请选择","filter-option":e.filterOption,value:e.roomForm.user_status},on:{change:function(t){return e.handleSelectChange(t,"user_status")}}},e._l(e.roomParams.user_status_list,(function(t,l){return a("a-select-option",{attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("a-form-model-item",{staticClass:"form_item",attrs:{label:"出售状态",extra:"仅供标记使用，不会自动变化的，需要自行编辑维护"}},[a("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"请选择","filter-option":e.filterOption,value:e.roomForm.sell_status},on:{change:function(t){return e.handleSelectChange(t,"sell_status")}}},e._l(e.roomParams.sell_status_list,(function(t,l){return a("a-select-option",{attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("a-form-model-item",{staticClass:"form_item",attrs:{label:"房屋面积"}},[a("a-input",{attrs:{placeholder:"请输入房屋面积"},model:{value:e.roomForm.housesize,callback:function(t){e.$set(e.roomForm,"housesize",t)},expression:"roomForm.housesize"}})],1),a("a-form-model-item",{staticClass:"form_item",attrs:{label:"排序",extra:"数字越大越靠前"}},[a("a-input",{attrs:{placeholder:"请输入排序"},model:{value:e.roomForm.sort,callback:function(t){e.$set(e.roomForm,"sort",t)},expression:"roomForm.sort"}})],1),a("a-form-model-item",{staticClass:"form_item",attrs:{label:"房间状态"}},[a("a-radio-group",{model:{value:e.roomForm.status,callback:function(t){e.$set(e.roomForm,"status",t)},expression:"roomForm.status"}},[a("a-radio",{attrs:{value:1}},[e._v("开启")]),a("a-radio",{attrs:{value:0}},[e._v("禁用")])],1)],1)],1),e.a185_indoor_module.status?a("div",{staticClass:"form_title",staticStyle:{"font-weight":"600","margin-top":"10px",diplay:"flex","align-items":"center"}},[e._v(" 室内机管理 "),a("span",{staticStyle:{"font-weight":"500",color:"green","margin-left":"20px","font-size":"14px"}},[e._v("注意：室内机编号仅限于 A185智能门禁配合使用")])]):e._e(),e.a185_indoor_module.status?a("div",{staticClass:"form_con",staticStyle:{"margin-top":"10px"}},[a("a-form-model-item",{staticClass:"form_item",attrs:{label:"室内机设备号"}},[a("a-input",{attrs:{placeholder:"请输入室内机设备号"},model:{value:e.roomForm.indoor_device_sn,callback:function(t){e.$set(e.roomForm,"indoor_device_sn",t)},expression:"roomForm.indoor_device_sn"}})],1),a("a-form-model-item",{staticClass:"form_item",attrs:{label:"状态"}},[a("a-radio-group",{model:{value:e.roomForm.indoor_status,callback:function(t){e.$set(e.roomForm,"indoor_status",t)},expression:"roomForm.indoor_status"}},[a("a-radio",{attrs:{value:1}},[e._v("开启")]),a("a-radio",{attrs:{value:0}},[e._v("禁用")])],1)],1)],1):e._e(),e.water_electric_gas_module.status?a("div",{staticClass:"form_title",staticStyle:{"font-weight":"600","margin-top":"10px",diplay:"flex","align-items":"center"}},[e._v(" 设备管理 "),a("span",{staticStyle:{"font-weight":"500",color:"green","margin-left":"20px","font-size":"14px"}},[e._v("注意：对接水电燃仪表设备，由设备方提供水电燃设备接口")]),a("span",{staticStyle:{"font-weight":"500",color:"red","margin-left":"20px","font-size":"14px"}},[e._v("冷/热水表表号具有唯一性，不可重复")])]):e._e(),e.water_electric_gas_module.status?a("div",{staticClass:"form_con",staticStyle:{"margin-top":"10px"}},[a("a-form-model-item",{staticClass:"form_item",attrs:{label:"冷水表编号"}},[a("a-input",{attrs:{placeholder:"请输入冷水表编号"},model:{value:e.roomForm.water_number,callback:function(t){e.$set(e.roomForm,"water_number",t)},expression:"roomForm.water_number"}})],1),a("a-form-model-item",{staticClass:"form_item",attrs:{label:"热水表编号"}},[a("a-input",{attrs:{placeholder:"请输入热水表编号"},model:{value:e.roomForm.heat_water_number,callback:function(t){e.$set(e.roomForm,"heat_water_number",t)},expression:"roomForm.heat_water_number"}})],1),a("a-form-model-item",{staticClass:"form_item",attrs:{label:"电表编号"}},[a("a-input",{attrs:{placeholder:"请输入电表编号"},model:{value:e.roomForm.ele_number,callback:function(t){e.$set(e.roomForm,"ele_number",t)},expression:"roomForm.ele_number"}})],1),a("a-form-model-item",{staticClass:"form_item",attrs:{label:"燃气表编号"}},[a("a-input",{attrs:{placeholder:"请输入燃气表编号"},model:{value:e.roomForm.gas_number,callback:function(t){e.$set(e.roomForm,"gas_number",t)},expression:"roomForm.gas_number"}})],1)],1):e._e(),a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{"wrapper-col":{span:14,offset:2}}},[a("a-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)},n=[],i=a("5530"),o=(a("a9e3"),a("8bbf")),r=a.n(o),s=a("c1df"),c=a.n(s),u=a("ed09"),d=Object(u["c"])({props:{roomParams:{type:Object,default:function(){return{}}},roomId:{type:[String,Number],defalut:""}},setup:function(e,t){var a=Object(u["h"])({}),l=Object(u["h"])(!0),n=Object(u["h"])({vacancy_id:"",property_number:"",address:"",room:"",house_type:"",user_status:"",sell_status:"",status:"",indoor_device_sn:"",indoor_status:"",water_number:"",heat_water_number:"",ele_number:"",gas_number:"",room_alias_id:""}),o=Object(u["h"])(!1),s=function(){o.value?r.a.prototype.$message.warn("正在提交中，请稍等..."):(o.value=!0,r.a.prototype.request("/community/village_api.Building/subRoomAttribute",n.value).then((function(e){o.value=!1,r.a.prototype.$message.success("编辑成功！")})).catch((function(e){o.value=!1})))},d=function(){},p=Object(u["h"])({span:4}),m=Object(u["h"])({span:14}),f=Object(u["h"])("YYYY/MM/DD"),v=Object(u["h"])({}),_=Object(u["h"])({}),b=function(e){n.value.contract_time_start=c()(e[0]).format(f.value),n.value.contract_time_end=c()(e[1]).format(f.value)};Object(u["f"])((function(){console.log("pageLoading===>",l.value),x()}));var g=function(e,t){n.value[t]=e,Object(u["d"])()},y=function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},h=function(e){return e&&!(e>c()(n.value.village_contract_time_start)&&e<c()(n.value.village_contract_time_end))},x=function(){n.value={},r.a.prototype.request("/community/village_api.Building/getRoomDetails",{vacancy_id:e.roomId}).then((function(e){v.value=e.a185_indoor_module,_.value=e.water_electric_gas_module,n.value=Object(i["a"])(Object(i["a"])(Object(i["a"])({},e.room_info),e.a185_indoor_module.data),e.water_electric_gas_module.data),n.value.village_contract_time_start&&n.value.village_contract_time_end&&h(),l.value=!1})).catch((function(e){l.value=!1}))};return{rules:a,roomForm:n,labelCol:p,wrapperCol:m,onSubmit:s,resetForm:d,handleSelectChange:g,filterOption:y,moment:c.a,dateFormat:f,onDateChange:b,a185_indoor_module:v,water_electric_gas_module:_,pageLoading:l,disabledDate:h}}}),p=d,m=(a("45cb"),a("2877")),f=Object(m["a"])(p,l,n,!1,null,"25ad24f4",null);t["default"]=f.exports},"179d":function(e,t,a){},"2f05":function(e,t,a){"use strict";a("0f3d")},"307c":function(e,t,a){"use strict";a("8bca")},"33c7":function(e,t,a){"use strict";a("3e94")},"37f8":function(e,t,a){"use strict";a("b768")},"3c11":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"build_index"},[a("a-row",[a("a-collapse",{attrs:{accordion:""}},[a("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[a("p",[e._v(" 导入说明。"),a("br"),e._v(" 1、可以按照 导入楼栋--\x3e导入单元--\x3e导入楼层--\x3e导入房间 顺序进行导入数据，也可以直接 导入房间；"),a("br"),e._v(" 2、导入的时候必须要等待当前导入数据执行完毕才可以继续导入；"),a("br"),e._v(" 3、导入可以不用下载模板直接上传有对应数据的文件即可完成导入"),a("br")])])],1)],1),a("div",{staticClass:"table-operations top-box-padding",staticStyle:{width:"42%",display:"flex","align-items":"center"}},[a("a-steps",{staticStyle:{cursor:"pointer"},attrs:{size:"small",status:"process"}},[a("a-step",{attrs:{status:"finish",title:"导入楼栋"},on:{click:function(t){return e.uploadUnitExcel("uploadBuilding")}}},[a("a-icon",{attrs:{slot:"icon",type:"cloud-upload"},slot:"icon"})],1),a("a-step",{attrs:{status:"finish",title:"导入单元"},on:{click:function(t){return e.uploadUnitExcel("uploadUnit")}}},[a("a-icon",{attrs:{slot:"icon",type:"right"},slot:"icon"}),a("a-icon",{attrs:{slot:"icon",type:"cloud-upload"},slot:"icon"})],1),a("a-step",{attrs:{status:"finish",title:"导入楼层"},on:{click:function(t){return e.uploadUnitExcel("uploadFloor")}}},[a("a-icon",{attrs:{slot:"icon",type:"right"},slot:"icon"}),a("a-icon",{attrs:{slot:"icon",type:"cloud-upload"},slot:"icon"})],1),a("a-step",{attrs:{status:"finish",title:"导入房间"},on:{click:function(t){return e.uploadUnitExcel("uploadRoom")}}},[a("a-icon",{attrs:{slot:"icon",type:"right"},slot:"icon"}),a("a-icon",{attrs:{slot:"icon",type:"cloud-upload"},slot:"icon"})],1)],1)],1),a("a-table",{attrs:{columns:e.columns,"row-key":function(e){return e.id},"data-source":e.buildingList,pagination:!1,loading:e.loading},scopedSlots:e._u([{key:"status",fn:function(t,l){return[l.allowChangeStatus?a("a-switch",{attrs:{"checked-children":"开启","un-checked-children":"关闭",checked:1==t},on:{change:function(t){return e.switchChange(t,l)}}}):a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[e._v(e._s(l.allowChangeStatusTip))])]),a("a-switch",{attrs:{disabled:!0,"checked-children":"开启","un-checked-children":"关闭",checked:1==t}})],2)]}},{key:"floorPath",fn:function(t,l){return[a("a",{on:{click:function(t){return e.showSingleView(l,1)}}},[e._v("管理")])]}},{key:"action",fn:function(t,l){return a("span",{},[l.is_draw?a("a",{on:{click:function(t){return e.goSingleCanvas(l)}}},[e._v("绘制区域")]):e._e(),l.is_draw?a("a-divider",{attrs:{type:"vertical"}}):e._e(),l.allowEditHousekeeper?a("a",{on:{click:function(t){return e.editBuild(l,1)}}},[e._v("楼栋管家")]):e._e(),l.allowEdit?a("a-divider",{attrs:{type:"vertical"}}):e._e(),l.allowEdit?a("a",{on:{click:function(t){return e.editBuild(l,2)}}},[e._v("编辑")]):e._e(),l.allowDelete?a("a-divider",{attrs:{type:"vertical"}}):e._e(),l.allowDelete?a("a-popconfirm",{attrs:{title:"确定要删除该项吗?","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.delConfirm(l)},cancel:e.delCancel}},[a("a",{staticStyle:{color:"red"}},[e._v("删除")])]):e._e()],1)}}])}),a("div",{staticClass:"total_number"},[e._v(" 总楼栋数："),a("span",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.total))]),e._v("栋 ")]),a("building-edit",{attrs:{title:e.titleTips,visible:e.buildVisible,single_id:e.single_id},on:{closeDrawer:e.closeDrawer}}),a("buildingHousekeeper",{attrs:{title:e.titleTips,visible:e.manageVisible,single_id:e.single_id},on:{closeDrawer:e.closeDrawer}}),a("uploadModal",{attrs:{visible:e.uploadVisibile},on:{exit:e.closeUploadModal}}),a("singleView",{attrs:{visible:e.singleViewVisible,single_name:e.single_name,single_id:e.single_id},on:{closeSingleView:e.closeDrawer}}),e.unitVisible?a("uploadUnit",{attrs:{visible:e.unitVisible,uploadType:e.uploadType},on:{exit:e.closeUnitModal}}):e._e()],1)},n=[],i=(a("4e82"),a("8bbf")),o=a.n(i),r=a("e18f"),s=a("8803"),c=a("f07f"),u=a("89a3"),d=a("f4f3"),p=a("ed09"),m=a("3990"),f=Object(p["c"])({components:{buildingEdit:r["default"],buildingHousekeeper:s["default"],uploadModal:c["default"],singleView:d["default"],uploadUnit:u["default"]},setup:function(e,t){var a=Object(p["g"])([{title:"楼栋名称",dataIndex:"single_name"},{title:"楼栋编号",dataIndex:"single_number"},{title:"楼栋面积(m²)",dataIndex:"measure_area"},{title:"单元列表",dataIndex:"floorPath",scopedSlots:{customRender:"floorPath"}},{title:"合同开始时间",dataIndex:"contract_time_start"},{title:"合同结束时间",dataIndex:"contract_time_end"},{title:"排序",dataIndex:"sort",sorter:function(e,t){return e.sort-t.sort}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}]),l=Object(p["h"])(3),n=Object(p["h"])(""),i=Object(p["h"])(""),r=Object(p["h"])(!1),s=Object(p["h"])(!1),c=Object(p["h"])(!1),u=Object(p["h"])([]),d=Object(p["h"])(!1),f=Object(p["h"])(!1),v=Object(p["h"])(0),_=Object(p["h"])(""),b=function(){o.a.prototype.request(m["a"].buildingList,{}).then((function(e){u.value=e.building,v.value=e.count,d.value=e.allowImport,f.value=e.allowRoomImport,c.value=!1})).catch((function(e){c.value=!1}))},g=function(){},y=function(){},h=Object(p["h"])(!0),x=function(e,t){if(h.value){var a=e?1:0;k(t.id,a)}else o.a.prototype.$message.warn("请求频繁！")},k=function(e,t){h.value=!1,o.a.prototype.request(m["a"].updateBuildingStatus,{single_id:e,status:t}).then((function(e){h.value=!0,b(),o.a.prototype.$message.success("修改成功！")})).catch((function(e){b(),h.value=!0}))},S=function(e){o.a.prototype.request(m["a"].deleteBuilding,{single_id:e}).then((function(e){c.value=!0,b(),o.a.prototype.$message.success("删除成功！")})).catch((function(e){}))},w=function(e){S(e.id)},j=function(e,t){var a="楼栋名称:【"+e.single_name+"】";1==t&&(a+="楼栋管家",s.value=!0),2==t&&(a+="编辑",r.value=!0),_.value=a,n.value=e.id},O=Object(p["h"])(!1),C=function(e){console.log("record===>",e),O.value=!0,n.value=e.id,i.value="楼栋名称:【"+e.single_name+"】可视化"},I=function(e){r.value=!1,s.value=!1,O.value=!1,n.value=0,e&&(c.value=!0,b(),Object(p["d"])())},F=Object(p["h"])(!1),L=Object(p["h"])(!1),E=Object(p["h"])(""),$=function(){F.value=!0},B=function(){F.value=!1},T=function(e){E.value=e,L.value=!0},z=function(e){"building"!=e?L.value=!1:b()},q=function(e){window.open("/v20/public/platform/#/community/village/cockpit/hotZone?single_id="+e.id)};return Object(p["f"])((function(){c.value=!0,b()})),{columns:a,buildingList:u,allowImport:d,allowRoomImport:f,loading:c,getBuildingList:b,total:v,delCancel:g,delConfirm:w,deleteBiuld:S,editBuild:j,buildVisible:r,single_id:n,single_name:i,closeDrawer:I,manageVisible:s,switchChange:x,changeSingleStatus:k,changeStatus:h,uploadExcelFile:$,uploadVisibile:F,closeUploadModal:B,singleViewVisible:O,showSingleView:C,onChangeSetp:y,currentSet:l,titleTips:_,unitVisible:L,closeUnitModal:z,uploadUnitExcel:T,uploadType:E,goSingleCanvas:q}}}),v=f,_=(a("767a"),a("2877")),b=Object(_["a"])(v,l,n,!1,null,"639746f3",null);t["default"]=b.exports},"3e94":function(e,t,a){},"415e":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"associated_work_order"},[a("a-table",{attrs:{pagination:e.pageInfo,columns:e.orderColumns,loading:e.tableLoading,"data-source":e.tableList},on:{change:e.tableChange},scopedSlots:e._u([{key:"status_arr",fn:function(t,l){return a("span",{},[a("a-tag",{attrs:{color:l.status_arr.status_color}},[e._v(e._s(l.status_arr.status_txt))])],1)}}])})],1)},n=[],i=(a("a9e3"),a("8bbf")),o=a.n(i),r=a("ed09"),s=Object(r["c"])({props:{roomParams:{type:Object,default:function(){return{}}},roomId:{type:[String,Number],defalut:""}},setup:function(e,t){var a=Object(r["h"])([]),l=Object(r["h"])({pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40","50","60","70","80","90","100"],showSizeChanger:!0}),n=Object(r["h"])([]),i=Object(r["h"])(!1);Object(r["f"])((function(){u()}));var s=function(e){var t=e.pageSize,a=e.current;l.value.current=a,l.value.pageSize=t,u()},c=function(e){o.a.prototype.$confirm({title:"提示",content:"确定要删除此项吗？",onOk:function(){o.a.prototype.request("/community/village_api.cashier/delChargeStandardBind",{charge_standard_bind_id:e.bind_id}).then((function(e){o.a.prototype.$message.success("删除成功！"),l.value.current=1,l.value.pageSize=10,u()}))},onCancel:function(){}})},u=function(){i.value=!0,o.a.prototype.request("/community/village_api.Building/getRoomBindWorksOrderList",{vacancy_id:e.roomId,page:l.value.current,limit:l.value.pageSize}).then((function(e){n.value=e.list,l.value.total=e.count,i.value=!1})).catch((function(e){i.value=!1}))};return a.value=[{title:"上报人",dataIndex:"name",key:"name"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"上报时间",dataIndex:"add_time",key:"add_time"},{title:"工单详情",dataIndex:"order_content",key:"order_content"},{title:"上报状态",dataIndex:"status_arr",key:"status_arr",scopedSlots:{customRender:"status_arr"}},{title:"上报位置",dataIndex:"address_txt",key:"address_txt"},{title:"上报分类",dataIndex:"cate_name",key:"cate_name"},{title:"工单类目",dataIndex:"subject_name",key:"subject_name"}],{orderColumns:a,pageInfo:l,tableList:n,tableLoading:i,getOrderList:u,tableChange:s,deleteOrder:c}}}),c=s,u=a("2877"),d=Object(u["a"])(c,l,n,!1,null,"0c6a4820",null);t["default"]=d.exports},"45b6":function(e,t,a){"use strict";a("6710")},"45cb":function(e,t,a){"use strict";a("e67a")},5417:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_loading"})},n=[],i=(a("8bbf"),a("ed09")),o=Object(i["c"])({}),r=o,s=(a("f436"),a("2877")),c=Object(s["a"])(r,l,n,!1,null,"20670348",null);t["default"]=c.exports},5731:function(e,t,a){},"59d1":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"online_file"},[e._v(" 显示所有该房间下所有用户参与的在线文件管理 ")])},n=[],i=(a("a9e3"),a("8bbf"),a("ed09")),o=Object(i["c"])({props:{roomParams:{type:Object,default:function(){return{}}},roomId:{type:[String,Number],defalut:""}},setup:function(e,t){return{}}}),r=o,s=a("2877"),c=Object(s["a"])(r,l,n,!1,null,"da00d5fe",null);t["default"]=c.exports},6710:function(e,t,a){},"67be":function(e,t,a){},6811:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-form-model",{ref:"ruleForm",attrs:{rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("div",{staticClass:"form_con",staticStyle:{display:"flex","flex-wrap":"wrap"}},e._l(e.baseForm,(function(t,l){return a("a-form-model-item",{key:l,staticStyle:{width:"33.3%"},attrs:{label:t.title}},[1==t.type?a("div",{staticClass:"form_item"},[a("a-input",{staticStyle:{width:"200px"},attrs:{disabled:t.is_disabled,placeholder:"请输入"+t.title},model:{value:e.baseForm[l].value,callback:function(t){e.$set(e.baseForm[l],"value",t)},expression:"baseForm[index].value"}})],1):e._e(),2==t.type?a("div",{staticClass:"form_item"},[a("a-select",{staticStyle:{width:"200px"},attrs:{disabled:t.is_disabled,placeholder:"请选择"+t.title},model:{value:e.baseForm[l].value,callback:function(t){e.$set(e.baseForm[l],"value",t)},expression:"baseForm[index].value"}},e._l(t.use_field,(function(t,l){return a("a-select-option",{attrs:{value:t}},[e._v(e._s(t))])})),1)],1):e._e(),3==t.type?a("div",{staticClass:"form_item"},[a("a-input",{staticStyle:{width:"200px"},attrs:{disabled:t.is_disabled,placeholder:"请输入"+t.title},model:{value:e.baseForm[l].value,callback:function(t){e.$set(e.baseForm[l],"value",t)},expression:"baseForm[index].value"}})],1):e._e(),4==t.type?a("div",{staticClass:"form_item"},[e.baseForm[l].value?a("a-date-picker",{staticStyle:{width:"200px"},attrs:{disabled:t.is_disabled,"default-value":e.moment(e.baseForm[l].value,"YYYY-MM-DD"),placeholder:"请选择"+t.title,format:"YYYY-MM-DD"}}):a("a-date-picker",{staticStyle:{width:"200px"},attrs:{disabled:t.is_disabled,placeholder:"请选择"+t.title,format:"YYYY-MM-DD"}})],1):e._e()])})),1),e.baseForm?a("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[a("a-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1):e._e()],1)},n=[],i=(a("d81d"),a("c1df")),o=a.n(i),r=(a("8bbf"),a("ed09")),s=(a("3990"),Object(r["c"])({props:{formParams:{type:Object,default:function(){return{}}}},setup:function(e,t){var a=Object(r["h"])({span:6}),l=Object(r["h"])({span:14}),n=Object(r["h"])([]);n.value=e.formParams.field_list;var i=Object(r["h"])({}),s=Object(r["h"])();Object(r["i"])((function(){return e.formParams}),(function(e){n.value=e.field_list}));var c=function(){var e=!1,t=[];n.value.map((function(a){a.is_must&&!a.value&&(e=!0),t.push({key:a.key,value:a.value})})),console.log("resultParams===>",t),e&&console.log("val===>")},u=function(){s.value.resetFields()};return{labelCol:a,wrapperCol:l,baseForm:n,rules:i,onSubmit:c,resetForm:u,moment:o.a}}})),c=s,u=(a("e376"),a("2877")),d=Object(u["a"])(c,l,n,!1,null,"425560b8",null);t["default"]=d.exports},"6b64":function(e,t,a){"use strict";a("0e6f")},"767a":function(e,t,a){"use strict";a("179d")},7759:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"single_view"},[e.dataLoading?a("pageLoading"):e._e(),e.showSingle?a("div",{staticClass:"left_single"},[a("div",{staticClass:"single_title"},[e._v(" 楼栋导航 ")]),a("div",{staticClass:"single_scroll_view"},e._l(e.singleList,(function(t,l){return a("div",{key:l,staticClass:"single_item",class:l==e.currentSingle?"single_item_active":"",on:{click:function(a){return a.stopPropagation(),e.switchSingle(t,l)}}},[e._v(" "+e._s(t.single_name))])})),0)]):e._e(),a("div",{staticClass:"right_content",style:{width:e.showSingle?"calc(100% - 160px)":"calc(100% - 10px)",marginLeft:e.showSingle?"0px":"10px"}},[e.unitList.length>0?a("div",{staticClass:"top_unit"},e._l(e.unitList,(function(t,l){return a("div",{key:l,staticClass:"unit_item",class:l==e.currentUnit?"unit_item_active":"",on:{click:function(a){return a.stopPropagation(),e.switchUnit(t,l)}}},[a("a-popover",{attrs:{placement:"top"}},[t.allowEdit||t.allowDelete?a("template",{slot:"content"},[t.allowEdit?a("span",{staticStyle:{cursor:"pointer",color:"#409EFF"},on:{click:function(a){return a.stopPropagation(),e.editUnit(t)}}},[e._v(" 编辑单元"),a("a-icon",{attrs:{type:"edit"}})],1):e._e(),t.allowDelete?a("a-divider",{attrs:{type:"vertical"}}):e._e(),t.allowDelete?a("span",{staticStyle:{cursor:"pointer",color:"red"},on:{click:function(a){return a.stopPropagation(),e.deleteUnit(t)}}},[e._v(" 删除单元"),a("a-icon",{attrs:{type:"delete"}})],1):e._e()],1):a("template",{slot:"content"},[e._v(" 当前单元不可编辑 ")]),a("div",{staticClass:"unit_name"},[e._v(e._s(t.floor_name))])],2)],1)})),0):e._e(),a("div",{staticClass:"layer_content",style:{height:e.unitList.length>0?"calc(100vh - 120px)":"calc(100vh - 80px)",marginTop:e.unitList.length>0?"0px":"10px"}},[e.hasData?a("div",{staticClass:"left_room_structure",staticStyle:{position:"relative"}},e._l(e.roomStructure,(function(t,l){return a("div",{key:l,staticClass:"layer_item",class:"layer_nav_"+l},[a("a-popover",{attrs:{placement:"top"}},[t.allowEdit||t.allowDelete?a("template",{slot:"content"},[t.allowEdit?a("span",{staticStyle:{cursor:"pointer",color:"#409EFF"},on:{click:function(a){return a.stopPropagation(),e.editLayer(t)}}},[e._v(" 编辑楼层"),a("a-icon",{attrs:{type:"edit"}})],1):e._e(),t.allowDelete?a("a-divider",{attrs:{type:"vertical"}}):e._e(),t.allowDelete?a("span",{staticStyle:{cursor:"pointer",color:"red"},on:{click:function(a){return a.stopPropagation(),e.deleteLayer(t)}}},[e._v(" 删除楼层"),a("a-icon",{attrs:{type:"delete"}})],1):e._e()],1):a("template",{slot:"content"},[e._v(" 当前楼层不可编辑 ")]),a("div",{staticClass:"layer_left_content"},[a("div",{staticClass:"layer_name_vertical"},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[e._v(" "+e._s(t.layer_name)+" ")]),e._v(" "+e._s(t.layer_name.length>5?t.layer_name.substring(0,5)+"...":t.layer_name)+" ")],2)],1)])],2),a("div",{staticClass:"layer_left_txt"},[a("div",{staticClass:"layer_name_vertical"},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[e._v(" "+e._s(t.layer_name)+" ")]),e._v(" "+e._s(t.layer_name.length>5?t.layer_name.substring(0,5)+"...":t.layer_name)+" ")],2)],1)]),e._l(t.rooms,(function(t,l){return a("div",{key:l,staticClass:"room_item",staticStyle:{cursor:"pointer"},on:{click:function(a){return e.getRoominfo(t)}}},[t.money&&t.money.tag?a("div",{staticClass:"status_icon"},[e._v(e._s(t.money.tag)+" ")]):e._e(),a("div",{staticClass:"room_title"},[e._v(" "+e._s(t.room?t.room+"室":"暂无")+" ")]),e._l(t.roomProps,(function(t,l){return a("div",{key:l,staticClass:"room_props"},[a("a-tooltip",{attrs:{placement:"rightTop"}},[a("template",{slot:"title"},[e._v(" "+e._s(t.label)+":"+e._s(t.value)+" ")]),a("span",{style:{color:"欠费"==t.label?"red":""}},[e._v(e._s(t.label)+":"+e._s(t.value))])],2)],1)}))],2)})),t.rooms.length<=0?a("div",{staticClass:"room_item"},[a("p",[e._v("该楼层暂无添加房间")])]):e._e(),a("div",{staticClass:"layer_right_txt"},[a("div",{staticClass:"layer_name_vertical"},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[e._v(" "+e._s(t.layer_name)+" ")]),e._v(" "+e._s(t.layer_name.length>5?t.layer_name.substring(0,5)+"...":t.layer_name)+" ")],2)],1)]),a("a-popover",{attrs:{placement:"leftTop"}},[t.allowEdit||t.allowDelete?a("template",{slot:"content"},[t.allowEdit?a("span",{staticStyle:{cursor:"pointer",color:"#409EFF"},on:{click:function(a){return a.stopPropagation(),e.editLayer(t)}}},[e._v(" 编辑楼层"),a("a-icon",{attrs:{type:"edit"}})],1):e._e(),t.allowDelete?a("a-divider",{attrs:{type:"vertical"}}):e._e(),t.allowDelete?a("span",{staticStyle:{cursor:"pointer",color:"red"},on:{click:function(a){return a.stopPropagation(),e.deleteLayer(t)}}},[e._v(" 删除楼层"),a("a-icon",{attrs:{type:"delete"}})],1):e._e()],1):a("template",{slot:"content"},[e._v(" 当前楼层不可编辑 ")]),a("div",{staticClass:"layer_right_content"},[a("div",{staticClass:"layer_name_vertical"},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[e._v(" "+e._s(t.layer_name)+" ")]),e._v(" "+e._s(t.layer_name.length>5?t.layer_name.substring(0,5)+"...":t.layer_name)+" ")],2)],1)])],2)],2)})),0):e._e(),e.hasData||e.dataLoading?e._e():a("div",{staticClass:"no_data",staticStyle:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"},style:{transform:e.showSingle?"translateX(-75px) translateY(-30px)":""}},[a("span",{staticStyle:{"font-size":"20px",color:"#8a8a8a",transform:"translateY(-90px)"}},[e._v("暂无数据")])]),e.dataLoading?a("div",{staticClass:"no_data",staticStyle:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"},style:{transform:e.showSingle?"translateX(-75px) translateY(-30px)":""}},[a("span",{staticStyle:{"z-index":"99999999999","font-size":"20px",color:"#ffffff",transform:"translateY(-90px)",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},[a("a-icon",{staticStyle:{"font-size":"27px",color:"#ffffff"},attrs:{type:"loading"}}),a("div",{staticStyle:{"margin-top":"10px"}},[e._v("加载中...")])],1)]):e._e(),e.layerList.length>0&&e.hasData?a("div",{staticClass:"right_layer_nav",style:{width:e.isTrigger?"100px":"0"}},[a("div",{staticClass:"trigger_content"},[a("div",{staticClass:"trigger_icon",on:{click:e.triggerThis}},[e._v(" "+e._s(e.isTrigger?"折叠":"展开")+" ")]),e.isTrigger?a("div",{staticClass:"layer_nav_desc"},[e._v(" 楼层导航 ")]):e._e(),e._l(e.layerList,(function(t,l){return a("div",{key:l,staticClass:"layer_item",class:l==e.currentLayer?"layer_item_active":"",style:{display:e.isTrigger?"flex":"none"},on:{click:function(a){return a.stopPropagation(),e.switchLayer(t,l)}}},[e._v(" "+e._s(t.layer_name.length>3?t.layer_name.substring(0,2):t.layer_name)+" ")])}))],2)]):e._e()])]),a("unitEdit",{attrs:{visible:e.unitEditVisible,floor_id:e.floor_id},on:{exit:e.closeUnitDrawer}}),a("layerEdit",{attrs:{visible:e.layerEditVisible,layer_id:e.layer_id},on:{exit:e.closeLayerDrawer}}),a("roomInfo",{attrs:{visible:e.roomVisible,title:e.roomDrawerTitle,roomId:e.roomId},on:{closeRoom:e.onRoomClose}})],1)},n=[],i=(a("a9e3"),a("8bbf")),o=a.n(i),r=a("ed09"),s=a("3990"),c=a("5417"),u=a("0f64"),d=a("a805"),p=a("7852"),m=Object(r["c"])({props:{singleId:{type:[String,Number],default:0}},components:{pageLoading:c["default"],unitEdit:u["default"],layerEdit:d["default"],roomInfo:p["default"]},setup:function(e,t){var a=Object(r["h"])(!1),l=Object(r["h"])([]),n=Object(r["h"])([]),i=Object(r["h"])(0),c=Object(r["h"])(0),u=Object(r["h"])(0),d=Object(r["h"])(!1),p=Object(r["h"])(!1),m=Object(r["h"])(0);Object(r["f"])((function(){m.value||(a.value=!0,f())}));var f=function(){o.a.prototype.request(s["a"].buildingList,{}).then((function(e){console.log("楼栋",e),n.value=e.building,n.value&&n.value[0]&&(u.value=0,m.value=n.value[0].id,_(n.value[0].id))})).catch((function(e){}))},v=function(e,t){c.value!=t?(c.value=t,i.value=0,y(e)):console.log("重复")},_=function(t){var a={};t?a["single_id"]=t:e.singleId&&(a["single_id"]=e.singleId),o.a.prototype.request(s["a"].buildingUnitFloor,a).then((function(e){e.unit&&(l.value=e.unit,l.value[0]?(c.value=0,y(l.value[0])):(p.value=!1,o.a.prototype.$message.warn("该楼栋下没有单元")))})).catch((function(e){}))},b=Object(r["h"])([]),g=Object(r["h"])([]),y=function(e){var t={};e.floor_id&&(t["floor_id"]=e.floor_id),d.value=!0,p.value=!1,o.a.prototype.request(s["a"].buildingFloorLayerRooms,t).then((function(e){console.log("floorParam",e),e.layer&&(d.value=!1,b.value=e.layer,b.value.reverse(),g.value=e.layer,g.value&&g.value.length>0?p.value=!0:p.value=!1)})).catch((function(e){d.value=!1,p.value=!1}))};e.singleId&&(a.value=!1,m.value=e.singleId,_()),Object(r["i"])((function(){return e.singleId}),(function(e){e?(a.value=!1,m.value=e,_(e)):M()}),{deep:!0});var h=Object(r["h"])(!0),x=function(){h.value=!h.value},k=function(e,t){i.value!=t?(i.value=t,document.querySelector(".layer_nav_"+t).scrollIntoView({block:"start",behavior:"smooth"})):console.log("重复")},S=function(e,t){u.value!=t?(c.value=0,i.value=0,u.value=t,m.value=e.id,_(e.id)):console.log("重复")},w=Object(r["h"])(!1),j=Object(r["h"])(0),O=function(e){j.value=e.floor_id,w.value=!0},C=function(e){w.value=!1,"unit"==e&&_(m.value)},I=function(e){e.floor_id;o.a.prototype.$confirm({title:"提示",content:"确定要删除当前单元吗？",onOk:function(){o.a.prototype.request("/community/village_api.Building/deleteFloor",{floor_id:e.floor_id}).then((function(e){o.a.prototype.$message.success("删除成功！"),_(m.value)})).catch((function(e){}))},onCancel:function(){}})},F=Object(r["h"])(!1),L=Object(r["h"])(0),E=function(e){L.value=e.id,F.value=!0},$=function(e){F.value=!1,"layer"==e&&y(l.value[c.value])},B=function(e){e.layer_id;o.a.prototype.$confirm({title:"提示",content:"确定要删除当前楼层吗？",onOk:function(){o.a.prototype.request("/community/village_api.Building/deleteLayer",{layer_id:e.id}).then((function(e){o.a.prototype.$message.success("删除成功！"),y(l.value[c.value])})).catch((function(e){}))},onCancel:function(){}})},T=Object(r["h"])(!1),z=Object(r["h"])("房间信息"),q=Object(r["h"])(""),D=function(e){T.value=!0,z.value=e.room+" 号房间信息",q.value=e.pigcms_id,console.log("房间信息操作---",e)},U=function(){T.value=!1},M=function(){n.value=[],l.value=[],b.value=[],g.value=[],c.value=0,i.value=0,u.value=0,d.value=!1,m.value=0};return{pageSingleId:m,singleList:n,unitList:l,roomStructure:g,isTrigger:h,triggerThis:x,showSingle:a,layerList:b,currentLayer:i,currentUnit:c,currentSingle:u,switchLayer:k,switchUnit:v,switchSingle:S,getBuildingList:f,floorLayerRooms:y,getUnitFloor:_,clearData:M,dataLoading:d,hasData:p,unitEditVisible:w,floor_id:j,editUnit:O,closeUnitDrawer:C,deleteUnit:I,layerEditVisible:F,layer_id:L,editLayer:E,closeLayerDrawer:$,deleteLayer:B,getRoominfo:D,roomVisible:T,onRoomClose:U,roomDrawerTitle:z,roomId:q}}}),f=m,v=(a("6b64"),a("2877")),_=Object(v["a"])(f,l,n,!1,null,"0e41940a",null);t["default"]=_.exports},"77c5":function(e,t,a){},7852:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:e.drawerTitle?e.drawerTitle:e.title,placement:"right",width:"1400",visible:e.visible},on:{close:e.onRoomClose}},[e.visible?a("a-tabs",{attrs:{"active-key":e.currentKey},on:{change:e.tabChange}},e._l(e.tabList,(function(t,l){return a("a-tab-pane",{key:t.key},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:t.icon_type}}),e._v(" "+e._s(t.tab_name)+" ")],1),e.currentKey==t.key?a(t.component,{tag:"component",attrs:{roomId:e.roomId,roomParams:e.roomParams},on:{hideUserTab:e.hideUserTab,getRoomAddress:e.getAddress}}):e._e()],1)})),1):e._e()],1)},n=[],i=(a("a9e3"),a("c740"),a("a434"),a("8bbf")),o=a.n(i),r=a("ed09"),s=a("a55e"),c=a("16d1"),u=a("929b"),d=a("ee78"),p=a("dd47"),m=a("415e"),f=a("59d1"),v=a("0457"),_=a("f91f"),b=(a("3990"),Object(r["c"])({props:{title:{type:String,defalut:"房间信息"},visible:{type:Boolean,defalut:!1},roomId:{type:[String,Number],defalut:""},type:{type:String,defalut:""}},components:{personnelInformation:s["default"],roomInformation:c["default"],chargingStandard:u["default"],propertyBill:p["default"],associatedWorkOrder:m["default"],onlineFile:f["default"],userInformation:v["default"],parkingSpace:d["default"],associatedCardNo:_["default"]},setup:function(e,t){var a=Object(r["h"])(""),l=function(){t.emit("closeRoom")},n=Object(r["h"])(""),i=function(e){n.value=e},s=function(e){a.value=e};Object(r["i"])((function(){return e.visible}),(function(e){e&&d()}),{deep:!0});var c=Object(r["h"])([]),u=Object(r["h"])({}),d=function(){o.a.prototype.request("/community/village_api.Building/getRoomOptionType",{vacancy_id:e.roomId}).then((function(e){c.value=e.option_list,a.value=e.option_list[0].key,u.value=e}))},p=function(){var e=c.value.findIndex((function(e){return"userInformation"==e.component}));c.value.splice(e,1),a.value=c.value[0].key};return{onRoomClose:l,tabList:c,getRoomTab:d,roomParams:u,tabChange:s,currentKey:a,getAddress:i,drawerTitle:n,hideUserTab:p}}})),g=b,y=a("2877"),h=Object(y["a"])(g,l,n,!1,null,"07c608b6",null);t["default"]=h.exports},8803:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:e.title,visible:e.visible,width:750,"body-style":{paddingBottom:"80px"}},on:{close:e.resetForm}},[a("a-form-model",{ref:"ruleForm",attrs:{model:e.buildForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-model-item",{attrs:{label:"绑定员工",prop:"yuangong",extra:"多选，不限制数量，绑定员工后，业主加好友时随机从其中选择"}},[a("a-select",{staticStyle:{width:"240px"},attrs:{mode:"multiple",placeholder:"请选择员工",value:e.selectedItems},on:{change:function(t){return e.handleSelectChange(t,"yuangong")}}},e._l(e.filteredOptions,(function(t,l){return a("a-select-option",{attrs:{value:t.name,index:l}},[e._v(" "+e._s(t.name))])})),1)],1),a("a-form-model-item",{attrs:{label:"绑定楼栋",prop:"is_kefu",extra:"选择“是”选项，添加客服时只能选择楼栋下的业主；选择“否”选项，添加客服时能选择楼栋所有的业主"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:e.buildForm.is_kefu,callback:function(t){e.$set(e.buildForm,"is_kefu",t)},expression:"buildForm.is_kefu"}},[a("a-radio",{attrs:{value:1}},[e._v("是")]),a("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1),a("a-form-model-item",{attrs:{label:"欢迎语",prop:"welcome_tip",extra:"变量填写规则（可对应复制到填写内容）：{姓名} {手机号}"}},[a("a-textarea",{staticStyle:{padding:"5px width:200px",height:"100px",resize:"none"},attrs:{placeholder:"请输入欢迎语"},model:{value:e.buildForm.welcome_tip,callback:function(t){e.$set(e.buildForm,"welcome_tip",t)},expression:"buildForm.welcome_tip"}})],1),a("a-form-model-item",{attrs:{label:"企业微信服务群二维码"}},[a("a-upload",{attrs:{name:"reply_pic",multiple:!1,action:e.uploadUrl,data:e.uploadParams,"before-upload":e.beforeUpload,showUploadList:!1,headers:e.headers},on:{change:function(t){return e.handleUploadChange(t,"qycode")}}},[a("a-button",{attrs:{loading:e.qyimgLoading}},[e._v("上传二维码")]),e.ercodeUrl?a("a-button",{attrs:{type:"link"},on:{click:function(t){return t.stopPropagation(),e.lookCode()}}},[e._v("查看二维码")]):e._e(),a("a-button",{attrs:{type:"link"},on:{click:function(t){return t.stopPropagation(),e.lookHelp.apply(null,arguments)}}},[e._v("点击可查看使用帮助")])],1)],1),a("a-form-model-item",{attrs:{label:"装修",prop:"zhuangxiu"}},[a("template",{slot:"extra"},[e._v(" 1、无需装修：将直接使用二维码自带的模板样式"),a("br"),e._v(" 2、系统默认模板：将直接使用我们提供的模板样式，可选择查看样式"),a("br"),e._v(" 3、上传模板：需要自行设计好模板后上传，尺寸：750*1334；注意：模板左下角需距离页面边缘间距20像素预留100*100像素的空白位置，用于放置群二维码 ")]),a("a-select",{staticStyle:{width:"240px"},attrs:{placeholder:"请选择装修"},on:{change:function(t){return e.handleSelectChange(t,"zhuangxiu")}},model:{value:e.buildForm.template_type,callback:function(t){e.$set(e.buildForm,"template_type",t)},expression:"buildForm.template_type"}},e._l(e.repaireList,(function(t,l){return a("a-select-option",{attrs:{value:t.id,index:l}},[e._v(e._s(t.name))])})),1)],2),2==e.buildForm.template_type?a("a-form-model-item",{attrs:{label:"上传模板",prop:"template_url",extra:"尺寸：750*1334；注意：模板左下角需距离页面边缘间距20像素预留100*100像素的空白位置，用于放置群二维码"}},[a("a-upload",{attrs:{name:"reply_pic",multiple:!1,action:e.uploadUrl,data:e.uploadParams,"before-upload":e.beforeUpload,showUploadList:!1,headers:e.headers},on:{change:function(t){return e.handleUploadChange(t,"template")}}},[a("a-button",{attrs:{loading:e.temimgLoading}},[e._v("上传模板")]),e.imageUrl?a("a-button",{attrs:{type:"link"},on:{click:function(t){return t.stopPropagation(),e.previewImage()}}},[e._v("查看图片")]):e._e()],1)],1):e._e(),e.effect_img?a("a-form-model-item",{attrs:{label:"效果预览"}},[a("img",{staticStyle:{width:"260px"},attrs:{src:e.effect_img},on:{click:function(t){return t.stopPropagation(),e.lookEffectImg()}}})]):e._e()],1),a("a-modal",{attrs:{title:"效果预览",width:500,visible:e.effectImgVisible,footer:null},on:{cancel:e.handleEffectImgCancel}},[a("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[a("img",{staticStyle:{width:"400px"},attrs:{preview:"1",src:e.effect_img}})])]),a("a-modal",{attrs:{title:"查看二维码",width:350,visible:e.erCodeVisible,footer:null},on:{cancel:e.handleCodeCancel}},[a("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[a("img",{staticStyle:{width:"150px"},attrs:{preview:"1",src:e.ercodeUrl}})])]),a("a-modal",{attrs:{title:"预览图片",width:350,visible:e.previewVisible,footer:null},on:{cancel:e.handlePreviewCancel}},[a("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[a("img",{staticStyle:{width:"150px"},attrs:{preview:"2",src:e.imageUrl}})])]),a("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{staticStyle:{marginRight:"8px"},on:{click:e.resetForm}},[e._v(" 关闭 ")]),a("a-button",{attrs:{loading:e.confirmLoading,type:"primary"},on:{click:e.onSubmit}},[e._v(" 保存 ")])],1)],1)},n=[],i=(a("a9e3"),a("4de4"),a("d3b7"),a("caad"),a("2532"),a("d81d"),a("b0c0"),a("ac1f"),a("1276"),a("8bbf")),o=a.n(i),r=a("ed09"),s=a("3990"),c=Object(r["c"])({props:{title:{type:String,default:""},visible:{type:Boolean,default:!1},single_id:{type:[String,Number],default:0}},setup:function(e,t){var a=function(){u.value=!1},l=function(){u.value=!0},n=function(){d.value=!1},i=function(){d.value=!0},c=Object(r["h"])(""),u=Object(r["h"])(!1),d=Object(r["h"])(!1),p=Object(r["h"])(""),m=Object(r["h"])(""),f=Object(r["g"])({authorization:"authorization-text"}),v=Object(r["h"])("/v20/public/index.php/common/common.UploadFile/uploadImg"),_=Object(r["g"])({upload_dir:"village"}),b=Object(r["h"])(!1),g=function(){b.value=!1},y=Object(r["h"])(""),h=Object(r["h"])(!1),x=Object(r["h"])(!1),k=function(e,t){if("uploading"!==e.file.status)return"error"===e.file.status?(o.a.prototype.$message.error("上传失败!"),void("qycode"==t?h.value=!0:x.value=!0)):void("done"===e.file.status&&("qycode"==t?(c.value=e.file.response.data.full_url,E.value.qy_qrcode=e.file.response.data.image,h.value=!1):(y.value=e.file.response.data.full_url,E.value.template_url=e.file.response.data.image,x.value=!1)));"qycode"==t?h.value=!0:x.value=!0},S=function(e,t){var a="image/jpeg"===e.type||"image/png"===e.type;a||o.a.prototype.$message.error("You can only upload JPG file!");var l=e.size/1024/1024<2;return l||o.a.prototype.$message.error("Image must smaller than 2MB!"),a&&l},w=function(e){b.value=!0},j=Object(r["h"])([]),O=Object(r["h"])([]),C=Object(r["a"])({get:function(){return j.value.filter((function(e){return!O.value.includes(e)}))}}),I=Object(r["h"])([{name:"无需装修",id:0},{name:"系统默认模板",id:1},{name:"上传模板",id:2}]),F=function(){window.open(p.value)},L=Object(r["h"])(!1),E=Object(r["h"])({}),$=Object(r["g"])({is_kefu:[{required:!0,message:"请选择是否绑定楼栋",trigger:"blur"}],welcome_tip:[{required:!0,message:"请输入欢迎语",trigger:"blur"}]}),B=Object(r["h"])(),T=Object(r["h"])({span:6}),z=Object(r["h"])({span:16}),q=function(){B.value.validate((function(e){if(e){if(0==O.length)return void o.a.prototype.$message.warn("请选择绑定员工！");U()}}))},D=function(){t.emit("closeDrawer"),E.value={},y.value="",c.value="",m.value="",B.value.resetFields(),O.value=[]},U=function(){L.value=!0;var t=E.value;t.single_id=e.single_id,o.a.prototype.request(s["a"].saveBuildingButler,t).then((function(e){L.value=!1,D(),o.a.prototype.$message.success("保存成功！")})).catch((function(e){L.value=!1}))},M=function(e){o.a.prototype.request(s["a"].getBuildingButler,{single_id:e}).then((function(e){O.value=[],E.value={},e.buldingButler&&(E.value=e.buldingButler,O.value=e.buldingButlerBindList.map((function(e){return e.name})),c.value=e.buldingButler.qy_qrcode,E.value.template_url=e.buldingButler.template_url,y.value=e.buldingButler.template_url,m.value=e.buldingButler.effect_img,E.value.work_arr=e.buldingButler.work_arr.split(",")),e.buldingButlerList&&(j.value=e.buldingButlerList),p.value=e.qyhelp_url}))},P=function(e,t){if("yuangong"==t){O.value=e;var a=[];j.value.map((function(t){e.map((function(e){e==t.name&&a.push(t.wid)}))})),E.value.work_arr=a}"zhuangxiu"==t&&(E.value.template_type=e,1==e&&E.value.qy_qrcode||2==e&&E.value.qy_qrcode&&E.value.template_url?R():(E.value.effect_img="",m.value=""))},R=function(){var e=E.value.template_type;0!=e&&e&&(E.value.qy_qrcode?2!=e||E.value.template_url?o.a.prototype.request(s["a"].servicesImgPreview,{template_type:e,qy_qrcode:E.value.qy_qrcode,template_url:E.value.template_url}).then((function(e){if(console.log("services_look_img",e),e.data){var t=e.data.file_path,a=e.data.file;E.value.effect_img=a,m.value=t}})):o.a.prototype.$message.warn("请上传对应模板！"):o.a.prototype.$message.warn("请上传企业微信群二维码！"))};return Object(r["i"])((function(){return e.visible}),(function(t){t&&M(e.single_id)}),{deep:!0}),{confirmLoading:L,onSubmit:q,resetForm:D,buildForm:E,labelCol:T,wrapperCol:z,rules:$,saveForm:U,ruleForm:B,userList:j,repaireList:I,handleSelectChange:P,filteredOptions:C,selectedItems:O,lookHelp:F,lookCode:l,handleCodeCancel:a,ercodeUrl:c,erCodeVisible:u,getBuildInfo:M,qyhelpUrl:p,headers:f,uploadUrl:v,uploadParams:_,imageUrl:y,qyimgLoading:h,temimgLoading:x,beforeUpload:S,handleUploadChange:k,previewImage:w,previewVisible:b,handlePreviewCancel:g,services_look_img:R,effect_img:m,effectImgVisible:d,handleEffectImgCancel:n,lookEffectImg:i}}}),u=c,d=(a("33c7"),a("2877")),p=Object(d["a"])(u,l,n,!1,null,"623dedf6",null);t["default"]=p.exports},"89a3":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"导入"+e.modalTitle,width:1e3,visible:e.visible,maskClosable:!1,footer:e.isImporting||2==e.currentKey?null:void 0},on:{cancel:e.handleCancel}},[a("a-tabs",{attrs:{"default-active-key":1},on:{change:e.tabChange}},[a("a-tab-pane",{key:1,attrs:{tab:"导入操作"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.firstStep&&!e.isImporting,expression:"firstStep && !isImporting"}],staticClass:"step_one"},[a("h4",[e._v("步骤一：上传 Excel 文件")]),a("p",[e._v("您要从何处导入数据，请选择导入的 Excel 文件")]),a("div",{staticStyle:{display:"flex",width:"80%"}},[a("div",{staticClass:"label",staticStyle:{width:"82px","text-align":"left"}},[e._v("Excel文件")]),a("a-upload-dragger",{staticStyle:{height:"100px",width:"calc(100% - 82px)","margin-left":"10px"},attrs:{name:"file",multiple:!0,action:e.uploadUrl,beforeUpload:e.beforeUploadExcel,showUploadList:!1,headers:e.headers,data:{upload_dir:"building",system_type:"village",type:e.uploadType,tokenName:e.tokenStr}},on:{change:e.handleUploadChange}},[a("a-icon",{attrs:{type:e.uploadLoading?"loading":"upload"}}),e._v(" "+e._s(e.uploadFileName?e.uploadFileName:"拖拽或点击上传 Excel 文件")+" ")],1)],1),e.fileList.length>0?a("div",{staticClass:"select_list",staticStyle:{display:"flex","align-items":"center",height:"50px"}},[a("div",{staticClass:"label",staticStyle:{width:"82px","text-align":"left"}},[e._v("选择Sheet表")]),a("a-select",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{"default-value":0},on:{change:e.handleSelectChange}},e._l(e.fileList,(function(t,l){return a("a-select-option",{key:l,attrs:{value:l}},[e._v(" "+e._s(t.worksheetName)+" ")])})),1),a("div",{staticStyle:{color:"red","margin-left":"10px"}},[e._v("总数据量："+e._s(e.selectObj.totalRows?e.selectObj.totalRows-1:0)+" 条")])],1):e._e(),e.fileList.length>0&&e.replaceFieldSelect.length>0?a("div",{staticClass:"select_list",staticStyle:{display:"flex","align-items":"center",height:"50px"}},[a("div",{staticClass:"label",staticStyle:{width:"90px","text-align":"left"}},[e._v("数据重复时")]),a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:e.isSkip,callback:function(t){e.isSkip=t},expression:"isSkip"}},e._l(e.replaceFieldSelect,(function(t,l){return a("a-radio",{attrs:{value:t.key}},[e._v(e._s(t.value))])})),1),"cover"==e.isSkip&&e.replaceFieldSelect[1]&&e.replaceFieldSelect[1].children.length>0?a("div",{staticStyle:{"margin-left":"10px",display:"flex","align-items":"center"}},[a("a-select",{staticStyle:{width:"120px",margin:"0 10px"},attrs:{value:e.selectreplaceFie},on:{change:e.handleReplaceChange}},e._l(e.replaceFieldSelect[1].children,(function(t,l){return a("a-select-option",{key:l,attrs:{value:t.option}},[e._v(e._s(t.title))])})),1),a("div",{staticStyle:{color:"red"}},[e._v(e._s(e.selectTips))])],1):e._e()],1):e._e(),a("h5",[e._v("导入步骤：")]),a("p",[e._v(" 第一步：上传存储有"+e._s(e.modalTitle)+"的资料 Excel 文件；【您可以直接上传 Excel 文件或者下载模板："),a("a-button",{attrs:{type:"link"},on:{click:e.downloadExcel}},[e._v(" "+e._s(e.modalTitle)+"模板下载")]),e._v("】 ")],1),a("p",[e._v(" 第二步：设置 Excel 里的列与系统中的列的对应关系")]),a("p",[e._v(" 第三步：开始导入")])]),e.firstStep||e.isImporting?e._e():a("div",{staticClass:"step_two"},[a("div",{staticClass:"top_desc",staticStyle:{display:"flex","align-items":"center",height:"30px"}},[a("h4",[e._v("步骤二：【企业客户创建对应关系】建立系统列与Excel列的对应关系")]),a("p",{staticStyle:{"margin-left":"10px","margin-top":"7px"}},[e._v("建立系统列与Excel列的对应关系")])]),a("div",{staticClass:"line",staticStyle:{width:"100%",height:"1px",border:"0","background-color":"#999999",margin:"10px 0"}}),a("div",{staticClass:"list"},[a("div",{staticClass:"title"},[a("span",[e._v(e._s(e.modalTitle)+"信息")]),a("span",{staticStyle:{"margin-left":"10px",color:"red"}},[e._v("*号为必填项")])]),a("div",{staticClass:"top_label",staticStyle:{width:"100%",height:"30px",display:"flex","justify-content":"space-between margin-top: 10px"}},[a("div",{staticClass:"left_label",staticStyle:{width:"50%",display:"flex","background-color":"#dddddd",border:"1px solid #999999"}},e._l(e.labelList,(function(t,l){return a("div",{key:l,staticStyle:{width:"50%",display:"flex","align-items":"center","justify-content":"center"}},[e._v(e._s(t.name))])})),0),a("div",{staticClass:"right_label",staticStyle:{width:"50%",display:"flex","background-color":"#dddddd",border:"1px solid #999999"}},e._l(e.labelList,(function(t,l){return a("div",{key:l,staticStyle:{width:"50%",display:"flex","align-items":"center","justify-content":"center"}},[e._v(e._s(t.name))])})),0)]),a("div",{staticClass:"select_con",staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},e._l(e.sourceMapFields,(function(t,l){return a("div",{key:l,staticClass:"select_list",staticStyle:{width:"50%",display:"flex","align-items":"center","justify-content":"space-around"}},[a("div",{staticClass:"left_label",staticStyle:{width:"30%",display:"flex","align-items":"center","justify-content":"flex-end","margin-right":"30px"}},[t.val.isMust?a("span",{staticStyle:{color:"red","margin-right":"3px"}},[e._v("*")]):e._e(),a("a-tooltip",{attrs:{placement:"topLeft",title:t.key}},[e._v(" "+e._s(t.key.length>8?t.key.substring(0,8)+"...":t.key)+"： ")])],1),a("div",{staticClass:"right_select",staticStyle:{width:"50%",display:"flex","align-items":"center","justify-content":"flex-end",transform:"translateY(-4px)"}},[e.refreshSelect?a("a-select",{staticStyle:{width:"200px","margin-left":"10px","margin-top":"10px"},attrs:{allowClear:"",placeholder:"请选择","default-value":t.selected?t.key:void 0},on:{change:function(a){return e.handleExcelChange(a,t.val.field)}}},e._l(e.excelCloumns,(function(t,l){return a("a-select-option",{key:l,staticStyle:{height:"32px"},attrs:{value:t.key}},[e._v(" "+e._s(t.val)+" ")])})),1):e._e()],1)])})),0)])])]),a("a-tab-pane",{key:2,attrs:{tab:"导入日志"}},[2==e.currentKey?a("importRecord",{attrs:{type:e.uploadType}}):e._e()],1)],1),e.isImporting?e._e():a("template",{slot:"footer"},[a("div",{staticClass:"footer_con",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%"}},[e.firstStep?a("div",{staticClass:"left"}):e._e(),e.firstStep?e._e():a("div",{staticClass:"left"},[e._v(" 请注意系统列与Excel列的类型要匹配 ")]),a("div",{staticClass:"right"},[e.firstStep?e._e():a("a-button",{attrs:{type:"default"},on:{click:e.preStep}},[e._v("上一步")]),e.firstStep?a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]):e._e(),e.firstStep?e._e():a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.startImport}},[e._v("开始导入")]),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"default"},on:{click:e.handleCancel}},[e._v("取消")])],1)])]),e.isImporting&&2!=e.currentKey?a("div",{staticClass:"progress_content",staticStyle:{width:"100%",height:"450px",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},[a("a-progress",{attrs:{type:"circle","stroke-color":{"0%":"#108ee9","100%":"#87d068"},percent:e.percentVal}}),a("div",{staticClass:"importing",staticStyle:{"margin-top":"15px"}},[e._v(" 总行数 "),a("span",{staticStyle:{"font-size":"larger"}},[e._v(e._s(e.readRowTotal))]),e._v("，正在导入，剩余"),a("span",{staticStyle:{"font-size":"larger"}},[e._v(e._s(e.readRowTotal-(e.successInsterTotal+e.errorTotal))+" ")]),e._v(" 条记录待导入，成功"),a("span",{staticStyle:{color:"#68C472","font-size":"larger"}},[e._v(e._s(e.successInsterTotal))]),e._v("条,失败"),a("span",{staticStyle:{color:"red","font-size":"larger"}},[e._v(" "+e._s(e.errorTotal)+" ")]),e._v("条 ")]),a("div",{staticClass:"desc",staticStyle:{"margin-top":"15px",color:"#999999","font-size":"14px"}},[100!=e.percentVal?a("span",[e._v("提示：正在等待导入，如果关闭本窗口，导入不会中断")]):a("span",[e._v("导入完成")]),100==e.percentVal?a("a-button",{attrs:{type:"link"},on:{click:e.goBack}},[e._v("重新导入")]):e._e()],1)],1):e._e()],2)},n=[],i=a("ade3"),o=(a("a9e3"),a("ac1f"),a("1276"),a("b0c0"),a("d81d"),a("a434"),a("4de4"),a("d3b7"),a("8bbf")),r=a.n(o),s=(a("5880"),a("ca00")),c=a("9f0e"),u=a("ed09"),d=(a("3990"),Object(u["c"])({props:{visible:{type:Boolean,default:!1},upload_type:{type:[String,Number],default:0},uploadType:{type:String,default:""}},components:{importRecord:c["default"]},setup:function(e,t){var a=Object(u["h"])("");"uploadBuilding"==e.uploadType&&(a.value="楼栋"),"uploadUnit"==e.uploadType&&(a.value="单元"),"uploadFloor"==e.uploadType&&(a.value="楼层"),"uploadRoom"==e.uploadType&&(a.value="房间"),"uploadThreeTable"==e.uploadType&&(a.value="三表");var l=Object(u["h"])("skip"),n=Object(u["h"])(""),o=Object(u["h"])(null),c=Object(u["h"])(!1),d=Object(u["h"])(0),p=[{name:"系统列"},{name:"Excel列"}],m=Object(u["h"])("/v20/public/index.php/community/common.ImportExcel/villageUploadFile"),f=Object(u["h"])([]),v=Object(u["h"])(!1),_=Object(u["h"])(!0),b=Object(u["h"])(!1),g=Object(u["h"])(0),y=Object(u["h"])(""),h=Object(u["h"])(""),x=Object(s["i"])(location.hash);h.value=x+"_access_token";var k=function(e){var t=e.name.split(".").pop();if("xlsx"!=t&&"xls"!=t)return v.value=!1,r.a.prototype.$message.warn("上传文件格式非 Excel"),!1},S=function(){o.value&&(clearInterval(o.value),o.value=null),t.emit("exit",!1)},w=function(){_.value=!0},j=Object(u["h"])([]),O=function(e,t){if("root"!=e&&void 0!=e){var a=!0;j.value.map((function(l,n){l.key==t&&(l.value=e,a=!1)})),a&&j.value.push({key:t,value:e})}else j.value.map((function(e,a){e.key==t&&j.value.splice(a,1)}))},C=function(){D.totalRows&&0==D.totalRows?r.a.prototype.$message.warn("请完善上传信息"):z.value&&T.value?(_.value=!1,R()):r.a.prototype.$message.warn("请先上传Excel文件")},I=Object(u["h"])("重复时，覆盖现有客户数据"),F=function(e){n.value=e,N.value[1].children.map((function(t){t.option==e&&(I.value=t.msg?t.msg:"重复时，覆盖现有客户数据")})),Object(u["d"])()},L=function(){var t=P.value.filter((function(e){return e.val.isMust})).length,a=0;P.value.map((function(e){j.value.map((function(t){e.val.isMust&&t.key==e.val.field&&a++}))})),a==t?r.a.prototype.request("/community/common.ImportExcel/startImport",{tokenName:h.value,type:e.uploadType,relationship:j.value,inputFileName:T.value.path,worksheetName:z.value,find_type:l.value,find_value:n.value,selectWorkSheetIndex:g.value}).then((function(e){r.a.prototype.$message.success("提交成功，准备导入！"),c.value=!0,o.value=setInterval((function(){W()}),1e3)})).catch((function(e){c.value=!1,H()})):r.a.prototype.$message.warn("有必填项未选")},E=Object(s["k"])("/community/common.ImportExcel/villageUploadFile"),$=r.a.ls.get(E),B=Object(u["g"])({authorization:"authorization-text",ticket:$}),T=Object(u["h"])(""),z=Object(u["h"])(""),q=function(e){v.value=!0,"uploading"!==e.file.status&&(v.value=!1),"done"===e.file.status?(T.value=e.file.response.data,v.value=!1,1e3==e.file.response.status?(y.value=e.file.response.data.file_name,V(T.value)):r.a.prototype.$message.error(e.file.response.msg)):"error"===e.file.status&&(v.value=!1,r.a.prototype.$message.error("".concat(e.file.name," file upload failed.")))},D=Object(u["h"])({}),U=function(e){D.value=f.value[e],z.value=f.value[e].worksheetName,g.value=e,Object(u["d"])()},M=Object(u["h"])([]),P=Object(u["h"])([]),R=function(){r.a.prototype.request("/community/common.ImportExcel/startBindExcelCol",{tokenName:h.value,type:e.uploadType,inputFileName:T.value.path,worksheetName:z.value,selectWorkSheetIndex:g.value}).then((function(e){M.value=e.excelCloumns,P.value=e.sourceMapFields,j.value=[],e.sourceMapFields.map((function(t){if(t.selected){var a=e.excelCloumns.filter((function(e){return e.val==t.key}))[0].key;j.value.push({key:t.val.field,value:a})}})),b.value=!1,Object(u["e"])((function(){b.value=!0})),Object(u["d"])()})).catch((function(e){}))},N=Object(u["h"])([]),V=function(t){r.a.prototype.request("/community/common.ImportExcel/importForExcel",Object(i["a"])({tokenName:h.value,inputFileName:t.path,type:e.uploadType},"tokenName",h.value)).then((function(e){f.value=e.worksheet,D.value=e.worksheet[0],z.value=e.worksheet[0].worksheetName,N.value=e.replaceFieldSelect,N.value,length>0&&(l.value=N.value[0].key),n.value=e.replaceFieldSelect[1].children[0].option,I.value=e.replaceFieldSelect[1].children[0].msg?e.replaceFieldSelect[1].children[0].msg:"重复时，覆盖现有客户数据",Object(u["d"])()})).catch((function(e){}))},Y=Object(u["h"])(0),K=Object(u["h"])(0),G=Object(u["h"])(0),A=Object(u["h"])(0),W=function(){r.a.prototype.request("/community/common.ImportExcel/refreshProcess",{tokenName:h.value,type:e.uploadType}).then((function(a){a.process&&(c.value=!0,Y.value=a.process,K.value=a.processInfo.readRowTotal,G.value=a.processInfo.successInsterTotal,A.value=a.processInfo.errorTotal,100==a.process&&(r.a.prototype.$message.success("导入执行完毕！"),"uploadBuilding"==e.uploadType?t.emit("exit","building"):"uploadRoom"==e.uploadType&&t.emit("exit","room"),H()))})).catch((function(e){H()}))},H=function(){clearInterval(o.value),o.value=null,T.value="",z.value="",N.value=[],y.value="",f.value=[]},J=function(){window.open(ee.value)},Z=function(){f.value=[],_.value=!0,c.value=!1,Y.value=0,K.value=0,K.value=0,G.value=0,A.value=0,y.value="",T.value="",z.value="",N.value=[],l.value="skip"},X=Object(u["h"])(1),Q=function(e){X.value=e},ee=Object(u["h"])(""),te=function(){r.a.prototype.request("/community/common.ImportExcel/getImportTemplateUrl",{tokenName:h.value,type:e.uploadType}).then((function(e){ee.value=e.url}))};return te(),{handleCancel:S,headers:B,handleUploadChange:q,currentIndex:d,uploadUrl:m,uploadExcelFile:V,downloadExcel:J,fileList:f,uploadLoading:v,selectObj:D,handleSelectChange:U,nextStep:C,firstStep:_,preStep:w,startImport:L,labelList:p,getSelectList:R,pathUrl:T,excelCloumns:M,sourceMapFields:P,handleExcelChange:O,relationship:j,beforeUploadExcel:k,refreshSelect:b,interval:o,refreshProgress:W,isImporting:c,percentVal:Y,clearTimer:H,replaceFieldSelect:N,selectreplaceFie:n,isSkip:l,handleReplaceChange:F,readRowTotal:K,successInsterTotal:G,errorTotal:A,goBack:Z,tabChange:Q,currentKey:X,tokenStr:h,modalTitle:a,uploadFileName:y,modalUrl:ee,getModalUrl:te,selectTips:I}}})),p=d,m=(a("37f8"),a("2877")),f=Object(m["a"])(p,l,n,!1,null,"b0dd512c",null);t["default"]=f.exports},"8bca":function(e,t,a){},"929b":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"charging_standard"},[a("a-table",{attrs:{pagination:e.pageInfo,columns:e.chargeColumns,loading:e.tableLoading,"data-source":e.tableList},on:{change:e.tableChange},scopedSlots:e._u([{key:"action",fn:function(t,l){return a("span",{},[a("a-popconfirm",{attrs:{title:"是否删除当前项？",placement:"topLeft","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.deleteStandard(l)}}},[a("a",{staticStyle:{color:"red"}},[e._v("删除")])])],1)}}])})],1)},n=[],i=(a("a9e3"),a("8bbf")),o=a.n(i),r=a("ed09"),s=Object(r["c"])({props:{roomParams:{type:Object,default:function(){return{}}},roomId:{type:[String,Number],defalut:""}},setup:function(e,t){var a=Object(r["h"])([]),l=Object(r["h"])({pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40","50","60","70","80","90","100"],showSizeChanger:!0}),n=Object(r["h"])([]),i=Object(r["h"])(!1);Object(r["f"])((function(){u()}));var s=function(e){var t=e.pageSize,a=e.current;l.value.current=a,l.value.pageSize=t,u()},c=function(e){o.a.prototype.request("/community/village_api.cashier/delChargeStandardBind",{charge_standard_bind_id:e.bind_id}).then((function(e){o.a.prototype.$message.success("删除成功！"),l.value.current=1,l.value.pageSize=10,u()}))},u=function(){i.value=!0,o.a.prototype.request("/community/village_api.Building/getRoomBindChargeRuleList",{vacancy_id:e.roomId,page:l.value.current,limit:l.value.pageSize}).then((function(e){n.value=e.list,l.value.total=e.count,i.value=!1})).catch((function(e){i.value=!1}))};return a.value=[{title:"所属收费科目",dataIndex:"subject_name",key:"subject_name"},{title:"收费项目名称",dataIndex:"project_name",key:"project_name"},{title:"收费标准名称",dataIndex:"charge_name",key:"charge_name"},{title:"收费标准生效时间",dataIndex:"charge_valid_time",key:"charge_valid_time"},{title:"计费模式",dataIndex:"fees_type",key:"fees_type"},{title:"账单生成周期设置",dataIndex:"bill_create_set",key:"bill_create_set"},{title:"账单欠费模式",dataIndex:"bill_arrears_set",key:"bill_arrears_set"},{title:"生成账单模式",dataIndex:"bill_type",key:"bill_type"},{title:"是否支持预缴",dataIndex:"is_prepaid",key:"is_prepaid"},{title:"未入住房屋折扣",dataIndex:"not_house_rate",key:"not_house_rate"},{title:"操作",dataIndex:"operation",key:"operation",width:"120px",scopedSlots:{customRender:"action"}}],{chargeColumns:a,pageInfo:l,tableList:n,tableLoading:i,getChargeList:u,tableChange:s,deleteStandard:c}}}),c=s,u=a("2877"),d=Object(u["a"])(c,l,n,!1,null,"3483500e",null);t["default"]=d.exports},9556:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user_label"},[e._l(e.labelForm.list,(function(t,l){return a("div",{key:l,staticClass:"label_con"},[a("div",{staticClass:"title"},[e._v(e._s(t.name)+"：")]),a("div",{staticClass:"radio_con"},[a("a-radio-group",{on:{change:e.radioChange},model:{value:e.valueGroup[l],callback:function(t){e.$set(e.valueGroup,l,t)},expression:"valueGroup[index]"}},e._l(t.children,(function(l,n){return a("a-radio",{key:t.value,attrs:{value:l.id}},[e._v(e._s(l.name))])})),1)],1)])})),a("a-button",{staticStyle:{"margin-left":"20px","margin-top":"20px"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],2)},n=[],i=(a("8bbf"),a("ed09")),o=(a("3990"),Object(i["c"])({props:{formParams:{type:Object,default:function(){return{}}}},setup:function(e,t){var a=Object(i["h"])({}),l=Object(i["h"])([]);a.value=e.formParams.label_list,l.value=e.formParams.label_list.value;var n=function(e){console.log("value===>",e)},o=function(){console.log("labelForm===>",a.value.value)};return{labelForm:a,onSubmit:o,valueGroup:l,radioChange:n}}})),r=o,s=(a("dbd3"),a("2877")),c=Object(s["a"])(r,l,n,!1,null,"dbb68476",null);t["default"]=c.exports},"9e6e":function(e,t,a){"use strict";a("5731")},"9ec7":function(e,t,a){},"9f0e":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"charging_standard"},[a("a-table",{attrs:{"row-key":function(e){return e.add_time},pagination:e.pageInfo,columns:e.chargeColumns,loading:e.tableLoading,"data-source":e.tableList},on:{change:e.tableChange},scopedSlots:e._u([{key:"file_url",fn:function(t,l){return a("span",{},[0==l.status?a("a",{on:{click:function(t){return e.goUrl(l.file_url)}}},[e._v("点击查看")]):a("span",[e._v("--")])])}},{key:"duration",fn:function(t,l){return a("span",{},[e._v(" "+e._s(l.duration)+"s ")])}},{key:"status",fn:function(t,l){return a("span",{},[a("span",{style:{color:0==l.status?"red":"green"}},[e._v(e._s(0==l.status?"存在导入失败的数据":"导入成功"))])])}}])})],1)},n=[],i=a("8bbf"),o=a.n(i),r=a("ed09"),s=Object(r["c"])({props:{type:{type:String,default:""}},setup:function(e,t){var a=Object(r["h"])([]),l=Object(r["h"])({pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40","50","60","70","80","90","100"],showSizeChanger:!0}),n=Object(r["h"])([]),i=Object(r["h"])(!1);Object(r["f"])((function(){c()}));var s=function(e){var t=e.pageSize,a=e.current;l.value.current=a,l.value.pageSize=t,c()},c=function(){i.value=!0,o.a.prototype.request("/community/common.ImportExcel/getVillageImportRecord",{type:e.type,page:l.value.current,limit:l.value.pageSize}).then((function(e){n.value=e.list,l.value.total=e.count,i.value=!1})).catch((function(e){i.value=!1}))};a.value=[{title:"文件名称",dataIndex:"file_name",key:"file_name"},{title:"详情",dataIndex:"file_url",key:"file_url",scopedSlots:{customRender:"file_url"}},{title:"时长",dataIndex:"duration",key:"duration",scopedSlots:{customRender:"duration"}},{title:"结果",dataIndex:"import_msg",key:"import_msg"},{title:"状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"时间",dataIndex:"add_time",key:"add_time"}];var u=function(e){window.open(e)};return{chargeColumns:a,pageInfo:l,tableList:n,tableLoading:i,getRecordList:c,tableChange:s,goUrl:u}}}),c=s,u=a("2877"),d=Object(u["a"])(c,l,n,!1,null,"0ae99df8",null);t["default"]=d.exports},a41a:function(e,t,a){"use strict";a("9ec7")},a55e:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personnel_information"},[a("a-tooltip",[a("a-button",{attrs:{type:"primary"},on:{click:e.addInfo}},[e._v(" 添加人员 ")]),a("a-divider",{attrs:{type:"vertical"}}),e._v(" 类型颜色： "),e._l(e.roomParams.person_type_list,(function(e,t){return a("a-badge",{staticStyle:{"margin-left":"7px"},attrs:{color:e.color,text:e.value}})}))],2),a("a-table",{attrs:{pagination:e.pageInfo,columns:e.peopleColumns,loading:e.tableLoading,"data-source":e.tableList},on:{change:e.tableChange},scopedSlots:e._u([{key:"name",fn:function(t){return a("a",{},[e._v(e._s(t))])}},{key:"user_status",fn:function(t){return a("span",{},[a("a-tag",{attrs:{color:t.color}},[e._v(" "+e._s(t.value)+" ")])],1)}},{key:"user_type",fn:function(t){return a("span",{},[a("a-tag",{attrs:{color:t.color}},[e._v(" "+e._s(t.value)+" ")])],1)}},{key:"action",fn:function(t,l){return a("span",{},[a("a",[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",[e._v("删除")])],1)}}])},[a("span",{attrs:{slot:"customTitle"},slot:"customTitle"},[a("a-icon",{attrs:{type:"user"}}),e._v(" 姓名 ")],1)]),a("personModal",{attrs:{visible:e.personVisible,roomId:e.roomId,personId:e.personId},on:{close:e.closePerson}})],1)},n=[],i=(a("a9e3"),a("8bbf")),o=a.n(i),r=a("cc19"),s=a("ed09"),c=Object(s["c"])({props:{roomParams:{type:Object,default:function(){return{}}},roomId:{type:[String,Number],defalut:""}},components:{personModal:r["default"]},setup:function(e,t){var a=Object(s["h"])(!1),l=Object(s["h"])(""),n=Object(s["h"])([]),i=Object(s["h"])({pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40","50","60","70","80","90","100"],showSizeChanger:!0}),r=Object(s["h"])([]),c=Object(s["h"])(!1);Object(s["f"])((function(){m()}));var u=function(){a.value=!0},d=function(){l.value="",a.value=!1},p=function(e){var t=e.pageSize,a=e.current;i.value.current=a,i.value.pageSize=t,m()},m=function(){c.value=!0,o.a.prototype.request("/community/village_api.Building/getRoomBindUserList",{vacancy_id:e.roomId,page:i.value.current,limit:i.value.pageSize}).then((function(e){r.value=e.list,i.value.total=e.count,c.value=!1})).catch((function(e){c.value=!1}))};return n.value=[{dataIndex:"name",key:"name",slots:{title:"customTitle"},scopedSlots:{customRender:"name"}},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"添加时间",dataIndex:"add_time",key:"add_time"},{title:"类型",key:"user_status",dataIndex:"user_status",scopedSlots:{customRender:"user_status"}},{title:"与业主关系",key:"user_type",dataIndex:"user_type",scopedSlots:{customRender:"user_type"}},{title:"身份证卡号",key:"id_card",dataIndex:"id_card"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],{peopleColumns:n,pageInfo:i,tableChange:p,tableList:r,tableLoading:c,personVisible:a,personId:l,addInfo:u,closePerson:d}}}),u=c,d=a("2877"),p=Object(d["a"])(u,l,n,!1,null,"77f7112f",null);t["default"]=p.exports},a805:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"楼层编辑",visible:e.visible,width:500,loading:e.confirmLoading},on:{cancel:function(t){return e.resetForm(!1)},ok:e.onSubmit}},[a("a-form-model",{ref:"ruleForm",attrs:{model:e.layerForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-model-item",{attrs:{label:"楼层名称",prop:"layer_name"}},[a("a-input",{staticClass:"input_style_240",model:{value:e.layerForm.layer_name,callback:function(t){e.$set(e.layerForm,"layer_name",t)},expression:"layerForm.layer_name"}})],1),a("a-form-model-item",{attrs:{label:"楼层编号",prop:"layer_number"}},[a("a-input",{staticClass:"input_style_240",attrs:{disabled:!0},model:{value:e.layerForm.layer_number,callback:function(t){e.$set(e.layerForm,"layer_number",t)},expression:"layerForm.layer_number"}})],1),a("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[e.visible?a("a-switch",{attrs:{"default-checked":e.layerStatus,"checked-children":"开","un-checked-children":"关"},on:{change:e.checkChange}}):e._e()],1)],1)],1)},n=[],i=(a("a9e3"),a("8bbf")),o=a.n(i),r=a("ed09"),s=(a("3990"),Object(r["c"])({props:{visible:{type:Boolean,default:!1},layer_id:{type:[String,Number],default:0}},setup:function(e,t){var a=Object(r["h"])(!1),l=Object(r["h"])({}),n=Object(r["h"])({layer_name:[{required:!0,message:"请输入单元名称",trigger:"blur"}],layer_number:[{required:!0,message:"请输入单元编号",trigger:"blur"}]}),i=Object(r["h"])(),s=Object(r["h"])({span:6}),c=Object(r["h"])({span:16}),u=function(){i.value.validate((function(e){e&&(a.value=!0,m())}))},d=function(e){t.emit("exit",e),l.value={},i.value.resetFields()},p=Object(r["h"])(!1),m=function(){p.value?l.value.status=2:l.value.status=1;var e={layer_id:l.value.id,layer_name:l.value.layer_name,layer_number:l.value.layer_number,status:l.value.status};o.a.prototype.request("/community/village_api.Building/updatelayerInfoByID",e).then((function(e){a.value=!1,o.a.prototype.$message.success("编辑成功！"),d("layer")})).catch((function(e){a.value=!1}))},f=function(e){o.a.prototype.request("/community/village_api.Building/layerInfo",{layer_id:e}).then((function(e){l.value=e,2==l.value.status?p.value=!0:p.value=!1}))},v=function(e){p.value=e};return Object(r["i"])((function(){return e.visible}),(function(t){t&&f(e.layer_id)}),{deep:!0}),{confirmLoading:a,onSubmit:u,resetForm:d,layerForm:l,labelCol:s,wrapperCol:c,rules:n,saveForm:m,ruleForm:i,layerStatus:p,checkChange:v}}})),c=s,u=(a("307c"),a("2877")),d=Object(u["a"])(c,l,n,!1,null,"44967f05",null);t["default"]=d.exports},ab71:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"parking_space"},[a("a-table",{attrs:{pagination:e.pageInfo,columns:e.paymentTitle,loading:e.tableLoading,"data-source":e.paymentData},on:{change:e.tableChange}})],1)},n=[],i=(a("a9e3"),a("8bbf")),o=a.n(i),r=a("ed09"),s=Object(r["c"])({props:{roomParams:{type:Object,default:function(){return{}}},roomId:{type:[String,Number],defalut:""}},setup:function(e,t){var a=Object(r["h"])([]),l=Object(r["h"])([]),n=Object(r["h"])(!1);a.value=[{title:"收费标准",dataIndex:"charge_name",key:"charge_name"},{title:"收费项目",dataIndex:"project_name",key:"project_name"},{title:"所属收费科目",dataIndex:"subject_name",key:"subject_name"},{title:"应收费用",dataIndex:"total_money",key:"total_money"},{title:"账单生成时间",dataIndex:"add_time",key:"add_time"},{title:"上次止度",dataIndex:"last_ammeter",key:"last_ammeter"},{title:"本次度数",dataIndex:"now_ammeter",key:"now_ammeter"},{title:"审核状态",dataIndex:"check_status",key:"check_status"},{title:"计费开始时间",dataIndex:"service_start_time",key:"service_start_time"},{title:"计费结束时间",dataIndex:"service_end_time",key:"service_end_time"}];var i=Object(r["h"])({pageSize:10,current:1,type:1,total:0,pageSizeOptions:["10","20","30","40","50","60","70","80","90","100"],showSizeChanger:!0});Object(r["f"])((function(){u()}));var s=function(e){var t=e.pageSize,a=e.current;i.value.current=a,i.value.pageSize=t,u()},c=function(e){o.a.prototype.$confirm({title:"提示",content:"确定要删除此项吗？",onOk:function(){o.a.prototype.request("/community/village_api.cashier/delChargeStandardBind",{charge_standard_bind_id:e.bind_id}).then((function(e){o.a.prototype.$message.success("删除成功！"),i.value.current=1,i.value.pageSize=10,u()}))},onCancel:function(){}})},u=function(){n.value=!0,o.a.prototype.request("/community/village_api.Building/getRoomBindBillList",{vacancy_id:e.roomId,page:i.value.current,limit:i.value.pageSize,type:1}).then((function(e){l.value=e.list,i.value.total=e.count,n.value=!1})).catch((function(e){n.value=!1}))};return{paymentTitle:a,paymentData:l,getPaymentBill:u,deleteBill:c,tableLoading:n,tableChange:s,pageInfo:i}}}),c=s,u=a("2877"),d=Object(u["a"])(c,l,n,!1,null,"3fa16e85",null);t["default"]=d.exports},b281:function(e,t,a){},b6cf:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"owner_msg"},[e._l(e.ownerForm,(function(t,l){return a("div",{key:l,staticClass:"label_con"},[a("div",{staticClass:"title"},[e._v(e._s(t.label)+"：")]),1==t.type?a("div",{staticClass:"choose_con",staticStyle:{display:"flex","align-items":"center"}},[a("a-radio-group",{model:{value:e.ownerForm[l].data.value,callback:function(t){e.$set(e.ownerForm[l].data,"value",t)},expression:"ownerForm[index].data.value"}},e._l(t.value,(function(t,l){return a("a-radio",{attrs:{value:t.label}},[e._v(e._s(t.value))])})),1),1==e.ownerForm[l].data.value?a("a-select",{staticStyle:{width:"200px","margin-left":"5px"},attrs:{placeholder:"请选择党支部"},on:{change:e.selectChange},model:{value:e.partyId,callback:function(t){e.partyId=t},expression:"partyId"}},e._l(t.data.street_party_branch,(function(t,l){return a("a-select-option",{attrs:{value:t.id}},[e._v(e._s(t.name))])})),1):e._e()],1):e._e(),0==t.type?a("div",{staticClass:"choose_con"},[a("a-checkbox-group",{model:{value:e.ownerForm[l].data.value,callback:function(t){e.$set(e.ownerForm[l].data,"value",t)},expression:"ownerForm[index].data.value"}},e._l(t.value,(function(t,l){return a("a-checkbox",{attrs:{value:t.label+""}},[e._v(e._s(t.value))])})),1)],1):e._e()])})),a("a-button",{staticStyle:{"margin-left":"20px","margin-top":"20px"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],2)},n=[],i=(a("d81d"),a("8bbf"),a("ed09")),o=(a("3990"),Object(i["c"])({props:{formParams:{type:Object,default:function(){return{}}}},setup:function(e,t){var a=Object(i["h"])({}),l=Object(i["h"])("");a.value=e.formParams.mark_list;var n=function(e){console.log("value===>",e),console.log("partyId===>",l.value)},o=function(){console.log("ownerForm===>",a.value);var e=[];a.value.map((function(t,a){1==t.type&&1==t.data.value?e.push({partyId:l.value,key:t.field,value:t.data.value}):e.push({key:t.field,value:t.data.value})})),console.log("resultParams===>",e)};return{ownerForm:a,onSubmit:o,partyId:l,selectChange:n}}})),r=o,s=(a("2f05"),a("2877")),c=Object(s["a"])(r,l,n,!1,null,"701394f0",null);t["default"]=c.exports},b768:function(e,t,a){},bc425:function(e,t,a){},cc19:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"添加人员",visible:e.visible,width:950,"confirm-loading":e.confirmLoading,footer:null},on:{cancel:e.handleCancel}},[a("a-tabs",{attrs:{"default-active-key":e.currentIndex},on:{change:e.tabChange}},e._l(e.tabList,(function(t,l){return a("a-tab-pane",{key:t.key},[a("span",{attrs:{slot:"tab"},slot:"tab"},[e._v(e._s(t.label))]),e.currentIndex==t.key?a(t.component,{tag:"component",attrs:{formParams:e.formParams}}):e._e()],1)})),1)],1)},n=[],i=(a("a9e3"),a("8bbf")),o=a.n(i),r=(a("c1df"),a("ed09")),s=(a("3990"),a("6811")),c=a("b6cf"),u=a("d79e"),d=a("9556"),p=Object(r["c"])({props:{visible:{type:Boolean,default:!1},personId:{type:[String,Number],default:0},roomId:{type:[String,Number],default:""}},components:{baseMsg:s["default"],msgMarker:c["default"],ownerMsg:u["default"],userLabel:d["default"]},setup:function(e,t){var a=Object(r["h"])(!1),l=Object(r["h"])({}),n=(Object(r["h"])(),Object(r["h"])(1)),i=function(e){n.value=e},s=function(){t.emit("close")},c=Object(r["h"])([{key:1,value:"baseMsg",label:"基本信息",component:"baseMsg"},{key:2,value:"ownerMsg",label:"业主资料",component:"ownerMsg"},{key:3,value:"msgMarker",label:"信息标注",component:"msgMarker"},{key:4,value:"userLabel",label:"用户标签",component:"userLabel"}]),u=Object(r["h"])({}),d=Object(r["h"])(!1),p=function(){console.log("context.roomId===>",e.roomId),o.a.prototype.request("/community/village_api.Building/getRoomBindUserData",{vacancy_id:e.roomId}).then((function(e){l.value=e}))};return Object(r["i"])((function(){return e.visible}),(function(e){e&&p()}),{deep:!0}),{confirmLoading:a,personForm:l,personStatus:d,getPersonInfo:p,tabList:c,tabChange:i,handleCancel:s,currentIndex:n,formParams:u}}}),m=p,f=a("2877"),v=Object(f["a"])(m,l,n,!1,null,null,null);t["default"]=v.exports},d79e:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"owner_msg"},[e._l(e.ownerForm,(function(t,l){return a("div",{key:l,staticClass:"label_con"},[a("div",{staticClass:"title"},[e._v(e._s(t.label)+"：")]),a("div",{staticClass:"checkbox_con"},[a("a-checkbox-group",e._l(t.value,(function(t,l){return a("a-checkbox",[e._v(e._s(t.value))])})),1)],1)])})),a("a-button",{staticStyle:{"margin-left":"20px","margin-top":"20px"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],2)},n=[],i=(a("8bbf"),a("ed09")),o=(a("3990"),Object(i["c"])({props:{formParams:{type:Object,default:function(){return{}}}},setup:function(e,t){var a=Object(i["h"])({});a.value=e.formParams.mark_list;var l=function(){console.log("ownerForm===>",a.value)};return{ownerForm:a,onSubmit:l}}})),r=o,s=(a("9e6e"),a("2877")),c=Object(s["a"])(r,l,n,!1,null,"69d727fe",null);t["default"]=c.exports},dbd3:function(e,t,a){"use strict";a("b281")},dd47:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-tabs",{attrs:{"default-active-key":1},on:{change:e.tabChange}},e._l(e.tabList,(function(t,l){return a("a-tab-pane",{key:t.key,attrs:{tab:t.label}},[e.currentKey==t.key?a(t.value,{tag:"component",attrs:{roomId:e.roomId}}):e._e()],1)})),1)},n=[],i=(a("a9e3"),a("8bbf"),a("ed09")),o=a("f26b"),r=a("ab71"),s=Object(i["c"])({props:{roomParams:{type:Object,default:function(){return{}}},roomId:{type:[String,Number],defalut:""}},components:{billPaid:o["default"],paymentBill:r["default"]},setup:function(e,t){var a=Object(i["h"])([{key:1,label:"待缴账单",value:"paymentBill"},{key:2,label:"已缴账单",value:"billPaid"}]),l=Object(i["h"])(1),n=function(e){l.value=e};return{tabList:a,tabChange:n,currentKey:l}}}),c=s,u=a("2877"),d=Object(u["a"])(c,l,n,!1,null,"a57ae8b0",null);t["default"]=d.exports},e18f:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:e.title,visible:e.visible,width:1200,"body-style":{paddingBottom:"80px"}},on:{close:function(t){return e.resetForm(!1)}}},[a("a-form-model",{ref:"ruleForm",attrs:{model:e.buildForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("div",{staticStyle:{display:"flex"}},[a("a-card",{staticStyle:{width:"600px"},attrs:{title:"基本信息"}},[a("a-form-model-item",{attrs:{label:"楼栋名称",prop:"single_name"}},[a("a-input",{staticClass:"input_style_240",model:{value:e.buildForm.single_name,callback:function(t){e.$set(e.buildForm,"single_name",t)},expression:"buildForm.single_name"}})],1),a("a-form-model-item",{attrs:{label:"楼栋编号",prop:"single_number"}},[a("a-input-number",{staticClass:"input_style_240",attrs:{max:99,min:1},model:{value:e.buildForm.single_number,callback:function(t){e.$set(e.buildForm,"single_number",t)},expression:"buildForm.single_number"}})],1),a("a-form-model-item",{attrs:{label:"楼栋地址",prop:"long_lat"}},[a("a-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.buildForm.long_lat,callback:function(t){e.$set(e.buildForm,"long_lat",t)},expression:"buildForm.long_lat"}}),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.openMap()}}},[e._v("点击获取经纬度")])],1),a("a-form-model-item",{attrs:{label:"合同时间",extra:"设置楼栋时间范围，设置后物业只能收取合同时间内收费项目，未到合同开始时间或结束时间不能收费；未设置物业服务小区时间范围，则不影响。"}},[e.startTime&&e.dateFormat?a("a-range-picker",{attrs:{disabledDate:e.disabledDate,value:[e.moment(e.startTime,e.dateFormat),e.moment(e.endTime,e.dateFormat)]},on:{change:e.onDateChange}}):a("a-range-picker",{attrs:{disabledDate:e.disabledDate},on:{change:e.onDateChange}})],1),a("a-form-model-item",{attrs:{label:"排序",prop:"sort"}},[a("a-input-number",{staticClass:"input_style_240",attrs:{min:0},model:{value:e.buildForm.sort,callback:function(t){e.$set(e.buildForm,"sort",t)},expression:"buildForm.sort"}})],1),a("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[a("a-switch",{attrs:{"checked-children":"开启","un-checked-children":"关闭","default-checked":""},model:{value:e.statusBool,callback:function(t){e.statusBool=t},expression:"statusBool"}})],1)],1),a("a-card",{staticStyle:{width:"600px"},attrs:{title:"楼栋资料"}},[a("a-form-model-item",{attrs:{label:"楼栋面积(m²)",prop:"measure_area"}},[a("a-input",{staticClass:"input_style_240",model:{value:e.buildForm.measure_area,callback:function(t){e.$set(e.buildForm,"measure_area",t)},expression:"buildForm.measure_area"}})],1),a("a-form-model-item",{attrs:{label:"所含单元数",prop:"floor_num"}},[a("a-input-number",{staticClass:"input_style_240",model:{value:e.buildForm.floor_num,callback:function(t){e.$set(e.buildForm,"floor_num",t)},expression:"buildForm.floor_num"}})],1),a("a-form-model-item",{attrs:{label:"所含房屋数",prop:"vacancy_num"}},[a("a-input-number",{staticClass:"input_style_240",model:{value:e.buildForm.vacancy_num,callback:function(t){e.$set(e.buildForm,"vacancy_num",t)},expression:"buildForm.vacancy_num"}})],1),a("a-form-model-item",{attrs:{label:"地面建筑层数",prop:"upper_layer_num"}},[a("a-input-number",{staticClass:"input_style_240",model:{value:e.buildForm.upper_layer_num,callback:function(t){e.$set(e.buildForm,"upper_layer_num",t)},expression:"buildForm.upper_layer_num"}})],1),a("a-form-model-item",{attrs:{label:"地下建筑层数",prop:"lower_layer_num"}},[a("a-input-number",{staticClass:"input_style_240",model:{value:e.buildForm.lower_layer_num,callback:function(t){e.$set(e.buildForm,"lower_layer_num",t)},expression:"buildForm.lower_layer_num"}})],1)],1)],1)]),a("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{staticStyle:{marginRight:"8px"},on:{click:function(t){return e.resetForm(!1)}}},[e._v(" 关闭 ")]),a("a-button",{attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.onSubmit}},[e._v(" 保存 ")])],1),e.mapVisible?a("a-modal",{attrs:{title:"百度地图拾取经纬度",visible:e.mapVisible,width:800},on:{ok:e.handleMapOk,cancel:e.handleMapCancel}},[a("a-input",{staticClass:"input_style",staticStyle:{width:"200px"},attrs:{type:"text",id:"suggestId",name:"address_detail",placeholder:"请输入城市名/地区名"},model:{value:e.address_detail,callback:function(t){e.address_detail=t},expression:"address_detail"}}),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.searchMap}},[e._v("搜索")]),a("div",{staticStyle:{width:"100%",height:"500px","margin-top":"10px"},attrs:{id:"allmap"}})],1):e._e()],1)},n=[],i=(a("a9e3"),a("4e82"),a("8bbf")),o=a.n(i),r=a("c1df"),s=a.n(r),c=a("ed09"),u=a("3990"),d=Object(c["c"])({props:{title:{type:String,default:""},visible:{type:Boolean,default:!1},single_id:{type:[String,Number],default:0}},setup:function(e,t){var a=function(e){var t=e.getFullYear(),a=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,l=e.getDate()<10?"0"+e.getDate():e.getDate(),n=t+"-"+a+"-"+l;return n},l=function(e){return e&&!(e>s()(f.value.village_contract_time_start)&&e<s()(f.value.village_contract_time_end))},n=Object(c["h"])(!1),i=Object(c["h"])(""),r=Object(c["h"])(""),d=Object(c["h"])("YYYY/MM/DD"),p=Object(c["h"])(!1),m=Object(c["h"])(!1),f=Object(c["h"])({}),v=Object(c["h"])({single_name:[{required:!0,message:"请输入楼栋名称",trigger:"blur"}],single_number:[{required:!0,message:"请输入楼栋编号",trigger:"blur"}],long_lat:[{required:!0,message:"请选择楼栋地址",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}],measure_area:[{required:!0,message:"请输入楼栋面积",trigger:"blur"}],floor_num:[{required:!0,message:"请输入所含单元数",trigger:"blur"}],vacancy_num:[{required:!0,message:"请输入所含房屋数",trigger:"blur"}],upper_layer_num:[{required:!0,message:"请输入地面建筑层数",trigger:"blur"}],lower_layer_num:[{required:!0,message:"请输入地下建筑层数",trigger:"blur"}]}),_=Object(c["h"])(),b=Object(c["h"])({span:6}),g=Object(c["h"])({span:16}),y=function(e){if(e[0]&&e[1])return i.value=e[0].format("YYYY-MM-DD"),r.value=e[1].format("YYYY-MM-DD"),f.value.contract_time_start=e[0].format("YYYY-MM-DD"),void(f.value.contract_time_end=e[1].format("YYYY-MM-DD"));i.value="",r.value="",f.value.contract_time_start="",f.value.contract_time_end=""},h=function(){_.value.validate((function(e){e&&(f.value.single_id=f.value.id,f.value.status=n.value?1:0,m.value=!0,k())}))},x=function(e){t.emit("closeDrawer",e),f.value={},_.value.resetFields()},k=function(){o.a.prototype.request(u["a"].updateBuildingInfoByID,f.value).then((function(e){m.value=!1,o.a.prototype.$message.success("编辑成功！"),x(!0)})).catch((function(e){m.value=!1}))},S=Object(c["h"])(!1),w=Object(c["h"])(""),j=Object(c["h"])(""),O=Object(c["h"])(""),C=function(){f.value.long_lat=j.value+","+w.value,f.value.long=j.value,f.value.lat=w.value,S.value=!1,p.value=!1},I=function(){S.value=!1,p.value=!1},F=function(){S.value=!0,E()},L=function(){O.value&&(p.value=!0,E())},E=function(){Object(c["e"])((function(){var e,t=new BMap.Map("allmap");if(f.value.lat&&f.value.long&&!p.value){t.clearOverlays(),e=new BMap.Point(f.value.long,f.value.lat);new BMap.Size(0,15);t.addOverlay(new BMap.Marker(e))}else e=O.value;t.centerAndZoom(e,15),t.enableScrollWheelZoom(),t.addEventListener("click",(function(e){t.clearOverlays(),t.addOverlay(new BMap.Marker(e.point)),j.value=e.point.lng,w.value=e.point.lat,console.log(e.point),(new BMap.Geocoder).getLocation(e.point,(function(e){O.value=e.address}))}))}))},$=function(e){o.a.prototype.request(u["a"].buildingInfo,{single_id:e}).then((function(e){f.value=e,f.value.sort=e.sort||0,f.value.long_lat=e.long+","+e.lat;var t=new BMap.Point(Number(e.long),Number(e.lat));(new BMap.Geocoder).getLocation(t,(function(e){O.value=e.address})),n.value=1==e.status,i.value=e.contract_time_start,r.value=e.contract_time_end}))};return Object(c["i"])((function(){return e.visible}),(function(t){t&&$(e.single_id)}),{deep:!0}),{confirmLoading:m,onSubmit:h,resetForm:x,buildForm:f,labelCol:b,wrapperCol:g,rules:v,saveForm:k,openMap:F,mapVisible:S,userLat:w,userLng:j,address_detail:O,handleMapOk:C,searchMap:L,initMap:E,handleMapCancel:I,onDateChange:y,ruleForm:_,searchArea:p,dateFormat:d,formDate:a,startTime:i,endTime:r,moment:s.a,statusBool:n,disabledDate:l}}}),p=d,m=(a("e407"),a("2877")),f=Object(m["a"])(p,l,n,!1,null,"e9ec73a8",null);t["default"]=f.exports},e376:function(e,t,a){"use strict";a("bc425")},e407:function(e,t,a){"use strict";a("67be")},e67a:function(e,t,a){},ee23:function(e,t,a){"use strict";a("f775")},ee78:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"parking_space"},[a("a-table",{attrs:{pagination:e.pageInfo,columns:e.carportColumns,loading:e.tableLoading,"data-source":e.carportData},on:{change:e.tableChange}})],1)},n=[],i=(a("a9e3"),a("8bbf")),o=a.n(i),r=a("ed09"),s=Object(r["c"])({props:{roomParams:{type:Object,default:function(){return{}}},roomId:{type:[String,Number],defalut:""}},setup:function(e,t){var a=Object(r["h"])([]),l=Object(r["h"])([]),n=Object(r["h"])(!1);a.value=[{title:"所属车库",dataIndex:"garage_num",key:"garage_num"},{title:"所属车位号",dataIndex:"position_num",key:"position_num"},{title:"车牌号",dataIndex:"car_number",key:"car_number"},{title:"车主姓名",dataIndex:"name",key:"name"},{title:"车主手机号",dataIndex:"phone",key:"phone"},{title:"车辆到期时间",dataIndex:"end_time",key:"end_time"},{title:"审核状态",dataIndex:"examine_status",key:"examine_status"},{title:"审核说明",dataIndex:"examine_response",key:"examine_response"}];var i=Object(r["h"])({pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40","50","60","70","80","90","100"],showSizeChanger:!0});Object(r["f"])((function(){u()}));var s=function(e){var t=e.pageSize,a=e.current;i.value.current=a,i.value.pageSize=t,u()},c=function(e){o.a.prototype.$confirm({title:"提示",content:"确定要删除此项吗？",onOk:function(){o.a.prototype.request("/community/village_api.cashier/delChargeStandardBind",{charge_standard_bind_id:e.bind_id}).then((function(e){o.a.prototype.$message.success("删除成功！"),i.value.current=1,i.value.pageSize=10,u()}))},onCancel:function(){}})},u=function(){n.value=!0,o.a.prototype.request("/community/village_api.Building/getRoomBindVehicleList",{vacancy_id:e.roomId,page:i.value.current,limit:i.value.pageSize}).then((function(e){l.value=e.list,pagination.value.total=e.count,n.value=!1})).catch((function(e){n.value=!1}))};return{carportColumns:a,carportData:l,getCarList:u,deleteStandard:c,tableLoading:n,tableChange:s,pageInfo:i}}}),c=s,u=a("2877"),d=Object(u["a"])(c,l,n,!1,null,"7d523052",null);t["default"]=d.exports},f07f:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"楼栋导入向导",width:1e3,visible:e.visible,maskClosable:!1,footer:e.isImporting?null:void 0},on:{cancel:e.handleCancel}},[a("a-tabs",{attrs:{"default-active-key":1},on:{change:e.tabChange}},[a("a-tab-pane",{key:1,attrs:{tab:"导入操作"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.firstStep&&!e.isImporting,expression:"firstStep && !isImporting"}],staticClass:"step_one"},[a("h4",[e._v("步骤一：上传 Excel 文件")]),a("p",[e._v("您要从何处导入数据，请选择导入的 Excel 文件")]),a("div",{staticStyle:{display:"flex",width:"80%"}},[a("div",{staticClass:"label",staticStyle:{width:"82px","text-align":"left"}},[e._v("Excel文件")]),a("a-upload-dragger",{staticStyle:{height:"100px",width:"calc(100% - 82px)","margin-left":"10px"},attrs:{name:"file",multiple:!0,action:e.uploadUrl,beforeUpload:e.beforeUploadExcel,showUploadList:!1,headers:e.headers,data:{upload_dir:"building",system_type:"village",type:"building"}},on:{change:e.handleUploadChange}},[a("a-icon",{attrs:{type:e.uploadLoading?"loading":"upload"}}),e._v(" 拖拽或点击上传 Excel 文件 ")],1)],1),e.fileList.length>0?a("div",{staticClass:"select_list",staticStyle:{display:"flex","align-items":"center",height:"50px"}},[a("div",{staticClass:"label",staticStyle:{width:"82px","text-align":"left"}},[e._v("选择Sheet表")]),a("a-select",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{"default-value":0},on:{change:e.handleSelectChange}},e._l(e.fileList,(function(t,l){return a("a-select-option",{key:l,attrs:{value:l}},[e._v(" "+e._s(t.worksheetName)+" ")])})),1),a("div",{staticStyle:{color:"red","margin-left":"10px"}},[e._v("总数据量："+e._s(e.selectObj.totalRows?e.selectObj.totalRows-1:0)+" 条")])],1):e._e(),e.fileList.length>0?a("div",{staticClass:"select_list",staticStyle:{display:"flex","align-items":"center",height:"50px"}},[a("div",{staticClass:"label",staticStyle:{width:"90px","text-align":"left"}},[e._v("数据重复时")]),a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:e.isSkip,callback:function(t){e.isSkip=t},expression:"isSkip"}},[a("a-radio",{attrs:{value:0}},[e._v("跳过")]),a("a-radio",{attrs:{value:1}},[e._v("覆盖")])],1),1==e.isSkip?a("div",{staticStyle:{"margin-left":"10px",display:"flex","align-items":"center"}},[a("div",[e._v("当")]),a("a-select",{staticStyle:{width:"120px",margin:"0 10px"},attrs:{value:e.selectreplaceFie},on:{change:e.handleReplaceChange}},e._l(e.replaceFieldSelect,(function(t,l){return a("a-select-option",{key:l,attrs:{value:t.option}},[e._v(e._s(t.title))])})),1),a("div",[e._v("重复时，覆盖现有客户数据")])],1):e._e()],1):e._e(),a("h5",[e._v("导入步骤：")]),a("p",[e._v(" 第一步：上传存储有楼栋的资料 Excel 文件；【您可以直接上传 Excel 文件或者下载模板："),a("a-button",{attrs:{type:"link"},on:{click:e.downloadExcel}},[e._v(" 模板下载")]),e._v("】 ")],1),a("p",[e._v(" 第二步：设置 Excel 里的列与系统中的列的对应关系")]),a("p",[e._v(" 第三步：开始导入")])]),e.firstStep||e.isImporting?e._e():a("div",{staticClass:"step_two"},[a("div",{staticClass:"top_desc",staticStyle:{display:"flex","align-items":"center",height:"30px"}},[a("h4",[e._v("步骤二：【企业客户创建对应关系】建立系统列与Excel列的对应关系")]),a("p",{staticStyle:{"margin-left":"10px","margin-top":"7px"}},[e._v("建立系统列与Excel列的对应关系")])]),a("div",{staticClass:"line",staticStyle:{width:"100%",height:"1px",border:"0","background-color":"#999999",margin:"10px 0"}}),a("div",{staticClass:"list"},[a("div",{staticClass:"title"},[a("span",[e._v("楼层信息")]),a("span",{staticStyle:{"margin-left":"10px",color:"red"}},[e._v("*号为必填项")])]),a("div",{staticClass:"top_label",staticStyle:{width:"100%",height:"30px",display:"flex","justify-content":"space-between margin-top: 10px"}},[a("div",{staticClass:"left_label",staticStyle:{width:"50%",display:"flex","background-color":"#dddddd",border:"1px solid #999999"}},e._l(e.labelList,(function(t,l){return a("div",{key:l,staticStyle:{width:"50%",display:"flex","align-items":"center","justify-content":"center"}},[e._v(e._s(t.name))])})),0),a("div",{staticClass:"right_label",staticStyle:{width:"50%",display:"flex","background-color":"#dddddd",border:"1px solid #999999"}},e._l(e.labelList,(function(t,l){return a("div",{key:l,staticStyle:{width:"50%",display:"flex","align-items":"center","justify-content":"center"}},[e._v(e._s(t.name))])})),0)]),a("div",{staticClass:"select_con",staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},e._l(e.sourceMapFields,(function(t,l){return a("div",{key:l,staticClass:"select_list",staticStyle:{width:"50%",display:"flex","align-items":"center","justify-content":"space-around"}},[a("div",{staticClass:"left_label",staticStyle:{width:"50%",display:"flex","align-items":"center","justify-content":"center"}},[e._v(e._s(t.key)),t.val.isMust?a("span",{staticStyle:{color:"red","margin-left":"5px"}},[e._v("*")]):e._e(),e._v("：")]),a("div",{staticClass:"right_select",staticStyle:{width:"50%",display:"flex","align-items":"center","justify-content":"center"}},[e.refreshSelect?a("a-select",{staticStyle:{width:"200px","margin-left":"10px","margin-top":"10px"},attrs:{"default-value":t.selected?t.key:""},on:{change:function(a){return e.handleExcelChange(a,t.val.field)}}},e._l(e.excelCloumns,(function(t,l){return a("a-select-option",{key:l,staticStyle:{height:"32px"},attrs:{value:t.key}},[e._v(" "+e._s(t.val)+" ")])})),1):e._e()],1)])})),0)])])]),a("a-tab-pane",{key:2,attrs:{tab:"导入日志"}},[e._v(" 导入日志 ")])],1),e.isImporting?e._e():a("template",{slot:"footer"},[a("div",{staticClass:"footer_con",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%"}},[e.firstStep?a("div",{staticClass:"left"}):e._e(),e.firstStep?e._e():a("div",{staticClass:"left"},[e._v(" 请注意系统列与Excel列的类型要匹配 ")]),a("div",{staticClass:"right"},[e.firstStep?e._e():a("a-button",{attrs:{type:"default"},on:{click:e.preStep}},[e._v("上一步")]),e.firstStep?a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]):e._e(),e.firstStep?e._e():a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.startImport}},[e._v("开始导入")]),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"default"},on:{click:e.handleCancel}},[e._v("取消")])],1)])]),e.isImporting&&2!=e.currentKey?a("div",{staticClass:"progress_content",staticStyle:{width:"100%",height:"450px",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},[a("a-progress",{attrs:{type:"circle","stroke-color":{"0%":"#108ee9","100%":"#87d068"},percent:e.percentVal}}),a("div",{staticClass:"importing",staticStyle:{"margin-top":"15px"}},[e._v(" 总行数 "),a("span",{staticStyle:{"font-size":"larger"}},[e._v(e._s(e.readRowTotal))]),e._v("，正在导入，剩余"),a("span",{staticStyle:{"font-size":"larger"}},[e._v(e._s(e.readRowTotal-(e.successInsterTotal+e.errorTotal))+" ")]),e._v(" 条记录待导入，成功"),a("span",{staticStyle:{color:"#68C472","font-size":"larger"}},[e._v(e._s(e.successInsterTotal))]),e._v("条,失败"),a("span",{staticStyle:{color:"red","font-size":"larger"}},[e._v(" "+e._s(e.errorTotal)+" ")]),e._v("条 ")]),a("div",{staticClass:"desc",staticStyle:{"margin-top":"15px",color:"#999999","font-size":"14px"}},[e._v(" 正在等待导入，你可以关闭本窗口，稍后再来查看 "),100==e.percentVal?a("a-button",{attrs:{type:"link"},on:{click:e.goBack}},[e._v("重新导入")]):e._e()],1)],1):e._e()],2)},n=[],i=(a("a9e3"),a("ac1f"),a("1276"),a("b0c0"),a("d81d"),a("a434"),a("4de4"),a("d3b7"),a("8bbf")),o=a.n(i),r=(a("5880"),a("ca00")),s=a("ed09"),c=(a("3990"),Object(s["c"])({props:{visible:{type:Boolean,default:!1},upload_type:{type:[String,Number],default:0}},setup:function(e,t){var a=Object(s["h"])(0),l=Object(s["h"])(""),n=Object(s["h"])(null),i=Object(s["h"])(!1),c=Object(s["h"])(0),u=[{name:"系统列"},{name:"Excel列"}],d=Object(s["h"])("/v20/public/index.php/community/village_api.Building/villageUploadFile"),p=Object(s["h"])([]),m=Object(s["h"])(!1),f=Object(s["h"])(!0),v=Object(s["h"])(!1),_=Object(s["h"])(0),b=function(e){var t=e.name.split(".").pop();if("xlsx"!=t&&"xls"!=t)return m.value=!1,o.a.prototype.$message.warn("上传文件格式非 Excel"),!1},g=function(){V(),t.emit("exit",!1)},y=function(){f.value=!0},h=Object(s["h"])([]),x=function(e,t){if("root"!=e){var a=!0;h.value.map((function(l,n){l.key==t&&(l.value=e,a=!1)})),a&&h.value.push({key:t,value:e})}else h.value.map((function(e,a){e.key==t&&h.value.splice(a,1)}))},k=function(){E.totalRows&&0==E.totalRows?o.a.prototype.$message.warn("请完善上传信息"):F.value&&I.value?(f.value=!1,z()):o.a.prototype.$message.warn("请先上传Excel文件")},S=function(e){l.value=e,Object(s["d"])()},w=function(){var e=T.value.filter((function(e){return e.val.isMust})).length,t=0;T.value.map((function(e){h.value.map((function(a){e.val.isMust&&a.key==e.val.field&&t++}))})),t==e?o.a.prototype.request("/community/village_api.Building/startImport",{relationship:h.value,inputFileName:I.value,worksheetName:F.value,isRepeated:a.value,replaceField:l.value,selectWorkSheetIndex:_.value}).then((function(e){o.a.prototype.$message.success("提交成功，准备导入，调整画面为进度条画面！"),i.value=!0,n.value=setInterval((function(){N()}),1e3)})).catch((function(e){i.value=!1,V()})):o.a.prototype.$message.warn("有必填项未选")},j=Object(r["k"])("/community/village_api.Building/villageUploadFile"),O=o.a.ls.get(j),C=Object(s["g"])({authorization:"authorization-text",ticket:O}),I=Object(s["h"])(""),F=Object(s["h"])(""),L=function(e){m.value=!0,"uploading"!==e.file.status&&(m.value=!0),"done"===e.file.status?(I.value=e.file.response.data,m.value=!1,1e3==e.file.response.status?D(I.value):o.a.prototype.$message.error(e.file.response.msg)):"error"===e.file.status&&(m.value=!1,o.a.prototype.$message.error("".concat(e.file.name," file upload failed.")))},E=Object(s["h"])({}),$=function(e){E.value=p.value[e],F.value=p.value[e].worksheetName,_.value=e,Object(s["d"])()},B=Object(s["h"])([]),T=Object(s["h"])([]),z=function(){o.a.prototype.request("/community/village_api.Building/startBindExcelCol",{inputFileName:I.value,worksheetName:F.value,selectWorkSheetIndex:_.value}).then((function(e){console.log("startBindExcelCol res----------\x3e",e),B.value=e.excelCloumns,B.value.unshift({key:"root",val:""}),T.value=e.sourceMapFields,h.value=[],e.sourceMapFields.map((function(t){if(t.selected){var a=e.excelCloumns.filter((function(e){return e.val==t.key}))[0].key;console.log("value--\x3e",a),h.value.push({key:t.val.field,value:a})}})),console.log("sourceMapFields.value--\x3e",T.value),console.log("relationship.value--\x3e",h.value),v.value=!1,Object(s["e"])((function(){v.value=!0})),Object(s["d"])()})).catch((function(e){}))},q=Object(s["h"])([]),D=function(e){o.a.prototype.request("/community/village_api.Building/importForExcel",{inputFileName:e}).then((function(e){p.value=e.worksheet,E.value=e.worksheet[0],F.value=e.worksheet[0].worksheetName,q.value=e.replaceFieldSelect,l.value=e.replaceFieldSelect[0].option,console.log("importForExcel ------\x3e",e,q.value,l.value),Object(s["d"])()})).catch((function(e){}))},U=Object(s["h"])(0),M=Object(s["h"])(0),P=Object(s["h"])(0),R=Object(s["h"])(0),N=function(){o.a.prototype.request("/community/village_api.Building/refreshProcess",{type:"building"}).then((function(e){e.process&&(U.value=e.process,M.value=e.processInfo.readRowTotal,P.value=e.processInfo.successInsterTotal,R.value=e.processInfo.errorTotal,100==e.process&&(o.a.prototype.$message.warn("导入执行完毕！"),V()))})).catch((function(e){V()}))},V=function(){clearInterval(n.value),n.value=null},Y=function(){},K=function(){f.value=!0,i.value=!1},G=Object(s["h"])(1),A=function(e){G.value=e};return Object(s["i"])((function(){return e.visible}),(function(e){}),{deep:!0}),{handleCancel:g,headers:C,handleUploadChange:L,currentIndex:c,uploadUrl:d,uploadExcelFile:D,downloadExcel:Y,fileList:p,uploadLoading:m,selectObj:E,handleSelectChange:$,nextStep:k,firstStep:f,preStep:y,startImport:w,labelList:u,getSelectList:z,pathUrl:I,excelCloumns:B,sourceMapFields:T,handleExcelChange:x,relationship:h,beforeUploadExcel:b,refreshSelect:v,interval:n,refreshProgress:N,isImporting:i,percentVal:U,clearTimer:V,replaceFieldSelect:q,selectreplaceFie:l,isSkip:a,handleReplaceChange:S,readRowTotal:M,successInsterTotal:P,errorTotal:R,goBack:K,tabChange:A,currentKey:G}}})),u=c,d=(a("45b6"),a("2877")),p=Object(d["a"])(u,l,n,!1,null,"11a3b3d8",null);t["default"]=p.exports},f26b:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"parking_space"},[a("a-table",{attrs:{pagination:e.pageInfo,columns:e.paymentTitle,loading:e.tableLoading,"data-source":e.paymentData},on:{change:e.tableChange}})],1)},n=[],i=(a("a9e3"),a("8bbf")),o=a.n(i),r=a("ed09"),s=Object(r["c"])({props:{roomParams:{type:Object,default:function(){return{}}},roomId:{type:[String,Number],defalut:""}},setup:function(e,t){var a=Object(r["h"])([]),l=Object(r["h"])([]),n=Object(r["h"])(!1);a.value=[{title:"收费标准",dataIndex:"charge_name",key:"charge_name"},{title:"收费项目",dataIndex:"project_name",key:"project_name"},{title:"收费科目",dataIndex:"subject_name",key:"subject_name"},{title:"实付金额",dataIndex:"pay_money",key:"pay_money"},{title:"支付时间",dataIndex:"pay_time",key:"pay_time"},{title:"账单生成时间",dataIndex:"add_time",key:"add_time"},{title:"上次止度",dataIndex:"last_ammeter",key:"last_ammeter"},{title:"本次度数",dataIndex:"now_ammeter",key:"now_ammeter"},{title:"审核状态",dataIndex:"check_status",key:"check_status"},{title:"支付方式",dataIndex:"pay_type",key:"pay_type"},{title:"开票状态",dataIndex:"invoicing_status",key:"invoicing_status"},{title:"账单状态",dataIndex:"order_status",key:"order_status"},{title:"计费开始时间",dataIndex:"service_start_time",key:"service_start_time"},{title:"计费结束时间",dataIndex:"service_end_time",key:"service_end_time"}];var i=Object(r["h"])({pageSize:10,current:1,type:2,total:0,pageSizeOptions:["10","20","30","40","50","60","70","80","90","100"],showSizeChanger:!0});Object(r["f"])((function(){u()}));var s=function(e){var t=e.pageSize,a=e.current;i.value.current=a,i.value.pageSize=t,u()},c=function(e){o.a.prototype.$confirm({title:"提示",content:"确定要删除此项吗？",onOk:function(){o.a.prototype.request("/community/village_api.cashier/delChargeStandardBind",{charge_standard_bind_id:e.bind_id}).then((function(e){o.a.prototype.$message.success("删除成功！"),i.value.current=1,i.value.pageSize=10,u()}))},onCancel:function(){}})},u=function(){n.value=!0,o.a.prototype.request("/community/village_api.Building/getRoomBindBillList",{vacancy_id:e.roomId,page:i.value.current,limit:i.value.pageSize,type:2}).then((function(e){l.value=e.list,i.value.total=e.count,n.value=!1})).catch((function(e){n.value=!1}))};return{paymentTitle:a,paymentData:l,getPaymentBill:u,deleteBill:c,tableLoading:n,tableChange:s,pageInfo:i}}}),c=s,u=a("2877"),d=Object(u["a"])(c,l,n,!1,null,"2bbab483",null);t["default"]=d.exports},f436:function(e,t,a){"use strict";a("77c5")},f4f3:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:e.single_name,width:"1700",closable:!1,visible:e.visible},on:{close:e.onClose}},[a("singleVisualization",{attrs:{singleId:e.singleId}})],1)},n=[],i=(a("a9e3"),a("8bbf"),a("ed09")),o=a("7759"),r=(a("3990"),Object(i["c"])({components:{singleVisualization:o["default"]},props:{single_id:{type:[String,Number],default:0},single_name:{type:String,default:"楼栋可视化"},visible:{type:Boolean,default:!1}},setup:function(e,t){var a=Object(i["h"])(0),l=function(){t.emit("closeSingleView"),a.value=0};return Object(i["i"])((function(){return e.visible}),(function(t){t&&(a.value=e.single_id)}),{deep:!0}),Object(i["f"])((function(){})),{onClose:l,singleId:a}}})),s=r,c=(a("ee23"),a("2877")),u=Object(c["a"])(s,l,n,!1,null,"4be0d5e3",null);t["default"]=u.exports},f775:function(e,t,a){},f91f:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"associated_card_no"},[a("a-table",{attrs:{pagination:e.pageInfo,columns:e.cardColumns,loading:e.tableLoading,"data-source":e.tableList},on:{change:e.tableChange}},[a("a-popconfirm",{attrs:{title:"是否删除当前项？",placement:"topLeft","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.deleteCard(e.record)}}},[a("a",{staticStyle:{color:"red"}},[e._v("删除")])])],1)],1)},n=[],i=(a("a9e3"),a("8bbf")),o=a.n(i),r=a("ed09"),s=Object(r["c"])({props:{roomParams:{type:Object,default:function(){return{}}},roomId:{type:[String,Number],defalut:""}},setup:function(e,t){var a=Object(r["h"])([]),l=Object(r["h"])({pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40","50","60","70","80","90","100"],showSizeChanger:!0}),n=Object(r["h"])([]),i=Object(r["h"])(!1);Object(r["f"])((function(){u()}));var s=function(e){var t=e.pageSize,a=e.current;l.value.current=a,l.value.pageSize=t,u()},c=function(e){o.a.prototype.request("/community/village_api.Building/delVacancyIcCard",{bind_id:e.bind_id}).then((function(e){o.a.prototype.$message.success("删除成功！"),l.value.current=1,l.value.pageSize=10,u()}))},u=function(){i.value=!0,o.a.prototype.request("/community/village_api.Building/getRoomBindIcCardList",{vacancy_id:e.roomId,page:l.value.current,limit:l.value.pageSize}).then((function(e){n.value=e.list,l.value.total=e.count,i.value=!1})).catch((function(e){i.value=!1}))};return a.value=[{title:"设备品牌",dataIndex:"device_brand",key:"device_brand"},{title:"设备类型",dataIndex:"device_type",key:"device_type"},{title:"IC卡号",dataIndex:"ic_card",key:"ic_card"},{title:"添加时间",dataIndex:"add_time",key:"add_time"}],{cardColumns:a,pageInfo:l,tableList:n,tableLoading:i,getCardList:u,tableChange:s,deleteCard:c}}}),c=s,u=a("2877"),d=Object(u["a"])(c,l,n,!1,null,"abec2fb4",null);t["default"]=d.exports}}]);