(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eae40e88","chunk-1990cb2b","chunk-fc060964"],{"0bda":function(e,t,o){},"234b":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[t("a-form",{staticClass:"project_info",attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"楼栋名称",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.buildingNameStrings",{initialValue:e.post.buildingNameStrings,rules:[{required:!0,message:e.L("请输入楼栋名称！")}]}],expression:"['post.buildingNameStrings',{ initialValue: post.buildingNameStrings, rules: [{ required: true, message: L('请输入楼栋名称！') }] }]"}],staticStyle:{width:"600px"},attrs:{maxLength:100,placeholder:"请输入楼栋名称"}}),t("div",[e._v(" 支持多个楼栋名称；英文逗号 “,” 分隔")])],1),t("a-form-item",{attrs:{label:"楼栋编号",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.buildingNumberStrings",{initialValue:e.post.buildingNumberStrings,rules:[{required:!0,message:e.L("请输入楼栋编号！")}]}],expression:"['post.buildingNumberStrings',{ initialValue: post.buildingNumberStrings, rules: [{ required: true, message: L('请输入楼栋编号！') }] }]"}],staticStyle:{width:"600px"},attrs:{maxLength:100,placeholder:"请输入楼栋编号"}}),t("div",[e._v(" 楼栋编号：支持多个楼栋编号；英文逗号 “,” 分隔；注意需要和名称 数量相同位置对应一一匹配，范围值[1,999]")])],1),t("a-form-item",{attrs:{label:"同楼栋单元数",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.unitNum",{initialValue:e.post.unitNum,rules:[{required:!0,message:e.L("请输入同楼栋单元数！")}]}],expression:"['post.unitNum',{ initialValue: post.unitNum, rules: [{ required: true, message: L('请输入同楼栋单元数！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入同楼栋单元数"}}),t("div",[e._v(" 同楼栋单元数：范围值[1,9] 由于生成不可变动 所以建议以数量多的为准")])],1),t("a-form-item",{attrs:{label:"同单元楼层数",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.floorNum",{initialValue:e.post.floorNum,rules:[{required:!0,message:e.L("请输入同单元楼层数！")}]}],expression:"['post.floorNum',{ initialValue: post.floorNum, rules: [{ required: true, message: L('请输入同单元楼层数！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入同单元楼层数"}}),t("div",[e._v(" 同单元楼层数：范围值[1,99] 由于生成不可变动 所以建议以数量多的为准")])],1),t("a-form-item",{attrs:{label:"同楼层房间数",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.houseNum",{initialValue:e.post.houseNum,rules:[{required:!0,message:e.L("请输入同楼层房间数！")}]}],expression:"['post.houseNum',{ initialValue: post.houseNum, rules: [{ required: true, message: L('请输入同楼层房间数！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:30,placeholder:"请输入同楼层房间数"}}),t("div",[e._v(" 同楼层房间数：范围值[1,99] 由于生成不可变动 所以建议以数量多的为准")])],1)],1)],1)],1)},a=[],r=(o("54f8"),o("a0e0")),n={components:{},data:function(){return{title:"新建",labelCol:{span:4},wrapperCol:{span:20},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,post:{buildingNameStrings:"",buildingNumberStrings:"",unitNum:"",floorNum:"",houseNum:"",auto_syn:"0"}}},mounted:function(){},methods:{add:function(){this.post={buildingNameStrings:"",buildingNumberStrings:"",unitNum:"",floorNum:"",houseNum:"",auto_syn:"0"},this.title="批量新增楼栋单元房屋",this.visible=!0},onChange:function(e){console.log("checked = ".concat(e.target.value)),this.post.auto_syn=e.target.value},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,o){if(t)e.confirmLoading=!1;else{var i=r["a"].setDHBuildingToDeviceCloud;o.post.auto_syn=e.post.auto_syn,console.log("相关数据",o.post),e.request(i,o.post).then((function(t){if(e.confirmLoading=!1,t.data.failNum>0&&t.data.failInfo)for(var o in t.data.failInfo)t.data.failInfo[o]&&t.data.failInfo[o]["name"]&&e.$notification["warning"]({message:"注意",duration:8,description:t.data.failInfo[o]["name"]+"("+t.data.failInfo[o]["msg"]+")"});else e.$message.success("绑定成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,e.$emit("ok")}),1500)})).catch((function(t){e.confirmLoading=!1}))}}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.form=e.$form.createForm(e)}),500)}}},l=n,s=(o("601f"),o("0b56")),d=Object(s["a"])(l,i,a,!1,null,"14b8d2de",null);t["default"]=d.exports},"601f":function(e,t,o){"use strict";o("c2c00")},"6fda":function(e,t,o){"use strict";o("0bda")},"8f47":function(e,t,o){"use strict";o("cf56")},c2c00:function(e,t,o){},cf56:function(e,t,o){},e12c:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"message-suggestions-box-1"},[t("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,pagination:e.pagination,loading:e.loading},on:{change:e.table_change},scopedSlots:e._u([{key:"action",fn:function(o,i){return t("span",{},[1!=i.isSyn?t("a",{on:{click:function(t){return e.$refs.bindDahuaYuiRuiData.bind(i,e.parent_bind_id)}}},[e._v("绑定"+e._s(i.orgTypeTxt))]):e._e(),1==i.isSyn?t("a",{on:{click:function(t){return e.$refs.bindDahuaYuiRuiData.bind(i,e.parent_bind_id,"look")}}},[e._v("查看"+e._s(i.orgTypeTxt))]):e._e()])}}])}),t("batch-syn-build-unit-rooms",{ref:"batchSynBuildUnitRooms",on:{ok:e.getList}}),t("bind-da-hua-yui-rui-data",{ref:"bindDahuaYuiRuiData",on:{ok:e.getList}})],1)},a=[],r=(o("aa48"),o("8f7e"),o("a0e0")),n=o("234b"),l=o("f10b"),s=[{title:"ID",dataIndex:"id",key:"id"},{title:"名称",dataIndex:"orgName",key:"orgName"},{title:"组织编号",dataIndex:"orgCode",key:"orgCode"},{title:"同步匹配",dataIndex:"sysModel",key:"sysModel"},{title:"匹配对象",dataIndex:"sysModelName",key:"sysModelName"},{title:"操作",key:"action",width:"300px",dataIndex:"",scopedSlots:{customRender:"action"}}],d=[],u={name:"daHuaYunRuiSynRoomsData",components:{batchSynBuildUnitRooms:n["default"],bindDaHuaYuiRuiData:l["default"]},data:function(){return{pagination:{pageSize:20,total:10,current:1},search:{pOrgCode:"",orgType:12,page:1},form:this.$form.createForm(this),visible:!1,loading:!1,data:d,columns:s,page:1,parent_bind_id:0}},activated:function(){this.search.pOrgCode=this.$route.query.orgCode,this.parent_bind_id=this.$route.query.parent_bind_id,this.getList()},mounted:function(){this.search.pOrgCode=this.$route.query.orgCode,this.parent_bind_id=this.$route.query.parent_bind_id,this.getList()},methods:{getList:function(){var e=this;if(this.loading)return!1;this.loading=!0,this.search["page"]=this.page,this.search["orgType"]=12,this.request(r["a"].getDHBuidingUnitRoomList,this.search).then((function(t){console.log("大华",t),e.pagination.total=t.totalRows?t.totalRows:0,e.pagination.pageSize=t.pageSize?t.pageSize:20,e.data=t.pageData,e.loading=!1}))},table_change:function(e){e.current&&e.current>0&&(this.pagination.current=e.current,this.page=e.current,this.getList())}}},c=u,p=(o("8f47"),o("0b56")),m=Object(p["a"])(c,i,a,!1,null,"2c148fd4",null);t["default"]=m.exports},f10b:function(e,t,o){"use strict";o.r(t);o("54f8");var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[t("a-form",{staticClass:"project_info_1",attrs:{form:e.form}},[t("a-form-item",{attrs:{label:e.record.orgTypeTxt+"名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.orgName)+" ")]),e.record.buildingNumber?t("a-form-item",{attrs:{label:e.record.orgTypeTxt+"编号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.buildingNumber)+" ")]):e._e(),e.record.id?t("a-form-item",{attrs:{label:e.record.orgTypeTxt+"ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.id)+" ")]):e._e(),e.record.orgCode?t("a-form-item",{attrs:{label:e.record.orgTypeTxt+"组织编码",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.orgCode)+" ")]):e._e(),e.record.unitNum?t("a-form-item",{attrs:{label:"单元数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.unitNum)+" ")]):e._e(),e.record.floorNum?t("a-form-item",{attrs:{label:"单元楼层数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.floorNum)+" ")]):e._e(),e.record.houseNum?t("a-form-item",{attrs:{label:"楼层房屋数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.houseNum)+" ")]):e._e(),e.record.totalHouseNum?t("a-form-item",{attrs:{label:"房屋总数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.totalHouseNum)+" ")]):e._e(),e.record.sysModel?t("a-form-item",{attrs:{label:"同步匹配",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.sysModel)+" ")]):e._e(),e.record.sysModelName?t("a-form-item",{attrs:{label:"匹配对象",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.record.sysModelName)+" ")]):e._e(),12!=e.record.orgType?t("a-form-item",{attrs:{label:"同步机制",required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{attrs:{"button-style":"solid"},on:{change:e.onChange},model:{value:e.record.auto_syn,callback:function(t){e.$set(e.record,"auto_syn",t)},expression:"record.auto_syn"}},[t("a-radio-button",{attrs:{value:"0"}},[e._v(" 手动匹配同步 ")]),t("a-radio-button",{attrs:{value:"1"}},[e._v(" 自动匹配同步 ")])],1),t("div",[e._v(" 默认是手动匹配同步，选择了自动匹配同步 会以序号对应数据进行关联，关联不上的需要额外进行手动匹配。")])],1):e._e(),1!=e.record.isSyn?t("a-form-item",{attrs:{label:"选择同步"+e.record.orgTypeTxt,required:!0,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-select",{staticStyle:{width:"50%"},attrs:{"show-search":"",placeholder:"选择同步"+e.record.orgTypeTxt,"option-filter-prop":"children","filter-option":e.filterOption,value:e.bindId},on:{change:e.handleChange}},e._l(e.singleList,(function(o,i){return t("a-select-option",{key:i,attrs:{value:o.id}},[e._v(" "+e._s(o.name)+e._s(o.sysTxt)+" ")])})),1)],1):e._e()],1)],1)],1)},a=[],r=o("a0e0"),n={components:{},data:function(){return{title:"绑定",labelCol:{span:4},wrapperCol:{span:20},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,record:{},bindId:"",relatedType:"build",singleList:[]}},mounted:function(){},methods:{handleChange:function(e){console.log("selectedItems",e),this.bindId=e},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},bindDHBuildUnitRoomsList:function(e){var t=this;this.request(r["a"].bindDHBuildUnitRoomsList,e).then((function(e){t.singleList=e.list,console.log("this.singleList",t.singleList)}))},bind:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"edit",i={orgType:e.orgType,parent_bind_id:t};this.singleList=[],this.bindId="",this.bindDHBuildUnitRoomsList(i),this.record=e,this.title="绑定"+e.orgTypeTxt,this.visible=!0,10==e.orgType?this.relatedType="build":11==e.orgType?this.relatedType="unit":12==e.orgType&&(this.relatedType="room"),this.type=o},onChange:function(e){console.log("checked = ".concat(e.target.value)),this.record.auto_syn=e.target.value},handleSubmit:function(){var e=this;if("look"==this.type)this.handleCancel();else{console.log("record",this.record),console.log("relatedType = ".concat(this.relatedType)),console.log("bindId = ".concat(this.bindId)),this.confirmLoading=!0;var t=r["a"].bindDHBuildUnitRoom;this.record.bind_id&&!this.bindId&&(this.bindId=this.record.bind_id);var o={orgParam:this.record,bindId:this.bindId,relatedType:this.relatedType};console.log("相关数据param",o),this.request(t,o).then((function(t){e.confirmLoading=!1,e.record.bind_id&&"1"==e.record.auto_syn?e.$message.success("自动下发指令执行中"):e.record.bind_id||e.$message.success("绑定成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,e.$emit("ok")}),1500),console.log("相关数据res",t)})).catch((function(t){e.confirmLoading=!1}))}},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.form=e.$form.createForm(e)}),500)}}},l=n,s=(o("6fda"),o("0b56")),d=Object(s["a"])(l,i,a,!1,null,"e3b280c4",null);t["default"]=d.exports}}]);