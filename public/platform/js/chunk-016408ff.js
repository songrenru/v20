(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-016408ff","chunk-58118a8a"],{2061:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:e.modalTitle,width:1300,visible:e.visible,bodyStyle:{padding:"0 25px"}},on:{close:e.onClose}},[a("a-table",{staticClass:"table_con",attrs:{rowKey:function(e){return e.id},loading:e.tableLoading,pagination:e.pageInfo,columns:e.columns,"data-source":e.alertList,bordered:""},on:{change:e.tableChange},scopedSlots:e._u([{key:"action",fn:function(t,i){return[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.addAlert(i)}}},[e._v("详情")])]}},{key:"channelId",fn:function(t,i){return[a("div",{staticStyle:{width:"170px","text-align":"center"}},[e._v(" "+e._s(i.channel_id?i.channel_id:"--")+" ")])]}},{key:"pictureUrl",fn:function(t,i){return[i.picture_url?a("viewer",{attrs:{images:[i.picture_url]}},[a("img",{staticStyle:{width:"50px",height:"50px","border-radius":"5px"},attrs:{src:i.picture_url}})]):e._e()]}}])}),a("alertAddModal",{attrs:{id:e.event_id,visible:e.alertVisible},on:{close:e.closeAdd}})],1)},n=[],l=(a("a9e3"),a("8bbf")),r=a.n(l),s=a("768c"),c=(a("0808"),a("6944")),o=a.n(c);r.a.use(o.a);var d=200,u=[{title:"事件时间",dataIndex:"date_time",key:"date_time",width:d+40},{title:"事件类型",key:"event_type",dataIndex:"event_type",width:d-80},{title:"事件描述",key:"event_description",dataIndex:"event_description",width:d-40},{title:"图片URL",key:"picture_url",dataIndex:"picture_url",width:d-100,scopedSlots:{customRender:"pictureUrl"}},{title:"备注",key:"event_remark",dataIndex:"event_remark",width:d},{title:"操作",key:"action",width:d-100,scopedSlots:{customRender:"action"}}],h={props:{visible:{type:Boolean,default:!1},camera_id:{type:[String,Number],default:0}},watch:{visible:{handler:function(e){e&&this.camera_id&&(this.pageInfo.camera_id=this.camera_id,this.getAlertList())},immediate:!0}},components:{alertAddModal:s["default"]},data:function(){return{event_id:0,modalTitle:"监控事件报警",tableLoading:!1,columns:u,alertList:[],alertVisible:!1,pageInfo:{current:1,pageSize:10,total:0,page:1},cameraInfo:{}}},methods:{onClose:function(){this.$emit("close")},addAlert:function(e){this.alertVisible=!0,this.event_id=e.id},closeAdd:function(){this.alertVisible=!1,this.event_id=0},getAlertList:function(){var e=this;this.tableLoading=!0,this.request("/community/village_api.CameraDevice/getDeviceAlarmEventList",this.pageInfo).then((function(t){e.alertList=t.alarm_list,e.cameraInfo=t.cameraInfo,e.pageInfo.total=t.count,e.tableLoading=!1,t.cameraInfo.camera_sn&&t.cameraInfo.camera_name&&(e.modalTitle="设备编号："+t.cameraInfo.camera_sn+"      设备名称："+t.cameraInfo.camera_name)})).catch((function(t){e.tableLoading=!1}))},tableChange:function(e,t,a){console.log(e,t,a),this.pageInfo.page=e.current,this.pageInfo.current=e.current,this.pageInfo.pageSize=e.pageSize,this.getAlertList()}}},f=h,m=(a("6041"),a("0c7c")),p=Object(m["a"])(f,i,n,!1,null,"5f081e8b",null);t["default"]=p.exports},6041:function(e,t,a){"use strict";a("d712")},"768c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"告警事件详情",width:800,visible:e.visible,footer:null},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("div",{staticClass:"detail_con"},e._l(e.detailList,(function(t,i){return a("div",{key:i,staticClass:"detail_item"},[a("div",{staticClass:"left_label"},[e._v(e._s(t.label)+"：")]),"text"==t.type?a("div",{staticClass:"right_value"},[e._v(e._s(t.value))]):e._e(),t.value&&"image"==t.type?a("viewer",{attrs:{images:[t.value]}},[a("img",{staticStyle:{width:"50px",height:"50px","border-radius":"5px"},attrs:{src:t.value}})]):e._e()],1)})),0)])},n=[],l=(a("a9e3"),a("8bbf")),r=a.n(l),s=(a("0808"),a("6944")),c=a.n(s);r.a.use(c.a);var o={props:{visible:{type:Boolean,default:!1},id:{type:[String,Number],default:0}},watch:{visible:{handler:function(e){e&&this.id&&this.getDetails()},immediate:!0}},data:function(){return{detailList:[]}},methods:{handleOk:function(){this.$emit("close")},handleCancel:function(){this.$emit("close")},getDetails:function(){var e=this;this.request("/community/village_api.CameraDevice/getDeviceAlarmInfo",{id:this.id}).then((function(t){e.detailList=t.alarmShow}))}}},d=o,u=(a("c036"),a("0c7c")),h=Object(u["a"])(d,i,n,!1,null,"c28caa42",null);t["default"]=h.exports},a412:function(e,t,a){},c036:function(e,t,a){"use strict";a("a412")},d712:function(e,t,a){}}]);