(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5dbfa6cc","chunk-2d0c06af"],{4261:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("a-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"primary"}},[t._v(" Open the message box ")])},i=[],o={downloadExportFile:"/common/common.export/downloadExportFile"},s=o,r="updatable",c={props:{exportUrl:"",queryParam:{}},data:function(){return{file_date:"",file_url:""}},mounted:function(){},methods:{exports:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"加载中,请耐心等待,数量越多时间越长。";this.request(this.exportUrl,this.queryParam).then((function(n){t.$message.loading({content:e,key:r,duration:0}),console.log("添加导出计划任务成功"),t.file_url=s.downloadExportFile+"?id="+n.export_id,t.file_date=n,t.CheckStatus()}))},CheckStatus:function(){var t=this;this.request(this.file_url,{id:this.file_date.export_id}).then((function(e){0==e.error?(t.$message.success({content:"下载成功!",key:r,duration:2}),location.href=e.url):setTimeout((function(){t.CheckStatus(),console.log("重复请求")}),1e3)}))}}},l=c,d=n("2877"),p=Object(d["a"])(l,a,i,!1,null,"dd2f8128",null);e["default"]=p.exports},5487:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[e("div",{staticClass:"page-title",staticStyle:{"padding-left":"0px","margin-left":"0px","padding-top":"0px","border-bottom":"none","margin-top":"0px","padding-bottom":"10px"}},[t._v("预约列表")]),e("a-form-model",{staticStyle:{"margin-bottom":"20px"},attrs:{layout:"inline",model:t.searchForm}},[e("a-row",{staticStyle:{display:"flex"}},[e("a-col",[e("a-form-model-item",{attrs:{label:"活动名称"}},[e("a-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入活动名称"},model:{value:t.searchForm.title,callback:function(e){t.$set(t.searchForm,"title",e)},expression:"searchForm.title"}})],1)],1),e("a-col",[e("a-form-model-item",{attrs:{label:"商家名称"}},[e("a-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入商家名称"},model:{value:t.searchForm.mer_name,callback:function(e){t.$set(t.searchForm,"mer_name",e)},expression:"searchForm.mer_name"}})],1)],1),e("a-col",[e("a-form-model-item",{attrs:{label:"活动时间"}},[e("a-range-picker",{attrs:{ranges:{"过去30天":[t.moment().subtract(30,"days"),t.moment()],"过去15天":[t.moment().subtract(15,"days"),t.moment()],"过去7天":[t.moment().subtract(7,"days"),t.moment()],"今日":[t.moment(),t.moment()]},value:t.searchForm.time,format:"YYYY-MM-DD"},on:{change:t.onDateRangeChange}})],1)],1),e("a-col",[e("a-form-model-item",[e("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.getAppointList()}}},[t._v(" 查询")])],1)],1)],1)],1),e("a-table",{attrs:{columns:t.columns,"data-source":t.data,rowKey:"appoint_id",pagination:t.pagination},on:{change:t.onPageChange},scopedSlots:t._u([{key:"look",fn:function(n,a){return e("span",{},[e("a",{staticClass:"ml-10 inline-block",on:{click:function(e){return t.$refs.userRecordList.showRes(a.appoint_id)}}},[t._v("查看")])])}},{key:"action",fn:function(n,a){return e("span",{},[e("a",{staticClass:"ml-10 inline-block",on:{click:function(e){return t.editAct(a.appoint_id)}}},[t._v("编辑")]),1==a.status?e("a",{staticClass:"ml-10 inline-block",on:{click:function(e){return t.closeAct(a.appoint_id,a.status)}}},[t._v("关闭预约")]):t._e(),0==a.status?e("a",{staticClass:"ml-10 inline-block",staticStyle:{color:"red"},on:{click:function(e){return t.closeAct(a.appoint_id,a.status)}}},[t._v("开启预约")]):t._e(),e("a",{staticClass:"ml-10 inline-block",on:{click:function(e){return t.delAct(a.appoint_id)}}},[t._v("删除")])])}}])}),e("appoint-user-record-list",{ref:"userRecordList",on:{getAppointList:t.getAppointList}}),e("appoint-edit",{ref:"appointEdit",on:{getAppointList:t.getAppointList}})],1)},i=[],o=(n("d81d"),n("c1df")),s=n.n(o),r=n("f9e9"),c=n("290c"),l=n("da05"),d=(n("202f"),n("89e4")),p=n("ca08"),u=(n("0808"),n("6944")),h=n.n(u),m=n("8bbf"),f=n.n(m);f.a.use(h.a);var g=[],_=[{title:"活动名称",dataIndex:"title",scopedSlots:{customRender:"title"}},{title:"商家名称",dataIndex:"mer_name"},{title:"活动时间",dataIndex:"activity_time",scopedSlots:{customRender:"activity_time"}},{title:"活动地点",dataIndex:"address",slots:{customRender:"address"}},{title:"报名费用",dataIndex:"price",scopedSlots:{customRender:"price"},align:"center"},{title:"查看报名信息",scopedSlots:{customRender:"look"},align:"center"},{title:"操作",dataIndex:"tools_id",key:"tools_id",scopedSlots:{customRender:"action"},align:"center"}],v={name:"AppointList",components:{AppointEdit:p["default"],AppointUserRecordList:d["default"],ACol:l["b"],ARow:c["a"]},data:function(){return{total_num:0,visible:!1,columns:_,selectedRows:g,data:[],areaList:[],formData:{},searchForm:{title:"",time:[],start_time:"",end_time:"",pageSize:10,page:1},queryParam:{page:1,pageSize:10,education:-1,job_age:"",status:-1,keywords:"",cates:"",mer_id:0},pagination:{pageSize:10,total:0,current:1,page:1}}},created:function(){this.getAppointList()},activated:function(){this.getAppointList()},methods:{moment:s.a,reset:function(){this.data=[],this.getAppointList()},onDateRangeChange:function(t,e){this.$set(this.searchForm,"time",[t[0],t[1]]),this.$set(this.searchForm,"start_time",e[0]),this.$set(this.searchForm,"end_time",e[1])},closeAct:function(t,e){var n=this;e=e?0:1,this.request(r["a"].closeAppoint,{appoint_id:t,status:e}).then((function(t){n.getAppointList()}))},editAct:function(t){this.$refs.appointEdit.edit(t)},getAppointList:function(){var t=this;this.selectedRows=[],this.searchForm.pageSize=this.pagination.pageSize,this.searchForm.page=this.pagination.current,this.request(r["a"].getAppointList,this.searchForm).then((function(e){t.data=e.list,t.total_num=e.total,t.pagination.total=e.total}))},delAct:function(t){var e=this;this.$confirm({title:"是否删除预约",content:"",okText:"确认",cancelText:"取消",onOk:function(){e.request(r["a"].delSport,{appoint_id:t}).then((function(t){e.getAppointList()}))},onCancel:function(){console.log("Cancel"),e.currentBtn=""},class:"test"})},clikPersent:function(){},handleUpdate:function(){this.getAppointList()},changeArea:function(t){this.formData.province_id=t[0]||0,this.formData.city_id=t[1]||0,this.formData.area_id=t[2]||0,this.formData.check_areaList=[t[0],t[1],t[2]]},date_moment:function(t,e){return t?s()(t,e):null},onSelectChange:function(t,e){var n=this;this.selectedRows=[],this.total_num=e.length,this.achievement=0;var a=0;e.length&&e.map((function(t){n.selectedRows.push(t.id),a+=1*t.total_performance})),this.achievement=a},handleTableChange:function(t){this.pagination.current=page.current,this.getAppointList()},onPageChange:function(t,e){this.pagination.current=t.current,this.getAppointList()},onPageSizeChange:function(t,e){this.$set(this.pagination,"pageSize",e)}}},x=v,y=(n("aed0"),n("2877")),b=Object(y["a"])(x,a,i,!1,null,"631cf3e8",null);e["default"]=b.exports},"7b83e":function(t,e,n){"use strict";n("eb82")},"89e4":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"components-layout-demo-basic"}},[e("a-modal",{attrs:{title:t.title,width:"60%",visible:t.confirmShow,footer:null},on:{cancel:t.handleCancelModel}},[e("a-layout",[e("a-layout",{staticStyle:{padding:"0 20px",background:"#fff"}},[e("a-layout-content",{style:{margin:"0px",padding:"0px",background:"#fff",minHeight:"100px"}},[e("div",{staticClass:"table-operations"},[e("a-row",{staticStyle:{padding:"0px",width:"100%"},attrs:{align:"top"}},[e("a-col",{staticClass:"text-right",attrs:{span:24}},[e("a-button",{attrs:{icon:"download"},on:{click:t.getExport}},[t._v(" 导出")])],1)],1)],1),e("a-table",{attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination},scopedSlots:t._u([{key:"status",fn:function(n,a){return e("span",{},[0==a.status?e("a",[t._v("待支付")]):t._e(),1==a.status?e("a",[t._v("报名成功")]):t._e(),2==a.status?e("a",[t._v("报名失败")]):t._e(),4==a.status?e("a",[t._v("已过期")]):t._e(),3==a.status?e("a",[t._v("已核销")]):t._e(),5==a.status?e("a",{staticClass:"red"},[t._v("已退款")]):t._e()])}},{key:"verify_time",fn:function(n){return e("span",{},[t._v(" "+t._s(n||"--")+" ")])}},{key:"need_pay",fn:function(n,a){return e("span",{},[0==a.need_pay?e("a",[t._v("不需要")]):t._e(),1==a.need_pay?e("a",[t._v("需要")]):t._e()])}},{key:"need_verify",fn:function(n,a){return e("span",{},[0==a.need_verify?e("a",[t._v("不需要")]):t._e(),1==a.need_verify?e("a",[t._v("需要")]):t._e()])}},{key:"paid",fn:function(n,a){return e("span",{},[0==a.paid?e("a",[t._v("未支付")]):t._e(),1==a.paid?e("a",[t._v("已支付")]):t._e()])}}])})],1)],1)],1)],1),e("export-add",{ref:"ExportAddModal",attrs:{exportUrl:t.exportUrl,queryParam:t.searchForm}})],1)},i=[],o=(n("d81d"),n("f9e9")),s=n("4261"),r=[{title:"姓名",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"手机号",dataIndex:"phone",scopedSlots:{customRender:"phone"}},{title:"报名费",dataIndex:"price",scopedSlots:{customRender:"price"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"是否需要报名费",dataIndex:"need_pay",scopedSlots:{customRender:"need_pay"}},{title:"是否支付",dataIndex:"paid",scopedSlots:{customRender:"paid"}},{title:"支付时间",dataIndex:"pay_time",scopedSlots:{customRender:"pay_time"}},{title:"是否需要核销",dataIndex:"need_verify",scopedSlots:{customRender:"need_verify"}},{title:"核销时间",dataIndex:"verify_time",scopedSlots:{customRender:"verify_time"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],c={name:"userRecordList",components:{ExportAdd:s["default"]},data:function(){return{title:"报名列表",sortLoading:!1,confirmShow:!1,is_res:!1,data:[],appoint_id:0,exportUrl:o["a"].exportAppointUserOrder,searchForm:{type:"pc",appoint_id:"",act:"all",pay:"all"},columns:r,pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(t){return"共 ".concat(t," 条记录")}}}},methods:{showRes:function(t){this.confirmShow=!0,this.searchForm.appoint_id=this.appoint_id=t,this.getUserList()},handleCancelModel:function(){this.confirmShow=!1,this.$emit("getAppointList")},getUserList:function(){var t=this;this.request(o["a"].lookAppointUser,{appoint_id:this.appoint_id}).then((function(e){t.data=e.list,t.$set(t,"data",e.list),t.$set(t.pagination,"total",e.count)}))},handleTableChange:function(t){t.current&&t.current>0&&(this.queryParam["page"]=t.current,this.getJobList())},getExport:function(){this.data.length?this.$refs.ExportAddModal.exports():this.$message.warn("当前没有可以导出的内容")},onPageChange:function(t,e){this.$set(this.pagination,"current",t),this.getJobList()},onPageSizeChange:function(t,e){this.$set(this.pagination,"pageSize",e),this.getJobList()},onSelectChange:function(t,e){var n=this;this.selectedRows=[],e.length&&e.map((function(t){n.selectedRows.push(t.id)}))},handleUpdate:function(){this.getJobList()},handleCancel:function(){this.phone="",this.confirmShow=!1,this.detail=""}}},l=c,d=(n("7b83e"),n("2877")),p=Object(d["a"])(l,a,i,!1,null,"5581bd8a",null);e["default"]=p.exports},"8ba0":function(t,e,n){},aed0:function(t,e,n){"use strict";n("8ba0")},eb82:function(t,e,n){}}]);