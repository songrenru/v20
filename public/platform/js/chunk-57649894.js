(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57649894","chunk-2d0b6a79","chunk-490c887a","chunk-2d0b6a79"],{"1da1":function(t,e,o){"use strict";o.d(e,"a",(function(){return a}));o("d3b7");function i(t,e,o,i,a,n,s){try{var r=t[n](s),l=r.value}catch(c){return void o(c)}r.done?e(l):Promise.resolve(l).then(i,a)}function a(t){return function(){var e=this,o=arguments;return new Promise((function(a,n){var s=t.apply(e,o);function r(t){i(s,a,n,r,l,"next",t)}function l(t){i(s,a,n,r,l,"throw",t)}r(void 0)}))}}},"33d3":function(t,e,o){"use strict";o.d(e,"a",(function(){return i}));const i=t=>Object.prototype.toString.call(t).slice(8,-1)},"3d1e":function(t,e,o){},4788:function(t,e,o){"use strict";o("3d1e")},"4fab":function(t,e,o){"use strict";var i={"bm-map":["click","dblclick","rightclick","rightdblclick","maptypechange","mousemove","mouseover","mouseout","movestart","moving","moveend","zoomstart","zoomend","addoverlay","addcontrol","removecontrol","removeoverlay","clearoverlays","dragstart","dragging","dragend","addtilelayer","removetilelayer","load","resize","hotspotclick","hotspotover","hotspotout","tilesloaded","touchstart","touchmove","touchend","longpress"],"bm-geolocation":["locationSuccess","locationError"],"bm-overview-map":["viewchanged","viewchanging"],"bm-marker":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"],"bm-polyline":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-polygon":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-circle":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-label":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","rightclick"],"bm-info-window":["close","open","maximize","restore","clickclose"],"bm-ground":["click","dblclick"],"bm-autocomplete":["onconfirm","onhighlight"],"bm-point-collection":["click","mouseover","mouseout"]};e["a"]=function(t,e){const o=e||i[this.$options.name];o&&o.forEach(e=>{const o="on"===e.slice(0,2),i=o?e.slice(2):e,a=this.$listeners[i];a&&t.addEventListener(e,a.fns)})}},"61ce1":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a-modal",{attrs:{title:t.title,width:1e3,height:500,visible:t.visible,footer:null},on:{cancel:t.closeWindow}},[o("a-row",[o("a-col",{attrs:{span:5}},[o("a-input-search",{attrs:{placeholder:"搜索地址"},on:{search:t.onSearch}})],1),o("a-col",{staticStyle:{"padding-left":"20px"},attrs:{span:19}},[o("span",{staticStyle:{color:"#000000"}},[t._v("当前选中经纬度："+t._s(t.longlat))]),o("baidu-map",{staticClass:"bm-view",attrs:{center:t.mapConfig.center,"scroll-wheel-zoom":!0,zoom:t.mapConfig.zoom,ak:t.AK,id:""},on:{click:t.clickMap,ready:t.mapReady}},[o("bm-geolocation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",showAddressBar:!0,autoLocation:!0}}),o("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_HYBRID_MAP"],anchor:"BMAP_ANCHOR_TOP_LEFT"}}),o("bm-overview-map",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",isOpen:!0}}),o("bm-local-search",{staticClass:"search-item",attrs:{keyword:t.keyword,"page-capacity":10,"auto-viewport":!0},on:{infohtmlset:t.searchSelectPoint}}),t.isShowMapSign?o("bm-marker",{attrs:{position:t.clickMapShow.position,dragging:!0}}):t._e()],1)],1)],1),o("div",{staticStyle:{"text-align":"right"}},[o("a-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.confirmPoint}},[t._v("确认选点")])],1)],1)},a=[],n=o("df2ba"),s={components:{BaiduMap:n["a"]},data:function(){return{title:"选择位置",visible:!1,keyword:"",mapConfig:{center:"北京",zoom:15},isShowMapSign:!1,clickMapShow:{position:{lng:116.404,lat:39.915}},AK:"",longlat:""}},methods:{closeWindow:function(){this.visible=!1},selectPoint:function(){this.visible=!0},clickMap:function(t){t.type,t.target;var e=t.point;t.pixel,t.overlay;this.longlat=e.lng+","+e.lat,this.clickMapShow.position.lng=e.lng,this.clickMapShow.position.lat=e.lat,this.isShowMapSign=!0},mapReady:function(){this.mapConfig.center="北京",this.mapConfig.zoom=15},confirmPoint:function(){this.$emit("loadRefresh",this.longlat),this.visible=!1},onSearch:function(t){this.isShowMapSign=!1,this.keyword=t},searchSelectPoint:function(t){var e=t.point;this.longlat=e.lng+","+e.lat,this.clickMapShow.position.lng=e.lng,this.clickMapShow.position.lat=e.lat,this.isShowMapSign=!0}}},r=s,l=(o("a6eb"),o("2877")),c=Object(l["a"])(r,i,a,!1,null,null,null);e["default"]=c.exports},"6c54":function(t,e,o){"use strict";var i,a=o("ade3"),n=(i={getGoodsSortList:"/merchant/merchant.deposit.DepositGoodsSort/getGoodsSortList",getGoodsSortEdit:"/merchant/merchant.deposit.DepositGoodsSort/handleGoodsSort",getGoodsSortInfo:"/merchant/merchant.deposit.DepositGoodsSort/getGoodsSortInfo",delGoodsSort:"/merchant/merchant.deposit.DepositGoodsSort/delGoodsSort",goodsEdit:"/merchant/merchant.deposit.DepositGoods/goodsEdit",getGoodsSortSelect:"/merchant/merchant.deposit.DepositGoodsSort/getGoodsSortSelect",getGoodsList:"/merchant/merchant.deposit.DepositGoods/getGoodsList",getGoodsDetail:"/merchant/merchant.deposit.DepositGoods/getGoodsDetail",delGoods:"/merchant/merchant.deposit.DepositGoods/delGoods",getVerificationList:"/merchant/merchant.deposit.DepositGoodsVerification/getVerificationList",getCashBackList:"/merchant/merchant.Store/getCashBackList",exportCashBackList:"/merchant/merchant.Store/exportCashBackList",goodsTypeList:"/merchant/merchant.CardGoods/goodsTypeList",goodsTypeAdd:"/merchant/merchant.CardGoods/goodsTypeAdd",goodsTypeEdit:"/merchant/merchant.CardGoods/goodsTypeEdit",goodsTypeDel:"/merchant/merchant.CardGoods/goodsTypeDel",goodsList:"/merchant/merchant.CardGoods/goodsList",goodsAdd:"/merchant/merchant.CardGoods/goodsAdd"},Object(a["a"])(i,"goodsEdit","/merchant/merchant.CardGoods/goodsEdit"),Object(a["a"])(i,"goodsDel","/merchant/merchant.CardGoods/goodsDel"),Object(a["a"])(i,"goodsDetail","/merchant/merchant.CardGoods/goodsDetail"),Object(a["a"])(i,"couponList","/merchant/merchant.CardGoods/couponList"),Object(a["a"])(i,"goodsExchangeList","/merchant/merchant.CardGoods/goodsExchangeList"),i);e["a"]=n},"7f25":function(t,e,o){"use strict";(function(t){var i=o("b85c"),a=(o("a9e3"),o("d81d"),o("d3b7"),o("4fab")),n=o("33d3");e["a"]={name:"bm-map",props:{ak:{type:String},center:{type:[Object,String]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},highResolution:{type:Boolean,default:!0},mapClick:{type:Boolean,default:!0},mapType:{type:String},dragging:{type:Boolean,default:!0},scrollWheelZoom:{type:Boolean,default:!1},doubleClickZoom:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},inertialDragging:{type:Boolean,default:!0},continuousZoom:{type:Boolean,default:!0},pinchToZoom:{type:Boolean,default:!0},autoResize:{type:Boolean,default:!0},theme:{type:Array},mapStyle:{type:Object}},watch:{center:function(t,e){var o=this.map,i=this.zoom;"String"===Object(n["a"])(t)&&t!==e&&o.centerAndZoom(t,i)},"center.lng":function(t,e){var o=this.BMap,i=this.map,a=this.zoom,n=this.center;t!==e&&t>=-180&&t<=180&&i.centerAndZoom(new o.Point(t,n.lat),a)},"center.lat":function(t,e){var o=this.BMap,i=this.map,a=this.zoom,n=this.center;t!==e&&t>=-74&&t<=74&&i.centerAndZoom(new o.Point(n.lng,t),a)},zoom:function(t,e){var o=this.map;t!==e&&t>=3&&t<=19&&o.setZoom(t)},minZoom:function(t){var e=this.map;e.setMinZoom(t)},maxZoom:function(t){var e=this.map;e.setMaxZoom(t)},highResolution:function(){this.reset()},mapClick:function(){this.reset()},mapType:function(e){var o=this.map;o.setMapType(t[e])},dragging:function(t){var e=this.map;t?e.enableDragging():e.disableDragging()},scrollWheelZoom:function(t){var e=this.map;t?e.enableScrollWheelZoom():e.disableScrollWheelZoom()},doubleClickZoom:function(t){var e=this.map;t?e.enableDoubleClickZoom():e.disableDoubleClickZoom()},keyboard:function(t){var e=this.map;t?e.enableKeyboard():e.disableKeyboard()},inertialDragging:function(t){var e=this.map;t?e.enableInertialDragging():e.disableInertialDragging()},continuousZoom:function(t){var e=this.map;t?e.enableContinuousZoom():e.disableContinuousZoom()},pinchToZoom:function(t){var e=this.map;t?e.enablePinchToZoom():e.disablePinchToZoom()},autoResize:function(t){var e=this.map;t?e.enableAutoResize():e.disableAutoResize()},theme:function(t){var e=this.map;e.setMapStyle({styleJson:t})},"mapStyle.features":{handler:function(t,e){var o=this.map,i=this.mapStyle,a=i.style,n=i.styleJson;o.setMapStyle({styleJson:n,features:t,style:a})},deep:!0},"mapStyle.style":function(t,e){var o=this.map,i=this.mapStyle,a=i.features,n=i.styleJson;o.setMapStyle({styleJson:n,features:a,style:t})},"mapStyle.styleJson":{handler:function(t,e){var o=this.map,i=this.mapStyle,a=i.features,n=i.style;o.setMapStyle({styleJson:t,features:a,style:n})},deep:!0},mapStyle:function(t){var e=this.map,o=this.theme;!o&&e.setMapStyle(t)}},methods:{setMapOptions:function(){var e=this.map,o=this.minZoom,i=this.maxZoom,a=this.mapType,n=this.dragging,s=this.scrollWheelZoom,r=this.doubleClickZoom,l=this.keyboard,c=this.inertialDragging,d=this.continuousZoom,p=this.pinchToZoom,m=this.autoResize;o&&e.setMinZoom(o),i&&e.setMaxZoom(i),a&&e.setMapType(t[a]),n?e.enableDragging():e.disableDragging(),s?e.enableScrollWheelZoom():e.disableScrollWheelZoom(),r?e.enableDoubleClickZoom():e.disableDoubleClickZoom(),l?e.enableKeyboard():e.disableKeyboard(),c?e.enableInertialDragging():e.disableInertialDragging(),d?e.enableContinuousZoom():e.disableContinuousZoom(),p?e.enablePinchToZoom():e.disablePinchToZoom(),m?e.enableAutoResize():e.disableAutoResize()},init:function(t){if(!this.map){var e,o=this.$refs.view,n=Object(i["a"])(this.$slots.default||[]);try{for(n.s();!(e=n.n()).done;){var s=e.value;s.componentOptions&&"bm-view"===s.componentOptions.tag&&(this.hasBmView=!0,o=s.elm)}}catch(u){n.e(u)}finally{n.f()}var r=new t.Map(o,{enableHighResolution:this.highResolution,enableMapClick:this.mapClick});this.map=r;var l=this.setMapOptions,c=this.zoom,d=this.getCenterPoint,p=this.theme,m=this.mapStyle;p?r.setMapStyle({styleJson:p}):r.setMapStyle(m),l(),a["a"].call(this,r),r.reset(),r.centerAndZoom(d(),c),this.$emit("ready",{BMap:t,map:r})}},getCenterPoint:function(){var t=this.center,e=this.BMap;switch(Object(n["a"])(t)){case"String":return t;case"Object":return new e.Point(t.lng,t.lat);default:return new e.Point}},initMap:function(t){this.BMap=t,this.init(t)},getMapScript:function(){if(t.BMap)return t.BMap._preloader?t.BMap._preloader:Promise.resolve(t.BMap);var e=this.ak||this._BMap().ak;return t.BMap={},t.BMap._preloader=new Promise((function(o,i){t._initBaiduMap=function(){o(t.BMap),t.document.body.removeChild(a),t.BMap._preloader=null,t._initBaiduMap=null};var a=document.createElement("script");t.document.body.appendChild(a),a.src="https://api.map.baidu.com/api?v=2.0&ak=".concat(e,"&callback=_initBaiduMap")})),t.BMap._preloader},reset:function(){var t=this.getMapScript,e=this.initMap;t().then(e)}},mounted:function(){this.reset()},data:function(){return{hasBmView:!1}}}}).call(this,o("c8ba"))},a6eb:function(t,e,o){"use strict";o("bd3e")},bd3e:function(t,e,o){},df2ba:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.hasBmView?t._e():o("div",{ref:"view",staticStyle:{width:"100%",height:"100%"}}),t._t("default")],2)},a=[],n=o("7f25"),s=n["a"],r=o("2877"),l=Object(r["a"])(s,i,a,!1,null,null,null);e["a"]=l.exports},ef3c:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mt-10 mb-20 pt-20 pl-20 pr-20 pb-20 bg-ff br-10"},[o("a-tabs",{attrs:{"default-active-key":"0"},on:{change:t.tabChange}},t._l(t.tabList,(function(t){return o("a-tab-pane",{key:t.key,attrs:{tab:t.label}})})),1),o("a-row",{staticStyle:{margin:"10px 0",display:"flex","align-items":"center"}},[o("div",{staticClass:"flag",staticStyle:{"margin-left":"20px"}},[o("p",[t._v("商品名称/优惠券名称:")]),o("a-input",{staticStyle:{width:"250px"},attrs:{placeholder:"商品名称/优惠券名称"},model:{value:t.queryParams.key,callback:function(e){t.$set(t.queryParams,"key",e)},expression:"queryParams.key"}})],1),o("div",{staticClass:"flag"},[o("p",[t._v("类型:")]),o("a-select",{staticStyle:{width:"160px"},model:{value:t.queryParams.type,callback:function(e){t.$set(t.queryParams,"type",e)},expression:"queryParams.type"}},t._l(t.option1,(function(e,i){return o("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),o("a-button",{staticStyle:{margin:"10px 10px 10px 3%"},attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1),0==t.tabIndex?o("a-row",{staticClass:"center",attrs:{type:"flex",align:"middle"}},[o("div",{staticClass:"btn_list"},[o("a-button",{staticStyle:{margin:"10px 20px"},attrs:{type:"primary"},on:{click:t.addClick}},[t._v(t._s(t.L("新增")))]),o("a-button",{staticStyle:{margin:"10px 20px"},attrs:{type:"danger"},on:{click:t.deleltClick}},[t._v(t._s(t.L("删除")))]),o("a-button",{staticStyle:{margin:"10px 20px"},attrs:{type:"primary"},on:{click:t.toPageClick}},[t._v(t._s(t.L("分类管理")))])],1)]):t._e(),0==t.tabIndex?o("a-table",{staticStyle:{background:"#ffffff"},attrs:{columns:t.columns,rowKey:"id","data-source":t.dataList,pagination:t.pagination,rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onParkingChange}},scopedSlots:t._u([{key:"sort",fn:function(e,i){return o("span",{},[o("a-input-number",{attrs:{min:0,id:"inputNumber",value:i.sort},on:{blur:function(e){return t.setListSort(e,i)}}})],1)}},{key:"operation",fn:function(e,i){return o("span",{},[o("a",{staticClass:"inline-block",on:{click:function(e){return t.editList(i)}}},[t._v(t._s(t.L("编辑")))]),o("a",{staticClass:"inline-block",staticStyle:{color:"red","margin-left":"10px"},on:{click:function(e){return t.delList(i)}}},[t._v(t._s(t.L("删除")))])])}}],null,!1,748622491)}):1==t.tabIndex?o("a-table",{staticStyle:{background:"#ffffff"},attrs:{columns:t.columns1,rowKey:"id","data-source":t.dataList,pagination:t.pagination},scopedSlots:t._u([{key:"sort",fn:function(e,i){return o("span",{},[o("a-input-number",{attrs:{min:0,id:"inputNumber",value:i.sort},on:{blur:function(e){return t.setListSort(e,i)}}})],1)}},{key:"operation",fn:function(e,i){return o("span",{},[o("a",{staticClass:"inline-block",on:{click:function(e){return t.editList(i)}}},[t._v(t._s(t.L("编辑")))]),o("a",{staticClass:"inline-block",staticStyle:{color:"red","margin-left":"10px"},on:{click:function(e){return t.delList(i)}}},[t._v(t._s(t.L("删除")))])])}}])}):t._e(),o("a-modal",{attrs:{centered:!0,maskClosable:!1,destroyOnClose:"",width:"60%",title:t.titles},on:{ok:t.addOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[o("div",{staticClass:"newBox"},[o("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[o("a-form-model-item",{attrs:{label:"类型"}},[o("a-select",{staticStyle:{width:"160px"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.shopType,(function(e,i){return o("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),2==t.form.type?o("a-form-model-item",{attrs:{label:"选择商家优惠券"}},[o("a-select",{staticStyle:{width:"160px"},model:{value:t.form.coupon_id,callback:function(e){t.$set(t.form,"coupon_id",e)},expression:"form.coupon_id"}},t._l(t.coupon_idList,(function(e,i){return o("a-select-option",{key:e.coupon_id,attrs:{value:e.coupon_id}},[t._v(t._s(e.name))])})),1)],1):t._e(),1==t.form.type?o("a-form-model-item",{attrs:{label:"商品名称",prop:"name"}},[o("a-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1):t._e(),o("a-form-model-item",{attrs:{label:"商品分类",prop:"goods_type"}},[o("a-select",{staticStyle:{width:"160px"},model:{value:t.form.goods_type,callback:function(e){t.$set(t.form,"goods_type",e)},expression:"form.goods_type"}},t._l(t.goods_typeList,(function(e,i){return o("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),o("a-form-model-item",{attrs:{label:"兑换积分",prop:"points"}},[o("a-input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入积分"},model:{value:t.form.points,callback:function(e){t.$set(t.form,"points",e)},expression:"form.points"}})],1),1==t.form.type?o("a-form-model-item",{attrs:{label:"剩余库存",prop:"num"}},[o("a-input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入剩余库存"},model:{value:t.form.num,callback:function(e){t.$set(t.form,"num",e)},expression:"form.num"}})],1):t._e(),1==t.form.type?o("a-form-model-item",{attrs:{label:"领取地址",prop:"address"}},[o("a-input",{attrs:{placeholder:"请输入领取地址"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1):t._e(),1==t.form.type?o("a-form-model-item",{attrs:{label:"领取地址经纬度",prop:"lat_lng"}},[o("a-input",{staticStyle:{width:"200px"},attrs:{disabled:!0,placeholder:"请选择位置"},model:{value:t.form.lat_lng,callback:function(e){t.$set(t.form,"lat_lng",e)},expression:"form.lat_lng"}}),o("a",{staticStyle:{"margin-left":"5px"},on:{click:t.mapPointClick}},[t._v("地图选点")])],1):t._e(),1==t.form.type?o("a-form-model-item",{attrs:{label:"兑换后有效天数",prop:"effective_days"}},[o("a-input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入天数"},model:{value:t.form.effective_days,callback:function(e){t.$set(t.form,"effective_days",e)},expression:"form.effective_days"}}),o("span",[t._v("  天")])],1):t._e(),1==t.form.type?o("a-form-model-item",{attrs:{label:"上传图片",prop:"image"}},[o("a-upload",{attrs:{action:"/v20/public/index.php/common/common.UploadFile/uploadPictures","list-type":"picture-card",name:"reply_pic",data:{upload_dir:"shop/pictures"},"file-list":t.fileList},on:{preview:t.handlePreview,change:t.handleChange}},[t.fileList.length<1?o("div",[o("a-icon",{attrs:{type:"plus"}}),o("div",{staticClass:"ant-upload-text"},[t._v("上传")])],1):t._e()])],1):t._e(),o("a-form-model-item",{attrs:{label:"排序"}},[o("a-input-number",{attrs:{min:0,id:"inputNumber"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),o("a-form-model-item",{attrs:{label:"详情"}},[o("rich-text",{attrs:{info:t.form.content},on:{"update:info":function(e){return t.$set(t.form,"content",e)}}})],1)],1)],1)]),o("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[o("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})]),o("map-point",{ref:"mapPointModel",on:{loadRefresh:t.setLongLat}})],1)},a=[],n=o("1da1"),s=(o("96cf"),o("d3b7"),o("4e82"),o("ac1f"),o("1276"),o("6c54")),r=o("61ce1"),l=o("6ec16");function c(t){return new Promise((function(e,o){var i=new FileReader;i.readAsDataURL(t),i.onload=function(){return e(i.result)},i.onerror=function(t){return o(t)}}))}var d={data:function(){return{tabList:[{key:"0",label:"兑换商品列表"},{key:"1",label:"兑换列表"}],option1:[{id:0,name:"全部"},{id:1,name:"商品"},{id:2,name:"优惠券"}],shopType:[{id:1,name:"商品"},{id:2,name:"优惠券"}],visible:!1,previewVisible:!1,titles:"新建",columns:[{title:this.L("商品名称/优惠券名称"),dataIndex:"name",ellipsis:!0,width:300},{title:this.L("类型"),dataIndex:"type"},{title:this.L("所需积分"),dataIndex:"points",ellipsis:!0},{title:this.L("剩余库存"),dataIndex:"num",ellipsis:!0},{title:this.L("领取地址"),dataIndex:"address",ellipsis:!0},{title:this.L("排序"),dataIndex:"sort",ellipsis:!0,scopedSlots:{customRender:"sort"}},{title:this.L("操作"),width:150,scopedSlots:{customRender:"operation"}}],columns1:[{title:this.L("商品名称/优惠券名称"),dataIndex:"name",ellipsis:!0,width:300},{title:this.L("类型"),dataIndex:"type"},{title:this.L("所需积分"),dataIndex:"points",ellipsis:!0},{title:this.L("数量"),dataIndex:"num",ellipsis:!0},{title:this.L("兑换时间"),dataIndex:"create_time",ellipsis:!0}],dataList:[],pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange},selectedRowKeys:[],listId:0,lsitType:"add",queryParams:{page:1,pageSize:0,key:"",type:0},labelCol:{span:6},wrapperCol:{span:14},rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],points:[{required:!0,message:"请输入兑换积分",trigger:"blur"}],num:[{required:!0,message:"请输入剩余库存",trigger:"blur"}],address:[{required:!0,message:"请输入领取地址",trigger:"blur"}],lat_lng:[{required:!0,message:"请选择领取地址经纬度",trigger:"blur"}],effective_days:[{required:!0,message:"请输入有效天数",trigger:"blur"}],image:[{required:!0,message:"请上传图片",trigger:"blur"}],goods_type:[{required:!0,message:"请选择商品分类",trigger:"blur"}],coupon_id:[{required:!0,message:"请选择商家优惠券",trigger:"blur"}]},form:{type:1,name:"",goods_type:"",points:"",num:"",address:"",lat:"",long:"",effective_days:"",image:"",coupon_id:"",sort:0,lat_lng:"",content:""},fileList:[],previewImage:"",goods_typeList:[],coupon_idList:[],tabIndex:0}},components:{mapPoint:r["default"],RichText:l["a"]},created:function(){var t=this;this.request(s["a"].goodsTypeList,{page:0}).then((function(e){t.goods_typeList=e})),this.request(s["a"].couponList,{}).then((function(e){t.coupon_idList=e})),this.getDataList()},beforeRouteLeave:function(t,e,o){this.$destroy(),o()},methods:{toPageClick:function(){this.$router.push({path:"/merchant/card.merchant/pointGoodsType"})},search:function(){this.pagination.current=1,0==this.tabIndex?this.getDataList():this.getGoodsExchangeList()},getDataList:function(){var t=this;this.queryParams.page=this.pagination.current,this.queryParams.pageSize=this.pagination.pageSize,this.request(s["a"].goodsList,this.queryParams).then((function(e){t.dataList=e.data,t.$set(t.pagination,"total",e.total)}))},getGoodsExchangeList:function(){var t=this;this.queryParams.page=this.pagination.current,this.queryParams.pageSize=this.pagination.pageSize,this.request(s["a"].goodsExchangeList,this.queryParams).then((function(e){t.dataList=e.data,t.$set(t.pagination,"total",e.total)}))},tabChange:function(t){this.pagination.current=1,this.pagination.pageSize=10,this.queryParams.key="",this.queryParams.type=0,this.tabIndex=t,0==t?this.getDataList():this.getGoodsExchangeList()},onPageChange:function(t,e){this.$set(this.pagination,"current",t),0==this.tabIndex?this.getDataList():this.getGoodsExchangeList()},onPageSizeChange:function(t,e){this.$set(this.pagination,"current",1),this.$set(this.pagination,"pageSize",e),0==this.tabIndex?this.getDataList():this.getGoodsExchangeList()},toSetPage:function(t){var e=Math.ceil((this.pagination.total-(1==t?1:this.dataList.length))/this.pagination.pageSize);this.pagination.current=this.pagination.current>e?e:this.pagination.current,this.pagination.current=this.pagination.current<1?1:this.pagination.current},onParkingChange:function(t){this.selectedRowKeys=t},addClick:function(){this.titles="新建兑换商品",this.lsitType="add",this.visible=!0,this.fileList=[],this.form={type:1,name:"",goods_type:"",points:"",num:"",address:"",lat:"",long:"",effective_days:"",image:"",coupon_id:"",sort:0,lat_lng:"",edit_type:0,content:""}},editList:function(t){var e=this;this.titles="编辑兑换商品",this.lsitType="deit",this.request(s["a"].goodsDetail,{id:t.id}).then((function(t){e.visible=!0,e.form=t,e.form.lat_lng=t.long+","+t.lat,e.fileList=[{uid:"1",name:"image.png",url:t.image}]}))},delList:function(t){var e=this;this.$confirm({title:"是否删除该条数据?",centered:!0,onOk:function(){e.request(s["a"].goodsDel,{id:[t.id]}).then((function(t){e.toSetPage(1),e.$message.success("删除成功"),e.getDataList()}))}})},deleltClick:function(){var t=this;0!=this.selectedRowKeys.length?this.$confirm({title:"是否删除单个或多个列表数据?",centered:!0,onOk:function(){t.request(s["a"].goodsDel,{id:t.selectedRowKeys}).then((function(e){t.toSetPage(2),t.$message.success("删除成功"),t.selectedRowKeys=[],t.getDataList()}))}}):this.$message.warning("请选择单个或多个列表")},addOk:function(){var t=this;console.log(this.form),this.$refs.ruleForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;"add"==t.lsitType?t.request(s["a"].goodsAdd,t.form).then((function(e){t.$message.success("添加成功"),t.visible=!1,t.getDataList()})):t.request(s["a"].goodsEdit,t.form).then((function(e){t.$message.success("编辑成功"),t.visible=!1,t.getDataList()}))}))},setListSort:function(t,e){var o=this;if(t.target._value!=e.sort){var i={id:e.id,sort:t.target._value,edit_type:1};this.request(s["a"].goodsEdit,i).then((function(t){o.$message.success("修改成功"),o.getDataList()}))}},handleCancel:function(){this.previewVisible=!1},handlePreview:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(t.url||t.preview){o.next=4;break}return o.next=3,c(t.originFileObj);case 3:t.preview=o.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return o.stop()}}),o)})))()},handleChange:function(t){var e=t.fileList;this.fileList=e,e[0]&&e[0].response?this.form.image=e[0].response.data:this.form.image=""},mapPointClick:function(){this.$refs.mapPointModel.selectPoint()},setLongLat:function(t){this.form.lat_lng=t,this.form.long=t.split(",")[0],this.form.lat=t.split(",")[1]}}},p=d,m=(o("4788"),o("2877")),u=Object(m["a"])(p,i,a,!1,null,"bc03a2dc",null);e["default"]=u.exports}}]);