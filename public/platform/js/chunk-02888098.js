(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02888098"],{3983:function(e,t,a){"use strict";a("b712")},"39cc":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-form",{staticClass:"project_info",attrs:{form:e.form}},[a("a-tabs",{attrs:{"default-active-key":"1"}},[a("a-tab-pane",{key:"1",attrs:{tab:"基本信息"}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"用户编号"}},[a("span",[e._v(e._s(e.bind_number))])]),a("a-form-item",{attrs:{label:"业主名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{id:"user_name"},model:{value:e.post.name,callback:function(t){e.$set(e.post,"name",t)},expression:"post.name"}})],1),a("a-form-item",{attrs:{label:"手机号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{id:"phone"},model:{value:e.post.phone,callback:function(t){e.$set(e.post,"phone",t)},expression:"post.phone"}})],1),a("a-form-item",{attrs:{label:"身份证号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{id:"id_card"},model:{value:e.post.id_card,callback:function(t){e.$set(e.post,"id_card",t)},expression:"post.id_card"}})],1),a("a-form-item",{attrs:{label:"IC卡号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{id:"ic_card"},model:{value:e.post.ic_card,callback:function(t){e.$set(e.post,"ic_card",t)},expression:"post.ic_card"}})],1),a("a-form-item",{attrs:{label:"住址",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",[e._v(e._s(e.room_diy_name))])]),a("a-form-item",{attrs:{label:"房子平方",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",[e._v(e._s(e.housesize)+" ㎡")])]),a("a-form-item",{attrs:{label:"备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{id:"memo"},model:{value:e.post.memo,callback:function(t){e.$set(e.post,"memo",t)},expression:"post.memo"}})],1),a("a-form-item",{attrs:{label:"房屋类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",[e._v(e._s(e.house_type_name))])]),a("a-form-item",{attrs:{label:"车位信息",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[0!==e.positionList.length?a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.positionColumns,"data-source":e.positionList,rowKey:"id"}}):a("span",[e._v("无")])],1),a("a-form-item",{attrs:{label:"车辆信息",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[0!==e.carList.length?a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.carColumns,"data-source":e.carList,rowKey:"id"}}):a("span",[e._v("无")])],1)],1),a("a-tab-pane",{key:"2",attrs:{tab:"业主资料","force-render":""}},e._l(e.dataList,(function(t,i){return a("a-form-item",{key:i,attrs:{label:t.title,value:i,labelCol:e.labelCol,wrapperCol:e.wrapperCol,required:1*t.is_must==1}},[1===t.type?a("a-input",{attrs:{id:t.key},model:{value:e.authentication_field[t.key]["value"],callback:function(a){e.$set(e.authentication_field[t.key],"value",a)},expression:"authentication_field[item.key]['value']"}}):2===t.type?a("a-select",{staticStyle:{width:"120px"},attrs:{"show-search":""},model:{value:e.authentication_field[t.key]["value"],callback:function(a){e.$set(e.authentication_field[t.key],"value",a)},expression:"authentication_field[item.key]['value']"}},e._l(t.use_field,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t}},[e._v(e._s(t))])})),1):3===t.type?a("div",[a("a-select",{staticStyle:{width:"120px"},attrs:{"default-value":e.authentication_field[t.key]["province_name"]},on:{change:e.handleChangeProvince}},e._l(e.province_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t["id"]}},[e._v(e._s(t["name"]))])})),1),0!==e.city_list.length?a("a-select",{staticStyle:{width:"120px","margin-left":"20px"},on:{change:e.handleChange},model:{value:e.secondCity,callback:function(t){e.secondCity=t},expression:"secondCity"}},e._l(e.city_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t["id"]}},[e._v(e._s(t["name"]))])})),1):e._e()],1):4===t.type?a("a-date-picker",{attrs:{name:t.key,"default-value":e.moment(e.getDate(t.key),e.dateFormat)},on:{change:function(a,i){return e.onDateChange(a,i,t.key)}}}):e._e()],1)})),1),a("a-tab-pane",{key:"3",attrs:{tab:"信息标注"}},[a("a-form-item",{attrs:{label:"政治面貌",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},e._l(e.user_label_data["political_outlook"],(function(t,i){return a("label",{key:i,staticClass:"col-sm-1",staticStyle:{"padding-left":"0","padding-right":"20px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.political_outlook,expression:"political_outlook"}],staticClass:"label",attrs:{type:"radio",name:"political_outlook"},domProps:{value:t.id,checked:e._q(e.political_outlook,t.id)},on:{change:function(a){e.political_outlook=t.id}}}),a("span",{staticStyle:{"z-index":"1"}},[e._v(e._s(t.label_name))])])})),0),a("a-form-item",{attrs:{label:"特殊人群",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},e._l(e.user_label_data["special_population"],(function(t,i){return a("label",{key:i,staticClass:"col-sm-1",staticStyle:{"padding-left":"0","padding-right":"20px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.special_population,expression:"special_population"}],staticClass:"label",attrs:{type:"checkbox",name:"special_population"},domProps:{value:t.id,checked:Array.isArray(e.special_population)?e._i(e.special_population,t.id)>-1:e.special_population},on:{change:function(a){var i=e.special_population,o=a.target,l=!!o.checked;if(Array.isArray(i)){var n=t.id,s=e._i(i,n);o.checked?s<0&&(e.special_population=i.concat([n])):s>-1&&(e.special_population=i.slice(0,s).concat(i.slice(s+1)))}else e.special_population=l}}}),a("span",{staticStyle:{"z-index":"1"}},[e._v(e._s(t.label_name))])])})),0),a("a-form-item",{attrs:{label:"重点人群",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},e._l(e.user_label_data["key_population"],(function(t,i){return a("label",{key:i,staticClass:"col-sm-1",staticStyle:{"padding-left":"0","padding-right":"20px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.key_population,expression:"key_population"}],staticClass:"label",attrs:{type:"checkbox",name:"key_population"},domProps:{value:t.id,checked:Array.isArray(e.key_population)?e._i(e.key_population,t.id)>-1:e.key_population},on:{change:function(a){var i=e.key_population,o=a.target,l=!!o.checked;if(Array.isArray(i)){var n=t.id,s=e._i(i,n);o.checked?s<0&&(e.key_population=i.concat([n])):s>-1&&(e.key_population=i.slice(0,s).concat(i.slice(s+1)))}else e.key_population=l}}}),a("span",{staticStyle:{"z-index":"1"}},[e._v(e._s(t.label_name))])])})),0),a("a-form-item",{attrs:{label:"关怀对象",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},e._l(e.user_label_data["care_object"],(function(t,i){return a("label",{key:i,staticClass:"col-sm-1",staticStyle:{"padding-left":"0","padding-right":"20px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.care_object,expression:"care_object"}],staticClass:"label",attrs:{type:"checkbox",name:"care_object"},domProps:{value:t.id,checked:Array.isArray(e.care_object)?e._i(e.care_object,t.id)>-1:e.care_object},on:{change:function(a){var i=e.care_object,o=a.target,l=!!o.checked;if(Array.isArray(i)){var n=t.id,s=e._i(i,n);o.checked?s<0&&(e.care_object=i.concat([n])):s>-1&&(e.care_object=i.slice(0,s).concat(i.slice(s+1)))}else e.care_object=l}}}),a("span",{staticStyle:{"z-index":"1"}},[e._v(e._s(t.label_name))])])})),0)],1)],1),a("a-form-item",{attrs:{"wrapper-col":{span:12,offset:12}}},[a("a-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(" 保存 ")])],1)],1)],1)},o=[],l=(a("a9e3"),a("99af"),a("b0c0"),a("d81d"),a("a0e0")),n=a("c1df"),s=a.n(n),r=[{title:"ID",dataIndex:"id",key:"id"},{title:"车位",dataIndex:"position_num",key:"position_num"},{title:"车牌号",dataIndex:"province",key:"province"},{title:"停车卡号",dataIndex:"car_stop_num",key:"car_stop_num"},{title:"车主姓名",dataIndex:"car_user_name",key:"car_user_name"},{title:"车主手机号",dataIndex:"car_user_phone",key:"car_user_phone"}],c=[],p=[{title:"ID",dataIndex:"bind_id",key:"bind_id"},{title:"车库",dataIndex:"garage_num",key:"garage_num"},{title:"车位编号",dataIndex:"position_num",key:"position_num"},{title:"车位面积",dataIndex:"position_area",key:"position_area"},{title:"备注",dataIndex:"position_note",key:"position_note"}],d=[],u={name:"ownerInformation",data:function(){return{title:"",dateFormat:"YYYY-MM-DD",form:this.$form.createForm(this),labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},bind_number:"",room_diy_name:"",housesize:"",disabled:!0,dataList:"",authentication_field:{key:{value:""}},house_type_name:"",secondCity:"",is_secondCity:!1,user_label_data:{care_object:[{id:0,name:""}]},province_list:[{id:0,name:""}],city_list:[{id:0,name:""}],political_outlook:0,special_population:[],key_population:[],care_object:[],positionList:d,carList:c,positionColumns:p,carColumns:r,result:!1,post:{name:0,phone:"",id_card:"",ic_card:"",memo:""}}},props:{pigcmsId:{type:Number,default:0},usernum:{type:String,default:""}},created:function(){var e={pigcms_id:this.pigcmsId,usernum:this.usernum};this.getUserInfo(e)},methods:{getDate:function(e){return this.authentication_field[e]["value"]},moment:s.a,handleSubmit:function(){var e=this,t=[this.political_outlook];t=t.concat(this.special_population).concat(this.care_object).concat(this.key_population);var a={pigcms_id:this.pigcmsId,post:this.post,authentication_field:this.authentication_field,lebel_ids:t},i=!1;for(var o in this.authentication_field){var n=this.authentication_field[o];if(console.log("item",n),(1==n.is_must||"1"==n.is_must)&&(!n.value||""==n.value||"0"==n.value||0==n.value)){this.$message.error("【"+n.title+"】为必填项，请填写或选择！"),i=!0;break}}if(i)return!1;this.request(l["a"].editUserInfo,a).then((function(t){console.log(t),e.$notification.open({message:"修改成功",description:"业主信息修改成功."})}))},onDateChange:function(e,t,a){console.log("date",e),console.log("dateSting",t),this.authentication_field[a]["value"]=t},getUserInfo:function(e){var t=this;this.request(l["a"].getUserInfo,e).then((function(e){t.title="业主信息",t.bind_number=e.info.bind_number?e.info.bind_number:t.usernum,t.post={name:e.info.name,phone:e.info.phone,id_card:e.info.id_card,ic_card:e.info.ic_card,memo:e.info.memo},t.room_diy_name=e.info.address,t.housesize=e.info.housesize,t.house_type_name=e.info.house_type_name,t.dataList=e.dataList,t.authentication_field=e.info.authentication_field,t.user_label_data=e.user_label_data,t.positionList=e.position_list,t.carList=e.car_list,t.visible=!0,void 0!==t.authentication_field["native_place"]&&(t.getProvinceCity("province",0),t.getProvinceCity("city",t.authentication_field["native_place"]["province_idss"]),t.secondCity=t.authentication_field["native_place"]["city_name"]),t.political_outlook=t.getCheckedVlaue(t.user_label_data.political_outlook)[0],t.special_population=t.getCheckedVlaue(t.user_label_data.special_population),t.key_population=t.getCheckedVlaue(t.user_label_data.key_population),t.care_object=t.getCheckedVlaue(t.user_label_data.care_object)}))},handleChangeProvince:function(e){this.is_secondCity=!0,this.authentication_field["native_place"]["province_idss"]=e,this.getProvinceCity("city",e)},getProvinceCity:function(e,t){var a=this,i={type:e,id:t};this.request(l["a"].getProvinceCity,i).then((function(t){"province"===e?a.province_list=t:(a.city_list=t,0!==a.city_list.length&&a.is_secondCity&&(a.secondCity=a.city_list[0]["name"]))}))},getCheckedVlaue:function(e){var t=[];return e.map((function(e){e.is_checked&&t.push(e.id)})),t},handleChange:function(e,t){this.authentication_field["native_place"]["city_idss"]=e}}},_=u,m=(a("3983"),a("2877")),b=Object(m["a"])(_,i,o,!1,null,null,null);t["default"]=b.exports},b712:function(e,t,a){}}]);