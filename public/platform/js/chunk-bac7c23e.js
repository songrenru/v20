(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bac7c23e","chunk-6c34b30f","chunk-58e98b0a","chunk-139d3c44","chunk-49484038","chunk-1e332651","chunk-f8a496aa","chunk-1836bece","chunk-13c9c3fa","chunk-2d0b6a79","chunk-2d0b3786","chunk-2d0e4e03","chunk-2d0ac59f","chunk-2d0e1c2b","chunk-2d0db0b3","chunk-2d217e66","chunk-2d0e5d7d","chunk-2d2094f6","chunk-2d0b8eb0","chunk-2d0be0cc","chunk-2d0baa8f","chunk-2d2091d0","chunk-2d20ff14"],{"07ff":function(e,t,a){"use strict";a("d630")},"10af":function(e,t,a){"use strict";a.r(t);var i,s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container_box"},[i("a-collapse",{attrs:{accordion:""}},[i("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[i("p",[e._v(" 在收银台模块，可为收费对象绑定收费项目并且支持手动生成账单，在收款前，若有需要修改或作废的账单，也可进行费用修改及账单作废。"),i("br"),e._v(" 1、物业编号是从5位以后开始自动匹配；"),i("br"),e._v(" 2、手机号是从3位以后开始自动匹配；"),i("br"),e._v(" 3、车位号及车牌号是从2位以后开始自动匹配"),i("br"),e._v(" 4、选中房产或车场后，选择收费项、收费标准生成账单，创建成功后在列表展示"),i("br"),e._v(" 5、在列表对创建好的账单，进行手动生成账单操作。"),i("br"),e._v(" 6、手动生成账单后，在【应收账单】模块展示生成的待缴账单。"),i("br"),e._v(" 7、物业编号添加快速搜索功能，匹配规则为：①【楼栋名称】-【单元名称】-【楼层名称】-【房间名称】；②【楼栋名称】-【单元名称】-【房间名称】；③【楼栋名称】-【房间名称】"),i("br"),e._v(" 注：楼栋名称为“19栋”时，树形图楼栋名称为19栋；楼栋名称为“19”时，树形图楼栋名称为19（栋）。单元、楼层、房间原理同上，快速搜索时需要按照规则输入。"),i("br"),e._v(" 例：在导入/添加楼栋时，楼栋名称为“19栋”在搜索时，需要按照12栋-2单元-5层-503 表示12栋2单元5层房间名为503的房间；12栋-5单元-503 表示12栋5单元房间名为503的房间；12栋-503 表示12栋房间名为503的房间"),i("br"),e._v(" 例：在导入/添加楼栋时，楼栋名称为“19”在搜索时，需要按照12-2-5-503 表示12栋2单元5层房间名为503的房间；12-5-503 表示12栋5单元房间名为503的房间；12-503 表示12栋房间名为503的房间"),i("br"),e._v(" 8、由于扫码支付的账单支付时间不可控，所以扫码支付的账单不能自动打印，打印账单需要手动操作"),i("br")])])],1),i("div",{staticClass:"container_child_box"},[i("div",{staticClass:"left_box"},[i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("筛选条件：")]),i("a-select",{staticStyle:{width:"120px"},attrs:{"default-value":"1"},on:{change:e.screenChange}},[i("a-select-option",{attrs:{value:"1"}},[e._v(" 按房产搜索 ")]),i("a-select-option",{attrs:{value:"2"}},[e._v(" 按车场搜索 ")])],1),i("a-divider",{attrs:{type:"vertical"}}),i("a-button",{attrs:{type:"dashed",title:"当发现新增的房间信息或者车辆没有出现时候再点击，否则无需操作"},on:{click:e.clearCache}},[e._v(" 刷新缓存 ")])],1),1==e.isshow?i("div",{staticClass:"flex_text_box",staticStyle:{"flex-wrap":"wrap"}},[i("div",{staticClass:"text_1 margin_top_10"},[e._v("房产：")]),1==e.config_customization.life_tools?i("a-select",{staticClass:"margin_top_10",staticStyle:{width:"120px"},attrs:{"default-value":"4"},on:{change:e.houseChange}},[i("a-select-option",{attrs:{value:"4"}},[e._v(" 房间别名编号 ")]),i("a-select-option",{attrs:{value:"1"}},[e._v(" 物业编号 ")]),i("a-select-option",{attrs:{value:"2"}},[e._v(" 住户姓名 ")]),i("a-select-option",{attrs:{value:"3"}},[e._v(" 住户手机号 ")])],1):e._e(),0==e.config_customization.life_tools?i("a-select",{staticClass:"margin_top_10",staticStyle:{width:"120px"},attrs:{"default-value":"1"},on:{change:e.houseChange}},[i("a-select-option",{attrs:{value:"1"}},[e._v(" 物业编号 ")]),i("a-select-option",{attrs:{value:"2"}},[e._v(" 住户姓名 ")]),i("a-select-option",{attrs:{value:"3"}},[e._v(" 住户手机号 ")]),i("a-select-option",{attrs:{value:"4"}},[e._v(" 房间别名编号 ")])],1):e._e(),i("a-select",{staticClass:"input_style margin_left_8 margin_top_10",staticStyle:{width:"230px"},attrs:{"show-search":"",placeholder:"请输入","default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":null},on:{search:e.handleSearch,change:e.searchOptionChange,blur:e.handleSearchBlur,focus:e.handleSearchFocus},model:{value:e.search_keyword,callback:function(t){e.search_keyword=t},expression:"search_keyword"}},e._l(e.search_data,(function(t){return i("a-select-option",{key:e.getSearchOptionKey(t)},[e._v(" "+e._s(t.text)+" ")])})),1),i("a-cascader",{staticClass:"cascader_style margin_left_8 margin_top_10",attrs:{options:e.options,"load-data":e.loadDataFunc,placeholder:"请选择房间","change-on-select":""},on:{change:e.setVisionsFunc}}),i("a-button",{staticClass:"margin_left_8 margin_top_10",attrs:{type:"primary"},on:{click:e.submit_house}},[e._v(" 查询 ")])],1):e._e(),2==e.isshow?i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("车场：")]),i("a-select",{staticStyle:{width:"120px"},attrs:{"default-value":"lucy"},on:{change:e.carChange}},[i("a-select-option",{attrs:{value:"1"}},[e._v(" 车位号 ")]),i("a-select-option",{attrs:{value:"2"}},[e._v(" 车牌号 ")]),i("a-select-option",{attrs:{value:"3"}},[e._v(" 房间物业编号 ")]),i("a-select-option",{attrs:{value:"4"}},[e._v(" 车主姓名 ")]),i("a-select-option",{attrs:{value:"5"}},[e._v(" 车主手机号 ")])],1),i("a-select",{staticClass:"input_style margin_left_10",staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"请输入","default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":null},on:{search:e.handleSearch,blur:e.handleSearchBlur,focus:e.handleSearchFocus},model:{value:e.search_keyword,callback:function(t){e.search_keyword=t},expression:"search_keyword"}},e._l(e.search_data,(function(t){return i("a-select-option",{key:t.text},[e._v(" "+e._s(t.text)+" ")])})),1),i("a-button",{staticClass:"margin_left_10",attrs:{type:"primary"},on:{click:e.submit_car}},[e._v(" 查询 ")])],1):e._e(),i("a-tree",{staticClass:"draggable-tree",attrs:{defaultExpandedKeys:[],defaultExpandAll:!0,"show-line":!0,"tree-data":e.gData,selectedKeys:e.default_key,"auto-expand-parent":e.autoExpandParent},on:{select:e.select_key,expand:e.onExpand}},[i("img",{staticClass:"icon_size",attrs:{slot:"house",src:a("a908")},slot:"house"}),i("img",{staticClass:"icon_size",attrs:{slot:"single",src:a("b67a")},slot:"single"}),i("img",{staticClass:"icon_size",attrs:{slot:"layer",src:a("37c8")},slot:"layer"}),i("img",{staticClass:"icon_size",attrs:{slot:"floor",src:a("95e0")},slot:"floor"}),i("img",{staticClass:"icon_size",attrs:{slot:"room",src:a("3173")},slot:"room"}),i("img",{staticClass:"icon_size",attrs:{slot:"single_empty",src:a("a858")},slot:"single_empty"}),i("img",{staticClass:"icon_size",attrs:{slot:"layer_empty",src:a("2f35")},slot:"layer_empty"}),i("img",{staticClass:"icon_size",attrs:{slot:"floor_empty",src:a("c960")},slot:"floor_empty"})]),i("a-tree",{staticClass:"draggable-tree",attrs:{defaultExpandAll:!0,defaultExpandedKeys:[],"show-line":!0,"tree-data":e.gData_1,selectedKeys:e.default_key,"auto-expand-parent":e.autoExpandParent},on:{select:e.select_key,expand:e.onExpand},scopedSlots:e._u([{key:"edit_out",fn:function(t){return[i("span",{staticClass:"node-title",attrs:{id:"title-item"}},[e._v(e._s(t.title)+" ")]),i("div",[i("span",{staticClass:"icon-wrap"},[i("a-popconfirm",{staticClass:"ant-dropdown-link",staticStyle:{"margin-left":"10px"},attrs:{title:"确认删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(a){return e.delAlert(t.permission_id)}}},[i("a",[i("a-icon",{attrs:{type:"close"}})],1)])],1),i("span",{staticClass:"icon-wrap",staticStyle:{"margin-left":"10px"}},[i("a",{on:{click:function(a){return e.$refs.OrderModel.add(t.permission_id)}}},[i("a-icon",{attrs:{type:"form"}})],1)])])]}}])},[i("img",{staticClass:"icon_size",attrs:{slot:"car",src:a("91a6")},slot:"car"}),i("img",{staticClass:"icon_size",attrs:{slot:"garage",src:a("7c8a")},slot:"garage"}),i("img",{staticClass:"icon_size",attrs:{slot:"position",src:a("6dd3")},slot:"position"}),i("img",{staticClass:"icon_size",attrs:{slot:"temgarage",src:a("7c8a")},slot:"temgarage"}),i("img",{staticClass:"icon_size",attrs:{slot:"garage_empty",src:a("18bd")},slot:"garage_empty"}),i("img",{staticClass:"icon_size",attrs:{slot:"temgarage_empty",src:a("18bd")},slot:"temgarage_empty"})])],1),e.is_selected?i("div",{staticClass:"right_box"},[i("div",{staticClass:"top_box"},[i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("物业编号：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.user_info.usernum?e.user_info.usernum:"暂无"))])]),i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("业主：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.user_info.name?e.user_info.name:"暂无"))])]),i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("电话：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.user_info.phone?e.user_info.phone:"暂无"))])]),i("div",{staticClass:"flex_text_box"},[e.user_info.is_car_position?i("div",{staticClass:"text_1"},[e._v("车库号：")]):e._e(),e.user_info.is_houses_room?i("div",{staticClass:"text_1"},[e._v("房间号：")]):e._e(),i("div",{staticClass:"text_2"},[e._v(e._s(e.user_info.room?e.user_info.room:"暂无"))])]),e.user_info.is_houses_room?i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("房屋面积：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.user_info.housesize?e.user_info.housesize:"暂无"))])]):e._e(),e.user_info.is_car_position?i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("车场面积：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.user_info.position_area?e.user_info.position_area:"暂无"))])]):e._e()]),e.is_car?i("a-button",{staticClass:"margin_top_20",attrs:{type:"primary"},on:{click:function(t){return e.$refs.OrderModel.add()}}},[e._v(" 添加车辆 ")]):e._e(),i("a-button",{staticClass:"margin_left_10 margin_top_20",attrs:{type:"primary"},on:{click:e.showpopup}},[e._v(" 添加收费项 ")]),i("a-button",{staticClass:"margin_left_10 margin_top_20",attrs:{type:"primary"},on:{click:e.showpopup_collet}},[e._v(" 收款 ")]),i("a-button",{staticClass:"margin_left_10 margin_top_20",attrs:{type:"primary"},on:{click:function(t){return e.$refs.PrintModel.add(0,0,1)}}},[e._v(" 设置打印模板 ")]),e.is_pay?i("a-button",{staticClass:"margin_left_10 margin_top_20",attrs:{type:"primary"},on:{click:e.JumpOrder}},[e._v(" 已缴账单 ")]):e._e(),i("a-button",{staticClass:"margin_left_10 margin_top_20",attrs:{type:"primary"},on:{click:e.expressBill}},[e._v(" 快捷账单 ")]),e.children_position_type&&e.is_car?i("a-button",{staticClass:"margin_left_10 margin_top_20",attrs:{type:"primary"},on:{click:e.childrenPosition}},[e._v(" 子车位列表 ")]):e._e(),e.is_car?i("a-button",{staticClass:"margin_left_10 margin_top_20",attrs:{type:"primary"},on:{click:e.getCarList}},[e._v(" 车辆列表 ")]):e._e(),e.is_car?i("a-alert",{staticStyle:{margin:"10px 5px 0 5px"},attrs:{message:"",type:"info"}},[i("div",{attrs:{slot:"description"},slot:"description"},[i("div",[e._v("当前车位服务时间："+e._s(e.position_end_time))]),"D7"==e.park_sys_type?i("div",[e._v("对车位号进行缴费延长车位的到期时间时，会延长车位号所绑定的月租车到期时间，车位号绑定的临时车、储值车到期时间不会变更 ")]):e._e()])]):e._e(),i("div",{staticClass:"flex_text_box_1"},[i("div",{staticClass:"text_1"},[e._v("合计总欠费：")]),i("div",{staticClass:"text_1"},[e._v(e._s(e.total_money)+"元")])]),i("a-table",{attrs:{pagination:!1,"row-selection":e.rowSelection,rowKey:"order_id",columns:e.columns,"data-source":e.data,scroll:{x:1100}},scopedSlots:e._u([{key:"name",fn:function(t){return i("a",{},[e._v(e._s(t))])}},{key:"action",fn:function(t,a){return i("span",{},[i("a",{on:{click:function(t){return e.showpopup_detailsList(a)}}},[e._v("详情")]),1==a.show_action?i("a-divider",{attrs:{type:"vertical"}}):e._e(),1!=a.show_action||a.my_check_status&&0!=a.my_check_status?e._e():i("a",{on:{click:function(t){return e.showpopupe_revise(a,a.order_id)}}},[e._v("修改费用")]),3==a.my_check_status?i("a",{staticStyle:{color:"#808080"}},[e._v("已审核")]):e._e(),2==a.my_check_status?i("a",{on:{click:function(t){return e.needCheckOrder(a)}}},[e._v("需审核")]):e._e(),1==a.my_check_status?i("a",{staticStyle:{color:"#808080"}},[e._v("审核中")]):e._e(),i("a-divider",{attrs:{type:"vertical"}}),a.my_check_status&&0!=a.my_check_status?e._e():i("span",[1==a.show_action?i("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return e.invalidShow(0,a,a.order_id)}}},[e._v("作废账单")]):i("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return e.invalidShow(1,a)}}},[e._v("作废账单")])])],1)}}],null,!1,3356824387)})],1):i("div",{staticClass:"right_box_a"},[e._m(0),i("div",{staticClass:"text_1"},[e._v("请选择收款对象")])])]),i("a-modal",{attrs:{width:1200,title:"添加",visible:e.visible,maskClosable:!1,"confirm-loading":e.confirmLoading,footer:null},on:{ok:e.handleOk,cancel:e.handleCancel}},[i("a-button",{staticClass:"margin_top_10 margin_bottom_10",attrs:{type:"primary"},on:{click:e.showpopup_price}},[e._v(" 添加收费项 ")]),i("a-table",{attrs:{columns:e.columns_1,"data-source":e.data_1,pagination:!1},scopedSlots:e._u([{key:"name",fn:function(t){return i("a",{},[e._v(e._s(t))])}},{key:"action",fn:function(t,a){return i("span",{},[1!=a.bill_type&&1!=a.type||0==a.type||1!=a.is_valid?e._e():i("a",{on:{click:function(t){return e.manual_call(a.id,a.type,a.charge_rule_id,a.project_id,a.order_add_type,a.is_prepaid)}}},[e._v("手动生成账单")]),1!=a.bill_type&&1!=a.type||0==a.type||1!=a.is_valid?e._e():i("a-divider",{attrs:{type:"vertical"}}),i("a",{on:{click:function(t){return e.prepaid_order(a.id,a.charge_rule_id,a.project_id)}}},[e._v(e._s(1==a.is_prepaid&&1!=a.type&&0!=a.type&&1==a.is_valid?"生成预交账单":""))]),1==a.is_prepaid&&1!=a.type&&0!=a.type&&1==a.is_valid?i("a-divider",{attrs:{type:"vertical"}}):e._e(),i("a-popconfirm",{attrs:{title:"确定移除该收费项?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(t){return e.delChargeStandardBind(a.id)}}},[i("a",{staticClass:"ant-dropdown-link"},[e._v("移除")])])],1)}},{key:"status",fn:function(t,a){return i("span",{},["生效中"==a.is_valid_txt?i("span",{staticStyle:{color:"#1890ff"}},[e._v("生效中")]):e._e(),"已过期"==a.is_valid_txt?i("span",[e._v("已过期")]):e._e(),"未生效"==a.is_valid_txt?i("span",[e._v("未生效")]):e._e()])}}])})],1),i("a-modal",{attrs:{width:700,title:"添加收费项",destroyOnClose:!0,visible:e.visible_add,maskClosable:!1,"confirm-loading":e.confirmLoading_add},on:{ok:e.handleProjectOk,cancel:e.handleCancelAdd}},[i("div",{staticClass:"modal_box"},[i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("收费项：")]),i("a-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择收费项"},on:{change:e.projectChange}},e._l(e.project_list,(function(t){return i("a-select-option",{attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("收费标准：")]),i("a-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择消费标准"},on:{change:e.ruleChange},model:{value:e.rule_id,callback:function(t){e.rule_id=t},expression:"rule_id"}},e._l(e.rule_list,(function(t){return i("a-select-option",{attrs:{value:t.id}},[e._v(" "+e._s(t.charge_name)+" ")])})),1)],1),e.is_show_order_time?i("div",{staticClass:"flex_text_box margin_top_10",staticStyle:{width:"500px"}},[i("div",{staticClass:"text_1"},[e._v("账单开始生成时间：")]),i("a-date-picker",{attrs:{mode:e.date_status,format:e.dateFormat,placeholder:"请选择时间",open:e.isOpen},on:{panelChange:e.selectYear,change:e.onChangeTime,openChange:function(t){return e.onOpenChange(t,"isOpen")}},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}),i("span",{staticStyle:{"font-size":"4px"}},[e._v("不填默认下一个缴费日")])],1):e._e(),e.is_cycle?i("div",{staticClass:"flex_text_box margin_top_10",staticStyle:{width:"500px"}},[i("div",{staticClass:"text_1"},[e._v("收费周期：")]),i("a-input",{staticClass:"input_style margin_left_10",staticStyle:{width:"200px"},attrs:{placeholder:"请输入收费周期时长"},model:{value:e.cycle,callback:function(t){e.cycle=t},expression:"cycle"}}),i("span",{staticStyle:{"font-size":"4px"}},[e._v(e._s(e.cycle_set)+"（不填默认1）")])],1):e._e(),e.is_show_area?i("div",{staticClass:"flex_text_box margin_top_10",staticStyle:{width:"500px"}},[i("div",{staticClass:"text_1"},[e._v(e._s(e.unit_gage)+"：")]),i("a-input",{staticClass:"input_style margin_left_10",staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.area_measure,callback:function(t){e.area_measure=t},expression:"area_measure"}}),i("span",{staticStyle:{"font-size":"4px"}},[e._v("收费方式选择单价*计量方式时自定义计量单位的需要添加对应数值")])],1):e._e()]),e.ruleDetailShow?i("div",{staticClass:"rule_detail"},[i("a-descriptions",{attrs:{title:"基本信息"}},e._l(e.ruleDetail,(function(t,a){return t.is_show?i("a-descriptions-item",{key:a,attrs:{label:t.title}},[e._v(" "+e._s(t.value)+" ")]):e._e()})),1),i("a-descriptions",{attrs:{title:"滞纳金设置"}},e._l(e.ruleLateDetail,(function(t,a){return i("a-descriptions-item",{key:a,attrs:{label:t.title,span:"2"}},[e._v(" "+e._s(t.value)+" ")])})),1)],1):e._e()]),i("a-modal",{attrs:{width:500,title:"修改费用",visible:e.visible_revise,maskClosable:!1,"confirm-loading":e.confirmLoading},on:{ok:e.confirm_revise,cancel:e.handleCancel}},[i("div",{staticClass:"modal_box"},[i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("应收费用：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.record.total_money?e.record.total_money:0))])]),e.record.modify_time>0?i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("上次修改费用：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.record.modify_money?e.record.modify_money:0))])]):e._e(),i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("修改后费用：")]),i("a-input",{staticClass:"input_style margin_left_10",staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.modify_money,callback:function(t){e.modify_money=t},expression:"modify_money"}})],1),i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("修改原因：")]),i("a-textarea",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入修改原因","auto-size":""},model:{value:e.modify_reason,callback:function(t){e.modify_reason=t},expression:"modify_reason"}})],1)])]),i("a-modal",{attrs:{width:500,title:"收款",visible:e.visible_collet,maskClosable:!1,"confirm-loading":e.confirmLoading,footer:null},on:{cancel:e.handleCancel}},[i("div",{staticClass:"modal_box"},[i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("收款方式：")]),i("a-select",{staticStyle:{width:"120px"},attrs:{"default-value":"1"},on:{change:e.payChange},model:{value:e.pay_type,callback:function(t){e.pay_type=t},expression:"pay_type"}},[i("a-select-option",{attrs:{value:"1"}},[e._v(" 扫码支付 ")]),i("a-select-option",{attrs:{value:"2"}},[e._v(" 线下支付 ")]),1==e.show_scrcu?i("a-select-option",{attrs:{value:"3"}},[e._v(" 扫码枪收款 ")]):e._e()],1)],1),2==e.pay_type?i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("线下支付方式：")]),i("div",{staticClass:"text_2"},[i("a-select",{staticStyle:{width:"120px"},attrs:{"default-value":"0",placeholder:"请选择"},on:{change:e.payTypeChange}},[i("a-select-option",{key:"0"},[e._v(" 请选择 ")]),e._l(e.offline_pay_type_arr,(function(t){return i("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])}))],2)],1)]):e._e(),i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("应收费用：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.all_money))])]),i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("合计实收费用：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.pay_money))])]),i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("备注：")]),i("a-textarea",{staticStyle:{width:"200px",height:"80px"},attrs:{placeholder:"请填写备注","auto-size":""},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),1==e.pay_type&&""!=e.qrcode?i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("微信扫码支付：")]),i("div",{staticClass:"text_2"},[i("viewer",{attrs:{images:[e.qrcode]}},[i("img",{staticStyle:{height:"100px",width:"100px"},attrs:{src:e.qrcode,title:"点击放大查看"}})])],1)]):e._e(),1==e.pay_type?i("div",{staticClass:"flex_text_box margin_top_10"},[i("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.qrcorde()}}},[e._v(" 生成收款码 ")])],1):e._e(),3==e.pay_type?i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("付款码号：")]),i("a-input",{staticClass:"input_style margin_left_10",attrs:{placeholder:"扫微信或支付宝付款码"},on:{input:function(t){return e.authCodePay(3)}},model:{value:e.auth_code,callback:function(t){e.auth_code=t},expression:"auth_code"}})],1):e._e()]),e.footer?i("div",{staticClass:"flex_text_box margin_top_10 fixed_btn_box"},[i("a-button",{staticClass:"btn_class",on:{click:e.handleCancel}},[e._v(" 取消 ")]),i("a-button",{staticClass:"btn_class confirm_btn",on:{click:e.handleOk}},[e._v(" 确定 ")])],1):e._e()]),i("a-modal",{attrs:{width:500,title:"生成预缴账单",destroyOnClose:!0,visible:e.visible_prepaid,maskClosable:!1,"confirm-loading":e.confirmLoading},on:{ok:e.handlePrepaidOk,cancel:e.handleCancelPrepaid}},[i("div",{staticClass:"modal_box"},[i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("预缴周期：")]),i("a-select",{staticStyle:{width:"160px"},attrs:{"default-value":e.prepaid_default},on:{change:e.prepaidChange}},[i("a-select-option",{key:"0"},[e._v(" 请选择预缴周期 ")]),e._l(e.prepaid_list,(function(t){return i("a-select-option",{key:t.id},[e._v(" "+e._s(t.cycle)+" ")])}))],2),e._v("     "),i("span",[e._v(e._s(e.diy_content))])],1),i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("预缴费用：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.prepaid_money))])])])]),i("a-modal",{attrs:{width:500,title:"手动生成账单",destroyOnClose:!0,visible:e.visible_manual,maskClosable:!1,"confirm-loading":e.confirmLoading},on:{ok:e.handleManualOk,cancel:e.handleCancelManual}},[i("div",{staticClass:"modal_box"},[i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("当前服务时间：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.service_end_time))])]),e.is_in_service?i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("服务期生效时间：")]),i("div",{staticClass:"text_2"},[i("a-date-picker",{attrs:{mode:e.date_status,format:e.dateFormat,open:e.isOpen},on:{change:e.changeTime,panelChange:e.onDateChange,openChange:function(t){return e.onOpenChange(t,"isOpen")}},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1)]):e._e(),1==e.is_show_prepaid?i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("是否需要预缴：")]),i("div",{staticClass:"text_2"},[i("a-radio-group",{model:{value:e.is_prepaid,callback:function(t){e.is_prepaid=t},expression:"is_prepaid"}},[i("a-radio",{attrs:{value:1}},[e._v(" 是 ")]),i("a-radio",{attrs:{value:2}},[e._v(" 否 ")])],1)],1)]):e._e(),1==e.is_prepaid?i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("预缴周期：")]),i("a-select",{staticStyle:{width:"160px"},attrs:{"default-value":e.prepaid_default},on:{change:e.prepaidChange}},[i("a-select-option",{key:"0"},[e._v(" 请选择预缴周期 ")]),e._l(e.prepaid_list,(function(t){return i("a-select-option",{key:t.id},[e._v(" "+e._s(t.cycle)+" ")])}))],2),e._v("     "),i("span",[e._v(e._s(e.diy_content))])],1):e._e(),1==e.is_prepaid?i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("应收费用：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.prepaid_money))])]):e._e()])]),i("a-modal",{attrs:{width:500,title:"作废账单",visible:e.visible_invalid,maskClosable:!1,"confirm-loading":e.confirmLoading},on:{ok:e.confirm_invalid,cancel:e.handleCancel}},[i("div",{staticClass:"modal_box"},[i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("作废原因：")]),i("a-textarea",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入","auto-size":""},model:{value:e.invalidReasons,callback:function(t){e.invalidReasons=t},expression:"invalidReasons"}})],1)])]),i("a-modal",{staticStyle:{"z-index":"999"},attrs:{width:1400,title:"收费项目详情",visible:e.visible_detailsList,maskClosable:!1,"confirm-loading":e.confirmLoading,footer:null},on:{cancel:e.handleCancelList}},[i("a-collapse",{attrs:{accordion:""}},[i("a-collapse-panel",{attrs:{header:"操作说明"}},[i("p",[e._v(" 表头名词解释"),i("br"),e._v(" 1、计费模式：表示是标准的计费模式，分 固定费用 和 单价*计量单位 两种；"),i("br"),e._v(" 2、周期：表示是 账单生成周期设置 ，有按年、按月、按日 三种周期；"),i("br"),e._v(" 3、欠费模式：表示是账单欠费模式"),i("br"),e._v(" 4、生成模式：表示是生成账单模式"),i("br")])])],1),i("a-table",{attrs:{pagination:!1,columns:e.columns_2,"data-source":e.data_detail},scopedSlots:e._u([{key:"name",fn:function(t){return i("a",{},[e._v(e._s(t))])}},{key:"action",fn:function(t,a){return i("span",{},[i("a",{on:{click:function(t){return e.showpopup_details(a)}}},[e._v("详情")]),i("a-divider",{attrs:{type:"vertical"}}),a.my_check_status&&0!=a.my_check_status?e._e():i("a",{on:{click:function(t){return e.showpopupe_revise(a,a.order_id)}}},[e._v("修改费用")]),i("a-divider",{attrs:{type:"vertical"}}),a.my_check_status&&0!=a.my_check_status?e._e():i("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return e.invalidShow(e.type=2,a,a.order_id)}}},[e._v("作废账单")]),3==a.my_check_status?i("a",{staticStyle:{color:"#808080"}},[e._v("已审核")]):e._e()],1)}}])})],1),i("a-modal",{staticStyle:{"z-index":"1000"},attrs:{width:1e3,title:"详情",visible:e.visible_details,maskClosable:!1,"confirm-loading":e.confirmLoading,footer:null},on:{ok:e.handleOk,cancel:e.handleCancel}},[0==e.currentIndex?i("div",[i("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(t){return e.changeXTab(0)}}},[e._v("订单基本信息")]),e.show_check_detail?i("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(t){return e.changeXTab(1)}}},[e._v("作废审核记录")]):e._e()],1):i("div",[i("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"default"},on:{click:function(t){return e.changeXTab(0)}}},[e._v("订单基本信息")]),e.show_check_detail?i("a-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(t){return e.changeXTab(1)}}},[e._v("作废审核记录")]):e._e()],1),0==e.currentIndex?i("div",{staticClass:"modal_box_1"},[i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("收费标准名称：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.charge_name))])]),i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("收费项目：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.project_name))])]),i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("应收费用：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.total_money)+"元")])]),i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("实收费用：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.modify_money)+"元")])]),i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("预计计费开始时间：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.service_start_time))])]),i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("预计计费结束时间：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.service_end_time))])]),e.details_data.now_ammeter-e.details_data.last_ammeter>0?i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("用量：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.now_ammeter-e.details_data.last_ammeter))])]):e._e(),i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("滞纳天数：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.late_payment_day))])]),i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("滞纳金收取比例（每天）：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.late_fee_rate))])]),i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("滞纳金费用：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.late_payment_money))])]),i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("收费标准生效时间：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.charge_valid_time_txt))])]),1==e.details_data.is_prepare?i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("预缴周期：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.service_month_num?e.details_data.service_month_num:"无"))])]):i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("预缴周期：")]),i("div",{staticClass:"text_2"},[e._v("无")])]),i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("预缴优惠：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.diy_content?e.details_data.diy_content:"无"))])]),i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("计费模式：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.fees_type_txt?e.details_data.fees_type_txt:"无"))])]),i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("账单生成周期设置：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.bill_create_set_txt?e.details_data.bill_create_set_txt:"无"))])]),i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("账单欠费模式：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.bill_arrears_set_txt?e.details_data.bill_arrears_set_txt:"无"))])]),i("div",{staticClass:"flex_text_box margin_top_10"},[i("div",{staticClass:"text_1"},[e._v("生成账单模式：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.bill_type_txt?e.details_data.bill_type_txt:"无"))])]),1==e.details_data.is_prepare?i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("收费周期：")]),i("div",{staticClass:"text_2"},[e._v("无")])]):i("div",{staticClass:"flex_text_box"},[i("div",{staticClass:"text_1"},[e._v("收费周期：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.service_month_num?e.details_data.service_month_num:"无"))])]),e._l(e.field_list,(function(t,a){return e.field_list?i("div",{key:a,staticStyle:{width:"50%"}},[i("div",{staticClass:"flex_text_box "},[i("div",{staticClass:"text_1"},[e._v(e._s(t.key))]),i("div",{staticClass:"text_2"},[e._v(e._s(t.value))])])]):e._e()})),i("div",{staticClass:"flex_text_box "},[i("div",{staticClass:"text_1"},[e._v("账单生成时间：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.add_time_txt))])]),i("div",{staticClass:"flex_text_box "},[i("div",{staticClass:"text_1"},[e._v("合计欠费：")]),i("div",{staticClass:"text_2"},[e._v(e._s(e.details_data.all_fee)+"元")])])],2):e._e(),1==e.currentIndex?i("div",{staticClass:"order_apply_list",staticStyle:{margin:"30px 0px 20px 35px"}},[i("div",[i("p",[i("strong",[e._v("申请详情")])]),i("p",[i("strong",[e._v("申请人：")]),e._v(" "+e._s(e.apply_check_info.apply_name))]),i("p",[i("strong",[e._v("申请时间：")]),e._v(" "+e._s(e.apply_check_info.add_time_str))]),i("p",[i("strong",[e._v("作废原因：")]),e._v(" "+e._s(e.apply_check_info.apply_reason))])]),i("a-divider",{attrs:{type:"horizontal"}}),i("a-timeline",e._l(e.dataCheckDetail,(function(t,a){return i("a-timeline-item",{attrs:{color:t.color_v}},[i("p",[i("strong",[e._v("审批人：")]),e._v(" "+e._s(t.pname))]),i("p",[i("strong",[e._v("审核状态：")]),e._v(" "+e._s(t.status_str))]),i("p",[i("strong",[e._v("审核时间：")]),e._v(" "+e._s(t.apply_time_str))]),i("p",[i("strong",[e._v("审核说明：")]),e._v(" "+e._s(t.bak))])])})),1)],1):e._e()]),i("a-modal",{attrs:{title:"作废审核",width:700,visible:e.checkVisible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.checkHandleSubmit,cancel:e.checkHandleCancel}},[i("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[i("a-form",[i("a-form-item",{attrs:{label:"审核状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol,required:!0}},[i("a-col",{attrs:{span:20}},[i("a-radio-group",{attrs:{name:"radioGroup","default-value":1},model:{value:e.check_post.status,callback:function(t){e.$set(e.check_post,"status",t)},expression:"check_post.status"}},[i("a-radio",{attrs:{value:1,name:"status"}},[e._v(" 审核通过 ")]),i("a-radio",{attrs:{value:2,name:"status"}},[e._v(" 审核不通过 ")])],1)],1),i("a-col",{attrs:{span:6}})],1),i("a-form-item",{attrs:{label:"审核说明",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[i("a-col",{attrs:{span:20}},[i("a-textarea",{ref:"textareax",staticStyle:{width:"250px",height:"120px"},attrs:{placeholder:"请输入审核说明"},model:{value:e.check_post.bak,callback:function(t){e.$set(e.check_post,"bak",t)},expression:"check_post.bak"}})],1),i("a-col",{attrs:{span:6}})],1)],1)],1),i("div",{staticClass:"rule_detail",staticStyle:{"margin-top":"10px"}},[i("a-descriptions",{attrs:{title:"申请作废信息",column:4}},e._l(e.retrunDetail,(function(t,a){return i("a-descriptions-item",{attrs:{span:2,label:t.title}},[e._v(" "+e._s(t.value)+" ")])})),1)],1)],1),i("add-car-info",{ref:"OrderModel",on:{ok:e.reload}}),i("express-model",{ref:"ExpressModel",on:{ok:e.reload}}),i("get-print-template",{ref:"PrintModel",on:{ok:e.printBut}}),i("print-order",{ref:"PrintOrderModel"}),i("PayableOrderList",{ref:"PayableOrderModel"}),i("ChildrenPosition",{ref:"ChildrenPositionModel"}),i("CarList",{ref:"CarListModel"})],1)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("img",{staticClass:"img_1",attrs:{src:a("7fae"),alt:""}})])}],o=a("2909"),r=a("1da1"),l=(a("7d24"),a("dfae")),c=(a("96cf"),a("99af"),a("d3b7"),a("b0c0"),a("ac1f"),a("1276"),a("5319"),a("d81d"),a("841c"),a("7db0"),a("caad"),a("a745")),d=a("a0e0"),_=a("ec89"),u=a("ce95"),p=a("f7e3"),h=a("5313"),m=a("c1df"),g=a.n(m),f=a("c817"),v=a("acea"),y=(a("0808"),a("6944")),x=a.n(y),C=a("8bbf"),b=a.n(C),A=a("499a");b.a.use(x.a);var w=[],k=[],L=[{title:"收费项目",dataIndex:"charge_name",width:120,fixed:"left"},{title:"收费模式",dataIndex:"type_txt",width:120},{title:"实收费用",dataIndex:"modify_money",width:120},{title:"滞纳总天数",dataIndex:"late_payment_day",width:120},{title:"滞纳金总费用",dataIndex:"late_payment_money",width:120},{title:"合计欠费",dataIndex:"pay_money",width:120},{title:"审核状态",dataIndex:"check_status_str",key:"check_status_str",width:120},{title:"操作",fixed:"right",key:"operation",dataIndex:"action",scopedSlots:{customRender:"action"}}],S=[{title:"收费标准名称",dataIndex:"charge_name"},{title:"所属收费项目",dataIndex:"project_name"},{title:"收费标准生效",dataIndex:"charge_valid_time_txt"},{title:"账单生成周期",dataIndex:"order_add_type_txt"},{title:"未入住折扣率",dataIndex:"not_house_rate_txt"},{title:"计费模式",dataIndex:"fees_type_txt"},{title:"状态",dataIndex:"is_valid_txt",scopedSlots:{customRender:"status"}},{title:"账单生成周期设置",dataIndex:"bill_create_set_txt"},{title:"账单欠费模式",dataIndex:"bill_arrears_set_txt"},{title:"生成账单模式",dataIndex:"bill_type_txt"},{title:"操作",dataIndex:"action",width:"280px",scopedSlots:{customRender:"action"}}],E=[{title:"标准名称",dataIndex:"charge_name"},{title:"应收费用",dataIndex:"total_money"},{title:"滞纳天数",dataIndex:"late_payment_day"},{title:"滞纳金",dataIndex:"late_payment_money"},{title:"标准生效",dataIndex:"charge_valid_time_txt"},{title:"预计计费开始时间",dataIndex:"service_start_time_txt"},{title:"预计计费结束时间",dataIndex:"service_end_time_txt"},{title:"账单生成时间",dataIndex:"add_time_txt"},{title:"未入住折扣率",dataIndex:"not_house_rate"},{title:"计费模式",dataIndex:"fees_type"},{title:"周期",dataIndex:"bill_create_set"},{title:"欠费模式",dataIndex:"bill_arrears_set"},{title:"生成模式",dataIndex:"bill_type"},{title:"合计欠费",dataIndex:"pay_money"},{title:"操作",dataIndex:"action",width:"210px",scopedSlots:{customRender:"action"}}],I=[],D=[],R=[],P={name:"OrderList",components:{ExpressModel:A["default"],TagSelectOption:_["a"],GetPrintTemplate:u["default"],PrintOrder:p["default"],AddCarInfo:c["default"],CarList:f["default"],ChildrenPosition:v["default"],"a-collapse":l["a"],"a-collapse-panel":l["a"].Panel,PayableOrderList:h["default"]},data:function(){return{moment:g.a,children_position_type:!1,park_sys_type:"",is_selected:!1,showImg:!1,imgSrc:"",options:[],isshow:1,gData:w,gData_1:k,data:I,labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},columns:L,currentIndex:0,dataCheckDetail:[],show_check_detail:!1,data_1:D,columns_1:S,data_2:R,columns_2:E,remark:"",visible:!1,is_show_tree:!1,expanded_keys:[],autoExpandParent:!0,data_detail:[],visible_revise:!1,visible_collet:!1,visible_invalid:!1,visible_detailsList:!1,visible_details:!1,visible_add:!1,visible_prepaid:!1,visible_manual:!1,checkVisible:!1,check_order_record:{},retrunDetail:[],is_show_prepaid:2,confirmLoading_add:!1,confirmLoading:!1,select_type:"1",option_type:"1",search_keyword:"",single_id:"",floor_id:"",layer_id:"",room_id:"",selectedOptions:[],user_info:{},default_key:[],total_money:0,change_price:"",invalidReasons:"",record_data:{},record_details_data:{},details_data:{},field_list:[],modify_money:"",modify_reason:"",project_list:[],rule_list:[],is_show_order_time:!1,is_show_area:!1,unit_gage:"",offline_pay_type_arr:[],offline_pay_type:0,is_disabled:!1,isOpen:!1,dateValue:null,is_car:!1,date_status:"date",dateFormat:"YYYY-MM-DD",project_id:"",rule_id:"请选择消费标准",area_measure:"",selectedRows:[],all_money:0,pay_money:0,prepaid_id:0,prepaid_list:[],prepaid_money:0,diy_content:"",prepaid_project_id:0,is_prepaid:2,service_end_time:"",is_in_service:0,service_start_time:"",charge_standard_bind_id:"",valid_time:1,prepaid_default:"0",pay_type:"1",record:[],qrcode:"",order_id:0,position_end_time:"",auth_code:"",search_data:[],house_first_expanded:1,car_first_expanded:1,footer:!0,ruleDetailShow:!1,ruleDetail:[],ruleLateDetail:[],show_scrcu:0,check_post:{order_id:0,xtype:"order_discard",bak:"",status:1},apply_check_info:{},is_pay:!0,is_cycle:0,cycle_set:"",cycle:"",config_customization:{life_tools:-1}}},mounted:function(){i=this,i.getConfigCustomization(),i.getHouseTissueNav(),i.getCarTissueNav(),i.getSingleListByVillage()},computed:{rowSelection:function(){return{onChange:function(e,t){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",t),i.selectedRows=t},getCheckboxProps:function(e){return{props:{disabled:"Disabled User"===e.name,name:e.name}}}}}},methods:{expressBill:function(){return""==i.default_key||i.default_key[0].split("|")&&"room"!=i.default_key[0].split("|")[2]&&"position"!=i.default_key[0].split("|")[2]?(this.$message.warning("请选择房间或车位"),!1):(console.log("room_id_key",this.default_key),void this.$refs.ExpressModel.add(this.default_key[0]))},onExpand:function(e,t){if(console.log("onExpand",e),t.expanded&&"0|房产|house"==e["0"]){var a=e;if("0|房产|house"==t.node.eventKey&&1==i.house_first_expanded){if(i.house_first_expanded=0,i.car_first_expanded=1,1==i.gData[0].children.length&&(a.push(i.gData[0].children[0].key),1==i.gData[0].children[0].children.length&&(a.push(i.gData[0].children[0].children[0].key),1==i.gData[0].children[0].children[0].children.length&&(a.push(i.gData[0].children[0].children[0].children[0].key),1==i.gData[0].children[0].children[0].children[0].children.length)))){var s=[];s.push(i.gData[0].children[0].children[0].children[0].children[0].key),i.select_key(s)}}else if(t.node.eventKey.indexOf("|single")>0)for(var n in console.log("single",t.node.eventKey),i.gData[0].children){var o=i.gData[0].children[n];if(o.key==t.node.eventKey){if(1==o.children.length&&(a.push(o.children[0].key),1==o.children[0].children.length&&(a.push(o.children[0].children[0].key),1==o.children[0].children[0].children.length))){var r=[];r.push(o.children[0].children[0].children[0].key),i.select_key(r)}break}}else if(t.node.eventKey.indexOf("|floor")>0)for(var l in i.gData[0].children){var c=i.gData[0].children[l];for(var d in c.children){var _=c.children[d];if(_.key==t.node.eventKey){if(1==_.children.length&&(a.push(_.children[0].key),1==_.children[0].children.length)){var u=[];u.push(_.children[0].children[0].key),i.select_key(u)}break}}}i.expanded_keys=a,console.log("expandedKeysArr",a)}else if(t.expanded&&"0|车场|car"==t.node.eventKey&&1==i.car_first_expanded){i.car_first_expanded=0,i.house_first_expanded=1;var p=e;if(2==i.gData_1[0].children.length&&(p.push(i.gData_1[0].children[0].key),1==i.gData_1[0].children[0].children.length)){var h=[];h.push(i.gData_1[0].children[0].children[0].key),i.select_key(h)}i.expanded_keys=p}else i.expanded_keys=e},disabledDate:function(e){return e&&e<g()().endOf("day")},reload:function(){i.getCarTissueNav(),i.getOrderList(i.default_key[0]),console.log("sdfsfsdfsdfdsfsdf")},delAlert:function(e){i.request(d["a"].delPosition,{position_id:e}).then((function(e){i.$message.success("删除成功"),i.getCarTissueNav()}))},qrcorde:function(){i.request(d["a"].goPay,{pay_type:1,order_list:i.selectedRows}).then((function(e){1==e.error_code&&(i.qrcode=e.ticket)}))},changeXTab:function(e){this.currentIndex=e,0==this.currentIndex||this.getCheckauthDetail()},getCheckauthDetail:function(){var e=this;this.loading=!0,this.request(d["a"].getCheckauthDetail,{order_id:i.record_data.order_id,check_apply_id:i.record_data.check_apply_id,xtype:"order_discard",page:1}).then((function(t){e.dataCheckDetail=t.list,e.apply_check_info=t.apply_info,e.loading=!1}))},needCheckOrder:function(e){this.checkVisible=!0,this.check_order_record=e;var t=[];t.push({title:"申请时间",value:e.order_apply_info.opt_time_str}),t.push({title:"作废账单金额",value:e.order_apply_info.total_money+"元"}),t.push({title:"作废原因",value:e.order_apply_info.discard_reason}),this.retrunDetail=t},checkHandleCancel:function(){this.checkVisible=!1,this.currentIndex=0,this.check_order_record={},this.retrunDetail=[]},checkHandleSubmit:function(){this.check_post.order_id=this.check_order_record.order_id;var e="作废审核确认",t="您确认审核 通过 作废申请吗？";2==this.check_post.status&&(t="您确认审核 不通过 作废申请吗？"),this.$confirm({title:e,content:t,onOk:function(){i.request(d["a"].verifyCheckauthApply,i.check_post).then((function(e){console.log("res",e),i.$message.success("操作成功"),i.checkVisible=!1,i.confirmLoading=!1,i.getPayOrderList(i.check_order_record,i.default_key[0]),i.getOrderList(i.default_key[0])}))},onCancel:function(){}})},onDateChange:function(e,t){console.log("date",e),console.log("dateString",t),this.service_start_time=e,this.dateValue=e,this.isOpen=!1,console.log(this.service_start_time)},changeTime:function(e,t){console.log("date_1",e,t),this.service_start_time=t},handlePrepaidOk:function(){if(i.prepaid_id<=0)return i.$message.error("请选择预缴周期"),!1;console.log("prepaid_id",i.prepaid_id),console.log("prepaid_project_id",i.prepaid_project_id),i.request(d["a"].prepaidCall,{prepaid_id:i.prepaid_id,project_id:i.prepaid_project_id,key:i.default_key[0]}).then((function(e){i.$message.success(e.msg),1==e.status&&i.checkPrint(2,e.param)})),i.visible_prepaid=!1},handleManualOk:function(){return 1==i.is_in_service&&""==i.service_start_time?(i.$message.error("请选择服务期生效时间"),!1):1==i.is_prepaid&&0==i.prepaid_id?(i.$message.error("请选择预缴周期"),!1):void i.request(d["a"].manualCall,{charge_standard_bind_id:i.charge_standard_bind_id,service_start_time:i.service_start_time}).then((function(e){i.$message.success(e.msg),1==i.is_prepaid&&i.request(d["a"].prepaidCall,{prepaid_id:i.prepaid_id,project_id:i.project_id,key:i.default_key[0]}).then((function(e){i.$message.success(e.msg),i.visible_manual=!1,1==e.status&&i.checkPrint(2,e.param)})),i.visible_manual=!1}))},prepaidChange:function(e){e>0?(i.prepaid_id=e,i.request(d["a"].getPrepaidDetail,{prepaid_id:e,key:i.default_key[0]}).then((function(e){console.log("getPrepaidDetail",e),i.prepaid_money=e.prepaid_money,i.diy_content=e.diy_content}))):(i.prepaid_id=e,i.prepaid_money=0,i.diy_content="")},prepaid_order:function(e,t,a){i.service_start_time="",i.prepaid_default="0",i.prepaid_money=0,i.visible_prepaid=!0,i.prepaid_project_id=a,i.get_prepaid(t),i.diy_content=""},get_prepaid:function(e){i.request(d["a"].getPrepaid,{charge_rule_id:e}).then((function(e){console.log("get_prepaid",e),i.prepaid_list=e}))},manual_call:function(e,t,a,s){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;i.is_prepaid=n,i.is_show_prepaid=n,i.service_start_time="",i.date_status="date",i.dateFormat="YYYY-MM-DD",i.prepaid_default="0",i.prepaid_money=0,i.service_end_time=0,i.project_id=s,i.charge_standard_bind_id=e,i.request(d["a"].getProjectServiceTime,{project_id:s,key:i.default_key[0]}).then((function(s){console.log("getProjectServiceTime",s),i.is_in_service=s.is_expire,1==s.service_end_time?i.service_end_time="":i.service_end_time=s.service_end_time,console.log(t,i.is_in_service,n),1!=t&&0!=i.is_in_service||2!=n?(i.get_prepaid(a),i.visible_manual=!0):i.$confirm({title:"提示?",content:"您确定生成欠费账单吗？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){i.request(d["a"].manualCall,{charge_standard_bind_id:e,service_start_time:i.service_start_time}).then((function(e){console.log("+++++++",e),e&&(i.$message.success(e.msg),i.getOrderList(i.default_key[0]),1==e.status&&i.checkPrint(2,e.param))}))},onCancel:function(){return!1}})}))},handleProjectOk:function(){var e=this,t="";if(i.dateValue){var a=new Date(i.dateValue);t=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}if("请选择消费标准"===i.rule_id||""===i.rule_id)return this.$message.error("请选择消费标准"),!1;i.request(d["a"].bindRule,{project_id:i.project_id,rule_id:i.rule_id,order_add_time:t,custom_value:i.area_measure,key:i.default_key[0],cycle:i.cycle}).then((function(t){var a="添加成功";void 0!=t.order_id&&t.order_id&&(a="添加完成，已生成待缴账单"),e.$message.success(a),1==t.error&&e.$message.error(t.msg),i.visible_add=!1,i.getCharges(e.default_key[0]),i.getOrderList(e.default_key[0]),e.rule_id="请选择消费标准",e.ruleDetail=[],e.ruleLateDetail=[],e.ruleDetailShow=!1,e.is_cycle=!1,e.cycle_set="",e.cycle=""}))},selectYear:function(e,t){console.log("date",e),console.log("dateString",t),this.dateValue=e,this.isOpen=!1;var a=e,s=i.valid_time;new Date(a.replace(/-/g,"/"))<new Date(s.replace(/-/g,"/"))&&this.$message.error("账单生效时间不能小于收费标准生效时间")},showpopup:function(){return console.log("_this.default_key",i.default_key),""==i.default_key||i.default_key[0].split("|")&&"room"!=i.default_key[0].split("|")[2]&&"position"!=i.default_key[0].split("|")[2]?(this.$message.warning("请选择房间或车位"),!1):void(i.visible=!0)},onOpenChange:function(e,t){this[t]=e},ruleChange:function(e){i.rule_id=e,i.RuleInfo(e),i.dateValue=null,i.area_measure=""},RuleInfo:function(e){var t=this;i.request(d["a"].ruleInfo,{rule_id:e}).then((function(e){console.log("RuleInfo=============",e),2==e.fees_type&&""!=e.unit_gage?i.is_show_area=!0:i.is_show_area=!1,1==e.bill_type&&2==e.charge_type||1==e.charge_type||"water"==e.order_type||"electric"==e.order_type||"gas"==e.order_type?i.is_show_order_time=!1:i.is_show_order_time=!0,i.is_cycle&&(1==e.bill_create_set?i.cycle_set="日":2==e.bill_create_set?i.cycle_set="月":i.cycle_set="年"),t.unit_gage=e.unit_gage,i.valid_time=e.charge_valid_time1,i.date_status="date",i.dateFormat="YYYY-MM-DD",i.ruleDetailShow=!0,i.ruleDetail=e.ruleList,i.ruleLateDetail=e.ruleLateList}))},ChargeRuleLists:function(e){i.request(d["a"].ChargeRuleLists,{charge_project_id:e}).then((function(e){console.log("ChargeRuleLists",e),i.rule_list=e}))},projectChange:function(e){i.request(d["a"].ProjectInfo,{id:e}).then((function(e){i.cycle_set="",2==e.type?i.is_cycle=1:i.is_cycle=0})),i.project_id=e,i.rule_list=[],i.rule_id="请选择消费标准",i.ruleDetailShow=!1,i.ruleDetail=[],i.ruleLateDetail=[],i.ChargeRuleLists(e)},ChargeProjectLists:function(){i.request(d["a"].ChargeProjectLists,{}).then((function(e){console.log("ChargeProjectLists",e),i.project_list=e}))},delChargeStandardBind:function(e){var t=this;this.request(d["a"].delChargeStandardBind,{charge_standard_bind_id:e}).then((function(e){console.log("+++++++",e),e&&(i.$message.success("移除成功"),i.getCharges(t.default_key[0]))}))},getConfigCustomization:function(){this.request(d["a"].getConfigCustomization).then((function(e){console.log("+++++++",e),e&&(i.config_customization=e,1==i.config_customization.life_tools?i.option_type="4":i.option_type="1")}))},getHouseTissueNav:function(){this.request(d["a"].getHouseTissueNav,{select:0}).then((function(e){console.log("+++++++",e),e&&(i.gData=e)}))},getCarTissueNav:function(){var e=this;this.request(d["a"].getCarTissueNav,{select:0}).then((function(t){console.log("+++++++",t),t&&(i.gData_1=t,console.log("children_position_type1111",t[0].children_position_type),1==t[0].children_position_type?e.children_position_type=!0:e.children_position_type=!1,e.park_sys_type=t[0].park_sys_type)}))},getOrderList:function(e){this.request(d["a"].getOrderList,{key:e,source_type:1}).then((function(e){console.log("+++++++",e),e&&(i.user_info=e.user_info,i.data=e.order_list,i.total_money=e.total_money,i.position_end_time=e.position_end_time,i.is_pay=e.is_pay_but,i.show_scrcu=void 0!==e.show_scrcu?e.show_scrcu:0)}))},getCharges:function(e){this.request(d["a"].getCharges,{key:e}).then((function(e){console.log("+++++++",e),e&&(i.data_1=e.list)}))},getSingleListByVillage:function(){this.request(d["a"].getSingleListByVillage).then((function(e){if(console.log("+++++++Single",e),e){var t=[];e.map((function(e){t.push({label:e.name,value:e.id,isLeaf:!1})})),i.options=t}}))},getFloorList:function(e){var t=this;return new Promise((function(a){t.request(d["a"].getFloorList,{pid:e}).then((function(e){console.log("+++++++Single",e),console.log("resolve",a),a(e)}))}))},getLayerList:function(e){var t=this;return new Promise((function(a){t.request(d["a"].getLayerList,{pid:e}).then((function(e){console.log("+++++++Single",e),e&&a(e)}))}))},getVacancyList:function(e){var t=this;return new Promise((function(a){t.request(d["a"].getVacancyList,{pid:e}).then((function(e){console.log("+++++++Single",e),e&&a(e)}))}))},getPayOrderList:function(e,t){this.request(d["a"].getPayOrderList,{room_id:e.room_id,position_id:e.position_id,project_id:e.project_id,key:t}).then((function(e){console.log("+++++++",e),e&&(i.data_detail=e)}))},getPayOrderInfo:function(e){this.request(d["a"].getPayOrderInfo,{order_id:e.order_id}).then((function(e){console.log("+++++++",e),e&&(i.details_data=e,i.field_list=e.field_list)}))},discardOrder:function(e){var t=this;this.request(d["a"].discardOrder,{discard_reason:i.invalidReasons,room_id:e.room_id,position_id:e.position_id,project_id:e.project_id,order_id:i.order_id,key:this.default_key[0]}).then((function(a){console.log("+++++++Single",a),a&&(t.$message.success("操作成功"),i.visible_invalid=!1,i.invalidReasons="",console.log("record_data",e),i.getPayOrderList(e,i.default_key[0]),i.getOrderList(i.default_key[0]))}))},modifyMoney:function(e){var t=this;if(i.modify_money<0)return this.$message.error("修改金额不能小于0"),!1;this.request(d["a"].modifyMoney,{modify_money:i.modify_money,modify_reason:i.modify_reason,room_id:e.room_id,position_id:e.position_id,project_id:e.project_id,order_id:i.order_id}).then((function(a){console.log("+++++++Single",a),a&&(t.$message.success("修改成功"),i.modify_money="",i.modify_reason="",i.getOrderList(i.default_key[0]),i.getPayOrderList(e,i.default_key[0]),i.visible_revise=!1)}))},getDetailTree:function(){var e=this;this.request(d["a"].getDetailTree,{select_type:i.select_type,option_type:i.option_type,value:i.search_keyword,single_id:i.single_id,floor_id:i.floor_id,layer_id:i.layer_id,room_id:i.room_id}).then((function(t){console.log("+++++++",t),i.is_selected=!0,t&&(""!=t.key?(i.default_key=[t.key],-1!=t.key.search("position")||-1!=t.key.search("garage")?i.is_car=!0:i.is_car=!1):(i.is_car=!1,i.default_key=[]),console.log("_this.default_key",i.default_key),""!=i.default_key?(i.getOrderList(t.key),i.getCharges(t.key),i.expanded_keys=t.expanded_keys,console.log("fsdfsdfsdf",i.expanded_keys)):(e.$message.warning("无数据"),i.user_info={},i.data=[],i.total_money="",i.position_end_time=""))}))},loadDataFunc:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e[e.length-1],a.loading=!0,setTimeout((function(){a.loading=!1}),100);case 3:case"end":return t.stop()}}),t)})))()},setVisionsFunc:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,s,n,r,l,c,d,_,u,p,h,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!==e.length){t.next=12;break}return a=Object(o["a"])(i.options),t.next=4,i.getFloorList(e[0]);case 4:s=t.sent,console.log("res",s),n=[],s.map((function(e){return n.push({label:e.name,value:e.id,isLeaf:!1}),a["children"]=n,!0})),a.find((function(t){return t.value===e[0]}))["children"]=n,i.options=a,t.next=38;break;case 12:if(2!==e.length){t.next=24;break}return t.next=15,i.getLayerList(e[1]);case 15:r=t.sent,l=Object(o["a"])(i.options),c=[],r.map((function(e){return c.push({label:e.name,value:e.id,isLeaf:!1}),!0})),d=l.find((function(t){return t.value===e[0]})),d.children.find((function(t){return t.value===e[1]}))["children"]=c,i.options=l,t.next=38;break;case 24:if(3!==e.length){t.next=37;break}return t.next=27,i.getVacancyList(e[2]);case 27:_=t.sent,u=Object(o["a"])(i.options),p=[],_.map((function(e){return p.push({label:e.name,value:e.id,isLeaf:!0}),!0})),h=u.find((function(t){return t.value===e[0]})),m=h.children.find((function(t){return t.value===e[1]})),m.children.find((function(t){return t.value===e[2]}))["children"]=p,i.options=u,t.next=38;break;case 37:4===e.length&&(i.room_id=e[3],console.log("_this.room_id+++",i.room_id));case 38:case"end":return t.stop()}}),t)})))()},showpopup_collet:function(){i.auth_code="",""==i.selectedRows?this.$message.warning("请选择收费项"):(i.qrcode="",i.request(d["a"].getMoney,{order_list:i.selectedRows}).then((function(e){console.log("getMoney",e),i.pay_money=e.pay_money,i.all_money=e.total_money})),i.visible_collet=!0)},showpopupe_revise:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t>0&&(i.order_id=t),i.visible_revise=!0,i.record=e},showpopup_price:function(){i.visible_add=!0,i.ChargeProjectLists()},handleCancelList:function(){i.visible_detailsList=!1,i.order_id=0,i.getOrderList(i.default_key[0])},showpopup_detailsList:function(e){var t=this;e.check_apply_id>0?this.show_check_detail=!0:this.show_check_detail=!1,this.currentIndex=0,0==e.show_action?(i.record_data=e,i.request(d["a"].getPayOrderList,{project_id:e.project_id,room_id:e.room_id,position_id:e.position_id,key:i.default_key[0]}).then((function(e){t.data_detail=e})),i.visible_detailsList=!0):(i.showpopup_details(e),i.record_data=e,i.visible_details=!0)},showpopup_details:function(e){i.getPayOrderInfo(e),i.record_details_data=e,i.visible_details=!0},invalidShow:function(e,t,a){1==e?(i.order_id=0,console.log("record",t),i.record_data=t,i.visible_invalid=!0):(i.order_id=a,console.log("record",t),i.record_data=t,i.visible_invalid=!0)},confirm_invalid:function(){""!=i.invalidReasons?i.discardOrder(i.record_data):this.$message.warning("请填写作废原因")},confirm_revise:function(){""!=i.modify_reason?""!=i.modify_money?i.modifyMoney(i.record):this.$message.warning("请填写修改后的费用"):this.$message.warning("请填写修改原因")},select_key:function(e,t){if(console.log("val",e),t&&e&&e[0]&&-1==e[0].search("room")&&-1==e[0].search("position")||0==e.length)return t.node.onExpand(),i.expanded_keys=[e[0]],void(i.default_key=[e[0]]);console.log("val",e),e&&e[0]&&(i.default_key=e,-1!=i.default_key[0].search("position")||-1!=i.default_key[0].search("garage")?i.is_car=!0:i.is_car=!1,i.is_selected=!0,i.getOrderList(e[0]),i.getCharges(e[0]))},authCodePay:function(e){return""==i.auth_code?(i.$message.error("请选中付款码让用户扫描"),!1):!(i.auth_code.length<18)&&((18==i.auth_code.length||19==i.auth_code.length)&&(!("62"==i.auth_code.substring(0,2)&&i.auth_code.length<19)&&void i.request(d["a"].goPay,{order_list:i.selectedRows,pay_type:e,auth_code:i.auth_code}).then((function(e){if(console.log("auth_code_pay",e),0==e.status)return i.$message.error("支付失败"),i.visible_collet=!1,!1;1==e.status?(i.$message.success("收费成功"),i.checkPrint(1,i.selectedRows),i.selectedRows=[],i.getOrderList(i.default_key[0]),i.visible_collet=!1):(i.selectedRows=[],i.$message.warning("扫码成功，等待客户付款"),i.visible_collet=!1,i.queryScanPay(e.info.paid_orderid,e.info.pay_type,e.info.summary_id))}))))},queryScanPay:function(e,t,a){i.request(d["a"].queryScanPay,{order_no:e,pay_type:t,summary_id:a}).then((function(s){if(0==s.status)return i.$message.error("支付失败"),i.visible_collet=!1,!1;1==s.status?(i.$message.success("收费成功"),i.getOrderList(i.default_key[0]),i.visible_collet=!1):i.queryScanPay(e,t,a)}))},handleOk:function(e){return 2==i.pay_type&&0==i.offline_pay_type?(i.$message.error("请选择线下支付方式"),!1):1==i.pay_type?(i.$message.warning("扫码支付微信扫描二维码即可完成支付"),i.visible_collet=!1,!1):3==i.pay_type&&""==i.auth_code?(i.$message.error("请选中付款码让用户扫描"),!1):(i.confirmLoading=!0,setTimeout((function(){i.visible=!1,i.confirmLoading=!1}),2e3),console.log("selectedRows",i.selectedRows),void i.request(d["a"].goPay,{order_list:i.selectedRows,pay_type:i.pay_type,remark:i.remark,offline_pay_type:i.offline_pay_type,auth_code:i.auth_code}).then((function(e){i.$message.success("收费成功"),i.checkPrint(1,i.selectedRows),i.selectedRows=[],i.getOrderList(i.default_key[0]),i.visible_collet=!1})))},handleCancel:function(e){console.log("Clicked cancel button"),i.visible=!1,i.visible_revise=!1,i.visible_collet=!1,i.visible_invalid=!1,i.visible_details=!1,this.checkVisible=!1,this.currentIndex=0,i.auth_code="",i.getOrderList(i.default_key[0])},handleCancelAdd:function(e){this.visible_add=!1,this.project_id=0,this.rule_id="请选择消费标准",this.is_show_order_time=!1,this.is_show_area=!1,this.dateValue=null,this.ruleDetail=[],this.ruleLateDetail=[],this.rule_list=[],this.ruleDetailShow=!1,this.is_cycle=!1,this.cycle_set="",this.cycle=""},handleCancelPrepaid:function(){i.visible_prepaid=!1,i.prepaid_id=0,i.prepaid_list=[],i.diy_content="",i.prepaid_project_id=0},handleCancelManual:function(){i.visible_manual=!1,i.prepaid_id=0,i.prepaid_list=[],i.diy_content="",i.prepaid_project_id=0,i.dateValue=null},screenChange:function(e){console.log(e),i.isshow=e,i.select_type=e,i.search_keyword="",i.search_data=[],i.default_key=[]},onChange:function(e){console.log("change事件",e)},onChangeTime:function(e,t){console.log(t);var a=t,s=i.valid_time;new Date(a.replace(/-/g,"/"))<new Date(s.replace(/-/g,"/"))&&this.$message.error("账单生效时间不能小于收费标准生效时间")},houseChange:function(e){console.log(e),i.option_type=e,i.search_keyword="",i.search_data=[]},carChange:function(e){console.log(e),i.option_type=e,i.search_keyword="",i.search_data=[]},payChange:function(e){console.log(e),2==e&&i.request(d["a"].getOfflineList,{}).then((function(e){i.offline_pay_type_arr=e})),3!=e&&(i.footer=!0,i.auth_code=""),3==e&&(i.footer=!1)},payTypeChange:function(e){i.offline_pay_type=e},clearCache:function(){var e=this;this.request(d["a"].clearCache,{}).then((function(t){e.$message.success("缓存清除成功")}))},submit_house:function(){i.getDetailTree()},submit_car:function(){i.getDetailTree()},handleSearch:function(e){if(""===e)return i.search_data=[],i.search_keyword="",!1;if(i.search_keyword=e,"1"===i.select_type){if("1"===i.option_type&&e.length<5)return i.search_data=[],!1;if("3"===i.option_type&&e.length<3)return i.search_data=[],!1}else{if("3"===i.option_type&&e.length<5)return i.search_data=[],!1;if(["1","2"].includes(i.option_type)&&e.length<2)return i.search_data=[],!1;if("5"===i.option_type&&e.length<3)return i.search_data=[],!1}var t={select_type:i.select_type,option_type:i.option_type,search_keyword:e};i.request(d["a"].getCashierOrderListSearch,t).then((function(e){console.log(e),e.list.length>0&&(i.search_data=e.list)}))},handleSearchBlur:function(e){console.log("handleSearchBlur",e),this.search_keyword=e},handleSearchFocus:function(){this.search_keyword="",this.search_data=[]},getSearchOptionKey:function(e){return void 0!=e.room_alias_id&&e.room_alias_id?e.room_alias_id:e.text},searchOptionChange:function(e,t){console.log("value",e)},checkPrint:function(e,t){var a=this;if(console.log("订单数据===",t),1==e&&t.length<1)return!1;this.request(d["a"].checkSetPrint).then((function(i){var s=[];if(i.template_id&&i.template_id>0)if(1==e&&1==t.length||2==e){var n=1==e?t[0]:t;if(console.log("detail_order",n.detail_order),void 0!=n.detail_order&&n.detail_order&&n.detail_order.length>1)for(var o=0;o<n.detail_order.length;o++)s.push({orderid:n.detail_order[o]["order_id"],pigcms_id:n.detail_order[o]["pigcms_id"]}),a.$refs.PrintOrderModel.add(0,i.template_id,0,s);else s=n,a.$refs.PrintOrderModel.add(s.order_id,i.template_id,s.pigcms_id,[])}else{for(var r=0;r<t.length;r++)if(void 0!=t[r].detail_order&&t[r].detail_order&&t[r].detail_order.length>1)for(o=0;o<t[r].detail_order.length;o++)s.push({orderid:t[r].detail_order[o]["order_id"],pigcms_id:t[r].detail_order[o]["pigcms_id"]});else s.push({orderid:t[r]["order_id"],pigcms_id:t[r]["pigcms_id"]});a.$refs.PrintOrderModel.add(0,i.template_id,0,s)}console.log("获取到了===",1==e?"来源：收银台":"来源：手动生成账单或预缴账单",1==e&&1==t.length||2==e?"单条打印":"批量打印",s)}))},printBut:function(e){1==e.type&&e.template_id>0?this.is_pay=!0:this.is_pay=!1},JumpOrder:function(){var e=this;this.user_info&&this.request(d["a"].checkSetPrint).then((function(t){t.template_id&&t.template_id>0?e.$refs.PayableOrderModel.search_btn(e.user_info):(e.is_pay=!1,e.$message.error("请先设置打印模板"))}))},childrenPosition:function(){var e=this;this.user_info&&this.request(d["a"].checkSetPrint).then((function(t){t.template_id&&t.template_id>0?e.$refs.ChildrenPositionModel.search_btn(e.user_info):(e.is_pay=!1,e.$message.error("请先设置打印模板"))}))},getCarList:function(){this.user_info&&this.$refs.CarListModel.search_btn(this.user_info)}}},O=P,M=(a("07ff"),a("0c7c")),T=Object(M["a"])(O,s,n,!1,null,"2661f87b",null);t["default"]=T.exports},"18bd":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAArBJREFUWEfFlz1oFFEQx/+zXAJCqiAEK423sxsUUolgGhMCgoWiIOJXIaIgBBsrOyOCwUpIoRaGFH6BH2hrZQSjoIUkEM7L7C6nZ2UXBI1c9j15koPLZnN7+xGy7c2b/2//Mzc7j0REI92zRESzWutPRDRv2/ardMfXRlMGgKjerFJqzHXduSwgRQD811VK3XBddzwtRGEARtiyrJ3lcvl7Goh1AOZN2iWwLGsPgMMAeqJxWuunjuOcyQ2QZGWtVtvRaDReABiKETvJzM87hYgrwTgzt3XBJK/X673Ly8s/AGyLiN1h5quZAdI0k4g8AnA2IvaRmeOciWWK7YGkEjQzVavVccuyrkczMzNtmQNE9Nm27f2bDhAEgRuG4XsA2yNid5l5bFMBgiDoU0rd11ofi/krXnAcZzoXgGVZM20SHNVajxLRYDTG2L+ysjI6MDDwKzNApwc3iBth5nbw644VOYpfMvOJtC9QBMAfADeZeSKtuInPBEBEv7XWZieY6+rqmurv7/+aRTwWwEzChCZcYuYvcYJBEAyGYdibAFNnZr8Zk2sStgotLi5OEtGVDp24xMwPNnSg01HcFBORAwA+JH1HKpXKrlKp9BhAn23bLhGFhTggIrcAnGLm3UkO+L5/WSl1Tyl13HXd14UAeJ43r7X+xsxHkgA8zxsyDQxgipkv5gYQkUMA3gC4zczXkgAWFhZ6uru7zaT8WSqV3NwAnudNa63PJwnH/W56JheA7/uOUqq6mtyM4H1xu2JE3GxRfwGUiaiWF+C0UupJs/tFZBjA23ZuNJcVETFxw7kARMTUfGIrAc4BeJi1BLkHkYiYO8IzAHuzNCGAmVwlMKKtde/gO2KOHATQvMKNFA6QNMZFxGzRawDWXCiVUkhK0mr3qgPmrczzLmkjao03F6B/ZT7f/dbWE8AAAAAASUVORK5CYII="},"1a83":function(e,t,a){"use strict";var i={passwordEdit:"/community/house_meter.AdminUser/passwordEdit",adminUserList:"/community/house_meter.AdminUser/adminUserList",adminUserAdd:"/community/house_meter.AdminUser/adminUserAdd ",adminUserEdit:"/community/house_meter.AdminUser/adminUserEdit",adminUserInfo:"/community/house_meter.AdminUser/adminUserInfo",adminUserDelete:"/community/house_meter.AdminUser/adminUserDelete",areaList:"/community/house_meter.AdminUser/areaList",villageBindList:"/community/house_meter.Power/villageBindList",meterVillageAdd:"/community/house_meter.Power/meterVillageAdd",meterVillageAddll:"/community/house_meter.Power/meterVillageAddll",meterVillageDelete:"/community/house_meter.Power/meterVillageDelete",getVillageInfo:"/community/house_meter.Power/getVillageInfo",meterElectricList:"/community/house_meter.MeterElectric/meterElectricList",meterElectricInfo:"/community/house_meter.MeterElectric/meterElectricInfo",meterElectricAdd:"/community/house_meter.MeterElectric/meterElectricAdd",meterElectricEdit:"/community/house_meter.MeterElectric/meterElectricEdit",meterElectricDelete:"/community/house_meter.MeterElectric/meterElectricDelete",getMeasureList:"/community/house_meter.MeterElectric/getMeasureList",switch:"/community/house_meter.MeterElectric/switch",meterReading:"/community/house_meter.MeterElectric/now_reading_electric",meterElectricGroupList:"/community/house_meter.MeterElectricGroup/meterElectricGroupList",meterElectricGroupAdd:"/community/house_meter.MeterElectricGroup/meterElectricGroupAdd",meterElectricGroupEdit:"/community/house_meter.MeterElectricGroup/meterElectricGroupEdit",meterElectricGroupInfo:"/community/house_meter.MeterElectricGroup/meterElectricGroupInfo",meterElectricSetInfo:"/community/house_meter.MeterElectric/meterElectricSetInfo",meterElectricSetEdit:"/community/house_meter.MeterElectric/meterElectricSetEdit",MeterReadingList:"/community/house_meter.MeterElectric/getMeterReadingList",getAreaList:"/community/house_meter.MeterElectricPrice/getAreaList",getAreaPriceList:"/community/house_meter.MeterElectricPrice/getAreaPriceList",meterElectricPriceAdd:"/community/house_meter.MeterElectricPrice/meterElectricPriceAdd",meterElectricPriceEdit:"/community/house_meter.MeterElectricPrice/meterElectricPriceEdit",payorderList:"/community/house_meter.MeterUserPayorder/payorderList",payorderPrint:"/community/house_meter.MeterUserPayorder/payorderPrint",getAreasList:"/community/house_meter.MeterElectric/getAreaList",getCommunityList:"/community/house_meter.MeterElectric/getCommunityList",getVillageList:"/community/house_meter.MeterElectric/getVillageList",getSingleList:"/community/house_meter.MeterElectric/getSingleList",getFloorList:"/community/house_meter.MeterElectric/getFloorList",getLayerList:"/community/house_meter.MeterElectric/getLayerList",getVacancyList:"/community/house_meter.MeterElectric/getVacancyList",uploadFile:"/community/house_meter.MeterElectric/uploadFile",getTongjiCount:"/community/house_meter.DataStatistics/getTongjiCount",getEleWarnList:"/community/house_meter.DataStatistics/getEleWarnList",powerConsumptionAnalysis:"/community/house_meter.DataStatistics/powerConsumptionAnalysis",deviceManage:"/community/house_meter.DataStatistics/deviceManage",powerConsumptionFeeAnalysis:"/community/house_meter.DataStatistics/powerConsumptionFeeAnalysis",getTongjiCountByCity:"/community/house_meter.DataStatistics/getTongjiCountByCity"};t["a"]=i},"1da1":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("d3b7");function i(e,t,a,i,s,n,o){try{var r=e[n](o),l=r.value}catch(c){return void a(c)}r.done?t(l):Promise.resolve(l).then(i,s)}function s(e){return function(){var t=this,a=arguments;return new Promise((function(s,n){var o=e.apply(t,a);function r(e){i(o,s,n,r,l,"next",e)}function l(e){i(o,s,n,r,l,"throw",e)}r(void 0)}))}}},"22ea":function(e,t,a){},2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a("6b75");function s(e){if(Array.isArray(e))return Object(i["a"])(e)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function n(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var o=a("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return s(e)||n(e)||Object(o["a"])(e)||r()}},"2de3":function(e,t,a){},"2f35":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABRxJREFUWEfFV2uIVVUU/ta+06QYESIYmOTMPfvcudUwFKSClD3EkuiBhb0fUgTpj7IQfKamzvhgtKQgg1CJRHpgBtrL3pgU/cim23TOPnPvgAmThsVIzOjcs1esaV853nncOzbghvkx++69vu/ub31rrUu4wIsuMD7Oi0AURXOstXOIaA6A00T0ATN/q7X+ZKRfaEQEcrnc5bW1tSsALHRAXcwcE9Ek+Z+IXo/jeF0mkzlWLZGqCRhjHgHwIgAN4Ls4jjc1NDTsEyBjzN3MvIyIphJRZxzHLZlM5o1qSFQkEEWRx8wrATwG4BSAZs/zNhIRJwFyuVxtTU3NcqXUUgAXMfNeIlqhtf51OCLDEjDGPANgM4BxAN4CsKFSwEKhMK1YLC4HcCeAHgBrtdYtQ5EYlIAx5lpm3kREs5j5ZyKSIO9V86SlM468EJlERIeYebHW+nB5jAEEjDFrnNZy9iXP89YT0ZmRgCdIXAFgFYCn3N5GrfWSZKyzBIwxtwHYAuAqAPtqampW19XV/XQ+wOV3jDF3OSLXAfiNiBZ5nvdxv3MSbH8honHW2jW+7+8cDeDyGEEQrFZKrRKneJ5XV05Anmq18/NHjsj3o0HEGPOwewGxMCR2JpP5DysJYIy5mIjeZ+Y7ZF8ptcVaK5l/4nyIhGE4TSm1shSPmY/09PTMaGpq+qcUbygXTHfldSKAY8y81vf97dWSOHr06Pje3l6pHc+5O90AFmit367ogrIXWQDgNSfLQWberLX+dDgizn6LAfRrzMw7fd+fX7EORFG0w1r7je/7O5KHwzCsJ6JlAJ50RLYTUWs6nTZl52YRkQDPdvtfMfMS3/fPyaMwDOcz85UDciCKogIzTwHwTiqVaq6vrz+SBOjo6LjXWitExEoniGg/M0uBKUrBAiCJJt+4UynV6nneq8n7+Xy+KY5juT8PQE5rfc1gSbjL1XzRrEVrvSEZpKura9ypU6ckiPwNtlrHjBnTPHny5JNlUkrxkR5xKRHt9Txv7pBJ2NnZme3r6xOdpYp9Lc2nXPf29vYpqVTqJqXUTGvtGSI6COCw1vr3MmCRQ8jOBPAXEd3ned4XyTNDNqMgCJ5WSpUyf6u1tjmTyfxZjROCIJiglBLgRU6WXb7vPzHY3WG7YaFQmFIsFkWG+wG0W2ulz0tXHHIFQfCoa8lZAD8opRam0+kfK7rAGHOIiGLX7/vrdGlJJWPml4loAjPvJiKRJVd25mo3lDwkcwMRbfI8b13yTBRFt4skzDx+QBKW6rSz2is9PT0tjY2Nf5QC5PP5iXEcy0S0gJlPKqU+FBcA6CWiGdbaeUQ0HsDuYrG4JpvNhqW7bW1tE8eOHbuUmZ+VvSFL8fHjxy/p7u4+wMw3AAid7uKMsysMw7nO79PLnvWwtXZbJpPZk9wPguBxlw8+EYVxHM9I5tKgOZDP52fHcdw/4TLzHqkL6XS6LRm45IRUKnXaWisT8TkO6OjoaBTfE9ED7t7zWuut5bkwZBIycyqKItFQPPy36O55noxnFVcURYslHwBcxswHtNb3EFHfiF0gF8IwvJGIBHgqgC+Zudn3ffH9gBWGoZRjAb4ZQAHAeq31m8MxrjgVJ5wgL1EaLluLxeKubDbbL0sQBA1KKRm7XnCybfN9vz/hKq2qCTig66W/u4lXfoh0yg8TAGkH/FkqldqYTqc/rwRc+nxEBEqXwjB8kIhuYeZbnbb7XSl+t1rg/0VgpCCjkgOjCZqM9S9nLUw/qJRd0gAAAABJRU5ErkJggg=="},3134:function(e,t,a){},3173:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAA5RJREFUWEftl0FoHFUYx//f23TtoZTsLHvx1LozWzzYXnoQirQ9KPSgVMGWiIiFSmdnjEShFXNoEqVQqFhIOm/TYKEH0WIRREGoCu3Bm7bQQyvZmbQeSqvYfZNCWpO6O5+83Y3dbDbr7FTNQd9pdud98/+97/2/b94QVnnQKusjMYAh/SdB+IAZCykhDt628z8kWUwigKyc3g2IKQZyTdGbEKlXlf3YN71C9AyQKZUPENNkXYjoNDhigPY1fmOvKlqf9gLRE4Ah/cMAxhoCdEw55iF9lSkFR4h5WF8zkR0WzZNxIWIDZGVZMqhYFwEfCp3CsVaRrAwGGTze/G9EOda7cSBiARgy+AzgFxhYEMx2xS2c7vRwQ/ovEuA1vXFKOdZ+PW/duJ9Lp5FTtnW1PW4ZgH4IAL2Pe5RjnTVKwXdg3gbGDU6JA6Gd/6rbyjJy+ili4YHwBMDfKqfwdFb6XzDwrABtve2YF1vjlwN406MgMQKOxojEywzkmXBJRMKuuPnv46Q15wVmjdgD8AyAMgM3CdgR1bBzdtC6EA8AmNPZA3Auoqo9W3z8pzjii3Ny3pV1VUp7BLwCYB7A2ngAJX8EjNGG2fBR+u49+5eDW+72Ir7UnP5RBt5uVshAWDTPrJiBrPSHGThSn8A4rlzrrdbJ3cyk5+nU/1bjO3NvWL+2xhnSHwJwvNkrRlXRapaybh3NYZSCj8E80CDFO2HROtq+6m5myshrmwm1ywR8WXGs59pjDS/YC+IpAOsBPqOcQl3rAYAMrgO8AYz9yrVOdUp5RvrnVzJT/4S/Q6RwnoELoWPt7BTfL/3tgjEForRyzI1LAPpLP24QfX1V9Zp1QwtxDWPtjs14MwOE6qNr7s1PdvJFxvMdQIShm/+kFUDDUQojJOBW+9b+LH6fW79o6mVluLgSEJbsVVIT6jijpbSVu6lu8MWRCMCQ5ZMMKlCEYSHofg38PjHfUm7hpU6g/wCArzul7pit46xyrD3/CoAWycjyOJh2EWEBjK/bS3ZJGf7dW9CrH5JtAUdj7YbpVfjPHpMoA/8D/GczkJucsWpRVAawYl33akZD+uf04YQQPV9xNn3etROa4/4jag2VEbFgovdCx9RvsMSjfsRjTEDQQjSf2jL75sbZrgD6ZtYLXmfiicSqHQKJabDimifab614KjbkzD6gNgTQ5ocBYeAiwB+GTqHxMdM2Yh3LHwbgr2JXHeAPHvrbMCUv2cMAAAAASUVORK5CYII="},"37c8":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABZJJREFUWEfFV21sU2UUfs69LQwEtt1ugBGSsbUdBCWSoBL8o1H5IVGDiB/JBgXCWLsOhRgTiAlL/EhoDDGw9m6DCOQuihAkmPgBEiEm8oPwRxICW9sNA/4Y0HYohLH1vsfc2667K7dbNzW+v5r7nvM8zz3nOe97S/ifF02Gf+ZnXRXOR6QmMC0Bcy9AZ5JN7h8ngzUxAe0XnUq6NAjiIEDVowiJToAkNdlY/dNEhBQtQGmNbiQJQQaWjhDQxyDWwdg18oyPCAG1P+j9pRgh4wpQ1O41zBQk4LlhQGa0OjC441bT4rvGs3l7rk+7VzLwIQE7c6REhwiSmvBXXxhLSEEBrkj3i8IgJryWIwY0icSOhL/2DzvQGXujlVOd9D4zf5DbZ24XMqv9jbW/2eU8JMAVjj8lSBhvvM4C8hWYPkkGPZeLKWuZ2lslsWgGxHYznjAIkCqxpN4OVHdZMXICKlrjXl3SgwQKminGYhxloe9NNS/8tRji/JhyNfY4WDQQqDm79xcxqbo0pPb7F13LaAOgRGIfAYazUZYNPA4d+5PNnlOTIc7PUSLR5QAaAGzIkt5iQE0GPLtIiUSPAlhrvjDjJFjqSAVrvv83iPMxDF8xyBBi8gE4RuWR6FnD4QycBVFHyu8+8l+QD2OWq7G3wdxAwPMMnDMqsBaEPWDMywRxkpg6dMnR3u9fYPbpn64y9UoVsaOBwFsAUobxiLDO9MDM9q4KZ1r2gdgHYLGF8AeS0J5o9JycjIiySPRVySw5r7LmM6ARozPZ5Dk9egzNo3amD5K8HszPWpKMue9wErX1+d03xxIzR43NTjMaGNwI4LFcLKMPxBrDoaUC1ZdyVSgElmkN+cD88ugY+gaSaEs2eked+VmDGaRrRsfzJTA0xxSHdnNzdV8+H7nC3b5Ek/dQQSHh6EpI7APTO9YYAuLM3Ga6hmgLAe48jNNE6Ez4PZoddnmkZwkglmengKrA+uHpldN333hz/n27BFdr9zOQaT0z+QCeVkiwtb92MVUHe0vu3B/yEVMLCDop4ajxI3ebMWgfOTmU3Oy5YQdQEempZdJ9zDAMOzczOPb9tebP3t8zZ2hI9xGzD0QLs3vbTBO6Il07GVIdgEUWc3ypS3Kov7Ha9hLJ3ID3PCTJ6VlTHT3XNiwYsBXcEffqaeEjwG85aa8QRGciUPvpyBS0XJ6izCmpYxb11qsXwCkiCiX87p8nMooutetpZtqEzMmXLRTOEUlasm+gEy2LB42HttdxeSS+iiDqAbxlGaOLIISSAc+xsYQobd0vQeBdgKyz/zVD0lKBmu8emgLjlBq+mfI3K9riy4Su14PIEFOefY1eJg6lAl5zAoaXS43WM8O4fp/MPkuBWZNkWbvdWHPRTvTcL6KVmSkguibSfLi/2XPOLlAJx+YT6fV5PvmTmEMgEgC2MVCZzTX7yyxrySb3dVtf7Lu6TMjSZgBLSYl0t4/0iS+YZfZ7j9uWubBPYF4sef3Nx3C1xl+AJHwMGIY31uc068B1xfHg/gEQrbaYJU5Eu5N+9/5C/VbC0ZVEVCuABxJETyLgPVMo1hWOvw4yiV8Z8RSfEIPOjTkTKuHYCiJRzyBD3YxMIKXMfve5Q2gxS138amFJqYj5QPCDsCybeJfAncyS0Z7zJkM+YuneaI3sRB0x6hmoGdmnzwbTHLq71XNrLBWlkd/LZR7aBDK+B+nRLEmcCZo+hM47Wz1xa37Br+LK8OUZaSqpy47jCkvSQZJFKLGl9qoVqHTf1QWyLG8F8J7l+Xlj/Bw80Dn8CZ8vftz/BUaCS42tZiGMcbT65FsQhUhnAcJ2EN6w9pckSUv43SfG61lRAoZB7H2So3iov+OR23qgmCTTJ7JREfkJsHgAcLeuS1p+f4vBmlAFigGcaMzfcQxTZd4dxecAAAAASUVORK5CYII="},3946:function(e,t,a){},"499a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{width:700,title:e.title,destroyOnClose:!0,visible:e.visible,maskClosable:!1,"confirm-loading":e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-collapse",{attrs:{accordion:""}},[a("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[a("p",[e._v(" 在快捷账单模块，可为收费对象绑定收费项目并且支持快速手动生成一次性账单，若有需要修改或作废的账单，也可在收银台进行费用修改及账单作废。"),a("br"),e._v(" 1、生成的一次性账单有缴费时效，若业主没有在该时效内进行缴费，账单自动作废。"),a("br"),e._v(" 2、一次性账单在生成时，若该时间范围内已有待缴账单生成，则不支持生成一次性账单。"),a("br"),e._v(" 3、账单生成周期设置按年生成时，规则说明："),a("br"),a("font",{staticStyle:{color:"#aaa"}},[e._v(" 例，账单开始生成时间：2022-01-01，收费周期为“ 1 ”年（默认值），收费截止时间为（ 自动获取值 2022-12-30 ），可对收费截止时间进行修改，修改时间只能大于/等于2022-12-30。 大于“2022-12-30”时间，按“日”计算费用，例：收费截止时间（ 修改为 2023-01-20 ），那这个时间比 “ 2022-12-30 ”多 20 天，这个20天的物业费用按照 每日物业费* 20天计算")]),a("br"),a("font",{staticStyle:{color:"#c35151"}},[e._v(" 每日物业费 规则= 按年的收费金额 / 365天进行计算。")]),a("br"),e._v(" 4、账单生成周期设置按月生成时，规则说明："),a("br"),a("font",{staticStyle:{color:"#aaa"}},[e._v(" 例，账单开始生成时间：2022-01-01，收费周期为“ 1 ”月（默认值）， 收费截止时间为（ 自动获取值 2022-01-30 ），可对收费截止时间进行修改，修改的时间只能大于/等于2022-01-30。 大于“2022-01-30”时间，按“日”计算费用，例：收费截止时间（ 修改为 2022-03-20 ），那这个时间比 “ 2022-01-30 ”多1个月 20天，1个月按照月收费标准进行收费，这个20天的物业费用按照 每日物业费* 20天计算")]),a("br"),a("font",{staticStyle:{color:"#c35151"}},[e._v("每日物业费 规则= 按月的收费金额 / 30天进行计算")]),a("br"),e._v(" 5、账单生成周期设置按日生成时，规则说明："),a("br"),a("font",{staticStyle:{color:"#aaa"}},[e._v(" 例，账单开始生成时间：2022-01-01，收费周期为“ 1 ”日（默认值），收费截止时间为（ 自动获取值 2022-01-02 ），可对收费截止时间进行修改，修改时间只能大于/等于2022-01-02。 大于“2022-01-02”时间，按“日”计算费用，例：收费截止时间（ 修改为 2022-01-22 ），那这个时间比 “ 2022-01-02 ”多 20 天，这个20天的物业费用按照 每日物业费* 20天计算")]),a("br")],1)])],1),a("div",{staticClass:"modal_box"},[a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[e._v("收费项：")]),a("a-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择收费项"},on:{change:e.projectChange}},e._l(e.project_list,(function(t){return a("a-select-option",{attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("div",{staticClass:"flex_text_box margin_top_10"},[a("div",{staticClass:"text_1"},[e._v("收费标准：")]),a("a-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择消费标准"},on:{change:e.ruleChange},model:{value:e.rule_id,callback:function(t){e.rule_id=t},expression:"rule_id"}},e._l(e.rule_list,(function(t){return a("a-select-option",{attrs:{value:t.id}},[e._v(" "+e._s(t.charge_name)+" ")])})),1)],1),e.is_show_area?a("div",{staticClass:"flex_text_box margin_top_10",staticStyle:{width:"500px"}},[a("div",{staticClass:"text_1"},[e._v(e._s(e.unit_gage)+"(自定义计量单位数值)：")]),a("a-input",{staticClass:"input_style margin_left_10",staticStyle:{width:"180px"},attrs:{placeholder:"请输入自定义单位数值"},on:{change:e.unitGageChange},model:{value:e.custom_value,callback:function(t){e.custom_value=t},expression:"custom_value"}})],1):e._e(),e.is_show_order_time?a("div",{staticClass:"flex_text_box margin_top_10",staticStyle:{width:"500px"}},[a("div",{staticClass:"text_1"},[e._v("账单开始生成时间：")]),a("a-date-picker",{attrs:{mode:e.date_status,format:e.dateFormat,value:e.dateValue,placeholder:"请选择时间"},on:{change:e.onChangeTime}}),a("span",{staticStyle:{"font-size":"4px"}},[e._v("不填默认下一个缴费日")])],1):e._e(),e.is_show_order_time?a("div",{staticClass:"flex_text_box margin_top_10",staticStyle:{width:"500px"}},[a("div",{staticClass:"text_1"},[e._v("收费周期：")]),a("a-input",{staticClass:"input_style margin_left_10",staticStyle:{width:"200px"},attrs:{placeholder:"请输入收费周期时长"},on:{change:e.cycleChange},model:{value:e.cycle,callback:function(t){e.cycle=t},expression:"cycle"}}),a("span",{staticStyle:{"font-size":"4px"}},[e._v(e._s(e.cycle_set)+"（不填默认1）")])],1):e._e(),e.is_show_order_time?a("div",{staticClass:"flex_text_box margin_top_10",staticStyle:{width:"500px"}},[a("div",{staticClass:"text_1"},[e._v("收费截止时间：")]),a("a-date-picker",{attrs:{value:e.dateEndTime,mode:e.date_endTime,format:e.dateFormat,placeholder:"请选择收费截止时间"},on:{change:e.onChangeTime1}})],1):e._e(),a("div",{staticClass:"flex_text_box margin_top_10 margin_bottom_10",staticStyle:{width:"500px"}},[a("div",{staticClass:"text_1"},[e._v("缴费时效：")]),a("a-input",{staticClass:"input_style margin_left_10",staticStyle:{width:"200px"},attrs:{placeholder:"请输入缴费时效"},model:{value:e.expires,callback:function(t){e.expires=t},expression:"expires"}}),a("span",{staticStyle:{"font-size":"4px"}},[e._v("小时（不填默认1）")])],1)]),e.ruleDetailShow?a("div",{staticClass:"rule_detail"},[a("a-descriptions",{attrs:{title:"基本信息"}},e._l(e.ruleDetail,(function(t,i){return t.is_show?a("a-descriptions-item",{key:i,attrs:{label:t.title}},[e._v(" "+e._s(t.value)+" ")]):e._e()})),1),a("a-descriptions",{attrs:{title:"滞纳金设置"}},e._l(e.ruleLateDetail,(function(t,i){return a("a-descriptions-item",{key:i,attrs:{label:t.title,span:"2"}},[e._v(" "+e._s(t.value)+" ")])})),1)],1):e._e()],1)},s=[],n=a("ade3"),o=(a("ac1f"),a("5319"),a("a0e0")),r=a("c1df"),l=a.n(r),c={components:{},data:function(){return Object(n["a"])({moment:l.a,title:"快捷生成账单",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,key:"",project_id:"",is_cycle:0,cycle_set:"",cycle:"",custom_value:"",expires:"",rule_list:[],rule_id:"",ruleDetailShow:!1,ruleDetail:[],ruleLateDetail:[],project_list:[],unit_gage:"",valid_time:1,contract_time_end:0,date_status:"date",date_endTime:"date",dateFormat:"YYYY-MM-DD",dateEndTime:"",dateValue:"",isOpen:!1,isOpen1:!1,is_show_order_time:!1,is_show_area:!1},"unit_gage","")},mounted:function(){},methods:{add:function(e){console.log("room_id",e),this.key=e,this.visible=!0,this.rule_id="",this.expires="",this.cycle="",this.custom_value="",this.project_id="",this.rule_list=[],this.ruleDetailShow=!1,this.is_show_order_time=!1,this.is_show_area=!1,this.unit_gage="",this.ChargeProjectLists()},handleChange:function(e){this.is_input=!1,2==e&&(this.post.refund_money=this.pay_money,this.is_input=!0)},handleSubmit:function(){var e=this,t="";if(this.dateEndTime){var a=new Date(this.dateEndTime);t=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}var i="";if(this.dateValue){var s=new Date(this.dateValue);console.log("dateEndTime22",s),i=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate()}return"请选择消费标准"===this.rule_id||""===this.rule_id?(this.$message.error("请选择消费标准"),!1):"0"===this.expires?(this.$message.error("缴费时效不能为0"),!1):"0"===this.cycle?(this.$message.error("收费周期不能为0"),!1):(console.log("cycle111",this.cycle),console.log("expires111",this.expires),void this.request(o["a"].quickCall,{project_id:this.project_id,rule_id:this.rule_id,end_time:t,start_time:i,expires:this.expires,key:this.key,custom_value:this.custom_value,cycle:this.cycle}).then((function(t){e.$message.success("添加成功"),e.visible=!1,e.rule_id="",e.project_id="",e.rule_list=[],e.ruleDetail=[],e.ruleLateDetail=[],e.ruleDetailShow=!1,e.is_cycle=!1,e.cycle_set="",e.cycle="",e.custom_value="",e.$emit("ok")})))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.rule_id="",e.project_id="",e.ruleDetail=[],e.ruleLateDetail=[],e.ruleDetailShow=!1,e.is_cycle=!1,e.cycle_set="",e.cycle="",e.custom_value="",e.form=e.$form.createForm(e)}),500)},RuleInfo:function(e){var t=this,a="";if(this.dateEndTime){var i=new Date(this.dateEndTime);console.log("dateEndTime22",i),a=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()}var s="";if(this.dateValue){var n=new Date(this.dateValue);console.log("dateEndTime22",n),s=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()}console.log("dateEndTime11",this.dateEndTime),console.log("end_time11",a),this.request(o["a"].getQuickRuleInfo,{rule_id:e,cycle:this.cycle,custom_value:this.custom_value,start_time:s,end_time:a,key:this.key}).then((function(e){console.log("RuleInfo=============",e),2==e.fees_type&&""!=e.unit_gage?t.is_show_area=!0:t.is_show_area=!1,1==e.charge_type||"water"==e.order_type||"electric"==e.order_type||"gas"==e.order_type?t.is_show_order_time=!1:t.is_show_order_time=!0,t.is_cycle&&(1==e.bill_create_set?t.cycle_set="日":2==e.bill_create_set?t.cycle_set="月":t.cycle_set="年"),t.unit_gage=e.unit_gage,t.valid_time=e.charge_valid_time1,t.contract_time_end=e.contract_time_end,t.date_status="date",t.date_endTime="date",t.dateFormat="YYYY-MM-DD",t.dateEndTime=e.end_time,t.dateValue=e.start_time,t.ruleDetailShow=!0,t.ruleDetail=e.ruleList,t.ruleLateDetail=e.ruleLateList}))},ChargeRuleLists:function(e){var t=this;this.request(o["a"].ChargeRuleLists,{charge_project_id:e}).then((function(e){console.log("ChargeRuleLists",e),t.rule_list=e}))},projectChange:function(e){var t=this;this.request(o["a"].ProjectInfo,{id:e}).then((function(e){t.cycle_set="",2==e.type?t.is_cycle=1:t.is_cycle=0})),this.project_id=e,this.rule_list=[],this.rule_id="请选择消费标准",this.ruleDetailShow=!1,this.ruleDetail=[],this.ruleLateDetail=[],this.expires="",this.cycle="",this.dateEndTime="",this.ChargeRuleLists(e)},ChargeProjectLists:function(){var e=this;this.request(o["a"].ChargeProjectLists,{}).then((function(t){console.log("ChargeProjectLists",t),e.project_list=t}))},onOpenChange:function(e,t){this[t]=e},cycleChange:function(){this.dateEndTime="",this.RuleInfo(this.rule_id)},unitGageChange:function(){this.dateEndTime="",this.RuleInfo(this.rule_id)},ruleChange:function(e){this.rule_id=e,this.dateValue="",this.dateEndTime="",this.area_measure="",this.expires="",this.cycle="",this.RuleInfo(e)},onChange:function(e){console.log("change事件",e)},onChangeTime:function(e,t){console.log(t);var a=t,i=this.valid_time,s=this.contract_time_end;return new Date(a.replace(/-/g,"/"))<new Date(i.replace(/-/g,"/"))?(this.$message.error("账单生效时间不能小于"+this.valid_time),!1):new Date(a.replace(/-/g,"/"))>new Date(s.replace(/-/g,"/"))&&0!=this.contract_time_end?(this.$message.error("账单生效时间不能大于"+this.contract_time_end),!1):(this.dateValue=e,void this.cycleChange())},onChangeTime1:function(e,t){console.log(t);var a=t,i=this.dateEndTime;if(new Date(a.replace(/-/g,"/"))<new Date(i.replace(/-/g,"/")))return this.$message.error("收费截止时间不能小于默认收费截止时间"),!1;this.dateEndTime=e,this.RuleInfo(this.rule_id)}}},d=c,_=(a("8356"),a("0c7c")),u=Object(_["a"])(d,i,s,!1,null,null,null);t["default"]=u.exports},5313:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:e.title,placement:"right",width:e.widthDrawer,closable:!0,visible:e.drawer_visible},on:{close:e.onClose}},[a("div",{staticClass:"top_box"},[a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[e._v("物业编号：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.user_info.usernum?e.user_info.usernum:"暂无"))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[e._v("业主：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.user_info.name?e.user_info.name:"暂无"))])]),a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[e._v("电话：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.user_info.phone?e.user_info.phone:"暂无"))])]),a("div",{staticClass:"flex_text_box"},[e.user_info.is_car_position?a("div",{staticClass:"text_1"},[e._v("车库号：")]):e._e(),e.user_info.is_houses_room?a("div",{staticClass:"text_1"},[e._v("房间号：")]):e._e(),a("div",{staticClass:"text_2"},[e._v(e._s(e.user_info.room?e.user_info.room:"暂无"))])]),e.user_info.is_houses_room?a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[e._v("房屋面积：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.user_info.housesize?e.user_info.housesize:"暂无"))])]):e._e(),e.user_info.is_car_position?a("div",{staticClass:"flex_text_box"},[a("div",{staticClass:"text_1"},[e._v("车场面积：")]),a("div",{staticClass:"text_2"},[e._v(e._s(e.user_info.position_area?e.user_info.position_area:"暂无"))])]):e._e()]),a("div",{staticClass:"message-suggestions-box-1"},[a("a-collapse",{attrs:{accordion:""}},[a("a-collapse-panel",{key:"1",attrs:{header:"操作说明"}},[a("p",[e._v(" 1、可按房屋、车位查看所有的已缴账单明细，并且可以操作退款及打印账单，每笔已缴账单详细记录展示各个信息，并且支持导出。 ")]),a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v("2、"),a("strong",[e._v("退款且还原账单举例：")]),e._v("某个房间分别缴纳了1月、2月、3月的物业费，物业服务到期时间为2022年3月31号，然后退了2月的那笔物业费，退款模式选择【退款且还原账单】"),a("br"),e._v(" 退款后，物业服务到期时间变更为2022年2月28号，同时会生成一笔应交账单，账单信息与退掉的那笔账单一致，若生成的应交账单不符合当前的缴费情况，可以修改账单金额或作废账单 ")]),a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v(" 3、"),a("strong",[e._v("仅退款，不还原账单举例：")]),e._v("某个房间分别缴纳了1月、2月、3月的物业费，物业服务到期时间为2022年3月31号，然后3月开始物业费价格下调，退款模式选择【仅退款，不还原账单】，退款金额改为对应差价金额"),a("br"),e._v(" 退款后，物业服务服务时间不变，账单依旧显示在已缴账单，状态显示为部分退款 ")]),a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v(" 4、一次性收费规则账单不没有计费开始时间和计费结束时间 ")]),a("div",[e._v(" 5、点击【设置打印模板】按钮=>选择打印模板后；会联动收银台打印模板功能，已缴账单列表点击打印按钮直接打印 ")])])],1),a("div",{staticClass:"search-box"},[a("a-row",{attrs:{md:24,type:"flex"}},[a("a-col",{staticClass:"padding-tp10",staticStyle:{"padding-left":"1px","padding-right":"1px"},attrs:{md:6,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("支付方式：")]),a("a-select",{staticStyle:{width:"177px"},attrs:{placeholder:"请选择支付方式"},model:{value:e.search.pay_type,callback:function(t){e.$set(e.search,"pay_type",t)},expression:"search.pay_type"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("全部")]),e._l(e.pay_type_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)],1),a("a-col",{staticClass:"padding-tp10",staticStyle:{"padding-right":"1px"},attrs:{md:6,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("开票状态：")]),a("a-select",{staticStyle:{width:"158px"},attrs:{placeholder:"请选择开票状态"},model:{value:e.search.invoice_type,callback:function(t){e.$set(e.search,"invoice_type",t)},expression:"search.invoice_type"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[e._v("已开票")]),a("a-select-option",{attrs:{value:"2"}},[e._v("未开票")])],1)],1),a("a-col",{staticClass:"padding-tp10",staticStyle:{"padding-right":"1px"},attrs:{md:6,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("账单状态：")]),a("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择账单状态"},model:{value:e.search.order_type,callback:function(t){e.$set(e.search,"order_type",t)},expression:"search.order_type"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("全部")]),a("a-select-option",{attrs:{value:"2"}},[e._v("部分退款")]),a("a-select-option",{attrs:{value:"1"}},[e._v("正常")])],1)],1),a("a-col",{staticClass:"padding-tp10",staticStyle:{"padding-left":"0px","padding-right":"1px"},attrs:{md:6,sm:24}},[a("label",{staticStyle:{"margin-top":"5px"}},[e._v("时间筛选：")]),a("a-range-picker",{staticStyle:{width:"260px"},attrs:{allowClear:!0},on:{change:e.dateOnChange},model:{value:e.search.data,callback:function(t){e.$set(e.search,"data",t)},expression:"search.data"}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1),a("a-col",{staticClass:"padding-tp10",staticStyle:{"padding-left":"0px","padding-right":"1px",width:"90px"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(t){return e.searchList()}}},[e._v(" 查询 ")])],1),a("a-col",{staticClass:"padding-tp10",staticStyle:{"padding-left":"0 !important",width:"90px"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.printList()}}},[e._v("Excel导出")])],1),a("a-col",{staticClass:"padding-tp10 mg5_box",staticStyle:{display:"table !important"},attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.checkSetParint(2,0,0,e.choice_ids)}}},[e._v("同一缴费人批量打印")])],1),a("a-col",{staticClass:"padding-tp10 mg5_box",attrs:{md:2,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.PrintModel.add(0,0,2)}}},[e._v("设置打印模板")])],1)],1)],1),a("a-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.data,"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},pagination:e.pagination,loading:e.loading},on:{change:e.table_change},scopedSlots:e._u([{key:"action",fn:function(t,i){return a("span",{},[a("a",{on:{click:function(t){return e.$refs.OrderModel.add(i.order_id,i.check_apply_id)}}},[e._v("详情")]),a("a-divider",{attrs:{type:"vertical"}}),i.my_check_status&&0!=i.my_check_status?e._e():a("a",{on:{click:function(t){return e.$refs.RefundModel.add(i.order_id,i.pay_money,i.pay_type_way,[{title:"房间号/车位号",value:i.numbers},{title:"缴费人",value:i.pay_bind_name},{title:"电话",value:i.pay_bind_phone},{title:"收费项目名称",value:i.project_name}],i.order_type)}}},[e._v("退款")]),3==i.my_check_status?a("a",{staticStyle:{color:"#808080"}},[e._v("已审核")]):e._e(),2==i.my_check_status?a("a",{on:{click:function(t){return e.$refs.checkRefundModel.add(i.order_id,i.order_apply_info,"order_refund")}}},[e._v("需审核")]):e._e(),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.checkSetParint(1,i.order_id,i.pigcms_id)}}},[e._v("打印")])],1)}}])}),a("payable-order-info",{ref:"OrderModel"}),a("add-refund-info",{ref:"RefundModel",on:{ok:e.bindOk}}),a("check-refund-info",{ref:"checkRefundModel",on:{ok:e.bindOk}}),a("get-print-template",{ref:"PrintModel",on:{ok:e.printBut}}),a("print-order",{ref:"PrintOrderModel"}),e.visible?a("a-modal",{attrs:{title:e.modalTitle,width:600,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.excelExport,cancel:e.handleCancel}},[a("label",{staticStyle:{"margin-right":"10px"}},[e._v("导出模式：")]),a("a-radio-group",{model:{value:e.exportPattern,callback:function(t){e.exportPattern=t},expression:"exportPattern"}},[a("a-radio",{attrs:{value:1}},[e._v("多行显示模式")]),a("a-radio",{attrs:{value:2}},[e._v("合并显示模式")])],1)],1):e._e()],1)])},s=[],n=a("2909"),o=a("1da1"),r=(a("7d24"),a("dfae")),l=(a("96cf"),a("ac1f"),a("841c"),a("d81d"),a("b0c0"),a("d3b7"),a("7db0"),a("a0e0")),c=a("bf3f"),d=a("858e"),_=a("ce95"),u=a("a635"),p=a("f7e3"),h=[{title:"收费项目名称",dataIndex:"project_name",key:"project_name"},{title:"实际缴费金额",dataIndex:"pay_money",key:"pay_money"},{title:"支付方式",dataIndex:"pay_type",key:"pay_type"},{title:"支付时间",dataIndex:"pay_time",key:"pay_time"},{title:"开票状态",dataIndex:"record_status",key:"record_status"},{title:"账单状态",dataIndex:"order_status",key:"order_status"},{title:"计费开始时间",dataIndex:"service_start_time",key:"service_start_time"},{title:"计费结束时间",dataIndex:"service_end_time",key:"service_end_time"},{title:"账单生成时间",dataIndex:"add_time",key:"add_time"},{title:"审核状态",dataIndex:"check_status_str",key:"check_status_str"},{title:"操作",key:"action",width:"170px",dataIndex:"",scopedSlots:{customRender:"action"}}],m=[],g={name:"PayableOrderList",filters:{},components:{GetPrintTemplate:_["default"],AddRefundInfo:d["default"],PayableOrderInfo:c["default"],PrintOrder:p["default"],checkRefundInfo:u["default"],"a-collapse":r["a"],"a-collapse-panel":r["a"].Panel},data:function(){var e=this;return{reply_content:"",title:"已缴账单列表",pagination:{current:1,pageSize:10,total:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(e){return"共 ".concat(e," 条")},onShowSizeChange:function(t,a){return e.onTableChange(t,a)},onChange:function(t,a){return e.onTableChange(t,a)}},search:{keyword:"",key_val:"name",key_val1:"paytime",garage_id:"0",pay_type:"0",project_id:"0",page:1,pigcms_id:0},form:this.$form.createForm(this),drawer_visible:!1,visible:!1,loading:!1,key_name:"请输入姓名",data:m,user_info:{},columns:h,options:[],garage_list:[],project_list:[],pay_type_list:[],search_data:"",page:1,widthDrawer:1500,selectedRowKeys:[],choice_ids:[],confirmLoading:!1,exportPattern:2,modalTitle:"Excel导出"}},created:function(){window.screen.width<1400?this.widthDrawer=900:window.screen.width<1600&&(this.widthDrawer=1250)},activated:function(){this.getSingleListByVillage(),this.getProjectList(),this.getGarageList(),this.payTypeList()},methods:{onTableChange:function(e,t){this.page=e,this.pagination.current=e,this.pagination.pageSize=t,this.getList(),console.log("onTableChange==>",e,t)},onClose:function(){this.drawer_visible=!1},getList:function(){var e=this;this.loading=!0,this.search["page"]=this.page,this.search["limit"]=this.pagination.pageSize,this.request(l["a"].payableOrderList,this.search).then((function(t){e.pagination.total=t.count?t.count:0,e.pagination.pageSize=t.total_limit?t.total_limit:10,e.data=t.list,console.log("list",t.list),e.loading=!1}))},keyChange:function(e){"name"==e&&(this.key_name="请输入姓名"),"phone"==e&&(this.key_name="请输入电话")},bindOk:function(){this.getList()},getProjectList:function(){var e=this;this.request(l["a"].ChargeProjectList).then((function(t){e.project_list=t.list})).catch((function(t){e.loading=!1}))},getGarageList:function(){var e=this;this.request(l["a"].garageList).then((function(t){console.log("garage_list",t),e.garage_list=t})).catch((function(t){e.loading=!1}))},payTypeList:function(){var e=this;this.request(l["a"].payTypeList).then((function(t){console.log("pay_type_list",t),e.pay_type_list=t})).catch((function(t){e.loading=!1}))},getSingleListByVillage:function(){var e=this;this.request(l["a"].getSingleListByVillage).then((function(t){if(console.log("+++++++Single",t),t){var a=[];t.map((function(e){a.push({label:e.name,value:e.id,isLeaf:!1})})),e.options=a}}))},getFloorList:function(e){var t=this;return new Promise((function(a){t.request(l["a"].getFloorList,{pid:e}).then((function(e){console.log("+++++++Single",e),console.log("resolve",a),a(e)}))}))},getLayerList:function(e){var t=this;return new Promise((function(a){t.request(l["a"].getLayerList,{pid:e}).then((function(e){console.log("+++++++Single",e),e&&a(e)}))}))},getVacancyList:function(e){var t=this;return new Promise((function(a){t.request(l["a"].getVacancyList,{pid:e}).then((function(e){console.log("+++++++Single",e),e&&a(e)}))}))},loadDataFunc:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e[e.length-1],a.loading=!0,setTimeout((function(){a.loading=!1}),100);case 3:case"end":return t.stop()}}),t)})))()},setVisionsFunc:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,s,o,r,l,c,d,_,u,p,h,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1!==e.length){a.next=12;break}return i=Object(n["a"])(t.options),a.next=4,t.getFloorList(e[0]);case 4:s=a.sent,console.log("res",s),o=[],s.map((function(e){return o.push({label:e.name,value:e.id,isLeaf:!1}),i["children"]=o,!0})),i.find((function(t){return t.value===e[0]}))["children"]=o,t.options=i,a.next=36;break;case 12:if(2!==e.length){a.next=24;break}return a.next=15,t.getLayerList(e[1]);case 15:r=a.sent,l=Object(n["a"])(t.options),c=[],r.map((function(e){return c.push({label:e.name,value:e.id,isLeaf:!1}),!0})),d=l.find((function(t){return t.value===e[0]})),d.children.find((function(t){return t.value===e[1]}))["children"]=c,t.options=l,a.next=36;break;case 24:if(3!==e.length){a.next=36;break}return a.next=27,t.getVacancyList(e[2]);case 27:_=a.sent,u=Object(n["a"])(t.options),p=[],_.map((function(e){return p.push({label:e.name,value:e.id,isLeaf:!0}),!0})),h=u.find((function(t){return t.value===e[0]})),m=h.children.find((function(t){return t.value===e[1]})),m.children.find((function(t){return t.value===e[2]}))["children"]=p,t.options=u,console.log("_this.options",t.options);case 36:case"end":return a.stop()}}),a)})))()},dateOnChange:function(e,t){this.search.date=t,console.log("search1111",this.search)},table_change:function(e){console.log("table_change",e),e.current&&e.current>0&&(this.pagination.current=e.current,this.page=e.current,this.getList(),this.selectedRowKeys=[],this.choice_ids=[])},search_btn:function(e){this.drawer_visible=!0,this.user_info=e,this.search={keyword:"",key_val:"name",key_val1:"paytime",garage_id:"0",pay_type:"0",project_id:"0",page:1,pigcms_id:e.pigcms_id},this.search.vacancy_id=0,void 0!=e.vacancy_id&&e.vacancy_id>0&&(this.search.vacancy_id=e.vacancy_id),void 0!=e.position_id&&e.position_id?this.search.position_id=e.position_id:this.search.position_id=0,this.searchList()},searchList:function(){console.log("search",this.search),this.page=1;var e={current:1,pageSize:10,total:10};console.log("searchList"),this.table_change(e)},printList:function(){this.visible=!0},printBut:function(){this.table_change({current:1,pageSize:10,total:10})},onSelectChange:function(e,t){if(console.log("selectedRowKeys changed: ",e,t),t){for(var a=[],i=0;i<t.length;i++)a.push({orderid:t[i]["order_id"],pigcms_id:t[i]["pigcms_id"],room_id:t[i]["room_id"]});this.choice_ids=a,console.log("choice_ids: ",this.choice_ids),this.selectedRowKeys=e}},handleCancel:function(){this.visible=!1,this.exportType=1},excelExport:function(){var e=this;this.loading=!0,this.search["exportPattern"]=this.exportPattern,console.log(this.search),this.request(l["a"].printPayOrderList,this.search).then((function(t){console.log("list",t.list),window.location.href=t.url,e.loading=!1,e.handleCancel()})).catch((function(t){e.loading=!1}))},arrUnique:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pigcms_id",a=[],i=0,s=e.length;i<s;i++)-1===a.indexOf(e[i][t])&&a.push(e[i][t]);return a},checkSetParint:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=this;if(2==e){if(s.length<1)return n.$message.error("请勾选账单"),!1;if(this.arrUnique(s,"pigcms_id").length>1)return n.$message.error("当前仅支持同一个缴费人进行批量打印已缴账单"),!1;if(this.arrUnique(s,"room_id").length>1)return n.$message.error("当前仅支持同一个房间进行批量打印已缴账单"),!1;if(s.length>8)return n.$message.error("最多可选择8个账单打印，您当前选中"+s.length+"个"),!1}this.request(l["a"].checkSetPrint).then((function(n){n.template_id&&n.template_id>0?t.$refs.PrintOrderModel.add(a,n.template_id,i,s):1==e?t.$refs.PrintModel.add(a,i):t.$refs.PrintModel.batchPrint(s)}))}}},f=g,v=(a("cd69"),a("0c7c")),y=Object(v["a"])(f,i,s,!1,null,"181749ca",null);t["default"]=y.exports},"5cc3":function(e,t,a){},"6dd3":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAgCAYAAACcuBHKAAAAAXNSR0IArs4c6QAAAmFJREFUWEftlU1o1FAQx//z8rbbsh48WwsFwZPYbEqV3rZXEYX6AYqivclGixfPtlcvK3WzhXpQRLBd9VjBU1c8qTQRQbHowYNnRYXamo+RLLtt2IZN0sZuRd9pkpn855d58+YRAmtwamUfK7IE0CDAe4K+dGxaAlAzdeVSUI+aDwPT3Kt47ud0kkWrmLpcy71maIbzGMAogIeA98Tz6FO0VLIIARQg6Hr9K48nzSuZCd+sQ6gl3i263K++zcBZS5cPksnHj9YM5w6Ai2DMmpflmXWIW3ZBCFrwXwTLFF86fqTayMWEmlWUI38XBFdP7VpVlt8A6Iv7zwTMZU/Mn2uN33QllqtHe4XCyU4OodY9Ol8vd3BtGsIXWX107KArvFzcSvQ49hKdfvolVYi4yaPitlSJKPG4/i1DaIbDIDwHk78tOQZyBORAnAOjax2EPrLrHLfGs+9S3446RPT6BsAffP1hMyedStQhaMLUlckwHq1i3wDTtaavFWRbIPzkmuHMATgJQHQMQp3+2S+8zAcA8s9BBG7AsC3Jl53zRJgB0N0xiGADbyvE4du817HdYWZUAfwA0APCmFmU91Mb242Ga3dEbb8RASiN6/neoi4vdGpOgIkLVjHzLKxf0juiEY3Zbp79h2hWJ71KtBnbUVdLehA7oif++UpE7Xccf2hPDJRX9hPEEUGi5It4Ho9kWZovxul7HNEkMfmyPcwkDgnwTQa9BnlXhSJfkWbYLwEaCooR6O2irhxIkiAqVjV+qQLC2hBHmKV8xVkgRqHFedfU5ViUcBL/kMF9Ltz3G7+hym9LuPG/2T8QZAAAAABJRU5ErkJggg=="},"6f6f":function(e,t,a){"use strict";a("3946")},"7c8a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAk1JREFUWEfFlz1oFFEQx3+zURERFEELMaAgCAYjgpWFmCJtECGCH5UgMbsJqEWwEKKIpJGg5HYVJY1aiCKxsNFGxSKVoGKjWFiIAREtbCzMjbycm9s99+vdrnev3Xnz/zHz5v/eCl1e0mV9mgAzeqAwTA8LuPK+cHxGYBzA4ZlF0p8Ib1Fu4slti32x0DIAzUTCPVw50g5ENQBGWTiMKw9sIdIB6lxMTNbDOpQ+YPCf76vo5aR8toHIAhhgXJ6nJqvpCYTZlu/X8OR0ZwCMiq+TwIWI4Ds82dVJgEPAw5igwzZG5VNRiPZbYBQCHUa53z0AX+8CxzrfAl97gQlg7H8ewuYYOmhEaCvKEMKGmLjynZXsYES+Fe1/wz7CZe4COyuO6wj7ceWljXh1AMIZXLlqK14WoHEZwRVcedSOeDZAnYHUpEnX8S3dwi+2p+5Zzcckmy7nA6Fa6AdCsnUrG4E+hN24Yqq2vKoB8PUJdeYZl6gtx4vh62PgA56crRYg0H6UN5iWZV1egR5Fmcahn1H5GkKUr0BNzyNcwpP896WvSsvElAO4oTtZXLoLzPug6HqFJ3urqUCgx1HuwNI4roGMKYC5v4+YtUQeLuUq4Os5YIoVbGZEFvD1B7A+oRSv8WQPgR5EmUPZx5jM5/tA1qEyuwM9hXIdZQLhNzCd0ocvwGXqbMJhMnpgy1WgpoMIT4s2fzkuMjHlAEzG8FlmTGiRFzGY+C3a8IiWca0WwJV0+zYjmAvQWsu8M2Dio790WfEpcfnmYd1guw1dB/gDkOATMOoQDuMAAAAASUVORK5CYII="},"7fae":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAACgCAYAAADJjBS6AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAT4SURBVHhe7Z2LTuJAAEX3/z9PBIJBAr4Q8REFFUXs5rIMTPSCPDrQruckZ90lMC3TIy22uH+yHBmPx1m73c5qtVp2fHyMJVLbrNPpTLehyDWMZrNpF4rlsdFoZJPJJL8w7u7u7IKwfPb7/fzC6Ha784HPzs6y5+dnLJHaZmH7nZ+f5xfG5eXlfGD93S0ci+vV1RVh4HcJA62EgVbCQCthoJUw0EoYaN1LGL1eL7u9vcUCqZ9MDwYDG4UkjF/ucDgkDPyuXjkIA7+5URgvLy/T6yh0yrVer29lpVKZD1ytVnGPhm2gE2Euhti1w9ABCRfW/D+2Wi0bRHDtMDRQPDCW31W78rXDiF8tRqPR9NIuLJ86FAjbcdUuZe0wwj8klJf44J8wYA5hgIUwwEIYYCEMsBAGWAgDLIQBFsIAC2GAhTDAQhhgIQywEAZYCAMshAEWwgALYYCFMMBCGGA5aBj6/Y9uYWVQE/I/QxhbShiLeSCMSMJYzANhRBLGYh4II5IwFvNAGJGEsZgHwogkjMU85B4GFBfCAAthgIUwwEIYYCEMsBAGWAgDLIQBFsIAC2GAhTDActAwPj8/7cIwjW9vb7OZ/xnC+EUSBloJA62lCQOKC2GAhTDAQhhgIQywEAZYCAMshAEWwgALYYCFMMBCGGA5aBicRNuvnF1FK2GglTDQyvUYsDOEARbCAAthgIUwwEIYYCEMsBAGWAgDLIQBFsIAC2GA5aBhcBJtv3J2Fa2EgVbCQCvXY8DOEAZYCAMshAEWwgALYYCFMMBCGGAhDLAQBlgIAyyEAZaDh+EWhmkcjUazWf8ZwvhFEgZaCQOtpQoDiglhgIUwwEIYYCEMsBAGWAgDLIQBFsIAC2GAhTDAQhhgIYwVuIkos4U5iaZPVx/SyWQye5rb4SaizBYmjNfXV/ugfToej2dPdXPcRJRZwojUOmyLm4gySxhfhM1JEka9Xp/e0O12k6uVcysWC5uTNIx92Wg0ssFgYFdQwubkHob+CDfs01arZVdQwubkHoYGvbi4mN8Y22w2s16vl5vxwqVbQQmbkyQM8XWjBR8eHmb3yId4t7VsdwKbkywMsSwODZYXhJGGpGGI6+vr+R1i84qDMNKQPAyh44Fwp1gNvCuEkYa9hCGWvXJo8F0gjDSsCkMxhK9S8/5VPSY8Xm9GloYhbm5u5neO1e3bQhhpiMPY1fv7+9VhiH6/bx+s3c02EEYa8grj5ORkOt6PYQgV5AbZJg7CSEMcRq1W21htF43x8fExHW+tMIT2TWHBsTr/sQmEkYY4DH0j78raYQgt8OjoaL4CQR3RrgthpOGgYQgttFKpzFciqBVbB8JIw8HDEPoxeViJWL3N+QnCSEMhwhBPT09ZtVqdr0xQ74dXQRhpKEwY4vHxcXpEG1YouCoOwkhDocIQeuVwxxzL4iCMNBQuDKEN7HYrnU5ndo8FhJGGQoYhhsOh3a202+3p/74YIIw0FDYMoTjiDR/UZXwhDsJIQ6HDENqw7pUjxEEYaSh8GEIb18Wha0gJIw2lCEPow0sujljCyI/ShCEUhzvmCBJGfpQqDLEqDsLIj9KFIfThXBeH3sUonK+6X5GAq9XBfZjXPD7ysZcwhFZeVwfFYWAaN/mU/DL2FoZQHPrcqnsymI+6iDsP9hqGeH9/z05PT6eB6BVEX3E3NY+a0zyOLf6RZX8BwtMEUxRorzMAAAAASUVORK5CYII="},8356:function(e,t,a){"use strict";a("de8c")},"858e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:700,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"退款模式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},["deposit_new"==e.order_type?a("a-select",{staticStyle:{width:"177px"},attrs:{placeholder:"请选择支付方式","default-value":"0",disabled:e.is_show},on:{change:e.handleChange},model:{value:e.post.refund_type,callback:function(t){e.$set(e.post,"refund_type",t)},expression:"post.refund_type"}},[a("a-select-option",{attrs:{value:0}},[e._v("请选择")]),a("a-select-option",{attrs:{value:2}},[e._v("退还押金抵扣费用")]),a("a-select-option",{attrs:{value:1}},[e._v("原路退款")])],1):a("a-select",{staticStyle:{width:"177px"},attrs:{placeholder:"请选择支付方式","default-value":"0",disabled:e.is_show},on:{change:e.handleChange},model:{value:e.post.refund_type,callback:function(t){e.$set(e.post,"refund_type",t)},expression:"post.refund_type"}},[a("a-select-option",{attrs:{value:0}},[e._v("请选择")]),a("a-select-option",{attrs:{value:2}},[e._v("退款且还原账单")]),a("a-select-option",{attrs:{value:1}},[e._v("仅退款，不还原账单")])],1)],1)],1),a("a-form-item",{attrs:{label:"退款金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入退款金额",disabled:e.is_input},model:{value:e.post.refund_money,callback:function(t){e.$set(e.post,"refund_money",t)},expression:"post.refund_money"}})],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"退款原因",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-textarea",{ref:"textareax",staticStyle:{width:"180px"},attrs:{placeholder:"请输入退款原因"},model:{value:e.post.refund_reason,callback:function(t){e.$set(e.post,"refund_reason",t)},expression:"post.refund_reason"}})],1),a("a-col",{attrs:{span:6}})],1)],1)],1),a("div",{staticClass:"refund_type_desc"},["deposit_new"==e.order_type?a("a-descriptions",{attrs:{title:"退款模式说明",column:2,bordered:!0}},[a("a-descriptions-item",{attrs:{span:2,label:"原路退款"}},[e._v("将当前已缴账单的费用进行退款变更账单状态且将对应产生的服务时间进行退回还原；")]),a("a-descriptions-item",{attrs:{span:2,label:"退还押金抵扣费用"}},[e._v("只是将已缴的费用对应进行退款操作并变更账单状态，所收费用不退费，生成押金抵扣券,可用于在缴费时进行抵扣。")])],1):a("a-descriptions",{attrs:{title:"退款模式说明",column:2,bordered:!0}},[a("a-descriptions-item",{attrs:{span:2,label:"退款且还原账单"}},[e._v("将当前已缴账单的费用进行退款变更账单状态且将对应产生的服务时间进行退回还原，自动生成一个相同的未缴账单；")]),a("a-descriptions-item",{attrs:{span:2,label:"仅退款，不还原账单"}},[e._v("只是将已缴的费用对应进行退款并变更账单状态，关联变更信息不做任何还原操作；主要应用于线上支付，例如：价格波动导致差价，退还差价，但是服务不变；")])],1)],1),a("div",{staticClass:"rule_detail",staticStyle:{"margin-top":"10px"}},[a("a-descriptions",{attrs:{title:"基本信息",column:4}},e._l(e.retrunDetail,(function(t,i){return a("a-descriptions-item",{attrs:{span:2,label:t.title}},[e._v(" "+e._s(t.value)+" ")])})),1)],1)],1)},s=[],n=(a("b680"),a("a0e0")),o=(a("1a83"),{components:{},data:function(){return{title:"退款",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,is_show:!1,is_input:!1,form:this.$form.createForm(this),visible:!1,order_id:0,pay_money:0,pay_type_way:0,retrunDetail:[],post:{id:0,refund_money:"",refund_type:0,refund_reason:""},order_type:""}},mounted:function(){},methods:{add:function(e,t,a,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";console.log("order_type====>",s),this.order_type=s,this.$forceUpdate(),this.title="退款",this.visible=!0,this.retrunDetail=i,this.post={order_id:0,id:0,refund_money:t,refund_type:0,refund_reason:""},this.order_id=e,this.pay_money=t,void 0!=a&&(this.pay_type_way=a),this.pay_type_way,this.getRefundType()},handleChange:function(e){this.is_input=!1,2==e&&(this.post.refund_money=this.pay_money,this.is_input=!0)},getRefundType:function(){var e=this;this.request(n["a"].getRefundtype,{order_id:this.order_id}).then((function(t){""==t?e.is_show=!1:(t.refund_money>0&&(e.post.refund_money=e.pay_money-t.refund_money,e.post.refund_money<=0&&(e.post.refund_money=0),e.post.refund_money=e.post.refund_money.toFixed(2)),2==t.refund_type?e.post.refund_type=2:e.post.refund_type=1,e.is_show=!0)}))},handleSubmit:function(){if(this.post.order_id=this.order_id,this.post.refund_type<1)return this.$message.warning("请选择退款模式！"),!1;if(2==this.pay_type_way&&this.post.refund_reason.length<1)return this.$refs.textareax.focus(),this.$message.warning("线下支付的订单，退款时请写上退款原因！"),!1;var e="",t="";1==this.post.refund_type?(t="退款确认（仅退款，不还原账单）",e="只是将已缴的费用对应进行退款并变更账单状态，关联变更信息不做任何还原操作；主要应用于线上支付，例如：价格波动导致差价，退还差价，但是服务不变；"):2==this.post.refund_type&&(t="退款确认（退款且还原账单）",e="将当前已缴账单的费用进行退款变更账单状态且将对应产生的服务时间进行退回还原，自动生成一个相同的未缴账单；");var a=this;this.$confirm({title:t,content:e,onOk:function(){a.request(n["a"].addRefundInfo,a.post).then((function(e){console.log("res",e),a.$message.success("操作成功"),setTimeout((function(){a.form=a.$form.createForm(a),a.visible=!1,a.confirmLoading=!1,a.is_show=!1,a.is_input=!1,a.$emit("ok")}),1500)}))},onCancel:function(){}})},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.post.id=0,e.form=e.$form.createForm(e)}),500)}}}),r=o,l=(a("6f6f"),a("0c7c")),c=Object(l["a"])(r,i,s,!1,null,null,null);t["default"]=c.exports},"87c5":function(e,t,a){"use strict";a("5cc3")},"89b9":function(e,t,a){},"8e97":function(e,t,a){"use strict";a("89b9")},"91a6":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABAZJREFUWEe1V1uIHEUUPbdnk6DZBafX+MqCC5nageinJDEaiR9+BiGioETBRE2mViME9WP9SPwwgoqP6PQY0YAPMCiKrx/xw4iBPDB/u4GZHtGgeWdqhV01ujN9pXq2Z6sfM927uv01U/dRp+4999YtwgK+/n3uij7CTWRhtTZnDyebjInpneLifN1RFoOB/dWrl7RoEwFrALqLgVVJdgT8BPC3DByfyfFXU9uLl9L8pwKwK+5WMD8DUDHNWVjOVRC9qEriQC+7rgDst9zVzLSXmO/u4uAMA2e1jIDrAdyQpMdEXxDxmNohTnaJWnzZLrvbQHgnIhkH4QBaOKoeF0eSnNlvurcih3VgbAVwc0iH8YgaFe9G7WIRuOoNd6OVw3emIgHP9vUPvH7+oev+yJKGa98/t7w5PfUkA8+b+l4Ld/7+hDgU8T33d7BSXcls/RbZ5D4lxSdZNo7q2I57L4CPQxuSN9QoFU8Ha6EI2E79U4A3B0IlRSpJswCzHZfn9OgzJQv3xAC02Y5Ojoi8tY1S8bhWtCvubjD2dNnsHIBTAA4qKV5L0hmsVNcwW8c6MsK2oDr8E87W+eGg1HTOG1LsDQxSABh78kElR+5PBOG4Y3Oc4OpMjm/XfcIHkHfqjxF4/6zh+JL+gXUm4UwADERIRMMADwebMvDCpBRjURCamDPTU0eD6mDQ9klZeNsHMOi4HzCwxTdiflqNjrxsOjABJDE5coAJJUW4BGed2eXaUyB6Sf8l4MOGFA/6AGyn/gvAN+rfSRukAWj7qDUAsgH6S8nClUlpCJc4nVKyMEz6Ylnahwu9mJ8FQN5xLxOwDODTSo4MdasOsyL+aeIaijSeM0qKlbF6NqogGqGhV3694s9llx+Y65z0g5KFO7oDqP8ccEb7onzZlUQo++kHTkxKcUsvAHES8nqAlnZISNamydKqr3tE4DCA29p0w2g2AOXqHpC1u5vT9jrVwK2P1GixW79INM+WAgNALAKMEyAcs5v4sr5T/N0bZFyajYQGgKQqibrNO27oMksCxS08py+moA/UO1OOh/XR69ZeAAACNvaKRnCQWQC1CoN2tFOJXaokXg01osUGYDu1hwEKRqd4K54nAF3aWbjQSUHqZbTYAPxWGrmOAXQGkUXnQBCufKX+uTmELnQg0VUwLxIGAPQkDA8TZv7MwSRLXrXOggH4qUiYiOc7lGYF2i66hC9pMgYwDub3PI9+jE62sbtDk9b8LMuYCdsCr4nvO1WQBKI9Ief2mUNqRC94mEzpdYu8LcG0+59SEDtNxqeZ2aL/VwAakO4Tfa3cZgu8gUEbgukpAvZRJYX/mvLLNuXzPOtQzxT0sg89z4mXW4yLbNFZVRLfpG0clf8LkScodprY3R8AAAAASUVORK5CYII="},"95e0":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAARtJREFUWEdjZBhgwDjA9jMMXgcITL+uwPCHRYHiEGL58+BDpuYDXOZgDQGRaXeM/zH8P0OE5b8YGBg+oGBGhg8M/xk/MDIyfPj/n0GbgeGf2LssNTOSHCAw+bYDEzPD/n///xsyMjL2E+EQrEqYGBgX/Gf4v+BdlirOqMYqAXMAAyNDA8O/f+SlEyam/2BX/WdooNgB77LVG0gNBaHpt+tHHTAaAqMhMDJDgHfKdeHPOZpvB6QcEJp2u5eBgaGIkfmf5v9/TOF0jwKhqbfyGRgZU/8ysNkyM/7Ko7sDkIvrAYmCUQeMhsBoCAzfEPj3j+kAqW1CJhYGe4pKQkZmBkijkgrgfZaqI0n9AirYSbQR5LX5iTaesMIBdwAAwrU3MBfmd0EAAAAASUVORK5CYII="},a635:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:700,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"审核状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol,required:!0}},[a("a-col",{attrs:{span:20}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":1},model:{value:e.post.status,callback:function(t){e.$set(e.post,"status",t)},expression:"post.status"}},[a("a-radio",{attrs:{value:1,name:"status"}},[e._v(" 审核通过 ")]),a("a-radio",{attrs:{value:2,name:"status"}},[e._v(" 审核不通过 ")])],1)],1),a("a-col",{attrs:{span:6}})],1),a("a-form-item",{attrs:{label:"审核说明",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:20}},[a("a-textarea",{ref:"textareax",staticStyle:{width:"250px",height:"120px"},attrs:{placeholder:"请输入审核说明"},model:{value:e.post.bak,callback:function(t){e.$set(e.post,"bak",t)},expression:"post.bak"}})],1),a("a-col",{attrs:{span:6}})],1)],1)],1),a("div",{staticClass:"rule_detail",staticStyle:{"margin-top":"10px"}},[a("a-descriptions",{attrs:{title:e.apply_title,column:4}},e._l(e.retrunDetail,(function(t,i){return a("a-descriptions-item",{attrs:{span:2,label:t.title}},[e._v(" "+e._s(t.value)+" ")])})),1)],1)],1)},s=[],n=a("a0e0"),o={components:{},data:function(){return{title:"退款审核",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,order_id:0,apply_title:"申请退款信息",retrunDetail:[],post:{order_id:0,xtype:"order_refund",bak:"",status:1}}},mounted:function(){},methods:{add:function(e,t,a){this.title="退款审核",this.visible=!0,this.post={order_id:e,xtype:a,bak:"",status:1},"order_discard"==a&&(this.title="作废审核",this.apply_title="申请作废信息"),this.order_id=e;var i=[];if(t&&"order_refund"==a){i.push({title:"申请时间",value:t.opt_time_str});var s="";1==t.refund_type?s="仅退款，不还原账单":2==t.refund_type&&(s="退款且还原账单"),i.push({title:"退款模式",value:s}),i.push({title:"申请退款金额",value:t.refund_money+"元"}),i.push({title:"退款原因",value:t.refund_reason})}else t&&"order_discard"==a&&(i.push({title:"申请时间",value:t.opt_time_str}),i.push({title:"作废账单金额",value:t.total_money+"元"}),i.push({title:"作废原因",value:t.discard_reason}));this.retrunDetail=i},handleSubmit:function(){this.post.order_id=this.order_id;var e="您确认审核 通过 退款申请吗？";2==this.post.status&&(e="您确认审核 不通过 退款申请吗？");var t="退款审核确认";"order_discard"==this.post.xtype&&(t="作废审核确认",e="您确认审核 通过 作废申请吗？",2==this.post.status&&(e="您确认审核 不通过 作废申请吗？"));var a=this;this.$confirm({title:t,content:e,onOk:function(){a.request(n["a"].verifyCheckauthApply,a.post).then((function(e){console.log("res",e),a.$message.success("操作成功"),setTimeout((function(){a.form=a.$form.createForm(a),a.visible=!1,a.confirmLoading=!1,a.$emit("ok")}),1500)}))},onCancel:function(){}})},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.form=e.$form.createForm(e)}),500)}}},r=o,l=(a("87c5"),a("0c7c")),c=Object(l["a"])(r,i,s,!1,null,null,null);t["default"]=c.exports},a745:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{width:1e3,title:e.title,visible:e.visible_car,destroyOnClose:!0,maskClosable:!1,"confirm-loading":e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"车辆类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol,required:!0}},[a("a-col",{attrs:{span:18}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.car_type",{initialValue:e.post.car_type}],expression:"['post.car_type',{ initialValue: post.car_type}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("汽车")]),a("a-radio",{attrs:{value:1}},[e._v("电瓶车")])],1)],1)],1),a("a-form-item",{attrs:{label:"车辆号码",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.province",{initialValue:e.post.province,rules:[{required:!0,message:e.L("请选择省份！")}]}],expression:"['post.province',{ initialValue:post.province,rules: [{ required: true, message: L('请选择省份！') }] }]"}],staticStyle:{width:"30%"},attrs:{placeholder:"请选择省份"}},e._l(e.city_arr,(function(t){return a("a-select-option",{key:t},[e._v(" "+e._s(t)+" ")])})),1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.car_number",{initialValue:e.post.car_number,rules:[{required:!0,message:e.L("请输入车牌号！")}]}],expression:"['post.car_number',{ initialValue:post.car_number,rules: [{ required: true, message: L('请输入车牌号！') }] }]"}],staticStyle:{width:"130px"},attrs:{maxLength:10,placeholder:"请输入车牌号"}})],1),a("a-form-item",{attrs:{label:"绑定对象",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.type",{initialValue:e.post.type}],expression:"['post.type',{ initialValue:post.type }]"}],on:{change:e.select_type}},[a("a-radio",{attrs:{value:0}},[e._v("房间")]),a("a-radio",{attrs:{value:1}},[e._v("业主")])],1)],1)],1),0==e.type?a("a-form-item",{attrs:{label:"绑定房间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-cascader",{staticClass:"cascader_style margin_left_10",attrs:{options:e.options,"load-data":e.loadDataFunc,placeholder:e.room_address,"change-on-select":""},on:{change:e.setVisionsFunc}})],1):e._e(),1==e.type?a("a-form-item",{attrs:{label:"业主姓名",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.name",{initialValue:e.post.name,rules:[{required:!1,message:e.L("请输入业主姓名！")}]}],expression:"['post.name',{ initialValue: post.name,rules: [{ required: false, message: L('请输入业主姓名！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:10,placeholder:"请输入业主姓名"}})],1),a("a-col",{attrs:{span:6}})],1):e._e(),1==e.type?a("a-form-item",{attrs:{label:"业主手机号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.phone",{initialValue:e.post.phone,rules:[{required:!1,message:e.L("请输入业主手机号！")}]}],expression:"['post.phone',{ initialValue: post.phone,rules: [{ required: false, message: L('请输入业主手机号！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:10,placeholder:"请输入业主手机号"}})],1),a("a-col",{attrs:{span:6}})],1):e._e(),a("a-form-item",{attrs:{label:"停车卡号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.car_stop_num",{initialValue:e.post.car_stop_num,rules:[{required:!1,message:e.L("请输入停车卡号！")}]}],expression:"['post.car_stop_num',{ initialValue: post.car_stop_num,rules: [{ required: false, message: L('请输入停车卡号！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:10,placeholder:"请输入停车卡号"}})],1),a("a-col",{attrs:{span:6}})],1),""!=e.post.end_time?a("a-form-item",{attrs:{label:"停车到期时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{attrs:{"default-value":e.moment(e.post.end_time,e.dateFormat),disabled:""}})],1):e._e(),a("a-form-item",{attrs:{label:"停车卡类",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.temporary_car_type",{initialValue:e.post.temporary_car_type,rules:[{required:!0,message:e.L("请选择停车卡类！")}]}],expression:"['post.temporary_car_type',{ initialValue:post.temporary_car_type,rules: [{ required: true, message: L('请选择停车卡类！') }] }]"}],staticStyle:{width:"30%"},attrs:{placeholder:"请选择停车卡类"}},e._l(e.parking_car_type_arr,(function(t){return a("a-select-option",{key:t},[e._v(" "+e._s(t)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"车辆颜色",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.car_color",{initialValue:e.post.car_color,rules:[{required:!1,message:e.L("请输入车辆颜色！")}]}],expression:"['post.car_color',{ initialValue:post.car_color,rules: [{ required: false, message: L('请输入车辆颜色！') }] }]"}],staticStyle:{width:"30%"},attrs:{placeholder:"请选择车辆颜色"}},e._l(e.color_list,(function(t){return a("a-select-option",{key:t.id},[e._v(" "+e._s(t.lable)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"车辆设备号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["post.equipment_no",{initialValue:e.post.equipment_no,rules:[{required:!1,message:e.L("请输入车辆设备号！")}]}],expression:"['post.equipment_no',{ initialValue: post.equipment_no,rules: [{ required: false, message: L('请输入车辆设备号！') }] }]"}],staticStyle:{width:"300px"},attrs:{maxLength:10,placeholder:"请输入"}})],1),a("a-col",{attrs:{span:6}})],1)],1)],1)],1)},s=[],n=a("2909"),o=a("1da1"),r=(a("d81d"),a("b0c0"),a("7db0"),a("d3b7"),a("96cf"),a("a0e0")),l=a("c1df"),c=a.n(l),d={name:"addCarInfo",data:function(){return{title:"添加车辆",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible_car:!1,dateFormat:"YYYY-MM-DD",color_list:[],city_arr:[],parking_car_type_arr:[],position_id:0,room_address:"请选择房间",car_number:"",type:0,options:[],post:{equipment_no:"",end_time:"",name:"",phone:"",car_number:"",car_stop_num:"",province:"",car_color:"",temporary_car_type:"",id:0,car_type:0,type:0,room_id:0}}},methods:{moment:c.a,add:function(e){e?(this.title="编辑车辆",this.position_id=e,this.get_car_detail(e)):(this.title="添加车辆",this.post={equipment_no:"",end_time:"",name:"",phone:"",car_number:"",car_stop_num:"",province:"",car_color:"",temporary_car_type:"",id:0,car_type:0,type:0,room_id:0},this.position_id=0,this.room_address="请选择房间",this.car_number="",this.type=0),this.get_car_config(),this.getSingleListByVillage(),this.visible_car=!0},get_car_config:function(){var e=this;this.request(r["a"].getCarConfig).then((function(t){e.parking_car_type_arr=t.parking_car_type_arr,e.city_arr=t.city_arr,e.color_list=t.car_color}))},get_car_detail:function(e){var t=this;this.request(r["a"].getCarDetail,{position_id:e}).then((function(e){t.post=e,t.type=e.type,e.room_id>0?(t.post.type=0,t.type=0,t.room_address=e.room_address):(t.post.type=1,t.type=1)}))},loadDataFunc:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e[e.length-1],a.loading=!0,setTimeout((function(){a.loading=!1}),100);case 3:case"end":return t.stop()}}),t)})))()},setVisionsFunc:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,s,o,r,l,c,d,_,u,p,h,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1!==e.length){a.next=12;break}return i=Object(n["a"])(t.options),a.next=4,t.getFloorList(e[0]);case 4:s=a.sent,console.log("res",s),o=[],s.map((function(e){return o.push({label:e.name,value:e.id,isLeaf:!1}),i["children"]=o,!0})),i.find((function(t){return t.value===e[0]}))["children"]=o,t.options=i,a.next=39;break;case 12:if(2!==e.length){a.next=24;break}return a.next=15,t.getLayerList(e[1]);case 15:r=a.sent,l=Object(n["a"])(t.options),c=[],r.map((function(e){return c.push({label:e.name,value:e.id,isLeaf:!1}),!0})),d=l.find((function(t){return t.value===e[0]})),d.children.find((function(t){return t.value===e[1]}))["children"]=c,t.options=l,a.next=39;break;case 24:if(3!==e.length){a.next=38;break}return a.next=27,t.getVacancyList(e[2]);case 27:_=a.sent,u=Object(n["a"])(t.options),p=[],_.map((function(e){return p.push({label:e.name,value:e.id,isLeaf:!0}),!0})),h=u.find((function(t){return t.value===e[0]})),m=h.children.find((function(t){return t.value===e[1]})),m.children.find((function(t){return t.value===e[2]}))["children"]=p,t.options=u,console.log("_this.options",t.options),a.next=39;break;case 38:4==e.length&&(t.post.room_id=e[3]);case 39:case"end":return a.stop()}}),a)})))()},getSingleListByVillage:function(){var e=this;this.request(r["a"].getSingleListByVillage).then((function(t){if(console.log("+++++++Single",t),t){var a=[];t.map((function(e){a.push({label:e.name,value:e.id,isLeaf:!1})})),e.options=a}}))},getFloorList:function(e){var t=this;return new Promise((function(a){t.request(r["a"].getFloorList,{pid:e}).then((function(e){console.log("+++++++Single",e),console.log("resolve",a),a(e)}))}))},getLayerList:function(e){var t=this;return new Promise((function(a){t.request(r["a"].getLayerList,{pid:e}).then((function(e){console.log("+++++++Single",e),e&&a(e)}))}))},getVacancyList:function(e){var t=this;return new Promise((function(a){t.request(r["a"].getVacancyList,{pid:e}).then((function(e){console.log("+++++++Single",e),e&&a(e)}))}))},select_type:function(e){console.log("radio checked",e.target.value),this.type=e.target.value},handleOk:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,console.log(this.form),t((function(t,a){if(t)e.confirmLoading=!1;else{var i=r["a"].addCar;if(a.post.position_id=e.position_id,a.post.room_id=e.post.room_id,0==a.post.type&&0==e.post.room_id)return e.$message.error("请选择房间"),e.confirmLoading=!1,!1;e.request(i,a).then((function(t){e.post.id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),e.$emit("ok"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible_car=!1,e.confirmLoading=!1}),1500)})).catch((function(t){e.confirmLoading=!1}))}}))},handleCancel:function(){this.visible_car=!1}}},_=d,u=a("0c7c"),p=Object(u["a"])(_,i,s,!1,null,"770478e7",null);t["default"]=p.exports},a858:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAWNJREFUWEftVy1PxEAQfTPtL0CiSHfb+wlYFIIEg0fgMJw6gwN9EsFJggJPguVPkCa7uAZB8JUtoUlJs2y53X5AE6628zovb97MdAh//FCdXyl1RERnLnyY+V4IsXKJXRdTEVBKLYlosS64+Z6I5lLKKx+MLbYioLUuu3wojuMvBbvgPzEbAlYFiqK4nM1mF7WsaZruhGF4B2C3KfVoJWDmQyHEQzOZUmpBRMtfIQDgHcCzYaw902ijKeDq6A2B0RQoy/IkSZIbw4TXRHTaZsIsy7byPJ+b5WPmb0MuCIJVFEVvrYPIl4DW+hjArat3qsREB1LKx0Emodb6FcC2DwEAL3Fdw767oA9+KAU6L7M2Al6DyKKAM95KwHcUmwR88IMsI5OAzzKbrAecOmqILpqsAs4ubvmndMZPtwuY+ckwwjmAfdsysnWBK36yHvhnXdD3NOuDH+w47Xrc9r7tnMzyQ9AHlj4mMH19kP0AAAAASUVORK5CYII="},a908:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAkpJREFUWEftljtMFFEUhv9zJ5tFicxYGK2NbEAbUNH4BCKtjYXQGWOnJoAmJqjRuypGdMVHfDQUxE4qEhIbJaEyRhuUQNaRmsqEVaKixHvMWdTIyDp3d2cdC281c3LnnG/+/9wHIeZBMdfHvwuQSr/rBhv3N4VI8XKqEUwuOfd54FVm3YdiVC2oQErnGOC0fTI6AkUH/HPuC/tvUNgCAfC1Z21RSs9OGuDYtF49FhmAAbfaJJOiFQGwKS5zBFQBdyNXQJIzMNZWl/Dk+Ul2IUdASzDG4HTFAPbVJcbvta9sEICjDz+Oj2YXGoKxx9kv3Qq4Y4DjkfaAFLUGILoNxlqAHiWTfGKix5u1sTBkGRZjAd0y4E5FaARTP0CDvnYPh0GEAoQl+NmERDcNc1fegiF2aqfeZwjcBVC/r92ThfJEBwC6AaAKUD2+rhmWgrVn39YrJ9EHxTWvz3sty++gBdAWd0K7kV+GIrvIvzhGATrta/e5vPxpUwtVwLYJHdB1BjYvRaYHvnYP/RUAAmUI2BLcI95or7UsgPVr1LPO5qp5+bOBp/PVEzOmKRh7OfP1lAJdA7A1qNj9jurGsgBsuuB7D1wFoSk+AFAfgG2RW2CtAOgKgO3B+XKkl2WBSNq7f0U+75mRT/hxFvwak7PAIXWZmXdUBMDuMFK9AO+M3AJbBRSpS2DeFWMTqosA744T4ALAeyK3oIhVIDfovZE3oS2AA9IMNJcMsEHPbVRkhsC8yaZoyXOIJg2rg9N61ZTksL73l1ww5MP/AN8AYFHgMBC3jt0AAAAASUVORK5CYII="},acea:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"子车位列表",placement:"right",width:e.widthDrawer,closable:!0,visible:e.drawer_visible},on:{close:e.onClose}},[a("div",{staticClass:"parking_space"},[a("div",{staticClass:"table_content"},[a("a-table",{attrs:{columns:e.columns,pagination:e.pageInfo,loading:e.tableLoadding,"data-source":e.spaceList},on:{change:e.handleTableChange}})],1)])])},s=[],n=(a("d81d"),a("a0e0")),o=[{title:"车库名称",dataIndex:"garage_num",key:"garage_num"},{title:"车位号",dataIndex:"position_num",key:"position_num"},{title:"车位模式",dataIndex:"position_pattern_txt",key:"position_pattern_txt"},{title:"车位状态",dataIndex:"position_status_txt",key:"position_status_txt"},{title:"车位面积",dataIndex:"position_area",key:"position_area"},{title:"备注",dataIndex:"position_note",key:"position_note",width:120}],r={data:function(){var e=this;return{pageInfo:{current:1,pageSize:10,total:10,page:1,garage_id:"",position_num:"",children_type:"",position_status:"",showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(e){return"共 ".concat(e," 条")},onShowSizeChange:function(t,a){return e.onTableChange(t,a)},onChange:function(t,a){return e.onTableChange(t,a)}},columns:o,tableLoadding:!1,spaceVisible:!1,selectedRowKeys:[],drawer_visible:!1,widthDrawer:800,modelTitle:"",spaceList:[],garageList:[],positionStatus:[{position_status:1,label:"空置"},{position_status:2,label:"已使用"}],frequency:!1,position_id:"",children_type:0,space_type:"add",headers:{authorization:"authorization-text",village_id:0},select_names:[],select_names_str:"",exportLoadding1:!1,exportLoadding2:!1,patternList:[{name:"真实车位",position_pattern:1},{name:"虚拟车位",position_pattern:2}],childrenPositionList:[{name:"母车位",children_type:1},{name:"子车位",children_type:2}],uploadData:{village_id:0}}},components:{},methods:{onClose:function(){this.drawer_visible=!1},search_btn:function(e){this.drawer_visible=!0,void 0!=e.position_id&&e.position_id?this.pageInfo.position_id=e.position_id:this.pageInfo.position_id=0,this.getSpaceList()},queryThis:function(){var e=this;if(this.frequency)this.$message.warn("请求频繁，请稍后再试");else{this.frequency=!0;var t=setTimeout((function(){e.frequency=!1,clearTimeout(t)}),2e3);this.pageInfo.page=1,this.getSpaceList()}},clearThis:function(){this.pageInfo={page:1,current:1,garage_id:"",position_num:"",position_status:"",pageSize:20,total:0,position_pattern:1},this.getSpaceList()},handleTableChange:function(e,t,a){this.pageInfo.current=e.current,this.pageInfo.page=e.current,this.getSpaceList()},onTableChange:function(e,t){this.pageInfo.current=e,this.pageInfo.pageSize=t,this.pageInfo.page=e,this.getSpaceList(),console.log("onTableChange==>",e,t)},getGarageList:function(){var e=this;e.request(n["a"].getGarageList,{}).then((function(t){e.garageList=t.list}))},handleSelectChange:function(e){this.pageInfo.page=1,this.pageInfo.current=1,console.log("selected ".concat(e))},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},getSpaceList:function(){var e=this;e.tableLoadding=!0,e.request("community/village_api.Parking/getChildrenPositionList",e.pageInfo).then((function(t){e.spaceList=t.list,e.pageInfo.total=t.count,e.tableLoadding=!1}))},editThis:function(e){this.modelTitle="编辑车位",this.space_type="edit",this.spaceVisible=!0,this.position_id=e+""},delConfirm:function(e){var t=this;t.request(n["a"].delParkPosition,{position_id:e.position_id}).then((function(e){t.$message.success("删除成功！"),t.select_names_str="",t.selectedRowKeys=[],t.getSpaceList()}))},delCancel:function(){},closeSpace:function(e){this.position_id="",this.spaceVisible=!1,e&&this.getSpaceList()},onSelectChange:function(e){var t=this;console.log("selectedRowKeys changed: ",e),this.selectedRowKeys=e,this.select_names=[],this.select_names_str="",this.spaceList.map((function(a){e.map((function(e,i){e==a.position_id&&t.select_names.push(a)}))})),this.select_names.map((function(e,a){a+1<t.select_names.length?t.select_names_str+=e.position_num+"、":t.select_names_str+=e.position_num}))},deleteMany:function(){var e=this;0!=e.selectedRowKeys.length?e.$confirm({title:"提示",content:"确定要删除【"+e.select_names_str+"】这些数据吗",onOk:function(){e.request(n["a"].delAllParkPosition,{position_id:e.selectedRowKeys}).then((function(t){e.$message.success("删除成功！"),e.select_names_str="",e.selectedRowKeys=[],e.getSpaceList()}))},onCancel:function(){}}):e.$message.warn("请选择要删除的项")},addThis:function(){this.modelTitle="添加车位",this.space_type="add",this.spaceVisible=!0},handleUploadChange:function(e){console.log("info0513",e),"done"===e.file.status?1e3==e.file.response.status?(this.$message.success("上传成功！"),e.file.response.data.url?window.location.href=e.file.response.data.url:this.getSpaceList()):this.$message.error(e.file.response.msg):"error"===e.file.status&&this.$message.error("上传失败！")},downPosition:function(){var e=this,t=this;t.exportLoadding1=!0,t.request("/community/village_api.Parking/downPosition",t.pageInfo).then((function(a){0==a.error?(window.location.href=a.url,e.$message.success("导出成功！")):e.$message.error("导出失败！"),t.exportLoadding1=!1})).catch((function(e){t.exportLoadding1=!1}))},downModel:function(){var e=this,t=this;t.exportLoadding2=!0,t.request("/community/village_api.Parking/downPositionModel",t.pageInfo).then((function(a){0==a.error?(window.location.href=a.url,e.$message.success("导出成功！")):e.$message.error("导出失败！"),t.exportLoadding2=!1})).catch((function(e){t.exportLoadding2=!1}))}}},l=r,c=(a("8e97"),a("0c7c")),d=Object(c["a"])(l,i,s,!1,null,"f38e7bb6",null);t["default"]=d.exports},b67a:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAWhJREFUWEftVz1LxEAQfbOXWmTTWYl3pz/B1spCsLG3sBA0wauusdP6SrnkCgux0l6w9U+IkNiJhcpdOsEmI6dGwiWR3XxokGw9s/N48+YNQ/jjR1F9c+hthUQHanjEZWC1R2qxP0d9AJCONwCor/MhgXpjq3Oik5MW+wXA5zwfTazuN4N58qc5DYB0Bjg8ntgrRxGt8+7domDjAsBqnOrKWsAkNoP99lW8mBx6fRANfgcA4wWE23gxAtZmhVYZA6qKbgBUxgAx74zt5bN4K0zHcxm0lyXCudMHaby99hLtEyJhcobRGj3vLj1lGpEuANP1t5lxrqqdaRyDNgKrc12KE0rHfwSwoAWAcR/Y3U8vl06xXVAkv54AWNOIZhnQyU9lQNeKEwA0rLyUZZTQgMYyq6cGVMcpcsJmCv7nFIShuIlrQbRwCGA9bRmlTYFqfjMFdWGg2GlW5LQr7TjNe9wWvu1UXTMr7h0Y6T4wN3aMMgAAAABJRU5ErkJggg=="},c817:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"车辆列表",placement:"right",width:e.widthDrawer,closable:!0,visible:e.drawer_visible},on:{close:e.onClose}},[a("div",{staticClass:"vehicle_management"},[a("div",{staticClass:"table_content"},[a("a-table",{attrs:{columns:e.columns,pagination:e.pageInfo,loading:e.tableLoadding,"data-source":e.vehicleList},on:{change:e.handleTableChange}})],1)])])},s=[],n=a("a0e0"),o=[{title:"车位号",dataIndex:"position_num",key:"position_num"},{title:"车牌号码",dataIndex:"car_number",key:"car_number"},{title:"停车到期时间",dataIndex:"end_time",key:"end_time"},{title:"车主姓名",dataIndex:"car_user_name",key:"car_user_name"},{title:"车主手机号",dataIndex:"car_user_phone",key:"car_user_phone"},{title:"与车主关系",dataIndex:"relationship",key:"relationship"}],r={data:function(){var e=this;return{columns:o,vehicleVisible:!1,selectedRowKeys:[],modelTitle:"",drawer_visible:!1,widthDrawer:800,pageInfo:{current:1,page:1,pageSize:10,total:10,search_value:"",search_type:"",showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:function(e){return"共 ".concat(e," 条")},onShowSizeChange:function(t,a){return e.onTableChange(t,a)},onChange:function(t,a){return e.onTableChange(t,a)}},frequency:!1,vehicleList:[],tableLoadding:!1,vehicle_type:"add",searchType:[{search_type:1,label:"车牌号"},{search_type:3,label:"车位号"}],car_id:"",headers:{authorization:"authorization-text"},exportLoadding1:!1,exportLoadding2:!1,exportLoadding3:!1,exportLoadding4:!1,clearSelect:!0,uploadData:{village_id:0}}},components:{},methods:{onClose:function(){this.drawer_visible=!1},search_btn:function(e){this.drawer_visible=!0,void 0!=e.position_id&&e.position_id?(this.pageInfo.search_value=e.position_id,this.pageInfo.search_type=4):(this.pageInfo.search_value="",this.pageInfo.search_type=""),this.getVehicleList()},queryThis:function(){var e=this;if(this.frequency)this.$message.warn("请求频繁，请稍后再试");else{this.frequency=!0;var t=setTimeout((function(){e.frequency=!1,clearTimeout(t)}),2e3);this.pageInfo.page=1,this.getVehicleList()}},clearThis:function(){var e=this;this.pageInfo={page:1,current:1,search_value:"",search_type:"",pageSize:20,total:0},this.clearSelect=!1;var t=setTimeout((function(){e.clearSelect=!0,clearTimeout(t)}),100);this.getVehicleList()},handleTableChange:function(e,t,a){this.pageInfo.current=e.current,this.pageInfo.page=e.current,this.getVehicleList()},onTableChange:function(e,t){this.pageInfo.current=e,this.pageInfo.pageSize=t,this.pageInfo.page=e,this.getVehicleList(),console.log("onTableChange==>",e,t)},getVehicleList:function(){var e=this;e.tableLoadding=!0,e.request(n["a"].getCarlist,e.pageInfo).then((function(t){e.vehicleList=t.list,e.pageInfo.total=t.count,e.uploadData.village_id=t.village_id,e.tableLoadding=!1})).catch((function(t){e.tableLoadding=!1}))},handleSelectChange:function(e){this.pageInfo.search_type=e,console.log("selected ".concat(e))},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},editThis:function(e){this.modelTitle="编辑车辆",this.vehicle_type="edit",this.car_id=e+"",this.vehicleVisible=!0},delConfirm:function(e){var t=this;t.request(n["a"].delCar,{car_id:e.car_id}).then((function(e){t.$message.success("删除成功！"),t.getVehicleList()}))},delBindConfirm:function(e){console.log("record=======>",e)},delCancel:function(){},closeVehicle:function(e){this.car_id="",this.vehicleVisible=!1,e&&this.getVehicleList()},onSelectChange:function(e){console.log("selectedRowKeys changed: ",e),this.selectedRowKeys=e},handleUploadChange:function(e){"done"===e.file.status?1e3==e.file.response.status?(this.$message.success("上传成功！"),e.file.response.data.url?window.location.href=e.file.response.data.url:this.getVehicleList()):this.$message.error(e.file.response.msg):"error"===e.file.status&&this.$message.error("上传失败！")},addThis:function(){this.modelTitle="添加车辆",this.vehicle_type="add",this.vehicleVisible=!0},downCar:function(){var e=this,t=this;t.exportLoadding1=!0,t.request("/community/village_api.Parking/downCar",t.pageInfo).then((function(a){0==a.error?(window.location.href=a.url,e.$message.success("导出成功")):e.$message.error("导出失败"),t.exportLoadding1=!1})).catch((function(e){t.exportLoadding1=!1}))},downModel:function(){var e=this;e.exportLoadding2=!0,e.request("/community/village_api.Parking/downCarModel",e.pageInfo).then((function(t){0==t.error?(window.location.href=t.url,e.$message.success("导出成功")):e.$message.error("导出失败"),e.exportLoadding2=!1})).catch((function(t){e.exportLoadding2=!1}))},parkWhite:function(){var e=this,t=this;t.exportLoadding4=!0,t.request("/community/village_api.Parking/allAddParkWhite",{}).then((function(a){a?e.$message.success("同步成功！"):e.$message.error("同步失败！"),t.exportLoadding4=!1})).catch((function(e){t.exportLoadding4=!1}))},synchronization:function(){var e=this,t=this;t.exportLoadding3=!0,t.request("/community/village_api.Parking/sysParkCarDevice",{}).then((function(a){1==a.retval.code?e.$message.success("同步成功！"):e.$message.error("同步失败！"),t.exportLoadding3=!1})).catch((function(e){t.exportLoadding3=!1}))}}},l=r,c=(a("d2b4"),a("0c7c")),d=Object(c["a"])(l,i,s,!1,null,"788ecca8",null);t["default"]=d.exports},c960:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAQpJREFUWEftl0FKxUAMhv+E0gsIrt9mWgZXIrgT9RSewK2CF7AXEK/wbqIHcD/QdPEuILguJXFjQaUP37TwRnQKs+lMk48vQ0gJiR9KnB+/FyCEsCqKYrXU0DAMG+/9ZlucSQNd152Y2csOyXsAb98XEY3vjlT1sKqq0ygAEbkA8GRmx0T0uAPI5BEiWpvZ2jm3tdSTGyMAgEZVZ90TZrYPqmYxQF3XTawFEbnPANlANvA/DYQQDrz3r0n6gIg8ALhTVc/MV3svQdu2t0R0XZblWd/3N3sH+Nyuk5QgA2QD2cDfNcDMz7EzIYDzpZ1wHCpn5P76iXPuMuq/YHHGiACzZv6I+D8eTQ7wDp45ODCAySM3AAAAAElFTkSuQmCC"},cd69:function(e,t,a){"use strict";a("22ea")},ce95:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:500,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[e.is_set?a("div",{staticStyle:{"margin-bottom":"20px"},domProps:{innerHTML:e._s(e.set_msg)}}):e._e(),a("a-spin",{attrs:{spinning:e.confirmLoading,height:800}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"选择打印模板",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-col",{attrs:{span:18}},[a("a-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择打印模板"},model:{value:e.template_id,callback:function(t){e.template_id=t},expression:"template_id"}},e._l(e.template_list,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.template_id}},[e._v(" "+e._s(t.title)+" ")])})),1)],1)],1)],1)],1),a("print-order",{ref:"PrintModel"})],1)},s=[],n=a("a0e0"),o=a("f7e3"),r={components:{PrintOrder:o["default"]},data:function(){return{title:"选择打印模板",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},confirmLoading:!1,form:this.$form.createForm(this),visible:!1,order_id:0,template_id:void 0,template_list:[],pigcms_id:0,choice_ids:[],is_set:!1,set_msg:"",set_type:0,source_type:0}},mounted:function(){},methods:{add:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.source_type=0,0==a?(this.title="选择打印模板",this.is_set=!1,this.set_msg=""):(this.is_set=!0,this.title="设置打印模板",1==a?(this.source_type=1,this.set_msg="1、在收银台设置打印模板，收银台支持打印功能。打印功能；不设置打印模板，则不支持。<br/>2、设置打印模板后，在收银台显示已缴账单按钮，进入查看所有已缴账单数据。"):2==a&&(this.set_msg='1、设置打印模板后，联动收银台打印模板功能。<br/>2、设置打印模板后，<span style="color: #1890ff">已缴账单</span>列表点击<span style="color: #1890ff">打印</span>按钮直接打印')),this.set_type=a,this.template_id=void 0,this.visible=!0,this.pigcms_id=t,this.template_list=[],this.order_id=e,this.choice_ids=[],this.getTemplate()},batchPrint:function(e){var t=this;if(e.length<1)return t.$message.error("请勾选账单"),!1;t.title="选择打印模板",t.visible=!0,t.template_id=void 0,t.template_list=[],t.order_id=0,t.pigcms_id=0,t.choice_ids=e,this.set_type=0,this.source_type=0,t.getTemplate()},getTemplate:function(){var e=this;this.request(n["a"].getTemplate).then((function(t){e.template_list=t.list,t&&t.template_id>0&&(e.template_id=t.template_id)}))},handleSubmit:function(){var e=this;if(!this.template_id)return this.$message.error("选择打印模板"),!1;this.set_type>0?(this.confirmLoading=!0,this.request(n["a"].editSetPrint,{template_id:this.template_id}).then((function(t){e.$message.success("编辑成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",{type:e.source_type,template_id:e.template_id})}),1e3)})).catch((function(e){}))):this.$refs.PrintModel.add(this.order_id,this.template_id,this.pigcms_id,this.choice_ids)},handleCancel:function(){this.visible=!1}}},l=r,c=(a("d3b0"),a("0c7c")),d=Object(c["a"])(l,i,s,!1,null,null,null);t["default"]=d.exports},d2b4:function(e,t,a){"use strict";a("2de3")},d3b0:function(e,t,a){"use strict";a("3134")},d630:function(e,t,a){},de8c:function(e,t,a){}}]);