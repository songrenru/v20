(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cedd1"],{"60ef":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"报警工单设置",visible:e.visible},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-alert",{attrs:{message:"报警工单设置启用后，设备报警记录会根据绑定的工单类目、工单分类，在工单处理中心显示"}}),a("a-form-model",{ref:"ruleForm",staticStyle:{"margin-top":"10px"},attrs:{model:e.addForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-model-item",{attrs:{label:"保警工单设置",prop:"switch_on"}},[a("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"禁用"},on:{change:e.onCheckedChange},model:{value:e.switchVal,callback:function(t){e.switchVal=t},expression:"switchVal"}})],1),a("a-form-model-item",{attrs:{label:"工单类目",prop:"repair_cate_id"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(t){return e.handleSelectChange(t,"cate")}},model:{value:e.addForm.repair_cate_id,callback:function(t){e.$set(e.addForm,"repair_cate_id",t)},expression:"addForm.repair_cate_id"}},e._l(e.cateList,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.category_id}},[e._v(" "+e._s(t.subject_name)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"工单分类",prop:"repair_cate_sub_id"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(t){return e.handleSelectChange(t,"sub")}},model:{value:e.addForm.repair_cate_sub_id,callback:function(t){e.$set(e.addForm,"repair_cate_sub_id",t)},expression:"addForm.repair_cate_sub_id"}},e._l(e.subList,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1)],1)},r=[],s={props:{visible:{type:Boolean,default:!1}},watch:{visible:{handler:function(e){e&&(this.getSubject(),this.getDetail())},immediate:!0}},data:function(){return{switchVal:!1,labelCol:{span:6},wrapperCol:{span:16},protocolList:[],rules:{switch_on:[{required:!1,message:"请选择"}],repair_cate_id:[{required:!0,message:"请选择"}],repair_cate_sub_id:[{required:!0,message:"请选择"}]},addForm:{switch_on:0,repair_cate_id:void 0,repair_cate_sub_id:void 0},cateList:[],subList:[]}},methods:{handleOk:function(){var e=this;this.$refs.ruleForm.validate((function(t){t&&e.request("/community/village_api.AlarmDevice/setAlarmNewRepair",e.addForm).then((function(t){e.$message.success("设置成功!"),e.$emit("close")}))}))},handleCancel:function(){this.$emit("close"),this.addForm={switch_on:0,repair_cate_id:void 0,repair_cate_sub_id:void 0},this.$refs.ruleForm.resetFields()},onCheckedChange:function(e){this.addForm.switch_on=e?1:0},getCate:function(e){var t=this;this.request("/community/village_api.RepairCenter/getCate",{category_id:e}).then((function(e){t.subList=e}))},getSubject:function(){var e=this;this.request("/community/village_api.RepairCate/getSubject",{}).then((function(t){e.cateList=t}))},getDetail:function(){var e=this;this.request("/community/village_api.AlarmDevice/getAlarmNewRepair",{}).then((function(t){e.switchVal=!!t.setInfo.switch_on,e.addForm.switch_on=t.setInfo.switch_on,t.setInfo.repair_cate_id&&e.getCate(t.setInfo.repair_cate_id),e.addForm.repair_cate_id=t.setInfo.repair_cate_id,e.addForm.repair_cate_sub_id=t.setInfo.repair_cate_sub_id}))},handleSelectChange:function(e,t){"cate"==t?(this.addForm.repair_cate_id=e,this.subList=[],this.addForm.repair_cate_sub_id=void 0,this.getCate(e)):this.addForm.repair_cate_sub_id=e}}},c=s,n=a("2877"),o=Object(n["a"])(c,i,r,!1,null,"fd5739c8",null);t["default"]=o.exports}}]);