(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8fe1928c","chunk-2d0b6a79","chunk-2d0b6a79","chunk-2d0b3786"],{"07ca":function(e,t,a){"use strict";var i={getCommentList:"/grow_grass/platform.GrowGrassArticleReply/getCommentList",updateGrowGrassArticleReply:"/grow_grass/platform.GrowGrassArticleReply/updateGrowGrassArticleReply",getCategoryList:"/grow_grass/api.Category/getCategoryList",getCategoryEdit:"/grow_grass/api.Category/getCategoryEdit",getCategoryDetail:"/grow_grass/api.Category/getCategoryDetail",getCategoryDel:"/grow_grass/api.Category/getCategoryDel",getCategorySort:"/grow_grass/api.Category/getCategorySort",getCategoryClass:"/grow_grass/api.Category/getCategoryClass",getArticleLists:"/grow_grass/api.Article/getArticleLists",getEditArticle:"/grow_grass/api.Article/getEditArticle",getArticleDetails:"/grow_grass/api.Article/getArticleDetails",getArticleCategoryDetails:"/grow_grass/api.Article/getArticleCategoryDetails",getArticle:"/grow_grass/api.Article/getArticleEditInfo"};t["a"]=i},"1da1":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("d3b7");function i(e,t,a,i,r,o,s){try{var n=e[o](s),l=n.value}catch(c){return void a(c)}n.done?t(l):Promise.resolve(l).then(i,r)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(r,o){var s=e.apply(t,a);function n(e){i(s,r,o,n,l,"next",e)}function l(e){i(s,r,o,n,l,"throw",e)}n(void 0)}))}}},2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a("6b75");function r(e){if(Array.isArray(e))return Object(i["a"])(e)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function o(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var s=a("06c5");function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return r(e)||o(e)||Object(s["a"])(e)||n()}},"7a28":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:840,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"话题名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:e.detail.name,rules:[{required:!0,max:10,message:"限10字以内，必填"}]}],expression:"[\n            'name',\n            { initialValue: detail.name, rules: [{ required: true, max: 10, message: '限10字以内，必填' }] },\n          ]"}]})],1),a("a-form-item",{attrs:{label:"话题描述",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{initialValue:e.detail.description,rules:[{required:!0,max:30,message:"限30字以内，必填"}]}],expression:"[\n            'description',\n            { initialValue: detail.description, rules: [{ required: true, max: 30, message: '限30字以内，必填' }] },\n          ]"}]})],1),a("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,help:"值越大越靠前"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:e.detail.sort}],expression:"['sort', { initialValue: detail.sort }]"}],attrs:{min:0}})],1),a("a-form-model-item",{attrs:{label:"图片",colon:!1,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{name:"reply_pic",action:e.uploadImg,"list-type":"picture-card","file-list":e.imgUploadList,multiple:!0},on:{preview:e.handlePreview,change:e.handleImgChange}},[e.imgUploadList.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("上传图片")])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleImgCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)]),a("a-form-item",{attrs:{label:"关联分类",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["cat_id",{initialValue:e.detail.cat_id}],expression:"['cat_id', { initialValue: detail.cat_id }]"}],staticStyle:{width:"115px"}},e._l(e.catList,(function(t){return a("a-select-option",{key:t.cat_id,attrs:{cat_id:t.cat_id}},[e._v(e._s(t.cat_name)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"话题状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:e.detail.status}],expression:"['status', { initialValue: detail.status }]"}],attrs:{name:"status",min:0}},[a("a-radio",{attrs:{value:1}},[e._v(" 正常 ")]),a("a-radio",{attrs:{value:0}},[e._v(" 关闭 ")])],1)],1)],1)],1)],1)},r=[],o=a("53ca"),s=a("2909"),n=a("1da1"),l=(a("96cf"),a("d3b7"),a("d81d"),a("b0c0"),a("a4d3"),a("e01a"),a("4e82"),a("7b3f")),c=a("07ca");function d(e){return new Promise((function(t,a){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){return t(i.result)},i.onerror=function(e){return a(e)}}))}var u={data:function(){return{catList:[],previewVisible:!1,previewImage:"",imgUploadList:[],uploadImg:"/v20/public/index.php"+l["a"].uploadImg+"?upload_dir=/group",title:"添加话题",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),detail:{id:0,name:"",description:"",sort:"",img:[],cat_id:0,status:1},cat_id:0,id:0,status:1}},mounted:function(){},methods:{handleImgCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.url||e.preview){a.next=4;break}return a.next=3,d(e.originFileObj);case 3:e.preview=a.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handleImgChange:function(e){var t=this,a=Object(s["a"])(e.fileList);console.log(a),this.imgUploadList=a;var i=[];this.imgUploadList.map((function(a){if("done"===a.status&&"1000"==a.response.status){var r=a.response.data;i.push(r.full_url),t.$set(t.detail,"img",i)}else"error"===e.file.status&&t.$message.error("".concat(e.file.name," 上传失败！"))}))},add:function(){this.visible=!0,this.imgUploadList=[],this.id=0,this.title="添加话题",this.getCategoryClass(),this.detail={id:0,name:"",description:"",sort:"",img:[],cat_id:"0",status:1}},edit:function(e){this.visible=!0,this.id=e,this.getCategoryClass(),this.getEditInfo(e),this.title="编辑话题"},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){t?e.confirmLoading=!1:(a.id=e.id,a.img=e.detail.img,console.log(a),e.request(c["a"].getCategoryEdit,a).then((function(t){e.id>0?e.$message.success("编辑成功"):e.$message.success("添加成功"),setTimeout((function(){e.form=e.$form.createForm(e),e.visible=!1,e.confirmLoading=!1,e.$emit("loaddata",e.cat_id)}),1500)})).catch((function(t){e.confirmLoading=!1})))}))},handleCancel:function(){var e=this;this.visible=!1,setTimeout((function(){e.id="0",e.form=e.$form.createForm(e)}),500)},getCategoryClass:function(){var e=this;this.request(c["a"].getCategoryClass,{type:1}).then((function(t){e.catList=t}))},getEditInfo:function(e){var t=this;this.request(c["a"].getCategoryDetail,{category_id:this.id}).then((function(e){if(console.log(e.showMethod),t.img=e.img,t.showMethod=e.showMethod,t.detail={category_id:e.category_id,name:e.name,description:e.description,join_num:e.join_num,views_num:e.views_num,img:e.img,cat_id:e.cat_id,sort:e.sort,status:e.status},e.img){t.imgUploadList=[];for(var a=0;a<e.img.length;a++){var i={uid:a,name:"img_"+a,status:"done",url:e.img[a]};t.imgUploadList.push(i)}}"object"==Object(o["a"])(e.detail)&&(t.detail=e.detail),console.log("detail",t.detail)}))}}},g=u,m=a("2877"),p=Object(m["a"])(g,i,r,!1,null,null,null);t["default"]=p.exports},"7b3f":function(e,t,a){"use strict";var i={uploadImg:"/common/common.UploadFile/uploadImg"};t["a"]=i}}]);