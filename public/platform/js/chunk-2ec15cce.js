(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ec15cce","chunk-2d230059"],{"5e14":function(t,e,a){"use strict";a("c1ff")},be9a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"20px",padding:"20px","background-color":"#fff"}},[a("a-form-model",{attrs:{layout:"inline",model:t.searchForm}},[a("a-form-model-item",{attrs:{label:"搜索"}},[a("a-input",{attrs:{placeholder:"请输入标题"},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}})],1),a("a-form-model-item",[a("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(e){return t.submitForm(!0)}}},[t._v("搜索")]),a("a-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("添加资讯")])],1)],1),a("a-table",{staticStyle:{"padding-top":"10px"},attrs:{rowKey:"pigcms_id",columns:t.columns,"data-source":t.datalist,pagination:t.pagination},scopedSlots:t._u([{key:"banking_title",fn:function(e){return a("span",{},[a("a-tooltip",{attrs:{placement:"top",title:e}},[a("label",{staticClass:"banking_title text-els"},[t._v(t._s(e))])])],1)}},{key:"action",fn:function(e,i){return a("span",{},[a("a",{on:{click:function(){return t.handleEdit(i.pigcms_id)}}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(){return t.handleDel(i.pigcms_id)}}},[t._v("删除")])],1)}}])}),"editScan"===t.currentBtn.props?a("editInformation",{attrs:{visible:t.editVisible,title:t.currentBtn.title,formData:t.currentBtn.data},on:{getDataList:t.getDataList,handleCancel:function(e){t.editVisible=!1}}}):t._e()],1)},n=[],o=a("5530"),s=a("b706"),r=a("eb06"),l=a("c1df"),c=a.n(l),d=[{title:"编号",dataIndex:"pigcms_id",key:"pigcms_id"},{title:"标题",dataIndex:"title",key:"title",scopedSlots:{customRender:"banking_title"}},{title:"显示时间",dataIndex:"show_time",key:"show_time"},{title:"浏览量",dataIndex:"view_count",key:"view_count"},{title:"添加时间",dataIndex:"add_time",key:"add_time"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],m={components:{editInformation:r["default"]},data:function(){return{labelCol:{span:4},wrapperCol:{span:14},datalist:[],columns:d,editVisible:!1,currentBtn:"",searchForm:{name:"",status:-1},pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showTotal:function(t){return"共 ".concat(t," 条记录")}}}},created:function(){this.getDataList(!1)},methods:{moment:c.a,getDataList:function(t){var e=this,a=Object(o["a"])({},this.searchForm);!0===t?(a.page=1,this.$set(this.pagination,"current",1)):(a.page=this.pagination.current,this.$set(this.pagination,"current",this.pagination.current)),a.pageSize=this.pagination.pageSize,this.request(s["a"].getInformationList,a).then((function(t){e.datalist=t.data,e.$set(e.pagination,"total",t.total)}))},submitForm:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getDataList(t)},resetForm:function(){this.$set(this,"searchForm",{name:"",status:-1}),this.$set(this.pagination,"current",1),this.getDataList()},onPageChange:function(t,e){this.$set(this.pagination,"current",t),this.submitForm()},onPageSizeChange:function(t,e){this.$set(this.pagination,"pageSize",e),this.submitForm()},handleAdd:function(){this.currentBtn={props:"editScan",title:"添加资讯",data:{title:"",image:"",show_type:"1",start_time:null,end_time:null,content:""}},this.editVisible=!0},handleDel:function(t){var e=this;this.$confirm({title:"确认要删除该项?",centered:!0,okText:"确定",cancelText:"取消",onOk:function(){e.request(s["a"].delInformation,{id:t},"GET").then((function(t){e.$message.success("操作成功!"),setTimeout((function(){e.getDataList()}),1e3)}))},onCancel:function(){}})},handleEdit:function(t){var e=this;this.request(s["a"].getInformationData,{id:t},"GET").then((function(t){e.currentBtn={props:"editScan",title:"编辑资讯",data:t},e.editVisible=!0}))},setCancel:function(){this.setVisible=!1},setOk:function(){this.submitConfig()}}},u=m,h=(a("5e14"),a("2877")),f=Object(h["a"])(u,i,n,!1,null,"52075b36",null);e["default"]=f.exports},c1ff:function(t,e,a){},eb06:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{visible:t.visible,title:t.title,width:"60%",destroyOnClose:!0,confirmLoading:t.confirmLoading},on:{cancel:t.handleCancel,ok:t.handleOk}},[a("a-form-model",{attrs:{model:t.formData,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"资讯标题",required:""}},[a("a-input",{model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),a("a-form-model-item",{attrs:{label:"图片",required:"",help:"建议尺寸104*78"}},[a("a-upload",{attrs:{name:"reply_pic","list-type":"picture","show-upload-list":!1,data:{upload_dir:""},action:"/v20/public/index.php/common/common.UploadFile/uploadPictures"},on:{change:t.handleUploadChange}},[t.image?a("img",{staticStyle:{width:"120px",height:"120px"},attrs:{src:t.image,alt:"image"}}):a("div",[!0===t.loading?a("a-icon",{attrs:{type:"loading"}}):t._e(),a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 上传 ")],1)],1)])],1),a("a-form-model-item",{attrs:{label:"显示时长",required:""}},[a("a-radio-group",{model:{value:t.formData.show_type,callback:function(e){t.$set(t.formData,"show_type",e)},expression:"formData.show_type"}},[a("a-radio",{attrs:{value:"1"}},[t._v(" 永久显示 ")]),a("a-radio",{attrs:{value:"2"}},[t._v(" 时间段 ")])],1)],1),2==t.formData.show_type?a("a-form-model-item",{attrs:{label:"显示开始时间",required:""}},[null===t.formData.start_time?a("a-date-picker",{staticStyle:{width:"100%"},attrs:{"default-value":null,"show-time":"",type:"date",placeholder:"显示开始时间"},on:{change:t.startTimeChange}}):a("a-date-picker",{staticStyle:{width:"100%"},attrs:{"default-value":t.moment(t.formData.start_time),"show-time":"",type:"date",placeholder:"显示开始时间"},on:{change:t.startTimeChange}})],1):t._e(),2==t.formData.show_type?a("a-form-model-item",{attrs:{label:"显示结束时间",required:""}},[null===t.formData.start_time?a("a-date-picker",{staticStyle:{width:"100%"},attrs:{"default-value":null,"show-time":"",type:"date",placeholder:"显示结束时间"},on:{change:t.endTimeChange}}):a("a-date-picker",{staticStyle:{width:"100%"},attrs:{"default-value":t.moment(t.formData.end_time),"show-time":"",type:"date",placeholder:"显示结束时间"},on:{change:t.endTimeChange}})],1):t._e(),a("a-form-model-item",{attrs:{label:"资讯内容"}},[a("rich-text",{attrs:{info:t.formData.content},on:{"update:info":function(e){return t.$set(t.formData,"content",e)}}})],1)],1)],1)],1)},n=[],o=a("b706"),s=a("884f"),r=a("c1df"),l=a.n(r);function c(t,e){var a=new FileReader;a.addEventListener("load",(function(){return e(a.result)})),a.readAsDataURL(t)}var d={components:{RichText:s["a"]},props:{visible:Boolean,title:String,formData:Object},data:function(){return{labelCol:{span:6},wrapperCol:{span:12},loading:!1,image:"",confirmLoading:!1}},watch:{formData:function(t){this.image=this.formData.image}},mounted:function(){this.image=this.formData.image},methods:{moment:l.a,handleOk:function(){var t=this;if(console.log(this.formData,"dddddd"),""===this.formData.title)return this.$message.error("资讯标题必填！"),!1;if(""===this.formData.image)return this.$message.error("资讯图片必传！"),!1;if("2"===this.formData.show_type){if(void 0===this.formData.start_time||null===this.formData.start_time)return this.$message.error("显示开始时间必填！"),!1;if(void 0===this.formData.end_time||null===this.formData.end_time)return this.$message.error("显示结束时间必填！"),!1}this.confirmLoading=!0,this.request(o["a"].editOrAddInformation,this.formData).then((function(e){t.$message.success("操作成功!",1),setTimeout((function(){t.image="",t.formData={},t.$emit("handleCancel"),t.$emit("getDataList",!1),t.confirmLoading=!1}),1e3)}))},handleCancel:function(){this.$emit("handleCancel")},handleUploadChange:function(t){var e=this;if("uploading"!==t.file.status){if("done"===t.file.status&&1e3===t.file.response.status){var a=t.file.response.data;this.$set(this.formData,"image",a),c(t.file.originFileObj,(function(t){e.image=t,e.loading=!1}))}}else this.loading=!0},startTimeChange:function(t,e){this.$set(this.formData,"start_time",e)},endTimeChange:function(t,e){this.$set(this.formData,"end_time",e)}}},m=d,u=a("2877"),h=Object(u["a"])(m,i,n,!1,null,null,null);e["default"]=h.exports}}]);