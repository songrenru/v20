(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e3e54538","chunk-112c6452","chunk-112c6452"],{"0d74":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:" pt-20 pl-20 pr-20 pb-20  br-10"},[r("a-spin",{attrs:{spinning:t.confirmLoading}},[r("a-tabs",{attrs:{"default-active-key":"loans"}},[r("a-tab-pane",{key:"loans",attrs:{tab:t.tabName}})],1),r("a-form-model",{ref:"ruleForm",attrs:{model:t.formData,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[r("a-card",{attrs:{bordered:!1}},[r("a-form-model-item",{attrs:{label:"楼盘名称:",colon:!1,prop:"title",rules:[{required:!0,message:"楼盘名称不能为空",trigger:["blur"]}]}},[r("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:100,placeholder:"请输入名称"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),r("a-form-model-item",{attrs:{label:"楼盘平均价格:",colon:!1,prop:"price",help:"元/平方米",rules:[{required:!0,message:"楼盘平均价格不能为空",trigger:["blur"]}]}},[r("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:100,placeholder:"请输入楼盘平均价格,单位元/平方米"},model:{value:t.formData.price,callback:function(e){t.$set(t.formData,"price",e)},expression:"formData.price"}})],1),r("a-form-model-item",{attrs:{label:"楼盘面积:",colon:!1,prop:"acreage",rules:[{required:!0,message:"楼盘面积不能为空",trigger:["blur"]}]}},[r("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:100,placeholder:"请输入楼盘面积"},model:{value:t.formData.acreage,callback:function(e){t.$set(t.formData,"acreage",e)},expression:"formData.acreage"}})],1),r("a-form-model-item",{attrs:{label:"地址",required:""}},[r("a-cascader",{staticStyle:{width:"300px"},attrs:{options:t.formData.areas,placeholder:"选择",value:t.sel_areas},on:{change:t.onChangeArea}})],1),r("a-form-model-item",{attrs:{label:"详细地址:",colon:!1,prop:"title",rules:[{required:!0,message:"详细地址不能为空",trigger:["blur"]}]}},[r("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:100,placeholder:"请输入详细地址"},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address",e)},expression:"formData.address"}})],1),r("a-form-model-item",{attrs:{label:"经纬度:",colon:!1,required:""}},[r("a-row",{staticStyle:{"margin-bottom":"20px"}},[r("a-col",{attrs:{span:15}},[r("a-input",{staticStyle:{width:"200px"},attrs:{disabled:!0,value:t.formData.longlat,placeholder:"请选择位置"}}),t._v(" "),r("a",{staticStyle:{"margin-left":"5px"},on:{click:function(e){return t.$refs.mapPointModel.selectPoint()}}},[t._v("地图选点")])],1)],1)],1),r("a-form-model-item",{attrs:{label:"楼盘咨询电话:",colon:!1,prop:"phone",rules:[{required:!0,message:"楼盘咨询电话不能为空",trigger:["blur"]}]}},[r("a-input",{staticStyle:{width:"300px"},attrs:{maxLength:100,placeholder:"请输入"},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}})],1),r("a-form-model-item",{attrs:{label:"上传标题图片",required:"",help:"只能上传一张"}},[r("a-row",[r("a-input",{attrs:{hidden:""},model:{value:t.formData.cover_image,callback:function(e){t.$set(t.formData,"cover_image",e)},expression:"formData.cover_image"}}),[r("div",{staticClass:"clearfix"},[r("a-upload",{attrs:{action:t.action,name:t.uploadName,data:{upload_dir:t.upload_dir},"list-type":"picture-card","file-list":t.fileList1},on:{preview:t.handlePreview1,change:t.handleChange}},[r("a-icon",{attrs:{type:"plus"}}),r("div",{staticClass:"ant-upload-text"},[t._v("上传图片")])],1),r("a-modal",{attrs:{visible:t.previewVisible1,footer:null},on:{cancel:t.handleCancel1}},[r("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)]],2)],1),r("a-form-model-item",{attrs:{label:"上传详情轮播图",required:""}},[r("a-row",[r("a-input",{attrs:{hidden:""},model:{value:t.formData.images,callback:function(e){t.$set(t.formData,"images",e)},expression:"formData.images"}}),[r("div",{staticClass:"clearfix"},[r("a-upload",{attrs:{action:t.action,name:t.uploadName,data:{upload_dir:t.upload_dir},"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview,change:t.handleChange1}},[r("a-icon",{attrs:{type:"plus"}}),r("div",{staticClass:"ant-upload-text"},[t._v("上传图片")])],1),r("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[r("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)]],2)],1),r("a-form-model-item",{attrs:{label:"楼盘详情:",colon:!1,required:""}},[r("a-row",{staticStyle:{"margin-bottom":"20px"}},[r("a-col",{attrs:{span:24}},[r("rich-text",{attrs:{info:t.formData.content},on:{"update:info":function(e){return t.$set(t.formData,"content",e)}}})],1)],1)],1)],1)],1),r("div",{staticClass:"page-header"},[r("a-button",{staticClass:"ml-20 mt-20 mb-20",attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit()}}},[t._v("提交")])],1)],1),r("map-point",{ref:"mapPointModel",on:{loadRefresh:t.setLongLat}})],1)},i=[],o=r("c7eb"),n=r("1da1"),s=(r("d3b7"),r("b0c0"),r("a434"),r("a15b"),r("f9e9")),l=r("ea7a"),c=r("884f"),u=r("6625"),h=r.n(u);function f(t){return new Promise((function(e,r){var a=new FileReader;a.readAsDataURL(t),a.onload=function(){return e(a.result)},a.onerror=function(t){return r(t)}}))}var d={name:"SaleBuildingEdit",components:{RichText:c["a"],mapPoint:l["default"],VueUeditorWrap:h.a},props:{upload_dir:{type:String,default:""}},data:function(){return{title:this.L("新建门票"),labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:16}},visible:!1,confirmLoading:!1,previewVisible1:!1,previewVisible:!1,previewImage:"",previewImage1:"",sel_areas:[],fileList1:[],fileList:[],tabName:"新建楼盘",form:this.$form.createForm(this),action:"/v20/public/index.php/common/common.UploadFile/uploadPictures",uploadName:"reply_pic",formData:{acreage:void 0,houses_id:0,longlat:"",title:"",price:void 0,long:void 0,lat:void 0,province_id:0,city_id:0,area_id:0,address:"",phone:"",cover_image:"",images:"",content:"",areas:[]},ueConfig:{enableAutoSave:!1,autoSyncData:!1,autoHeightEnabled:!1,initialFrameHeight:350,initialFrameWidth:"100%",serverUrl:"/v20/public/static/UEditor/php/controller.php",UEDITOR_HOME_URL:"/v20/public/static/UEditor/"}}},watch:{"$route.query.houses_id":function(t){t>0?(this.formData.houses_id=t,this.tabName="编辑楼盘",this.getEditInfo()):(this.tabName="新增楼盘",this.getDetail())}},mounted:function(){this.formData.houses_id=this.$route.query.houses_id,this.form=this.$form.createForm(this),this.formData.houses_id>0?this.getEditInfo():this.getDetail()},activated:function(){this.formData.houses_id=this.$route.query.houses_id,this.form=this.$form.createForm(this),this.formData.houses_id>0?this.getEditInfo():this.getDetail()},methods:{onChangeArea:function(t){this.formData.province_id=t[0],this.formData.city_id=t[1],this.formData.area_id=t[2],this.sel_areas=[t[0],t[1],t[2]]},setLongLat:function(t){this.formData.longlat=t,this.$set(this.formData,"longlat",t)},handlePreview:function(t){var e=this;return Object(n["a"])(Object(o["a"])().mark((function r(){return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.url||t.preview){r.next=4;break}return r.next=3,f(t.originFileObj);case 3:t.preview=r.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return r.stop()}}),r)})))()},handlePreview1:function(t){var e=this;return Object(n["a"])(Object(o["a"])().mark((function r(){return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.url||t.preview){r.next=4;break}return r.next=3,f(t.originFileObj);case 3:t.preview=r.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible1=!0;case 6:case"end":return r.stop()}}),r)})))()},handleChange:function(t){var e=t.fileList;if(this.fileList1=e,e.length>0){var r=e.length-1;"done"==this.fileList1[r].status&&(this.formData.cover_image=this.fileList1[r].response.data,console.log(this.fileList1[r].response.data,"this.fileList1[len].thumbUrl"),this.fileList1[0].uid="logo",this.fileList1[0].name="logo_1",this.fileList1[0].status="done",this.fileList1[0].url=this.fileList1[r].response.data,e.length>1&&this.fileList1.splice(0,r))}else this.formData.cover_image=""},handleChange1:function(t){var e=t.fileList;this.fileList=e;for(var r=[],a=0;a<this.fileList.length;a++)"done"==this.fileList[a].status&&(void 0!==this.fileList[a].url?r.push(this.fileList[a].url):r.push(this.fileList[a].response.data));r.length>0&&(this.formData.images=r.join(","))},handleCancel1:function(){this.previewVisible1=!1},handleCancel:function(){this.previewVisible=!1},handleSubmit:function(){var t=this;return this.formData.title?this.formData.price?this.formData.acreage?""==this.formData.longlat?(this.$message.error("请选择经纬度"),!1):this.formData.province_id&&this.formData.city_id&&this.formData.area_id?void 0==this.formData.address||""==this.formData.address?(this.$message.error("请输入详细地址"),!1):void 0==this.formData.cover_image||""==this.formData.cover_image?(this.$message.error("请上传标题图片"),!1):void 0==this.formData.phone||""==this.formData.phone?(this.$message.error("请输入楼盘咨询电话"),!1):void 0==this.formData.images||""==this.formData.images?(this.$message.error("请上传详情轮播图"),!1):void 0==this.formData.content||""==this.formData.content?(this.$message.error("请输入楼盘详情"),!1):void this.request(s["a"].editHouseFloor,this.formData).then((function(e){t.$message.success("保存成功！"),t.formData.houses_id=0,setTimeout((function(){t.$message.destroy(),t.confirmLoading=!1,t.$router.push({path:"/life_tools/platform.LifeTools/saleBuildingList"})}),1500)})).catch((function(e){t.confirmLoading=!1})):(this.$message.error("请选择地址"),!1):(this.$message.error("请输入楼盘面积"),!1):(this.$message.error("请输入楼盘价格"),!1):(this.$message.error("请输入楼盘名称"),!1)},getEditInfo:function(){var t=this;this.request(s["a"].getHousesFloorMsg,{houses_id:this.formData.houses_id}).then((function(e){if(t.formData=e.list,t.formData.areas=e.areas,e.list.long&&e.list.lat?t.formData.longlat=e.list.long+","+e.list.lat:t.formData.longlat="",t.fileList1=[],t.fileList=[],e.list.swiper_image.length>0)for(var r=0;r<e.list.swiper_image.length;r++){var a={uid:r,name:"image_"+r,status:"done",url:e.list.swiper_image[r]};t.fileList.push(a)}if(e.list.cover_image){var i={uid:"logo",name:"logo_1",status:"done",url:e.list.cover_image};t.fileList1.push(i)}t.sel_areas=[e.list.province_id,e.list.city_id,e.list.area_id]}))},getDetail:function(){var t=this;this.formData={acreage:void 0,houses_id:0,longlat:"",title:"",price:void 0,long:void 0,lat:void 0,province_id:0,city_id:0,area_id:0,address:"",phone:"",cover_image:"",images:"",content:"",areas:[]},this.fileList1=[],this.fileList=[],this.sel_areas=[],this.request(s["a"].getHousesFloorMsg,{houses_id:0}).then((function(e){t.formData.areas=e.areas}))}}},m=d,p=(r("f1a3"),r("0c7c")),g=Object(p["a"])(m,a,i,!1,null,"55ecdd56",null);e["default"]=g.exports},"1da1":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("d3b7");function a(t,e,r,a,i,o,n){try{var s=t[o](n),l=s.value}catch(c){return void r(c)}s.done?e(l):Promise.resolve(l).then(a,i)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var n=t.apply(e,r);function s(t){a(n,i,o,s,l,"next",t)}function l(t){a(n,i,o,s,l,"throw",t)}s(void 0)}))}}},"1ec2":function(t,e,r){},c7eb:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("b636"),r("944a"),r("0c47"),r("23dc"),r("3410"),r("159b"),r("b0c0"),r("131a"),r("fb6a");var a=r("53ca");function i(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
i=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function f(t,e,r,a){var i=e&&e.prototype instanceof b?e:b,o=Object.create(i.prototype),s=new P(a||[]);return n(o,"_invoke",{value:O(t,r,s)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var m="suspendedStart",p="suspendedYield",g="executing",v="completed",y={};function b(){}function w(){}function _(){}var L={};h(L,l,(function(){return this}));var D=Object.getPrototypeOf,x=D&&D(D(F([])));x&&x!==r&&o.call(x,l)&&(L=x);var E=_.prototype=b.prototype=Object.create(L);function $(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(i,n,s,l){var c=d(t[i],t,n);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==Object(a["a"])(h)&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,s,l)}),(function(t){r("throw",t,s,l)})):e.resolve(h).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,l)}))}l(c.arg)}var i;n(this,"_invoke",{value:function(t,a){function o(){return new e((function(e,i){r(t,a,e,i)}))}return i=i?i.then(o,o):o()}})}function O(e,r,a){var i=m;return function(o,n){if(i===g)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw n;return{value:t,done:!0}}for(a.method=o,a.arg=n;;){var s=a.delegate;if(s){var l=j(s,a);if(l){if(l===y)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===m)throw i=v,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=g;var c=d(e,r,a);if("normal"===c.type){if(i=a.done?v:p,c.arg===y)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(i=v,a.method="throw",a.arg=c.arg)}}}function j(e,r){var a=r.method,i=e.iterator[a];if(i===t)return r.delegate=null,"throw"===a&&e.iterator["return"]&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==a&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+a+"' method")),y;var o=d(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var n=o.arg;return n?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[l];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function r(){for(;++i<e.length;)if(o.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return n.next=n}}throw new TypeError(Object(a["a"])(e)+" is not iterable")}return w.prototype=_,n(E,"constructor",{value:_,configurable:!0}),n(_,"constructor",{value:w,configurable:!0}),w.displayName=h(_,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,h(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},$(k.prototype),h(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,a,i,o){void 0===o&&(o=Promise);var n=new k(f(t,r,a,i),o);return e.isGeneratorFunction(r)?n:n.next().then((function(t){return t.done?t.value:n.next()}))},$(E),h(E,u,"Generator"),h(E,l,(function(){return this})),h(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var a in e)r.push(a);return r.reverse(),function t(){for(;r.length;){var a=r.pop();if(a in e)return t.value=a,t.done=!1,t}return t.done=!0,t}},e.values=F,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(a,i){return s.type="throw",s.arg=e,r.next=a,i&&(r.method="next",r.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i],s=n.completion;if("root"===n.tryLoc)return a("end");if(n.tryLoc<=this.prev){var l=o.call(n,"catchLoc"),c=o.call(n,"finallyLoc");if(l&&c){if(this.prev<n.catchLoc)return a(n.catchLoc,!0);if(this.prev<n.finallyLoc)return a(n.finallyLoc)}else if(l){if(this.prev<n.catchLoc)return a(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return a(n.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var n=i?i.completion:{};return n.type=t,n.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(n)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var a=r.completion;if("throw"===a.type){var i=a.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,a){return this.delegate={iterator:F(e),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=t),y}},e}},f1a3:function(t,e,r){"use strict";r("1ec2")}}]);